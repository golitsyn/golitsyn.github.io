/*! For license information please see app.js.LICENSE */
!function(n){var i={};function __webpack_require__(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}__webpack_require__.m=n,__webpack_require__.c=i,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=520)}([function(t,e,n){var i,r,o,T=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(314),n(17),n(315),n(195),n(325),n(327),n(328),n(330),n(331),n(333),n(336),n(337),n(338),n(339),n(340),n(343),n(110),n(344),n(347),n(348),n(355),n(357),n(359),n(361),n(376),n(380),n(386),n(391)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var C=function(t){function Application(){return null!==t&&t.apply(this,arguments)||this}return T(Application,t),Object.defineProperty(Application,"static",{get:function(){return this.getComponent(n.StaticDataService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"debug",{get:function(){return this.getComponent(r.DebugService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"dynamic",{get:function(){return this.getComponent(o.DynamicDataService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"view",{get:function(){return this.getComponent(a.ViewService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"requirements",{get:function(){return this.getComponent(s.RequirementsService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"network",{get:function(){return this.getComponent(v.NetworkService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"dataProvider",{get:function(){return this.getComponent(c.DataProviderService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"price",{get:function(){return this.getComponent(u.PriceService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"award",{get:function(){return this.getComponent(p.AwardService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"profiles",{get:function(){return this.getComponent(l.ProfilesService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"social",{get:function(){return this.getComponent(d.SocialNetworkService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"server",{get:function(){return this.getComponent(_.ServerService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"operation",{get:function(){return this.getComponent(h.OperationService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"metrics",{get:function(){return this.getComponent(f.MetricsService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"settings",{get:function(){return this.getComponent(y.SettingsService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"resources",{get:function(){return this.getComponent(m.ResourcesService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"initialization",{get:function(){return this.getComponent(b.InitializationService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"model",{get:function(){return this.getComponent(g.ModelService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"payment",{get:function(){return this.getComponent(w.PaymentService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"confirm",{get:function(){return this.getComponent(O.ConfirmService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"mail",{get:function(){return this.getComponent(S.MailService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"tooltip",{get:function(){return this.getComponent(P.TooltipService)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"objects",{get:function(){return this.getComponent(E.ObjectsModule)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"animal",{get:function(){return this.getComponent(A.AnimalModule)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"designObject",{get:function(){return this.getComponent(M.DesignObjectModule)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"toys",{get:function(){return this.getComponent(D.ToysModule)},enumerable:!0,configurable:!0}),Object.defineProperty(Application,"viralExchange",{get:function(){return this.getComponent(I.ViralExchangeService)},enumerable:!0,configurable:!0}),Application}(i.Services);e.Application=C}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function DisplayObjectContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(DisplayObjectContainerMediator,e),DisplayObjectContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container=this.viewHandle.displayObject},DisplayObjectContainerMediator.prototype.child=function(t){return this._container.getChildByName(t)},DisplayObjectContainerMediator.prototype.children=function(t){return this._container.getChildrenByName(t)},DisplayObjectContainerMediator}(n.DisplayObjectMediator);e.DisplayObjectContainerMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.GUINames||(e.GUINames={})).BACKGROUND="background",n.HUD="hud",n.SNOW="snow",n.LONG_REQUEST_WINDOW="longRequestWindow",n.ERROR_WINDOW="errorWindow",n.ANIMATIONS="animations",n.WINDOW_DIVIDER="windowDivider",n.FRONT_FRAME="frontFrame",n.PAYMENT_ERROR_WINDOW="paymentErrorWindow",n.PAYMENT_ASYNC_WINDOW="paymentAsyncWindow",n.SCREEN_LOCK="screenLock",n.PROCESS_PAYMENT_WINDOW="processPaymentWindow",n.CONFIRM_BUY_WINDOW="confirmBuyWindow",n.CONFIRM_BEAUTY_WINDOW="confirmBeautyWindow",n.CONFIRM_TEXT_WINDOW="confirmTextWindow",n.NEW_LEVEL_WINDOW="newLevelWindow",n.OBJECTS="objects",n.SELECT_OBJECT_WINDOW="selectObjectWindow",n.OBJECT_LOCK_TOOLTIP="objectInfoLockTooltip",n.USE_ENERGY_WINDOW="useEnergyWindow",n.OBJECT_MAX_LEVEL_WINDOW="objectMaxLevelWindow",n.UPGRADE_OBJECT_WINDOW="upgradeObjectWindow",n.STAGE_UP_OBJECT_WINDOW="stageUpObjectWindow",n.OBJECTS_READY_MARKERS="objectsMarkers",n.GLADE_STARS_WINDOW="gladeStarsWindow",n.OBJECT_GLADE_TOOLTIP="objectGladeTooltip",n.OBJECT_GLADE_TOOLTIP_GENERATOR_CONTAINER="objectGladeTooltipGeneratorContainer",n.OBJECT_GLADE_TOOLTIP_ENERGY_LEFT_CONTAINER="objectGladeTooltipEnergyLeftContainer",n.OBJECT_GLADE_TOOLTIP_LOOPED_STAGE_CONTAINER="objectGladeTooltipLoopedStageContainer",n.OBJECT_BEAUTY_LOCK_WINDOW="objectBeautyLockWindow",n.FRIENDS_LIKES_WINDOW="friendsLikesWindow",n.GLADE_DUEL_START_WINDOW="gladeDuelStartWindow",n.GLADE_DUEL_WINDOW="gladeDuelWindow",n.GLADE_DUEL_GLADE_CONTAINER="gladeDuelGladeContainer",n.FRIENDS_WINDOW="friendsWindow",n.FRIENDS_HUD="friendHud",n.GUEST_FRIENDS_HUD="guestFriendHud",n.FRIENDS_PANEL="friendsPanel",n.FRIEND_OBJECTS="friendObjects",n.INVITE_FRIENDS_WINDOW="inviteFriendsWindow",n.INVITE_FRIENDS_AWARDS_WINDOW="inviteFriendsAwardWindow",n.FRIEND_NOT_WORK_WINDOW="friendNotWorkWindow",n.CANT_SEND_VIRAL_NOTICE_WINDOW="cantSendViralNoticeWindow",n.CHEST_AND_SALE_WINDOW="chestAndSaleWindow",n.ONE_PROMO_WINDOW="onePromoWindow",n.OPEN_CHEST_WINDOW="openChestWindow",n.CHEST_ALREADY_OPENED_WINDOW="chestAlreadyOpenedWindow",n.BOXES_WINDOW="boxesWindow",n.BOX_AWARD_WINDOW="boxAwardWindow",n.BOX_TOOLTIP="boxTooltip",n.ASK_VIRAL_WINDOW="askViralWindow",n.GENERATORS_WINDOW="generatorsWindow",n.FARM_WINDOW="farmWindow",n.FARM_CELL_WINDOW="farmCellWindow",n.FARM_GENERATOR_WINDOW="farmGeneratorWindow",n.SHOP_WINDOW="shopsWindow",n.BEAUTY_WINDOW="beautyWindow",n.BEAUTY_INFO_WINDOW="beautyInfoWindow",n.BEAUTY_AWARD_WINDOW="beautyAwardWindow",n.QUESTS_WINDOW="questsWindow",n.TOYS_WINDOW="toysWindow",n.EDIT_TOYS_WINDOW="editToysWindow",n.DECOR_WINDOW="decorWindow",n.DECOR_SELECT_FRIEND_WINDOW="decorSelectFriendWindow",n.DESIGN_OBJECT_WINDOW="designObjectWindow",n.DESIGN_OBJECT_DECOR_BACK="designObjectDecorBack",n.DESIGN_OBJECT_DECOR_FRONT="designObjectDecorFront",n.DESIGN_OBJECT_STAGE_UP_WINDOW="designObjectStageUpWindow",n.AWARDS_WINDOW="awardsWindow",n.FULLSCREEN_WINDOW="fullscreenWindow",n.USER_PROFILE_WINDOW="userProfileWindow",n.TEXT_TOOLTIP="textTooltip",n.USER_LEVEL_TOOLTIP="userLevelTooltip",n.WORKSHOP_WINDOW="workshopWindow",n.WORKSHOP_GIFTS_WINDOW="workshopGiftsWindow",n.WORKSHOP_GIFTS_ERROR_WINDOW="workshopGiftsErrorWindow",n.EXTRA_ITEMS_WINDOW="extraItemsWindow",n.SHOP_CATEGORY_TOGGLE_BUTTON="shopCategoryToggleButton",n.EXTRA_ITEM_CATEGORY_TOGGLE_BUTTON="extraItemCategoryToggleButton",n.EXTRA_ITEMS_CATEGORY="itemsCategory",n.SIMPLE_EXTRA_ITEM_CONTAINER="simpleExtraItemContainer",n.SELECTED_EXTRA_ITEM_CONTAINER="selectedExtraItemContainer",n.LOCKED_EXTRA_ITEM_CONTAINER="lockedExtraItemContainer",n.EXTRA_ITEMS_SHOP_PREVIEW_CONTAINER="previewContainer",n.ANIMAL_LAYER_WINDOW="animalLayerWindow",n.ANIMAL_WINDOW="animalWindow",n.FRIEND_ANIMAL_LAYER_WINDOW="friendAnimalLayerWindow",n.RED_PROMO_CONTAINER="redPromoContainer",n.GREEN_PROMO_CONTAINER="greenPromoContainer",n.SPECIAL_PROMO_CONTAINER="specialPromoContainer",n.TOY_GREEN_PROMO_CONTAINER="toyGreenPromoContainer",n.CHEST_PROMO_CONTAINER="chestPromoContainer",n.BLUE_2_PROMO_CONTAINER="blue2PromoContainer",n.RED_3_PROMO_CONTAINER="red3PromoContainer",n.PROMO_ICON="promoIcon",n.START_BUNDLE_WINDOW="startBundleWindow",n.PROMO_REGULAR_SALE_3_WINDOW="promoRegularSale3Window",n.PROMO_SPECIAL_OK_SALE_3_WINDOW="promoSpecialOKSale3Window",n.PROMO_SPECIAL_VK_SALE_3_WINDOW="promoSpecialVKSale3Window",n.PROMO_GAME_SALE_OK_WINDOW="promoGameSaleOKWindow",n.PROMO_GAME_SALE_VK_WINDOW="promoGameSaleVKWindow",n.PROMO_BLACK_FRIDAY_VK_WINDOW="promoBlackFridayVKWindow",n.PROMO_BLACK_FRIDAY_OK_WINDOW="promoBlackFridayOKWindow",n.PROMO_SALE_DAY_SPECIAL_OK_SALE_3_WINDOW="promoSaleDaySpecialOKSale3Window",n.PROMO_SALE_DAY_SPECIAL_VK_SALE_3_WINDOW="promoSaleDaySpecialVKSale3Window",n.PROMO_SALE_DAY_GAME_SALE_OK_WINDOW="promoSaleDayGameSaleOKWindow",n.PROMO_SALE_DAY_GAME_SALE_VK_WINDOW="promoSaleDayGameSaleVKWindow",n.PROMO_NEW_YEAR_SALE_OK_WINDOW="promoNewYearSaleOKWindow",n.PROMO_NEW_YEAR_SALE_VK_WINDOW="promoNewYearSaleVKWindow",n.START_QUEST_WINDOW="startQuestWindow",n.START_QUEST_ICON="startQuestIcon",n.ROULETTE_WINDOW="rouletteWindow",n.ANY_ROULETTE_WINDOW="anyRouletteWindow",n.SETTINGS_WINDOW="settingsWindow",n.SEND_LOG_NOTICE_WINDOW="sendLogNoticeWindow",n.GUIDE_DIVIDER="guideDivider",n.GUIDE_ARROW="guideArrow",n.GUIDE_BUBBLE="guideBubble",n.GUIDE_BUBBLE_BUTTON="guideBubbleButton",n.GUIDE_DED_BUBBLE="guideDedBubble",n.GUIDE_DED_BUBBLE_BUTTON="guideDedBubbleButton",n.GUIDE_SKIP_BUTTON_LEFT="guideSkipButtonLeft",n.GUIDE_SKIP_BUTTON_RIGHT="guideSkipButtonRight",n.GUIDE_SKIP_BUTTON_LEFT_BOTTOM="guideSkipButtonLeftBottom",n.GUIDE_SKIP_BUTTON_RIGHT_BOTTOM="guideSkipButtonRightBottom",n.CLAN_WINDOW="unionWindow",n.RATING_WINDOW="ratingWindow",n.RATING_AWARD_WINDOW="ratingAwardWindow",n.HAPPY_NEW_YEAR_WINDOW="newYearEventWindow",n.EVENT_NEW_YEAR_WINDOW="eventNewYearWindow",n.EVENT_NEW_YEAR_ICON="eventNewYearIcon",n.EVENT_NEW_YEAR_SELECT_FRIEND_WINDOW="eventNewYearSelectFriendWindow",n.EVENT_NEW_YEAR_LIMIT_WINDOW="eventNewYearLimitWindow",n.EVENT_NEW_YEAR_GIFTS_WINDOW="eventNewYearGiftsWindow",n.EVENT_NEW_YEAR_EXP_BAR="eventNewYearExpBar",n.EVENT_NEW_YEAR_EXP_BAR_TOOLTIP="eventNewYearExpBarTooltip",n.EVENT_NEW_YEAR_OPEN_GIFT_WINDOW="eventNewYearOpenGiftWindow",n.OK_MONEY_EVENT_WINDOW="okMoneyEventWindow",n.OK_MONEY_EVENT_ICON="okMoneyEventIcon",n.NEWS_PRESENTS_WINDOW="newsPresentsWindow"}.apply(e,[n,e]))||(t.exports=i)},function(t,y,m){"use strict";(function(t,e){m.d(y,"k",function(){return n}),m.d(y,"m",function(){return r}),m.d(y,"l",function(){return i}),m.d(y,"i",function(){return a}),m.d(y,"a",function(){return s}),m.d(y,"b",function(){return c}),m.d(y,"c",function(){return u}),m.d(y,"d",function(){return p}),m.d(y,"e",function(){return l}),m.d(y,"f",function(){return d}),m.d(y,"g",function(){return h}),m.d(y,"h",function(){return _}),m.d(y,"j",function(){return f});var n="undefined"!=typeof window?window:t.exports&&void 0!==e?e:{},i=function(l,t){var d={},i=l.document,h=l.GreenSockGlobals=l.GreenSockGlobals||l;if(h.TweenLite)return h.TweenLite;var e,n,r,_,f,o,a,y=function(t){var e,n=t.split("."),i=h;for(e=0;e<n.length;e++)i[n[e]]=i=i[n[e]]||{};return i},m=y("com.greensock"),v=1e-10,c=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},b=function(){},g=(o=Object.prototype.toString,a=o.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&o.call(t)===a)}),w={},O=function(s,c,u,p){this.sc=w[s]?w[s].sc:[],(w[s]=this).gsClass=null,this.func=u;var l=[];this.check=function(t){for(var e,n,i,r,o=c.length,a=o;-1<--o;)(e=w[c[o]]||new O(c[o],[])).gsClass?(l[o]=e.gsClass,a--):t&&e.sc.push(this);if(0===a&&u)for(i=(n=("com.greensock."+s).split(".")).pop(),r=y(n.join("."))[i]=this.gsClass=u.apply(u,l),p&&(h[i]=d[i]=r),o=0;o<this.sc.length;o++)this.sc[o].check()},this.check(!0)},s=l._gsDefine=function(t,e,n,i){return new O(t,e,n,i)},S=m._class=function(t,e,n){return e=e||function(){},s(t,[],function(){return e},n),e};s.globals=h;var u=[0,0,1,1],P=S("easing.Ease",function(t,e,n,i){this._func=t,this._type=n||0,this._power=i||0,this._params=e?u.concat(e):u},!0),E=P.map={},p=P.register=function(t,e,n,i){for(var r,o,a,s,c=e.split(","),u=c.length,p=(n||"easeIn,easeOut,easeInOut").split(",");-1<--u;)for(o=c[u],r=i?S("easing."+o,null,!0):m.easing[o]||{},a=p.length;-1<--a;)s=p[a],E[o+"."+s]=E[s+o]=r[s]=t.getRatio?t:t[s]||new t};for((r=P.prototype)._calcEnd=!1,r.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,n=this._power,i=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===e?1-i:2===e?i:t<.5?i/2:1-i/2},n=(e=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--n;)r=e[n]+",Power"+n,p(new P(null,null,1,n),r,"easeOut",!0),p(new P(null,null,2,n),r,"easeIn"+(0===n?",easeNone":"")),p(new P(null,null,3,n),r,"easeInOut");E.linear=m.easing.Linear.easeIn,E.swing=m.easing.Quad.easeInOut;var A=S("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(r=A.prototype).addEventListener=function(t,e,n,i,r){r=r||0;var o,a,s=this._listeners[t],c=0;for(this!==_||f||_.wake(),null==s&&(this._listeners[t]=s=[]),a=s.length;-1<--a;)(o=s[a]).c===e&&o.s===n?s.splice(a,1):0===c&&o.pr<r&&(c=a+1);s.splice(c,0,{c:e,s:n,up:i,pr:r})},r.removeEventListener=function(t,e){var n,i=this._listeners[t];if(i)for(n=i.length;-1<--n;)if(i[n].c===e)return void i.splice(n,1)},r.dispatchEvent=function(t){var e,n,i,r=this._listeners[t];if(r)for(1<(e=r.length)&&(r=r.slice(0)),n=this._eventTarget;-1<--e;)(i=r[e])&&(i.up?i.c.call(i.s||n,{type:t,target:n}):i.c.call(i.s||n))};var M=l.requestAnimationFrame,D=l.cancelAnimationFrame,I=Date.now||function(){return(new Date).getTime()},C=I();for(n=(e=["ms","moz","webkit","o"]).length;-1<--n&&!M;)M=l[e[n]+"RequestAnimationFrame"],D=l[e[n]+"CancelAnimationFrame"]||l[e[n]+"CancelRequestAnimationFrame"];S("Ticker",function(t,e){var r,o,a,s,c,u=this,p=I(),n=!(!1===e||!M)&&"auto",l=500,d=33,h=function(t){var e,n,i=I()-C;l<i&&(p+=i-d),C+=i,u.time=(C-p)/1e3,e=u.time-c,(!r||0<e||!0===t)&&(u.frame++,c+=e+(s<=e?.004:s-e),n=!0),!0!==t&&(a=o(h)),n&&u.dispatchEvent("tick")};A.call(u),u.time=u.frame=0,u.tick=function(){h(!0)},u.lagSmoothing=function(t,e){if(!arguments.length)return l<1e10;l=t||1e10,d=Math.min(e,l,0)},u.sleep=function(){null!=a&&(n&&D?D(a):clearTimeout(a),o=b,a=null,u===_&&(f=!1))},u.wake=function(t){null!==a?u.sleep():t?p+=-C+(C=I()):10<u.frame&&(C=I()-l+5),o=0===r?b:n&&M?M:function(t){return setTimeout(t,1e3*(c-u.time)+1|0)},u===_&&(f=!0),h(2)},u.fps=function(t){if(!arguments.length)return r;s=1/((r=t)||60),c=this.time+s,u.wake()},u.useRAF=function(t){if(!arguments.length)return n;u.sleep(),n=t,u.fps(r)},u.fps(t),setTimeout(function(){"auto"===n&&u.frame<5&&"hidden"!==(i||{}).visibilityState&&u.useRAF(!1)},1500)}),(r=m.Ticker.prototype=new m.events.EventDispatcher).constructor=m.Ticker;var T=S("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,X){f||_.wake();var n=this.vars.useFrames?K:X;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});_=T.ticker=new m.Ticker,(r=T.prototype)._dirty=r._gc=r._initted=r._paused=!1,r._totalTime=r._time=0,r._rawPrevTime=-1,r._next=r._last=r._onUpdate=r._timeline=r.timeline=null,r._paused=!1;var j=function(){f&&2e3<I()-C&&("hidden"!==(i||{}).visibilityState||!_.lagSmoothing())&&_.wake();var t=setTimeout(j,2e3);t.unref&&t.unref()};j(),r.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},r.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},r.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},r.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},r.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},r.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},r.render=function(t,e,n){},r.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},r.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<n+this.totalDuration()/this._timeScale-1e-7},r._enabled=function(t,e){return f||_.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},r._kill=function(t,e){return this._enabled(!1,!1)},r.kill=function(t,e){return this._kill(t,e),this},r._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},r._swapSelfInParams=function(t){for(var e=t.length,n=t.concat();-1<--e;)"{self}"===t[e]&&(n[e]=this);return n},r._callback=function(t){var e=this.vars,n=e[t],i=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this;switch(i?i.length:0){case 0:n.call(r);break;case 1:n.call(r,i[0]);break;case 2:n.call(r,i[0],i[1]);break;default:n.apply(r,i)}},r.eventCallback=function(t,e,n,i){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=g(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,r[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},r.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},r.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},r.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},r.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},r.totalTime=function(t,e,n){if(f||_.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!n&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(i<t&&!n&&(t=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(L.length&&Z(),this.render(t,e,!1),L.length&&Z())}return this},r.progress=r.totalProgress=function(t,e){var n=this.duration();return arguments.length?this.totalTime(n*t,e):n?this._time/n:this.ratio},r.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},r.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},r.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,n;for(t=t||v,this._timeline&&this._timeline.smoothChildTiming&&(n=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=n-(n-this._startTime)*this._timeScale/t),this._timeScale=t,n=this.timeline;n&&n.timeline;)n._dirty=!0,n.totalDuration(),n=n.timeline;return this},r.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},r.paused=function(t){if(!arguments.length)return this._paused;var e,n,i=this._timeline;return t!=this._paused&&i&&(f||t||_.wake(),n=(e=i.rawTime())-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&(e=i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var x=S("core.SimpleTimeline",function(t){T.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(r=x.prototype=new T).constructor=x,r.kill()._gc=!1,r._first=r._last=r._recent=null,r._sortChildren=!1,r.add=r.insert=function(t,e,n,i){var r,o;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(o=t._startTime;r&&r._startTime>o;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},r._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},r.render=function(t,e,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)i=r._next,(r._active||t>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,n):r.render((t-r._startTime)*r._timeScale,e,n)),r=i},r.rawTime=function(){return f||_.wake(),this._totalTime};var R=S("TweenLite",function(t,e,n){if(T.call(this,e,n),this.render=R.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:R.selector(t)||t;var i,r,o,a=t.jquery||t.length&&t!==l&&t[0]&&(t[0]===l||t[0].nodeType&&t[0].style&&!t.nodeType),s=this.vars.overwrite;if(this._overwrite=s=null==s?z[R.defaultOverwrite]:"number"==typeof s?s>>0:z[s],(a||t instanceof Array||t.push&&g(t))&&"number"!=typeof t[0])for(this._targets=o=c(t),this._propLookup=[],this._siblings=[],i=0;i<o.length;i++)(r=o[i])?"string"!=typeof r?r.length&&r!==l&&r[0]&&(r[0]===l||r[0].nodeType&&r[0].style&&!r.nodeType)?(o.splice(i--,1),this._targets=o=o.concat(c(r))):(this._siblings[i]=$(r,this,!1),1===s&&1<this._siblings[i].length&&et(r,this,null,1,this._siblings[i])):"string"==typeof(r=o[i--]=R.selector(r))&&o.splice(i+1,1):o.splice(i--,1);else this._propLookup={},this._siblings=$(t,this,!1),1===s&&1<this._siblings.length&&et(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-v,this.render(Math.min(0,-this._delay)))},!0),N=function(t){return t&&t.length&&t!==l&&t[0]&&(t[0]===l||t[0].nodeType&&t[0].style&&!t.nodeType)};(r=R.prototype=new T).constructor=R,r.kill()._gc=!1,r.ratio=0,r._firstPT=r._targets=r._overwrittenProps=r._startAt=null,r._notifyPluginsOfEnabled=r._lazy=!1,R.version="2.0.2",R.defaultEase=r._ease=new P(null,null,1,1),R.defaultOverwrite="auto",R.ticker=_,R.autoSleep=120,R.lagSmoothing=function(t,e){_.lagSmoothing(t,e)},R.selector=l.$||l.jQuery||function(t){var e=l.$||l.jQuery;return e?(R.selector=e)(t):(i||(i=l.document),i?i.querySelectorAll?i.querySelectorAll(t):i.getElementById("#"===t.charAt(0)?t.substr(1):t):t)};var L=[],k={},B=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,G=/[\+-]=-?[\.\d]/,U=function(t){for(var e,n=this._firstPT;n;)e=n.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:n.c*t+n.s,n.m?e=n.m.call(this._tween,e,this._target||n.t,this._tween):e<1e-6&&-1e-6<e&&!n.blob&&(e=0),n.f?n.fp?n.t[n.p](n.fp,e):n.t[n.p](e):n.t[n.p]=e,n=n._next},W=function(t,e,n,i){var r,o,a,s,c,u,p,l=[],d=0,h="",_=0;for(l.start=t,l.end=e,t=l[0]=t+"",e=l[1]=e+"",n&&(n(l),t=l[0],e=l[1]),l.length=0,r=t.match(B)||[],o=e.match(B)||[],i&&(i._next=null,i.blob=1,l._firstPT=l._applyPT=i),c=o.length,s=0;s<c;s++)p=o[s],h+=(u=e.substr(d,e.indexOf(p,d)-d))||!s?u:",",d+=u.length,_?_=(_+1)%5:"rgba("===u.substr(-5)&&(_=1),p===r[s]||r.length<=s?h+=p:(h&&(l.push(h),h=""),a=parseFloat(r[s]),l.push(a),l._firstPT={_next:l._firstPT,t:l,p:l.length-1,s:a,c:("="===p.charAt(1)?parseInt(p.charAt(0)+"1",10)*parseFloat(p.substr(2)):parseFloat(p)-a)||0,f:0,m:_&&_<4?Math.round:0}),d+=p.length;return(h+=e.substr(d))&&l.push(h),l.setRatio=U,G.test(e)&&(l.end=null),l},F=function(t,e,n,i,r,o,a,s,c){"function"==typeof i&&(i=i(c||0,t));var u=typeof t[e],p="function"!==u?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),l="get"!==n?n:p?a?t[p](a):t[p]():t[e],d="string"==typeof i&&"="===i.charAt(1),h={t:t,p:e,s:l,f:"function"===u,pg:0,n:r||e,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-l||0};if(("number"!=typeof l||"number"!=typeof i&&!d)&&(a||isNaN(l)||!d&&isNaN(i)||"boolean"==typeof l||"boolean"==typeof i?(h.fp=a,h={t:W(l,d?parseFloat(h.s)+h.c+(h.s+"").replace(/[0-9\-\.]/g,""):i,s||R.defaultStringFilter,h),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(h.s=parseFloat(l),d||(h.c=parseFloat(i)-h.s||0))),h.c)return(h._next=this._firstPT)&&(h._next._prev=h),this._firstPT=h},V=R._internals={isArray:g,isSelector:N,lazyTweens:L,blobDif:W},H=R._plugins={},Y=V.tweenLookup={},Q=0,q=V.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},K=T._rootFramesTimeline=new x,X=T._rootTimeline=new x,J=30,Z=V.lazyRender=function(){var t,e=L.length;for(k={};-1<--e;)(t=L[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);L.length=0};X._startTime=_.time,K._startTime=_.frame,X._active=K._active=!0,setTimeout(Z,1),T._updateRoot=R.render=function(){var t,e,n;if(L.length&&Z(),X.render((_.time-X._startTime)*X._timeScale,!1,!1),K.render((_.frame-K._startTime)*K._timeScale,!1,!1),L.length&&Z(),_.frame>=J){for(n in J=_.frame+(parseInt(R.autoSleep,10)||120),Y){for(t=(e=Y[n].tweens).length;-1<--t;)e[t]._gc&&e.splice(t,1);0===e.length&&delete Y[n]}if((!(n=X._first)||n._paused)&&R.autoSleep&&!K._first&&1===_._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||_.sleep()}}},_.addEventListener("tick",T._updateRoot);var $=function(t,e,n){var i,r,o=t._gsTweenID;if(Y[o||(t._gsTweenID=o="t"+Q++)]||(Y[o]={target:t,tweens:[]}),e&&((i=Y[o].tweens)[r=i.length]=e,n))for(;-1<--r;)i[r]===e&&i.splice(r,1);return Y[o].tweens},tt=function(t,e,n,i){var r,o,a=t.vars.onOverwrite;return a&&(r=a(t,e,n,i)),(a=R.onOverwrite)&&(o=a(t,e,n,i)),!1!==r&&!1!==o},et=function(t,e,n,i,r){var o,a,s,c;if(1===i||4<=i){for(c=r.length,o=0;o<c;o++)if((s=r[o])!==e)s._gc||s._kill(null,t,e)&&(a=!0);else if(5===i)break;return a}var u,p=e._startTime+v,l=[],d=0,h=0===e._duration;for(o=r.length;-1<--o;)(s=r[o])===e||s._gc||s._paused||(s._timeline!==e._timeline?(u=u||nt(e,0,h),0===nt(s,u,h)&&(l[d++]=s)):s._startTime<=p&&s._startTime+s.totalDuration()/s._timeScale>p&&((h||!s._initted)&&p-s._startTime<=2e-10||(l[d++]=s)));for(o=d;-1<--o;)if(c=(s=l[o])._firstPT,2===i&&s._kill(n,t,e)&&(a=!0),2!==i||!s._firstPT&&s._initted&&c){if(2!==i&&!tt(s,e))continue;s._enabled(!1,!1)&&(a=!0)}return a},nt=function(t,e,n){for(var i=t._timeline,r=i._timeScale,o=t._startTime;i._timeline;){if(o+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return e<(o/=r)?o-e:n&&o===e||!t._initted&&o-e<2*v?v:(o+=t.totalDuration()/t._timeScale/r)>e+v?0:o-e-v};r._init=function(){var t,e,n,i,r,o,a=this.vars,s=this._overwrittenProps,c=this._duration,u=!!a.immediateRender,p=a.ease;if(a.startAt){for(i in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={},a.startAt)r[i]=a.startAt[i];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=u&&!1!==a.lazy,r.startAt=r.delay=null,r.onUpdate=a.onUpdate,r.onUpdateParams=a.onUpdateParams,r.onUpdateScope=a.onUpdateScope||a.callbackScope||this,this._startAt=R.to(this.target||{},0,r),u)if(0<this._time)this._startAt=null;else if(0!==c)return}else if(a.runBackwards&&0!==c)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(i in 0!==this._time&&(u=!1),n={},a)q[i]&&"autoCSS"!==i||(n[i]=a[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=u&&!1!==a.lazy,n.immediateRender=u,this._startAt=R.to(this.target,0,n),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=p=p?p instanceof P?p:"function"==typeof p?new P(p,a.easeParams):E[p]||R.defaultEase:R.defaultEase,a.easeParams instanceof Array&&p.config&&(this._ease=p.config.apply(p,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,t=0;t<o;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(e&&R._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=a.onUpdate,this._initted=!0},r._initProps=function(t,e,n,i,r){var o,a,s,c,u,p;if(null==t)return!1;for(o in k[t._gsTweenID]&&Z(),this.vars.css||t.style&&t!==l&&t.nodeType&&H.css&&!1!==this.vars.autoCSS&&function(t,e){var n,i={};for(n in t)q[n]||n in e&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!H[n]||H[n]&&H[n]._autoCSS)||(i[n]=t[n],delete t[n]);t.css=i}(this.vars,t),this.vars)if(p=this.vars[o],q[o])p&&(p instanceof Array||p.push&&g(p))&&-1!==p.join("").indexOf("{self}")&&(this.vars[o]=p=this._swapSelfInParams(p,this));else if(H[o]&&(c=new H[o])._onInitTween(t,this.vars[o],this,r)){for(this._firstPT=u={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:c._priority,m:0},a=c._overwriteProps.length;-1<--a;)e[c._overwriteProps[a]]=this._firstPT;(c._priority||c._onInitAllProps)&&(s=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else e[o]=F.call(this,t,o,"get",p,o,0,null,this.vars.stringFilter,r);return i&&this._kill(i,t)?this._initProps(t,e,n,i,r):1<this._overwrite&&this._firstPT&&1<n.length&&et(t,this,e,this._overwrite,n)?(this._kill(e,t),this._initProps(t,e,n,i,r)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(k[t._gsTweenID]=!0),s)},r.render=function(t,e,n){var i,r,o,a,s=this._time,c=this._duration,u=this._rawPrevTime;if(c-1e-7<=t&&0<=t)this._totalTime=this._time=c,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===c&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(u<0||t<=0&&-1e-7<=t||u===v&&"isPause"!==this.data)&&u!==t&&(n=!0,v<u&&(r="onReverseComplete")),this._rawPrevTime=a=!e||t||u===t?t:v);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===c&&0<u)&&(r="onReverseComplete",i=this._reversed),t<0&&(this._active=!1,0===c&&(this._initted||!this.vars.lazy||n)&&(0<=u&&(u!==v||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=a=!e||t||u===t?t:v)),(!this._initted||this._startAt&&this._startAt.progress())&&(n=!0);else if(this._totalTime=this._time=t,this._easeType){var p=t/c,l=this._easeType,d=this._easePower;(1===l||3===l&&.5<=p)&&(p=1-p),3===l&&(p*=2),1===d?p*=p:2===d?p*=p*p:3===d?p*=p*p*p:4===d&&(p*=p*p*p*p),this.ratio=1===l?1-p:2===l?p:t/c<.5?p/2:1-p/2}else this.ratio=this._ease.getRatio(t/c);if(this._time!==s||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=u,L.push(this),void(this._lazy=[t,e]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/c):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&0<=t&&(this._active=!0),0===s&&(this._startAt&&(0<=t?this._startAt.render(t,!0,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==c||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,!0,n),e||(this._time!==s||i||n)&&this._callback("onUpdate")),r&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,!0,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===c&&this._rawPrevTime===v&&a!==v&&(this._rawPrevTime=0)))}},r._kill=function(t,e,n){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var i,r,o,a,s,c,u,p,l,d=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline,h=this._firstPT;if((g(e)||N(e))&&"number"!=typeof e[0])for(i=e.length;-1<--i;)this._kill(t,e[i],n)&&(c=!0);else{if(this._targets){for(i=this._targets.length;-1<--i;)if(e===this._targets[i]){s=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;s=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(s){if(u=t||s,p=t!==r&&"all"!==r&&t!==s&&("object"!=typeof t||!t._tempKill),n&&(R.onOverwrite||this.vars.onOverwrite)){for(o in u)s[o]&&(l||(l=[]),l.push(o));if((l||!t)&&!tt(this,n,e,l))return!1}for(o in u)(a=s[o])&&(d&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,c=!0),a.pg&&a.t._kill(u)&&(c=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete s[o]),p&&(r[o]=1);!this._firstPT&&this._initted&&h&&this._enabled(!1,!1)}}return c},r.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],T.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-v,this.render(Math.min(0,-this._delay))),this},r._enabled=function(t,e){if(f||_.wake(),t&&this._gc){var n,i=this._targets;if(i)for(n=i.length;-1<--n;)this._siblings[n]=$(i[n],this,!0);else this._siblings=$(this.target,this,!0)}return T.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&R._onPluginEvent(t?"_onEnable":"_onDisable",this)},R.to=function(t,e,n){return new R(t,e,n)},R.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new R(t,e,n)},R.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new R(t,e,i)},R.delayedCall=function(t,e,n,i,r){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];var n,i,r,o;if(t="string"!=typeof t?t:R.selector(t)||t,(g(t)||N(t))&&"number"!=typeof t[0]){for(n=t.length,i=[];-1<--n;)i=i.concat(R.getTweensOf(t[n],e));for(n=i.length;-1<--n;)for(o=i[n],r=n;-1<--r;)o===i[r]&&i.splice(n,1)}else if(t._gsTweenID)for(n=(i=$(t).concat()).length;-1<--n;)(i[n]._gc||e&&!i[n].isActive())&&i.splice(n,1);return i||[]},R.killTweensOf=R.killDelayedCallsTo=function(t,e,n){"object"==typeof e&&(n=e,e=!1);for(var i=R.getTweensOf(t,e),r=i.length;-1<--r;)i[r]._kill(n,t)};var it=S("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=it.prototype},!0);if(r=it.prototype,it.version="1.19.0",it.API=2,r._firstPT=null,r._addTween=F,r.setRatio=U,r._kill=function(t){var e,n=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=n.length;-1<--e;)null!=t[n[e]]&&n.splice(e,1);for(;i;)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},r._mod=r._roundProps=function(t){for(var e,n=this._firstPT;n;)(e=t[this._propName]||null!=n.n&&t[n.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===n.f?n.t._applyPT.m=e:n.m=e),n=n._next},R._onPluginEvent=function(t,e){var n,i,r,o,a,s=e._firstPT;if("_onInitAllProps"===t){for(;s;){for(a=s._next,i=r;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:o)?s._prev._next=s:r=s,(s._next=i)?i._prev=s:o=s,s=a}s=e._firstPT=r}for(;s;)s.pg&&"function"==typeof s.t[t]&&s.t[t]()&&(n=!0),s=s._next;return n},it.activate=function(t){for(var e=t.length;-1<--e;)t[e].API===it.API&&(H[(new t[e])._propName]=t[e]);return!0},s.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,n=t.propName,i=t.priority||0,r=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=S("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){it.call(this,n,i),this._overwriteProps=r||[]},!0===t.global),s=a.prototype=new it(n);for(e in(s.constructor=a).API=t.API,o)"function"==typeof t[e]&&(s[o[e]]=t[e]);return a.version=t.version,it.activate([a]),a},e=l._gsQueue){for(n=0;n<e.length;n++)e[n]();for(r in w)w[r].func||l.console.log("GSAP encountered missing dependency: "+r)}return f=!1,R}(n),r=n.GreenSockGlobals,o=r.com.greensock,a=o.core.SimpleTimeline,s=o.core.Animation,c=r.Ease,u=r.Linear,p=u,l=r.Power1,d=r.Power2,h=r.Power3,_=r.Power4,f=r.TweenPlugin;o.events.EventDispatcher}).call(this,m(624)(t),m(625))},function(t,e,n){var i,r,o,jt=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),xt=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},Rt=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(28),n(647),n(648),n(314),n(17),n(315),n(338),n(302),n(195),n(1203),n(325),n(285),n(337),n(1222),n(327),n(328),n(330),n(331),n(1223),n(333),n(336),n(75),n(339),n(1246),n(56),n(0),n(340),n(35),n(36),n(1247),n(343),n(1248),n(344),n(110),n(177),n(345),n(311),n(176),n(1250),n(347),n(361),n(348),n(1261),n(1286),n(1301),n(1315),n(1329),n(1341),n(355),n(1351),n(1364),n(1371),n(357),n(1390),n(386),n(1393),n(359),n(1415),n(86),n(1437),n(1439),n(1454),n(1477),n(376),n(1510),n(380),n(1540),n(1570),n(1589),n(1615),n(391),n(1627),n(1680),n(303),n(1687),n(1692),n(1701),n(1719),n(1720),n(1722),n(59),n(1789),n(1792)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U,W,F,V,H,Y,Q,q,z,K,X,J,Z,$,tt,et,nt,it,rt,ot,at,st,ct,ut,pt,lt,dt,ht,_t,ft,yt,mt,vt,bt,gt,wt,Ot,St,Pt,Et,At,Mt,Dt,It,Ct){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var Tt=function(n){function ElkaCore(t){var e=n.call(this)||this;return e._initConfig=new i.InitConfig(t),console.log("Elka Core Create",e._initConfig),e}return jt(ElkaCore,n),ElkaCore.prototype.run=function(e){return xt(this,void 0,void 0,function(){return Rt(this,function(t){switch(t.label){case 0:return console.log("Elka Core Run"),[4,n.prototype.run.call(this,e)];case 1:return t.sent()?[4,this.startGame()]:(console.error("Core run error. Application is stopped."),[2]);case 2:return t.sent(),[2,!0]}})})},Object.defineProperty(ElkaCore.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaCore.prototype,"initConfig",{get:function(){return this._initConfig},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaCore,"instance",{get:function(){return this._facade},enumerable:!0,configurable:!0}),ElkaCore.prototype.initializeConfig=function(){this._config=new r.ElkaConfig,this._config.serverHost=this._initConfig.serverHost,this._config.mobile=this._initConfig.mobile},ElkaCore.prototype.prepareLoader=function(t){var e=this.prepareList(),n=k.ResourcesUtils.getResourcesList(e,t);window.ELKA_HELPER.loadingProcessor.batchPrepare(n,40,30)},ElkaCore.prototype.getServicesList=function(){return n.prototype.getServicesList.call(this).concat([R.InitializationService,N.NetworkService,s.DebugService,T.AuthService,j.ResourcesService,c.ServerService,o.StaticDataService,m.DataProviderService,p.DynamicDataService,d.ViewService,st.LongRequestService,h.CalculatorService,_.OperationService,f.LocalizationService,y.RequirementsService,v.PriceService,b.AwardService,O.SocialNetworkService,w.ProfilesService,S.AnimationService,D.SettingsService,P.MetricsService,u.DateService,wt.SoundService,B.PushService,W.ModelService,V.PaymentService,X.ConfirmService,tt.MailService,vt.ViralExchangeService,rt.TooltipService])},ElkaCore.prototype.getModulesList=function(){var t=n.prototype.getModulesList.call(this);return t.push(Et.UserAgreementModule,g.AdminModule,It.ClientHelpModule,Q.TravelModule,l.MainModule,nt.ToysModule,E.MultiTabModule,Ct.SnowModule,U.UserModule,x.BackgroundModule,J.BeautyModule,Ot.PendingAwardModule,ot.ExtraItemsModule,K.GeneratorsModule,F.ObjectsModule,lt.AnimalModule,Y.ChestsModule,q.BoxesModule,Z.ShopsModule,ht.DesignObjectModule,z.LikesModule,ct.AchievementsModule,$.QuestsModule,_t.StartQuestModule,St.PresentsModule,dt.PromoModule,ft.RouletteModule,pt.WorkshopModule,ut.FarmModule,it.DecorModule,yt.GladeDuelModule,mt.SettingsModule,gt.ClanModule,Pt.RatingModule,At.HappyNewYearModule,Dt.EventNewYearModule,Mt.OkMoneyEventModule),t.push(H.FriendsModule),t.push(bt.GuidesModule),t.push(et.StartPopupsModule),t},ElkaCore.prototype.startGame=function(){return xt(this,void 0,void 0,function(){return Rt(this,function(t){switch(t.label){case 0:return ElkaCore.instance.promiseManager.wait(G.NetworkRequestPromise,this.onNetworkResponse.bind(this)),a.Services.server.setDefaultErrorHandler(this.defaultServerErrorHandler.bind(this)),a.Services.server.addErrorHandler(A.ServerErrorCode.CODE_APP_VERSIONS_IS_NOT_EQUAL,this.newVersionErrorHandler.bind(this)),a.Services.server.addErrorHandler(A.ServerErrorCode.CODE_SESSION_IS_EXPIRED,this.sessionExpiredErrorHandler.bind(this)),[4,M.Application.initialization.startGame()];case 1:return t.sent(),ElkaCore.instance.eventRouter.dispatchEvent(new at.CoreEvent(at.CoreEvent.STARTED)),[2,Promise.resolve(null)]}})})},ElkaCore.prototype.sessionExpiredErrorHandler=function(t){M.Application.debug.showErrorWindow("MULTITAB_TEXT","MULTITAB_TITLE",!0),t.sendLog=!1,t.stopPropagation()},ElkaCore.prototype.onNetworkResponse=function(t){if(t.data.hasOwnProperty("server")&&t.data.server.hasOwnProperty("time")){var e=parseInt(t.data.server.time);a.Services.date.setServerTime(e);var n=t.data.server.timeHuman;a.Services.date.setServerTimeHuman(n)}},ElkaCore.prototype.newVersionErrorHandler=function(t){M.Application.debug.showErrorWindow("NEW_VERSION_TEXT","NEW_VERSION_TITLE",!0),t.sendLog=!1,t.stopPropagation()},ElkaCore.prototype.defaultServerErrorHandler=function(t){var e=M.Application.debug.getPermissions({code:t.code,message:t.text});if(e.allowBreakGame&&M.Application.debug.showErrorWindow("SERVER_ERROR_TEXT","ERROR",!0),e.allowLog&&a.Services.debug.addError("Default server error handler",t),e.allowSendLog){var n=void 0;switch(t.level){case L.ServerErrorLevel.NETWORK:n="Network error: "+t.httpErrorStatus;break;case L.ServerErrorLevel.SERVER:n="Server error: "+t.code;break;case L.ServerErrorLevel.UNKNOWN:n="Server error: unknown"}a.Services.debug.sendLog(n,"",I.LogFlag.SERVER,e.allowBreakGame?C.LogLevel.Critical:C.LogLevel.Error)}t.sendLog=!1},ElkaCore}(n.Core);e.ElkaCore=Tt}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Utils(){}return Utils.addZero=function(t,e){void 0===e&&(e=2);for(var n=t.toString(),i="",r=0;r<e-n.length;r++)i+="0";return i+n},Utils.getNameFromClass=function(t){var e=t.name;return void 0===e&&(e=t.toString().match(/^function\s*([^\s(]+)/)[1]),e},Utils.getNameFromInstance=function(t){var e=t.constructor.name;return void 0===e&&(e=this.getNameFromClass(t.constructor)),e},Utils.parseInt=function(t,e){void 0===e&&(e=null);var n=parseInt(t);return isNaN(n)&&(n=e),n},Utils.parseFloat=function(t,e){void 0===e&&(e=null);var n=parseFloat(t);return isNaN(n)&&(n=e),n},Utils.parseBool=function(t,e){switch(typeof t){case"boolean":return t;case"string":return"true"===t||"false"!==t&&!!parseInt(t);case"number":return!!parseInt(t);default:return void 0===e?!!t:e}},Utils.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},Utils.parsePropertyString=function(t,e,n){void 0===n&&(n=null);var i=n;return"object"==typeof t&&t.hasOwnProperty(e)&&(i=String(t[e])),i},Utils.parsePropertyInt=function(t,e,n){void 0===n&&(n=null);var i=n;return"object"==typeof t&&t.hasOwnProperty(e)&&(i=Utils.parseInt(t[e],n)),i},Utils.parsePropertyBool=function(t,e,n){return void 0===n&&(n=null),"object"==typeof t&&t.hasOwnProperty(e)?Utils.parseBool(t[e]):n},Utils.cloneObject=function(t){return"object"==typeof t?jQuery.extend(!0,{},t):t},Utils.assingObject=function(t,e){return jQuery.extend(!0,t,e)},Utils.getObjectByPath=function(t,e,n){void 0===n&&(n=void 0);for(var i=e.split("."),r=0;"object"==typeof t&&null!==t;)if(t=t[i[r++]],r===i.length)return t;return n},Utils.stringify=function(t,e,n,i){return void 0===e&&(e=null),void 0===n&&(n=4),void 0===i&&(i=null),JSON.stringify(t,Utils.serializer(e,i),n)},Utils.serializer=function(i,r){var o=[],a=[];return null==r&&(r=function(t,e){return o[0]===e?"[Circular ~]":"[Circular ~."+a.slice(0,o.indexOf(e)).join(".")+"]"}),function(t,e){if(0<o.length){var n=o.indexOf(this);~n?o.splice(n+1):o.push(this),~n?a.splice(n,1/0,t):a.push(t),~o.indexOf(e)&&(e=r.call(this,t,e))}else o.push(e);return null==i?e:i.call(this,t,e)}},Utils.shuffle=function(t){for(var e,n,i=t.length;0!==i;)n=Math.floor(Math.random()*i),e=t[i-=1],t[i]=t[n],t[n]=e},Utils.ksort=function(t){for(var e={},n=0,i=Object.keys(t).sort();n<i.length;n++){var r=i[n];e[r]=t[r]}return e},Utils.equalHackFunctions=function(t,e){return!t&&!e||t.original===e.original&&t.calleeInstance===e.calleeInstance},Utils.dataURLtoBlob=function(t){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],i=atob(e[1]),r=i.length,o=new Uint8Array(r);r--;)o[r]=i.charCodeAt(r);return new Blob([o],{type:n})},Utils.getCookie=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},Utils.setCookie=function(t,e,n){void 0===n&&(n={}),n=a({path:"/"},n);var i=encodeURIComponent(t)+"="+encodeURIComponent(e);for(var r in n){i+="; "+r;var o=n[r];!0!==o&&(i+="="+o)}document.cookie=i},Utils.cookieEnabled=function(){return Utils.setCookie("elkaCookieEnabled","true"),"true"===Utils.getCookie("elkaCookieEnabled")},Utils}();e.Utils=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BasePromise(){var n=this;this._isResolved=!1,this._isRejected=!1,this._promise=new Promise(function(t,e){n._resolve=t,n._reject=e})}return BasePromise.prototype.resolve=function(t){this._resolve.apply(this,[t]),this._isResolved=!0},BasePromise.prototype.reject=function(t){this._reject.apply(this,[t]),this._isRejected=!0},BasePromise.prototype.then=function(t,e){return this._promise.then(t,e)},BasePromise.prototype.catch=function(t){return this._promise.catch(t)},Object.defineProperty(BasePromise.prototype,"isResolved",{get:function(){return this._isResolved},enumerable:!0,configurable:!0}),Object.defineProperty(BasePromise.prototype,"isRejected",{get:function(){return this._isRejected},enumerable:!0,configurable:!0}),Object.defineProperty(BasePromise.prototype,"isPending",{get:function(){return!this._isResolved&&!this._isRejected},enumerable:!0,configurable:!0}),BasePromise}();e.BasePromise=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function CommandBase(t){this._data=t};e.CommandBase=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ViewContext(t){this._showData=t}return Object.defineProperty(ViewContext.prototype,"node",{get:function(){return this._node},set:function(t){this._node=t},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContext.prototype,"showData",{get:function(){return this._showData},set:function(t){this._showData=t},enumerable:!0,configurable:!0}),ViewContext}();e.ViewContext=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function Action(){};e.Action=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ActionInput(t){this.params=t}return ActionInput.prototype.serializeObj=function(){return this.params},ActionInput}();e.ActionInput=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function StaticDataCollection(){this._hash=new core.Map,this._array=[]}return StaticDataCollection.parse=function(t,e,n){return StaticDataCollection.parseTo(new StaticDataCollection,t,e,n)},StaticDataCollection.parseTo=function(t,i,e,n){for(var r=[],o=4;o<arguments.length;o++)r[o-4]=arguments[o];return jQuery(n,e).each(function(t,e,n){t.pushItem(i.parse.apply(i,[n].concat(r)))}.bind(this,t)),t},StaticDataCollection.parseToMany=function(t,r,e,n){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];return jQuery(n,e).each(function(t,e,n){var i=r[n.tagName];void 0!==i&&t.pushItem(i.apply(void 0,[n].concat(o)))}.bind(this,t)),t},StaticDataCollection.prototype.pushItem=function(t){this._hash.set(t.id,t);for(var e=!1,n=0;n<this._array.length;n++)if(this._array[n].id===t.id){this._array.splice(n,1,t),e=!0;break}e||this._array.push(t)},StaticDataCollection.prototype.getItem=function(t){return this._hash.has(t)?this._hash.get(t):null},Object.defineProperty(StaticDataCollection.prototype,"items",{get:function(){return this._array.concat()},enumerable:!0,configurable:!0}),StaticDataCollection}();e.StaticDataCollection=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function BaseDynamicDataIdentifiable(t,e){var n=i.call(this,e)||this;return n._id=t,n}return a(BaseDynamicDataIdentifiable,i),Object.defineProperty(BaseDynamicDataIdentifiable.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),BaseDynamicDataIdentifiable}(n.WalletDynamicItem);e.BaseDynamicDataIdentifiable=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function BaseDataEvent(t,e,n){return i.call(this,t,e,n)||this}return o(BaseDataEvent,i),Object.defineProperty(BaseDataEvent.prototype,"children",{get:function(){return this.data},enumerable:!0,configurable:!0}),BaseDataEvent.CHANGED="BaseDataEvent.CHANGED",BaseDataEvent.CHILDREN_CHANGED="BaseDataEvent.CHILDREN_CHANGED",BaseDataEvent}(uipixi.BaseEvent);e.BaseDataEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.AwardType||(e.AwardType={})).UNKNOWN="unknown",i.RESOURCE="resource",i.EXTRA_ITEM="extraItem",i.BEAUTY="beauty",i.TOY="toy",i.ROULETTE="roulette",i.ROULETTE_SPINS="rouletteSpins",i.ANIMAL_HAPPY="animalHappy",i.BEAUTY_BONUS="beautyBonus",i.GENERATOR_BOOST="generatorBoost",i.ACHIEVE_BONUS="achieveBonus",i.UNLOCKED_EXTRA_ITEM="unlockedExtraItem",i.EXTRA_ITEM_WITH_BEAUTY="extraItemWithBeauty",i.REAL="real",(r=e.AwardType||(e.AwardType={})).fromString=function fromString(t){if(t){var e=r[t.split(/(?=[A-Z])/).join("_").toUpperCase()];if(e)return e}return n.Application.debug&&n.Application.debug.addWarning("AwardType.fromString","Unknown type: ",arguments),r.UNKNOWN}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,_=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(38),n(14),n(0),n(16),n(97),n(2),n(29),n(92),n(356)],void 0===(r=function(t,e,r,o,a,n,i,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.UISpine,d=uipixi.BaseEventTarget,h=function(t){function AwardRenderer(){return null!==t&&t.apply(this,arguments)||this}return _(AwardRenderer,t),AwardRenderer.prototype.initialize=function(t,e,n){if(this._initialized)throw new Error("AwardRenderer: initialize - already initialized");return this.award=t,this.options=this.prepareOptions(n),this.getElements(e),this.initializeProps(),this._eventTarget=new d,this._initialized=!0,this.options.renderOnInit&&this.render(),this},Object.defineProperty(AwardRenderer.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0}),AwardRenderer.prototype.render=function(){if(!this._initialized)throw new Error("AwardRenderer: render - not initialized");if(!this.award)throw new Error("AwardRenderer: render - award is not set");if(this._titleLabel){var t=r.PriceAwardUtils.getAwardString(this.award,this.options.titleStringId);this._titleLabel.text=t?a.Application.localization.localize(t):""}var e=this.award.type===o.AwardType.TOY,n=e?a.Application.static.data.toys.toy.getItem(parseInt(this.award.itemId)):void 0;if(this._iconImage)if(e){var i=n.view;i&&(!i.spine||!this.options.preferToySpine&&i.resource?this.setImage(i.resource):this.setSpine(i.spine))}else this.setImage(r.PriceAwardUtils.getAwardIconResource(this.award,this.options.iconId.toString()));if(this._countLabel)if(e&&1===this.award.value&&!this.options.showSingleToyCount)this._countLabel.visible=!1;else switch(this.award.type){case o.AwardType.GENERATOR_BOOST:this._countLabel.text=c.DateUtils.timeToString(this.award.value);break;case o.AwardType.BEAUTY_BONUS:case o.AwardType.ACHIEVE_BONUS:this._countLabel.text="+"+this.award.value.toString()+"%";break;case o.AwardType.UNLOCKED_EXTRA_ITEM:this._countLabel.text=a.Application.localization.localize("UNLOCKED_EXTRA_ITEM_DESCRIPTION"),this._countLabel.style.setOption("fontSize",this._titleLabel.style.getOption("fontSize"));break;default:this._countLabel.text=this.award.value.toString()}this._beautyContainer&&(this._beautyContainer.visible=e&&0<n.beauty&&1===this.award.value,this._countLabel&&(this._countLabel.visible=this._countLabel.visible&&!this._beautyContainer.visible)),this._beautyLabel&&e&&0<n.beauty&&(this._beautyLabel.text=n.beauty.toString()),!1!==this.options.tooltip&&a.Application.tooltip.addTooltip(this._tooltipContainer,this.options.tooltip,s.GUINames.TEXT_TOOLTIP,{text:r.PriceAwardUtils.getAwardString(this.award,"name")})},AwardRenderer.prototype.updateAward=function(t,e){void 0===e&&(e=!0),this.award=t,e&&(this.clear(),this.render())},AwardRenderer.prototype.clear=function(){this._createdSpineView&&(this._iconImage.visible=!0,this._createdSpineView.parent.removeChild(this._createdSpineView),this._createdSpineView=void 0),this.clearLoading(),this.clearTooltip()},AwardRenderer.prototype.clearTooltip=function(){this.options.tooltip&&a.Application.tooltip.removeTooltip(this._tooltipContainer)},AwardRenderer.prototype.setImage=function(t){this._loadableImage=new n.LoadableImage(this._iconImage,t),this._loadableImage.isLoaded?this.updateImage():this._loadableImage.addEventListener(i.LoadableEvent.LOADED,this.onImageLoaded.bind(this))},AwardRenderer.prototype.onImageLoaded=function(){this.clearLoading(),this.updateImage()},AwardRenderer.prototype.clearLoading=function(){this._loadableImage&&(this._loadableImage.removeEventListener(i.LoadableEvent.LOADED,this.onImageLoaded.bind(this)),this._loadableImage.destroy(),this._loadableImage=void 0),this._eventTarget&&(this._eventTarget.removeEventListener(u.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadComplete.bind(this)),this._eventTarget=void 0),this._twirl&&(this._twirl.destroy(),this._twirl=void 0)},AwardRenderer.prototype.updateImage=function(){this.options.fit&&this.fit(this._iconImage)},AwardRenderer.prototype.fit=function(t){var e=t.width/t.height;t.width=1<e?this._originalWidth:this._originalWidth*e,t.height=1<e?this._originalHeight/e:this._originalHeight},AwardRenderer.prototype.setSpine=function(t){var e=t;this._iconImage.visible=!1,a.Application.resources.isResourceLoaded(e)?this.createSpine(t):(this._twirl=new p.TwirlAnimation(this._iconImage),this._spinePath=e,this._eventTarget=a.Application.resources.getResources([e],!1).eventTarget,this._eventTarget.addEventListener(u.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadComplete.bind(this)))},AwardRenderer.prototype.onLoadComplete=function(){this.clearLoading(),this.createSpine(this._spinePath)},AwardRenderer.prototype.createSpine=function(t){this._createdSpineView=new l(t),this._createdSpineView.anchor="topLeft",this._createdSpineView.outside=this._iconImage.outside,this._createdSpineView.offsetX=this._iconImage.offsetX-this._iconImage._anchorPoint.x*this._iconImage.width,this._createdSpineView.offsetY=this._iconImage.offsetY-this._iconImage._anchorPoint.y*this._iconImage.height,this._iconImage.parent.addChild(this._createdSpineView),this.options.fit&&this.fit(this._createdSpineView),0<this._createdSpineView.animations.length&&this._createdSpineView.setAnimation(this._createdSpineView.animations[this._createdSpineView.animations.length-1],!0),this._spineFilters&&(this._createdSpineView.filters=this._spineFilters)},AwardRenderer.prototype.prepareOptions=function(t){return void 0===t.titleLabel&&(t.titleLabel="titleLabel"),void 0===t.iconImage&&(t.iconImage="iconImage"),void 0===t.countLabel&&(t.countLabel="countLabel"),void 0===t.renderOnInit&&(t.renderOnInit=!0),void 0===t.beautyContainer&&(t.beautyContainer="beautyContainer"),void 0===t.beautyLabel&&(t.beautyLabel="beautyLabel"),void 0===t.showSingleToyCount&&(t.showSingleToyCount=!1),void 0===t.preferToySpine&&(t.preferToySpine=!1),void 0===t.showRouletteCount&&(t.showRouletteCount=!1),void 0===t.titleStringId&&(t.titleStringId="name"),void 0===t.fit&&(t.fit=!1),void 0===t.tooltip&&(t.tooltip=!1),t},AwardRenderer.prototype.getElements=function(t){this._titleLabel=this.getComponent(t,this.options.titleLabel),this._iconImage=this.getComponent(t,this.options.iconImage),this._countLabel=this.getComponent(t,this.options.countLabel),this._beautyContainer=this.getComponent(t,this.options.beautyContainer),this._beautyLabel=this.getComponent(t,this.options.beautyLabel),this._tooltipContainer=t},AwardRenderer.prototype.getComponent=function(t,e){return"string"==typeof e?t.getChildByName(e):!1===e?null:e},AwardRenderer.prototype.initializeProps=function(){this.options.fit&&("number"==typeof this.options.fit?this._originalWidth=this._originalHeight=this.options.fit:(this._originalWidth=this._iconImage.width,this._originalHeight=this._iconImage.height))},AwardRenderer.prototype.applySpineFilters=function(t){this._spineFilters=t,this._createdSpineView&&(this._createdSpineView.filters=t)},AwardRenderer.prototype.destroy=function(){if(!this._initialized)throw new Error("AwardRenderer: destroy - not initialized");this.clearLoading(),this.clearTooltip(),this._initialized=!1},AwardRenderer}(d);e.AwardRenderer=h}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(92),n(97),n(356)],void 0===(r=function(t,e,n,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(r){function LoadableImage(t,e,n){void 0===n&&(n=!0);var i=r.call(this)||this;return i.showLoading=n,i._image=t,i._resource=e,i._isLoaded=!1,i.initialize(),i}return s(LoadableImage,r),Object.defineProperty(LoadableImage.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),LoadableImage.prototype.initialize=function(){if(n.Application.resources.isResourceLoaded(this._resource))return this._isLoaded=!0,void this.render(!1);this._image.visible=!1,this.showLoading&&this.setLoading();var t=this._resource.split("/",1)[0];this._eventTarget=n.Application.resources.getResources([t],!1).eventTarget,this._eventTarget.addEventListener(i.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadComplete.bind(this))},LoadableImage.prototype.onLoadComplete=function(){this.clearLoading(),this.render(!0),this._image.visible=!0,this._isLoaded=!0,this.dispatchEvent(new o.LoadableEvent(o.LoadableEvent.LOADED))},LoadableImage.prototype.render=function(t){t&&this._image.resource===this._resource?this._image.updateTexture():this._image.resource=this._resource},LoadableImage.prototype.setLoading=function(){this._twirl=new a.TwirlAnimation(this._image)},LoadableImage.prototype.clearLoading=function(){this._twirl&&(this._twirl.destroy(),this._twirl=void 0),this._eventTarget&&(this._eventTarget.removeEventListener(i.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadComplete.bind(this)),this._eventTarget=void 0)},LoadableImage.prototype.destroy=function(){this.clearLoading()},LoadableImage}(uipixi.BaseEventTarget);e.LoadableImage=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(170),n(268),n(270),n(276),n(281),n(110),n(282),n(285),n(286),n(33),n(301),n(302),n(303),n(305),n(75),n(311),n(5)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var b=function(){function Services(){}return Object.defineProperty(Services,"debug",{get:function(){return this.getComponent(i.DebugService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"resources",{get:function(){return this.getComponent(r.ResourcesService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"view",{get:function(){return this.getComponent(o.ViewService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"settings",{get:function(){return this.getComponent(a.SettingsService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"network",{get:function(){return this.getComponent(s.NetworkService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"server",{get:function(){return this.getComponent(c.ServerService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"calculator",{get:function(){return this.getComponent(u.CalculatorService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"dataProvider",{get:function(){return this.getComponent(p.DataProviderService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"social",{get:function(){return this.getComponent(l.SocialNetworkService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"profiles",{get:function(){return this.getComponent(d.ProfilesService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"animation",{get:function(){return this.getComponent(y.AnimationService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"date",{get:function(){return this.getComponent(h.DateService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"sound",{get:function(){return this.getComponent(_.SoundService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"localization",{get:function(){return this.getComponent(f.LocalizationService)},enumerable:!0,configurable:!0}),Object.defineProperty(Services,"push",{get:function(){return this.getComponent(m.PushService)},enumerable:!0,configurable:!0}),Services.getComponent=function(t){return n.ComponentsFactory.instance.getComponent(v.Utils.getNameFromClass(t))},Services}();e.Services=b}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RegisterModuleLoaderPromise(t){var e=n.call(this)||this;return e.moduleLoader=t,e}return a(RegisterModuleLoaderPromise,n),RegisterModuleLoaderPromise}(n.BasePromise);e.RegisterModuleLoaderPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(37),n(5)],void 0===(r=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(r){function ItemCollection(t,e){var n=r.call(this,e)||this;for(var i in n._cls=t,n._items=[],e)n.addItem(i,e[i]);return n}return a(ItemCollection,r),ItemCollection.getObjectByPath=function(t,e,n){void 0===n&&(n=null);for(var i=e.split(".");0<i.length;){var r=i.shift();if(!(r&&"object"==typeof t&&t&&t.hasOwnProperty(r)))return n;t=t[r]}return"object"==typeof t&&t?t:n},ItemCollection.prototype.init=function(t){for(var e in r.prototype.init.call(this,t),this._items=[],t)this.addItem(e,t[e])},ItemCollection.prototype.getValue=function(t){if(0===t.length)return this._data;var e=this.getItem(t.shift());return e?e.getValue(t):null},ItemCollection.prototype.getById=function(t){return this.getItem(t)},ItemCollection.prototype.getItem=function(t){for(var e=0,n=this._items;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},ItemCollection.prototype.updateItem=function(t,e){this._data[t]=e;var n=this.getItem(t);n?(n.update(e),this.markChanged()):this.addItem(t,e)},ItemCollection.prototype.removeItem=function(t){var e=this.items.indexOf(t);if(-1===e)return!1;this.removeReplication(t),delete this._data[t.id];var n=this._items.splice(e,1)[0];return this.dispatchEvent(new i.ItemCollectionEvent(i.ItemCollectionEvent.ITEM_REMOVED,n)),this.markChanged(),!0},ItemCollection.prototype.removeAll=function(){var t;for(this.accumulateMarkChanged();t=this._items[0];)this.removeItem(t);this.applyMarkChanged()},ItemCollection.prototype.update=function(t,e){if(void 0===e&&(e=!1),"object"!=typeof t)throw new Error("Collection can be modified only by object.");if(null===this._data&&(this._data={}),this.accumulateMarkChanged(),e)if(t)for(var n in this._data)n in t||this.removeItem(this.getItem(n));else for(;0<this._items.length;)this.removeItem(this._items[this.items.length-1]);if(t)for(var i in t){var r=this.getItem(i);this._data[i]=r?(r.update(t[i],e)&&(this.changed=!0),r._data):(this.addItem(i,t[i]),t[i])}var o=this.changed;return this.applyMarkChanged(),o},ItemCollection.prototype.reinit=function(t){if("object"==typeof t){for(var e in this.accumulateMarkChanged(),t){this._data[e]=t[e];var n=this.getItem(e);n?n.reinit(t[e]):this.addItem(e,t[e]),this.changed=!0}for(var i=0;i<this._items.length;i++)t.hasOwnProperty(this._items[i].id.toString())||(delete this._data[this._items[i].id.toString()],this._items.splice(i,1),i--,this.changed=!0);this.applyMarkChanged()}},Object.defineProperty(ItemCollection.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),ItemCollection.prototype.debugGetName=function(){return o.Utils.getNameFromInstance(this)+"<"+String(this._cls.name)+">"},ItemCollection.prototype.canHold=function(t,e,n){var i=t.split("."),r=i.shift(),o=this.getItem(r);return!!o&&o.canHold(i.join("."),e,n)},ItemCollection.prototype.hold=function(t,e,n){var i=t.split("."),r=i.shift(),o=this.getItem(r);if(!o)return this.createFailedTransaction();var a=o.hold(i.join("."),e,n);if(a.success){var s={};s[r]=o.getRawData(),this.update(s)}return a},ItemCollection.prototype.rollback=function(t,e){var n=t.split("."),i=n.shift(),r=this.getItem(i);if(r){r.rollback(n.join("."),e);var o={};o[i]=r.getRawData(),this.update(o)}},ItemCollection.prototype.insert=function(t,e,n){var i=t.split("."),r=i.shift(),o=this.getItem(r);if(!o)return this.createFailedTransaction();var a=o.insert(i.join("."),e,n);if(a.success){var s={};s[r]=o.getRawData(),this.update(s)}return a},ItemCollection.prototype.release=function(t,e){var n=t.split("."),i=n.shift(),r=this.getItem(i);if(r){r.release(n.join("."),e);var o={};o[i]=r.getRawData(),this.update(o)}},ItemCollection.prototype.watch=function(t){var e=t.split("."),n=e.shift(),i=this.getItem(n);return i?i.watch(e.join(".")):0},ItemCollection.prototype.watchWallet=function(t,e){var n=t.split("."),i=n.shift(),r=this.getItem(i);return r?r.watchWallet(n.join("."),e):0},ItemCollection.prototype.addItem=function(t,e){var n=this.createItem(t,e);return this.replicateChange(n),this._items.push(n),this.dispatchEvent(new i.ItemCollectionEvent(i.ItemCollectionEvent.ITEM_ADDED,n)),this.markChanged(),n},ItemCollection.prototype.createItem=function(t,e){return new this._cls(t,e)},ItemCollection.prototype.getChildProvider=function(t){return this.getItem(t)},ItemCollection}(n.WalletDynamicItem);e.ItemCollection=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(269)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function Module(){return null!==t&&t.apply(this,arguments)||this}return a(Module,t),Module}(n.Component);e.Module=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(2)],void 0===(r=function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.TooltipAnchor||(e.TooltipAnchor={})).Left="left",i.Right="right",i.Top="top",i.Bottom="bottom"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},s=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(4)],void 0===(r=function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function CommandMap(){}return CommandMap.map=function(t,e,n){var i=this._promiseToConfigs.get(t);i||(i=[],this._promiseToConfigs.set(t,i));var r={CommandClass:e,data:n};return i.push(r),o.ElkaCore.instance.promiseManager.has(t,this.onPromise.bind(this))||o.ElkaCore.instance.promiseManager.attach(t,this.onPromise.bind(this)),this._configToPromise.set(r,t),r},CommandMap.unmap=function(t){var e=this._configToPromise.get(t);if(e){this._configToPromise.delete(t);var n=this._promiseToConfigs.get(e);n.splice(n.indexOf(t),1)}},CommandMap.onPromise=function(o){return a(this,void 0,void 0,function(){var e,n,i,r;return s(this,function(t){switch(t.label){case 0:if(!(e=this._promiseToConfigs.get(o.constructor)))return o.resolve(null),[2];n=0,i=e,t.label=1;case 1:return n<i.length?[4,new(r=i[n]).CommandClass(r.data).execute(o)]:[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return o.resolve(null),[2]}})})},CommandMap._promiseToConfigs=new core.Map,CommandMap._configToPromise=new core.Map,CommandMap}();e.CommandMap=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(200),n(24),n(830)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function AwardsTreeStaticData(){return null!==e&&e.apply(this,arguments)||this}return a(AwardsTreeStaticData,e),AwardsTreeStaticData.parse=function(t){var e=new AwardsTreeStaticData;return e._parse(t),e},Object.defineProperty(AwardsTreeStaticData.prototype,"chance",{get:function(){return this._chance},enumerable:!0,configurable:!0}),Object.defineProperty(AwardsTreeStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(AwardsTreeStaticData.prototype,"award",{get:function(){return this._award},enumerable:!0,configurable:!0}),Object.defineProperty(AwardsTreeStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),AwardsTreeStaticData.prototype._parse=function(t){var n=this;e.prototype._parse.call(this,t),this._chance=jQuery(t).attr("chance"),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._award=[],jQuery("> award",t).each(function(t,e){n._award.push(r.AwardItemStaticData.parse(e))}),this._awards=[],jQuery("> awards",t).each(function(t,e){n._awards.push(AwardsTreeStaticData.parse(e))})},AwardsTreeStaticData}(n.BasePricesAwardsRequirementsTreeStaticData);e.AwardsTreeStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(200),n(743),n(141)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function RequirementsTreeStaticData(){return null!==e&&e.apply(this,arguments)||this}return a(RequirementsTreeStaticData,e),RequirementsTreeStaticData.parse=function(t){var e=new RequirementsTreeStaticData;return e._parse(t),e},Object.defineProperty(RequirementsTreeStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementsTreeStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementsTreeStaticData.prototype,"requirement",{get:function(){return this._requirement},enumerable:!0,configurable:!0}),RequirementsTreeStaticData.prototype._parse=function(t){var n=this;e.prototype._parse.call(this,t),this._view=i.RequirementsTreeViewTypeStaticData.parse(jQuery("> view",t).first()),this._requirements=[],jQuery("> requirements",t).each(function(t,e){n._requirements.push(RequirementsTreeStaticData.parse(e))}),this._requirement=[],jQuery("> requirement",t).each(function(t,e){n._requirement.push(r.RequirementItemStaticData.parse(e))})},RequirementsTreeStaticData}(n.BasePricesAwardsRequirementsTreeStaticData);e.RequirementsTreeStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(269)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function Service(){return null!==t&&t.apply(this,arguments)||this}return a(Service,t),Service}(n.Component);e.Service=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.WindowLayer||(e.WindowLayer={})).BACKGROUND="background",n.HUD="hud",n.WINDOWS="windows",n.DECOR_BACK="decorBack",n.OBJECTS="objects",n.DECOR_FRONT="decorFront",n.BUBBLES="bubbles",n.SNOW="snow",n.TOYS="toys",n.ANIMALS="animals",n.TOOLTIP="tooltip",n.LONG_REQUEST="longRequest",n.ERRORS="errors",n.ANIMATIONS="animations",n.GLADE_STARS="gladeStars",n.ADMIN="admin",n.FRAME="frame",n.GUIDE="guide",n.GUIDE_SKIP_BUTTON="guideSkipButton",n.LOCK="lock",n.DEV="dev"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function PlatformResponse(){this.success=!1}return PlatformResponse.prototype.traceData=function(t){return t},PlatformResponse}();e.PlatformResponse=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(521),n(86),n(170),n(313)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.BaseEvent,s=uipixi.BaseEventTarget,c=function(){function Core(){this._errorHandlers=[],this._isFatalErrorThrown=!1}return Object.defineProperty(Core,"instance",{get:function(){return this._facade},enumerable:!0,configurable:!0}),Core.setInstance=function(t){this._facade=t},Core.prototype.run=function(e){return u(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return console.time("initialized time"),this.parseRunConfig(e),this._eventRouter=new s,this._promiseManager=new n.PromiseManager,this.initializeConfig(),Core.setInstance(this),this.prepareLoader(this._runConfig.components),[4,this.initialize()];case 1:return t.sent(),this._isFatalErrorThrown||this.eventRouter.dispatchEvent(new i.CoreEvent(i.CoreEvent.READY)),console.timeEnd("initialized time"),[2,!this._isFatalErrorThrown]}})})},Core.prototype.stop=function(){},Object.defineProperty(Core.prototype,"eventRouter",{get:function(){return this._eventRouter},enumerable:!0,configurable:!0}),Object.defineProperty(Core.prototype,"promiseManager",{get:function(){return this._promiseManager},enumerable:!0,configurable:!0}),Object.defineProperty(Core.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Core.prototype.addFatalErrorHandler=function(t){this._errorHandlers.push(t)},Core.prototype.fatalError=function(t){if(this._isFatalErrorThrown=!0,0===this._errorHandlers.length)throw new Error("Core.fatalError: there are no handlers for fatal error.");for(var e=0,n=this._errorHandlers;e<n.length;e++){n[e].call(null,t)}r.ComponentsFactory.instance.stopInitialization()},Core.prototype.getServicesList=function(){return[]},Core.prototype.getModulesList=function(){return[]},Core.prototype.initializeConfig=function(){this._config=new o.CoreConfig},Core.prototype.prepareList=function(){return this.getServicesList().concat(this.getModulesList())},Core.prototype.initialize=function(){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return e=this.prepareList(),(n=new r.ComponentsFactory).map(e),[4,n.initializeComponents(e,this._runConfig.components)];case 1:return t.sent(),[2]}})})},Core.prototype.parseRunConfig=function(t){this._runConfig=JSON.parse(t)},Core.prototype.prepareLoader=function(t){},Object.defineProperty(Core.prototype,"gameIsBroken",{get:function(){return this._gameIsBroken},enumerable:!0,configurable:!0}),Core.prototype.breakGame=function(){this._gameIsBroken||(this._gameIsBroken=!0,this._eventRouter.dispatchEvent(new a(i.CoreEvent.GAME_BREAK)))},Core}();e.Core=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DateUtils(){}return DateUtils.timeToString=function(t){var e="",n=t%60,i=Math.floor(t%3600/60),r=Math.floor(t%86400/3600),o=Math.floor(t/86400);return 0<o?(e=DateUtils.formatTimeUnit(o,"DAY",!1),r&&(e+=" "+DateUtils.formatTimeUnit(r,"HOUR",!0))):0<r?(e=DateUtils.formatTimeUnit(r,"HOUR",!1),i&&(e+=" "+DateUtils.formatTimeUnit(i,"MINUTE",!0))):0<i?(e=DateUtils.formatTimeUnit(i,"MINUTE",!1),n&&(e+=" "+DateUtils.formatTimeUnit(n,"SECOND",!0))):e=DateUtils.formatTimeUnit(n,"SECOND",!1),e},DateUtils.dateToDDMMYYYY=function(t){return[DateUtils.addLeadingZeroIfNeeded(t.getDate()),DateUtils.addLeadingZeroIfNeeded(t.getMonth()+1),t.getFullYear()].join(".")},DateUtils.formatTimeUnit=function(t,e,n){return void 0===n&&(n=!1),(n?DateUtils.addLeadingZeroIfNeeded(t):t)+r.Application.localization.localize(e)},DateUtils.addLeadingZeroIfNeeded=function(t){return(t<10?"0":"")+t},DateUtils.getMonthDate=function(t){var e=t.getDate();return"ru"===r.Application.localization.locale?e+" "+DateUtils.getMonthName(t,3,"."):DateUtils.getMonthName(t)+" "+e},DateUtils.getMonthName=function(t,e,n){void 0===e&&(e=3),void 0===n&&(n="");var i=t.toDateString().split(" ");return r.Application.localization.localize(i[1].toUpperCase()).substr(0,e)+n},DateUtils}();e.DateUtils=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(38),n(0),n(120),n(119),n(75),n(43),n(46),n(14),n(2),n(26),n(48)],void 0===(r=function(t,e,b,v,g,w,O,u,S,p,l,d,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var P=uipixi.Point,E=uipixi.UIImage,i=function(){function AnimationUtils(){}return AnimationUtils.flyResourceToHud=function(t,e,n,i,r){void 0===r&&(r={});var o=r.count,a=void 0===o?8:o,s=r.angle,c=void 0===s?-60:s,u=r.customFinish,p=r.firstOnComplete,l=r.lastOnComplete,d=n.getGlobalPosition(),h=u;h||(h=w.UIUtils.getResourceHUDPoint(e,t));var _=i.getGlobalPosition(),f=new P(.5*i.width,.5*i.height);_=_.add(f);var y={angle:c,count:a,firstOnComplete:p,lastOnComplete:l},m=this.resourceSounds[t];m&&(y.soundName=m);var v=b.PriceAwardUtils.getResourceResourceId(t,"64");return AnimationUtils.flyResources(v,d,_,h,f,y)},AnimationUtils.flyResourceFromHud=function(t,e,n,i,r){void 0===r&&(r={});var o=r.count,a=void 0===o?8:o,s=r.angle,c=void 0===s?-60:s,u=r.firstOnComplete,p=r.lastOnComplete,l=w.UIUtils.getResourceHUDPoint(e,t),d=n.getGlobalPosition().add(new P(.5*n.width,.5*n.height)),h=new P(.5*i.width,.5*i.height),_=i.getGlobalPosition().add(h),f=b.PriceAwardUtils.getResourceResourceId(t,"64"),y={count:a,angle:c,firstOnComplete:u,lastOnComplete:p};return r.soundName&&(y.soundName=r.soundName),AnimationUtils.flyResources(f,l,_,d,h,y)},AnimationUtils.flyResources=function(t,e,n,i,r,o){for(var a=[],s=o.soundName?o.soundName:null,c=o.angle,u=0;u<o.count;u++){var p=void 0;if(0===u)p=o.firstOnComplete;else if(u===o.count-1){if(p)throw Error("lastOnComplete is not allowed!");p=o.lastOnComplete}var l=this.flyResource(t,u,e,n,i,r,c,s,o.layer,p);a.push(l)}return a},AnimationUtils.flyResource=function(t,e,n,i,r,o,a,s,c,u){var p=new E(t);return p.anchor="topLeft",p.render.pivot.set(p.width/2,p.height/2),v.Application.animation.animate(p,"flyResource",{startX:n.x,startY:n.y,finalX:r.x,finalY:r.y,middleX:i.x+g.MathUtils.getRandomPlusMinus(o.x),middleY:i.y+g.MathUtils.getRandomPlusMinus(o.y),delay:70*e,angle:a,playSound:function(){s&&v.Application.sound.play(s,!1,S.SoundGroup.SOUND_GROUP_SOUND)},onComplete:function(){u&&u.apply(null)}},c)},AnimationUtils.awardWindow=function(t,e,n,i,r,o,a,s,c){var u=this;return v.Application.animation.animate(null,"commonAwardWindow",{caption:t,awardLabel:e,object:n,button:i,wallpost:r,shine:o,onShine:function(){return u.onStartShine(o)},onSkip:function(){return u.onSkip(o)},awardsAnimationDuration:(c-2)*this.AWARD_ITEM_ANIMATION_STEP_DELAY,startScale:a,startAlpha:s})},AnimationUtils.onStartShine=function(t){t.setAnimation("01_reveal",!1),t.addAnimation("02_idle",!0)},AnimationUtils.onSkip=function(t){t.setAnimation("02_idle",!0)},AnimationUtils.awardWindowItem=function(t,e){return v.Application.animation.animate(t,"commonAwardItem",{itemDelay:e*this.AWARD_ITEM_ANIMATION_STEP_DELAY})},AnimationUtils.throwStar=function(t,e,n,i,r,o,a){var s=new E(t);s.render.pivot.set(s.width/2,s.height/2);var c=.5+.5*Math.random(),u=.3+.7*Math.random(),p=Math.sqrt(c+u),l=e.y-n*c+g.MathUtils.getRandomPlusMinus(.2)*s.height,d=.5<Math.random()?1:-1,h=e.x+i*u*d,_=p*this.STAR_THROW_DURATION,f=_-2*O.AnimationService.FPS,y=r+g.MathUtils.getRandomPlusMinus(.2)*s.height;return v.Application.animation.animate(s,"objectThrowStar",{startX:e.x,startY:e.y,topY:l,finalX:h,finalY:y,time:_,halfTime:.5*_,scaleTimeDelay:f,barX:o?o.x:h,barY:o?o.y:y},a)},AnimationUtils.throwLoopedAwardOnGlade=function(t,e,n,i,r,o,a){var s=new E(t);s.render.pivot.set(s.width/2,s.height/2);var c=.5+.5*Math.random(),u=.3+.7*Math.random(),p=Math.sqrt(c+u),l=n.y-i*c+g.MathUtils.getRandomPlusMinus(.2)*s.height,d=.5<Math.random()?1:-1,h=n.x+r*u*d,_=p*this.STAR_THROW_DURATION,f=_-2*O.AnimationService.FPS,y=o+g.MathUtils.getRandomPlusMinus(.2)*s.height,m=this.resourceSounds[e];return m&&v.Application.sound.play(m,!1,S.SoundGroup.SOUND_GROUP_SOUND),v.Application.animation.animate(s,"objectThrowLoopedAward",{startX:n.x,startY:n.y,topY:l,finalX:h,finalY:y,time:_,halfTime:.5*_,scaleTimeDelay:f},a)},AnimationUtils.throwLevelUpAward=function(t,e,n,i,r,o){var a=new E(t);a.render.pivot.set(a.width/2,a.height/2);var s=.6+.4*Math.random(),c=.7+.3*Math.random(),u=Math.sqrt(s+c),p=e.y-n*s+g.MathUtils.getRandomPlusMinus(.2)*a.height,l=e.x+i*c,d=u*this.LEVEL_UP_AWARD_THROW_DURATION,h=d-2*O.AnimationService.FPS,_=r+g.MathUtils.getRandomPlusMinus(.2)*a.height;return v.Application.animation.animate(a,"levelUpThrowAward",{startX:e.x,startY:e.y,topY:p,finalX:l,finalY:_,time:d,halfTime1:.3*d,halfTime2:.7*d,scaleTimeDelay:h,endX:o.x,endY:o.y})},AnimationUtils.throwLoopedAward=function(t,e,n,i,r,o,a,s){var c=new E(t);c.render.pivot.set(c.width/2,c.height/2);var u=.6+.4*Math.random(),p=.7+.3*Math.random(),l=Math.sqrt(u+p),d=n.y-i*u+g.MathUtils.getRandomPlusMinus(.2)*c.height,h=n.x+r*p,_=l*this.LEVEL_UP_AWARD_THROW_DURATION,f=_-2*O.AnimationService.FPS,y=o+g.MathUtils.getRandomPlusMinus(.2)*c.height,m=this.resourceSounds[e];return m&&v.Application.sound.play(m,!1,S.SoundGroup.SOUND_GROUP_SOUND),v.Application.animation.animate(c,"levelUpThrowAward",{startX:n.x,startY:n.y,topY:d,finalX:h,finalY:y,time:_,halfTime1:.3*_,halfTime2:.7*_,scaleTimeDelay:f,endX:a.x,endY:a.y,delay:s})},AnimationUtils.flyBeautyCrowns=function(t,e,n,i,r,o){var a,s=this;v.Application.model.beauty.currentScreenBeauty.canStageUp&&(a=v.Application.view.show(l.GUINames.SCREEN_LOCK,null,d.WindowLayer.LOCK));var c={count:e,angle:0,soundName:u.SoundName.CROWN,firstOnComplete:function(){return v.Application.model.beauty.currentScreenBeauty.updateBeautyProgress()},lastOnComplete:function(){return s.onAnimationComplete(a)}};return AnimationUtils.flyResources(b.PriceAwardUtils.getIcon(p.AwardType.BEAUTY,null,t.toString()),n,i,r,o,c)},AnimationUtils.onAnimationComplete=function(t){var e=this;v.Application.model.guides.dispatchEvent(new n.GuidesModelEvent(n.GuidesModelEvent.BEAUTY_FLY_ANIMATION_COMPLETE)),t&&v.Application.date.callProcessor.delayCall(function(){return e.onDelayed(t)},150)},AnimationUtils.onDelayed=function(t){v.Application.view.hide(t),v.Application.view.show(l.GUINames.BEAUTY_WINDOW)},AnimationUtils.AWARD_ITEM_ANIMATION_STEP_DELAY=5.5*O.AnimationService.FPS,AnimationUtils.STAR_THROW_DURATION=15*O.AnimationService.FPS,AnimationUtils.LEVEL_UP_AWARD_THROW_DURATION=13*O.AnimationService.FPS,AnimationUtils.resourceSounds={cash:u.SoundName.TAKE_RUBY,money1:u.SoundName.TAKE_SNOW,coin1:u.SoundName.TAKE_COIN,energy:u.SoundName.TAKE_WAND},AnimationUtils}();e.AnimationUtils=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(753)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function OccurrenceBeginningLineRule(){return null!==t&&t.apply(this,arguments)||this}return a(OccurrenceBeginningLineRule,t),OccurrenceBeginningLineRule.prototype.check=function(t,e){return("*"===this.url||-1!==e.indexOf(this.url))&&("*"===this.path||0==t.indexOf(this.path))},OccurrenceBeginningLineRule}(n.FilterRule);e.OccurrenceBeginningLineRule=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.StarkEventsName||(e.StarkEventsName={})).BEAUTY_UP="beauty_up",n.OBJECT_UPGRADE="object_upgrade",n.PROMO_START="promo_start",n.QUEST_COMPLETE="quest_complete",n.SOCIAL_SHARE="social_share",n.CASE_OPEN="case_open",n.TUTORIAL_STEP_START="tutorial_step_start",n.TUTORIAL_STEP_FINISH="tutorial_step_finish",n.ACHIEVEMENT="achievement",n.FULLSCREEN="fullscreen",n.MUSIC="music",n.INAPP="inapp",n.FACTORY_ELEMENT="factory_element",n.FACTORY_COLLECTION="factory_collection",n.TOY_PURCHASE="toy_purchase",n.WHEEL_GOLD="wheel_gold",n.WHEEL="wheel",n.LOADING_FINISH="loading_finish",n.FARM_CELL="farm_cell",n.FARM_UPGRADE="farm_upgrade",n.GLADES_SPEEDUP="glades_speedup",n.PERFORMANCE="performance",n.ENVIRONMENT="environment",n.CHAT_CONNECT="chat_connect",n.CHAT_CONNECT_ERROR="chat_connect_error",n.CHAT_DISCONNECT_ERROR="chat_disconnect_error",n.CHAT_CONNECT_IMPOSSIBLE="chat_connect_impossible"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(287),n(578),n(25),n(28),n(17),n(605),n(618)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";var u,p;Object.defineProperty(e,"__esModule",{value:!0}),(p=u=e.PlatformType||(e.PlatformType={}))[p.UNKNOWN=0]="UNKNOWN",p[p.VK=1]="VK",p[p.OK=2]="OK",p[p.FB=3]="FB",p[p.VK_MOBILE=5]="VK_MOBILE";var l=function(e){function SocialNetworkService(){var t=null!==e&&e.apply(this,arguments)||this;return t.platformMap={vk:n.PlatformVK,ok:i.PlatformOK,fb:s.PlatformFB},t._mobilePlatformMap={ok:i.PlatformOK,vk:c.PlatformVKMobile,fb:s.PlatformFB},t}return d(SocialNetworkService,e),SocialNetworkService.prototype.initialize=function(t){return h(this,void 0,void 0,function(){var e,n,i,r;return _(this,function(t){switch(t.label){case 0:return e=o.Core.instance.config.platform,n=o.Core.instance.config.mobile,this._platformType=this.convertTypeFromString(e,n),i=n?this._mobilePlatformMap:this.platformMap,this._platformType!==u.UNKNOWN&&e in i?(this._platform=new i[e],0<(r=this._platform.getRequiredResources()).length?[4,a.Services.resources.getResources(r)]:[3,2]):(a.Services.debug.addError("Unknown platform: "+e),[2,Promise.reject("Unknown platform: "+e)]);case 1:t.sent(),t.label=2;case 2:return[4,this._platform.init()];case 3:return t.sent(),[2]}})})},Object.defineProperty(SocialNetworkService.prototype,"platform",{get:function(){return this._platform},enumerable:!0,configurable:!0}),Object.defineProperty(SocialNetworkService.prototype,"platformType",{get:function(){return this._platformType},enumerable:!0,configurable:!0}),SocialNetworkService.prototype.platformIs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t;n<i.length;n++){if(i[n]===this._platformType)return!0}return!1},SocialNetworkService.prototype.platformIsNot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t;n<i.length;n++){if(i[n]===this._platformType)return!1}return!0},SocialNetworkService.prototype.convertTypeFromString=function(t,e){switch(t.toLowerCase()){case"vk":return e?u.VK_MOBILE:u.VK;case"ok":return u.OK;case"fb":return u.FB;default:return u.UNKNOWN}},SocialNetworkService}(r.Service);e.SocialNetworkService=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ProcessEvent(t,e){var n=i.call(this,t,e)||this;return n._process=e,n}return o(ProcessEvent,i),Object.defineProperty(ProcessEvent.prototype,"process",{get:function(){return this._process},enumerable:!0,configurable:!0}),ProcessEvent.COMPLETE="Complete",ProcessEvent}(uipixi.BaseEvent);e.ProcessEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.LogFlag||(e.LogFlag={}))[n.SERVER=1]="SERVER",n[n.CLIENT=2]="CLIENT",n[n.CLICK_SEND=3]="CLICK_SEND",n[n.QUEST_PERELIV_NOT_STARTED=4]="QUEST_PERELIV_NOT_STARTED"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.LogLevel||(e.LogLevel={}))[n.Undefined=0]="Undefined",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ItemCollectionEvent(t,e){var n=i.call(this,t,e)||this;return n.dataTarget=e,n}return o(ItemCollectionEvent,i),Object.defineProperty(ItemCollectionEvent.prototype,"item",{get:function(){return this.dataTarget},enumerable:!0,configurable:!0}),ItemCollectionEvent.ITEM_ADDED="ItemCollectionEvent.ITEM_ADDED",ItemCollectionEvent.ITEM_REMOVED="ItemCollectionEvent.ITEM_REMOVED",ItemCollectionEvent}(uipixi.BaseEvent);e.ItemCollectionEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(0),n(49),n(14),n(28)],void 0===(r=function(t,e,a,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function PriceAwardUtils(){}return PriceAwardUtils.getAwardIconResource=function(t,e){return PriceAwardUtils.getIcon(t.type,t.itemId,e)},PriceAwardUtils.getAwardString=function(t,e){return PriceAwardUtils.getString(t.type,t.itemId,e)},PriceAwardUtils.getIcon=function(t,e,n){switch(t){case r.AwardType.RESOURCE:return this.getResourceResourceId(e,n);case r.AwardType.EXTRA_ITEM:case r.AwardType.EXTRA_ITEM_WITH_BEAUTY:case r.AwardType.UNLOCKED_EXTRA_ITEM:return this.getExtraItemResourceId(parseInt(e));case r.AwardType.BEAUTY:case r.AwardType.BEAUTY_BONUS:case r.AwardType.ACHIEVE_BONUS:case r.AwardType.GENERATOR_BOOST:case r.AwardType.ROULETTE:case r.AwardType.ROULETTE_SPINS:return this.getClientResourceId(t,e,n);case i.PriceType.REAL:return this.getClientResourceId(t,e,n)+o.Core.instance.config.platform;default:return a.Application.debug.addError("PriceAwardUtils","getIcon: Unknown award type ("+t+")"),""}},PriceAwardUtils.getString=function(t,e,n){switch(t){case r.AwardType.RESOURCE:return this.getResourceString(e,n);case r.AwardType.TOY:return this.getToyString(e);case r.AwardType.EXTRA_ITEM:case r.AwardType.EXTRA_ITEM_WITH_BEAUTY:return this.getExtraItemString(parseInt(e),n);case r.AwardType.UNLOCKED_EXTRA_ITEM:return a.Application.localization.localize("UNLOCKED_EXTRA_ITEM_TITLE");case r.AwardType.BEAUTY:case r.AwardType.ROULETTE:case r.AwardType.BEAUTY_BONUS:case r.AwardType.ACHIEVE_BONUS:case r.AwardType.GENERATOR_BOOST:return this.getClientString(t,e,n);case i.PriceType.REAL:return this.getClientString(t,e,n)+o.Core.instance.config.platform;default:return void a.Application.debug.addError("PriceAwardUtils","getString: Unknown award type ("+t+")")}},PriceAwardUtils.getResourceResourceId=function(t,e){var n=a.Application.static.data.resources.resource.getItem(t);if(!n)throw new Error("Unknown resource type: "+t);return this.getIconFromView(n.view.icons,e)},PriceAwardUtils.getIconFromView=function(t,e){var n=t.icon.getItem(e);return n?n.resourceId:""},PriceAwardUtils.getResourceString=function(t,e){var n=a.Application.static.data.resources.resource.getItem(t);if(!n)throw new Error("Unknown resource type: "+t);var i=n.view.strings.string.getItem(e);return i?i.keyId:""},PriceAwardUtils.getExtraItemResourceId=function(t){return a.Application.static.data.extraItems.extraItem.getItem(t).view.icons.icon.getItem("96").resourceId},PriceAwardUtils.getExtraItemString=function(t,e){var n=a.Application.static.data.extraItems.extraItem.getItem(t).view.strings.string.getItem(e);return n?n.keyId:""},PriceAwardUtils.getToyResourceId=function(t,e){return""},PriceAwardUtils.getToyString=function(t){var e=a.Application.static.data.toys.toy.getItem(parseInt(t)).view;return e?e.title:""},PriceAwardUtils.getClientResourceId=function(t,e,n){null===e&&(e="");var i=a.Application.static.data.client.renderers.getItem(t).renderer,r=i.getItem(e);return r||(r=i.getItem("*")),this.getIconFromView(r.view.icons,n)},PriceAwardUtils.getClientString=function(t,e,n){null===e&&(e="");var i=a.Application.static.data.client.renderers.getItem(t).renderer,r=i.getItem(e);r||(r=i.getItem("*"));var o=r.view.strings.string.getItem(n);return o?o.keyId:""},PriceAwardUtils}();e.PriceAwardUtils=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function ObjectModelEvent(t){return e.call(this,t)||this}return o(ObjectModelEvent,e),ObjectModelEvent.STAGE_UP="ObjectModelEvent.STAGE_UP",ObjectModelEvent.EXP_CHANGED="ObjectModelEvent.EXP_CHANGED",ObjectModelEvent.STATE_CHANGED="ObjectModelEvent.STATE_CHANGED",ObjectModelEvent.REQUEST_STATE_ACTION="ObjectModelEvent.REQUEST_STATE_ACTION",ObjectModelEvent}(uipixi.BaseEvent);e.ObjectModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(334),n(58),n(319),n(837)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function ProfileRenderer(){var t=null!==e&&e.apply(this,arguments)||this;return t._avatarLoaded=!1,t}return c(ProfileRenderer,e),ProfileRenderer.prototype.initialize=function(t,e,n){if(this._initialized)throw new Error("ProfileRenderer: initialize - already initialized");return this.profile=t,this.options=this.prepareOptions(n||{}),this.getElements(e),this._initialized=!0,this.options.renderOnInit&&this.render(),this},ProfileRenderer.prototype.render=function(){if(!this._initialized)throw new Error("ProfileRenderer: render - not initialized");if(this._nameLabel&&(this._nameLabel.text=this.formatName()),this._avatarImage){var e=n.Application.dynamic.user.screen;this.profile.pictures.some(function(t){return t.screenId!==e})&&n.Application.dynamic.user.addEventListener(o.UserDynamicDataEvent.SCREEN_CHANGED,this.onScreenChanged.bind(this)),this.setOrLoadAvatar(e)}},ProfileRenderer.prototype.setOrLoadAvatar=function(t){n.Application.profiles.avatarLoaded(this.profile,t)?(this.setAvatar(t),this._avatarLoaded=!0):(this.profile.addEventListener(i.UserEntityEvent.AVATAR_LOADED,this.onAvatarLoaded.bind(this,t)),n.Application.profiles.loadAvatar(this.profile,t))},ProfileRenderer.prototype.onScreenChanged=function(t){this.profile.removeEventListener(i.UserEntityEvent.AVATAR_LOADED,this.onAvatarLoaded.bind(this)),this.setOrLoadAvatar(n.Application.dynamic.user.screen)},ProfileRenderer.prototype.onAvatarLoaded=function(t,e){this.profile.removeEventListener(i.UserEntityEvent.AVATAR_LOADED,this.onAvatarLoaded.bind(this)),this.setAvatar(t),this._avatarLoaded=!0,this.dispatchEvent(new a.ProfileRendererEvent(a.ProfileRendererEvent.AVATAR_COMPLETED))},ProfileRenderer.prototype.setAvatar=function(t){this._avatarImage.resource=this.profile.getBiggestSquarePicture(t)},ProfileRenderer.prototype.prepareOptions=function(t){return void 0===t.nameLabel&&(t.nameLabel="nameLabel"),void 0===t.avatarImage&&(t.avatarImage="avatarImage"),void 0===t.renderOnInit&&(t.renderOnInit=!0),t},ProfileRenderer.prototype.getElements=function(t){this._avatarImage=this.getComponent(t,this.options.avatarImage),this._nameLabel=this.getComponent(t,this.options.nameLabel)},ProfileRenderer.prototype.getComponent=function(t,e){return"string"==typeof e?t.getChildByName(e):!1===e?null:e},ProfileRenderer.prototype.destroy=function(){if(!this._initialized)throw new Error("ProfileRenderer: destroy - not initialized");this.clearProfile(),n.Application.dynamic.user.removeEventListener(o.UserDynamicDataEvent.SCREEN_CHANGED,this.onScreenChanged.bind(this)),this._initialized=!1},ProfileRenderer.prototype.clearProfile=function(){this.profile&&this.profile.removeEventListener(i.UserEntityEvent.AVATAR_LOADED,this.onAvatarLoaded.bind(this))},ProfileRenderer.prototype.formatName=function(){var t=r.StringUtils.cropStringIfNeedeed(this.profile.firstName,this.options.cropedFirstnameLength,this.options.cropedFisrtnameSuffix),e=r.StringUtils.cropStringIfNeedeed(this.profile.lastName,this.options.cropedLastnameLength,this.options.cropedLastnameSuffix),n=t+(this.options.delimiter?this.options.delimiter:" ")+e;return r.StringUtils.cropStringIfNeedeed(n,this.options.cropedFullnameLength,this.options.cropedFullnameSuffix)},Object.defineProperty(ProfileRenderer.prototype,"avatarLoaded",{get:function(){return this._avatarLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(ProfileRenderer.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0}),ProfileRenderer.prototype.update=function(t,e){void 0===e&&(e=!0),this.clearProfile(),this.profile=t,e&&this.render()},ProfileRenderer}(uipixi.BaseEventTarget);e.ProfileRenderer=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,y=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(90),n(1735),n(13),n(1738),n(1739),n(4),n(509),n(1740),n(1741)],void 0===(r=function(t,e,c,n,s,u,p,l,i,r,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _,o,a=uipixi.BaseEventTarget;(o=_=e.EventNewYearPhase||(e.EventNewYearPhase={}))[o.NONE=0]="NONE",o[o.GENERAL=1]="GENERAL",o[o.EXTRA=2]="EXTRA";var f=function(a){function EventNewYearModel(t,e){var n=a.call(this)||this;n._phase=_.NONE,n._timeLeft=0,n._needInitEvent=!1,n._placeSize=100,n._staticData=e,n._dynamicData=t,n._dynamicData.addEventListener(u.BaseDataEvent.CHILDREN_CHANGED,n.onChildrenChanged.bind(n)),n._generalTimeRequirement=EventNewYearModel.getTimeRequirement(n._staticData.general),n._extraTimeRequirement=EventNewYearModel.getTimeRequirement(n._staticData.extra),n._achievements=new s.EventNewYearAchievementsModel(t.achievements,n._staticData.achievements),n._presents=new p.EventNewYearPresentsModel(t.presents),n._ratings=new l.EventNewYearRatingsModel,n._useEnergyModel=new h.EventNewYearUseEnergyModel;for(var i=0,r=e.presents.settings.setting;i<r.length;i++){var o=r[i];if("placeSize"===o.name){n._placeSize=parseInt(o.value);break}}return n._staticData.enable&&n.checkCurrentPhase(),n._markersModel=new d.EventNewYearMarkersModel(n),n}return y(EventNewYearModel,a),EventNewYearModel.prototype.checkCurrentPhase=function(){if(0<this._timerProcessId&&this.stopTimer(),c.Application.requirements.check(this._staticData.general))this._phase=_.GENERAL,this._needInitEvent&&(i.ElkaCore.instance.promiseManager.ask(new r.EventNewYearInitPromise),this._needInitEvent=!1),this._useEnergyModel.start(this._phase),this.startTimer(this._generalTimeRequirement);else if(c.Application.requirements.check(this._staticData.extra))this._phase=_.EXTRA,this._useEnergyModel.start(this._phase),this._needInitEvent&&(i.ElkaCore.instance.promiseManager.ask(new r.EventNewYearInitPromise),this._needInitEvent=!1),this.startTimer(this._extraTimeRequirement);else{this._phase=_.NONE;var t=c.Application.date.currentTime,e=c.Application.date.getServerTimeByDateString(this._generalTimeRequirement.maxValue),n=c.Application.date.getServerTimeByDateString(this._extraTimeRequirement.maxValue);t<e?(c.Application.requirements.wait(this._staticData.general,this.onGeneralRequirementsChecked.bind(this)),this._needInitEvent=!0):t<n&&(c.Application.requirements.wait(this._staticData.extra,this.onExtraRequirementsChecked.bind(this)),this._needInitEvent=!0)}},EventNewYearModel.getTimeRequirement=function(t){for(var e,n=0,i=t.requirements[0].requirements[1].requirements;n<i.length;n++){for(var r=!0,o=0,a=i[n].requirement;o<a.length;o++){var s=a[o];if("{date.current}"!==s.data){if(!c.Application.requirements.checkItem(s)){r=!1;break}}else e=s}if(r)return e}return null},EventNewYearModel.prototype.startTimer=function(t){this._timeEnd=c.Application.requirements.timeFromDateString(t.maxValue),this._timerProcessId=c.Application.date.callProcessor.repeatCall(this.updateTimer.bind(this),1e3),this.updateTimer(),this.dispatchEvent(new n.EventNewYearEvent(n.EventNewYearEvent.PHASE_START))},EventNewYearModel.prototype.updateTimer=function(){if(this._timeLeft=this._timeEnd-c.Application.date.currentTime,this._timeLeft<=0)return this.stopTimer(),void this.checkCurrentPhase();this.dispatchEvent(new n.EventNewYearEvent(n.EventNewYearEvent.TIMER))},EventNewYearModel.prototype.stopTimer=function(){c.Application.date.callProcessor.deleteCall(this._timerProcessId),this._timerProcessId=0,this.dispatchEvent(new n.EventNewYearEvent(n.EventNewYearEvent.PHASE_FINISH)),this._phase!==_.NONE&&this._useEnergyModel.stop()},EventNewYearModel.prototype.onGeneralRequirementsChecked=function(){c.Application.requirements.unwait(this._staticData.general,this.onGeneralRequirementsChecked.bind(this)),this.checkCurrentPhase()},EventNewYearModel.prototype.onExtraRequirementsChecked=function(){c.Application.requirements.unwait(this._staticData.extra,this.onExtraRequirementsChecked.bind(this)),this.checkCurrentPhase()},Object.defineProperty(EventNewYearModel.prototype,"markersModel",{get:function(){return this._markersModel},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"timeLeft",{get:function(){return this._timeLeft},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"achievements",{get:function(){return this._achievements},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"placeSize",{get:function(){return this._dynamicData.placeSize},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"ratingPlace",{get:function(){return this._dynamicData.ratingPlace},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"presents",{get:function(){return this._presents},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"ratings",{get:function(){return this._ratings},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"useEnergy",{get:function(){return this._useEnergyModel},enumerable:!0,configurable:!0}),EventNewYearModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("placeSize")&&this.dispatchEvent(new n.EventNewYearEvent(n.EventNewYearEvent.PLACE_SIZE_CHANGED)),-1!==t.children.indexOf("ratingPlace")&&this.dispatchEvent(new n.EventNewYearEvent(n.EventNewYearEvent.RATING_PLACE_CHANGED))},Object.defineProperty(EventNewYearModel.prototype,"calculatedPlaceSize",{get:function(){return this._placeSize+this._achievements.generalAchievement.progress},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearModel.prototype,"rating",{get:function(){return this._dynamicData.rating},enumerable:!0,configurable:!0}),EventNewYearModel}(a);e.EventNewYearModel=f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function ResourceModelEvent(t){return e.call(this,t)||this}return o(ResourceModelEvent,e),ResourceModelEvent.COUNT_CHANGED="ResourceModelEvent.COUNT_CHANGED",ResourceModelEvent}(uipixi.BaseEvent);e.ResourceModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.SoundName||(e.SoundName={})).BOX_OPEN="box_open",n.BUY_CRYSTAL="buy_crystal",n.CLICK="click",n.PICKUP_RESOURCE="pickup_resource_1",n.PRESENT_REWARD="present_reward_1",n.COINS="coins",n.CROWN="crown",n.DECORATION="decoration",n.FORTUNE_WHEEL_WIN_JINGLE="fortune_wheel_win_jingle",n.GIFTS="gifts",n.HINT="hint",n.MAP_UPGRADE_JINGLE="map_upgrade_jingle",n.POPUP_JINGLE="popup_jingle",n.RIGHT_SIDE_JINGLE="right_side_jingle",n.SHOVEL="shovel",n.STARS_1="stars_1",n.STARS_2="stars_2",n.STARS_3="stars_3",n.STARS_4="stars_4",n.STARS_5="stars_5",n.UPGRADE_JINGLE="upgrade_jingle",n.WRONG_SIDE_JINGLE="wrong_side_jingle",n.WHEEL_ROTATE="wheel_rotate",n.TAKE_WAND="take_wand",n.TAKE_RUBY="take_ruby",n.TAKE_SNOW="take_snow",n.TAKE_COIN="take_coin",n.CHEST_GLADE="chest_glade"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(256)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function GuideAction(t){var e=n.call(this)||this;return e._stepStaticData=t,e}return a(GuideAction,n),GuideAction.prototype.complete=function(){this.dispatchEvent(new i.GuideActionEvent(i.GuideActionEvent.COMPLETE))},GuideAction.prototype.interrupt=function(){},GuideAction.prototype.revert=function(){},GuideAction}(uipixi.BaseEventTarget);e.GuideAction=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.TIME||(e.TIME={})).SECONDS_IN_DAY=86400,n.SECONDS_IN_HOUR=3600,n.SECONDS_IN_MINUTE=60,n.MINUTES_IN_HOUR=60,n.MS_IN_SECOND=1e3,n.MS_IN_DAY=864e5,n.MS_IN_HOUR=36e5,n.MS_IN_MINUTE=6e4}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.SoundGroup||(e.SoundGroup={})).SOUND_GROUP_USE_ENERGY="useEnergy",n.SOUND_GROUP_BOX_OPEN="boxOpen",n.SOUND_GROUP_MUSIC="music",n.SOUND_GROUP_SOUND="sound"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(200),n(24),n(142)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function PricesTreeStaticData(){return null!==e&&e.apply(this,arguments)||this}return a(PricesTreeStaticData,e),PricesTreeStaticData.parse=function(t){var e=new PricesTreeStaticData;return e._parse(t),e},Object.defineProperty(PricesTreeStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(PricesTreeStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(PricesTreeStaticData.prototype,"price",{get:function(){return this._price},enumerable:!0,configurable:!0}),PricesTreeStaticData.prototype._parse=function(t){var n=this;e.prototype._parse.call(this,t),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._prices=[],jQuery("> prices",t).each(function(t,e){n._prices.push(PricesTreeStaticData.parse(e))}),this._price=[],jQuery("> price",t).each(function(t,e){n._price.push(r.PriceItemStaticData.parse(e))})},PricesTreeStaticData}(n.BasePricesAwardsRequirementsTreeStaticData);e.PricesTreeStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function GuidesModelEvent(t){return e.call(this,t)||this}return o(GuidesModelEvent,e),GuidesModelEvent.fromTriggerEventName=function(t){return"GuideModelEvent.TRIGGER_EVENT_"+t},GuidesModelEvent.FADE_CHANGED="GuideModelEvent.FADE_CHANGED",GuidesModelEvent.LOCK_SCREEN_CHANGED="GuideModelEvent.LOCK_SCREEN_CHANGED",GuidesModelEvent.VIRAL_REQUEST_ANIMATION_COMPLETE="GuideModelEvent.VIRAL_REQUEST_ANIMATION_COMPLETE",GuidesModelEvent.FARM_EXCHANGE_ANIMATION_COMPLETE="GuideModelEvent.FARM_EXCHANGE_ANIMATION_COMPLETE",GuidesModelEvent.FARM_UPGRADE_ANIMATION_COMPLETE="GuideModelEvent.FARM_UPGRADE_ANIMATION_COMPLETE",GuidesModelEvent.BEAUTY_FLY_ANIMATION_COMPLETE="GuideModelEvent.BEAUTY_FLY_ANIMATION_COMPLETE",GuidesModelEvent.NEXT_BOX_BUTTON_ANIMATION_COMPLETE="GuideModelEvent.NEXT_BOX_BUTTON_ANIMATION_COMPLETE",GuidesModelEvent.BOX_OPENED="GuideModelEvent.BOX_OPENED",GuidesModelEvent.VIRAL_RESOURCE_ACCEPTED="GuideModelEvent.VIRAL_RESOURCE_ACCEPTED",GuidesModelEvent.DRAG_BORDER_START="GuideModelEvent.DRAG_BORDER_START",GuidesModelEvent.DRAG_BORDER_STOP="GuideModelEvent.DRAG_BORDER_STOP",GuidesModelEvent.GLADE_DUEL_GLADE_SELECTED="GuideModelEvent.GLADE_DUEL_GLADE_SELECTED",GuidesModelEvent.WORKSHOP_REQUEST_WINDOW_SHOW="GuideModelEvent.WORKSHOP_REQUEST_WINDOW_SHOW",GuidesModelEvent.WORKSHOP_ITEM_REQUESTED="GuideModelEvent.WORKSHOP_ITEM_REQUESTED",GuidesModelEvent.COMPLETE="GuidesEvent.COMPLETE",GuidesModelEvent.ACTIVE_CHANGED="GuidesEvent.ACTIVE_CHANGED",GuidesModelEvent}(uipixi.BaseEvent);e.GuidesModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.PriceType||(e.PriceType={})).UNKNOWN="unknown",i.RESOURCE="resource",i.REAL="real",(r=e.PriceType||(e.PriceType={})).fromString=function fromString(t){switch(t.toLowerCase()){case"resource":return r.RESOURCE;case"real":return r.REAL}return n.Application.debug&&n.Application.debug.addWarning("PriceType.fromString","Unknown type: ",arguments),r.UNKNOWN}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.GestureEvent,r=function(e){function SimpleButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return a(SimpleButtonMediator,e),SimpleButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._button=t.displayObject,this.registerListener(this._button,i.POINTER_TAP,this.onButton.bind(this))},SimpleButtonMediator}(n.DisplayObjectMediator);e.SimpleButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RegisterSeasonLoaderPromise(t){var e=n.call(this)||this;return e.seasonLoader=t,e}return a(RegisterSeasonLoaderPromise,n),RegisterSeasonLoaderPromise}(n.BasePromise);e.RegisterSeasonLoaderPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Guard(t,e){this._viewHandle=t,this._mapData=e}return Object.defineProperty(Guard.prototype,"viewHandle",{get:function(){return this._viewHandle},enumerable:!0,configurable:!0}),Object.defineProperty(Guard.prototype,"mapData",{get:function(){return this._mapData},enumerable:!0,configurable:!0}),Guard}();e.Guard=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(654),n(317),n(318),n(655),n(113),n(656),n(657)],void 0===(r=function(t,e,i,s,l,r,n,c,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function WalletDynamicItem(t){var e=n.call(this,t)||this;return e._wallets={},e._keyGenerator=new i.WalletKeyGenerator,e}return a(WalletDynamicItem,n),WalletDynamicItem.prototype.canHold=function(t,e,n){var i=t.split(".");if(1===i.length){var r=void 0;if(n&&0!==n){if(!(r=this._wallets[n]))throw new Error("WalletDynamicItem.hold error: wallet not found!")}else r=new l.Wallet(i[0]);var o=void 0;if("number"==typeof e)o=this.canPutInWallet(e,r);else if("object"==typeof e){var a=[];this.transformObjectTo(a,e),r=new d.ComplexWallet(i[0]),o=this.canPutInWalletComplex(a,r)}return o}var s=this.getChildProvider(i[0]),c=s||null;return!!c&&(i.shift(),c.canHold(i.join("."),e,n))},WalletDynamicItem.prototype.hold=function(t,e,n){var i=t.split(".");if(1===i.length){var r=void 0;if(n&&0!==n){if(!(r=this._wallets[n]))throw new Error("WalletDynamicItem.hold error: wallet not found!")}else r=new l.Wallet(i[0]);var o=void 0;if("number"==typeof e)o=this.putInWallet(e,r);else if("object"==typeof e){var a=[];if(this.transformObjectTo(a,e),r=new d.ComplexWallet(i[0]),!(o=this.putInWalletComplex(a,r)).success)for(var s in o.transactions){var c=o.transactions[s];c&&c.success&&this.rollback(s,c.key)}}return o.success&&(this._wallets[n||o.key]=r,this.dispatchChange(),this.dispatchWalletsChangedEvent()),o}var u=this.getChildProvider(i[0]),p=u||null;return p?(i.shift(),p.hold(i.join("."),e,n)):this.createFailedTransaction()},WalletDynamicItem.prototype.insert=function(t,e,n){var i=t.split(".");if(1===i.length){var r=void 0;if(n&&0!==n){if(!(r=this._wallets[n]))throw new Error("WalletDynamicItem.hold error: wallet not found!")}else r=new l.Wallet(i[0]),n=this.generateNextWalletKey();return r.putIn(e),this._wallets[n]=r,this.dispatchWalletsChangedEvent(),new s.WalletTransaction(n,!0)}var o=this.getChildProvider(i[0]),a=o||null;return a?(i.shift(),a.insert(i.join("."),e,n)):this.createFailedTransaction()},WalletDynamicItem.prototype.release=function(t,e){var n=t.split(".");if(1===n.length){var i=this._wallets[e];if(!i)throw new Error("DynamicItem.confirm error: wallet not found!");if(i instanceof d.ComplexWallet)for(var r in i.wallets){var o=i.wallets[r];this.release(o.objectKey,parseInt(r))}delete this._wallets[e],this.dispatchWalletsChangedEvent()}else{var a=this.getChildProvider(n[0]),s=a||null;if(s)return n.shift(),s.release(n.join("."),e)}},WalletDynamicItem.prototype.rollback=function(t,e){var n=t.split(".");if(1===n.length){var i=this._wallets[e];if(!i)throw new Error("DynamicItem.rollback error: wallet not found!");i instanceof d.ComplexWallet?this.takeFromWalletComplex(i):this.takeFromWallet(i),delete this._wallets[e],this.dispatchChange(),this.dispatchWalletsChangedEvent()}else{var r=this.getChildProvider(n[0]),o=r||null;if(o)return n.shift(),o.rollback(n.join("."),e)}},WalletDynamicItem.prototype.watch=function(t){var e=t.split(".");if(1===e.length){var n=e[0],i=this._data.hasOwnProperty(n)?this._data[n]:0;for(var r in this._wallets)this._wallets[r].objectKey===n&&(i+=this._wallets[r].value);return i}var o=this.getChildProvider(e[0]),a=o||null;if(a)return e.shift(),a.watch(e.join("."))},WalletDynamicItem.prototype.watchWallet=function(t,e){var n=t.split(".");if(1===n.length)return this._wallets[e]?this._wallets[e].value:0;var i=this.getChildProvider(n[0]),r=i||null;return r?(n.shift(),r.watchWallet(n.join("."),e)):void 0},WalletDynamicItem.prototype.putInWalletComplex=function(t,e){if(!t||0===t.length)return new c.ComplexWalletTransaction(0,!1);for(var n,i=new c.ComplexWalletTransaction(this.generateNextWalletKey()),r=0,o=t;r<o.length;r++){var a=o[r];n=this.hold(a.path,a.value),i.add(a.path,n),e.put(n.key,a.path,a.value)}return i},WalletDynamicItem.prototype.canPutInWalletComplex=function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=t;n<i.length;n++){var r=i[n];if(!this.canHold(r.path,r.value))return!1}return!0},WalletDynamicItem.prototype.putInWallet=function(t,e){if(!this.getData(e.objectKey))return this.createFailedTransaction();var n=parseInt(this.getData(e.objectKey));return isNaN(n)?this.createFailedTransaction():t<=n?(this.setData(e.objectKey,n-t),e.putIn(t),new s.WalletTransaction(this.generateNextWalletKey(),!0)):new s.WalletTransaction(0,!1)},WalletDynamicItem.prototype.canPutInWallet=function(t,e){if(!this.getData(e.objectKey))return!1;var n=parseInt(this.getData(e.objectKey));return!isNaN(n)&&t<=n},WalletDynamicItem.prototype.getData=function(t){return 0<t.length?this._data[t]:this._data},WalletDynamicItem.prototype.setData=function(t,e){0<t.length?this._data[t]=e:this._data=e},WalletDynamicItem.prototype.takeFromWallet=function(t){if(0===t.objectKey.length){var e=this.getData(t.objectKey);return e||(e=0),void this.setData(t.objectKey,e+t.value)}this._data.hasOwnProperty(t.objectKey)?this._data[t.objectKey]+=t.value:this._data[t.objectKey]=t.value},WalletDynamicItem.prototype.takeFromWalletComplex=function(t){for(var e in t.wallets){var n=t.wallets[e];this.rollback(n.objectKey,parseInt(e))}},WalletDynamicItem.prototype.generateNextWalletKey=function(){return this._keyGenerator.nextKey},WalletDynamicItem.prototype.transformObjectTo=function(t,e,n){for(var i in void 0===n&&(n=null),e){var r=n&&0<n.length?n+"."+i:i,o=e[i];"number"==typeof o?t.push({path:r,value:o}):"object"==typeof o&&this.transformObjectTo(t,o,r)}},WalletDynamicItem.prototype.createFailedTransaction=function(){return new s.WalletTransaction(0,!1)},WalletDynamicItem.prototype.dispatchWalletsChangedEvent=function(){this.dispatchEvent(new r.WalletEvent(r.WalletEvent.WALLETS_CHANGED))},WalletDynamicItem}(n.WatchedDynamicItem);e.WalletDynamicItem=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function CalculatedAwardItem(t,e,n){this.type=t,this._value=e,this.itemId=n||null}return Object.defineProperty(CalculatedAwardItem.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),CalculatedAwardItem.prototype.clone=function(){return new CalculatedAwardItem(this.type,this.value,this.itemId)},CalculatedAwardItem.prototype.equalsLike=function(t){return this.equalsBy(t.type,t.itemId)},CalculatedAwardItem.prototype.equalsBy=function(t,e){return this.type===t&&this.itemId===e},CalculatedAwardItem}();e.CalculatedAwardItem=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ExtraItemShopsModelEvent(t,e){return n.call(this,t,e)||this}return o(ExtraItemShopsModelEvent,n),ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED="ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED",ExtraItemShopsModelEvent.ON_EXTRA_ITEM_CATEGORY_SELECTED="ExtraItemShopsModelEvent.ON_EXTRA_ITEM_CATEGORY_SELECTED",ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED="ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED",ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED="ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED",ExtraItemShopsModelEvent.BOUGHT="ExtraItemShopsModelEvent.BOUGHT",ExtraItemShopsModelEvent}(uipixi.BaseEvent);e.ExtraItemShopsModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ServerErrorCode||(e.ServerErrorCode={}))[n.UNKNOWN=0]="UNKNOWN",n[n.SERVER_IS_DISABLED=90]="SERVER_IS_DISABLED",n[n.CODE_SESSION_IS_EXPIRED=100]="CODE_SESSION_IS_EXPIRED",n[n.GAME_ACCESS_DENIED=101]="GAME_ACCESS_DENIED",n[n.CODE_APP_VERSIONS_IS_NOT_EQUAL=102]="CODE_APP_VERSIONS_IS_NOT_EQUAL",n[n.FRIEND_IS_NOT_AVAILABLE=116]="FRIEND_IS_NOT_AVAILABLE",n[n.PAYMENT_NOT_FOUND=260]="PAYMENT_NOT_FOUND",n[n.BEAUTY_IS_NOT_ENOUGH=360]="BEAUTY_IS_NOT_ENOUGH",n[n.CODE_CANT_START_PROMO=410]="CODE_CANT_START_PROMO",n[n.PROMO_BUY_REQUIREMENT=414]="PROMO_BUY_REQUIREMENT",n[n.CODE_COLLECTIONS_SLOT_IS_EMPTY=445]="CODE_COLLECTIONS_SLOT_IS_EMPTY",n[n.CODE_COLLECTIONS_ALLREADY_GEVED=448]="CODE_COLLECTIONS_ALLREADY_GEVED",n[n.CODE_SLOT_IS_NOT_IN_WAIT_MODE=450]="CODE_SLOT_IS_NOT_IN_WAIT_MODE",n[n.CODE_MAIL_EMPTY_AWARD=569]="CODE_MAIL_EMPTY_AWARD",n[n.CODE_CHEST_ALREADY_OPENED=588]="CODE_CHEST_ALREADY_OPENED",n[n.CODE_FRIENDS_NO_ENERGY=500]="CODE_FRIENDS_NO_ENERGY",n[n.CODE_FRIENDS_NO_MYSQL=501]="CODE_FRIENDS_NO_MYSQL",n[n.CODE_GIFT_ALPREADY_PRESENTED=841]="CODE_GIFT_ALPREADY_PRESENTED",n[n.CODE_GIFT_ABSETNS=842]="CODE_GIFT_ABSETNS",n[n.CODE_FRIEND_TOO_GREEDY=844]="CODE_FRIEND_TOO_GREEDY",n[n.EVENT_CANNOT_SEND=886]="EVENT_CANNOT_SEND",n[n.EVENT_SLOT_ALREADY_OPEN=923]="EVENT_SLOT_ALREADY_OPEN",n[n.EVENT_GAME_LOCKED=921]="EVENT_GAME_LOCKED",n[n.EVENT_GAME_TOKEN_INVALID=922]="EVENT_GAME_TOKEN_INVALID",n[n.EVENT_NEW_YEAR_CANNOT_AVAILABLE=840]="EVENT_NEW_YEAR_CANNOT_AVAILABLE",n[n.EVENT_NEW_YEAR_NO_PLACE=843]="EVENT_NEW_YEAR_NO_PLACE",n[n.EVENT_RATING_NOT_READY=849]="EVENT_RATING_NOT_READY"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(653)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function DisplayObjectMediator(t){this._cancellationToken=new n.CancellationToken,this._eventMapConfigs=[],this._mapData=t}return DisplayObjectMediator.prototype.initialize=function(t){this._viewHandle=t,this._showData=this._viewHandle.viewContext.showData,this._displayObject=t.displayObject},Object.defineProperty(DisplayObjectMediator.prototype,"viewHandle",{get:function(){return this._viewHandle},enumerable:!0,configurable:!0}),Object.defineProperty(DisplayObjectMediator.prototype,"window",{get:function(){return this.windowHandle.displayObject},enumerable:!0,configurable:!0}),Object.defineProperty(DisplayObjectMediator.prototype,"windowHandle",{get:function(){return this.viewHandle.viewContext.node.root.handle},enumerable:!0,configurable:!0}),DisplayObjectMediator.prototype.registerListener=function(t,e,n){t.hasListener(e,n)||(this._eventMapConfigs.push({dispatcher:t,type:e,listener:n}),t.addEventListener(e,n))},DisplayObjectMediator.prototype.unregisterListener=function(t,e,n){for(var i=0;i<this._eventMapConfigs.length;i++)if(r.equal(this._eventMapConfigs[i],t,e,n))return t.removeEventListener(e,n),void this._eventMapConfigs.splice(i,1)},DisplayObjectMediator.prototype.unregisterListeners=function(){for(var t;t=this._eventMapConfigs.pop();)t.dispatcher.removeEventListener(t.type,t.listener)},DisplayObjectMediator.prototype.destroy=function(){this.unregisterListeners(),this._cancellationToken.request(),this._viewHandle=null},DisplayObjectMediator}();e.DisplayObjectMediator=i,(r=e.IEventMapConfig||(e.IEventMapConfig={})).equal=function equal(t,e,n,i){return t.dispatcher===e&&t.type===n&&t.listener.original===i.original&&t.listener.calleeInstance===i.calleeInstance}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function StringUtils(){}return StringUtils.formatNumber=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=","),void 0===i&&(i=0);var r=t.toFixed(i).replace(/\d(?=(\d{3})+(\.|$))/g,"$&"+n);return e&&(0<t?r="+"+r:t<0&&(r="-"+r)),r},StringUtils.cropStringIfNeedeed=function(t,e,n){void 0===n&&(n="");var i=n||"";return e&&t.length>e?StringUtils.cropString(t,e-i.length,i):t},StringUtils.cropString=function(t,e,n){return void 0===n&&(n=""),t.slice(0,e)+n},StringUtils.format=function(t,e){for(var n in e)t=t.replace(new RegExp("\\{"+n+"\\}","g"),e[n]);return t},StringUtils.DEFAULT_CROP_SUFFIX="..",StringUtils}();e.StringUtils=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,wt=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(0),n(41),n(2),n(1742),n(1743),n(22),n(264),n(1744),n(1745),n(1746),n(1747),n(1748),n(1749),n(511),n(266),n(1750),n(512),n(31),n(1752),n(1753),n(1754),n(513),n(1755),n(1757),n(515),n(1759),n(1760),n(1761),n(1762),n(516),n(1763),n(1765),n(1766),n(1767),n(169),n(509),n(1768),n(1770),n(1771),n(448),n(1772),n(122),n(90),n(1773),n(1774),n(1775),n(1776),n(1777),n(1778),n(216),n(197),n(196),n(19),n(198),n(70),n(215),n(1779),n(517),n(1780),n(1782),n(514),n(1783),n(1784),n(1785),n(1786),n(519),n(1787)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U,W,F,V,H,Y,Q,q,z,K,X,J,Z,$,tt,et,nt,it,rt,ot,at,st,ct,ut,pt,lt,dt,ht,_t,ft,yt,mt){"use strict";var vt,bt;Object.defineProperty(e,"__esModule",{value:!0}),(bt=vt=e.EventNewYearResource||(e.EventNewYearResource={})).GIFT_1="eventNewYearBox1",bt.GIFT_2="eventNewYearBox2",bt.GIFT_3="eventNewYearBox3",bt.STAR="eventNewYearStar";var gt=function(t){function EventNewYearModule(){return null!==t&&t.apply(this,arguments)||this}return wt(EventNewYearModule,t),EventNewYearModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this))},EventNewYearModule.prototype.onPreloadModule=function(t){o.Application.model.eventNewYear=new a.EventNewYearModel(o.Application.dynamic.user.events.newYear,o.Application.static.data.events.newYear),o.Application.model.eventNewYear.addEventListener(q.EventNewYearEvent.PHASE_FINISH,this.onPhaseFinish.bind(this)),o.Application.operation.addAllowingRule(new O.OccurrenceBeginningLineRule("/events")),p.CommandMap.map(l.EventNewYearShowWindowPromise,d.EventNewYearShowWindowCommand),p.CommandMap.map(b.EventNewYearWindowSendGiftPromise,g.EventNewYearWindowSendGiftCommand),p.CommandMap.map(I.EventNewYearAchievementStageUpPromise,D.EventNewYearAchievementStageUpCommand),p.CommandMap.map(A.EventNewYearWindowGetGiftPromise,M.EventNewYearWindowGetGiftCommand),p.CommandMap.map(lt.EventNewYearWindowOpenGiftPromise,dt.EventNewYearWindowOpenGiftCommand),p.CommandMap.map(R.EventNewYearGetRatingPromise,N.EventNewYearGetRatingCommand),p.CommandMap.map(U.EventNewYearInitPromise,W.EventNewYearInitCommand),p.CommandMap.map(H.EventNewYearCheckNewPromise,Y.EventNewYearCheckNewCommand),p.CommandMap.map(ct.EventNewYearGetRatingAwardPromise,ut.EventNewYearGetRatingAwardCommand),p.CommandMap.map(yt.EventNewYearWindowSpendStarsPromise,mt.EventNewYearWindowSpendStarsCommand),this.mapMediators()},EventNewYearModule.prototype.mapMediators=function(){o.Application.view.mapMediator(""+s.GUINames.EVENT_NEW_YEAR_WINDOW,G.EventNewYearWindowMediator),o.Application.view.mapMediator(s.GUINames.HUD+".leftSideBar.sideBarContainer",c.EventNewYearIconContainerMediator),o.Application.view.mapMediator(s.GUINames.HUD+".leftSideBar.sideBarContainer."+s.GUINames.EVENT_NEW_YEAR_ICON,u.EventNewYearIconMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.slots",_t.EventNewYearContainerStatePhaseMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.bgContainer",_t.EventNewYearContainerStatePhaseMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.slots.eventNewYearGiftSlot1",_.EventNewYearWindowGiftSlotMediator,{resourceId:vt.GIFT_1}),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.slots.eventNewYearGiftSlot2",_.EventNewYearWindowGiftSlotMediator,{resourceId:vt.GIFT_2}),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.slots.eventNewYearGiftSlot3",_.EventNewYearWindowGiftSlotMediator,{resourceId:vt.GIFT_3}),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.slots.eventNewYearStarSlot",ft.EventNewYearWindowStarSlotMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.mailTab.leftContainer",m.EventNewYearWindowClocksMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.mailTab",S.EventNewYearWindowMailTabMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.mailTab.limitCounter",P.EventNewYearWindowMailLimitMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.mailTab.rightContainer.mailContainer.*.*.mailList.*",E.EventNewYearWindowMailListItemMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.mailTab.leftContainer",T.EventNewYearWindowMailReceivedMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".timerContainer",j.EventNewYearWindowTimerMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.helpButton",x.EventNewYearWindowHelpMediator),this.mapSpruceMediator(),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_LIMIT_WINDOW,B.EventNewYearLimitWindowMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_OPEN_GIFT_WINDOW,ht.EventNewYearOpenGiftWindowMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_GIFTS_WINDOW,F.EventNewYearGiftsWindowMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_GIFTS_WINDOW+".itemsList.*",V.EventNewYearGiftsWindowItemMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_SELECT_FRIEND_WINDOW,v.EventNewYearSelectFriendWindowMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_SELECT_FRIEND_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",w.EventNewYearSelectFriendItemMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_SELECT_FRIEND_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",Q.AlphaOptimizationListItemMediator),this.mapRatingMediator(),this.mapAchievementsMediators(),this.mapUseEnergyMediators()},EventNewYearModule.prototype.mapSpruceMediator=function(){var t="winterSpruce",e=new ot.ExtraItemsModel(o.Application.static.data.extraItems,new et.ExtraItemsCollection(nt.ExtraItemDynamicItem,{}),new it.ItemCollection(rt.ActiveExtraItemDynamicItem,{spruceGarland:63,spruceStar:78})),n=new at.FriendObjectModel(t,o.Application.static.data.objects.object.getItem(t),8,o.Application.static.data.client.skins.skin.getItem(t));o.Application.objects.mapObjectViewMediators(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.mailTab.leftContainer.spruceContainer.winterSpruce",n,e)},EventNewYearModule.prototype.mapUseEnergyMediators=function(){this.mapUseEnergyBarMediators(s.GUINames.HUD,"glade"),o.Application.view.mapMediator(s.GUINames.HUD+"."+s.GUINames.EVENT_NEW_YEAR_EXP_BAR,$.EventNewYearUseEnergyLevelUpGladeAnimationMediator,null,[tt.IsWebGuard]),this.mapUseEnergyBarMediators(s.GUINames.USE_ENERGY_WINDOW,"window"),o.Application.view.mapMediator(s.GUINames.USE_ENERGY_WINDOW+"."+s.GUINames.EVENT_NEW_YEAR_EXP_BAR,Z.EventNewYearUseEnergyLevelUpAnimationMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_EXP_BAR_TOOLTIP,J.EventNewYearUseEnergyBarTooltipMediator,o.Application.model.eventNewYear.useEnergy)},EventNewYearModule.prototype.mapUseEnergyBarMediators=function(t,e){o.Application.view.mapMediator(""+t,z.EventNewYearUseEnergyHUDMediator,{type:e}),o.Application.view.mapMediator(t+"."+s.GUINames.EVENT_NEW_YEAR_EXP_BAR,K.EventNewYearUseEnergyBarMediator),o.Application.view.mapMediator(t+"."+s.GUINames.EVENT_NEW_YEAR_EXP_BAR+".awardsList.*",X.EventNewYearUseEnergyBarAwardItemMediator)},EventNewYearModule.prototype.mapRatingMediator=function(){o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.ratingTab.leftWrap",st.EventNewYearRatingTabMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.ratingTab.leftWrap.leftBlockExtra",pt.EventNewYearRatingLeftExtraMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.ratingTab.leftWrap.leftBlockGeneral",h.EventNewYearRatingLeftGeneralMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.ratingTab.rightBlock",L.EventNewYearRatingRatingsBlockMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.ratingTab.rightBlock.usersContainer.usersScrollContainer.listWrapper.usersList.*",k.EventNewYearRatingRatingItemMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.ratingTab.rightBlock.usersContainer.usersScrollContainer.listWrapper.usersList.*",Q.AlphaOptimizationListItemMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.ratingTab.rightBlock.selfRatingPositionContainer",k.EventNewYearRatingRatingItemMediator)},EventNewYearModule.prototype.mapAchievementsMediators=function(){o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab",f.EventNewYearAchievementsWindowMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.awardInfoContainer",C.EventNewYearAchievementAwardInfoMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.progressContainer.awardContainer1.*",y.EventNewYearAchievementsWindowProgressAwardMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.progressContainer.awardContainer2.*",y.EventNewYearAchievementsWindowProgressAwardMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.progressContainer.awardContainer3.*",y.EventNewYearAchievementsWindowProgressAwardMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.progressContainer.awardContainer4.*",y.EventNewYearAchievementsWindowProgressAwardMediator),o.Application.view.mapMediator(s.GUINames.EVENT_NEW_YEAR_WINDOW+".containerGroup.giftsTab.progressContainer.awardContainer5.*",y.EventNewYearAchievementsWindowProgressAwardMediator)},EventNewYearModule.prototype.onPhaseFinish=function(){o.Application.view.hideByWindowName(s.GUINames.EVENT_NEW_YEAR_WINDOW),o.Application.view.hideByWindowName(s.GUINames.EVENT_NEW_YEAR_GIFTS_WINDOW),o.Application.view.hideByWindowName(s.GUINames.EVENT_NEW_YEAR_OPEN_GIFT_WINDOW),o.Application.view.hideByWindowName(s.GUINames.EVENT_NEW_YEAR_SELECT_FRIEND_WINDOW),o.Application.view.hideByWindowName(s.GUINames.EVENT_NEW_YEAR_LIMIT_WINDOW)},EventNewYearModule.INBOX_ID=2,EventNewYearModule}(n.Module);e.EventNewYearModule=gt}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Resource(t){this._descriptor=t,this._loaded=!1}return Object.defineProperty(Resource.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0}),Object.defineProperty(Resource.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Resource.prototype.setRawData=function(t){this._rawData=t,this._loaded=!0},Resource.prototype.getRawData=function(){return this._rawData},Object.defineProperty(Resource.prototype,"loadingFailed",{get:function(){return this._loadingFailed},enumerable:!0,configurable:!0}),Resource.prototype.onLoadingFail=function(){this._loadingFailed=!0},Resource}();e.Resource=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(177)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ServerError(){this.sendLog=!0,this._propagationIsStopped=!1,this.level=n.ServerErrorLevel.UNKNOWN}return Object.defineProperty(ServerError.prototype,"propagationIsStopped",{get:function(){return this._propagationIsStopped},enumerable:!0,configurable:!0}),ServerError.prototype.stopPropagation=function(t){this._propagationIsStopped=!0,void 0!==t&&(this.sendLog=t)},ServerError}();e.ServerError=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(34)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function SimplePopupAnimationMediator(){return null!==n&&n.apply(this,arguments)||this}return a(SimplePopupAnimationMediator,n),SimplePopupAnimationMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.viewHandle.onShown.capture();var e=this._mapData?this.child(this._mapData.displayObjectName):this._container;this._animation=i.Application.animation.animate(e,"popupShowAnimation"),this.registerListener(this._animation,r.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this))},SimplePopupAnimationMediator.prototype.onAnimationComplete=function(){this.viewHandle.onShown.complete()},SimplePopupAnimationMediator.prototype.destroy=function(){this._animation.stop(),n.prototype.destroy.call(this)},SimplePopupAnimationMediator}(n.DisplayObjectContainerMediator);e.SimplePopupAnimationMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function StartQuestBasePromise(t,e){var n=i.call(this)||this;return n.questLineData=t,n.questTaskData=e,n}return a(StartQuestBasePromise,i),StartQuestBasePromise}(n.BasePromise);e.StartQuestBasePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(4),n(443)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function StartQuestBaseCheckCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestBaseCheckCommand,t),StartQuestBaseCheckCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){return c(this,function(t){return[2]})})},StartQuestBaseCheckCommand.prototype.setProgressComplete=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.ElkaCore.instance.promiseManager.ask(new r.QuestSetProgressPromise(e.questLineData.id,e.questTaskData.id,1))];case 1:return t.sent(),[2]}})})},StartQuestBaseCheckCommand}(n.CommandBase);e.StartQuestBaseCheckCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(14),n(161),n(222),n(100)],void 0===(r=function(t,e,i,r,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,c,u=uipixi.BaseEventTarget;(c=s=e.DecorShopItemState||(e.DecorShopItemState={}))[c.LOCK=1]="LOCK",c[c.WORKSHOP_COLLECT=2]="WORKSHOP_COLLECT",c[c.WORKSHOP_LOCK=3]="WORKSHOP_LOCK",c[c.BUY=4]="BUY",c[c.BUY_FRIEND=5]="BUY_FRIEND",c[c.PLACE=6]="PLACE",c[c.PLACED=7]="PLACED",c[c.TAKE=8]="TAKE",c[c.COLLECT=9]="COLLECT";var p=function(e){function DecorShopItemModel(){var t=null!==e&&e.apply(this,arguments)||this;return t._count=0,t}return l(DecorShopItemModel,e),DecorShopItemModel.prototype.parseOfferData=function(){this._calculatedAward=i.Application.award.calculate(this._promoOfferStaticData.awards),this._awardToyItem=this._calculatedAward.getByType(r.AwardType.TOY),this._toyId=this._awardToyItem.itemId,this._title=this._promoOfferStaticData.title;for(var t=0,e=this._promoOfferStaticData.buyRequirements.requirement;t<e.length;t++){var n=e[t];0===n.data.indexOf("{user.objects")&&(this._lockText=i.Application.localization.localize(this._promoOfferStaticData.buyRequirements.view.textKey,{stage:n.minValue}))}},DecorShopItemModel.prototype.init=function(){this._toyModel=i.Application.model.toys.get(this._toyId),this._toyModel.addEventListener(o.ToyModelEvent.COUNT_CHANGED,this.updateState.bind(this)),this._screenToysModel=i.Application.model.screensToys.getScreen(i.Application.dynamic.user.screen),this._screenToysModel.addEventListener(a.ScreenToysModelEvent.REMOVE_ALL,this.updateState.bind(this)),this._screenToysModel.addEventListener(a.ScreenToysModelEvent.TOY_REMOVED,this.updateState.bind(this)),this._screenToysModel.addEventListener(a.ScreenToysModelEvent.TOY_ADDED,this.updateState.bind(this)),this.promoOfferStaticData&&!i.Application.requirements.check(this.promoOfferStaticData.buyRequirements)&&(this._waitRequirements=this.promoOfferStaticData.buyRequirements,i.Application.requirements.wait(this._waitRequirements,this.onBuyRequirementsDone.bind(this))),this.updateState()},DecorShopItemModel.prototype.onBuyRequirementsDone=function(){i.Application.requirements.unwait(this._waitRequirements,this.onBuyRequirementsDone.bind(this)),this._waitRequirements=null,this.updateState()},Object.defineProperty(DecorShopItemModel.prototype,"toyModel",{get:function(){return this._toyModel},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"toyId",{get:function(){return this._toyId},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"promoOfferStaticData",{get:function(){return this._promoOfferStaticData},enumerable:!0,configurable:!0}),DecorShopItemModel.prototype.updateMarkers=function(){this._markerAttention=!1,this._markerDone=!1,0<this._toyModel.static.beauty&&this._state===s.PLACE?(this._markerAttention=!0,this._markerDone=!1):this._state===s.COLLECT?(this._markerAttention=!0,this._markerDone=!1):0<this._toyModel.static.beauty&&this._state===s.BUY&&i.Application.price.canSpend(this._promoOfferStaticData.prices)?(this._markerAttention=!0,this._markerDone=!1):this._state===s.TAKE&&(this._markerAttention=!1,this._markerDone=!0),this.dispatchEvent(new n.DecorShopItemModelEvent(n.DecorShopItemModelEvent.STATE_CHANGED))},DecorShopItemModel.prototype.updateState=function(){var t=this._screenToysModel.getToysCount(this._toyId);this._count=this._toyModel.count-t,this.dispatchEvent(new n.DecorShopItemModelEvent(n.DecorShopItemModelEvent.COUNT_CHANGED))},DecorShopItemModel.prototype.setStateForced=function(t){this._state=t,this.updateMarkers()},DecorShopItemModel.prototype.setState=function(t){this._state!==t&&(this._state=t,this.updateMarkers())},Object.defineProperty(DecorShopItemModel.prototype,"friendSUserId",{get:function(){return this._friendSUserId},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"calculatedAward",{get:function(){return this._calculatedAward},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"lockText",{get:function(){return this._lockText},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"awardToyItem",{get:function(){return this._awardToyItem},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"markerAttention",{get:function(){return this._markerAttention},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemModel.prototype,"markerDone",{get:function(){return this._markerDone},enumerable:!0,configurable:!0}),DecorShopItemModel.prototype.destroy=function(){this._waitRequirements&&i.Application.requirements.unwait(this._waitRequirements,this.onBuyRequirementsDone.bind(this)),this._toyModel.removeEventListener(o.ToyModelEvent.COUNT_CHANGED,this.updateState.bind(this)),this._screenToysModel.removeEventListener(a.ScreenToysModelEvent.REMOVE_ALL,this.updateState.bind(this)),this._screenToysModel.removeEventListener(a.ScreenToysModelEvent.TOY_REMOVED,this.updateState.bind(this)),this._screenToysModel.removeEventListener(a.ScreenToysModelEvent.TOY_ADDED,this.updateState.bind(this))},DecorShopItemModel}(u);e.DecorShopItemModel=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ResourceType||(e.ResourceType={}))[n.UNDEFINED=0]="UNDEFINED",n[n.XML=1]="XML",n[n.TEXT=2]="TEXT",n[n.IMAGE=3]="IMAGE",n[n.JAVASCRIPT=4]="JAVASCRIPT",n[n.SOUND=5]="SOUND",n[n.FONT=6]="FONT",n[n.SPINE=7]="SPINE",n[n.SPRITESHEET=8]="SPRITESHEET",n[n.CURSOR=9]="CURSOR",n[n.BITMAPFONT=10]="BITMAPFONT",n[n.DMG=11]="DMG"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(34)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function Process(t){void 0===t&&(t=0);var e=n.call(this)||this;return e._delay=0,e._running=!1,e._processID=-1,e._timerId=-1,t&&(e._delay=t),e}return a(Process,n),Process.prototype.toString=function(){return this.constructor+" running: "+this._running+" id: "+this._processID},Process.prototype.start=function(){this._running||(this._running=!0,0!==this._delay?this._timerId=setTimeout(this.onTimer.bind(this),this._delay):this.startHandler())},Process.prototype.stop=function(t){this._running&&(this._running=!1,-1!==this._timerId?clearTimeout(this._timerId):this.stopHandler(),t&&this.dispatchEvent(new i.ProcessEvent(i.ProcessEvent.COMPLETE,this)))},Process.prototype.reset=function(){this.stop(),this.resetHandler()},Object.defineProperty(Process.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),Process.prototype.initialize=function(){},Process.prototype.startHandler=function(){},Process.prototype.stopHandler=function(){},Process.prototype.resetHandler=function(){},Process.prototype.onTimer=function(){this._timerId=-1,this.startHandler()},Process.prototype.complete=function(t){this._running&&(this._running=!1,this.dispatchEvent(new i.ProcessEvent(i.ProcessEvent.COMPLETE,this)))},Process}(uipixi.BaseEventTarget);e.Process=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ConfirmType||(e.ConfirmType={})).Text="text",n.Beauty="beauty",n.Buy="buy"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ObjectState||(e.ObjectState={})).LOCK="lock",n.NORMAL="normal",n.REQUEST="request",n.READY="ready",n.MAX_STAGE="maxStage"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(845),n(77)],void 0===(r=function(t,e,l,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d,n,i=uipixi.BaseEventTarget;(n=d=e.ExtraItemsModelMode||(e.ExtraItemsModelMode={}))[n.NORMAL=0]="NORMAL",n[n.PREVIEW=1]="PREVIEW";var r=function(p){function ExtraItemsModel(t,e,n){var i=p.call(this)||this;i._mode=d.NORMAL,i._staticData=t,i._extraItemsDynamic=e,i._activeExtraItems=n,i._extraItemsByType=new core.Map,i._extraItems=[];for(var r=0,o=i._staticData.extraItem.items;r<o.length;r++){var a=o[r],s=i.itemIsActive(a.id,a.type),c=i.hasItem(a.id),u=new l.ExtraItemModel(a,s,c);i._extraItems.push(u),i._extraItemsByType.has(a.type)||i._extraItemsByType.set(a.type,[]),i._extraItemsByType.get(a.type).push(u)}return i}return a(ExtraItemsModel,p),ExtraItemsModel.prototype.getTypes=function(){var n=[];return this._extraItemsByType.forEach(function(t,e){return n.push(e)}),n},ExtraItemsModel.prototype.getItem=function(t){for(var e=0,n=this._extraItems;e<n.length;e++){var i=n[e];if(i.id===t)return i}},ExtraItemsModel.prototype.getActiveItemByType=function(t){for(var e=0,n=this.getItemsByType(t);e<n.length;e++){var i=n[e];if(i.isActive())return i}return null},ExtraItemsModel.prototype.getItemsByType=function(t){return this._extraItemsByType.get(t)},ExtraItemsModel.prototype.itemIsActive=function(t,e){e||(e=this.getItemType(t));var n=this._activeExtraItems.getItem(e);return n&&n.extraItemId===t},ExtraItemsModel.prototype.hasItem=function(t){for(var e=0,n=this._extraItemsDynamic.items;e<n.length;e++){if(n[e].extraItemId===t)return!0}return!1},ExtraItemsModel.prototype.getItemType=function(t){for(var e=0,n=this._staticData.extraItem.items;e<n.length;e++){var i=n[e];if(i.id===t)return i.type}return null},ExtraItemsModel.prototype.updateActive=function(t,e){if(e)for(var n=this.getItemType(t),i=0,r=this.getItemsByType(n);i<r.length;i++){r[i].updateActive(!1)}this.getItem(t).updateActive(e),this.dispatchEvent(new o.ExtraItemModelEvent(o.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE))},ExtraItemsModel.prototype.updateOwn=function(t,e){this.getItem(t).updateOwn(e)},ExtraItemsModel.prototype.setPreviewItem=function(t){this._previewItem=t;for(var e=0,n=this._extraItems;e<n.length;e++){n[e].setPreviewItem(t)}this._mode===d.PREVIEW&&this.dispatchEvent(new o.ExtraItemModelEvent(o.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE))},Object.defineProperty(ExtraItemsModel.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t;for(var e=0,n=this._extraItems;e<n.length;e++){n[e].mode=t}this._mode===d.NORMAL&&(this._previewItem=null,this.dispatchEvent(new o.ExtraItemModelEvent(o.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE)))},enumerable:!0,configurable:!0}),ExtraItemsModel}(i);e.ExtraItemsModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Command(t,e){this.title="",this.params={},this._folder=null,this._folder=t.addFolder(e)}return Object.defineProperty(Command.prototype,"folder",{get:function(){return this._folder},enumerable:!0,configurable:!0}),Command.prototype.addToMenu=function(t){},Command}();e.Command=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.RouletteId||(e.RouletteId={})).COMMON="1",n.GOLD="2"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function GladeDuelModelEvent(t,e){return n.call(this,t,e)||this}return o(GladeDuelModelEvent,n),Object.defineProperty(GladeDuelModelEvent.prototype,"roundModel",{get:function(){return this.data},enumerable:!0,configurable:!0}),GladeDuelModelEvent.ROUND_COMPLETE="GladeDuelModelEvent.ROUND_COMPLETE",GladeDuelModelEvent.AWARD_COUNT_CHANGED="GladeDuelModelEvent.AWARD_COUNT_CHANGED",GladeDuelModelEvent.GAME_READY="GladeDuelModelEvent.READY",GladeDuelModelEvent.SPEED_UP="GladeDuelModelEvent.SPEED_UP",GladeDuelModelEvent.NEXT_ROUND_READY="GladeDuelModelEvent.ROUND_READY",GladeDuelModelEvent.GAME_FINISHED="GladeDuelModelEvent.GAME_FINISHED",GladeDuelModelEvent.VOTE_ANIMATION_COMPLETED="GladeDuelModelEvent.ANIMATION_COMPLETED",GladeDuelModelEvent.ROUND_STARTED="GladeDuelModelEvent.ROUND_STARTED",GladeDuelModelEvent}(uipixi.BaseEvent);e.GladeDuelModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function PromoModelEvent(t,e){return n.call(this,t,e)||this}return o(PromoModelEvent,n),Object.defineProperty(PromoModelEvent.prototype,"model",{get:function(){return this.data},enumerable:!0,configurable:!0}),PromoModelEvent.ACTIVATED="PromosModelEvent.activated",PromoModelEvent.DEACTIVATED="PromosModelEvent.deactivated",PromoModelEvent}(uipixi.BaseEvent);e.PromoModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,O=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),S=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},P=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(17),n(308),n(628),n(629),n(630),n(631),n(632),n(633),n(634),n(635),n(636),n(310),n(637),n(638),n(46)],void 0===(r=function(t,e,n,c,l,d,i,r,o,a,h,_,s,f,u,p,y,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var v=uipixi.UIContainer,b=uipixi.UIFactory,g=function(e){function AnimationService(){var t=null!==e&&e.apply(this,arguments)||this;return t._id2ProcessObject=new core.Map,t._idToContainer=new core.Map,t._name2Builder={addChild:t.createAdd.bind(t),removeChild:t.createRemove.bind(t),tween:t.createTween.bind(t),set:t.createSet.bind(t),animate:t.createAnimate.bind(t),parallel:t.createParallel.bind(t),serial:t.createSerial.bind(t),wait:t.createWait.bind(t),call:t.createCall.bind(t),sound:t.createPlaySound.bind(t),spine:t.createPlaySpine.bind(t),"init.serial":t.createSerial.bind(t),"start.serial":t.createSerial.bind(t),"start.parallel":t.createParallel.bind(t),"skip.serial":t.createSerial.bind(t),"stop.serial":t.createSerial.bind(t)},t}return O(AnimationService,e),AnimationService.prototype.initialize=function(s){return S(this,void 0,void 0,function(){var e,n,i,r,o,a=this;return P(this,function(t){switch(t.label){case 0:return this._config=s,[4,c.Services.resources.getResources(this._config.dependencies.resources)];case 1:for(e=t.sent(),this._animationXML=e.getResource(this._config.dependencies.resources[0]).xmlDocument,n=this._animationXML.children[0].children,i=0;i<n.length;i++)r=n[i],o=r.getAttribute("id"),this._id2ProcessObject.set(o,this.convertElementToObject(r));return this._id2ProcessObject.forEach(function(t){a.replaceLinks(t),a.setupVars(t)}),[2]}})})},AnimationService.prototype.addAnimationContainer=function(t,e){this._idToContainer.set(t,e)},AnimationService.prototype.getLayer=function(t){return this._idToContainer.get(t)},AnimationService.prototype.create=function(t,e){var n=this._id2ProcessObject.get(t);if(!n)throw new Error("There is no process configuration with id "+t);return this._name2Builder[n.type](n,e)},AnimationService.prototype.animate=function(t,e,n,i){var r;void 0===i&&(i=u.AnimationLayer.ANIMATION_LAYER),r="string"==typeof t?b.instance.createUIElementByName(t):t,n||(n={}),n.target=r,n.container=i instanceof v?i:this._idToContainer.get(i);var o=this.create(e,n);return o&&o.start(),o},AnimationService.prototype.createAnimate=function(t,e){for(var n=this.resolveTime(t,e,"delay"),i=new core.Map,r=0;r<t.children.length;r++){var o=t.children[r],a=this._name2Builder[o.type](o,e[o.id]||e);i.set(o.type,a)}if(this.resolveBoolean(t,e,"floatPosition")){var s=[];for(var c in e){var u=e[c];u&&"object"==typeof u&&u.floorPosition&&(u.floorPosition=!1,s.push(new h.SetProperties(u,{floorPosition:!0})))}if(0<s.length){var p=i.get("stop.serial");i.set("stop.serial",new d.SerialProcess([p,new l.ParallelProcess(s)]))}}return 0<i.size?new y.Animate(i.get("init.serial"),i.get("start.serial")||i.get("start.parallel"),i.get("skip.serial"),i.get("stop.serial"),n):null},AnimationService.prototype.createParallel=function(t,e){for(var n=this.resolveTime(t,e,"delay"),i=[],r=0;r<t.children.length;r++){var o=t.children[r],a=this._name2Builder[o.type](o,e[o.id]||e);a&&i.push(a)}return 0<i.length?new l.ParallelProcess(i,n):null},AnimationService.prototype.createSerial=function(t,e){for(var n=this.resolveTime(t,e,"delay"),i=[],r=0;r<t.children.length;r++){var o=t.children[r],a=this._name2Builder[o.type](o,e[o.id]||e);a&&i.push(a)}return 0<i.length?new d.SerialProcess(i,n):null},AnimationService.prototype.createPlaySpine=function(t,e){var n=this.getTarget(e,t);if(!n)return null;var i=this.resolveTime(t,e,"delay"),r=this.resolveString(t,e,"animation"),o=this.resolveBoolean(t,e,"loop");return new p.PlaySpine(n,r,o,i)},AnimationService.prototype.createWait=function(t,e){var n=this.resolveTime(t,e,"delay");return new i.Wait(n)},AnimationService.prototype.createCall=function(t,e){var n=this.resolveTime(t,e,"delay"),i=e[t.vars.handler];return new r.Call(i,null,n)},AnimationService.prototype.createAdd=function(t,e){var n=this.getTarget(e,t);if(!n)return null;var i=e[t.vars.container],r=this.resolveTime(t,e,"delay");return new o.Add(n,i,r)},AnimationService.prototype.createRemove=function(t,e){var n=this.getTarget(e,t);if(!n)return null;var i=e[t.vars.container],r=this.resolveTime(t,e,"delay");return new a.Remove(n,i,r)},AnimationService.prototype.createSet=function(t,e){var n=this.getTarget(e,t);if(!n)return null;var i=this.resolveTime(t,e,"delay"),r={};for(var o in t.attributes)"target"!==o&&"delay"!==o&&(r[o]="anchor"!==o&&"outside"!==o?this.resolveNumber(t,e,o):this.resolveString(t,e,o));return new h.SetProperties(n,r,i)},AnimationService.prototype.createTween=function(t,e){var n=this.getTarget(e,t);if(!n)return null;var i=this.resolveTime(t,e,"delay"),r=this.resolveTime(t,e,"duration"),o={};for(var a in t.attributes)if("target"!==a&&"delay"!==a&&"duration"!==a)if("ease"!==a)if("bezier"!==a){var s=this.resolveString(t,e,a);if("true"===s||"false"===s)o[a]="true"===s;else{var c=parseFloat(s);isNaN(c)?o[a]=s:o[a]=c}}else{for(var u=[],p=0;p<t.children.length;p++){var l=t.children[p];"bezierPoint"===l.type&&u.push({x:this.resolveNumber(l,e,"x"),y:this.resolveNumber(l,e,"y")})}o.bezier={type:t.attributes.bezierType||"thru",values:u}}else o[a]=f.EaseMap.getEase([t.attributes[a]].toString());return!o.hasOwnProperty("onUpdate")&&e.hasOwnProperty("onUpdate")&&(o.onUpdate=e.onUpdate),new _.Tween(n,r,o,i)},AnimationService.prototype.getTarget=function(t,e){var n=t[e.vars.target];if(n)return n;if(this.resolveBoolean(e,t,"nullTarget"))return null;throw new Error("null target is not allowed: "+e.vars.target)},AnimationService.prototype.createPlaySound=function(t,e){var n=this.resolveString(t,e,"name"),i=this.resolveString(t,e,"group")||m.SoundGroup.SOUND_GROUP_SOUND,r=this.resolveBoolean(t,e,"loop"),o=this.resolveTime(t,e,"delay");return new s.PlaySound(n,i,r,o)},AnimationService.prototype.resolveTime=function(t,e,n){var i=this.resolveString(t,e,n);return i?"f"===i[0]?parseFloat(i.slice(1))*AnimationService.FPS:parseFloat(i):0},AnimationService.prototype.resolveNumber=function(t,e,n){return t.vars[n]?e[t.vars[n]]:parseFloat(t.attributes[n])},AnimationService.prototype.resolveString=function(t,e,n){return t.vars[n]?e[t.vars[n]]:t.attributes[n]},AnimationService.prototype.resolveBoolean=function(t,e,n){return t.vars[n]?e[t.vars[n]]:"1"===t.attributes[n]},AnimationService.prototype.convertElementToObject=function(t){var e=new w;e.type=t.tagName,e.id=t.getAttribute("id"),t.removeAttribute("id");for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];if("scale"!==i.nodeName){if(("duration"===i.nodeName||"delay"===i.nodeName)&&!this.isVar(i.nodeValue)){var r=i.nodeValue;if("f"===r[r.length-1]){var o=parseFloat(r.slice(0,-1))*AnimationService.FPS;e.attributes[i.nodeName]=o.toString();continue}}e.attributes[i.nodeName]=i.nodeValue}else e.attributes.scaleX=i.nodeValue,e.attributes.scaleY=i.nodeValue}for(n=0;n<t.children.length;n++){var a=t.children[n],s=this.convertElementToObject(a);(s.parent=e).children.push(s)}return e},AnimationService.prototype.replaceLinks=function(t){if("link"==t.type){var e=t.attributes.to;if(!e)throw new Error("There is no attribute @to in <link>");if(!this._id2ProcessObject.has(e))throw new Error("There is no process configuration wit id "+e);delete t.attributes.to;var n=this._id2ProcessObject.get(e).clone();for(var i in n.id=t.id,t.attributes)n.attributes[i]=t.attributes[i];for(var i in t.data)n.data[i]=t.data[i];if(t.parent){var r=t.parent.children.indexOf(t);(t.parent.children[r]=n).parent=t.parent}else this._id2ProcessObject.set(n.id,n);n.attributes.to&&(t=this.replaceLinks(n))}for(var o=0;o<t.children.length;o++)this.replaceLinks(t.children[o]);return t},AnimationService.prototype.setupVars=function(t){for(var e=0;e<t.children.length;e++){var n=t.children[e];for(var i in n.attributes)if(this.isVar(n.attributes[i])){var r=this.getVarName(n.attributes[i]),o=this.findVarValue(n,r);o&&(n.attributes[i]=o),this.isVar(n.attributes[i])&&(n.vars[i]=this.getVarName(n.attributes[i]))}0<n.children.length&&this.setupVars(n)}},AnimationService.prototype.isVar=function(t){return"{"===t[0]&&"}"===t[t.length-1]},AnimationService.prototype.getVarName=function(t){return t.slice(1,t.length-1)},AnimationService.prototype.findVarValue=function(t,e){for(var n=t.parent;n;){var i=n.data[e]||n.attributes[e];if(i)return i;n=n.parent}return null},AnimationService.FPS=30,AnimationService}(n.Service);e.AnimationService=g;var w=function(){function ProcessObject(){this.attributes={},this.data={},this.vars={},this.children=[]}return ProcessObject.prototype.clone=function(){var t=new ProcessObject;for(var e in t.id=this.id,t.type=this.type,this.attributes)t.attributes[e]=this.attributes[e];for(var n=0;n<this.children.length;n++){var i=this.children[n].clone();(i.parent=t).children.push(i)}return t},ProcessObject}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowOnStartPromise(){return null!==t&&t.apply(this,arguments)||this}return a(ShowOnStartPromise,t),ShowOnStartPromise}(n.BasePromise);e.ShowOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ExtraItemModelEvent(t,e){return n.call(this,t,e)||this}return o(ExtraItemModelEvent,n),Object.defineProperty(ExtraItemModelEvent.prototype,"extraItem",{get:function(){return this.data},enumerable:!0,configurable:!0}),ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE="ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE",ExtraItemModelEvent.EXTRA_ITEM_IS_OWN="ExtraItemModelEvent.EXTRA_ITEM_OWN",ExtraItemModelEvent}(uipixi.BaseEvent);e.ExtraItemModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(0),n(35),n(36),n(32)],void 0===(r=function(t,e,u,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideUtils(){}return GuideUtils.sendFinishEvent=function(t,e,n){var i=u.Application.dynamic.guide.getTimestamp(t,e);void 0===i&&(u.Application.debug.addError("guide","sendFinishEvent: undefined start timestamp"),u.Application.debug.sendLog("sendFinishEvent: undefined start timestamp","",r.LogFlag.CLIENT,o.LogLevel.Error,"guide"),i=u.Application.date.currentTime),u.Application.metrics.goalStarkEvent(a.StarkEventsName.TUTORIAL_STEP_FINISH,{tid:t,sid:e,dur:u.Application.date.currentTime-i,skip:n?1:0})},GuideUtils.logRequirements=function(t){var e=this;return t.requirement.map(function(t){return t.data}).concat(t.requirements.map(function(t){return e.logRequirements(t)})).join(",")},GuideUtils.getDataValue=function(t){if(0<=t.indexOf("{")){var e=t.indexOf("{"),n=t.indexOf("}"),i=t.substring(e+1,n);return t.replace("{"+i+"}",u.Application.dataProvider.getValue(i))}return t},GuideUtils.debugStep=function(t,e){var n,i;GuideUtils.debugMode?(n=u.Application.debug).addLog.apply(n,["guide","["+t+"]"].concat(e.toDebugStrings(),[$(e._staticData.source.outerHTML)[0]])):(i=u.Application.debug).addLog.apply(i,["guide","["+t+"]"].concat(e.toDebugStrings()))},GuideUtils.getUIContainerByPath=function(t){for(var e=t.split("."),n=u.Application.view.ui.stage,i=!0,r=0;r<e.length;r++){var o=e[r];if(("**"==o||"*"==o)&&r+1<e.length)r++,n=n.getChildByName(e[r]);else{i=!1;for(var a=0,s=n.children;a<s.length;a++){var c=s[a];if(c.name==o){n=c,i=!0;break}}}}return i?n:null},GuideUtils.parsePath=function(t){for(var e=t.name,n=t.parent,i=u.Application.view.ui.stage.name;n&&(n.parent||n.name!==i);)e=n.name+"."+e,n=n.parent;return e},GuideUtils.checkPath=function(t,e){for(var n=e.split("."),i=t.split("."),r=0,o=0;o<n.length;o++){if(r===i.length)return!1;if("**"===n[o]){if(o===n.length-1)return!0;for(var a=n[o+1],s=!1;r<i.length;){if(i[r]===a){s=!0;break}r++}if(!s)return!1}else if("*"===n[o])r++;else{if(n[o]!==i[r])return!1;r++}}return!0},GuideUtils}();e.GuideUtils=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(560),n(28),n(6),n(17),n(35),n(36)],void 0===(r=function(t,e,a,s,n,c,i,r){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),(o=e.PlatformPermission||(e.PlatformPermission={}))[o.PHOTO=0]="PHOTO",o[o.QUICK_MENU=1]="QUICK_MENU",o[o.SET_STATUS=2]="SET_STATUS",o[o.EMAIL=3]="EMAIL",o[o.USER_FRIENDS=4]="USER_FRIENDS",o[o.USER_BIRTHDAY=5]="USER_BIRTHDAY",o[o.USER_GENDER=6]="USER_GENDER",o[o.USER_LOCATION=7]="USER_LOCATION";var u=function(){function SocialPlatform(){this.CHANNEL_NAME="social",this.initialized=!1,this.queue=[],this.PLATFORM_APP_URL_MASK="https://some.com/app%ID%",this.RESPONSE_LOG_SIZE=1024,this._initAsyncPromise=new n.BasePromise,this.activePromise=null,this.initialized=!1}return SocialPlatform.prototype.canUploadPhoto=function(){return!1},SocialPlatform.prototype.addWidget=function(t,e){return Promise.reject("addWidget is not implemented")},SocialPlatform.prototype.getRequiredResources=function(){return[]},SocialPlatform.prototype.getBaseAppUrl=function(t){return this.PLATFORM_APP_URL_MASK.replace("%ID%",void 0!==t?t:s.Core.instance.config.applicationId)},SocialPlatform.prototype.addToQuickMenu=function(){return Promise.reject("Method addToQuickMenu is not implemented.")},SocialPlatform.prototype.createAlbum=function(t,e){return Promise.reject("createAlbum is not implemented.")},SocialPlatform.prototype.getAlbums=function(t,e){return void 0===e&&(e=null),Promise.reject("getAlbums is not implemented.")},SocialPlatform.prototype.savePhoto=function(t,e,n){return Promise.reject("savePhoto is not implemented.")},SocialPlatform.prototype.uploadPhoto=function(t){return Promise.reject("uploadPhoto is not implemented.")},SocialPlatform.prototype.showOffer=function(t){return Promise.reject("showOffer is not implemented.")},SocialPlatform.prototype.showAllowMessagesFromCommunityBox=function(t){return Promise.reject("showAllowMessagesFromCommunityBox is not implemented.")},SocialPlatform.prototype.promoHasActiveGift=function(t,e){return Promise.reject("promoHasActiveGift is not implemented.")},SocialPlatform.prototype.promoUseGift=function(t,e){return Promise.reject("promoUseGift is not implemented.")},SocialPlatform.prototype.addPromiseToQueue=function(t){this.queue.push(t)},SocialPlatform.prototype.checkQueue=function(){this.initialized&&null===this.activePromise&&0<this.queue.length&&(this.activePromise=this.queue.shift(),this.processPromise(this.activePromise))},SocialPlatform.prototype.onStageTap=function(t){},SocialPlatform.prototype.onPlatformInitSuccess=function(){s.Core.instance.promiseManager.attach(a.SocialPromise,this.handleSocialPromise.bind(this)),this.initialized=!0,this._initAsyncPromise.resolve(null),this.checkQueue()},SocialPlatform.prototype.onPlatformInitFail=function(){c.Services.debug.sendLog("onPlatformInitFail","",i.LogFlag.CLIENT,r.LogLevel.Critical),this._initAsyncPromise.reject(null)},SocialPlatform.prototype.handleSocialPromise=function(t){c.Services.debug.addLog(this.CHANNEL_NAME,"Handle social promise",t.request.method),this.addPromiseToQueue(t),this.checkQueue()},SocialPlatform.prototype.getResult=function(r,o){return p(this,void 0,void 0,function(){var e,n,i;return l(this,function(t){switch(t.label){case 0:e=null,n=new a.SocialPromise(r,o),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,s.Core.instance.promiseManager.ask(n)];case 2:return e=t.sent(),[3,4];case 3:return i=t.sent(),c.Services.debug.addWarning(this.CHANNEL_NAME,"SocialPlatform.getResult error: ",i),e=n.response,[3,4];case 4:return[2,e]}})})},SocialPlatform.prototype.getCallsLeft=function(t){return Promise.reject("getCallsLeft is not implemented.")},SocialPlatform.prototype.inviteFriends=function(){return Promise.reject("inviteFriends is not implemented.")},SocialPlatform}();e.SocialPlatform=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RegisterFriendLoaderPromise(t){var e=n.call(this)||this;return e.friendLoader=t,e}return a(RegisterFriendLoaderPromise,n),RegisterFriendLoaderPromise}(n.BasePromise);e.RegisterFriendLoaderPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e,n,i=Array.prototype.slice.call(arguments,1);i.length;){var r=i.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)e=r,n=o,Object.prototype.hasOwnProperty.call(e,n)&&(t[o]=r[o])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,a;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],a.set(o,r),r+=o.length;return a}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.DecorShopType||(e.DecorShopType={}))[n.GIFT=1]="GIFT",n[n.WORKSHOP=2]="WORKSHOP",n[n.DECOR=3]="DECOR",n[n.ALPHABET=4]="ALPHABET",n[n.ANIMAL=5]="ANIMAL",n[n.OTHER=6]="OTHER"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RatingDataEvent(t,e){var n=i.call(this,t)||this;return n._params=e,n}return a(RatingDataEvent,i),Object.defineProperty(RatingDataEvent.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),RatingDataEvent.CHANGED="ratingDataEvent.changed",RatingDataEvent.CHANGE_PAGE="ratingDataEvent.changePage",RatingDataEvent.GET_PROFILES="getProfiles",RatingDataEvent.MY_RANK="myRank",RatingDataEvent}(n.BaseDataEvent);e.RatingDataEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(37),n(1724),n(0),n(102),n(54)],void 0===(r=function(t,e,s,c,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,u,a,p=function(a){function OkMoneyEventModel(t,e){var n=a.call(this)||this;n.staticData=t,n.dynamicData=e,n._roulettes=[],n.dynamicData.roulette.roulettes.addEventListener(s.ItemCollectionEvent.ITEM_ADDED,n.onItemAdded.bind(n));for(var i=0,r=n.dynamicData.roulette.roulettes.items;i<r.length;i++){var o=r[i];n._roulettes.push(new c.OkMoneyEventRouletteModel(o))}return n._phase=u.NONE,n._firstPartTimeEnd=n.getFinishTimeFromRequirements(n.staticData.general),n._secondPartTimeEnd=n.getFinishTimeFromRequirements(n.staticData.extra),n.onRequirementsChange(),n}return l(OkMoneyEventModel,a),OkMoneyEventModel.prototype.setupWaiter=function(){this._requirement&&r.Application.requirements.unwaitById(this._requirement),this._phase===u.NONE?this._requirement=r.Application.requirements.wait(this.staticData.general,this.onRequirementsChange.bind(this)):this._requirement=r.Application.requirements.wait(this.staticData.extra,this.onRequirementsChange.bind(this))},OkMoneyEventModel.prototype.onRequirementsChange=function(){this.updatePhase(),this.setupWaiter()},OkMoneyEventModel.prototype.updatePhase=function(){var t=this._phase;r.Application.requirements.check(this.staticData.extra)?this._phase=u.SECOND:r.Application.requirements.check(this.staticData.general)?this._phase=u.FIRST:this._phase=u.NONE,t!==this._phase&&this.dispatchEvent(new n.OkMoneyEventModelEvent(n.OkMoneyEventModelEvent.PHASE_CHANGED))},Object.defineProperty(OkMoneyEventModel.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),OkMoneyEventModel.prototype.getEventAward=function(t){var e=this.staticData.newLevel.awards[0];if(t%10==0&&this.phase===u.FIRST&&r.Application.requirements.check(e.requirements.requirements[0]))return new i.CalculatedAwardItem(e.award[0].type,parseInt(e.award[0].value),e.award[0].itemId)},Object.defineProperty(OkMoneyEventModel.prototype,"roulettes",{get:function(){return this._roulettes},enumerable:!0,configurable:!0}),Object.defineProperty(OkMoneyEventModel.prototype,"okMoney",{get:function(){return this.dynamicData.counterMoney},enumerable:!0,configurable:!0}),Object.defineProperty(OkMoneyEventModel.prototype,"inited",{get:function(){return!!this.dynamicData.roulette.roulettes.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(OkMoneyEventModel.prototype,"timeEnd",{get:function(){return this._phase===u.FIRST?this._firstPartTimeEnd:this._phase===u.SECOND?this._secondPartTimeEnd:-1},enumerable:!0,configurable:!0}),OkMoneyEventModel.prototype.getFinishTimeFromRequirements=function(t){for(var e=0,n=t.requirements[0].requirement;e<n.length;e++){var i=n[e];if("{date.current}"===i.data)return r.Application.requirements.timeFromDateString(i.maxValue)}return-1},OkMoneyEventModel.prototype.onItemAdded=function(t){this._roulettes.push(new c.OkMoneyEventRouletteModel(t.item))},OkMoneyEventModel.prototype.getRoulette=function(t){for(var e=0,n=this._roulettes;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},OkMoneyEventModel}(uipixi.BaseEventTarget);e.OkMoneyEventModel=p,(o=e.OkMoneyEventRouletteId||(e.OkMoneyEventRouletteId={})).COMMON="1",o.GOLD="2",(a=u=e.OkMoneyEventPhase||(e.OkMoneyEventPhase={}))[a.NONE=0]="NONE",a[a.FIRST=1]="FIRST",a[a.SECOND=2]="SECOND"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function EventNewYearAchievementModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(EventNewYearAchievementModelEvent,t),EventNewYearAchievementModelEvent.PROGRESS_CHANGED="EventNewYearAchievementModelEvent.PROGRESS_CHANGED",EventNewYearAchievementModelEvent.STAGE_CHANGED="EventNewYearAchievementModelEvent.STAGE_CHANGED",EventNewYearAchievementModelEvent.MODEL_CHANGED="EventNewYearAchievementModelEvent.MODEL_CHANGED",EventNewYearAchievementModelEvent.HISTORY_CHANGED="EventNewYearAchievementModelEvent.HISTORY_CHANGED",EventNewYearAchievementModelEvent.STAGE_SELECTED="EventNewYearAchievementModelEvent.STAGE_SELECTED",EventNewYearAchievementModelEvent.ANIMATE_GIFT="EventNewYearAchievementModelEvent.ANIMATE_GIFT",EventNewYearAchievementModelEvent}(uipixi.BaseEvent);e.EventNewYearAchievementModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function CoreEvent(){return null!==t&&t.apply(this,arguments)||this}return o(CoreEvent,t),CoreEvent.READY="CoreEvent.READY",CoreEvent.GAME_BREAK="CoreEvent.GAME_BREAK",CoreEvent.STARTED="CoreEvent.STARTED",CoreEvent}(uipixi.BaseEvent);e.CoreEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.OrderStatus||(e.OrderStatus={}))[i.UNKNOWN=0]="UNKNOWN",i[i.CANCEL=1]="CANCEL",i[i.FAIL=2]="FAIL",i[i.SUCCESS=3]="SUCCESS";var r=function(t){function OrderResponse(){return null!==t&&t.apply(this,arguments)||this}return a(OrderResponse,t),OrderResponse}(n.PlatformResponse);e.OrderResponse=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function UserModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(UserModelEvent,t),UserModelEvent.LEVEL_UP="UserModelEvent.LEVEL_UP",UserModelEvent.EXP_CHANGED="UserModelEvent.EXP_CHANGED",UserModelEvent}(uipixi.BaseEvent);e.UserModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function StartQuestConfig(){}return StartQuestConfig.getQuestLineByScreen=function(){return this.screenQuestLineMap[n.Application.dynamic.user.screen]},StartQuestConfig.screenQuestLineMap={1:100},StartQuestConfig}();e.StartQuestConfig=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function EventNewYearEvent(){return null!==t&&t.apply(this,arguments)||this}return o(EventNewYearEvent,t),EventNewYearEvent.PHASE_START="EventNewYearEvent.PHASE_START",EventNewYearEvent.PHASE_FINISH="EventNewYearEvent.PHASE_FINISH",EventNewYearEvent.TIMER="EventNewYearEvent.TIMER",EventNewYearEvent.PLACE_SIZE_CHANGED="EventNewYearEvent.PLACE_SIZE_CHANGED",EventNewYearEvent.RATING_PLACE_CHANGED="EventNewYearEvent.RATING_PLACE_CHANGED",EventNewYearEvent}(uipixi.BaseEvent);e.EventNewYearEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(525)],void 0===(r=function(t,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResourceDescriptor(t,e,n,i,r,o,a,s){void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=!1),this._id=t,this._priority=i,this._path=e?c.FilePathInfo.parse(e):null,this._type=n,this._hash=r,this._size=o,this._mdate=a,this._local=s}return Object.defineProperty(ResourceDescriptor.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceDescriptor.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceDescriptor.prototype,"hash",{get:function(){return this._hash},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceDescriptor.prototype,"local",{get:function(){return this._local},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceDescriptor.prototype,"src",{get:function(){return this._path?this.path+(this._hash?"?"+this._hash:""):null},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceDescriptor.prototype,"path",{get:function(){return this._path?this._path.rawPath:null},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceDescriptor.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),ResourceDescriptor}();e.ResourceDescriptor=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ResourcesPackEvent(t,e){return n.call(this,t,e)||this}return o(ResourcesPackEvent,n),Object.defineProperty(ResourcesPackEvent.prototype,"pack",{get:function(){return this.data},enumerable:!0,configurable:!0}),ResourcesPackEvent.LOAD_COMPLETED="ResourcesPackEvent.LOAD_COMPLETED",ResourcesPackEvent}(uipixi.BaseEvent);e.ResourcesPackEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Request(){this._timeout=6e4,this._cache=!0,this._contentType=null,this._withCredentials=!1,this._processData=!0,this._token=(Request._tokenCount++).toString()}return Object.defineProperty(Request.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"timeout",{get:function(){return this._timeout},set:function(t){this._timeout=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"token",{get:function(){return this._token},set:function(t){this._token=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"method",{get:function(){return this._method},set:function(t){this._method=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"cache",{get:function(){return this._cache},set:function(t){this._cache=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"contentType",{get:function(){return this._contentType},set:function(t){this._contentType=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"processData",{get:function(){return this._processData},set:function(t){this._processData=t},enumerable:!0,configurable:!0}),Object.defineProperty(Request.prototype,"queueId",{get:function(){return this._queueId},set:function(t){this._queueId=t},enumerable:!0,configurable:!0}),Request._tokenCount=1,Request}();e.Request=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(550)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NetworkError(t,e,n){this._type=t,this._text=e,this._httpStatusCode=n}return NetworkError.convertType=function(t){var e={timeout:n.NetworkErrorType.TIMEOUT,error:n.NetworkErrorType.ERROR,abort:n.NetworkErrorType.ABORT,parsererror:n.NetworkErrorType.PARSEERROR};return e.hasOwnProperty(t)?e[t]:n.NetworkErrorType.UNKNOWN},Object.defineProperty(NetworkError.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(NetworkError.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(NetworkError.prototype,"httpStatusCode",{get:function(){return this._httpStatusCode},enumerable:!0,configurable:!0}),NetworkError}();e.NetworkError=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(112),n(294)],void 0===(r=function(t,e,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function UserEntity(){var t=e.call(this)||this;return t.pictures=[],t.isNPC=!1,t}return s(UserEntity,e),UserEntity.prototype.getBiggestSquarePicture=function(e){var t=0,n=null;"*"!==e&&(this.pictures.some(function(t){return t.screenId===e})||(e="*"));for(var i=0,r=this.pictures;i<r.length;i++){var o=r[i];o.type===a.UserPictureType.SQUARE&&(o.screenId===e&&o.width>t&&(t=o.width,n=o.url))}return n},Object.defineProperty(UserEntity.prototype,"isMale",{get:function(){return"female"!==this.gender},enumerable:!0,configurable:!0}),Object.defineProperty(UserEntity.prototype,"isFemale",{get:function(){return"female"===this.gender},enumerable:!0,configurable:!0}),UserEntity}(n.DynamicItem);e.UserEntity=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(294),n(5),n(13)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function BaseDynamicData(t){var e=n.call(this)||this;return e.childrenMap={},null!==t&&(e.initialized=!0,e._data=t),e._changedChildren=[],e}return a(BaseDynamicData,n),BaseDynamicData.prototype.update=function(t,e){if(void 0===e&&(e=!1),"object"!=typeof t&&"object"==typeof this._data)throw new Error("Trying update object data by simple");var n=!1;if(null===this._data&&(this._data={}),"object"==typeof t){if(e)for(var i in this._data)t&&i in t||(i in this.childrenMap?this.childrenMap[i].update(null,e)&&(n=!0):("object"!=typeof t[i]&&this._changedChildren.push(i),delete this._data[i],n=!0));if(t)if(""in this.childrenMap)this.childrenMap[""].update(t,e)&&(n=!0);else for(var i in t)i in this.childrenMap?this.childrenMap[i].update(t[i],e)?(n=!0,this._data[i]||(this._data[i]=this.childrenMap[i]._data)):!this._data[i]&&this.childrenMap[i]._data&&(this._data[i]=this.childrenMap[i]._data):t[i]!==this._data[i]&&(this._data[i]=t[i],n=!0,"object"!=typeof t[i]&&this._changedChildren.push(i))}else t!==this._data&&(this._data=t,n=!0);return n&&(this.dispatchChildrenChanged(),this.markChanged()),n},BaseDynamicData.prototype.dispatchChildrenChanged=function(){this.changeTransaction||0===this._changedChildren.length||(this.dispatchEvent(new r.BaseDataEvent(r.BaseDataEvent.CHILDREN_CHANGED,this._changedChildren)),this._changedChildren=[])},BaseDynamicData.prototype.reinit=function(t){"object"==typeof t&&(this._data=i.Utils.cloneObject(t),this.markChanged())},BaseDynamicData.prototype.getValue=function(t){if(0===t.length)return this._data;var e=this.getChildProvider(t[0]);return e?(t.shift(),e.getValue(t)):1<t.length?null:this._data.hasOwnProperty(t[0])?this._data[t[0]]:null},BaseDynamicData.prototype.init=function(t){if(this.initialized)throw new Error("Data is already initialized.");this._data=t,this.initialized=!0},BaseDynamicData.prototype.getRawData=function(){return i.Utils.cloneObject(this._data)},BaseDynamicData.prototype.assignChildPath=function(t,e){this.childrenMap[t]=e},BaseDynamicData.prototype.initChildren=function(t){for(var e in this.childrenMap)0===e.length?this.childrenMap[e].init(t):this.childrenMap[e].init(t.hasOwnProperty(e)?t[e]:null)},BaseDynamicData.prototype.getChildProvider=function(t){return this.childrenMap.hasOwnProperty(t)?this.childrenMap[t]:null},BaseDynamicData.prototype.getRawValue=function(t,e){return void 0===e&&(e=null),""===t?this._data:this._data&&this._data.hasOwnProperty(t)?this._data[t]:e},BaseDynamicData.prototype.getNumber=function(t,e){return void 0===e&&(e=null),i.Utils.parseInt(this.getRawValue(t,e))},BaseDynamicData.prototype.getString=function(t,e){return void 0===e&&(e=null),this.getRawValue(t,e)},BaseDynamicData.prototype.getFloat=function(t,e){return void 0===e&&(e=null),i.Utils.parseFloat(this.getRawValue(t,e))},BaseDynamicData.prototype.getArrayFromIndexedObject=function(t){var e=[],n=this.getRawValue(t,null);for(var i in n)e.push(n[i]);return e},BaseDynamicData.prototype.applyMarkChanged=function(){n.prototype.applyMarkChanged.call(this),this.dispatchChildrenChanged()},BaseDynamicData}(n.DynamicItem);e.BaseDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function LoadableEvent(t){return e.call(this,t)||this}return o(LoadableEvent,e),LoadableEvent.LOADED="LoadableEvent.LOADED",LoadableEvent}(uipixi.BaseEvent);e.LoadableEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function MailModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(MailModelEvent,t),MailModelEvent.INBOX_ITEM_WILL_BE_DELETED="MailModelEvent.INBOX_ITEM_WILL_BE_DELETED",MailModelEvent.INBOX_ITEMS_COUNT_CHANGED="MailModelEvent.INBOX_ITEMS_COUNT_CHANGED",MailModelEvent}(uipixi.BaseEvent);e.MailModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21)],void 0===(r=function(t,e,n,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIUtils,o=uipixi.Point,i=function(i){function TooltipMediator(){var t,e,n=null!==i&&i.apply(this,arguments)||this;return n._anchorMap=((t={})[r.TooltipAnchor.Left]="centerRight",t[r.TooltipAnchor.Right]="centerLeft",t[r.TooltipAnchor.Top]="bottomCenter",t[r.TooltipAnchor.Bottom]="topCenter",t),n._outsideMap=((e={})[r.TooltipAnchor.Left]="centerLeft",e[r.TooltipAnchor.Right]="centerRight",e[r.TooltipAnchor.Top]="topCenter",e[r.TooltipAnchor.Bottom]="bottomCenter",e),n._screenOffset=new o,n}return c(TooltipMediator,i),TooltipMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this.onInitialize(),this.postInitialize()},TooltipMediator.prototype.postInitialize=function(){this.setupPosition();var t=this.child("tooltipBackground");t&&(t.currentState=this._showData.anchorType);var e=this.child("tailContainer");e&&(e.offsetX-=this._screenOffset.x,e.offsetY-=this._screenOffset.y),this._animation=a.Application.animation.animate(this._container,"tooltip")},TooltipMediator.prototype.setupPosition=function(){var t=this._showData;a.Application.view.ui.stage.update();var e=this._displayObject;e.interactive=!1,e.interactiveChildren=!1,e.anchor=this._anchorMap[t.anchorType],e.outside="topLeft";var n=t.anchorObject,i=s.getPointForAnchorOutside(this._outsideMap[t.anchorType]);i.x+=.5,i.y+=.5,i.x*=n.width,i.y*=n.height;var r=n.getGlobalPosition();e.offsetX=r.x+i.x,e.offsetY=r.y+i.y,t.anchorOffset&&(e.offsetX+=t.anchorOffset.x,e.offsetY+=t.anchorOffset.y),this.fitToScreen(e)},TooltipMediator.prototype.fitToScreen=function(t){var e=s.getPointForAnchorOutside(t.anchor),n=t.offsetX-(e.x+.5)*t.width;n<0&&(t.offsetX-=n,this._screenOffset.x-=n);var i=t.offsetX-(e.x-.5)*t.width;0<(i-=a.Application.view.ui.stage.width)&&(t.offsetX-=i,this._screenOffset.x-=i);var r=t.offsetY-(e.y+.5)*t.height;r<0&&(t.offsetY-=r,this._screenOffset.y-=r);var o=t.offsetY-(e.y-.5)*t.height;0<(o-=a.Application.view.ui.stage.height)&&(t.offsetY-=o,this._screenOffset.y-=o)},TooltipMediator.prototype.destroy=function(){this._animation.stop(),i.prototype.destroy.call(this)},TooltipMediator}(n.DisplayObjectContainerMediator);e.TooltipMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ScreenToysModelEvent(t,e){return n.call(this,t,e)||this}return o(ScreenToysModelEvent,n),Object.defineProperty(ScreenToysModelEvent.prototype,"toyModel",{get:function(){return this.data},enumerable:!0,configurable:!0}),ScreenToysModelEvent.Z_INDEX_CHANGED="ScreenToysModelEvent.Z_INDEX_CHANGED",ScreenToysModelEvent.TOY_ADDED="ScreenToysModelEvent.TOY_ADDED",ScreenToysModelEvent.TOY_REMOVED="ScreenToysModelEvent.TOY_REMOVED",ScreenToysModelEvent.TOY_POP_UP="ScreenToysModelEvent.TOY_POP_UP",ScreenToysModelEvent.TOY_UPDATED="ScreenToysModelEvent.TOY_UPDATED",ScreenToysModelEvent.TOY_SELECTED_CHANGED="ScreenToysModelEvent.TOY_SELECTED_CHANGED",ScreenToysModelEvent.TOY_DRAG_START="ScreenToysModelEvent.TOY_DRAG_START",ScreenToysModelEvent.TOY_DRAG_STOP="ScreenToysModelEvent.TOY_DRAG_STOP",ScreenToysModelEvent.REMOVE_ALL="ScreenToysModelEvent.REMOVE_ALL",ScreenToysModelEvent}(uipixi.BaseEvent);e.ScreenToysModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepStaticData(t){this.source=t}return Object.defineProperty(GuideStepStaticData.prototype,"type",{get:function(){return this.source.tagName},enumerable:!0,configurable:!0}),GuideStepStaticData}();e.GuideStepStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function OkMoneyEventModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(OkMoneyEventModelEvent,t),OkMoneyEventModelEvent.PHASE_CHANGED="OkMoneyEventModelEvent.PHASE_CHANGED",OkMoneyEventModelEvent}(uipixi.BaseEvent);e.OkMoneyEventModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function ChestModelEvent(t){return e.call(this,t)||this}return o(ChestModelEvent,e),ChestModelEvent.OPEN="ChestModelEvent.OPEN",ChestModelEvent}(uipixi.BaseEvent);e.ChestModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(92),n(97)],void 0===(r=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(r){function LoadableSpine(t,e,n){void 0===n&&(n=!0);var i=r.call(this)||this;return i.showLoading=n,i._spineContainer=t,i._resource=e,i._isLoaded=!1,i.initialize(),i}return a(LoadableSpine,r),Object.defineProperty(LoadableSpine.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),LoadableSpine.prototype.initialize=function(){if(n.Application.resources.isResourceLoaded(this._resource))return this._isLoaded=!0,void this.render();this.showLoading&&this.setLoading();var t=this._resource;this._eventTarget=n.Application.resources.getResources([t],!1).eventTarget,this._eventTarget.addEventListener(i.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadComplete.bind(this))},LoadableSpine.prototype.onLoadComplete=function(){this.clearLoading(),this.render(),this._isLoaded=!0,this.dispatchEvent(new o.LoadableEvent(o.LoadableEvent.LOADED))},LoadableSpine.prototype.render=function(){this._spineContainer.currentState="default"},LoadableSpine.prototype.setLoading=function(){this._spineContainer.currentState="loading";var t=this._spineContainer.getChildByName("loading").getChildByName("progressContainer");this._loadingAnimation=n.Application.animation.animate(t,"loading")},LoadableSpine.prototype.clearLoading=function(){this._loadingAnimation&&(this._loadingAnimation.stop(),this._loadingAnimation=void 0),this._eventTarget&&(this._eventTarget.removeEventListener(i.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadComplete.bind(this)),this._eventTarget=void 0)},LoadableSpine.prototype.destroy=function(){this.clearLoading()},LoadableSpine}(uipixi.BaseEventTarget);e.LoadableSpine=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(129),n(161)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function DecorShopModel(t){var e=n.call(this)||this;return e._shopType=t,e._items=[],e.init(),e}return a(DecorShopModel,n),DecorShopModel.prototype.init=function(){var e=this;this.createItems(),this.sortItems(),this._items.forEach(function(t){t.addEventListener(r.DecorShopItemModelEvent.STATE_CHANGED,e.updateMarkers.bind(e))}),this.updateMarkers()},DecorShopModel.prototype.createItems=function(){},DecorShopModel.prototype.sortItems=function(){},Object.defineProperty(DecorShopModel.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopModel.prototype,"shopType",{get:function(){return this._shopType},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopModel.prototype,"markerAttention",{get:function(){return this._markerAttention},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopModel.prototype,"markerDone",{get:function(){return this._markerDone},enumerable:!0,configurable:!0}),DecorShopModel.prototype.updateMarkers=function(){this._markerAttention=!1,this._markerDone=!1;for(var t=0,e=this._items;t<e.length;t++){var n=e[t];if(n.markerAttention&&(this._markerAttention=!0),n.markerDone){this._markerDone=!0,this._markerAttention=!1;break}}this.dispatchEvent(new i.DecorShopModelEvent(i.DecorShopModelEvent.STATE_CHANGED))},DecorShopModel.prototype.clearItems=function(){var e=this;this._items.forEach(function(t){t.removeEventListener(r.DecorShopItemModelEvent.STATE_CHANGED,e.updateMarkers.bind(e)),t.destroy()}),this._items=[]},DecorShopModel.prototype.destroy=function(){this.clearItems()},DecorShopModel}(uipixi.BaseEventTarget);e.DecorShopModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function WorkshopModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(WorkshopModelEvent,t),WorkshopModelEvent.COLLECTION_CHANGED="WorkshopModelEvent.COLLECTION_CHANGED",WorkshopModelEvent.FRIEND_REQUESTS_CHANGED="WorkshopModelEvent.FRIEND_REQUESTS_CHANGED",WorkshopModelEvent.UPDATE_FINAL_AWARD_STATE="WorkshopModelEvent.UPDATE_FINAL_AWARD_STATE",WorkshopModelEvent.COLLECT_FINAL_AWARD="WorkshopModelEvent.COLLECT_FINAL_AWARD",WorkshopModelEvent}(uipixi.BaseEvent);e.WorkshopModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function FarmGeneratorEvent(t,e){return n.call(this,t,e)||this}return o(FarmGeneratorEvent,n),Object.defineProperty(FarmGeneratorEvent.prototype,"generator",{get:function(){return this.data},enumerable:!0,configurable:!0}),FarmGeneratorEvent.STATE_CHANGED="stateChanged",FarmGeneratorEvent.STAGE_CHANGED="stageChanged",FarmGeneratorEvent.NUN_RESOURCES_CHANGED="numResourcesChanged",FarmGeneratorEvent.TOTAL_TIME_LEFT_CHANGED="totalTimeLeftChanged",FarmGeneratorEvent.TOTAL_PROGRESS_CHANGED="totalProgressChanged",FarmGeneratorEvent.RESOURCE_TIME_LEFT_CHANGED="resourceTimeLeftChanged",FarmGeneratorEvent.RESOURCE_PROGRESS_CHANGED="resourceProgressChanged",FarmGeneratorEvent.COMPLETE_CHANGED="completeChanged",FarmGeneratorEvent.CAN_UPGRADE_CHANGED="canUpgradeChanged",FarmGeneratorEvent}(uipixi.BaseEvent);e.FarmGeneratorEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function BaseError(t,e){var n=i.call(this,t)||this;return n.code=e,n}return o(BaseError,i),BaseError}(Error);e.BaseError=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(o){function ResourceLoaderEvent(t,e,n,i){var r=o.call(this,t,e,i)||this;return r._error=n,r.failsCount=0,r}return a(ResourceLoaderEvent,o),Object.defineProperty(ResourceLoaderEvent.prototype,"resource",{get:function(){return this.data},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceLoaderEvent.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),ResourceLoaderEvent.LOADED="ResourceLoaderEvent.LOADED",ResourceLoaderEvent.ERROR="ResourceLoaderEvent.ERROR",ResourceLoaderEvent}(uipixi.BaseEvent);e.ResourceLoaderEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(549),n(176),n(25),n(28),n(94),n(17),n(551)],void 0===(r=function(t,e,a,i,n,r,s,c,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function NetworkService(){return null!==t&&t.apply(this,arguments)||this}return p(NetworkService,t),NetworkService.prototype.initialize=function(t){return l(this,void 0,void 0,function(){return d(this,function(t){return this._queues={},r.Core.instance.promiseManager.attach(i.NetworkRequestPromise,this.handleNetworkRequestPromise.bind(this)),[2]})})},NetworkService.prototype.handleNetworkRequestPromise=function(t){this.send(t,this._queues[t.request.queueId||NetworkService.DEFAULT_QUEUE_ID])},NetworkService.prototype.sendRequest=function(t){var e=new i.NetworkRequestPromise(t),n=this.getQueue(t.queueId||NetworkService.DEFAULT_QUEUE_ID);return n.push(e),this.checkQueue(n),e},NetworkService.prototype.getQueue=function(t){return this._queues[t]||(this._queues[t]=new o.NetworkQueue),this._queues[t]},NetworkService.prototype.send=function(t,e){this.addLog("Sending request to "+t.request.url,t.request.data);var n={url:t.request.url,method:t.request.method,dataType:t.request.type,data:t.request.data,timeout:t.request.timeout,context:this,success:this.onSuccess.bind(this,t,e),error:this.onError.bind(this,t,e),xhrFields:{withCredentials:t.request.withCredentials}};""===t.request.contentType?n.contentType=!1:null!==t.request.contentType&&(n.contentType=t.request.contentType),null!==t.request.cache&&(n.cache=t.request.cache),null!==t.request.processData&&(n.processData=t.request.processData),jQuery.ajax(n)},NetworkService.prototype.onSuccess=function(t,e,n,i,r){this.addLogUnlimited("Request is sent successfully: "+t.request.url,n,"text status: "+i,"response code: "+r.status),e.complete(t);var o=new a.Response(n,NetworkService.RESPONSE_STATUS_SUCCESS);o.assignRequest(t.request),t.resolve(o),this.checkQueue(e)},NetworkService.prototype.onError=function(t,e,n,i,r){var o=n.status;this.addLog("Request error: "+t.request.url,"text status: "+i,"response code: "+o,"error text: "+r,"response text: "+n.responseText),e.complete(t),t.reject(new s.NetworkError(s.NetworkError.convertType(i),r,o)),this.checkQueue(e)},NetworkService.prototype.checkQueue=function(t){if(t.isReadyToSend()){var e=t.send();r.Core.instance.promiseManager.ask(e)}},NetworkService.prototype.addLog=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(c.Services.debug)(t=c.Services.debug).addLog.apply(t,[this.DEBUG_CHANNEL].concat(e));else for(var i=0,r=e;i<r.length;i++){var o=r[i];console.log(o)}},NetworkService.prototype.addLogUnlimited=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(c.Services.debug)(t=c.Services.debug).addLogUnlimited.apply(t,[this.DEBUG_CHANNEL].concat(e));else for(var i=0,r=e;i<r.length;i++){var o=r[i];console.log(o)}},NetworkService.RESPONSE_STATUS_SUCCESS=1,NetworkService.RESPONSE_STATUS_ERROR=2,NetworkService.DEFAULT_QUEUE_ID=0,NetworkService}(n.Service);e.NetworkService=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(131),n(559)],void 0===(r=function(t,e,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ValueInfo(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this._providerName=t||null,this._providerData=e||null,this._operator=n||null,this._params=null,this._filters=i||[]}return ValueInfo.fromString=function(t){var e=new ValueInfo,n=t.match(/([^\||\^:]+)(:([^\|]+))?(\|([^}]+))?/);if(n){if(!n[1])throw new Error("Bad value string in: "+t);var i=n[1].indexOf(".");if(-1===i)throw new Error("Provider not found in path: "+n[1]);if(n[5]){e._params={};for(var r=0,o=n[5].split(";");r<o.length;r++){var a=o[r].split("=");2===a.length&&(e._params[a[0]]=a[1])}e._filters=c.IDataFilterConfig.fromString(n[5])}e._providerName=n[1].substr(0,i),e._providerData=n[1].substr(i+1),e._operator=s.DataOperatorType.NONE,n[3]&&(e._operator=s.DataOperators.fromString(n[3])||s.DataOperatorType.NONE)}else e._providerData=t;return e},Object.defineProperty(ValueInfo.prototype,"providerName",{get:function(){return this._providerName},enumerable:!0,configurable:!0}),Object.defineProperty(ValueInfo.prototype,"providerData",{get:function(){return this._providerData},enumerable:!0,configurable:!0}),Object.defineProperty(ValueInfo.prototype,"operator",{get:function(){return this._operator},enumerable:!0,configurable:!0}),Object.defineProperty(ValueInfo.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),ValueInfo}();e.ValueInfo=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var o,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=o=e.UserPictureType||(e.UserPictureType={}))[n.UNKNOWN=0]="UNKNOWN",n[n.SQUARE=1]="SQUARE";var i=function UserPictureItem(t,e,n,i,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=o.UNKNOWN),void 0===r&&(r="*"),this.url=t,this.width=e,this.height=n,this.type=i,this.screenId=r};e.UserPictureItem=i}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(96),n(13)],void 0===(r=function(t,e,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.BaseEventTarget,r=function(r){function WatchedDynamicItem(t){var e=r.call(this,t)||this;return e._contexts={},e}return c(WatchedDynamicItem,r),WatchedDynamicItem.prototype.addWaitChange=function(t,e){if(0===t.length)throw new Error("WatchedDynamicItem.watch error: can't watch empty path!");var n=t.split(".");if(1===n.length){var i=this._contexts[n[0]];i||(i=new s(n,this.getValue(n.concat())),this._contexts[n[0]]=i),i.eventTarget.hasListener(a.BaseDataEvent.CHANGED,e)||i.eventTarget.addEventListener(a.BaseDataEvent.CHANGED,e)}else{var r=this.getChildProvider(n[0]),o=r||null;if(o)return n.shift(),o.addWaitChange(n.join("."),e)}},WatchedDynamicItem.prototype.removeWaitChange=function(t,e){if(0===t.length)throw new Error("WatchedDynamicItem.watch error: can't watch empty path!");var n=t.split(".");if(1===n.length){var i=this._contexts[n[0]];i&&(i.eventTarget.removeEventListener(a.BaseDataEvent.CHANGED,e),0===i.eventTarget.listenersCount&&delete this._contexts[n.join(".")])}else{var r=this.getChildProvider(n[0]),o=r||null;if(o)return n.shift(),o.removeWaitChange(n.join("."),e)}},WatchedDynamicItem.prototype.dispatchChange=function(){for(var t in r.prototype.dispatchChange.call(this),this._contexts){var e=this._contexts[t],n=this.getValue(e.path.concat());if(n!==e.value){var i=0;"number"==typeof n&&(i=n-e.value),e.value=n,e.eventTarget.dispatchEvent(new a.BaseDataEvent(a.BaseDataEvent.CHANGED,i))}}},WatchedDynamicItem}(n.BaseDynamicData);e.WatchedDynamicItem=r;var s=function(){function WatchContext(t,e){this._path=t,this._value=e,this._eventTarget=new i}return Object.defineProperty(WatchContext.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(WatchContext.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(WatchContext.prototype,"eventTarget",{get:function(){return this._eventTarget},enumerable:!0,configurable:!0}),WatchContext}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FriendDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(FriendDynamicItem,t),Object.defineProperty(FriendDynamicItem.prototype,"clanId",{get:function(){return this.getNumber("clanId")},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"hash",{get:function(){return this.getString("hash","")},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"inClan",{get:function(){return 1===this.getNumber("inClan")},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"level",{get:function(){return this.getNumber("level",0)},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"loginTime",{get:function(){return this.getNumber("loginTime")},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"ratings",{get:function(){return this.getString("ratings",null)},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"refUserId",{get:function(){return this.getNumber("refUserId")},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"sUserId",{get:function(){return this.getString("sUserId")},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"userId",{get:function(){return this.getNumber("userId")},enumerable:!0,configurable:!0}),Object.defineProperty(FriendDynamicItem.prototype,"isNPC",{get:function(){return 1===this.getNumber("npc",0)},enumerable:!0,configurable:!0}),FriendDynamicItem}(n.BaseDynamicDataIdentifiable);e.FriendDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function CalculatedPrice(){this._prices=[]}return CalculatedPrice.prototype.add=function(t){var e=this.getItemLike(t);return e?e.value+=t.value:this._prices.push(t.clone()),this},CalculatedPrice.prototype.getItemLike=function(t){for(var e=0,n=this._prices;e<n.length;e++){var i=n[e];if(i.equalsLike(t))return i}return null},Object.defineProperty(CalculatedPrice.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),CalculatedPrice.prototype.hasPriceType=function(t){return null!==this.getPriceFirst(t)},CalculatedPrice.prototype.getPriceFirst=function(t){for(var e=0,n=this._prices;e<n.length;e++){var i=n[e];if(i.type===t)return i}return null},CalculatedPrice.prototype.multiply=function(t){for(var e=0,n=this._prices;e<n.length;e++){n[e].value*=t}return this},CalculatedPrice.prototype.hasPriceTypeItemId=function(t,e){for(var n=0,i=this._prices;n<i.length;n++){if(i[n].equalsBy(t,e))return!0}return!1},CalculatedPrice}();e.CalculatedPrice=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function CalculatedPriceItem(t,e,n){this._type=t,this._value=e,this.itemId=n||null}return Object.defineProperty(CalculatedPriceItem.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(CalculatedPriceItem.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),CalculatedPriceItem.prototype.clone=function(){return new CalculatedPriceItem(this.type,this.value,this.itemId)},CalculatedPriceItem.prototype.equalsLike=function(t){return this.equalsBy(t.type,t.itemId)},CalculatedPriceItem.prototype.equalsBy=function(t,e){return this.type===t&&this.itemId===e},CalculatedPriceItem}();e.CalculatedPriceItem=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(283)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function GameInitServerPromise(t){return e.call(this,t)||this}return a(GameInitServerPromise,e),GameInitServerPromise}(n.ServerActionPromise);e.GameInitServerPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.PaymentAwardStatus||(e.PaymentAwardStatus={}))[n.INIT=0]="INIT",n[n.GRANTED=1]="GRANTED",n[n.REFUND=2]="REFUND",n[n.REFUND_GRANTED=3]="REFUND_GRANTED",n[n.FAILED=4]="FAILED",n[n.PENDING=5]="PENDING"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(0),n(783)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=PIXI.Texture,a=PIXI.BaseTexture,n=PIXI.filters.BlurFilter,s=uipixi.Point,c=function(){function UIUtils(){}return UIUtils.isWebGLRender=function(){return i.Application.view.renderer instanceof PIXI.Renderer},UIUtils.getRenderedTexture=function(t,e){void 0===e&&(e=null);var n=t.render;return i.Application.view.renderer.generateTexture(n,1,1,e||n.getLocalBounds())},UIUtils.applyBlurFilter=function(t){var e;return UIUtils.isWebGLRender()?(t.filters=[new n],e=UIUtils.getRenderedTexture(t),t.filters=[]):e=UIUtils.applyCanvasBlurFilter(t),e},UIUtils.applyCanvasBlurFilter=function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");r.StackBlur.stackBlurCanvasRGBA(e,n,t,20);var i=new o(new a(e));return e&&e.remove(),i},UIUtils.getHUDBarTemplate=function(t){return this._hudBarsTemplates[t]?this._hudBarsTemplates[t]:0===t.indexOf("money")?this._hudBarsTemplates.money:0===t.indexOf("coin")?this._hudBarsTemplates.coin:void 0},UIUtils.getWindowHUDBar=function(t,e){var n=this.getHUDBarTemplate(e);return n?t.getChildByName(n):null},UIUtils.getResourceHUDPoint=function(t,e){var n=this.getWindowHUDBar(t,e);return n?n.getGlobalPosition().add(new s(8,16)):null},UIUtils._hudBarsTemplates={cash:"cashHUDBar",money:"moneyHUDBar",energy:"energyHUDBar",keys:"keysHUDBar",coin:"coinHUDBar",duel:"duelHUDBar",farmCrystal:"farmCrystalHUDBar",farmCoin:"farmCoinHUDBar"},UIUtils}();e.UIUtils=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function MathUtils(){}return MathUtils.clamp=function(t,e,n){return t<e?e:n<t?n:t},MathUtils.getRandom=function(t,e){return e===t?e:Math.random()*(e-t)+t},MathUtils.roundToEven=function(t){var e=Math.round(t);return e%2==0?e:e<t?e+1:e-1},MathUtils.degreesToRadians=function(t){return this.DEG_2_RAD*t},MathUtils.radiansToDegrees=function(t){return this.RAD_2_DEG*t},MathUtils.getRandomPlusMinus=function(t){return t*(1-2*Math.random())},MathUtils.RAD_2_DEG=180/Math.PI,MathUtils.DEG_2_RAD=Math.PI/180,MathUtils}();e.MathUtils=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,s=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=uipixi.BaseEventTarget,r=uipixi.GestureEvent,o=uipixi.TextInputEvent,a=function(n){function SearchRendererEvent(t,e){return n.call(this,t,e)||this}return s(SearchRendererEvent,n),SearchRendererEvent.SEARCH="SearchRendererEvent.SEARCH",SearchRendererEvent}(uipixi.BaseEvent);e.SearchRendererEvent=a;var i=function(i){function SearchRenderer(t,e){var n=i.call(this)||this;return n._container=t,n._options=e,n.setup(),n.fixOptions(),n}return s(SearchRenderer,i),SearchRenderer.prototype.setup=function(){this._clearSearch=this._container.getChildByName("clearSearch"),this._clearSearch.visible=!1,this._clearSearch.addEventListener(r.POINTER_TAP,this.onTapClearSearch.bind(this)),this._textInput=this._container.getChildByName("textInput"),this._textInput.addEventListener(o.INPUT,this.onInputSearch.bind(this))},SearchRenderer.prototype.fixOptions=function(){this._options.searchKey=this._options.searchKey?this._options.searchKey:"name"},SearchRenderer.prototype.onInputSearch=function(t){if(0<this._textInput.text.length){this._clearSearch.visible=!0,this._foundItems=[];for(var e=0,n=this._options.dataItems;e<n.length;e++){var i=n[e],r=i[this._options.searchKey];0<=(r=r.toLocaleLowerCase()).indexOf(this._textInput.text.toLocaleLowerCase())&&this._foundItems.push(i)}this.dispatchEvent(new a(a.SEARCH,this._foundItems))}else this.clearSearch()},SearchRenderer.prototype.onTapClearSearch=function(){this.clearSearch()},SearchRenderer.prototype.clearSearch=function(){this._clearSearch.visible=!1,this._foundItems=null,this._textInput.text="",this.dispatchEvent(new a(a.SEARCH,this._options.dataItems))},SearchRenderer.prototype.destroy=function(){this._textInput.removeEventListener(o.INPUT,this.onInputSearch.bind(this)),this._clearSearch.removeEventListener(r.POINTER_TAP,this.onTapClearSearch.bind(this))},SearchRenderer}(n);e.SearchRenderer=i}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.UIScrollContainer,r=uipixi.ScrollRectEvent,o=function(e){function AlphaOptimizationListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(AlphaOptimizationListItemMediator,e),AlphaOptimizationListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.searchScrollContainer(),this._scrollContainer&&this.setupScrollContainer()},AlphaOptimizationListItemMediator.prototype.searchScrollContainer=function(){for(var t=this._container;t.parent;)t.parent instanceof i&&(this._scrollContainer=t.parent),t=t.parent},AlphaOptimizationListItemMediator.prototype.setupScrollContainer=function(){this.registerListener(this._scrollContainer,r.SCROLL,this.onScrolled.bind(this))},AlphaOptimizationListItemMediator.prototype.onScrolled=function(t){var e=t.data;this._container.alpha=this.getContainerAlpha(e)},AlphaOptimizationListItemMediator.prototype.getContainerAlpha=function(t){switch(this._scrollContainer.direction){case"horizontal":if(t.left>this._container.x+this._container.width)return 0;if(t.right<this._container.x)return 0;break;case"vertical":if(t.top>this._container.y+this._container.height)return 0;if(t.bottom<this._container.y)return 0}return 1},AlphaOptimizationListItemMediator}(n.DisplayObjectContainerMediator);e.AlphaOptimizationListItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(221)],void 0===(r=function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=uipixi.GestureEvent,i=function(e){function NavigatorRenderer(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentPage=null,t}return a(NavigatorRenderer,e),NavigatorRenderer.prototype.initialize=function(t,e){return this.data=this.prepareData(t),this.getElements(t,e),this._prevButton.addEventListener(n.POINTER_TAP,this.onPrevButton.bind(this)),this._nextButton.addEventListener(n.POINTER_TAP,this.onNextButton.bind(this)),this.createScrollList(),this.initializeStartPage(),this},NavigatorRenderer.prototype.prepareData=function(t){return void 0===t.prevButton&&(t.prevButton="prevButton"),void 0===t.nextButton&&(t.nextButton="nextButton"),void 0===t.scrollList&&(t.scrollList="scrollList"),void 0===t.list&&(t.list="navigationList"),void 0===t.navigationContainer&&(t.navigationContainer="navigationContainer"),void 0===t.startPage&&(t.startPage=0),t},NavigatorRenderer.prototype.initializeStartPage=function(){this.currentPage=this.data.startPage},NavigatorRenderer.prototype.createScrollList=function(){if(this._scrollList&&(this._scrollList.removeAllItems(),1<this.pagesCount))for(var t=0;t<this.pagesCount;t++)this._scrollList.addItem({})},NavigatorRenderer.prototype.updateItems=function(t){this.data.items=t,this._currentPage=null,this.createScrollList(),this.initializeStartPage()},NavigatorRenderer.prototype.onPrevButton=function(t){this.currentPage-=1},NavigatorRenderer.prototype.onNextButton=function(t){this.currentPage+=1},Object.defineProperty(NavigatorRenderer.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){if(t=Math.min(Math.max(0,t),this.pagesCount-1),this._currentPage!==t){if(this._scrollList&&null!==this._currentPage&&1<this.pagesCount&&(this._scrollList.children[this._currentPage].currentState="unselected"),this._currentPage=t,this._list){this._list.removeAllItems();for(var e=t*this.data.pageSize,n=e+this.data.pageSize<this.data.items.length?e+this.data.pageSize-1:this.data.items.length-1,i=e;i<=n;i++)this._list.addItem(this.data.items[i])}this._prevButton.visible=0<this._currentPage,this._nextButton.visible=this._currentPage<this.pagesCount-1,this._scrollList&&1<this.pagesCount&&(this._scrollList.children[t].currentState="selected"),this.dispatchEvent(new r.NavigatorRendererEvent(r.NavigatorRendererEvent.PAGE_CHANGED,this.currentPage))}},enumerable:!0,configurable:!0}),Object.defineProperty(NavigatorRenderer.prototype,"pagesCount",{get:function(){return 0===this.data.items.length?1:Math.ceil(this.data.items.length/this.data.pageSize)},enumerable:!0,configurable:!0}),NavigatorRenderer.prototype.getElements=function(t,e){this._list="string"==typeof t.list?e.getChildByName(t.list):t.list,this._navigationContainer="string"==typeof t.navigationContainer?e.getChildByName(t.navigationContainer):t.navigationContainer,this._prevButton="string"==typeof t.prevButton?this._navigationContainer.getChildByName(t.prevButton):t.prevButton,this._nextButton="string"==typeof t.nextButton?this._navigationContainer.getChildByName(t.nextButton):t.nextButton,this._scrollList="string"==typeof t.scrollList?this._navigationContainer.getChildByName(t.scrollList):t.scrollList},NavigatorRenderer.prototype.destroy=function(){this._prevButton.removeEventListener(n.POINTER_TAP,this.onPrevButton.bind(this)),this._nextButton.removeEventListener(n.POINTER_TAP,this.onNextButton.bind(this))},NavigatorRenderer}(uipixi.BaseEventTarget);e.NavigatorRenderer=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function BonusModelEvent(t,e){return n.call(this,t,e)||this}return a(BonusModelEvent,n),BonusModelEvent.STAGE_CHANGED="BonusModelEvent.STAGE_CHANGED",BonusModelEvent.PROGRESS_CHANGED="BonusModelEvent.PROGRESS_CHANGED",BonusModelEvent.MODEL_CHANGED="BonusModelEvent.MODEL_CHANGED",BonusModelEvent}(n.BaseDataEvent);e.BonusModelEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function QuestLineModelEvent(t,e){return n.call(this,t,e)||this}return o(QuestLineModelEvent,n),Object.defineProperty(QuestLineModelEvent.prototype,"questLine",{get:function(){return this.data},enumerable:!0,configurable:!0}),QuestLineModelEvent.TASK_CHANGED="taskChanged",QuestLineModelEvent.STATE_CHANGED="stateChanged",QuestLineModelEvent.TIMEOUT_CHANGED="timeoutChanged",QuestLineModelEvent.CURRENT_TASKS_COMPLETED_CHANGED="currentTasksCompletedChanged",QuestLineModelEvent.WAS_SHOWN_CHANGED="wasShownChanged",QuestLineModelEvent}(uipixi.BaseEvent);e.QuestLineModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.TravelPlaceType||(e.TravelPlaceType={}))[n.SEASON=1]="SEASON",n[n.FRIEND=2]="FRIEND"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function GeneratorEvent(t,e){return n.call(this,t,e)||this}return o(GeneratorEvent,n),Object.defineProperty(GeneratorEvent.prototype,"generator",{get:function(){return this.data},enumerable:!0,configurable:!0}),GeneratorEvent.CHANGED="changed",GeneratorEvent}(uipixi.BaseEvent);e.GeneratorEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.TaskState||(e.TaskState={}))[n.IN_PROGRESS=0]="IN_PROGRESS",n[n.COMPLETED=1]="COMPLETED"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function DecorShopModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(DecorShopModelEvent,t),DecorShopModelEvent.SELECTED="DecorShopModelEvent.SELECTED",DecorShopModelEvent.STATE_CHANGED="DecorShopModelEvent.STATE_CHANGED",DecorShopModelEvent}(uipixi.BaseEvent);e.DecorShopModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.ToggleButtonEvent,r=function(e){function SimpleToggleButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return a(SimpleToggleButtonMediator,e),SimpleToggleButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._toggleButton=t.displayObject,this.registerListener(this._toggleButton,i.SELECTED_CHANGED,this.onSelectChange.bind(this))},SimpleToggleButtonMediator.prototype.setSelect=function(t){this.unregisterListener(this._toggleButton,i.SELECTED_CHANGED,this.onSelectChange.bind(this)),this._toggleButton.select(t),this.registerListener(this._toggleButton,i.SELECTED_CHANGED,this.onSelectChange.bind(this))},SimpleToggleButtonMediator}(n.DisplayObjectMediator);e.SimpleToggleButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(17)],void 0===(r=function(t,e,n){"use strict";var i,r,o;Object.defineProperty(e,"__esModule",{value:!0}),(r=i=e.DataOperatorType||(e.DataOperatorType={}))[r.NONE=0]="NONE",r[r.SQRT=1]="SQRT",r[r.COUNT=2]="COUNT",r[r.AVG=3]="AVG",r[r.TIMESPENT=4]="TIMESPENT",r[r.TIME_LEFT=5]="TIME_LEFT",(o=e.DataOperators||(e.DataOperators={})).fromString=function fromString(t){switch(t.toLowerCase()){case"sqrt":return i.SQRT;case"count":return i.COUNT;case"avg":return i.AVG;case"timespent":return i.TIMESPENT;case"timeleft":return i.TIME_LEFT;default:return void n.Services.debug.addError("operator","undefined operator type",t)}},o.calculate=function calculate(t,e){switch(e){case i.NONE:return t;case i.SQRT:return"number"==typeof t?Math.sqrt(t):void 0;case i.COUNT:return Array.isArray(t)?t.length:void n.Services.debug.addError("operator","count","unexpected value type",typeof t);case i.AVG:return Array.isArray(t)?t.length?t.reduce(function(t,e){return t+e})/t.length:0:void n.Services.debug.addError("operator","count","unexpected value type",typeof t);case i.TIME_LEFT:return isNaN(t)?null:t-n.Services.date.currentTime;default:return void n.Services.debug.addError("operator","unexpected operator type",e)}}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function FriendListResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.friendList=[],t}return a(FriendListResponse,e),FriendListResponse}(n.PlatformResponse);e.FriendListResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SimpleResponse(){return null!==t&&t.apply(this,arguments)||this}return a(SimpleResponse,t),SimpleResponse.prototype.parse=function(t){return this.data=t,!0},SimpleResponse}(n.PlatformResponse);e.SimpleResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.SOCIAL_GROUP_STATUS||(e.SOCIAL_GROUP_STATUS={}))[i.UNDEFINED=0]="UNDEFINED",i[i.MEMBER=1]="MEMBER",i[i.REQUESTED=2]="REQUESTED",i[i.NON_MEMBER=3]="NON_MEMBER";var r=function(e){function GroupMemberResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.status=null,t}return a(GroupMemberResponse,e),GroupMemberResponse.prototype.parse=function(t){return!1},GroupMemberResponse}(n.PlatformResponse);e.GroupMemberResponse=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function UsersResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.users=[],t}return a(UsersResponse,e),UsersResponse}(n.PlatformResponse);e.UsersResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function NotificationResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.notified=[],t}return a(NotificationResponse,e),NotificationResponse.prototype.parse=function(t){},NotificationResponse}(n.PlatformResponse);e.NotificationResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,s=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=n=e.WallpostAttachmentType||(e.WallpostAttachmentType={}))[i.PHOTO=1]="PHOTO",i[i.LINK=2]="LINK",i[i.VIDEO=3]="VIDEO",i[i.AUDIO=4]="AUDIO",i[i.DOC=5]="DOC",i[i.PAGE=6]="PAGE",i[i.NOTE=7]="NOTE",i[i.ALBUM=8]="ALBUM",i[i.APP=9]="APP",i[i.TEXT=10]="TEXT";var r=function WallpostAttachment(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.type=t,this.data=e},o=function(e){function WallpostTextAttachment(t){return e.call(this,n.TEXT,{text:t})||this}return s(WallpostTextAttachment,e),WallpostTextAttachment}(e.WallpostAttachment=r);e.WallpostTextAttachment=o;var a=function(e){function WallpostPhotoAttachment(t){return e.call(this,n.PHOTO,{mediaId:t})||this}return s(WallpostPhotoAttachment,e),WallpostPhotoAttachment}(r);e.WallpostPhotoAttachment=a}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function InviteResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.invited=[],t}return a(InviteResponse,e),InviteResponse.prototype.parse=function(t){},InviteResponse}(n.PlatformResponse);e.InviteResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(183)],void 0===(r=function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.SocialRequestFBType||(e.SocialRequestFBType={})).API="api",i.UI="ui",i.LOGIN="login";var r=function(t){function SocialRequestFB(){return null!==t&&t.apply(this,arguments)||this}return a(SocialRequestFB,t),SocialRequestFB}(n.SocialRequest);e.SocialRequestFB=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function PushMessageEvent(t){var e=n.call(this,PushMessageEvent.TYPE_MESSAGE,t)||this;return e.outdated=!1,t.data&&(e.channelId=t.data.channelId),e}return o(PushMessageEvent,n),Object.defineProperty(PushMessageEvent.prototype,"response",{get:function(){return this.data},enumerable:!0,configurable:!0}),Object.defineProperty(PushMessageEvent.prototype,"messageType",{get:function(){return this.data.type},enumerable:!0,configurable:!0}),Object.defineProperty(PushMessageEvent.prototype,"time",{get:function(){return this.data.time},enumerable:!0,configurable:!0}),PushMessageEvent.TYPE_MESSAGE="PushMessageEvent.TYPE_MESSAGE",PushMessageEvent}(uipixi.BaseEvent);e.PushMessageEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function RequirementItemStaticData(){}return RequirementItemStaticData.parse=function(t){var e=new RequirementItemStaticData;return e._parse(t),e},Object.defineProperty(RequirementItemStaticData.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementItemStaticData.prototype,"logic",{get:function(){return this._logic},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementItemStaticData.prototype,"notValue",{get:function(){return this._notValue},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementItemStaticData.prototype,"minValue",{get:function(){return this._minValue},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementItemStaticData.prototype,"maxValue",{get:function(){return this._maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementItemStaticData.prototype,"ignoreAbsence",{get:function(){return this._ignoreAbsence},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementItemStaticData.prototype,"serverIgnore",{get:function(){return this._serverIgnore},enumerable:!0,configurable:!0}),RequirementItemStaticData.prototype._parse=function(t){this._data=jQuery(t).attr("data"),this._value=jQuery(t).attr("value"),this._logic=jQuery(t).attr("logic"),this._notValue=jQuery(t).attr("notValue"),this._minValue=jQuery(t).attr("minValue"),this._maxValue=jQuery(t).attr("maxValue"),this._ignoreAbsence=n.Utils.parseBool(jQuery(t).attr("ignoreAbsence")),this._serverIgnore=n.Utils.parseBool(jQuery(t).attr("serverIgnore"))},RequirementItemStaticData}();e.RequirementItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(329)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function PriceItemStaticData(){return null!==e&&e.apply(this,arguments)||this}return a(PriceItemStaticData,e),PriceItemStaticData.parse=function(t){var e=new PriceItemStaticData;return e._parse(t),e},PriceItemStaticData.prototype._parse=function(t){e.prototype._parse.call(this,t)},PriceItemStaticData}(n.BasePriceAwardTypeStaticData);e.PriceItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(e.WallpostErrorCode||(e.WallpostErrorCode={})).NotFound="WallpostErrorCode.notFound"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function SetExtraItemPromise(t){var e=n.call(this)||this;return e.extraItemId=t,e}return a(SetExtraItemPromise,n),SetExtraItemPromise}(n.BasePromise);e.SetExtraItemPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ViralSelectItemsEvent(t,e){var n=i.call(this,t,e)||this;return n.data=e,n}return o(ViralSelectItemsEvent,i),ViralSelectItemsEvent.ITEM_SELECTED_CHANGED="ViralSelectItemsEvent.ITEM_SELECTED_CHANGED",ViralSelectItemsEvent.ITEM_LOCK_CHANGED="ViralSelectItemsEvent.ITEM_LOCK_CHANGED",ViralSelectItemsEvent}(uipixi.BaseEvent);e.ViralSelectItemsEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(21),n(0),n(30),n(14)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(n){function CommonAnimatedAwardListItemMediator(){return null!==n&&n.apply(this,arguments)||this}return p(CommonAnimatedAwardListItemMediator,n),CommonAnimatedAwardListItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this._showData.award;e.type===s.AwardType.EXTRA_ITEM_WITH_BEAUTY&&(this._container.currentState="extraItem"),this._awardRenderer=(new i.AwardRenderer).initialize(e,this._container,{iconId:64,tooltip:r.TooltipAnchor.Top,fit:64}),this.setAnimation()},CommonAnimatedAwardListItemMediator.prototype.setAnimation=function(){this._animation=a.AnimationUtils.awardWindowItem(this._container,this._showData.index),this.registerListener(o.Application.view.ui.stage,c.POINTER_DOWN,this.onStageTap.bind(this))},CommonAnimatedAwardListItemMediator.prototype.onStageTap=function(){this.unregisterListener(o.Application.view.ui.stage,c.POINTER_DOWN,this.onStageTap.bind(this)),this._animation.stop(!0)},CommonAnimatedAwardListItemMediator.prototype.destroy=function(){this._animation.stop(),this._awardRenderer.destroy(),n.prototype.destroy.call(this)},CommonAnimatedAwardListItemMediator}(n.DisplayObjectContainerMediator);e.CommonAnimatedAwardListItemMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function DesignObjectDecorEvent(t,e){return n.call(this,t,e)||this}return o(DesignObjectDecorEvent,n),Object.defineProperty(DesignObjectDecorEvent.prototype,"decorModel",{get:function(){return this.data},enumerable:!0,configurable:!0}),DesignObjectDecorEvent.STATE_CHANGED="stateChanged",DesignObjectDecorEvent.PROGRESS_CHANGED="progressChanged",DesignObjectDecorEvent.OPTION_SELECTED="optionSelected",DesignObjectDecorEvent}(uipixi.BaseEvent);e.DesignObjectDecorEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function DesignObjectContainerEvent(t){return e.call(this,t)||this}return o(DesignObjectContainerEvent,e),DesignObjectContainerEvent.DESIGN_OBJECT_ADDED="designObjectAdded",DesignObjectContainerEvent.STAGE_UP_COMPLETED="stageUpCompleted",DesignObjectContainerEvent}(uipixi.BaseEvent);e.DesignObjectContainerEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(387),n(100),n(0)],void 0===(r=function(t,e,c,i,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(s){function ScreenToysModel(t,e){var n=s.call(this)||this;n._id=t,n._toys=[];var i=u.Application.static.data.toys.toy;if(e)for(var r=0,o=e.toys.items;r<o.length;r++){var a=o[r];n.addToyModel(new c.ScreenToyModel(i.getItem(parseInt(a.toyId)),a))}return n}return a(ScreenToysModel,s),Object.defineProperty(ScreenToysModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToysModel.prototype,"toys",{get:function(){return this._toys},enumerable:!0,configurable:!0}),ScreenToysModel.prototype.addToyModel=function(t){this._toys.push(t)},ScreenToysModel.prototype.addToy=function(t,e){var n=new c.ScreenToyModel(u.Application.static.data.toys.toy.getItem(parseInt(t)));return n.toyId=t,n.zIndex=this._toys.length,n.placeGestureEvent=e,this.addToyModel(n),this.dispatchEvent(new i.ScreenToysModelEvent(i.ScreenToysModelEvent.TOY_ADDED,n)),n},ScreenToysModel.prototype.popUpToy=function(t){var e=this._toys.indexOf(t);0<=e&&(this._toys.splice(e,1),this._toys.push(t),this.updateZIndexes()),this.dispatchEvent(new i.ScreenToysModelEvent(i.ScreenToysModelEvent.TOY_POP_UP,t))},ScreenToysModel.prototype.updateZIndexes=function(){for(var t=0;t<this._toys.length;t++){this._toys[t].zIndex=t}this.dispatchEvent(new i.ScreenToysModelEvent(i.ScreenToysModelEvent.Z_INDEX_CHANGED))},ScreenToysModel.prototype.removeToy=function(t){var e=this._toys.indexOf(t);0<=e&&(this._toys.splice(e,1),this.updateZIndexes()),this._selectedToy===t&&(this.selectedToy=null),this.dispatchEvent(new i.ScreenToysModelEvent(i.ScreenToysModelEvent.TOY_REMOVED,t))},Object.defineProperty(ScreenToysModel.prototype,"selectedToy",{get:function(){return this._selectedToy},set:function(t){this._selectedToy!==t&&(this._selectedToy=t,this.dispatchEvent(new i.ScreenToysModelEvent(i.ScreenToysModelEvent.TOY_SELECTED_CHANGED)))},enumerable:!0,configurable:!0}),ScreenToysModel.prototype.removeAll=function(){this._toys=[],this.dispatchEvent(new i.ScreenToysModelEvent(i.ScreenToysModelEvent.REMOVE_ALL))},ScreenToysModel.prototype.getToysCount=function(e){return this._toys.filter(function(t){return t.toyId===e}).length},ScreenToysModel.prototype.serialize=function(){for(var t=[],e=0,n=this._toys;e<n.length;e++){var i=n[e];t.push(i.serialize())}return t},ScreenToysModel.prototype.getViewResources=function(){return this._toys.map(function(t){return t.getViewResource()}).filter(function(t,e,n){return n.indexOf(t)===e})},ScreenToysModel}(uipixi.BaseEventTarget);e.ScreenToysModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function ViralExchangeModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(ViralExchangeModelEvent,t),ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED="ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED",ViralExchangeModelEvent.RESPONSE_ITEMS_COUNT_CHANGED="ViralExchangeModelEvent.RESPONSE_ITEMS_COUNT_CHANGED",ViralExchangeModelEvent.SENT_LIST_ITEMS_COUNT_CHANGED="ViralExchangeModelEvent.SENTLIST_ITEMS_COUNT_CHANGED",ViralExchangeModelEvent}(uipixi.BaseEvent);e.ViralExchangeModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function AchievementModelEvent(t){return e.call(this,t)||this}return a(AchievementModelEvent,e),AchievementModelEvent.STAGE_CHANGED="AchievementModelEvent.STAGE_CHANGED",AchievementModelEvent.MODEL_CHANGED="AchievementModelEvent.MODEL_CHANGED",AchievementModelEvent}(n.BaseDataEvent);e.AchievementModelEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),v=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},b=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(332),n(0),n(33),n(15),n(34),n(43),n(46)],void 0===(r=function(t,e,n,r,a,s,i,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,o,d,h,_=uipixi.GestureEvent,f=uipixi.ToggleButtonEvent;(o=l=e.AwardBonusType||(e.AwardBonusType={}))[o.NONE=1]="NONE",o[o.BEAUTY=2]="BEAUTY",o[o.OTHER=3]="OTHER",(h=d||(d={})).ONE_ROW="oneRow",h.TWO_ROWS="twoRows";var y=function(o){function AwardsWindowMediator(){return null!==o&&o.apply(this,arguments)||this}return m(AwardsWindowMediator,o),AwardsWindowMediator.prototype.initialize=function(t){o.prototype.initialize.call(this,t),this.viewHandle.onShown.capture(),void 0===this._showData.bonusType&&(this._showData.bonusType=l.NONE);var e=this.child("titleLabel"),n=this.child("descriptionLabel");this._showData.title&&(e.text=this._showData.title),this._showData.description&&(n.text=this._showData.description),this._wallpostCheckBox=this.child("wallpostCheckBox"),this._wallpostCheckBox.selected=!1,this._showData.wallpostId?a.Application.social.platformIs(s.PlatformType.OK)&&(this.setWallpostAward(),this.registerListener(this._wallpostCheckBox,f.SELECTED_CHANGED,this.onWallpostButton.bind(this))):this._wallpostCheckBox.visible=!1,this._awardsList=this.child("awardsList"),this.setAwards(),this._container.currentState=3<this._awardsList.items.length?d.TWO_ROWS:d.ONE_ROW;var i=this.child("continueButton");this.registerListener(i,_.POINTER_TAP,this.onTap.bind(this));var r={title:e,description:n,checkbox:this._wallpostCheckBox.visible?this._wallpostCheckBox:null,button:i,delay:100*this._awardsList.items.length};this._animationProcess=a.Application.animation.animate(null,AwardsWindowMediator.ANIMATION_NAME,r),this.registerListener(this._animationProcess,c.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this._showData.noSound||a.Application.sound.play(u.SoundName.POPUP_JINGLE,!1,p.SoundGroup.SOUND_GROUP_SOUND)},AwardsWindowMediator.prototype.setWallpostAward=function(){var t=a.Application.static.data.wallpostsAwards.wallpost.getItem(this._showData.wallpostId);if(this._wallpostAwardNormalContainer=this.child("wallpostAwardNormalContainer"),t&&a.Application.social.checkWallpostLimit(t)&&this.getAwardAvailable()){this._wallpostAwardNormalContainer.visible=!0,this._wallpostAwardNormalContainer.currentState="none";var e=a.Application.award.calculate(t.awards).awards[0];this._awardRendererNormal=new i.AwardRenderer,this._awardRendererNormal.initialize(e,this._wallpostAwardNormalContainer,{fit:!0,iconId:64})}},AwardsWindowMediator.prototype.getAwardAvailable=function(){return 0<a.Application.dynamic.user.wallposts.getItem(this._showData.wallpostId.toString()).available},AwardsWindowMediator.prototype.setAwards=function(){var t=this._showData.baseAward instanceof r.CalculatedAward?this._showData.baseAward.awards:[this._showData.baseAward],e=this._showData.bonusAward instanceof r.CalculatedAward?this._showData.bonusAward.awards:[this._showData.bonusAward];if(this._showData.baseAward&&0<t.length)for(var n=0;n<t.length;n++){var i=t[n];this._awardsList.addItem({awardItem:i,itemIndex:this._awardsList.items.length,isBonus:!1,bonusType:this._showData.bonusType})}if(this._showData.bonusAward&&0<e.length)for(n=0;n<e.length;n++){i=e[n];this._awardsList.addItem({awardItem:i,itemIndex:this._awardsList.items.length,isBonus:!0,bonusPercent:this._showData.bonusPercent,bonusType:this._showData.bonusType})}},AwardsWindowMediator.prototype.onWallpostButton=function(){return v(this,void 0,void 0,function(){return b(this,function(t){return this._wallpostAwardNormalContainer.currentState=this._wallpostCheckBox.selected?"selected":"none",[2]})})},AwardsWindowMediator.prototype.onTap=function(){return v(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return this._showData.wallpostId&&this._wallpostCheckBox.selected?[4,a.Application.social.post(this._showData.wallpostId)]:[3,2];case 1:if(t.sent(),this._cancellationToken.requested)return[2];t.label=2;case 2:return a.Application.view.hide(this.viewHandle),[2]}})})},AwardsWindowMediator.prototype.onAnimationComplete=function(){this.viewHandle.onShown.complete()},AwardsWindowMediator.prototype.destroy=function(){this._animationProcess.stop(),this._awardRendererNormal&&this._awardRendererNormal.destroy(),o.prototype.destroy.call(this)},AwardsWindowMediator.ANIMATION_NAME="awardWindow",AwardsWindowMediator}(n.DisplayObjectContainerMediator);e.AwardsWindowMediator=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SetParamAction(t,e){var n=i.call(this)||this;return n.controller="admin",n.action="setParam",n.input=new r.ActionInput({key:t,value:e}),n.output=new o,n}return a(SetParamAction,i),SetParamAction}(n.Action);e.SetParamAction=i;var o=function(){function SetParamActionOutput(){}return SetParamActionOutput.prototype.parse=function(t){},SetParamActionOutput}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function FromSeasonToFriendPromise(t){var e=n.call(this)||this;return e.friendItem=t,e}return a(FromSeasonToFriendPromise,n),FromSeasonToFriendPromise}(n.BasePromise);e.FromSeasonToFriendPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RouletteShowAwardWindowPromise(t){var e=n.call(this)||this;return e.rouletteModel=t,e}return a(RouletteShowAwardWindowPromise,n),RouletteShowAwardWindowPromise}(n.BasePromise);e.RouletteShowAwardWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function FromFriendToSeasonPromise(t){var e=n.call(this)||this;return e.data=t,e}return a(FromFriendToSeasonPromise,n),FromFriendToSeasonPromise}(n.BasePromise);e.FromFriendToSeasonPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function GoToSeasonData(t){this.seasonId=t,this.screenId=t};e.GoToSeasonData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function FriendsModelFlyViralEvent(t,e){var n=i.call(this,t,e)||this;return n._flyData=e,n}return o(FriendsModelFlyViralEvent,i),Object.defineProperty(FriendsModelFlyViralEvent.prototype,"flyData",{get:function(){return this._flyData},enumerable:!0,configurable:!0}),FriendsModelFlyViralEvent.SHOW_FLY_ACCEPT_VIRAL_ANIMATION="FriendsModelFlyViralEvent.SHOW_FLY_ACCEPT_VIRAL_ANIMATION",FriendsModelFlyViralEvent.SHOW_FLY_RESPONSE_VIRAL_ANIMATION="FriendsModelFlyViralEvent.SHOW_FLY_RESPONSE_VIRAL_ANIMATION",FriendsModelFlyViralEvent}(uipixi.BaseEvent);e.FriendsModelFlyViralEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function QuestTaskModelEvent(t,e){return n.call(this,t,e)||this}return o(QuestTaskModelEvent,n),QuestTaskModelEvent.CURRENT_COUNT_CHANGED="currentCountChanged",QuestTaskModelEvent.STATE_CHANGED="stateChanged",QuestTaskModelEvent}(uipixi.BaseEvent);e.QuestTaskModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(13),n(151)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n,s,c,u=function(n){function AchievementModel(t){var e=n.call(this)||this;return e._staticData=t,e.init(),e}return p(AchievementModel,n),AchievementModel.prototype.init=function(){this._dynamicData=i.Application.dynamic.user.achievements.getItem(this._staticData.id.toString()),this._dynamicData.addEventListener(r.BaseDataEvent.CHILDREN_CHANGED,this.onChildrenChanged.bind(this))},AchievementModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("1")&&this.dispatchEvent(new o.AchievementModelEvent(o.AchievementModelEvent.STAGE_CHANGED)),this.dispatchEvent(new o.AchievementModelEvent(o.AchievementModelEvent.MODEL_CHANGED))},Object.defineProperty(AchievementModel.prototype,"staticData",{get:function(){return this._staticData},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"dynamicData",{get:function(){return this._dynamicData},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"stage",{get:function(){return this._dynamicData.stage},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"stageCount",{get:function(){return this._staticData.stage.items.length},enumerable:!0,configurable:!0}),AchievementModel.prototype.isLastStage=function(){return this.stage===this.stageCount},AchievementModel.prototype.getSubSortWeight=function(){return this._staticData.sortId},AchievementModel.prototype.getSortWeight=function(){return this.isLastStage()?2:this.canGetAward()?0:1},Object.defineProperty(AchievementModel.prototype,"achievementStageStaticData",{get:function(){return this._staticData.stage.getItem(Math.max(1,Math.min(this.stage+1,this.stageCount)))},enumerable:!0,configurable:!0}),AchievementModel.prototype.canGetAward=function(){return this.progress>=this.achievementStageStaticData.task&&this.stage<this.stageCount},Object.defineProperty(AchievementModel.prototype,"progress",{get:function(){return this.isLastStage()?this._staticData.stage.getItem(this.stage).task:this._dynamicData.progress},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"title",{get:function(){return this._staticData.title},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"state",{get:function(){return this.canGetAward()?a.GET_AWARD:this.isLastStage()?a.DONE:a.DEFAULT},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"bgState",{get:function(){return this.canGetAward()?s.GET_AWARD:s.DEFAULT},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"starResource",{get:function(){return this._staticData.stage.getItem(Math.max(1,Math.min(this.stage,this.stageCount))).view.icon},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"awards",{get:function(){return this.achievementStageStaticData.awards},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementModel.prototype,"screen",{get:function(){return this._staticData.screen},enumerable:!0,configurable:!0}),AchievementModel}(uipixi.BaseEventTarget);e.AchievementModel=u,(n=a=e.AchieveState||(e.AchieveState={})).DEFAULT="default",n.GET_AWARD="getAward",n.DONE="done",(c=s=e.AchieveBackState||(e.AchieveBackState={})).DEFAULT="default",c.GET_AWARD="getAward"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function DecorShopItemModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(DecorShopItemModelEvent,t),DecorShopItemModelEvent.STATE_CHANGED="DecorShopItemModelEvent.STATE_CHANGED",DecorShopItemModelEvent.COUNT_CHANGED="DecorShopItemModelEvent.COUNT_CHANGED",DecorShopItemModelEvent}(uipixi.BaseEvent);e.DecorShopItemModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function WorkshopCollectionModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(WorkshopCollectionModelEvent,t),WorkshopCollectionModelEvent.CAN_COLLECT="WorkshopCollectionModelEvent.CAN_COLLECT",WorkshopCollectionModelEvent.COLLECTED_FIRST_TIME="WorkshopCollectionModelEvent.COLLECTED_FIRST_TIME",WorkshopCollectionModelEvent.CURRENCY_CHANGED="WorkshopCollectionModelEvent.CURRENCY_CHANGED",WorkshopCollectionModelEvent}(uipixi.BaseEvent);e.WorkshopCollectionModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function AchievementsModelEvent(t,e){return n.call(this,t,e)||this}return a(AchievementsModelEvent,n),AchievementsModelEvent.CURRENT_TAB_CHANGED="currentTabChanged",AchievementsModelEvent}(n.BaseDataEvent);e.AchievementsModelEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function FarmCellEvent(t,e){return n.call(this,t,e)||this}return o(FarmCellEvent,n),Object.defineProperty(FarmCellEvent.prototype,"cell",{get:function(){return this.data},enumerable:!0,configurable:!0}),FarmCellEvent.STATE_CHANGED="stateChanged",FarmCellEvent.PURCHASED="purchased",FarmCellEvent.CAN_BUY_CHANGED="canBuyChanged",FarmCellEvent}(uipixi.BaseEvent);e.FarmCellEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function FarmEvent(t,e){return n.call(this,t,e)||this}return o(FarmEvent,n),Object.defineProperty(FarmEvent.prototype,"farm",{get:function(){return this.data},enumerable:!0,configurable:!0}),FarmEvent.AUTOMATED_CHANGED="automatedChanged",FarmEvent.INACTIVE_CHANGED="inactiveChanged",FarmEvent.CAN_BUY_CELL_CHANGED="canBuyCellChanged",FarmEvent.HAS_COMPLETED_GENERATOR_CHANGED="hasCompletedGeneratorChanged",FarmEvent.CAN_UPGRADE_GENERATOR_CHANGED="canUpgradeGeneratorChanged",FarmEvent.FIELD_BLOCKED_CHANGED="fieldBlockedChanged",FarmEvent}(uipixi.BaseEvent);e.FarmEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function PromoBundleModelEvent(t,e){return n.call(this,t,e)||this}return o(PromoBundleModelEvent,n),Object.defineProperty(PromoBundleModelEvent.prototype,"model",{get:function(){return this.data},enumerable:!0,configurable:!0}),PromoBundleModelEvent.ACTIVATED="PromoBundleModelEvent.activated",PromoBundleModelEvent.DEACTIVATED="PromoBundleModelEvent.deactivated",PromoBundleModelEvent}(uipixi.BaseEvent);e.PromoBundleModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function EventNewYearPresentsModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(EventNewYearPresentsModelEvent,t),EventNewYearPresentsModelEvent.CHANGED="EventNewYearPresentsModelEvent.CHANGED",EventNewYearPresentsModelEvent}(uipixi.BaseEvent);e.EventNewYearPresentsModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function EventNewYearUseEnergyModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(EventNewYearUseEnergyModelEvent,t),EventNewYearUseEnergyModelEvent.LEVEL_UP="EventNewYearUseEnergyModelEvent.LEVEL_UP",EventNewYearUseEnergyModelEvent.EXP_CHANGED="EventNewYearUseEnergyModelEvent.EXP_CHANGED",EventNewYearUseEnergyModelEvent}(uipixi.BaseEvent);e.EventNewYearUseEnergyModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(263),n(0),n(41)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s,c=uipixi.ToggleButtonEvent;(s=a=e.EventNewYearWindowTabName||(e.EventNewYearWindowTabName={})).GIFTS="gifts",s.MAIL="mail",s.RATING="rating";var u=function(e){function EventNewYearWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return p(EventNewYearWindowMediator,e),EventNewYearWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setup()},EventNewYearWindowMediator.prototype.setup=function(){var t=this.child("buttons");if(this._giftsButton=t.getChildByName("giftsButton"),this._giftsMarker=this._giftsButton.getChildByName("markersContainer"),this._mailButton=t.getChildByName("mailButton"),this._mailMarker=this._mailButton.getChildByName("markersContainer"),this._ratingButton=t.getChildByName("ratingButton"),this._ratingMarker=this._ratingButton.getChildByName("markersContainer"),this.registerListener(this._giftsButton,c.SELECTED,this.onSelectedChange.bind(this)),this.registerListener(this._mailButton,c.SELECTED,this.onSelectedChange.bind(this)),this.registerListener(this._ratingButton,c.SELECTED,this.onSelectedChange.bind(this)),0===r.Application.model.eventNewYear.rating.items.length&&r.Application.model.eventNewYear.phase===o.EventNewYearPhase.EXTRA&&(this._ratingButton.visible=!1),this._containerGroup=this.child("containerGroup"),this._eventNewYearModel=r.Application.model.eventNewYear,this._eventNewYearModel.phase===o.EventNewYearPhase.EXTRA&&(this._giftsButton.getChildByName("iconImage").resource="eventNewYear/star_icon_70_x_70"),this.registerListener(this._eventNewYearModel.markersModel,i.EventNewYearMarkersModelEvent.CHANGED,this.updateMarkers.bind(this)),this.updateMarkers(),this._showData)switch(this._showData.tab){case a.MAIL:this._mailButton.select(!0);break;case a.RATING:this._ratingButton.select(!0)}},EventNewYearWindowMediator.prototype.updateMarkers=function(){this._giftsMarker.currentState="off",this._mailMarker.currentState="off",this._ratingMarker.currentState="off",this._eventNewYearModel.phase===o.EventNewYearPhase.GENERAL?(this._eventNewYearModel.markersModel.canGetAchievement?this._giftsMarker.currentState="done":this._eventNewYearModel.markersModel.canSendGift&&(this._giftsMarker.currentState="attention"),this._eventNewYearModel.markersModel.canReceiveGift&&(this._mailMarker.currentState="done")):(this._eventNewYearModel.markersModel.canGetAchievement?this._giftsMarker.currentState="done":this._eventNewYearModel.markersModel.canSpendStars&&(this._giftsMarker.currentState="attention"),this._eventNewYearModel.markersModel.canGetRatingAward&&(this._ratingMarker.currentState="done"),this._eventNewYearModel.markersModel.canOpenGift&&(this._mailMarker.currentState="attention"))},EventNewYearWindowMediator.prototype.onSelectedChange=function(t){this.turnStateByButtonName(t.data.name)},EventNewYearWindowMediator.prototype.turnStateByButtonName=function(t){switch(t){case"giftsButton":this._containerGroup.currentState="giftsTab";break;case"mailButton":this._containerGroup.currentState="mailTab";break;case"ratingButton":this._containerGroup.currentState="ratingTab"}},EventNewYearWindowMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(5)],void 0===(r=function(t,e,p){"use strict";var l,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=l||(l={}))[n.NOT_STARTED=0]="NOT_STARTED",n[n.ACTIVE=1]="ACTIVE",n[n.FINISHED=2]="FINISHED",n[n.STOPPED=3]="STOPPED";var i=function(){function ComponentsFactory(){ComponentsFactory.setInstance(this),this._log=function(t,e){return console.log(t,e)},this.components={},this.componentClassesDictionary={},this._initializationStatus=l.NOT_STARTED}return ComponentsFactory.setInstance=function(t){this._facade=t},Object.defineProperty(ComponentsFactory,"instance",{get:function(){return this._facade},enumerable:!0,configurable:!0}),ComponentsFactory.prototype.map=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];this.componentClassesDictionary[p.Utils.getNameFromClass(i)]=i}},ComponentsFactory.prototype.initializeComponents=function(c,u){return o(this,void 0,void 0,function(){var e,n,i,r,o,a,s=this;return d(this,function(t){switch(t.label){case 0:if(this._initializationStatus!==l.NOT_STARTED)return console.warn("Cant start initialize components."),[2];console.log("ComponentsFactory::initializeComponents"),this._initializationStatus=l.ACTIVE,this._componentsDescriptors=u,e=c.map(function(t){return s.createComponent(p.Utils.getNameFromClass(t))}),n=0,i=e,t.label=1;case 1:return n<i.length?(r=i[n],o=p.Utils.getNameFromInstance(r),a=this.getConfig(o),this._log&&this._log(o+".initialize:",a),r.config=a,[4,r.initialize(a)]):[3,4];case 2:if(t.sent(),this.components[o]=r,this._initializationStatus!==l.ACTIVE)return[3,4];t.label=3;case 3:return n++,[3,1];case 4:return this._initializationStatus=l.FINISHED,[2]}})})},ComponentsFactory.prototype.stopInitialization=function(){this._initializationStatus===l.ACTIVE&&(this._initializationStatus=l.STOPPED)},ComponentsFactory.prototype.getComponent=function(t){return this.components[t]},ComponentsFactory.prototype.getConfig=function(t){for(var e=0,n=this._componentsDescriptors;e<n.length;e++){var i=n[e];if(i.name===t)return i.config}return null},ComponentsFactory.prototype.createComponent=function(t){var e=this.componentClassesDictionary[t];if(!e)throw new Error("ComponentsFactory.createComponent: not found class for "+t);return new e},ComponentsFactory.prototype.setDebug=function(t){this._log=t},ComponentsFactory}();e.ComponentsFactory=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(172),n(66),n(273),n(528),n(529),n(530),n(531),n(532),n(533),n(537),n(538),n(539),n(540)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function ResourcesFactory(){}return ResourcesFactory.create=function(t){var e=p.ResourceDescriptorsFactory.create(t);return ResourcesFactory.createResource(e)},ResourcesFactory.createResource=function(t){switch(t.type){case i.ResourceType.XML:return new n.XMLResource(t);case i.ResourceType.IMAGE:return new r.ImageResource(t);case i.ResourceType.CURSOR:return new d.CursorResource(t);case i.ResourceType.JAVASCRIPT:return new o.JavascriptResource(t);case i.ResourceType.TEXT:return new a.TextResource(t);case i.ResourceType.SOUND:return new s.SoundResource(t);case i.ResourceType.FONT:return new c.FontResource(t);case i.ResourceType.SPINE:return new u.SpineResource(t);case i.ResourceType.SPRITESHEET:return new l.SpritesheetResource(t);case i.ResourceType.BITMAPFONT:return new h.BitmapFontResource(t);case i.ResourceType.DMG:return new _.DmgResource(t)}return null},ResourcesFactory}();e.ResourcesFactory=f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function XMLResource(t){return n.call(this,t)||this}return a(XMLResource,n),XMLResource.prototype.setRawData=function(t){var e=t;this._xmlString=e.xhr.responseText,n.prototype.setRawData.call(this,e.data),this._xmlDocument=e.data},Object.defineProperty(XMLResource.prototype,"xmlDocument",{get:function(){return this._xmlDocument},enumerable:!0,configurable:!0}),Object.defineProperty(XMLResource.prototype,"xmlString",{get:function(){return this._xmlString},enumerable:!0,configurable:!0}),XMLResource}(n.Resource);e.XMLResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ResourcesServiceEvent(t,e){return n.call(this,t,e)||this}return o(ResourcesServiceEvent,n),Object.defineProperty(ResourcesServiceEvent.prototype,"pack",{get:function(){return this.data},enumerable:!0,configurable:!0}),ResourcesServiceEvent.THEME_NOT_FOUND="ResourcesServiceEvent.THEME_CHANGED",ResourcesServiceEvent.THEME_CHANGED="ResourcesServiceEvent.THEME_CHANGED",ResourcesServiceEvent.LOADING_START="ResourcesServiceEvent.LOADING_START",ResourcesServiceEvent.LOADING_COMPLETE="ResourcesServiceEvent.LOADING_COMPLETE",ResourcesServiceEvent}(uipixi.BaseEvent);e.ResourcesServiceEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function ResourceLoader(){return null!==t&&t.apply(this,arguments)||this}return o(ResourceLoader,t),ResourceLoader}(uipixi.BaseEventTarget);e.ResourceLoader=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6),n(546)],void 0===(r=function(t,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ViewHandle(t,e){var n=i.call(this,t,e)||this;return n.onClose=new r.BasePromise,n.onShown=new o.ViewHandleOnShown(n),n}return a(ViewHandle,i),Object.defineProperty(ViewHandle.prototype,"viewContext",{get:function(){return this.context},enumerable:!0,configurable:!0}),ViewHandle}(uipixi.UIHandle);e.ViewHandle=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function NetworkRequestPromise(t){var e=n.call(this)||this;return e._request=t,e}return a(NetworkRequestPromise,n),Object.defineProperty(NetworkRequestPromise.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),NetworkRequestPromise}(n.BasePromise);e.NetworkRequestPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ServerErrorLevel||(e.ServerErrorLevel={}))[n.UNKNOWN=0]="UNKNOWN",n[n.NETWORK=1]="NETWORK",n[n.SERVER=2]="SERVER"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostResponse(){return null!==t&&t.apply(this,arguments)||this}return a(WallpostResponse,t),WallpostResponse}(n.PlatformResponse);e.WallpostResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SettingsResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.permissions=[],t}return a(SettingsResponse,e),SettingsResponse.prototype.parse=function(t){return!1},SettingsResponse}(n.PlatformResponse);e.SettingsResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function PhotoEntity(){};e.PhotoEntity=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UserResponse(){return null!==t&&t.apply(this,arguments)||this}return a(UserResponse,t),UserResponse}(n.PlatformResponse);e.UserResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(95),n(112)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function UserParser(){}return UserParser.parse=function(t){if("object"!=typeof t)return null;var e=new n.UserEntity;switch(t.sex){case UserParser.VK_SEX_KEY_FEMALE:e.gender="female";break;case UserParser.VK_SEX_KEY_MALE:e.gender="male";break;default:e.gender=null}return e.firstName=t.first_name,e.lastName=t.last_name,e.birthday=t.bdate,e.userId=String(t.id),t.photo_50?e.photo50=t.photo_50:e.photo50=t.photo_100,t.hasOwnProperty("city")&&t.city&&(e.city=t.city.id),t.hasOwnProperty("country")&&t.country&&(e.country=t.country.id),(t.photo_50||t.photo_100)&&e.pictures.push(new i.UserPictureItem(e.photo50,50,50,i.UserPictureType.SQUARE,"*")),e},UserParser.VK_SEX_KEY_FEMALE=1,UserParser.VK_SEX_KEY_MALE=2,UserParser}();e.UserParser=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SocialRequest(t){this.params={},this.method=t}return SocialRequest.prototype.getParams=function(){return this.params},SocialRequest.prototype.addParamsArray=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)this.params[n]=t[n]},SocialRequest.prototype.getParamsArray=function(){var e=this;return Object.keys(this.params).map(function(t){return e.params[t]})},SocialRequest.prototype.addParam=function(t,e){this.params[t]=e},SocialRequest.prototype.getParam=function(t,e){return void 0===e&&(e=null),this.params.hasOwnProperty(t)?this.params[t]:e},SocialRequest}();e.SocialRequest=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AdditionalInfoResponse(){return null!==t&&t.apply(this,arguments)||this}return a(AdditionalInfoResponse,t),AdditionalInfoResponse.prototype.parse=function(t){return!1},AdditionalInfoResponse}(n.PlatformResponse);e.AdditionalInfoResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function InvitableFriendsResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.users=[],t}return a(InvitableFriendsResponse,e),InvitableFriendsResponse.prototype.parse=function(t){return!1},InvitableFriendsResponse}(n.PlatformResponse);e.InvitableFriendsResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function BusinessIdsItem(){};e.BusinessIdsItem=i;var r=function(t){function BusinessListResponse(){return null!==t&&t.apply(this,arguments)||this}return a(BusinessListResponse,t),BusinessListResponse.prototype.parse=function(t){return!1},BusinessListResponse}(n.PlatformResponse);e.BusinessListResponse=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AppRequestInfoResponse(){return null!==t&&t.apply(this,arguments)||this}return a(AppRequestInfoResponse,t),AppRequestInfoResponse.prototype.parse=function(t){return!1},AppRequestInfoResponse}(n.PlatformResponse);e.AppRequestInfoResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SetCounterResponse(){return null!==t&&t.apply(this,arguments)||this}return a(SetCounterResponse,t),SetCounterResponse.prototype.parse=function(t){return 1===t},SetCounterResponse}(n.PlatformResponse);e.SetCounterResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(183)],void 0===(r=function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.SocialRequestOkType||(e.SocialRequestOkType={}))[i.CLIENT=1]="CLIENT",i[i.UI=2]="UI";var r=function(e){function SocialRequestOK(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return a(SocialRequestOK,e),SocialRequestOK}(n.SocialRequest);e.SocialRequestOK=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(95),n(112)],void 0===(r=function(t,e,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function UserParser(){}return UserParser.parse=function(t){if("object"!=typeof t)return null;var e=new u.UserEntity;if(e.firstName=t.first_name,e.lastName=t.last_name,e.birthday=t.birthday,e.userId=String(t.id),t.picture){var n=t.picture.data;if(n){var i=n.url,r=n.width,o=n.height;50===r&&(e.photo50=i),e.pictures.push(new p.UserPictureItem(i,r,o,p.UserPictureType.SQUARE,"*"))}}if(e.gender=t.gender in UserParser.genders?UserParser.genders[t.gender]:null,t.location){var a=t.location.location;if(a){var s=a.country;s&&(e.country=s);var c=a.city;c&&(e.city=c)}}return e},UserParser.genders={male:"male",female:"female"},UserParser}();e.UserParser=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ChannelType||(e.ChannelType={})).Personal="p",n.Clan="c";var i=function(){function Channel(t){if(!("name"in t))throw new Error("PushService: Channel construct failed. name not found!");if(!("type"in t))throw new Error("PushService: Channel construct failed. type is not found!");if(!("sign"in t))throw new Error("PushService: Channel construct failed. sign is not found!");this.name=t.name,this.type=t.type,this.sign=t.sign,this.id=this.getType()+"_"+this.getName(),this.lastMessageTime=0,this._authTime=void 0}return Channel.prototype.getDump=function(){return{name:this.getName(),type:this.getType(),sign:this.getSign(),time:this.getLastMessageTime()}},Channel.prototype.getId=function(){return this.id},Channel.prototype.getName=function(){return this.name},Channel.prototype.getType=function(){return this.type},Channel.prototype.getSign=function(){return this.sign},Channel.prototype.setLastMessageTime=function(t){t>this.lastMessageTime&&(this.lastMessageTime=t)},Channel.prototype.resetLastMessageTime=function(){this.lastMessageTime=0},Channel.prototype.getLastMessageTime=function(){return this.lastMessageTime},Object.defineProperty(Channel.prototype,"authTime",{get:function(){return this._authTime},set:function(t){this._authTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(Channel.prototype,"readyToReconnect",{get:function(){return this._readyToReconnect},set:function(t){this._readyToReconnect!==t&&(this._readyToReconnect=t)},enumerable:!0,configurable:!0}),Channel}();e.Channel=i}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Message(t,e){this.data=e,this.type=t}return Message.prototype.getType=function(){return this.type},Message.prototype.getData=function(){return this.data},Message.prototype.getDump=function(){return{type:this.getType(),data:this.getData()}},Message.prototype.asJSON=function(){return JSON.stringify(this.getDump())},Message}();e.Message=n}.apply(e,[n,e]))||(t.exports=i)},function(O,S,P){var E;!function(r,l){"use strict";var d="function",t="undefined",e="model",n="name",i="type",o="vendor",a="version",s="architecture",c="console",u="mobile",p="tablet",h="smarttv",_="wearable",f={extend:function(t,e){var n={};for(var i in t)e[i]&&e[i].length%2==0?n[i]=e[i].concat(t[i]):n[i]=t[i];return n},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:l},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},y={rgx:function(t,e){for(var n,i,r,o,a,s,c=0;c<e.length&&!a;){var u=e[c],p=e[c+1];for(n=i=0;n<u.length&&!a;)if(a=u[n++].exec(t))for(r=0;r<p.length;r++)s=a[++i],"object"==typeof(o=p[r])&&0<o.length?2==o.length?typeof o[1]==d?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?typeof o[1]!==d||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):l:this[o[0]]=s?o[1].call(this,s,o[2]):l:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):l):this[o]=s||l;c+=2}},str:function(t,e){for(var n in e)if("object"==typeof e[n]&&0<e[n].length){for(var i=0;i<e[n].length;i++)if(f.has(e[n][i],t))return"?"===n?l:n}else if(f.has(e[n],t))return"?"===n?l:n;return t}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,a],[/(opios)[\/\s]+([\w\.]+)/i],[[n,"Opera Mini"],a],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[n,a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],a],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[n,"Edge"],a],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],a],[/(puffin)\/([\w\.]+)/i],[[n,"Puffin"],a],[/(focus)\/([\w\.]+)/i],[[n,"Firefox Focus"],a],[/(opt)\/([\w\.]+)/i],[[n,"Opera Touch"],a],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[n,"UCBrowser"],a],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],a],[/(micromessenger)\/([\w\.]+)/i],[[n,"WeChat"],a],[/(brave)\/([\w\.]+)/i],[[n,"Brave"],a],[/(qqbrowserlite)\/([\w\.]+)/i],[n,a],[/(QQ)\/([\d\.]+)/i],[n,a],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[n,a],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[n,a],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[n,a],[/(MetaSr)[\/\s]?([\w\.]+)/i],[n],[/(LBBROWSER)/i],[n],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[a,[n,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[a,[n,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[n,a],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[a,[n,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[n,/(.+)/,"$1 WebView"],a],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[n,/(.+(?:g|us))(.+)/,"$1 $2"],a],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[a,[n,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[n,a],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],a],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],a],[/(coast)\/([\w\.]+)/i],[[n,"Opera Coast"],a],[/fxios\/([\w\.-]+)/i],[a,[n,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,n],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[n,"GSA"],a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[a,y.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[n,a],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,a]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[s,f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[e,o,[i,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[o,"Apple"],[i,p]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,e,[i,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[e,[o,"Amazon"],[i,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[e,y.str,m.device.amazon.model],[o,"Amazon"],[i,u]],[/android.+aft([bms])\sbuild/i],[e,[o,"Amazon"],[i,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,o,[i,u]],[/\((ip[honed|\s\w*]+);/i],[e,[o,"Apple"],[i,u]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,e,[i,u]],[/\(bb10;\s(\w+)/i],[e,[o,"BlackBerry"],[i,u]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[e,[o,"Asus"],[i,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[e,"Xperia Tablet"],[i,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[e,[o,"Sony"],[i,u]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,e,[i,c]],[/android.+;\s(shield)\sbuild/i],[e,[o,"Nvidia"],[i,c]],[/(playstation\s[34portablevi]+)/i],[e,[o,"Sony"],[i,c]],[/(sprint\s(\w+))/i],[[o,y.str,m.device.sprint.vendor],[e,y.str,m.device.sprint.model],[i,u]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,e,[i,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[o,[e,/_/g," "],[i,u]],[/(nexus\s9)/i],[e,[o,"HTC"],[i,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[e,[o,"Huawei"],[i,u]],[/(microsoft);\s(lumia[\s\w]+)/i],[o,e,[i,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[o,"Microsoft"],[i,c]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[o,"Microsoft"],[i,u]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[e,[o,"Motorola"],[i,u]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[o,"Motorola"],[i,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[o,f.trim],[e,f.trim],[i,h]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[o,"Samsung"],[i,h]],[/\(dtv[\);].+(aquos)/i],[e,[o,"Sharp"],[i,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],e,[i,p]],[/smart-tv.+(samsung)/i],[o,[i,h],e],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[o,"Samsung"],e,[i,u]],[/sie-(\w*)/i],[e,[o,"Siemens"],[i,u]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[o,"Nokia"],e,[i,u]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[e,[o,"Acer"],[i,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[e,[o,"LG"],[i,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],e,[i,p]],[/(lg) netcast\.tv/i],[o,e,[i,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[e,[o,"LG"],[i,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[o,"Lenovo"],[i,p]],[/linux;.+((jolla));/i],[o,e,[i,u]],[/((pebble))app\/[\d\.]+\s/i],[o,e,[i,_]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,e,[i,u]],[/crkey/i],[[e,"Chromecast"],[o,"Google"]],[/android.+;\s(glass)\s\d/i],[e,[o,"Google"],[i,_]],[/android.+;\s(pixel c)[\s)]/i],[e,[o,"Google"],[i,p]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[e,[o,"Google"],[i,u]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[o,"Xiaomi"],[i,u]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[o,"Xiaomi"],[i,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[e,[o,"Meizu"],[i,p]],[/(mz)-([\w-]{2,})/i],[[o,"Meizu"],e,[i,u]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[e,[o,"OnePlus"],[i,u]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[e,[o,"RCA"],[i,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[e,[o,"Dell"],[i,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[e,[o,"Verizon"],[i,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[o,"Barnes & Noble"],e,[i,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[e,[o,"NuVision"],[i,p]],[/android.+;\s(k88)\sbuild/i],[e,[o,"ZTE"],[i,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[e,[o,"Swiss"],[i,u]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[e,[o,"Swiss"],[i,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[e,[o,"Zeki"],[i,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[o,"Dragon Touch"],e,[i,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[e,[o,"Insignia"],[i,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[e,[o,"NextBook"],[i,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[o,"Voice"],e,[i,u]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[o,"LvTel"],e,[i,u]],[/android.+;\s(PH-1)\s/i],[e,[o,"Essential"],[i,u]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[e,[o,"Envizen"],[i,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[o,e,[i,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[e,[o,"MachSpeed"],[i,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[o,e,[i,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[e,[o,"Rotor"],[i,p]],[/android.+(KS(.+))\s+build/i],[e,[o,"Amazon"],[i,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[o,e,[i,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[i,f.lowerize],o,e],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[o,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[n,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,a],[/rv\:([\w\.]{1,9}).+(gecko)/i],[a,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[a,y.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[a,y.str,m.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[n,a],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[n,"Symbian"],a],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],a],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[n,a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],a],[/(sunos)\s?([\w\.\d]*)/i],[[n,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[n,a],[/(haiku)\s(\w+)/i],[n,a],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[a,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[n,a]]},b=function(t,e){if("object"==typeof t&&(e=t,t=l),!(this instanceof b))return new b(t,e).getResult();var n=t||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=e?f.extend(v,e):v;return this.getBrowser=function(){var t={name:l,version:l};return y.rgx.call(t,n,i.browser),t.major=f.major(t.version),t},this.getCPU=function(){var t={architecture:l};return y.rgx.call(t,n,i.cpu),t},this.getDevice=function(){var t={vendor:l,model:l,type:l};return y.rgx.call(t,n,i.device),t},this.getEngine=function(){var t={name:l,version:l};return y.rgx.call(t,n,i.engine),t},this.getOS=function(){var t={name:l,version:l};return y.rgx.call(t,n,i.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=t,this},this};b.VERSION="0.7.19",b.BROWSER={NAME:n,MAJOR:"major",VERSION:a},b.CPU={ARCHITECTURE:s},b.DEVICE={MODEL:e,VENDOR:o,TYPE:i,CONSOLE:c,MOBILE:u,SMARTTV:h,TABLET:p,WEARABLE:_,EMBEDDED:"embedded"},b.ENGINE={NAME:n,VERSION:a},b.OS={NAME:n,VERSION:a},typeof S!==t?(typeof O!==t&&O.exports&&(S=O.exports=b),S.UAParser=b):P(651)?(E=function(){return b}.call(S,P,S,O))===l||(O.exports=E):r&&(r.UAParser=b);var g=r&&(r.jQuery||r.Zepto);if(typeof g!==t&&!g.ua){var w=new b;g.ua=w.getResult(),g.ua.get=function(){return w.getUA()},g.ua.set=function(t){w.setUA(t);var e=w.getResult();for(var n in e)g.ua[n]=e[n]}}}("object"==typeof window?window:this)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a,s=uipixi.GestureEvent;(a=o=e.ErrorWindowButton||(e.ErrorWindowButton={})).NO_BUTTON="no_button",a.RELOAD="reload",a.CONTINUE="continue";var c=function(e){function ErrorWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return u(ErrorWindowMediator,e),ErrorWindowMediator.prototype.initialize=function(t){switch(e.prototype.initialize.call(this,t),this._container.currentState=this._showData.button,this._showData.button){case o.RELOAD:this.registerListener(this.child("reloadButton"),s.POINTER_TAP,this.onReload.bind(this));break;case o.CONTINUE:this.registerListener(this.child("continueButton"),s.POINTER_TAP,this.onContinue.bind(this))}this.child("titleLabel").text=i.Application.localization.localize(this._showData.title),this.child("textLabel").text=i.Application.localization.localize(this._showData.text)},ErrorWindowMediator.prototype.onContinue=function(){i.Application.view.hide(this.viewHandle)},ErrorWindowMediator.prototype.onReload=function(){i.Application.social?top.location.href=i.Application.social.platform.getAppUrl():top.location.href=r.ElkaCore.instance.initConfig.gameUrl},ErrorWindowMediator}(n.DisplayObjectContainerMediator);e.ErrorWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,b=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(316),n(720),n(17),n(5),n(721),n(722),n(723),n(725),n(728),n(729),n(730),n(732),n(733),n(735),n(738),n(740)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var v=function(t){function DynamicDataService(){return null!==t&&t.apply(this,arguments)||this}return b(DynamicDataService,t),DynamicDataService.prototype.initialize=function(t){this.assignParser(n.UserDynamicData),this.assignParser(s.FriendsDynamicData),this.assignParser(c.ChestsDynamicData),this.assignParser(p.PaymentDynamicData),this.assignParser(l.Payments2019DynamicData),this.assignParser(h.ToyXYDynamicData),this.assignParser(d.PromoDynamicData),this.assignParser(_.WorkshopDynamicData),this.assignParser(u.MailDynamicData),this.assignParser(f.ViralExchangeDynamicData),this.assignParser(m.ViralRefTokensDynamicData),this._guide=new y.GuideData,r.Services.dataProvider.registerProvider("user",new i.DynamicDataProvider(n.UserDynamicData))},Object.defineProperty(DynamicDataService.prototype,"weekend",{get:function(){return this._data.weekend},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"user",{get:function(){return this.getParsedData(n.UserDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"friends",{get:function(){return this.getParsedData(s.FriendsDynamicData).friends},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"chest",{get:function(){return this.getParsedData(c.ChestsDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"mail",{get:function(){return this.getParsedData(u.MailDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"payment",{get:function(){return this.getParsedData(p.PaymentDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"payments2019",{get:function(){return this.getParsedData(l.Payments2019DynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"promo",{get:function(){return this.getParsedData(d.PromoDynamicData)},enumerable:!0,configurable:!0}),DynamicDataService.prototype.parsedData=function(t){return this.getParsedData(t)},Object.defineProperty(DynamicDataService.prototype,"toyXY",{get:function(){return this.getParsedData(h.ToyXYDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"viralExchange",{get:function(){return this.getParsedData(f.ViralExchangeDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"viralRefTokens",{get:function(){return this.getParsedData(m.ViralRefTokensDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"guide",{get:function(){return this._guide},enumerable:!0,configurable:!0}),DynamicDataService.prototype.getValue=function(t,e){if(0<e.length)throw new Error("DynamicDataService: [getValue] unsupported filters");return o.Utils.getObjectByPath(this._data.user,t)},DynamicDataService.prototype.watch=function(t,e){},DynamicDataService.prototype.unwatch=function(t,e){},DynamicDataService.prototype.getDataForParsers=function(){return this._data},Object.defineProperty(DynamicDataService.prototype,"workshop",{get:function(){return this.getParsedData(_.WorkshopDynamicData)},enumerable:!0,configurable:!0}),Object.defineProperty(DynamicDataService.prototype,"idsForBusiness",{get:function(){return this._idsForBusiness},set:function(t){this._idsForBusiness=t},enumerable:!0,configurable:!0}),DynamicDataService.prototype.setData=function(t){r.Services.debug.addLogToConsoleCustom("%cGameInit","background: blue; color: white; padding:12px 100px;","\n",t),this._data=t,this.reparse()},DynamicDataService}(a.DataService);e.DynamicDataService=v}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ExtraItemDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ExtraItemDynamicItem,t),Object.defineProperty(ExtraItemDynamicItem.prototype,"extraItemId",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),ExtraItemDynamicItem}(n.BaseDynamicDataIdentifiable);e.ExtraItemDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ExtraItemsCollection(){return null!==t&&t.apply(this,arguments)||this}return a(ExtraItemsCollection,t),ExtraItemsCollection.prototype.hasItem=function(t){for(var e=0,n=this.items;e<n.length;e++){if(n[e].extraItemId===t)return!0}return!1},ExtraItemsCollection.prototype.addExtraItem=function(t){this.hasItem(t)||(this.addItem(this.getNextId(),t),this.dispatchChange())},ExtraItemsCollection.prototype.getNextId=function(){for(var t=0,e=0,n=this.items;e<n.length;e++){var i=n[e],r=parseInt(i.id);t<=r&&(t=r+1)}return t.toString()},ExtraItemsCollection}(n.ItemCollection);e.ExtraItemsCollection=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ActiveExtraItemDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ActiveExtraItemDynamicItem,t),Object.defineProperty(ActiveExtraItemDynamicItem.prototype,"extraItemId",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),ActiveExtraItemDynamicItem}(n.BaseDynamicDataIdentifiable);e.ActiveExtraItemDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(324)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ScreenToysDynamicData(t,e){var n=i.call(this,t,e)||this;return n._toys=new r.ItemCollection(o.ToyXYDynamicItem,null),n.assignChildPath("",n._toys),n.initChildren(n._data),n.replicateChange(n._toys),n}return a(ScreenToysDynamicData,i),Object.defineProperty(ScreenToysDynamicData.prototype,"toys",{get:function(){return this._toys},enumerable:!0,configurable:!0}),ScreenToysDynamicData}(n.BaseDynamicDataIdentifiable);e.ScreenToysDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BasePricesAwardsRequirementsTreeStaticData(){}return BasePricesAwardsRequirementsTreeStaticData.parse=function(t){var e=new BasePricesAwardsRequirementsTreeStaticData;return e._parse(t),e},Object.defineProperty(BasePricesAwardsRequirementsTreeStaticData.prototype,"ref",{get:function(){return this._ref},enumerable:!0,configurable:!0}),Object.defineProperty(BasePricesAwardsRequirementsTreeStaticData.prototype,"logic",{get:function(){return this._logic},enumerable:!0,configurable:!0}),BasePricesAwardsRequirementsTreeStaticData.prototype._parse=function(t){this._ref=jQuery(t).attr("ref"),this._logic=jQuery(t).attr("logic")||"and"},BasePricesAwardsRequirementsTreeStaticData}();e.BasePricesAwardsRequirementsTreeStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.Logic||(e.Logic={}))[n.AND=1]="AND",n[n.OR=2]="OR",(i=e.Logic||(e.Logic={})).fromString=function fromString(t){return null!=t&&"or"===t.toLowerCase()?i.OR:i.AND}}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(111)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function DateValueInfo(t){var e=n.call(this)||this;return e.seconds=t,e}return a(DateValueInfo,n),DateValueInfo}(n.ValueInfo);e.DateValueInfo=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(142)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function NamedPriceStaticData(){return null!==e&&e.apply(this,arguments)||this}return a(NamedPriceStaticData,e),NamedPriceStaticData.parse=function(t){var e=new NamedPriceStaticData;return e._parse(t),e},Object.defineProperty(NamedPriceStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(NamedPriceStaticData.prototype,"id",{get:function(){return this._name},enumerable:!0,configurable:!0}),NamedPriceStaticData.prototype._parse=function(t){e.prototype._parse.call(this,t),this._name=jQuery(t).attr("name")},NamedPriceStaticData}(n.PriceItemStaticData);e.NamedPriceStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function PriceServiceEvent(t,e){return n.call(this,t,e)||this}return o(PriceServiceEvent,n),Object.defineProperty(PriceServiceEvent.prototype,"holdPrice",{get:function(){return this.data},enumerable:!0,configurable:!0}),PriceServiceEvent.HOLD_NOT_ENOUGH="PriceServiceEvent.HOLD_NOT_ENOUGH",PriceServiceEvent.FIX_PRICE_CHANGED="PriceServiceEvent.FIX_PRICE_CHANGED",PriceServiceEvent}(uipixi.BaseEvent);e.PriceServiceEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,c=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(4),n(748),n(8),n(2)],void 0===(r=function(t,e,r,i,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WallpostProcessor(){}return WallpostProcessor.prototype.getStaticItem=function(t){return r.Application.static.data.wallposts.wallpost.getItem(t)},WallpostProcessor.prototype.processText=function(t,e){if(!e||void 0===e.gender){var n=r.Application.profiles.getProfile(i.ElkaCore.instance.config.userIdPlatform,!1);e=c({gender:n.isMale},e)}return r.Application.localization.localize(t,e)},WallpostProcessor.prototype.getAward=function(i){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return[4,r.Application.server.send(new o.WallpostAwardAction(i))];case 1:return e=t.sent(),n=r.Application.award.convertObjectToCalculated(e.output.award),[4,r.Application.view.show(s.GUINames.AWARDS_WINDOW,new a.ViewContext({baseAward:n,title:" ",description:" "})).onClose];case 2:return t.sent(),r.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},WallpostProcessor}();e.WallpostProcessor=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function WallpostResult(t,e){this.success=t,this.errorCode=e};e.WallpostResult=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function SettingsEvent(t,e,n){return i.call(this,t,e,n)||this}return o(SettingsEvent,i),SettingsEvent.SOUND_ON_CHANGED="SettingsEvent.SOUND_ON_CHANGED",SettingsEvent.MUSIC_ON_CHANGED="SettingsEvent.MUSIC_ON_CHANGED",SettingsEvent.ANIMATIONS_ON_CHANGED="SettingsEvent.ANIMATIONS_ON_CHANGED",SettingsEvent.SNOW_ON_CHANGED="SettingsEvent.SNOW_ON_CHANGED",SettingsEvent}(uipixi.BaseEvent);e.SettingsEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SetClientParamPromise(t,e){var n=i.call(this)||this;return n.id=t,n.value=e,n}return a(SetClientParamPromise,i),SetClientParamPromise}(n.BasePromise);e.SetClientParamPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.BuyPromoError||(e.BuyPromoError={}))[n.Default=0]="Default",n[n.NotEnoughPrice=1]="NotEnoughPrice",n[n.Cancel=2]="Cancel",n[n.Error=3]="Error"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.PreorderError||(e.PreorderError={}))[i.Unknown=0]="Unknown",i[i.UserCancel=1]="UserCancel",i[i.Fail=2]="Fail";var r=function(a){function PreorderPromise(t,e,n,i,r){var o=a.call(this)||this;return o.promoId=t,o.offerId=e,o.type=n,o.realPriceValue=i,o.title=r,o}return s(PreorderPromise,a),PreorderPromise}(n.BasePromise);e.PreorderPromise=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function UpdateAsyncPaymentPromise(t){var e=n.call(this)||this;return e.payment=t,e}return a(UpdateAsyncPaymentPromise,n),UpdateAsyncPaymentPromise}(n.BasePromise);e.UpdateAsyncPaymentPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ObjectStageUpPromise(t){var e=n.call(this)||this;return e.object=t,e}return a(ObjectStageUpPromise,n),ObjectStageUpPromise}(n.BasePromise);e.ObjectStageUpPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ObjectsModelEvent(t,e){return n.call(this,t,e)||this}return o(ObjectsModelEvent,n),Object.defineProperty(ObjectsModelEvent.prototype,"object",{get:function(){return this.data},enumerable:!0,configurable:!0}),ObjectsModelEvent.USE_ENERGY_TURBO_SPEED_CHANGED="ObjectsModelEvent.USE_ENERGY_TURBO_SPEED_CHANGED",ObjectsModelEvent.STAGE_UP_COMPLETED="ObjectsModelEvent.STAGE_UP_COMPLETED",ObjectsModelEvent}(uipixi.BaseEvent);e.ObjectsModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function UseEnergyViewModelEvent(t){return e.call(this,t)||this}return o(UseEnergyViewModelEvent,e),UseEnergyViewModelEvent.STARTED="UseEnergyViewModelEvent.STARTED",UseEnergyViewModelEvent.STOPPED="UseEnergyViewModelEvent.STOPPED",UseEnergyViewModelEvent.REQUEST_UPGRADE="UseEnergyViewModelEvent.REQUEST_UPGRADE",UseEnergyViewModelEvent}(uipixi.BaseEvent);e.UseEnergyViewModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(a){function FriendObjectModel(t,e,n,i){var r=a.call(this)||this;r.id=t;var o=e.stage.items.reduce(function(t,e){return Math.max(t,e.id)},1);return r.stage=Math.min(n,o),r.staticData=e,r.skin=i,r}return o(FriendObjectModel,a),Object.defineProperty(FriendObjectModel.prototype,"hasSkin",{get:function(){return this.staticData.hasSkins},enumerable:!0,configurable:!0}),FriendObjectModel}(uipixi.BaseEventTarget);e.FriendObjectModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(4)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function IsWebGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsWebGuard,t),IsWebGuard.prototype.approve=function(){return!i.ElkaCore.instance.config.mobile},IsWebGuard}(n.Guard);e.IsWebGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function AnimalModelEvent(t,e){return void 0===e&&(e=null),n.call(this,t,e)||this}return o(AnimalModelEvent,n),AnimalModelEvent.PLAY_ACTION_ANIMATIONS="AnimalModelEvent.PLAY_ACTION_ANIMATIONS",AnimalModelEvent.PLAY_HAPPY_ANIMATIONS="AnimalModelEvent.PLAY_HAPPY_ANIMATIONS",AnimalModelEvent.ON_ACTION_OCCURRED="AnimalModelEvent.ON_ACTION_OCCURRED",AnimalModelEvent}(uipixi.BaseEvent);e.AnimalModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function AnimalStageUpPromise(t){var e=n.call(this)||this;return e.animal=t,e}return a(AnimalStageUpPromise,n),AnimalStageUpPromise}(n.BasePromise);e.AnimalStageUpPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function DesignObjectOptionEvent(t,e){return n.call(this,t,e)||this}return o(DesignObjectOptionEvent,n),Object.defineProperty(DesignObjectOptionEvent.prototype,"option",{get:function(){return this.data},enumerable:!0,configurable:!0}),DesignObjectOptionEvent.SELECTED="selected",DesignObjectOptionEvent}(uipixi.BaseEvent);e.DesignObjectOptionEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function DesignObjectTimeoutEvent(){return null!==t&&t.apply(this,arguments)||this}return o(DesignObjectTimeoutEvent,t),DesignObjectTimeoutEvent.TIMEOUT_CHANGED="timeoutChanged",DesignObjectTimeoutEvent.RUNNING_CHANGED="runningChanged",DesignObjectTimeoutEvent}(uipixi.BaseEvent);e.DesignObjectTimeoutEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function NavigatorRendererEvent(t,e){return n.call(this,t,e)||this}return a(NavigatorRendererEvent,n),NavigatorRendererEvent.PAGE_CHANGED="NavigatorRendererEvent.PAGE_CHANGED",NavigatorRendererEvent}(n.BaseDataEvent);e.NavigatorRendererEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function ToyModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(ToyModelEvent,t),ToyModelEvent.COUNT_CHANGED="ToyModelEvent.COUNT_CHANGED",ToyModelEvent}(uipixi.BaseEvent);e.ToyModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function DecorShopsModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(DecorShopsModelEvent,t),DecorShopsModelEvent.STATE_CHANGED="DecorShopsModelEvent.STATE_CHANGED",DecorShopsModelEvent}(uipixi.BaseEvent);e.DecorShopsModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ViralExchangeItemModelEvent(t,e){var n=i.call(this,t)||this;return n._itemModel=e,n}return o(ViralExchangeItemModelEvent,i),Object.defineProperty(ViralExchangeItemModelEvent.prototype,"itemModel",{get:function(){return this._itemModel},enumerable:!0,configurable:!0}),ViralExchangeItemModelEvent.INBOX_ITEM_WILL_BE_DELETED="ViralExchangeItemModelEvent.INBOX_ITEM_WILL_BE_DELETED",ViralExchangeItemModelEvent}(uipixi.BaseEvent);e.ViralExchangeItemModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(957),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function IconsViewTypeStaticData(){}return IconsViewTypeStaticData.parse=function(t){var e=new IconsViewTypeStaticData;return e._parse(t),e},Object.defineProperty(IconsViewTypeStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),IconsViewTypeStaticData.prototype._parse=function(t){this._icon=i.StaticDataCollection.parse(n.IconItemViewTypeStaticData,t,"> icon ")},IconsViewTypeStaticData}();e.IconsViewTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.QuestLineState||(e.QuestLineState={})).IN_PROGRESS="inProgress",n.COMPLETED="completed",n.AWAITING="awaiting"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ShowShopPromise(t,e){var n=i.call(this)||this;return n.resourceId=t,n.notEnough=e,n}return a(ShowShopPromise,i),ShowShopPromise}(n.BasePromise);e.ShowShopPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,b=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(40),n(0),n(4),n(154),n(2),n(8),n(158),n(21),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d,h,_=uipixi.GestureEvent,f=uipixi.UIFactory,y=uipixi.UIImage,m=uipixi.Point;(h=d=e.ViralListItemType||(e.ViralListItemType={}))[h.request=0]="request",h[h.response=1]="response";var v=function(n){function FriendWindowListItemMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._animations=[],t}return b(FriendWindowListItemMediator,n),FriendWindowListItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._itemData=this._showData,this._friendsModel=this._mapData,this._selfButton=this.child("selfButton"),this._resourceContainer=this.child("resourceContainer"),this._levelLabel=this.child("levelLabel"),this._levelLabel.text=this._itemData.friendDynamicData.level.toString(),this._profile=r.Application.profiles.getProfile(this._itemData.friendDynamicData.sUserId,!0),this._profileRenderer=new i.ProfileRenderer,this._profileRenderer.initialize(this._profile,this._container),this.registerListener(this._selfButton,_.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._friendsModel,u.FriendsModelFlyViralEvent.SHOW_FLY_RESPONSE_VIRAL_ANIMATION,this.onStartResponseAnimation.bind(this)),this.addRequestItems(),this.addInboxItems(),o.ElkaCore.instance.config.mobile||this.setupTooltip(),this.setupFrame()},FriendWindowListItemMediator.prototype.setupFrame=function(){var t=this.child("frame"),e=r.Application.model.ratings.getBestPlace(this._itemData.friendDynamicData.sUserId),n=r.Application.model.ratings.getFrameResource(100,e);this._frameLoadableImage=new l.LoadableImage(t,n)},FriendWindowListItemMediator.prototype.setupTooltip=function(){var t=this._profile.firstName+" "+this._profile.lastName;t=t.trim(),r.Application.tooltip.addTooltip(this._selfButton,p.TooltipAnchor.Top,s.GUINames.TEXT_TOOLTIP,{text:t})},FriendWindowListItemMediator.prototype.onStartResponseAnimation=function(t){if(t.flyData.sUserId===this._itemData.friendDynamicData.sUserId){var e=new y(r.Application.model.resources.get(t.flyData.resourceId).static.view.icons.icon.getItem("64").resourceId);e.anchor="topLeft",e.render.pivot.set(e.width/2,e.height/2);var n=this._resourceContainer.getGlobalPosition().add(new m(this._resourceContainer.width/2,this._resourceContainer.height/2)),i=r.Application.animation.animate(e,"flyResponseViralResource",{startX:t.flyData.startPoint.x,startY:t.flyData.startPoint.y,finalX:n.x,finalY:n.y,delay:100});this._animations.push(i)}},FriendWindowListItemMediator.prototype.addInboxItems=function(){for(var t=0,e=this._itemData.friendViralModel.getResponses(r.Application.viralExchange.getAvailableToAcceptResourceTypes());t<e.length;t++){var n=e[t],i=f.instance.createUIElementByName("friendGetResourceItem");r.Application.view.addChild(this._resourceContainer,i,new c.ViewContext({type:d.response,model:n}))}},FriendWindowListItemMediator.prototype.addRequestItems=function(){for(var t=0,e=this._itemData.friendViralModel.getRequests();t<e.length;t++){var n=e[t],i=f.instance.createUIElementByName("friendSendResourceItem");r.Application.view.addChild(this._resourceContainer,i,new c.ViewContext({type:d.request,model:n}))}},FriendWindowListItemMediator.prototype.onTap=function(){this._itemData.friendDynamicData.userId!==r.Application.model.user.userId&&o.ElkaCore.instance.promiseManager.ask(new a.FromSeasonToFriendPromise(this._itemData.friendDynamicData)),r.Application.view.hideByWindowName(s.GUINames.FRIENDS_WINDOW)},FriendWindowListItemMediator.prototype.destroy=function(){this._frameLoadableImage&&this._frameLoadableImage.destroy();for(var t=0,e=this._animations;t<e.length;t++){e[t].stop()}this._profileRenderer.destroy(),n.prototype.destroy.call(this)},FriendWindowListItemMediator}(n.DisplayObjectContainerMediator);e.FriendWindowListItemMediator=v}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function FromFriendToFriendPromise(t){var e=n.call(this)||this;return e.friendItem=t,e}return a(FromFriendToFriendPromise,n),FromFriendToFriendPromise}(n.BasePromise);e.FromFriendToFriendPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function FriendItemDataEvent(t,e){var n=i.call(this,t)||this;return n.selected=e,n}return o(FriendItemDataEvent,i),FriendItemDataEvent.ITEM_SELECTED_CHANGED="FriendItemDataEvent.ITEM_SELECTED_CHANGED",FriendItemDataEvent}(uipixi.BaseEvent);e.FriendItemDataEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PreloadOpenChestWindowPromise(){return t.call(this)||this}return a(PreloadOpenChestWindowPromise,t),PreloadOpenChestWindowPromise}(n.BasePromise);e.PreloadOpenChestWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function VisitFriendPromise(t,e,n,i){var r=o.call(this)||this;return r.screenId=t,r.friendItem=e,r.friendData=n,r.isGuest=i,r}return a(VisitFriendPromise,o),VisitFriendPromise}(n.BasePromise);e.VisitFriendPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function GetFriendDataPromise(t,e){var n=i.call(this)||this;return n.socialId=t,n.screen=e,n}return a(GetFriendDataPromise,i),GetFriendDataPromise}(n.BasePromise);e.GetFriendDataPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function LeaveFriendPromise(){return t.call(this)||this}return a(LeaveFriendPromise,t),LeaveFriendPromise}(n.BasePromise);e.LeaveFriendPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function OpenBoxPromise(t,e){var n=i.call(this)||this;return n.boxModel=t,n.viewHandle=e,n}return a(OpenBoxPromise,i),OpenBoxPromise}(n.BasePromise);e.OpenBoxPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function GeneratorsExchangePromise(t){var e=n.call(this)||this;return e.name=t,e}return a(GeneratorsExchangePromise,n),GeneratorsExchangePromise}(n.BasePromise);e.GeneratorsExchangePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function BeautyModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(BeautyModelEvent,t),BeautyModelEvent.CHANGED="BeautyModelEvent.CHANGED",BeautyModelEvent.STAGE_UP="BeautyModelEvent.STAGE_UP",BeautyModelEvent.PROGRESS="BeautyModelEvent.PROGRESS",BeautyModelEvent}(uipixi.BaseEvent);e.BeautyModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function ShopsModelEvent(t){return e.call(this,t)||this}return a(ShopsModelEvent,e),ShopsModelEvent.CURRENT_SHOP_CHANGED="currentShopChanged",ShopsModelEvent}(n.BaseDataEvent);e.ShopsModelEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function QuestFinishPromise(t,e){var n=i.call(this)||this;return n.questLineId=t,n.questId=e,n}return a(QuestFinishPromise,i),QuestFinishPromise}(n.BasePromise);e.QuestFinishPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1374)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=uipixi.BaseEventTarget;(n=e.BonusType||(e.BonusType={}))[n.QUEST=1]="QUEST";var o=function(n){function BonusesModel(t){var e=n.call(this)||this;return e._bonusesStaticData=t,e.init(),e}return a(BonusesModel,n),BonusesModel.prototype.init=function(){var e=this;this._bonuses=new core.Map,this._bonusesStaticData.forEach(function(t){return e.addBonus(t)})},BonusesModel.prototype.addBonus=function(t){var e=new i.BonusModel(t);this._bonuses.set(t.id,e)},BonusesModel.prototype.canGetAward=function(){var e=!1;return this._bonuses.forEach(function(t){e=e||t.canGetAward()}),e},Object.defineProperty(BonusesModel.prototype,"bonuses",{get:function(){var e=[];return this._bonuses.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),BonusesModel.prototype.getBonus=function(t){return this._bonuses.get(t)},BonusesModel.prototype.getCurrentBonus=function(t){return this._bonuses.get(t).currentBonus},BonusesModel}(r);e.BonusesModel=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.PendingAwardType||(e.PendingAwardType={})).ADMIN="adminAward",n.ROULETTE="roulette",n.VIRAL="viralRef",n.BONUS_LINK="bonusLink",n.HAPPY_NEW_YEAR="happyNewYear",n.VK_NEW_YEAR_GIFT_PROMO="vkNewYearGiftPromo"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function DecorWindowBasePromise(t){var e=n.call(this)||this;return e._itemModel=t,e}return a(DecorWindowBasePromise,n),Object.defineProperty(DecorWindowBasePromise.prototype,"itemModel",{get:function(){return this._itemModel},enumerable:!0,configurable:!0}),DecorWindowBasePromise}(n.BasePromise);e.DecorWindowBasePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(105),n(0),n(33),n(1398),n(65),n(82)],void 0===(r=function(t,e,n,c,i,u,r,o){"use strict";var a,s;Object.defineProperty(e,"__esModule",{value:!0}),(s=a=e.AlphabetToyType||(e.AlphabetToyType={})).EN="en",s.RU="ru",s.SIGN="sign",s.NUM="num";var p=function(t){function DecorShopAlphabetModel(){return t.call(this,o.DecorShopType.ALPHABET)||this}return l(DecorShopAlphabetModel,t),DecorShopAlphabetModel.prototype.init=function(){this._inboxModel=c.Application.mail.getInbox(DecorShopAlphabetModel.DECOR_INBOX_ID),this._priorityTypes=c.Application.social.platformType===i.PlatformType.FB?[a.EN,a.NUM,a.SIGN,a.RU]:[a.RU,a.NUM,a.SIGN,a.EN],t.prototype.init.call(this)},DecorShopAlphabetModel.prototype.createItems=function(){for(var a=this,s=c.Application.dynamic.user.screen,t=function(o){c.Application.static.data.clientShopsConfig.alphabetShop.forEach(function(t){if(t.screenId===s&&t.type===o)for(var e=c.Application.static.data.promos.promo.getItem(t.promoId),n=0,i=e.offers.items;n<i.length;n++){var r=i[n];a._items.push(new u.DecorShopItemAlphabetModel(e.id,r,o,a._inboxModel))}})},e=0,n=this._priorityTypes;e<n.length;e++){t(n[e])}},DecorShopAlphabetModel.prototype.sortItems=function(){var c=this,u=[r.DecorShopItemState.TAKE];this._items.sort(function(t,e){for(var n=0,i=u;n<i.length;n++){var r=i[n];if(t.state===r&&e.state!==r)return-1;if(t.state!==r&&e.state===r)return 1}for(var o=0,a=c._priorityTypes;o<a.length;o++){var s=a[o];if(t.toyType===s&&e.toyType!==s)return-1;if(t.toyType!==s&&e.toyType===s)return 1;if(t.toyType===s&&e.toyType===s)return t.toyModel.static.id-e.toyModel.static.id}})},DecorShopAlphabetModel.DECOR_INBOX_ID=1,DecorShopAlphabetModel}(n.DecorShopModel);e.DecorShopAlphabetModel=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(162),n(246),n(106)],void 0===(r=function(t,e,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s,c=uipixi.BaseEventTarget,u=uipixi.BaseEvent;(s=n=e.WorkshopMarkersContainerState||(e.WorkshopMarkersContainerState={})).OFF="off",s.DONE="done",s.ATTENTION="attention";var p=function(e){function WorkshopMarkersModel(){var t=e.call(this)||this;return t._isWaitUsing=!1,t}return l(WorkshopMarkersModel,e),WorkshopMarkersModel.prototype.initialize=function(){this._workshop=i.Application.model.workshops.getCurrentWorkshop(),this._requirements=i.Application.static.data.client.minLevelParams.minLevelParam.getItem("workshop").requirements,i.Application.requirements.check(this._requirements)?this.addMarkers():(this._isWaitUsing=!0,i.Application.requirements.wait(this._requirements,this.addMarkers.bind(this)))},WorkshopMarkersModel.prototype.addMarkers=function(){this._isWaitUsing&&(i.Application.requirements.unwait(this._requirements,this.addMarkers.bind(this)),this._isWaitUsing=!1),this._workshop.slot.addEventListener(o.WorkshopSlotModelEvent.CHANGED,this.updateMarker.bind(this)),this._workshop.addEventListener(a.WorkshopModelEvent.UPDATE_FINAL_AWARD_STATE,this.updateMarker.bind(this));for(var t=0,e=this._workshop.collections;t<e.length;t++){var n=e[t];n.addEventListener(r.WorkshopCollectionModelEvent.CAN_COLLECT,this.updateMarker.bind(this)),n.addEventListener(r.WorkshopCollectionModelEvent.COLLECTED_FIRST_TIME,this.updateMarker.bind(this)),n.addEventListener(r.WorkshopCollectionModelEvent.CURRENCY_CHANGED,this.updateMarker.bind(this))}this.updateMarker()},WorkshopMarkersModel.prototype.updateMarker=function(){this.dispatchEvent(new u(WorkshopMarkersModel.UPDATE_MARKER_EVENT))},WorkshopMarkersModel.prototype.getMarkerType=function(){if(!this._isWaitUsing){if("accept"===this._workshop.slot.state||this._workshop.collections.some(function(t){return t.canCollect}))return n.DONE;if(this._workshop.canGetFinalAward||"doRequest"===this._workshop.slot.state||this._workshop.collections.some(function(t){return!t.collected&&t.available&&t.canBuy}))return n.ATTENTION}return n.OFF},WorkshopMarkersModel.prototype.getMarkerTypeForCollection=function(e){if(i.Application.requirements.check(this._requirements)){if(this._workshop.collections.some(function(t){return t.id===e&&t.canCollect}))return n.DONE;if(this._workshop.collections.some(function(t){return t.id===e&&!t.collected&&t.available&&t.canBuy}))return n.ATTENTION}return n.OFF},WorkshopMarkersModel.prototype.destroy=function(){if(this._isWaitUsing)i.Application.requirements.unwait(this._requirements,this.addMarkers.bind(this));else{this._workshop.slot.removeEventListener(o.WorkshopSlotModelEvent.CHANGED,this.updateMarker.bind(this)),this._workshop.removeEventListener(a.WorkshopModelEvent.UPDATE_FINAL_AWARD_STATE,this.updateMarker.bind(this));for(var t=0,e=this._workshop.collections;t<e.length;t++){var n=e[t];n.removeEventListener(r.WorkshopCollectionModelEvent.CAN_COLLECT,this.updateMarker.bind(this)),n.removeEventListener(r.WorkshopCollectionModelEvent.COLLECTED_FIRST_TIME,this.updateMarker.bind(this)),n.removeEventListener(r.WorkshopCollectionModelEvent.CURRENCY_CHANGED,this.updateMarker.bind(this))}}this._workshop=null},WorkshopMarkersModel.UPDATE_MARKER_EVENT="WorkshopMarkersModel.UPDATE_MARKER_EVENT",WorkshopMarkersModel}(c);e.WorkshopMarkersModel=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function WorkshopSlotModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(WorkshopSlotModelEvent,t),WorkshopSlotModelEvent.CHANGED="WorkshopSlotModelEvent.CHANGED",WorkshopSlotModelEvent.TIMEOUT_CHANGED="WorkshopSlotModelEvent.TIMEOUT_CHANGED",WorkshopSlotModelEvent}(uipixi.BaseEvent);e.WorkshopSlotModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(248),n(42)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n,s=function(n){function WorkshopCollectionElementModel(t){var e=n.call(this)||this;return e._staticData=t,e._count=0,e._resourceModel=i.Application.model.resources.get(e._staticData.id),e._count=e._resourceModel.count,e._resourceModel.addEventListener(o.ResourceModelEvent.COUNT_CHANGED,e.onResourceChanged.bind(e)),e}return c(WorkshopCollectionElementModel,n),WorkshopCollectionElementModel.prototype.onResourceChanged=function(){this.setCount(this._resourceModel.count)},WorkshopCollectionElementModel.prototype.setCount=function(t){t!=this._count&&(this._count=t,this.dispatchEvent(new r.WorkshopCollectionElementModelEvent(r.WorkshopCollectionElementModelEvent.COUNT_CHANGED)))},Object.defineProperty(WorkshopCollectionElementModel.prototype,"firstBuyAward",{get:function(){return this._staticData.firstAwards?this._staticData.firstAwards.awards[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionElementModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionElementModel.prototype,"collected",{get:function(){return this._resourceModel.isExist},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionElementModel.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionElementModel.prototype,"name",{get:function(){var t=this._resourceModel.static.view.strings.string.getItem("name");return t?t.keyId:""},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionElementModel.prototype,"icon",{get:function(){return this._resourceModel.static.view.icons.icon.getItem("64").resourceId},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionElementModel.prototype,"state",{get:function(){return this.collected?a.DEFAULT:a.DARK},enumerable:!0,configurable:!0}),WorkshopCollectionElementModel.prototype.destroy=function(){this._resourceModel.removeEventListener(o.ResourceModelEvent.COUNT_CHANGED,this.onResourceChanged.bind(this))},WorkshopCollectionElementModel}(uipixi.BaseEventTarget);e.WorkshopCollectionElementModel=s,(n=a=e.CollectionElementState||(e.CollectionElementState={})).DEFAULT="default",n.GOLD="gold",n.DARK="dark"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function WorkshopCollectionElementModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(WorkshopCollectionElementModelEvent,t),WorkshopCollectionElementModelEvent.COUNT_CHANGED="WorkshopCollectionElementModelEvent.COUNT_CHANGED",WorkshopCollectionElementModelEvent}(uipixi.BaseEvent);e.WorkshopCollectionElementModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopGetFriendSlotsPromise(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopGetFriendSlotsPromise,t),WorkshopGetFriendSlotsPromise}(n.BasePromise);e.WorkshopGetFriendSlotsPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(24),n(141)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(a){function Requirements(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=a.call(this)||this;n._parse({});for(var i=0,r=t;i<r.length;i++){var o=r[i];n.add(o)}return n}return s(Requirements,a),Requirements.prototype.add=function(t){return t instanceof n.RequirementsTreeStaticData?this._requirements.push(t):this._requirement.push(t),this},Requirements}(n.RequirementsTreeStaticData);e.Requirements=r;var o=function(i){function Requirement(t,e){var n=i.call(this)||this;return n._data=t,n._value=e.value,n._minValue=e.minValue,n._maxValue=e.maxValue,n._notValue=e.notValue,n}return s(Requirement,i),Requirement}(i.RequirementItemStaticData);e.Requirement=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function RouletteAnimationData(){};e.RouletteAnimationData=i;var r=function(r){function RouletteAnimationBasePromise(t,e,n){var i=r.call(this)||this;return i.rouletteModel=t,i.data=e,i.completePromise=n,i}return a(RouletteAnimationBasePromise,r),RouletteAnimationBasePromise}(n.BasePromise);e.RouletteAnimationBasePromise=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelFinishPromise(){return t.call(this)||this}return a(GladeDuelFinishPromise,t),GladeDuelFinishPromise}(n.BasePromise);e.GladeDuelFinishPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelPrepareGladesPromise(){return t.call(this)||this}return a(GladeDuelPrepareGladesPromise,t),GladeDuelPrepareGladesPromise}(n.BasePromise);e.GladeDuelPrepareGladesPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelRemoveGladesPromise(){return t.call(this)||this}return a(GladeDuelRemoveGladesPromise,t),GladeDuelRemoveGladesPromise}(n.BasePromise);e.GladeDuelRemoveGladesPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function GuideStepModelEvent(t){return e.call(this,t)||this}return o(GuideStepModelEvent,e),GuideStepModelEvent.COMPLETE="GuideStepModelEvent.COMPLETE",GuideStepModelEvent}(uipixi.BaseEvent);e.GuideStepModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function GuideActionEvent(t){return e.call(this,t)||this}return o(GuideActionEvent,e),GuideActionEvent.COMPLETE="GuideActionEvent.COMPLETE",GuideActionEvent}(uipixi.BaseEvent);e.GuideActionEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(487),n(255),n(78)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.BaseEventTarget,a=uipixi.BaseEvent,s=function(i){function StepActionQueue(t,e){var n=i.call(this)||this;return n._steps=[],n.injectData=t,n._stepsData=e,n}return c(StepActionQueue,i),Object.defineProperty(StepActionQueue.prototype,"stepsData",{get:function(){return this._stepsData},enumerable:!0,configurable:!0}),StepActionQueue.prototype.process=function(){this._currentStepIndex=0,this.processStep(this._currentStepIndex)},StepActionQueue.prototype.processStep=function(t){var e=this._stepsData[t];this._currentStep=new n.GuideStepModel(e,this.injectData),this._steps.push(this._currentStep),o.GuideUtils.debugStep(this.injectData.guideId,this._currentStep),this._currentStep.addEventListener(r.GuideStepModelEvent.COMPLETE,this.onStepContinue.bind(this)),this._currentStep.process()},StepActionQueue.prototype.onStepContinue=function(t){this._currentStep.removeEventListener(r.GuideStepModelEvent.COMPLETE,this.onStepContinue.bind(this)),this._currentStepIndex===this._stepsData.length-1?this.dispatchEvent(new a(StepActionQueue.EVENT_COMPLETE)):(this._currentStepIndex++,this.processStep(this._currentStepIndex))},StepActionQueue.prototype.revert=function(){for(var t=this._currentStepIndex;0<=t;t--){this._steps[t].revert()}},StepActionQueue.prototype.interrupt=function(){this._currentStep.removeEventListener(r.GuideStepModelEvent.COMPLETE,this.onStepContinue.bind(this)),this._currentStep.interrupt()},StepActionQueue.EVENT_COMPLETE="StepActionQueue.COMPLETE",StepActionQueue}(i);e.StepActionQueue=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function PresentGetPromise(t,e,n){var i=r.call(this)||this;return i.presentId=t,i.showAwardWindow=e,i.awardWindowOptions=n,i}return a(PresentGetPromise,r),PresentGetPromise}(n.BasePromise);e.PresentGetPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RatingGetProfilesPromise(t){var e=n.call(this)||this;return e.socialIds=t,e}return a(RatingGetProfilesPromise,n),RatingGetProfilesPromise}(n.BasePromise);e.RatingGetProfilesPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=function(t){function RatingItem(){return null!==t&&t.apply(this,arguments)||this}return a(RatingItem,t),Object.defineProperty(RatingItem.prototype,"socialId",{get:function(){return this.getString(i.SOCIAL_ID)},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItem.prototype,"score",{get:function(){return this.getNumber(i.SCORE,0)},enumerable:!0,configurable:!0}),RatingItem}(n.BaseDynamicDataIdentifiable);e.RatingItem=o,(r=i=e.RatingDynamicDataKey||(e.RatingDynamicDataKey={})).SOCIAL_ID="0",r.SCORE="1"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function OkMoneyEventRouletteModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(OkMoneyEventRouletteModelEvent,t),OkMoneyEventRouletteModelEvent.OK_ADD="OkMoneyEventRouletteModelEvent.OK_ADD",OkMoneyEventRouletteModelEvent.SPINNING="OkMoneyEventRouletteModelEvent.SPINNING",OkMoneyEventRouletteModelEvent}(uipixi.BaseEvent);e.OkMoneyEventRouletteModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function EventNewYearRatingsModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(EventNewYearRatingsModelEvent,t),EventNewYearRatingsModelEvent.RATING_LOADED="EventNewYearRatingsModelEvent.RATING_LOADED",EventNewYearRatingsModelEvent}(uipixi.BaseEvent);e.EventNewYearRatingsModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function EventNewYearMarkersModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(EventNewYearMarkersModelEvent,t),EventNewYearMarkersModelEvent.CHANGED="EventNewYearMarkersModelEvent.CHANGED",EventNewYearMarkersModelEvent}(uipixi.BaseEvent);e.EventNewYearMarkersModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6),n(169)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function EventNewYearShowWindowPromise(t){void 0===t&&(t=i.EventNewYearWindowTabName.GIFTS);var e=n.call(this)||this;return e.tab=t,e}return a(EventNewYearShowWindowPromise,n),EventNewYearShowWindowPromise}(n.BasePromise);e.EventNewYearShowWindowPromise=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ShowClientHelpWindowPromise(t,e){void 0===e&&(e=!1);var n=i.call(this)||this;return n.clientHelpId=t,n.force=e,n}return a(ShowClientHelpWindowPromise,i),ShowClientHelpWindowPromise}(n.BasePromise);e.ShowClientHelpWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function EventNewYearWindowSendGiftPromise(t,e,n){var i=r.call(this)||this;return i.resourceId=t,i.friendData=e,i.animData=n,i}return a(EventNewYearWindowSendGiftPromise,r),EventNewYearWindowSendGiftPromise}(n.BasePromise);e.EventNewYearWindowSendGiftPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";n.r(e);var ee=n(3);ee.k._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var d=function(t){ee.i.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var e,n,i=this.vars;for(n in i)e=i[n],p(e)&&-1!==e.join("").indexOf("{self}")&&(i[n]=this._swapSelfInParams(e));p(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)},t=ee.l._internals,e=d._internals={},h=t.isSelector,p=t.isArray,f=t.lazyTweens,y=t.lazyRender,a=ee.k._gsDefine.globals,_=function(t){var e,n={};for(e in t)n[e]=t[e];return n},m=function(t,e,n){var i,r,o=t.cycle;for(i in o)r=o[i],t[i]="function"==typeof r?r(n,e[n]):r[n%r.length];delete t.cycle},o=e.pauseCallback=function(){},v=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},n=d.prototype=new ee.i;return d.version="2.0.2",n.constructor=d,n.kill()._gc=n._forcingPlayhead=n._hasPause=!1,n.to=function(t,e,n,i){var r=n.repeat&&a.TweenMax||ee.l;return e?this.add(new r(t,e,n),i):this.set(t,n,i)},n.from=function(t,e,n,i){return this.add((n.repeat&&a.TweenMax||ee.l).from(t,e,n),i)},n.fromTo=function(t,e,n,i,r){var o=i.repeat&&a.TweenMax||ee.l;return e?this.add(o.fromTo(t,e,n,i),r):this.set(t,i,r)},n.staggerTo=function(t,e,n,i,r,o,a,s){var c,u,p=new d({onComplete:o,onCompleteParams:a,callbackScope:s,smoothChildTiming:this.smoothChildTiming}),l=n.cycle;for("string"==typeof t&&(t=ee.l.selector(t)||t),h(t=t||[])&&(t=v(t)),(i=i||0)<0&&((t=v(t)).reverse(),i*=-1),u=0;u<t.length;u++)(c=_(n)).startAt&&(c.startAt=_(c.startAt),c.startAt.cycle&&m(c.startAt,t,u)),l&&(m(c,t,u),null!=c.duration&&(e=c.duration,delete c.duration)),p.to(t[u],e,c,u*i);return this.add(p,r)},n.staggerFrom=function(t,e,n,i,r,o,a,s){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(t,e,n,i,r,o,a,s)},n.staggerFromTo=function(t,e,n,i,r,o,a,s,c){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,this.staggerTo(t,e,i,r,o,a,s,c)},n.call=function(t,e,n,i){return this.add(ee.l.delayedCall(0,t,e,n),i)},n.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new ee.l(t,0,e),n)},d.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var n,i,r,o,a=new d(t),s=a._timeline;for(null==e&&(e=!0),s._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=s._time,r=s._first;r;)o=r._next,e&&r instanceof ee.l&&r.target===r.vars.onComplete||((i=r._startTime-r._delay)<0&&(n=1),a.add(r,i)),r=o;return s.add(a,0),n&&a.totalDuration(),a},n.add=function(t,e,n,i){var r,o,a,s,c,u;if("number"!=typeof e&&(e=this._parseTimeOrLabel(e,0,!0,t)),!(t instanceof ee.a)){if(t instanceof Array||t&&t.push&&p(t)){for(n=n||"normal",i=i||0,r=e,o=t.length,a=0;a<o;a++)p(s=t[a])&&(s=new d({tweens:s})),this.add(s,r),"string"!=typeof s&&"function"!=typeof s&&("sequence"===n?r=s._startTime+s.totalDuration()/s._timeScale:"start"===n&&(s._startTime-=s.delay())),r+=i;return this._uncache(!0)}if("string"==typeof t)return this.addLabel(t,e);if("function"!=typeof t)throw"Cannot add "+t+" into the timeline; it is not a tween, timeline, function, or string.";t=ee.l.delayedCall(0,t)}if(ee.i.prototype.add.call(this,t,e),t._time&&(r=Math.max(0,Math.min(t.totalDuration(),(this.rawTime()-t._startTime)*t._timeScale)),1e-5<Math.abs(r-t._totalTime)&&t.render(r,!1,!1)),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(u=(c=this).rawTime()>t._startTime;c._timeline;)u&&c._timeline.smoothChildTiming?c.totalTime(c._totalTime,!0):c._gc&&c._enabled(!0,!1),c=c._timeline;return this},n.remove=function(t){if(t instanceof ee.a){this._remove(t,!1);var e=t._timeline=t.vars.useFrames?ee.a._rootFramesTimeline:ee.a._rootTimeline;return t._startTime=(t._paused?t._pauseTime:e._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&p(t)){for(var n=t.length;-1<--n;)this.remove(t[n]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},n._remove=function(t,e){return ee.i.prototype._remove.call(this,t,e),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},n.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},n.insert=n.insertMultiple=function(t,e,n,i){return this.add(t,e||0,n,i)},n.appendMultiple=function(t,e,n,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),n,i)},n.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},n.addPause=function(t,e,n,i){var r=ee.l.delayedCall(0,o,n,i||this);return r.vars.onComplete=r.vars.onReverseComplete=e,r.data="isPause",this._hasPause=!0,this.add(r,t)},n.removeLabel=function(t){return delete this._labels[t],this},n.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},n._parseTimeOrLabel=function(t,e,n,i){var r,o;if(i instanceof ee.a&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&p(i)))for(o=i.length;-1<--o;)i[o]instanceof ee.a&&i[o].timeline===this&&this.remove(i[o]);if(r="number"!=typeof t||e?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof e)return this._parseTimeOrLabel(e,n&&"number"==typeof t&&null==this._labels[e]?t-r:0,n);if(e=e||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=r);else{if(-1===(o=t.indexOf("=")))return null==this._labels[t]?n?this._labels[t]=r+e:e:this._labels[t]+e;e=parseInt(t.charAt(o-1)+"1",10)*Number(t.substr(o+1)),t=1<o?this._parseTimeOrLabel(t.substr(0,o-1),0,n):r}return Number(t)+e},n.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},n.stop=function(){return this.paused(!0)},n.gotoAndPlay=function(t,e){return this.play(t,e)},n.gotoAndStop=function(t,e){return this.pause(t,e)},n.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,o,a,s,c,u,p=this._time,l=this._dirty?this.totalDuration():this._totalDuration,d=this._startTime,h=this._timeScale,_=this._paused;if(p!==this._time&&(t+=this._time-p),l-1e-7<=t&&0<=t)this._totalTime=this._time=l,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",s=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&-1e-7<=t||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(s=!0,1e-10<this._rawPrevTime&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,t=l+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&1e-10!==this._rawPrevTime&&(0<this._rawPrevTime||t<0&&0<=this._rawPrevTime))&&(a="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(s=r=!0,a="onReverseComplete"):0<=this._rawPrevTime&&this._first&&(s=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,this._initted||(s=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(p<=t)for(i=this._first;i&&i._startTime<=t&&!c;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(c=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!c;)i._duration||"isPause"===i.data&&0<i._rawPrevTime&&(c=i),i=i._prev;c&&(this._time=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==p&&this._first||n||s||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&0<t&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),p<=(u=this._time))for(i=this._first;i&&(o=i._next,u===this._time&&(!this._paused||_));)(i._active||i._startTime<=u&&!i._paused&&!i._gc)&&(c===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=o;else for(i=this._last;i&&(o=i._prev,u===this._time&&(!this._paused||_));){if(i._active||i._startTime<=p&&!i._paused&&!i._gc){if(c===i){for(c=i._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,n),c=c._prev;c=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=o}this._onUpdate&&(e||(f.length&&y(),this._callback("onUpdate"))),a&&(this._gc||d!==this._startTime&&h===this._timeScale||(0===this._time||l>=this.totalDuration())&&(r&&(f.length&&y(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},n._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof d&&t._hasPausedChild())return!0;t=t._next}return!1},n.getChildren=function(t,e,n,i){i=i||-9999999999;for(var r=[],o=this._first,a=0;o;)o._startTime<i||(o instanceof ee.l?!1!==e&&(r[a++]=o):(!1!==n&&(r[a++]=o),!1!==t&&(a=(r=r.concat(o.getChildren(!0,e,n))).length))),o=o._next;return r},n.getTweensOf=function(t,e){var n,i,r=this._gc,o=[],a=0;for(r&&this._enabled(!0,!0),i=(n=ee.l.getTweensOf(t)).length;-1<--i;)(n[i].timeline===this||e&&this._contains(n[i]))&&(o[a++]=n[i]);return r&&this._enabled(!1,!0),o},n.recent=function(){return this._recent},n._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},n.shiftChildren=function(t,e,n){n=n||0;for(var i,r=this._first,o=this._labels;r;)r._startTime>=n&&(r._startTime+=t),r=r._next;if(e)for(i in o)o[i]>=n&&(o[i]+=t);return this._uncache(!0)},n._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var n=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=n.length,r=!1;-1<--i;)n[i]._kill(t,e)&&(r=!0);return r},n.clear=function(t){var e=this.getChildren(!1,!0,!0),n=e.length;for(this._time=this._totalTime=0;-1<--n;)e[n]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},n.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return ee.a.prototype.invalidate.call(this)},n._enabled=function(t,e){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return ee.i.prototype._enabled.call(this,t,e)},n.totalTime=function(t,e,n){this._forcingPlayhead=!0;var i=ee.a.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},n.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},n.totalDuration=function(t){if(arguments.length)return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this;if(this._dirty){for(var e,n,i=0,r=this._last,o=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&this._sortChildren&&!r._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(r,r._startTime-r._delay),this._calculatingDuration=0):o=r._startTime,r._startTime<0&&!r._paused&&(i-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale,this._time-=r._startTime,this._totalTime-=r._startTime,this._rawPrevTime-=r._startTime),this.shiftChildren(-r._startTime,!1,-9999999999),o=0),i<(n=r._startTime+r._totalDuration/r._timeScale)&&(i=n),r=e;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration},n.paused=function(t){if(!t)for(var e=this._first,n=this._time;e;)e._startTime===n&&"isPause"===e.data&&(e._rawPrevTime=0),e=e._next;return ee.a.prototype.paused.apply(this,arguments)},n.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===ee.a._rootFramesTimeline},n.rawTime=function(t){return t&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},d},!0);var i=ee.m.TimelineLite;ee.k._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(){var t=function(t){i.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},e=ee.l._internals,A=e.lazyTweens,M=e.lazyRender,s=ee.k._gsDefine.globals,c=new ee.b(null,null,1,0),n=t.prototype=new i;return n.constructor=t,n.kill()._gc=!1,t.version="2.0.2",n.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},n.addCallback=function(t,e,n,i){return this.add(ee.l.delayedCall(0,t,n,i),e)},n.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var n=this.getTweensOf(t,!1),i=n.length,r=this._parseTimeOrLabel(e);-1<--i;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},n.removePause=function(t){return this.removeCallback(i._internals.pauseCallback,t)},n.tweenTo=function(t,e){e=e||{};var n,i,r,o={ease:c,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},a=e.repeat&&s.TweenMax||ee.l;for(i in e)o[i]=e[i];return o.time=this._parseTimeOrLabel(t),n=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,r=new a(this,n,o),o.onStart=function(){r.target.paused(!0),r.vars.time===r.target.time()||n!==r.duration()||r.isFromTo||r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale).render(r.time(),!0,!0),e.onStart&&e.onStart.apply(e.onStartScope||e.callbackScope||r,e.onStartParams||[])},r},n.tweenFromTo=function(t,e,n){n=n||{},t=this._parseTimeOrLabel(t),n.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var i=this.tweenTo(e,n);return i.isFromTo=1,i.duration(Math.abs(i.vars.time-t)/this._timeScale||.001)},n.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,o,a,s,c,u,p,l=this._time,d=this._dirty?this.totalDuration():this._totalDuration,h=this._duration,_=this._totalTime,f=this._startTime,y=this._timeScale,m=this._rawPrevTime,v=this._paused,b=this._cycle;if(l!==this._time&&(t+=this._time-l),d-1e-7<=t&&0<=t)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",s=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&-1e-7<=t||m<0||1e-10===m)&&m!==t&&this._first&&(s=!0,1e-10<m&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:t=(this._time=h)+1e-4;else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),((this._time=0)!==l||0===h&&1e-10!==m&&(0<m||t<0&&0<=m)&&!this._locked)&&(a="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(s=r=!0,a="onReverseComplete"):0<=m&&this._first&&(s=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=h||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,this._initted||(s=!0)}else if(0===h&&m<0&&(s=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(c=h+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&_<=t&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!=(1&this._cycle)&&(this._time=h-this._time),this._time>h?t=(this._time=h)+1e-4:this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if(l<=(t=this._time)||this._repeat&&b!==this._cycle)for(i=this._first;i&&i._startTime<=t&&!u;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(u=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!u;)i._duration||"isPause"===i.data&&0<i._rawPrevTime&&(u=i),i=i._prev;u&&u._startTime<h&&(this._time=t=u._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==b&&!this._locked){var g=this._yoyo&&0!=(1&b),w=g===(this._yoyo&&0!=(1&this._cycle)),O=this._totalTime,S=this._cycle,P=this._rawPrevTime,E=this._time;if(this._totalTime=b*h,this._cycle<b?g=!g:this._totalTime+=h,this._time=l,this._rawPrevTime=0===h?m-1e-4:m,this._cycle=b,this._locked=!0,l=g?0:h,this.render(l,e,0===h),e||this._gc||this.vars.onRepeat&&(this._cycle=S,this._locked=!1,this._callback("onRepeat")),l!==this._time)return;if(w&&(this._cycle=b,this._locked=!0,l=g?h+1e-4:-1e-4,this.render(l,!0,!1)),this._locked=!1,this._paused&&!v)return;this._time=E,this._totalTime=O,this._cycle=S,this._rawPrevTime=P}if(this._time!==l&&this._first||n||s||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==_&&0<t&&(this._active=!0),0===_&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),l<=(p=this._time))for(i=this._first;i&&(o=i._next,p===this._time&&(!this._paused||v));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(u===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=o;else for(i=this._last;i&&(o=i._prev,p===this._time&&(!this._paused||v));){if(i._active||i._startTime<=l&&!i._paused&&!i._gc){if(u===i){for(u=i._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(t-u._startTime)*u._timeScale:(t-u._startTime)*u._timeScale,e,n),u=u._prev;u=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=o}this._onUpdate&&(e||(A.length&&M(),this._callback("onUpdate"))),a&&(this._locked||this._gc||f!==this._startTime&&y===this._timeScale||(0===this._time||d>=this.totalDuration())&&(r&&(A.length&&M(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}else _!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},n.getActive=function(t,e,n){null==t&&(t=!0),null==e&&(e=!0),null==n&&(n=!1);var i,r,o=[],a=this.getChildren(t,e,n),s=0,c=a.length;for(i=0;i<c;i++)(r=a[i]).isActive()&&(o[s++]=r);return o},n.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,n=this.getLabelsArray(),i=n.length;for(e=0;e<i;e++)if(n[e].time>t)return n[e].name;return null},n.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),n=e.length;-1<--n;)if(e[n].time<t)return e[n].name;return null},n.getLabelsArray=function(){var t,e=[],n=0;for(t in this._labels)e[n++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},n.invalidate=function(){return this._locked=!1,i.prototype.invalidate.call(this)},n.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},n.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},n.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(i.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},n.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},n.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},n.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},n.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},t},!0);var r=ee.m.TimelineMax;ee.k._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var y=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},m=function(t,e,n){var i,r,o=t.cycle;for(i in o)r=o[i],t[i]="function"==typeof r?r(n,e[n]):r[n%r.length];delete t.cycle},v=function(t,e,n){ee.l.call(this,t,e,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=v.prototype.render},b=1e-10,g=ee.l._internals,w=g.isSelector,O=g.isArray,t=v.prototype=ee.l.to({},.1,{}),S=[];v.version="2.0.2",t.constructor=v,t.kill()._gc=!1,v.killTweensOf=v.killDelayedCallsTo=ee.l.killTweensOf,v.getTweensOf=ee.l.getTweensOf,v.lagSmoothing=ee.l.lagSmoothing,v.ticker=ee.l.ticker,v.render=ee.l.render,t.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),ee.l.prototype.invalidate.call(this)},t.updateTo=function(t,e){var n,i=this.ratio,r=this.vars.immediateRender||t.immediateRender;for(n in e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[n]=t[n];if(this._initted||r)if(e)this._initted=!1,r&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&ee.l._onPluginEvent("_onDisable",this),.998<this._time/this._duration){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),0<this._time||r)for(var a,s=1/(1-i),c=this._firstPT;c;)a=c.s+c.c,c.c*=s,c.s=a-c.c,c=c._next;return this},t.render=function(t,e,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,r,o,a,s,c,u,p,l,d=this._dirty?this.totalDuration():this._totalDuration,h=this._time,_=this._totalTime,f=this._cycle,y=this._duration,m=this._rawPrevTime;if(d-1e-7<=t&&0<=t?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=y,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===y&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(m<0||t<=0&&-1e-7<=t||m===b&&"isPause"!==this.data)&&m!==t&&(n=!0,b<m&&(r="onReverseComplete")),this._rawPrevTime=p=!e||t||m===t?t:b)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==_||0===y&&0<m)&&(r="onReverseComplete",i=this._reversed),t<0&&(this._active=!1,0===y&&(this._initted||!this.vars.lazy||n)&&(0<=m&&(n=!0),this._rawPrevTime=p=!e||t||m===t?t:b)),this._initted||(n=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(a=y+this._repeatDelay,this._cycle=this._totalTime/a>>0,0!==this._cycle&&this._cycle===this._totalTime/a&&_<=t&&this._cycle--,this._time=this._totalTime-this._cycle*a,this._yoyo&&0!=(1&this._cycle)&&(this._time=y-this._time,(l=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==l||this._initted?this._yoyoEase=l=!0===l?this._ease:l instanceof ee.b?l:ee.b.map[l]:(l=this.vars.ease,this._yoyoEase=l=l?l instanceof ee.b?l:"function"==typeof l?new ee.b(l,this.vars.easeParams):ee.b.map[l]||ee.l.defaultEase:ee.l.defaultEase)),this.ratio=l?1-l.getRatio((y-this._time)/y):0)),this._time>y?this._time=y:this._time<0&&(this._time=0)),this._easeType&&!l?(s=this._time/y,(1===(c=this._easeType)||3===c&&.5<=s)&&(s=1-s),3===c&&(s*=2),1===(u=this._easePower)?s*=s:2===u?s*=s*s:3===u?s*=s*s*s:4===u&&(s*=s*s*s*s),1===c?this.ratio=1-s:2===c?this.ratio=s:this._time/y<.5?this.ratio=s/2:this.ratio=1-s/2):l||(this.ratio=this._ease.getRatio(this._time/y))),h!==this._time||n||f!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=h,this._totalTime=_,this._rawPrevTime=m,this._cycle=f,g.lazyTweens.push(this),void(this._lazy=[t,e]);!this._time||i||l?i&&this._ease._calcEnd&&!l&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/y)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&0<=t&&(this._active=!0),0===_&&(2===this._initted&&0<t&&this._init(),this._startAt&&(0<=t?this._startAt.render(t,!0,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==y||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,!0,n),e||(this._totalTime!==_||r)&&this._callback("onUpdate")),this._cycle!==f&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,!0,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===y&&this._rawPrevTime===b&&p!==b&&(this._rawPrevTime=0)))}else _!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},v.to=function(t,e,n){return new v(t,e,n)},v.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new v(t,e,n)},v.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new v(t,e,i)},v.staggerTo=v.allTo=function(t,e,n,i,r,o,a){i=i||0;var s,c,u,p,l=0,d=[],h=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),r.apply(a||n.callbackScope||this,o||S)},_=n.cycle,f=n.startAt&&n.startAt.cycle;for(O(t)||("string"==typeof t&&(t=ee.l.selector(t)||t),w(t)&&(t=y(t))),t=t||[],i<0&&((t=y(t)).reverse(),i*=-1),s=t.length-1,u=0;u<=s;u++){for(p in c={},n)c[p]=n[p];if(_&&(m(c,t,u),null!=c.duration&&(e=c.duration,delete c.duration)),f){for(p in f=c.startAt={},n.startAt)f[p]=n.startAt[p];m(c.startAt,t,u)}c.delay=l+(c.delay||0),u===s&&r&&(c.onComplete=h),d[u]=new v(t[u],e,c),l+=i}return d},v.staggerFrom=v.allFrom=function(t,e,n,i,r,o,a){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,v.staggerTo(t,e,n,i,r,o,a)},v.staggerFromTo=v.allFromTo=function(t,e,n,i,r,o,a,s){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,v.staggerTo(t,e,i,r,o,a,s)},v.delayedCall=function(t,e,n,i,r){return new v(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,useFrames:r,overwrite:0})},v.set=function(t,e){return new v(t,0,e)},v.isTweening=function(t){return 0<ee.l.getTweensOf(t,!0).length};var o=function(t,e){for(var n=[],i=0,r=t._first;r;)r instanceof ee.l?n[i++]=r:(e&&(n[i++]=r),i=(n=n.concat(o(r,e))).length),r=r._next;return n},p=v.getAllTweens=function(t){return o(ee.a._rootTimeline,t).concat(o(ee.a._rootFramesTimeline,t))};v.killAll=function(t,e,n,i){null==e&&(e=!0),null==n&&(n=!0);var r,o,a,s=p(0!=i),c=s.length,u=e&&n&&i;for(a=0;a<c;a++)o=s[a],(u||o instanceof ee.i||(r=o.target===o.vars.onComplete)&&n||e&&!r)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},v.killChildTweensOf=function(t,e){if(null!=t){var n,i,r,o,a,s=g.tweenLookup;if("string"==typeof t&&(t=ee.l.selector(t)||t),w(t)&&(t=y(t)),O(t))for(o=t.length;-1<--o;)v.killChildTweensOf(t[o],e);else{for(r in n=[],s)for(i=s[r].target.parentNode;i;)i===t&&(n=n.concat(s[r].tweens)),i=i.parentNode;for(a=n.length,o=0;o<a;o++)e&&n[o].totalTime(n[o].totalDuration()),n[o]._enabled(!1,!1)}}};var i=function(t,e,n,i){e=!1!==e,n=!1!==n;for(var r,o,a=p(i=!1!==i),s=e&&n&&i,c=a.length;-1<--c;)o=a[c],(s||o instanceof ee.i||(r=o.target===o.vars.onComplete)&&n||e&&!r)&&o.paused(t)};return v.pauseAll=function(t,e,n){i(!0,t,e,n)},v.resumeAll=function(t,e,n){i(!1,t,e,n)},v.globalTimeScale=function(t){var e=ee.a._rootTimeline,n=ee.l.ticker.time;return arguments.length?(t=t||b,e._startTime=n-(n-e._startTime)*e._timeScale/t,e=ee.a._rootFramesTimeline,n=ee.l.ticker.frame,e._startTime=n-(n-e._startTime)*e._timeScale/t,e._timeScale=ee.a._rootTimeline._timeScale=t,t):e._timeScale},t.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},t.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},t.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},t.duration=function(t){return arguments.length?ee.a.prototype.duration.call(this,t):this._duration},t.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},t.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},t.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},t.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},v},!0);var o=ee.m.TweenMax;ee.k._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(){var _,P,A,f,U=function(){ee.j.call(this,"css"),this._overwriteProps.length=0,this.setRatio=U.prototype.setRatio},u=ee.k._gsDefine.globals,y={},t=U.prototype=new ee.j("css");(t.constructor=U).version="2.0.2",U.API=2,U.defaultTransformPerspective=0,U.defaultSkewType="compensated",U.defaultSmoothOrigin=!0,t="px",U.suffixMap={top:t,right:t,bottom:t,left:t,width:t,height:t,fontSize:t,padding:t,margin:t,perspective:t,lineHeight:""};var M,m,v,k,b,E,D,I,e,n,C=/(?:\-|\.|\b)(\d|\.|e\-)+/g,T=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,g=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,p=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,j=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,w=/opacity:([^;]*)/i,o=/alpha\(opacity *=.+?\)/i,O=/^(rgb|hsl)/,a=/([A-Z])/g,s=/-([a-z])/gi,S=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,c=function(t,e){return e.toUpperCase()},h=/(?:Left|Right|Width)/i,l=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,N=/,(?=[^\)]*(?:\(|$))/gi,L=/[\s,\(]/i,B=Math.PI/180,W=180/Math.PI,G={},i={style:{}},F=ee.k.document||{createElement:function(){return i}},d=function(t,e){return F.createElementNS?F.createElementNS(e||"http://www.w3.org/1999/xhtml",t):F.createElement(t)},V=d("div"),H=d("img"),r=U._internals={_specialProps:y},Y=(ee.k.navigator||{}).userAgent||"",Q=(e=Y.indexOf("Android"),n=d("a"),v=-1!==Y.indexOf("Safari")&&-1===Y.indexOf("Chrome")&&(-1===e||3<parseFloat(Y.substr(e+8,2))),b=v&&parseFloat(Y.substr(Y.indexOf("Version/")+8,2))<6,k=-1!==Y.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Y)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Y))&&(E=parseFloat(RegExp.$1)),!!n&&(n.style.cssText="top:1px;opacity:.55;",/^0.55/.test(n.style.opacity))),q=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},z=function(t){ee.k.console&&console.log(t)},K="",X="",J=function(t,e){var n,i,r=(e=e||V).style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;-1<--i&&void 0===r[n[i]+t];);return 0<=i?(K="-"+(X=3===i?"ms":n[i]).toLowerCase()+"-",X+t):null},Z=("undefined"!=typeof window?window:F.defaultView||{getComputedStyle:function(){}}).getComputedStyle,$=U.getStyle=function(t,e,n,i,r){var o;return Q||"opacity"!==e?(!i&&t.style[e]?o=t.style[e]:(n=n||Z(t))?o=n[e]||n.getPropertyValue(e)||n.getPropertyValue(e.replace(a,"-$1").toLowerCase()):t.currentStyle&&(o=t.currentStyle[e]),null==r||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:r):q(t)},tt=r.convertToPixels=function(t,e,n,i,r){if("px"===i||!i&&"lineHeight"!==e)return n;if("auto"===i||!n)return 0;var o,a,s,c=h.test(e),u=t,p=V.style,l=n<0,d=1===n;if(l&&(n=-n),d&&(n*=100),"lineHeight"!==e||i)if("%"===i&&-1!==e.indexOf("border"))o=n/100*(c?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==i&&u.appendChild&&"v"!==i.charAt(0)&&"rem"!==i)p[c?"borderLeftWidth":"borderTopWidth"]=n+i;else{if(u=t.parentNode||F.body,-1!==$(u,"display").indexOf("flex")&&(p.position="absolute"),a=u._gsCache,s=ee.l.ticker.frame,a&&c&&a.time===s)return a.width*n/100;p[c?"width":"height"]=n+i}u.appendChild(V),o=parseFloat(V[c?"offsetWidth":"offsetHeight"]),u.removeChild(V),c&&"%"===i&&!1!==U.cacheWidths&&((a=u._gsCache=u._gsCache||{}).time=s,a.width=o/n*100),0!==o||r||(o=tt(t,e,n,i,!0))}else a=Z(t).lineHeight,t.style.lineHeight=n,o=parseFloat(Z(t).lineHeight),t.style.lineHeight=a;return d&&(o/=100),l?-o:o},et=r.calculateOffset=function(t,e,n){if("absolute"!==$(t,"position",n))return 0;var i="left"===e?"Left":"Top",r=$(t,"margin"+i,n);return t["offset"+i]-(tt(t,e,parseFloat(r),r.replace(j,""))||0)},nt=function(t,e){var n,i,r,o={};if(e=e||Z(t,null))if(n=e.length)for(;-1<--n;)-1!==(r=e[n]).indexOf("-transform")&&xt!==r||(o[r.replace(s,c)]=e.getPropertyValue(r));else for(n in e)-1!==n.indexOf("Transform")&&jt!==n||(o[n]=e[n]);else if(e=t.currentStyle||t.style)for(n in e)"string"==typeof n&&void 0===o[n]&&(o[n.replace(s,c)]=e[n]);return Q||(o.opacity=q(t)),i=Qt(t,e,!1),o.rotation=i.rotation,o.skewX=i.skewX,o.scaleX=i.scaleX,o.scaleY=i.scaleY,o.x=i.x,o.y=i.y,Nt&&(o.z=i.z,o.rotationX=i.rotationX,o.rotationY=i.rotationY,o.scaleZ=i.scaleZ),o.filters&&delete o.filters,o},it=function(t,e,n,i,r){var o,a,s,c={},u=t.style;for(a in n)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(o=n[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"!=typeof o&&"string"!=typeof o||(c[a]="auto"!==o||"left"!==a&&"top"!==a?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof e[a]||""===e[a].replace(p,"")?o:0:et(t,a),void 0!==u[a]&&(s=new vt(u,a,u[a],s))));if(i)for(a in i)"className"!==a&&(c[a]=i[a]);return{difs:c,firstMPT:s}},rt={width:["Left","Right"],height:["Top","Bottom"]},ot=["marginLeft","marginRight","marginTop","marginBottom"],at=function(t,e,n){if("svg"===(t.nodeName+"").toLowerCase())return(n||Z(t))[e]||0;if(t.getCTM&&Vt(t))return t.getBBox()[e]||0;var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=rt[e],o=r.length;for(n=n||Z(t,null);-1<--o;)i-=parseFloat($(t,"padding"+r[o],n,!0))||0,i-=parseFloat($(t,"border"+r[o]+"Width",n,!0))||0;return i},st=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var n,i=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],o=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];if(3<i.length&&!e){for(i=t.split(", ").join(",").split(","),t=[],n=0;n<i.length;n++)t.push(st(i[n]));return t.join(",")}return null==o?o="center"===r?"50%":"0":"center"===o&&(o="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+o+(2<i.length?" "+i[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==o.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===o.charAt(1),e.ox=parseFloat(r.replace(p,"")),e.oy=parseFloat(o.replace(p,"")),e.v=t),e||t},ct=function(t,e){return"function"==typeof t&&(t=t(I,D)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ut=function(t,e){"function"==typeof t&&(t=t(I,D));var n="string"==typeof t&&"="===t.charAt(1);return"string"==typeof t&&"v"===t.charAt(t.length-2)&&(t=(n?t.substr(0,2):0)+window["inner"+("vh"===t.substr(-2)?"Height":"Width")]*(parseFloat(n?t.substr(2):t)/100)),null==t?e:n?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},pt=function(t,e,n,i){var r,o,a,s;return"function"==typeof t&&(t=t(I,D)),(a=null==t?e:"number"==typeof t?t:(360,r=t.split("_"),o=((s="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===t.indexOf("rad")?1:W)-(s?0:e),r.length&&(i&&(i[n]=e+o),-1!==t.indexOf("short")&&(o%=360)!==o%180&&(o=o<0?o+360:o-360),-1!==t.indexOf("_cw")&&o<0?o=(o+3599999999640)%360-360*(o/360|0):-1!==t.indexOf("ccw")&&0<o&&(o=(o-3599999999640)%360-360*(o/360|0))),e+o))<1e-6&&-1e-6<a&&(a=0),a},lt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},dt=function(t,e,n){return 255*(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0},ht=U.parseColor=function(t,e){var n,i,r,o,a,s,c,u,p,l,d;if(t)if("number"==typeof t)n=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),lt[t])n=lt[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(i=t.charAt(1))+i+(r=t.charAt(2))+r+(o=t.charAt(3))+o),n=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(n=d=t.match(C),e){if(-1!==t.indexOf("="))return t.match(T)}else a=Number(n[0])%360/360,s=Number(n[1])/100,i=2*(c=Number(n[2])/100)-(r=c<=.5?c*(s+1):c+s-c*s),3<n.length&&(n[3]=Number(n[3])),n[0]=dt(a+1/3,i,r),n[1]=dt(a,i,r),n[2]=dt(a-1/3,i,r);else n=t.match(C)||lt.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),3<n.length&&(n[3]=Number(n[3]))}else n=lt.black;return e&&!d&&(i=n[0]/255,r=n[1]/255,o=n[2]/255,c=((u=Math.max(i,r,o))+(p=Math.min(i,r,o)))/2,u===p?a=s=0:(l=u-p,s=.5<c?l/(2-u-p):l/(u+p),a=u===i?(r-o)/l+(r<o?6:0):u===r?(o-i)/l+2:(i-r)/l+4,a*=60),n[0]=a+.5|0,n[1]=100*s+.5|0,n[2]=100*c+.5|0),n},_t=function(t,e){var n,i,r,o=t.match(ft)||[],a=0,s="";if(!o.length)return t;for(n=0;n<o.length;n++)i=o[n],a+=(r=t.substr(a,t.indexOf(i,a)-a)).length+i.length,3===(i=ht(i,e)).length&&i.push(1),s+=r+(e?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return s+t.substr(a)},ft="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in lt)ft+="|"+t+"\\b";ft=new RegExp(ft+")","gi"),U.colorStringFilter=function(t){var e,n=t[0]+" "+t[1];ft.test(n)&&(e=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),t[0]=_t(t[0],e),t[1]=_t(t[1],e)),ft.lastIndex=0},ee.l.defaultStringFilter||(ee.l.defaultStringFilter=U.colorStringFilter);var yt=function(t,e,o,a){if(null==t)return function(t){return t};var s,c=e?(t.match(ft)||[""])[0]:"",u=t.split(c).join("").match(g)||[],p=t.substr(0,t.indexOf(u[0])),l=")"===t.charAt(t.length-1)?")":"",d=-1!==t.indexOf(" ")?" ":",",h=u.length,_=0<h?u[0].replace(C,""):"";return h?s=e?function(t){var e,n,i,r;if("number"==typeof t)t+=_;else if(a&&N.test(t)){for(r=t.replace(N,"|").split("|"),i=0;i<r.length;i++)r[i]=s(r[i]);return r.join(",")}if(e=(t.match(ft)||[c])[0],i=(n=t.split(e).join("").match(g)||[]).length,h>i--)for(;++i<h;)n[i]=o?n[(i-1)/2|0]:u[i];return p+n.join(d)+d+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,i;if("number"==typeof t)t+=_;else if(a&&N.test(t)){for(n=t.replace(N,"|").split("|"),i=0;i<n.length;i++)n[i]=s(n[i]);return n.join(",")}if(i=(e=t.match(g)||[]).length,h>i--)for(;++i<h;)e[i]=o?e[(i-1)/2|0]:u[i];return p+e.join(d)+l}:function(t){return t}},mt=function(u){return u=u.split(","),function(t,e,n,i,r,o,a){var s,c=(e+"").split(" ");for(a={},s=0;s<4;s++)a[u[s]]=c[s]=c[s]||c[(s-1)/2>>0];return i.parse(t,a,r,o)}},vt=(r._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,n,i,r,o,a=this.data,s=a.proxy,c=a.firstMPT;c;)e=s[c.v],c.r?e=c.r(e):e<1e-6&&-1e-6<e&&(e=0),c.t[c.p]=e,c=c._next;if(a.autoRotate&&(a.autoRotate.rotation=a.mod?a.mod.call(this._tween,s.rotation,this.t,this._tween):s.rotation),1===t||0===t)for(c=a.firstMPT,o=1===t?"e":"b";c;){if((n=c.t).type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[o]=r}}else n[o]=n.s+n.xs0;c=c._next}},function(t,e,n,i,r){this.t=t,this.p=e,this.v=n,this.r=r,i&&((i._prev=this)._next=i)}),bt=(r._parseToProxy=function(t,e,n,i,r,o){var a,s,c,u,p,l=i,d={},h={},_=n._transform,f=G;for(n._transform=null,G=e,i=p=n.parse(t,e,i,r),G=f,o&&(n._transform=_,l&&(l._prev=null,l._prev&&(l._prev._next=null)));i&&i!==l;){if(i.type<=1&&(h[s=i.p]=i.s+i.c,d[s]=i.s,o||(u=new vt(i,"s",s,u,i.r),i.c=0),1===i.type))for(a=i.l;0<--a;)c="xn"+a,h[s=i.p+"_"+c]=i.data[c],d[s]=i[c],o||(u=new vt(i,c,s,u,i.rxp[c]));i=i._next}return{proxy:d,end:h,firstMPT:u,pt:p}},r.CSSPropTween=function(t,e,n,i,r,o,a,s,c,u,p){this.t=t,this.p=e,this.s=n,this.c=i,this.n=a||e,t instanceof bt||f.push(this.n),this.r=s?"function"==typeof s?s:Math.round:s,this.type=o||0,c&&(this.pr=c,_=!0),this.b=void 0===u?n:u,this.e=void 0===p?n+i:p,r&&((this._next=r)._prev=this)}),gt=function(t,e,n,i,r,o){var a=new bt(t,e,n,i-n,r,-1,o);return a.b=n,a.e=a.xs0=i,a},wt=U.parseComplex=function(t,e,n,i,r,o,a,s,c,u){n=n||o||"","function"==typeof i&&(i=i(I,D)),a=new bt(t,e,0,0,a,u?2:1,null,!1,s,n,i),i+="",r&&ft.test(i+n)&&(i=[n,i],U.colorStringFilter(i),n=i[0],i=i[1]);var p,l,d,h,_,f,y,m,v,b,g,w,O,S=n.split(", ").join(",").split(" "),P=i.split(", ").join(",").split(" "),E=S.length,A=!1!==M;for(-1===i.indexOf(",")&&-1===n.indexOf(",")||(P=-1!==(i+n).indexOf("rgb")||-1!==(i+n).indexOf("hsl")?(S=S.join(" ").replace(N,", ").split(" "),P.join(" ").replace(N,", ").split(" ")):(S=S.join(" ").split(",").join(", ").split(" "),P.join(" ").split(",").join(", ").split(" ")),E=S.length),E!==P.length&&(E=(S=(o||"").split(" ")).length),a.plugin=c,a.setRatio=u,p=ft.lastIndex=0;p<E;p++)if(h=S[p],_=P[p]+"",(m=parseFloat(h))||0===m)a.appendXtra("",m,ct(_,m),_.replace(T,""),!(!A||-1===_.indexOf("px"))&&Math.round,!0);else if(r&&ft.test(h))w=")"+((w=_.indexOf(")")+1)?_.substr(w):""),O=-1!==_.indexOf("hsl")&&Q,b=_,h=ht(h,O),_=ht(_,O),(v=6<h.length+_.length)&&!Q&&0===_[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(P[p]).join("transparent")):(Q||(v=!1),O?a.appendXtra(b.substr(0,b.indexOf("hsl"))+(v?"hsla(":"hsl("),h[0],ct(_[0],h[0]),",",!1,!0).appendXtra("",h[1],ct(_[1],h[1]),"%,",!1).appendXtra("",h[2],ct(_[2],h[2]),v?"%,":"%"+w,!1):a.appendXtra(b.substr(0,b.indexOf("rgb"))+(v?"rgba(":"rgb("),h[0],_[0]-h[0],",",Math.round,!0).appendXtra("",h[1],_[1]-h[1],",",Math.round).appendXtra("",h[2],_[2]-h[2],v?",":w,Math.round),v&&(h=h.length<4?1:h[3],a.appendXtra("",h,(_.length<4?1:_[3])-h,w,!1))),ft.lastIndex=0;else if(f=h.match(C)){if(!(y=_.match(T))||y.length!==f.length)return a;for(l=d=0;l<f.length;l++)g=f[l],b=h.indexOf(g,d),a.appendXtra(h.substr(d,b-d),Number(g),ct(y[l],g),"",!(!A||"px"!==h.substr(b+g.length,2))&&Math.round,0===l),d=b+g.length;a["xs"+a.l]+=h.substr(d)}else a["xs"+a.l]+=a.l||a["xs"+a.l]?" "+_:_;if(-1!==i.indexOf("=")&&a.data){for(w=a.xs0+a.data.s,p=1;p<a.l;p++)w+=a["xs"+p]+a.data["xn"+p];a.e=w+a["xs"+p]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},Ot=9;for((t=bt.prototype).l=t.pr=0;0<--Ot;)t["xn"+Ot]=0,t["xs"+Ot]="";t.xs0="",t._next=t._prev=t.xfirst=t.data=t.plugin=t.setRatio=t.rxp=null,t.appendXtra=function(t,e,n,i,r,o){var a=this,s=a.l;return a["xs"+s]+=o&&(s||a["xs"+s])?" "+t:t||"",n||0===s||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=i||"",0<s?(a.data["xn"+s]=e+n,a.rxp["xn"+s]=r,a["xn"+s]=e,a.plugin||(a.xfirst=new bt(a,"xn"+s,e,n,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0)):(a.data={s:e+n},a.rxp={},a.s=e,a.c=n,a.r=r),a):(a["xs"+s]+=e+(i||""),a)};var St=function(t,e){e=e||{},this.p=e.prefix&&J(t)||t,y[t]=y[this.p]=this,this.format=e.formatter||yt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},Pt=r._registerComplexSpecialProp=function(t,e,n){"object"!=typeof e&&(e={parser:n});var i,r=t.split(","),o=e.defaultValue;for(n=n||[o],i=0;i<r.length;i++)e.prefix=0===i&&e.prefix,e.defaultValue=n[i]||o,new St(r[i],e)},Et=r._registerPluginProp=function(t){if(!y[t]){var c=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";Pt(t,{parser:function(t,e,n,i,r,o,a){var s=u.com.greensock.plugins[c];return s?(s._cssRegister(),y[n].parse(t,e,n,i,r,o,a)):(z("Error: "+c+" js file not loaded."),r)}})}};(t=St.prototype).parseComplex=function(t,e,n,i,r,o){var a,s,c,u,p,l,d=this.keyword;if(this.multi&&(N.test(n)||N.test(e)?(s=e.replace(N,"|").split("|"),c=n.replace(N,"|").split("|")):d&&(s=[e],c=[n])),c){for(u=c.length>s.length?c.length:s.length,a=0;a<u;a++)e=s[a]=s[a]||this.dflt,n=c[a]=c[a]||this.dflt,d&&(p=e.indexOf(d))!==(l=n.indexOf(d))&&(-1===l?s[a]=s[a].split(d).join(""):-1===p&&(s[a]+=" "+d));e=s.join(", "),n=c.join(", ")}return wt(t,this.p,e,n,this.clrs,this.dflt,i,this.pr,r,o)},t.parse=function(t,e,n,i,r,o,a){return this.parseComplex(t.style,this.format($(t,this.p,A,!1,this.dflt)),this.format(e),r,o)},U.registerSpecialProp=function(t,c,u){Pt(t,{parser:function(t,e,n,i,r,o,a){var s=new bt(t,n,0,0,r,2,n,!1,u);return s.plugin=o,s.setRatio=c(t,e,i._tween,n),s},priority:u})},U.useSVGTransformAttr=!0;var At,Mt,Dt,It,Ct,Tt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),jt=J("transform"),xt=K+"transform",Rt=J("transformOrigin"),Nt=null!==J("perspective"),Lt=r.Transform=function(){this.perspective=parseFloat(U.defaultTransformPerspective)||0,this.force3D=!(!1===U.defaultForce3D||!Nt)&&(U.defaultForce3D||"auto")},kt=ee.k.SVGElement,Bt=function(t,e,n){var i,r=F.createElementNS("http://www.w3.org/2000/svg",t),o=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(o,"$1-$2").toLowerCase(),n[i]);return e.appendChild(r),r},Gt=F.documentElement||{},Ut=(Ct=E||/Android/i.test(Y)&&!ee.k.chrome,F.createElementNS&&!Ct&&(Mt=Bt("svg",Gt),It=(Dt=Bt("rect",Mt,{width:100,height:50,x:100})).getBoundingClientRect().width,Dt.style[Rt]="50% 50%",Dt.style[jt]="scaleX(0.5)",Ct=It===Dt.getBoundingClientRect().width&&!(k&&Nt),Gt.removeChild(Mt)),Ct),Wt=function(t,e,n,i,r,o){var a,s,c,u,p,l,d,h,_,f,y,m,v,b,g=t._gsTransform,w=Yt(t,!0);g&&(v=g.xOrigin,b=g.yOrigin),(!i||(a=i.split(" ")).length<2)&&(0===(d=t.getBBox()).x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),a=[(-1!==(e=st(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),n.xOrigin=u=parseFloat(a[0]),n.yOrigin=p=parseFloat(a[1]),i&&w!==Ht&&(l=w[0],d=w[1],h=w[2],_=w[3],f=w[4],y=w[5],(m=l*_-d*h)&&(s=u*(_/m)+p*(-h/m)+(h*y-_*f)/m,c=u*(-d/m)+p*(l/m)-(l*y-d*f)/m,u=n.xOrigin=a[0]=s,p=n.yOrigin=a[1]=c)),g&&(o&&(n.xOffset=g.xOffset,n.yOffset=g.yOffset,g=n),r||!1!==r&&!1!==U.defaultSmoothOrigin?(s=u-v,c=p-b,g.xOffset+=s*w[0]+c*w[2]-s,g.yOffset+=s*w[1]+c*w[3]-c):g.xOffset=g.yOffset=0),o||t.setAttribute("data-svg-origin",a.join(" "))},Ft=function(t){var e,n=d("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,o=this.style.cssText;if(Gt.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ft}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?i.insertBefore(this,r):i.appendChild(this),Gt.removeChild(n),this.style.cssText=o,e},Vt=function(t){return!(!kt||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!function(e){try{return e.getBBox()}catch(t){return Ft.call(e,!0)}}(t))},Ht=[1,0,0,1,0,0],Yt=function(t,e){var n,i,r,o,a,s,c=t._gsTransform||new Lt,u=t.style;if(jt?i=$(t,xt,null,!0):t.currentStyle&&(i=(i=t.currentStyle.filter.match(l))&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),c.x||0,c.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,!jt||!(s=!Z(t)||"none"===Z(t).display)&&t.parentNode||(s&&(o=u.display,u.display="block"),t.parentNode||(a=1,Gt.appendChild(t)),n=!(i=$(t,xt,null,!0))||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,o?u.display=o:s&&Xt(u,"display"),a&&Gt.removeChild(t)),(c.svg||t.getCTM&&Vt(t))&&(n&&-1!==(u[jt]+"").indexOf("matrix")&&(i=u[jt],n=0),r=t.getAttribute("transform"),n&&r&&(i="matrix("+(r=t.transform.baseVal.consolidate().matrix).a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",n=0)),n)return Ht;for(r=(i||"").match(C)||[],Ot=r.length;-1<--Ot;)o=Number(r[Ot]),r[Ot]=(a=o-(o|=0))?(1e5*a+(a<0?-.5:.5)|0)/1e5+o:o;return e&&6<r.length?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Qt=r.getTransform=function(t,e,n,i){if(t._gsTransform&&n&&!i)return t._gsTransform;var r,o,a,s,c,u,p=n&&t._gsTransform||new Lt,l=p.scaleX<0,d=Nt&&(parseFloat($(t,Rt,e,!1,"0 0 0").split(" ")[2])||p.zOrigin)||0,h=parseFloat(U.defaultTransformPerspective)||0;if(p.svg=!(!t.getCTM||!Vt(t)),p.svg&&(Wt(t,$(t,Rt,e,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),At=U.useSVGTransformAttr||Ut),(r=Yt(t))!==Ht){if(16===r.length){var _,f,y,m,v,b=r[0],g=r[1],w=r[2],O=r[3],S=r[4],P=r[5],E=r[6],A=r[7],M=r[8],D=r[9],I=r[10],C=r[12],T=r[13],j=r[14],x=r[11],R=Math.atan2(E,I);p.zOrigin&&(C=M*(j=-p.zOrigin)-r[12],T=D*j-r[13],j=I*j+p.zOrigin-r[14]),p.rotationX=R*W,R&&(_=S*(m=Math.cos(-R))+M*(v=Math.sin(-R)),f=P*m+D*v,y=E*m+I*v,M=S*-v+M*m,D=P*-v+D*m,I=E*-v+I*m,x=A*-v+x*m,S=_,P=f,E=y),R=Math.atan2(-w,I),p.rotationY=R*W,R&&(f=g*(m=Math.cos(-R))-D*(v=Math.sin(-R)),y=w*m-I*v,D=g*v+D*m,I=w*v+I*m,x=O*v+x*m,b=_=b*m-M*v,g=f,w=y),R=Math.atan2(g,b),p.rotation=R*W,R&&(_=b*(m=Math.cos(R))+g*(v=Math.sin(R)),f=S*m+P*v,y=M*m+D*v,g=g*m-b*v,P=P*m-S*v,D=D*m-M*v,b=_,S=f,M=y),p.rotationX&&359.9<Math.abs(p.rotationX)+Math.abs(p.rotation)&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),R=Math.atan2(S,P),p.scaleX=(1e5*Math.sqrt(b*b+g*g+w*w)+.5|0)/1e5,p.scaleY=(1e5*Math.sqrt(P*P+E*E)+.5|0)/1e5,p.scaleZ=(1e5*Math.sqrt(M*M+D*D+I*I)+.5|0)/1e5,b/=p.scaleX,S/=p.scaleY,g/=p.scaleX,P/=p.scaleY,2e-5<Math.abs(R)?(p.skewX=R*W,S=0,"simple"!==p.skewType&&(p.scaleY*=1/Math.cos(R))):p.skewX=0,p.perspective=x?1/(x<0?-x:x):0,p.x=C,p.y=T,p.z=j,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*b-p.yOrigin*S),p.y-=p.yOrigin-(p.yOrigin*g-p.xOrigin*P))}else if(!Nt||i||!r.length||p.x!==r[4]||p.y!==r[5]||!p.rotationX&&!p.rotationY){var N=6<=r.length,L=N?r[0]:1,k=r[1]||0,B=r[2]||0,G=N?r[3]:1;p.x=r[4]||0,p.y=r[5]||0,a=Math.sqrt(L*L+k*k),s=Math.sqrt(G*G+B*B),c=L||k?Math.atan2(k,L)*W:p.rotation||0,u=B||G?Math.atan2(B,G)*W+c:p.skewX||0,p.scaleX=a,p.scaleY=s,p.rotation=c,p.skewX=u,Nt&&(p.rotationX=p.rotationY=p.z=0,p.perspective=h,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*L+p.yOrigin*B),p.y-=p.yOrigin-(p.xOrigin*k+p.yOrigin*G))}for(o in 90<Math.abs(p.skewX)&&Math.abs(p.skewX)<270&&(l?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180)),p.zOrigin=d,p)p[o]<2e-5&&-2e-5<p[o]&&(p[o]=0)}return n&&(t._gsTransform=p).svg&&(At&&t.style[jt]?ee.l.delayedCall(.001,function(){Xt(t.style,jt)}):!At&&t.getAttribute("transform")&&ee.l.delayedCall(.001,function(){t.removeAttribute("transform")})),p},qt=function(t){var e,n,i=this.data,r=-i.rotation*B,o=r+i.skewX*B,a=(Math.cos(r)*i.scaleX*1e5|0)/1e5,s=(Math.sin(r)*i.scaleX*1e5|0)/1e5,c=(Math.sin(o)*-i.scaleY*1e5|0)/1e5,u=(Math.cos(o)*i.scaleY*1e5|0)/1e5,p=this.t.style,l=this.t.currentStyle;if(l){n=s,s=-c,c=-n,e=l.filter,p.filter="";var d,h,_=this.t.offsetWidth,f=this.t.offsetHeight,y="absolute"!==l.position,m="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+s+", M21="+c+", M22="+u,v=i.x+_*i.xPercent/100,b=i.y+f*i.yPercent/100;if(null!=i.ox&&(v+=(d=(i.oxp?_*i.ox*.01:i.ox)-_/2)-(d*a+(h=(i.oyp?f*i.oy*.01:i.oy)-f/2)*s),b+=h-(d*c+h*u)),m+=y?", Dx="+((d=_/2)-(d*a+(h=f/2)*s)+v)+", Dy="+(h-(d*c+h*u)+b)+")":", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?p.filter=e.replace(R,m):p.filter=m+" "+e,0!==t&&1!==t||1===a&&0===s&&0===c&&1===u&&(y&&-1===m.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&p.removeAttribute("filter")),!y){var g,w,O,S=E<8?1:-1;for(d=i.ieOffsetX||0,h=i.ieOffsetY||0,i.ieOffsetX=Math.round((_-((a<0?-a:a)*_+(s<0?-s:s)*f))/2+v),i.ieOffsetY=Math.round((f-((u<0?-u:u)*f+(c<0?-c:c)*_))/2+b),Ot=0;Ot<4;Ot++)O=(n=-1!==(g=l[w=ot[Ot]]).indexOf("px")?parseFloat(g):tt(this.t,w,parseFloat(g),g.replace(j,""))||0)!==i[w]?Ot<2?-i.ieOffsetX:-i.ieOffsetY:Ot<2?d-i.ieOffsetX:h-i.ieOffsetY,p[w]=(i[w]=Math.round(n-O*(0===Ot||2===Ot?1:S)))+"px"}}},zt=r.set3DTransformRatio=r.setTransformRatio=function(t){var e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w=this.data,O=this.t.style,S=w.rotation,P=w.rotationX,E=w.rotationY,A=w.scaleX,M=w.scaleY,D=w.scaleZ,I=w.x,C=w.y,T=w.z,j=w.svg,x=w.perspective,R=w.force3D,N=w.skewY,L=w.skewX;if(N&&(L+=N,S+=N),!((1!==t&&0!==t||"auto"!==R||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&R||T||x||E||P||1!==D)||At&&j||!Nt)S||L||j?(S*=B,g=L*B,1e5,n=Math.cos(S)*A,o=Math.sin(S)*A,i=Math.sin(S-g)*-M,a=Math.cos(S-g)*M,g&&"simple"===w.skewType&&(e=Math.tan(g-N*B),i*=e=Math.sqrt(1+e*e),a*=e,N&&(e=Math.tan(N*B),n*=e=Math.sqrt(1+e*e),o*=e)),j&&(I+=w.xOrigin-(w.xOrigin*n+w.yOrigin*i)+w.xOffset,C+=w.yOrigin-(w.xOrigin*o+w.yOrigin*a)+w.yOffset,At&&(w.xPercent||w.yPercent)&&(f=this.t.getBBox(),I+=.01*w.xPercent*f.width,C+=.01*w.yPercent*f.height),I<(f=1e-6)&&-f<I&&(I=0),C<f&&-f<C&&(C=0)),b=(1e5*n|0)/1e5+","+(1e5*o|0)/1e5+","+(1e5*i|0)/1e5+","+(1e5*a|0)/1e5+","+I+","+C+")",j&&At?this.t.setAttribute("transform","matrix("+b):O[jt]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+b):O[jt]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+A+",0,0,"+M+","+I+","+C+")";else{if(k&&(A<(f=1e-4)&&-f<A&&(A=D=2e-5),M<f&&-f<M&&(M=D=2e-5),!x||w.z||w.rotationX||w.rotationY||(x=0)),S||L)S*=B,y=n=Math.cos(S),m=o=Math.sin(S),L&&(S-=L*B,y=Math.cos(S),m=Math.sin(S),"simple"===w.skewType&&(e=Math.tan((L-N)*B),y*=e=Math.sqrt(1+e*e),m*=e,w.skewY&&(e=Math.tan(N*B),n*=e=Math.sqrt(1+e*e),o*=e))),i=-m,a=y;else{if(!(E||P||1!==D||x||j))return void(O[jt]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) translate3d(":"translate3d(")+I+"px,"+C+"px,"+T+"px)"+(1!==A||1!==M?" scale("+A+","+M+")":""));n=a=1,i=o=0}p=1,r=s=c=u=l=d=0,h=x?-1/x:0,_=w.zOrigin,f=1e-6,",","0",(S=E*B)&&(y=Math.cos(S),l=h*(c=-(m=Math.sin(S))),r=n*m,s=o*m,h*=p=y,n*=y,o*=y),(S=P*B)&&(e=i*(y=Math.cos(S))+r*(m=Math.sin(S)),v=a*y+s*m,u=p*m,d=h*m,r=i*-m+r*y,s=a*-m+s*y,p*=y,h*=y,i=e,a=v),1!==D&&(r*=D,s*=D,p*=D,h*=D),1!==M&&(i*=M,a*=M,u*=M,d*=M),1!==A&&(n*=A,o*=A,c*=A,l*=A),(_||j)&&(_&&(I+=r*-_,C+=s*-_,T+=p*-_+_),j&&(I+=w.xOrigin-(w.xOrigin*n+w.yOrigin*i)+w.xOffset,C+=w.yOrigin-(w.xOrigin*o+w.yOrigin*a)+w.yOffset),I<f&&-f<I&&(I="0"),C<f&&-f<C&&(C="0"),T<f&&-f<T&&(T=0)),b=w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix3d(":"matrix3d(",b+=(n<f&&-f<n?"0":n)+","+(o<f&&-f<o?"0":o)+","+(c<f&&-f<c?"0":c),b+=","+(l<f&&-f<l?"0":l)+","+(i<f&&-f<i?"0":i)+","+(a<f&&-f<a?"0":a),P||E||1!==D?(b+=","+(u<f&&-f<u?"0":u)+","+(d<f&&-f<d?"0":d)+","+(r<f&&-f<r?"0":r),b+=","+(s<f&&-f<s?"0":s)+","+(p<f&&-f<p?"0":p)+","+(h<f&&-f<h?"0":h)+","):b+=",0,0,0,0,1,0,",b+=I+","+C+","+T+","+(x?1+-T/x:1)+")",O[jt]=b}};(t=Lt.prototype).x=t.y=t.z=t.skewX=t.skewY=t.rotation=t.rotationX=t.rotationY=t.zOrigin=t.xPercent=t.yPercent=t.xOffset=t.yOffset=0,t.scaleX=t.scaleY=t.scaleZ=1,Pt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,n,i,r,o,a){if(i._lastParsedTransform===a)return r;var s,c=(i._lastParsedTransform=a).scale&&"function"==typeof a.scale?a.scale:0;"function"==typeof a[n]&&(s=a[n],a[n]=e),c&&(a.scale=c(I,t));var u,p,l,d,h,_,f,y,m,v=t._gsTransform,b=t.style,g=Tt.length,w=a,O={},S="transformOrigin",P=Qt(t,A,!0,w.parseTransform),E=w.transform&&("function"==typeof w.transform?w.transform(I,D):w.transform);if(P.skewType=w.skewType||P.skewType||U.defaultSkewType,i._transform=P,"rotationZ"in w&&(w.rotation=w.rotationZ),E&&"string"==typeof E&&jt)(p=V.style)[jt]=E,p.display="block",p.position="absolute",-1!==E.indexOf("%")&&(p.width=$(t,"width"),p.height=$(t,"height")),F.body.appendChild(V),u=Qt(V,null,!1),"simple"===P.skewType&&(u.scaleY*=Math.cos(u.skewX*B)),P.svg&&(_=P.xOrigin,f=P.yOrigin,u.x-=P.xOffset,u.y-=P.yOffset,(w.transformOrigin||w.svgOrigin)&&(E={},Wt(t,st(w.transformOrigin),E,w.svgOrigin,w.smoothOrigin,!0),_=E.xOrigin,f=E.yOrigin,u.x-=E.xOffset-P.xOffset,u.y-=E.yOffset-P.yOffset),(_||f)&&(y=Yt(V,!0),u.x-=_-(_*y[0]+f*y[2]),u.y-=f-(_*y[1]+f*y[3]))),F.body.removeChild(V),u.perspective||(u.perspective=P.perspective),null!=w.xPercent&&(u.xPercent=ut(w.xPercent,P.xPercent)),null!=w.yPercent&&(u.yPercent=ut(w.yPercent,P.yPercent));else if("object"==typeof w){if(u={scaleX:ut(null!=w.scaleX?w.scaleX:w.scale,P.scaleX),scaleY:ut(null!=w.scaleY?w.scaleY:w.scale,P.scaleY),scaleZ:ut(w.scaleZ,P.scaleZ),x:ut(w.x,P.x),y:ut(w.y,P.y),z:ut(w.z,P.z),xPercent:ut(w.xPercent,P.xPercent),yPercent:ut(w.yPercent,P.yPercent),perspective:ut(w.transformPerspective,P.perspective)},null!=(h=w.directionalRotation))if("object"==typeof h)for(p in h)w[p]=h[p];else w.rotation=h;"string"==typeof w.x&&-1!==w.x.indexOf("%")&&(u.x=0,u.xPercent=ut(w.x,P.xPercent)),"string"==typeof w.y&&-1!==w.y.indexOf("%")&&(u.y=0,u.yPercent=ut(w.y,P.yPercent)),u.rotation=pt("rotation"in w?w.rotation:"shortRotation"in w?w.shortRotation+"_short":P.rotation,P.rotation,"rotation",O),Nt&&(u.rotationX=pt("rotationX"in w?w.rotationX:"shortRotationX"in w?w.shortRotationX+"_short":P.rotationX||0,P.rotationX,"rotationX",O),u.rotationY=pt("rotationY"in w?w.rotationY:"shortRotationY"in w?w.shortRotationY+"_short":P.rotationY||0,P.rotationY,"rotationY",O)),u.skewX=pt(w.skewX,P.skewX),u.skewY=pt(w.skewY,P.skewY)}for(Nt&&null!=w.force3D&&(P.force3D=w.force3D,d=!0),(l=P.force3D||P.z||P.rotationX||P.rotationY||u.z||u.rotationX||u.rotationY||u.perspective)||null==w.scale||(u.scaleZ=1);-1<--g;)(1e-6<(E=u[m=Tt[g]]-P[m])||E<-1e-6||null!=w[m]||null!=G[m])&&(d=!0,r=new bt(P,m,P[m],E,r),m in O&&(r.e=O[m]),r.xs0=0,r.plugin=o,i._overwriteProps.push(r.n));return E=w.transformOrigin,P.svg&&(E||w.svgOrigin)&&(_=P.xOffset,f=P.yOffset,Wt(t,st(E),u,w.svgOrigin,w.smoothOrigin),r=gt(P,"xOrigin",(v?P:u).xOrigin,u.xOrigin,r,S),r=gt(P,"yOrigin",(v?P:u).yOrigin,u.yOrigin,r,S),_===P.xOffset&&f===P.yOffset||(r=gt(P,"xOffset",v?_:P.xOffset,P.xOffset,r,S),r=gt(P,"yOffset",v?f:P.yOffset,P.yOffset,r,S)),E="0px 0px"),(E||Nt&&l&&P.zOrigin)&&(jt?(d=!0,m=Rt,E=(E||$(t,m,A,!1,"50% 50%"))+"",(r=new bt(b,m,0,0,r,-1,S)).b=b[m],r.plugin=o,r.xs0=r.e=Nt?(p=P.zOrigin,E=E.split(" "),P.zOrigin=(2<E.length&&(0===p||"0px"!==E[2])?parseFloat(E[2]):p)||0,r.xs0=r.e=E[0]+" "+(E[1]||"50%")+" 0px",(r=new bt(P,"zOrigin",0,0,r,-1,r.n)).b=p,P.zOrigin):E):st(E+"",P)),d&&(i._transformType=P.svg&&At||!l&&3!==this._transformType?2:3),s&&(a[n]=s),c&&(a.scale=c),r},prefix:!0}),Pt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Pt("borderRadius",{defaultValue:"0px",parser:function(t,e,n,i,r,o){e=this.format(e);var a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],S=t.style;for(_=parseFloat(t.offsetWidth),f=parseFloat(t.offsetHeight),a=e.split(" "),s=0;s<O.length;s++)this.p.indexOf("border")&&(O[s]=J(O[s])),-1!==(p=u=$(t,O[s],A,!1,"0px")).indexOf(" ")&&(p=(u=p.split(" "))[0],u=u[1]),l=c=a[s],d=parseFloat(p),m=p.substr((d+"").length),""===(y=(v="="===l.charAt(1))?(h=parseInt(l.charAt(0)+"1",10),l=l.substr(2),h*=parseFloat(l),l.substr((h+"").length-(h<0?1:0))||""):(h=parseFloat(l),l.substr((h+"").length)))&&(y=P[n]||m),y!==m&&(b=tt(t,"borderLeft",d,m),g=tt(t,"borderTop",d,m),u="%"===y?(p=b/_*100+"%",g/f*100+"%"):"em"===y?(p=b/(w=tt(t,"borderLeft",1,"em"))+"em",g/w+"em"):(p=b+"px",g+"px"),v&&(l=parseFloat(p)+h+y,c=parseFloat(u)+h+y)),r=wt(S,O[s],p+" "+u,l+" "+c,!1,"0px",r);return r},prefix:!0,formatter:yt("0px 0px 0px 0px",!1,!0)}),Pt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,n,i,r,o){return wt(t.style,n,this.format($(t,n,A,!1,"0px 0px")),this.format(e),!1,"0px",r)},prefix:!0,formatter:yt("0px 0px",!1,!0)}),Pt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,n,i,r,o){var a,s,c,u,p,l,d="background-position",h=A||Z(t,null),_=this.format((h?E?h.getPropertyValue(d+"-x")+" "+h.getPropertyValue(d+"-y"):h.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),f=this.format(e);if(-1!==_.indexOf("%")!=(-1!==f.indexOf("%"))&&f.split(",").length<2&&(l=$(t,"backgroundImage").replace(S,""))&&"none"!==l){for(a=_.split(" "),s=f.split(" "),H.setAttribute("src",l),c=2;-1<--c;)(u=-1!==(_=a[c]).indexOf("%"))!==(-1!==s[c].indexOf("%"))&&(p=0===c?t.offsetWidth-H.width:t.offsetHeight-H.height,a[c]=u?parseFloat(_)/100*p+"px":parseFloat(_)/p*100+"%");_=a.join(" ")}return this.parseComplex(t.style,_,f,r,o)},formatter:st}),Pt("backgroundSize",{defaultValue:"0 0",formatter:function(t){return"co"===(t+="").substr(0,2)?t:st(-1===t.indexOf(" ")?t+" "+t:t)}}),Pt("perspective",{defaultValue:"0px",prefix:!0}),Pt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Pt("transformStyle",{prefix:!0}),Pt("backfaceVisibility",{prefix:!0}),Pt("userSelect",{prefix:!0}),Pt("margin",{parser:mt("marginTop,marginRight,marginBottom,marginLeft")}),Pt("padding",{parser:mt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Pt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,n,i,r,o){var a,s,c;return e=E<9?(s=t.currentStyle,c=E<8?" ":",",a="rect("+s.clipTop+c+s.clipRight+c+s.clipBottom+c+s.clipLeft+")",this.format(e).split(",").join(c)):(a=this.format($(t,this.p,A,!1,this.dflt)),this.format(e)),this.parseComplex(t.style,a,e,r,o)}}),Pt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Pt("autoRound,strictUnits",{parser:function(t,e,n,i,r){return r}}),Pt("border",{defaultValue:"0px solid #000",parser:function(t,e,n,i,r,o){var a=$(t,"borderTopWidth",A,!1,"0px"),s=this.format(e).split(" "),c=s[0].replace(j,"");return"px"!==c&&(a=parseFloat(a)/tt(t,"borderTopWidth",1,c)+c),this.parseComplex(t.style,this.format(a+" "+$(t,"borderTopStyle",A,!1,"solid")+" "+$(t,"borderTopColor",A,!1,"#000")),s.join(" "),r,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ft)||["#000"])[0]}}),Pt("borderWidth",{parser:mt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Pt("float,cssFloat,styleFloat",{parser:function(t,e,n,i,r,o){var a=t.style,s="cssFloat"in a?"cssFloat":"styleFloat";return new bt(a,s,0,0,r,-1,n,!1,0,a[s],e)}});var Kt=function(t){var e,n=this.t,i=n.filter||$(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(e=-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(n.removeAttribute("filter"),!$(this.data,"filter")):(n.filter=i.replace(o,""),!0)),e||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),-1===i.indexOf("pacity")?0===r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(x,"opacity="+r))};Pt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,n,i,r,o){var a=parseFloat($(t,"opacity",A,!1,"1")),s=t.style,c="autoAlpha"===n;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),c&&1===a&&"hidden"===$(t,"visibility",A)&&0!==e&&(a=0),Q?r=new bt(s,"opacity",a,e-a,r):((r=new bt(s,"opacity",100*a,100*(e-a),r)).xn1=c?1:0,s.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=o,r.setRatio=Kt),c&&((r=new bt(s,"visibility",0,0,r,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(r.n),i._overwriteProps.push(n)),r}});var Xt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(a,"-$1").toLowerCase())):t.removeAttribute(e))},Jt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,n=this.t.style;e;)e.v?n[e.p]=e.v:Xt(n,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Pt("className",{parser:function(t,e,n,i,r,o,a){var s,c,u,p,l,d=t.getAttribute("class")||"",h=t.style.cssText;if((r=i._classNamePT=new bt(t,n,0,0,r,2)).setRatio=Jt,r.pr=-11,_=!0,r.b=d,c=nt(t,A),u=t._gsClassPT){for(p={},l=u.data;l;)p[l.p]=1,l=l._next;u.setRatio(1)}return(t._gsClassPT=r).e="="!==e.charAt(1)?e:d.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",r.e),s=it(t,c,nt(t),a,p),t.setAttribute("class",d),r.data=s.firstMPT,t.style.cssText=h,r=r.xfirst=i.parse(t,s.difs,r,o)}});var Zt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,n,i,r,o,a=this.t.style,s=y.transform.parse;if("all"===this.e)r=!(a.cssText="");else for(i=(e=this.e.split(" ").join("").split(",")).length;-1<--i;)n=e[i],y[n]&&(y[n].parse===s?r=!0:n="transformOrigin"===n?Rt:y[n].p),Xt(a,n);r&&(Xt(a,jt),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Pt("clearProps",{parser:function(t,e,n,i,r){return(r=new bt(t,n,0,0,r,2)).setRatio=Zt,r.e=e,r.pr=-10,r.data=i._tween,_=!0,r}}),t="bezier,throwProps,physicsProps,physics2D".split(","),Ot=t.length;Ot--;)Et(t[Ot]);(t=U.prototype)._firstPT=t._lastParsedTransform=t._transform=null,t._onInitTween=function(t,e,n,i){if(!t.nodeType)return!1;this._target=D=t,this._tween=n,this._vars=e,I=i,M=e.autoRound,_=!1,P=e.suffixMap||U.suffixMap,A=Z(t,""),f=this._overwriteProps;var r,o,a,s,c,u,p,l,d,h=t.style;if(m&&""===h.zIndex&&("auto"!==(r=$(t,"zIndex",A))&&""!==r||this._addLazySet(h,"zIndex",0)),"string"==typeof e&&(s=h.cssText,r=nt(t,A),h.cssText=s+";"+e,r=it(t,r,nt(t)).difs,!Q&&w.test(e)&&(r.opacity=parseFloat(RegExp.$1)),e=r,h.cssText=s),e.className?this._firstPT=o=y.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=o=this.parse(t,e,null),this._transformType){for(d=3===this._transformType,jt?v&&(m=!0,""===h.zIndex&&("auto"!==(p=$(t,"zIndex",A))&&""!==p||this._addLazySet(h,"zIndex",0)),b&&this._addLazySet(h,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(d?"visible":"hidden"))):h.zoom=1,a=o;a&&a._next;)a=a._next;l=new bt(t,"transform",0,0,null,2),this._linkCSSP(l,null,a),l.setRatio=jt?zt:qt,l.data=this._transform||Qt(t,A,!0),l.tween=n,l.pr=-1,f.pop()}if(_){for(;o;){for(u=o._next,a=s;a&&a.pr>o.pr;)a=a._next;(o._prev=a?a._prev:c)?o._prev._next=o:s=o,(o._next=a)?a._prev=o:c=o,o=u}this._firstPT=s}return!0},t.parse=function(t,e,n,i){var r,o,a,s,c,u,p,l,d,h,_=t.style;for(r in e){if("function"==typeof(u=e[r])&&(u=u(I,D)),o=y[r])n=o.parse(t,u,r,this,n,i,e);else{if("--"===r.substr(0,2)){this._tween._propLookup[r]=this._addTween.call(this._tween,t.style,"setProperty",Z(t).getPropertyValue(r)+"",u+"",r,!1,r);continue}c=$(t,r,A)+"",d="string"==typeof u,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||d&&O.test(u)?(d||(u=(3<(u=ht(u)).length?"rgba(":"rgb(")+u.join(",")+")"),n=wt(_,r,c,u,!0,"transparent",n,0,i)):d&&L.test(u)?n=wt(_,r,c,u,!0,null,n,0,i):(p=(a=parseFloat(c))||0===a?c.substr((a+"").length):"",""!==c&&"auto"!==c||(p="width"===r||"height"===r?(a=at(t,r,A),"px"):"left"===r||"top"===r?(a=et(t,r,A),"px"):(a="opacity"!==r?0:1,"")),""===(l=(h=d&&"="===u.charAt(1))?(s=parseInt(u.charAt(0)+"1",10),u=u.substr(2),s*=parseFloat(u),u.replace(j,"")):(s=parseFloat(u),d?u.replace(j,""):""))&&(l=r in P?P[r]:p),u=s||0===s?(h?s+a:s)+l:e[r],p!==l&&(""===l&&"lineHeight"!==r||(s||0===s)&&a&&(a=tt(t,r,a,p),"%"===l?(a/=tt(t,r,100,"%")/100,!0!==e.strictUnits&&(c=a+"%")):"em"===l||"rem"===l||"vw"===l||"vh"===l?a/=tt(t,r,1,l):"px"!==l&&(s=tt(t,r,s,l),l="px"),h&&(s||0===s)&&(u=s+a+l))),h&&(s+=a),!a&&0!==a||!s&&0!==s?void 0!==_[r]&&(u||u+""!="NaN"&&null!=u)?(n=new bt(_,r,s||a||0,0,n,-1,r,!1,0,c,u)).xs0="none"!==u||"display"!==r&&-1===r.indexOf("Style")?u:c:z("invalid "+r+" tween value: "+e[r]):(n=new bt(_,r,a,s-a,n,0,r,!1!==M&&("px"===l||"zIndex"===r),0,c,u)).xs0=l)}i&&n&&!n.plugin&&(n.plugin=i)}return n},t.setRatio=function(t){var e,n,i,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=r.r(e):e<1e-6&&-1e-6<e&&(e=0),r.type)if(1===r.type)if(2===(i=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=r.r(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},t._enableTransforms=function(t){this._transform=this._transform||Qt(this._target,A,!0),this._transformType=this._transform.svg&&At||!t&&3!==this._transformType?2:3};var $t=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};t._addLazySet=function(t,e,n){var i=this._firstPT=new bt(t,e,0,0,this._firstPT,2);i.e=n,i.setRatio=$t,i.data=this},t._linkCSSP=function(t,e,n,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),n?n._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=n),t},t._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&(e.r=t[e.p]),e=e._next},t._kill=function(t){var e,n,i,r=t;if(t.autoAlpha||t.alpha){for(n in r={},t)r[n]=t[n];r.opacity=1,r.autoAlpha&&(r.visibility=1)}for(t.className&&(e=this._classNamePT)&&((i=e.xfirst)&&i._prev?this._linkCSSP(i._prev,e._next,i._prev._prev):i===this._firstPT&&(this._firstPT=e._next),e._next&&this._linkCSSP(e._next,e._next._next,i._prev),this._classNamePT=null),e=this._firstPT;e;)e.plugin&&e.plugin!==n&&e.plugin._kill&&(e.plugin._kill(t),n=e.plugin),e=e._next;return ee.j.prototype._kill.call(this,r)};var te=function(t,e,n){var i,r,o,a;if(t.slice)for(r=t.length;-1<--r;)te(t[r],e,n);else for(r=(i=t.childNodes).length;-1<--r;)a=(o=i[r]).type,o.style&&(e.push(nt(o)),n&&n.push(o)),1!==a&&9!==a&&11!==a||!o.childNodes.length||te(o,e,n)};return U.cascadeTo=function(t,e,n){var i,r,o,a,s=ee.l.to(t,e,n),c=[s],u=[],p=[],l=[],d=ee.l._internals.reservedProps;for(t=s._targets||s.target,te(t,u,l),s.render(e,!0,!0),te(t,p),s.render(0,!0,!0),s._enabled(!0),i=l.length;-1<--i;)if((r=it(l[i],u[i],p[i])).firstMPT){for(o in r=r.difs,n)d[o]&&(r[o]=n[o]);for(o in a={},r)a[o]=u[i][o];c.push(ee.l.fromTo(l[i],e,a,r))}return c},ee.j.activate([U]),U},!0);var a=ee.m.CSSPlugin,s=ee.k._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,n,i){var r,o;if("function"!=typeof t.setAttribute)return!1;for(r in e)"function"==typeof(o=e[r])&&(o=o(i,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",o+"",r,!1,r),this._overwriteProps.push(r);return!0}}),c=ee.k._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(t,e,n){return this._tween=n,!0}}),u=function(e){var n=e<1?Math.pow(10,(e+"").length-2):1;return function(t){return(Math.round(t/e)*e*n|0)/n}},p=function(t,e){for(;t;)t.f||t.blob||(t.m=e||Math.round),t=t._next},l=c.prototype;l._onInitAllProps=function(){var t,e,n,i,r=this._tween,o=r.vars.roundProps,a={},s=r._propLookup.roundProps;if("object"!=typeof o||o.push)for("string"==typeof o&&(o=o.split(",")),n=o.length;-1<--n;)a[o[n]]=Math.round;else for(i in o)a[i]=u(o[i]);for(i in a)for(t=r._firstPT;t;)e=t._next,t.pg?t.t._mod(a):t.n===i&&(2===t.f&&t.t?p(t.t._firstPT,a[i]):(this._add(t.t,i,t.s,t.c,a[i]),e&&(e._prev=t._prev),t._prev?t._prev._next=e:r._firstPT===t&&(r._firstPT=e),t._next=t._prev=null,r._propLookup[i]=s)),t=e;return!1},l._add=function(t,e,n,i,r){this._addTween(t,e,n,n+i,e,r||Math.round),this._overwriteProps.push(e)};var d=ee.k._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,n,i){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,o,a,s,c,u,p=!0===e.useRadians?2*Math.PI:360;for(r in e)"useRadians"!==r&&("function"==typeof(s=e[r])&&(s=s(i,t)),o=(u=(s+"").split("_"))[0],a=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),c=(s=this.finals[r]="string"==typeof o&&"="===o.charAt(1)?a+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0)-a,u.length&&(-1!==(o=u.join("_")).indexOf("short")&&(c%=p)!==c%(p/2)&&(c=c<0?c+p:c-p),-1!==o.indexOf("_cw")&&c<0?c=(c+9999999999*p)%p-(c/p|0)*p:-1!==o.indexOf("ccw")&&0<c&&(c=(c-9999999999*p)%p-(c/p|0)*p)),(1e-6<c||c<-1e-6)&&(this._addTween(t,r,a,a+c,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}});d._autoCSS=!0;var S=180/Math.PI,w=[],O=[],P=[],m={},y=ee.k._gsDefine.globals,v=function(t,e,n,i){n===i&&(n=i-(i-e)/1e6),t===e&&(e=t+(n-t)/1e6),this.a=t,this.b=e,this.c=n,this.d=i,this.da=i-t,this.ca=n-t,this.ba=e-t},E=function(t,e,n,i){var r={a:t},o={},a={},s={c:i},c=(t+e)/2,u=(e+n)/2,p=(n+i)/2,l=(c+u)/2,d=(u+p)/2,h=(d-l)/8;return r.b=c+(t-c)/4,o.b=l+h,r.c=o.a=(r.b+o.b)/2,o.c=a.a=(l+d)/2,a.b=d-h,s.b=p+(i-p)/4,a.c=s.a=(a.b+s.b)/2,[r,o,a,s]},b=function(t,e,n,i,r){var o,a,s,c,u,p,l,d,h,_,f,y,m,v=t.length-1,b=0,g=t[0].a;for(o=0;o<v;o++)a=(u=t[b]).a,s=u.d,c=t[b+1].d,d=r?(f=w[o],m=((y=O[o])+f)*e*.25/(i?.5:P[o]||.5),s-((p=s-(s-a)*(i?.5*e:0!==f?m/f:0))+(((l=s+(c-s)*(i?.5*e:0!==y?m/y:0))-p)*(3*f/(f+y)+.5)/4||0))):s-((p=s-(s-a)*e*.5)+(l=s+(c-s)*e*.5))/2,p+=d,l+=d,u.c=h=p,u.b=0!==o?g:g=u.a+.6*(u.c-u.a),u.da=s-a,u.ca=h-a,u.ba=g-a,n?(_=E(a,g,h,s),t.splice(b,1,_[0],_[1],_[2],_[3]),b+=4):b++,g=l;(u=t[b]).b=g,u.c=g+.4*(u.d-g),u.da=u.d-u.a,u.ca=u.c-u.a,u.ba=g-u.a,n&&(_=E(u.a,g,u.c,u.d),t.splice(b,1,_[0],_[1],_[2],_[3]))},g=function(t,e,n,i){var r,o,a,s,c,u,p=[];if(i)for(o=(t=[i].concat(t)).length;-1<--o;)"string"==typeof(u=t[o][e])&&"="===u.charAt(1)&&(t[o][e]=i[e]+Number(u.charAt(0)+u.substr(2)));if((r=t.length-2)<0)return p[0]=new v(t[0][e],0,0,t[0][e]),p;for(o=0;o<r;o++)a=t[o][e],s=t[o+1][e],p[o]=new v(a,0,0,s),n&&(c=t[o+2][e],w[o]=(w[o]||0)+(s-a)*(s-a),O[o]=(O[o]||0)+(c-s)*(c-s));return p[o]=new v(t[o][e],0,0,t[o+1][e]),p},h=function(t,e,n,i,r,o){var a,s,c,u,p,l,d,h,_={},f=[],y=o||t[0];for(s in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])f.push(s);if(1<t.length){for(h=t[t.length-1],d=!0,a=f.length;-1<--a;)if(s=f[a],.05<Math.abs(y[s]-h[s])){d=!1;break}d&&(t=t.concat(),o&&t.unshift(o),t.push(t[1]),o=t[t.length-3])}for(w.length=O.length=P.length=0,a=f.length;-1<--a;)s=f[a],m[s]=-1!==r.indexOf(","+s+","),_[s]=g(t,s,m[s],o);for(a=w.length;-1<--a;)w[a]=Math.sqrt(w[a]),O[a]=Math.sqrt(O[a]);if(!i){for(a=f.length;-1<--a;)if(m[s])for(l=(c=_[f[a]]).length-1,u=0;u<l;u++)p=c[u+1].da/O[u]+c[u].da/w[u]||0,P[u]=(P[u]||0)+p*p;for(a=P.length;-1<--a;)P[a]=Math.sqrt(P[a])}for(a=f.length,u=n?4:1;-1<--a;)c=_[s=f[a]],b(c,e,n,i,m[s]),d&&(c.splice(0,u),c.splice(c.length-u,u));return _},_=function(t,e,n){for(var i,r,o,a,s,c,u,p,l,d,h,_=1/n,f=t.length;-1<--f;)for(o=(d=t[f]).a,a=d.d-o,s=d.c-o,c=d.b-o,i=r=0,p=1;p<=n;p++)i=r-(r=((u=_*p)*u*a+3*(l=1-u)*(u*s+l*c))*u),e[h=f*n+p-1]=(e[h]||0)+i*i},A=ee.k._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,n){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var i,r,o,a,s,c=e.values||[],u={},p=c[0],l=e.autoRotate||n.vars.orientToBezier;for(i in this._autoRotate=l?l instanceof Array?l:[["x","y","rotation",!0===l?0:Number(l)||0]]:null,p)this._props.push(i);for(o=this._props.length;-1<--o;)i=this._props[o],this._overwriteProps.push(i),r=this._func[i]="function"==typeof t[i],u[i]=r?t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(t[i]),s||u[i]!==c[0][i]&&(s=u);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?h(c,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,s):function(t,e,n){var i,r,o,a,s,c,u,p,l,d,h,_={},f="cubic"===(e=e||"soft")?3:2,y="soft"===e,m=[];if(y&&n&&(t=[n].concat(t)),null==t||t.length<f+1)throw"invalid Bezier data";for(l in t[0])m.push(l);for(c=m.length;-1<--c;){for(_[l=m[c]]=s=[],d=0,p=t.length,u=0;u<p;u++)i=null==n?t[u][l]:"string"==typeof(h=t[u][l])&&"="===h.charAt(1)?n[l]+Number(h.charAt(0)+h.substr(2)):Number(h),y&&1<u&&u<p-1&&(s[d++]=(i+s[d-2])/2),s[d++]=i;for(p=d-f+1,u=d=0;u<p;u+=f)i=s[u],r=s[u+1],o=s[u+2],a=2===f?0:s[u+3],s[d++]=h=3===f?new v(i,r,o,a):new v(i,(2*r+i)/3,(2*r+o)/3,o);s.length=d}return _}(c,e.type,u),this._segCount=this._beziers[i].length,this._timeRes){var d=function(t,e){var n,i,r,o,a=[],s=[],c=0,u=0,p=(e=e>>0||6)-1,l=[],d=[];for(n in t)_(t[n],a,e);for(r=a.length,i=0;i<r;i++)c+=Math.sqrt(a[i]),d[o=i%e]=c,o===p&&(u+=c,l[o=i/e>>0]=d,s[o]=u,c=0,d=[]);return{length:u,lengths:s,segments:l}}(this._beziers,this._timeRes);this._length=d.length,this._lengths=d.lengths,this._segments=d.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(l=this._autoRotate)for(this._initialRotations=[],l[0]instanceof Array||(this._autoRotate=l=[l]),o=l.length;-1<--o;){for(a=0;a<3;a++)i=l[o][a],this._func[i]="function"==typeof t[i]&&t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)];i=l[o][2],this._initialRotations[o]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(t){var e,n,i,r,o,a,s,c,u,p,l=this._segCount,d=this._func,h=this._target,_=t!==this._startRatio;if(this._timeRes){if(u=this._lengths,p=this._curSeg,t*=this._length,i=this._li,t>this._l2&&i<l-1){for(c=l-1;i<c&&(this._l2=u[++i])<=t;);this._l1=u[i-1],this._li=i,this._curSeg=p=this._segments[i],this._s2=p[this._s1=this._si=0]}else if(t<this._l1&&0<i){for(;0<i&&(this._l1=u[--i])>=t;);0===i&&t<this._l1?this._l1=0:i++,this._l2=u[i],this._li=i,this._curSeg=p=this._segments[i],this._s1=p[(this._si=p.length-1)-1]||0,this._s2=p[this._si]}if(e=i,t-=this._l1,i=this._si,t>this._s2&&i<p.length-1){for(c=p.length-1;i<c&&(this._s2=p[++i])<=t;);this._s1=p[i-1],this._si=i}else if(t<this._s1&&0<i){for(;0<i&&(this._s1=p[--i])>=t;);0===i&&t<this._s1?this._s1=0:i++,this._s2=p[i],this._si=i}a=(i+(t-this._s1)/(this._s2-this._s1))*this._prec||0}else a=(t-(e=t<0?0:1<=t?l-1:l*t>>0)*(1/l))*l;for(n=1-a,i=this._props.length;-1<--i;)r=this._props[i],s=(a*a*(o=this._beziers[r][e]).da+3*n*(a*o.ca+n*o.ba))*a+o.a,this._mod[r]&&(s=this._mod[r](s,h)),d[r]?h[r](s):h[r]=s;if(this._autoRotate){var f,y,m,v,b,g,w,O=this._autoRotate;for(i=O.length;-1<--i;)r=O[i][2],g=O[i][3]||0,w=!0===O[i][4]?1:S,o=this._beziers[O[i][0]],f=this._beziers[O[i][1]],o&&f&&(o=o[e],f=f[e],y=o.a+(o.b-o.a)*a,y+=((v=o.b+(o.c-o.b)*a)-y)*a,v+=(o.c+(o.d-o.c)*a-v)*a,m=f.a+(f.b-f.a)*a,m+=((b=f.b+(f.c-f.b)*a)-m)*a,b+=(f.c+(f.d-f.c)*a-b)*a,s=_?Math.atan2(b-m,v-y)*w+g:this._initialRotations[i],this._mod[r]&&(s=this._mod[r](s,h)),d[r]?h[r](s):h[r]=s)}}}),f=A.prototype;A.bezierThrough=h,A.cubicToQuadratic=E,A._autoCSS=!0,A.quadraticToCubic=function(t,e,n){return new v(t,(2*e+t)/3,(2*e+n)/3,n)},A._cssRegister=function(){var t=y.CSSPlugin;if(t){var e=t._internals,h=e._parseToProxy,_=e._setPluginRatio,f=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,i,r,o){e instanceof Array&&(e={values:e}),o=new A;var a,s,c,u=e.values,p=u.length-1,l=[],d={};if(p<0)return r;for(a=0;a<=p;a++)c=h(t,u[a],i,r,o,p!==a),l[a]=c.end;for(s in e)d[s]=e[s];return d.values=l,(r=new f(t,"bezier",0,0,c.pt,2)).data=c,r.plugin=o,r.setRatio=_,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(a=!0===d.autoRotate?0:Number(d.autoRotate),d.autoRotate=null!=c.end.left?[["left","top","rotation",a,!1]]:null!=c.end.x&&[["x","y","rotation",a,!1]]),d.autoRotate&&(i._transform||i._enableTransforms(!1),c.autoRotate=i._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,i._overwriteProps.push("rotation")),o._onInitTween(c.proxy,d,i._tween),r}})}},f._mod=function(t){for(var e,n=this._overwriteProps,i=n.length;-1<--i;)(e=t[n[i]])&&"function"==typeof e&&(this._mod[n[i]]=e)},f._kill=function(t){var e,n,i=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],n=i.length;-1<--n;)i[n]===e&&i.splice(n,1);if(i=this._autoRotate)for(n=i.length;-1<--n;)t[i[n][2]]&&i.splice(n,1);return this._super._kill.call(this,t)},ee.k._gsDefine("easing.Back",["easing.Ease"],function(){var n,i,e,t,r=ee.k.GreenSockGlobals||ee.k,o=r.com.greensock,a=2*Math.PI,s=Math.PI/2,c=o._class,u=function(t,e){var n=c("easing."+t,function(){},!0),i=n.prototype=new ee.b;return i.constructor=n,i.getRatio=e,n},p=ee.b.register||function(){},l=function(t,e,n,i,r){var o=c("easing."+t,{easeOut:new e,easeIn:new n,easeInOut:new i},!0);return p(o,t),o},y=function(t,e,n){this.t=t,this.v=e,n&&(((this.next=n).prev=this).c=n.v-e,this.gap=n.t-t)},d=function(t,e){var n=c("easing."+t,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),i=n.prototype=new ee.b;return i.constructor=n,i.getRatio=e,i.config=function(t){return new n(t)},n},h=l("Back",d("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),d("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),d("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),_=c("easing.SlowMo",function(t,e,n){e=e||0===e?e:.7,null==t?t=.7:1<t&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===n},!0),f=_.prototype=new ee.b;return f.constructor=_,f.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},_.ease=new _(.7,.7),f.config=_.config=function(t,e,n){return new _(t,e,n)},(f=(n=c("easing.SteppedEase",function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0},!0)).prototype=new ee.b).constructor=n,f.getRatio=function(t){return t<0?t=0:1<=t&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},f.config=n.config=function(t,e){return new n(t,e)},(f=(i=c("easing.ExpoScaleEase",function(t,e,n){this._p1=Math.log(e/t),this._p2=e-t,this._p3=t,this._ease=n},!0)).prototype=new ee.b).constructor=i,f.getRatio=function(t){return this._ease&&(t=this._ease.getRatio(t)),(this._p3*Math.exp(this._p1*t)-this._p3)/this._p2},f.config=i.config=function(t,e,n){return new i(t,e,n)},(f=(e=c("easing.RoughEase",function(t){for(var e,n,i,r,o,a,s=(t=t||{}).taper||"none",c=[],u=0,p=0|(t.points||20),l=p,d=!1!==t.randomize,h=!0===t.clamp,_=t.template instanceof ee.b?t.template:null,f="number"==typeof t.strength?.4*t.strength:.4;-1<--l;)e=d?Math.random():1/p*l,n=_?_.getRatio(e):e,i="none"===s?f:"out"===s?(r=1-e)*r*f:"in"===s?e*e*f:e<.5?(r=2*e)*r*.5*f:(r=2*(1-e))*r*.5*f,d?n+=Math.random()*i-.5*i:l%2?n+=.5*i:n-=.5*i,h&&(1<n?n=1:n<0&&(n=0)),c[u++]={x:e,y:n};for(c.sort(function(t,e){return t.x-e.x}),a=new y(1,1,null),l=p;-1<--l;)o=c[l],a=new y(o.x,o.y,a);this._prev=new y(0,0,0!==a.t?a:a.next)},!0)).prototype=new ee.b).constructor=e,f.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return(this._prev=e).v+(t-e.t)/e.gap*e.c},f.config=function(t){return new e(t)},e.ease=new e,l("Bounce",u("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),u("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),u("BounceInOut",function(t){var e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),l("Circ",u("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),u("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),u("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),l("Elastic",(t=function(t,e,n){var i=c("easing."+t,function(t,e){this._p1=1<=t?t:1,this._p2=(e||n)/(t<1?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),r=i.prototype=new ee.b;return r.constructor=i,r.getRatio=e,r.config=function(t,e){return new i(t,e)},i})("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),t("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)},.3),t("ElasticInOut",function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),l("Expo",u("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),u("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),u("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),l("Sine",u("SineOut",function(t){return Math.sin(t*s)}),u("SineIn",function(t){return 1-Math.cos(t*s)}),u("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),c("easing.EaseLookup",{find:function(t){return ee.b.map[t]}},!0),p(r.SlowMo,"SlowMo","ease,"),p(e,"RoughEase","ease,"),p(n,"SteppedEase","ease,"),h},!0);var M=ee.m.Back,D=ee.m.Elastic,I=ee.m.Bounce,C=ee.m.RoughEase,T=ee.m.SlowMo,j=ee.m.SteppedEase,x=ee.m.Circ,R=ee.m.Expo,N=ee.m.Sine,L=ee.m.ExpoScaleEase,k=o;k._autoActivated=[i,r,a,s,A,c,d,M,D,I,C,T,j,x,R,N,L],n.d(e,"default",function(){return k}),n.d(e,"TweenLite",function(){return ee.l}),n.d(e,"TweenMax",function(){return k}),n.d(e,"TimelineLite",function(){return i}),n.d(e,"TimelineMax",function(){return r}),n.d(e,"CSSPlugin",function(){return a}),n.d(e,"AttrPlugin",function(){return s}),n.d(e,"BezierPlugin",function(){return A}),n.d(e,"RoundPropsPlugin",function(){return c}),n.d(e,"DirectionalRotationPlugin",function(){return d}),n.d(e,"TweenPlugin",function(){return ee.j}),n.d(e,"Ease",function(){return ee.b}),n.d(e,"Power0",function(){return ee.d}),n.d(e,"Power1",function(){return ee.e}),n.d(e,"Power2",function(){return ee.f}),n.d(e,"Power3",function(){return ee.g}),n.d(e,"Power4",function(){return ee.h}),n.d(e,"Linear",function(){return ee.c}),n.d(e,"Back",function(){return M}),n.d(e,"Elastic",function(){return D}),n.d(e,"Bounce",function(){return I}),n.d(e,"RoughEase",function(){return C}),n.d(e,"SlowMo",function(){return T}),n.d(e,"SteppedEase",function(){return j}),n.d(e,"Circ",function(){return x}),n.d(e,"Expo",function(){return R}),n.d(e,"Sine",function(){return N}),n.d(e,"ExpoScaleEase",function(){return L}),n.d(e,"_gsScope",function(){return ee.k})},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(522),n(523),n(17),n(524),n(28),n(86),n(25),n(170)],void 0===(r=function(t,e,_,n,f,i,y,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function DebugService(){var t=null!==e&&e.apply(this,arguments)||this;return t.history=[],t.historySize=0,t}return c(DebugService,e),DebugService.prototype.initialize=function(t){return u(this,void 0,void 0,function(){return p(this,function(t){return a.ComponentsFactory.instance.setDebug(this.addLog.bind(this,"core")),this._monitor=new i.Monitor,this.isDebugAvailable()&&(this._monitor.init(),this._monitor.show()),y.Core.instance.addFatalErrorHandler(this.onFatalError.bind(this)),y.Core.instance.eventRouter.addEventListener(r.CoreEvent.READY,this.onCoreReadyHandler.bind(this)),[2]})})},DebugService.prototype.getChannel=function(t){void 0===t&&(t="*");for(var e=[],n="string"==typeof t?[t]:t,i="*"===t,r=0,o=this.history;r<o.length;r++){var a=o[r];(i||-1!==n.indexOf(a.channel))&&e.push(a)}return e},DebugService.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addLog.apply(this,["unknown",t].concat(e))},DebugService.prototype.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addError.apply(this,["unknown",t].concat(e))},DebugService.prototype.info=function(t){this.addInfo.apply(this,["unknown"].concat([t]))},DebugService.prototype.sendLog=function(t,e,n,i,r){void 0===e&&(e=""),void 0===r&&(r="*")},DebugService.prototype.addError=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addToChannel(t,!0,!0,"ERROR",e)},DebugService.prototype.addLog=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addToChannel(t,!0,!0,"LOG",e)},DebugService.prototype.addLogUnlimited=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addToChannel(t,!0,!0,"LOG",e,null,1048576)},DebugService.prototype.addLogLimited=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.addToChannel(t,!0,!0,"LOG",n,null,e)},DebugService.prototype.addLogToConsole=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addToChannel(t,!0,!1,"LOG",e)},DebugService.prototype.addLogToConsoleCustom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addToChannel("",!0,!1,"LOG",[],null,null,t)},DebugService.prototype.addWarning=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addToChannel(t,!0,!0,"WARNING",e)},DebugService.prototype.addInfo=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.addToChannel(t,!0,!0,"INFO",e)},DebugService.prototype.addToChannel=function(t,e,n,i,r,o,a,s){if(void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),0<r.length&&n){var c=!this.isDebugAvailable(),u=new _.ConsoleItem([]);u.setData(r,null,c),u.channel=t,u.type=i,u.timeClient=o||new Date,f.Services.date&&(u.timeServer=o?null:f.Services.date.currentDate);var p=u.toString().length;if(c)for(var l=void 0;262144<this.historySize+p&&(l=this.history.shift());)this.historySize-=l.toString().length;this.history.push(u),this.historySize+=p,this.onLogAdded(u)}if(this.isDebugAvailable()&&e||"boolean"!=typeof y.Core.instance.config.devMode){var d=null;switch(i){case"ERROR":d=console.error;break;case"WARNING":d=console.warn;break;case"INFO":d=console.info;break;case"LOG":default:d=console.info}var h=_.ConsoleItem.dateToString(o||new Date);n?d.apply(console,["["+h+'"] [#'+t+"]"].concat(r)):null!=s?d.apply(console,s):d.apply(console,["%c["+h+'"] [#'+t+"]","background: gray; color:white; padding: 4px"].concat(r))}},DebugService.prototype.onLogAdded=function(t){},DebugService.prototype.isDebugAvailable=function(){return y.Core.instance.config.devMode||y.Core.instance.config.isUserAdmin()},DebugService.prototype.onCoreReadyHandler=function(){y.Core.instance.eventRouter.removeEventListener(r.CoreEvent.READY,this.onCoreReadyHandler.bind(this)),this.isDebugAvailable()&&(this._monitor.init(),this._monitor.show())},DebugService.prototype.errorHandler=function(t){},Object.defineProperty(DebugService.prototype,"monitor",{get:function(){return this._monitor},enumerable:!0,configurable:!0}),DebugService.prototype.onFatalError=function(t){var e=t.message;this.addError("main","DebugService.onFatalError: "+t.message,t,e),this.errorHandler(new n.RuntimeError(e,t.code))},DebugService}(o.Service);e.DebugService=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function Component(){}return Object.defineProperty(Component.prototype,"DEBUG_CHANNEL",{get:function(){return n.Utils.getNameFromInstance(this)},enumerable:!0,configurable:!0}),Component}();e.Component=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,D=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),I=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},C=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(91),n(66),n(271),n(526),n(272),n(527),n(173),n(541),n(273),n(542),n(543),n(109),n(172),n(544),n(28),n(17),n(6),n(93),n(108),n(275),n(25),n(35),n(36),n(545)],void 0===(r=function(t,e,a,s,c,u,p,l,d,h,_,r,o,f,i,y,m,v,b,g,w,O,n,S,P,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var A=uipixi.BaseEventTarget,M=function(e){function ResourcesService(){var t=null!==e&&e.apply(this,arguments)||this;return t.CHANNEL="resources",t.HTTPS_PATTERN=/^https?/,t.RESOURCE_ID_PATTERN=/^(?:APIOKWIDGET)|(?:APIVKWIDGET)$/,t.eventTarget=new A,t}return D(ResourcesService,e),ResourcesService.prototype.initialize=function(t){return I(this,void 0,void 0,function(){var e,n,i;return C(this,function(t){switch(t.label){case 0:return e=window.ELKA_HELPER,this._loadingProcessor=e?e.loadingProcessor:null,this._loadingProcessor&&this._loadingProcessor.start(),this._init=new b.BasePromise,this._resourcesBaseUrl=null,this.themesHash={},this.packsHash={},this.promisesHash=new core.Map,this._loadersMap={},n=new y.PIXIProviderLoader,this._loadersMap[s.ResourceType.XML]=n,this._loadersMap[s.ResourceType.TEXT]=n,this._loadersMap[s.ResourceType.IMAGE]=n,this._loadersMap[s.ResourceType.CURSOR]=n,this._loadersMap[s.ResourceType.SPINE]=n,this._loadersMap[s.ResourceType.SOUND]=n,this._loadersMap[s.ResourceType.FONT]=new o.FontLoader(n),this._loadersMap[s.ResourceType.JAVASCRIPT]=new r.JavascriptLoader,this._loadersMap[s.ResourceType.SPRITESHEET]=n,this._loadersMap[s.ResourceType.BITMAPFONT]=n,this._loadersMap[s.ResourceType.DMG]=n,[4,this.loadMapUrl()];case 1:return(i=t.sent())?(n.setBaseUrl(this._resourcesBaseUrl),this.startLoadResourcesDescriptorFile(i),[2,this._init]):[2]}})})},ResourcesService.prototype.setTheme=function(t){if(this._currentTheme&&this._currentTheme.id===t)v.Services.debug.addWarning("resources","setTheme - theme with id = "+t+" is already set!");else{var e=this.themesHash[t];if(null==e)return v.Services.debug.addError("resources","setTheme - theme with id = "+t+" not found!"),void m.Core.instance.eventRouter.dispatchEvent(new d.ResourcesServiceEvent(d.ResourcesServiceEvent.THEME_NOT_FOUND));this._currentTheme=e,m.Core.instance.eventRouter.dispatchEvent(new d.ResourcesServiceEvent(d.ResourcesServiceEvent.THEME_CHANGED))}},ResourcesService.prototype.getResources=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0);var i=new h.LoadPackPromise(t,n,e);return m.Core.instance.promiseManager.ask(i),i},ResourcesService.prototype.isResourceLoaded=function(t){var e=this.getResource(t);return null!==e&&e.loaded},ResourcesService.prototype.isLoadingFailed=function(t){var e=this.getResource(t);return null!==e&&e.loadingFailed},ResourcesService.prototype.getResource=function(t){var e=this._currentTheme.getResource(t);if(!e){var n=t.substring(0,t.indexOf("/"));0<n.length&&(e=this._currentTheme.getResource(n))}return e},ResourcesService.prototype.getResourcesByType=function(t){for(var e=[],n=0,i=this._currentTheme.resources;n<i.length;n++){var r=i[n];r.descriptor.type===t&&e.push(r)}return e},Object.defineProperty(ResourcesService.prototype,"currentTheme",{get:function(){return this._currentTheme},enumerable:!0,configurable:!0}),ResourcesService.prototype.getResourceBaseUrl=function(){if(null===this._resourcesBaseUrl)throw new Error("Resources Base Url is not set yet.");return this._resourcesBaseUrl},ResourcesService.prototype.loadMapUrl=function(){return I(this,void 0,void 0,function(){var e,n,i,r,o;return C(this,function(t){switch(t.label){case 0:e=null,(n=new g.Request).method="GET",n.url=this.config.serverConfigUrl.replace("{SERVER_HOST}",m.Core.instance.config.serverHost),n.withCredentials=m.Core.instance.config.devMode,n.data="socialId="+m.Core.instance.config.userIdPlatform,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,v.Services.network.sendRequest(n)];case 2:i=t.sent(),r=null;try{r=JSON.parse(i.data)}catch(t){}return r&&"object"==typeof r&&r.hasOwnProperty("mapUrl")&&"string"==typeof r.mapUrl?(this._staticDataEncrypt={enable:!0,version:1},r.hasOwnProperty("encrypt")&&(o=r.encrypt,this._staticDataEncrypt.enable=1===o.enable,this._staticDataEncrypt.version=o.version),e=r.mapUrl,this._resourcesBaseUrl=r.resourcesBaseUrl,[3,4]):(m.Core.instance.fatalError(new w.BaseError("Map config response has illegal format.")),[2,null]);case 3:return t.sent(),m.Core.instance.fatalError(new w.BaseError("Cannot load resource map config.")),[2,null];case 4:return[2,e]}})})},Object.defineProperty(ResourcesService.prototype,"staticDataEncrypt",{get:function(){return this._staticDataEncrypt},enumerable:!0,configurable:!0}),ResourcesService.prototype.startLoadResourcesDescriptorFile=function(t){var e=this._loadersMap[s.ResourceType.XML];if(e){var n=new i.XMLResource(new a.ResourceDescriptor(this.config.map.id,t,s.ResourceType.XML,0));e.addEventListener(f.ResourceLoaderEvent.ERROR,this.onLoadDescriptorFileError.bind(this)),e.addEventListener(f.ResourceLoaderEvent.LOADED,this.onLoadDescriptorFileComplete.bind(this)),e.load([n])}else v.Services.debug.addError(this.CHANNEL,"Error loading resources descriptor file. Not found XMLLoader")},ResourcesService.prototype.onLoadDescriptorFileError=function(t){v.Services.debug.addError(this.CHANNEL,"onLoadDescriptorFileError",t.resource,t.error),t.error.message="Can't load resource map!",this._init.reject(t.error)},ResourcesService.prototype.onLoadDescriptorFileComplete=function(t){v.Services.debug.addLog(this.CHANNEL,"onLoadDescriptorFileComplete",t.resource.descriptor.id);var e=this._loadersMap[s.ResourceType.XML];e.removeEventListener(f.ResourceLoaderEvent.ERROR,this.onLoadDescriptorFileError.bind(this)),e.removeEventListener(f.ResourceLoaderEvent.LOADED,this.onLoadDescriptorFileComplete.bind(this));var n=t.resource.getRawData();for(var i in this.themesHash=l.ResourcesDescriptionsXMLParser.parse(n),this.defaultTheme=this.themesHash[u.ResourcesThemeTypes.DEFAULT]||new c.ResourcesTheme(u.ResourcesThemeTypes.DEFAULT),this.themesHash)i!==u.ResourcesThemeTypes.DEFAULT&&(this.themesHash[i].base=this.defaultTheme);for(var r in this.setTheme(u.ResourcesThemeTypes.DEFAULT),this._loadersMap){var o=this._loadersMap[r];o.hasListener(O.ResourceLoaderProgressEvent.PROGRESS,this.onLoadFileProgress.bind(this))||o.addEventListener(O.ResourceLoaderProgressEvent.PROGRESS,this.onLoadFileProgress.bind(this)),o.hasListener(f.ResourceLoaderEvent.ERROR,this.onLoadFileError.bind(this))||o.addEventListener(f.ResourceLoaderEvent.ERROR,this.onLoadFileError.bind(this)),o.hasListener(f.ResourceLoaderEvent.LOADED,this.onLoadFileComplete.bind(this))||o.addEventListener(f.ResourceLoaderEvent.LOADED,this.onLoadFileComplete.bind(this))}m.Core.instance.promiseManager.attach(h.LoadPackPromise,this.handleLoadPackPromise.bind(this)),this._init.resolve(null)},ResourcesService.prototype.startLoadResourceItem=function(t){var e=this._loadersMap[t.descriptor.type];e?e.load([t]):v.Services.debug.addError(this.CHANNEL,"Not found loader for resource",arguments)},ResourcesService.prototype.onLoadFileProgress=function(t){this._loadingProcessor&&this._loadingProcessor.setProgress({progress:t.progress.progress,total:t.progress.total,showInPercent:!0})},ResourcesService.prototype.onLoadFileError=function(t){var n=this;if(!t.stopped){t.resource.onLoadingFail();var e=!0,i=this.packsHash[t.resource.descriptor.src];if(i&&(e=i.some(function(t){var e=n.promisesHash.get(t);return e&&e.logError})),e&&v.Services.debug.addError(this.CHANNEL,E.ErrorMessageConstants.ON_LOAD_FILE_ERROR,t.resource,t.error),i){for(var r=0,o=i;r<o.length;r++){var a=o[r];if(this.promisesHash.has(a)){var s=this.promisesHash.get(a);this.promisesHash.delete(a);var c=new w.BaseError(E.ErrorMessageConstants.CAN_NOT_LOAD_RESOURCE);c.extra=t.resource.descriptor.src,s.reject(c)}}delete this.packsHash[t.resource.descriptor.src]}else if(!this.RESOURCE_ID_PATTERN.test(t.resource.descriptor.id)&&!this.HTTPS_PATTERN.test(t.resource.descriptor.src)){var u=new w.BaseError(E.ErrorMessageConstants.CAN_NOT_LOAD_RESOURCE);throw u.extra=t.resource.descriptor.src,u}}},ResourcesService.prototype.onLoadFileComplete=function(t){var e=t.resource;if(this._loadingProcessor&&this._loadingProcessor.batchItemLoaded(e.descriptor.id),this.packsHash[t.resource.descriptor.src]){0<t.failsCount&&v.Services.debug.sendLog("Reload "+t.failsCount+" "+e.descriptor.src,"",S.LogFlag.CLIENT,P.LogLevel.Debug,"");for(var n=0,i=this.packsHash[t.resource.descriptor.src];n<i.length;n++){var r=i[n];if(r.update(),r.loaded&&this.promisesHash.has(r)){var o=this.promisesHash.get(r);this.promisesHash.delete(r),o.resolve(r),this.eventTarget.dispatchEvent(new d.ResourcesServiceEvent(d.ResourcesServiceEvent.LOADING_COMPLETE,r))}}delete this.packsHash[t.resource.descriptor.src]}},ResourcesService.prototype.getResourcesPack=function(t){for(var e=new p.ResourcesPack,n=0,i=t;n<i.length;n++){var r=i[n],o=this._currentTheme.getResource(r);if(null==o){if(!r)continue;if(0!==r.search(/^http[s]?:\/\//)){v.Services.debug.addWarning("resources","getResourcesPack: Resource with id = "+r+" not found in theme!");continue}o=new _.ImageResource(new a.ResourceDescriptor(r,r,s.ResourceType.IMAGE,0)),this.defaultTheme.addResource(o)}e.addResource(o)}return e},ResourcesService.prototype.loadPack=function(t){this.eventTarget.dispatchEvent(new d.ResourcesServiceEvent(d.ResourcesServiceEvent.LOADING_START,t));for(var e=[],n=0,i=t.resources;n<i.length;n++){var r=i[n];if(!r.loaded){var o=!0;(!r.descriptor.src||r.descriptor.src&&null==this.packsHash[r.descriptor.src])&&(o=!(this.packsHash[r.descriptor.src]=[])),this.packsHash[r.descriptor.src].push(t),o||e.push(r)}}for(var a=0,s=e;a<s.length;a++){var c=s[a];this.startLoadResourceItem(c)}},ResourcesService.prototype.handleLoadPackPromise=function(t){var e=this.getResourcesPack(t.resourcesIds);e.showLoading=t.showLoading,e.loaded?t.resolve(e):(this.promisesHash.set(e,t),this.loadPack(e))},ResourcesService}(n.Service);e.ResourcesService=M}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(272)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ResourcesTheme(t){var e=n.call(this)||this;return e._id=t,e}return a(ResourcesTheme,n),Object.defineProperty(ResourcesTheme.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),ResourcesTheme.prototype.getResource=function(t){return n.prototype.getResource.call(this,t)||(this.base?this.base.getResource(t):null)},ResourcesTheme.prototype.getThemeByResource=function(t){for(var e=this;null!=e;e=e.base)if(null!=e._resourcesHashById[t])return e},ResourcesTheme}(n.ResourcesPack);e.ResourcesTheme=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function ResourcesPack(){var t=e.call(this)||this;return t._resourcesHashById={},t._resources=[],t._loaded=!0,t}return o(ResourcesPack,e),ResourcesPack.prototype.addResource=function(t){this._resourcesHashById[t.descriptor.id],this._resourcesHashById[t.descriptor.id]=t,this._resources.push(t),this._loaded=this._loaded&&t.loaded},ResourcesPack.prototype.getResource=function(t){return this._resourcesHashById[t]},Object.defineProperty(ResourcesPack.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(ResourcesPack.prototype,"resources",{get:function(){return this._resources},enumerable:!0,configurable:!0}),ResourcesPack.prototype.update=function(){this._loaded=!0;for(var t=0,e=this._resources;t<e.length;t++){var n=e[t];this._loaded=this._loaded&&n.loaded}},ResourcesPack.prototype.getResourcesByType=function(t){for(var e=[],n=0,i=this._resources;n<i.length;n++){var r=i[n];r.descriptor.type===t&&e.push(r)}return e},ResourcesPack.prototype.getResourcesIdsByType=function(t){for(var e=[],n=0,i=this._resources;n<i.length;n++){var r=i[n];r.descriptor.type===t&&e.push(r.descriptor.id)}return e},ResourcesPack}(uipixi.BaseEventTarget);e.ResourcesPack=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function ImageResource(t){return e.call(this,t)||this}return a(ImageResource,e),ImageResource.prototype.setRawData=function(t){e.prototype.setRawData.call(this,t)},ImageResource.prototype.getany=function(){return null},ImageResource}(n.Resource);e.ImageResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(66)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=createjs.AbstractLoader,r=function(){function ResourcesUtils(){}return ResourcesUtils.getResourceType=function(t){switch(t.toLowerCase()){case"xml":return n.ResourceType.XML;case"image":return n.ResourceType.IMAGE;case"javascript":return n.ResourceType.JAVASCRIPT;case"json":case"text":case"txt":return n.ResourceType.TEXT;case"sound":return n.ResourceType.SOUND;case"font":return n.ResourceType.FONT;case"spine":return n.ResourceType.SPINE;case"spritesheet":return n.ResourceType.SPRITESHEET;case"cursor":return n.ResourceType.CURSOR;case"bitmapfont":return n.ResourceType.BITMAPFONT;case"dmg":return n.ResourceType.DMG}return n.ResourceType.UNDEFINED},ResourcesUtils.getLoadType=function(t){switch(t){case n.ResourceType.XML:return i.XML;case n.ResourceType.IMAGE:case n.ResourceType.CURSOR:return i.IMAGE;case n.ResourceType.JAVASCRIPT:return i.JAVASCRIPT;case n.ResourceType.TEXT:return i.TEXT;case n.ResourceType.SOUND:return i.SOUND}return i.TEXT},ResourcesUtils}();e.ResourcesUtils=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(109)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function ResourceLoaderProgressEvent(t,e,n,i){var r=o.call(this,t,e,null,i)||this;return r._progress=n,r}return a(ResourceLoaderProgressEvent,o),Object.defineProperty(ResourceLoaderProgressEvent.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),ResourceLoaderProgressEvent.PROGRESS="ResourceLoaderProgressEvent.PROGRESS",ResourceLoaderProgressEvent}(n.ResourceLoaderEvent);e.ResourceLoaderProgressEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,w=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),O=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},S=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(277),n(175),n(8),n(25),n(5),n(17),n(547),n(279),n(280)],void 0===(r=function(t,e,s,a,c,n,o,u,p,l,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=uipixi.UIFactory,r=uipixi.UIParserContext,h=uipixi.UILabel,_=uipixi.UIContainer,f=uipixi.UITextInput,y=uipixi.FontsParser,m=uipixi.ListenerPriority,v=uipixi.UIEvent,b=uipixi.BaseEventTarget,g=function(e){function ViewService(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventTarget=new b,t}return w(ViewService,e),ViewService.prototype.initialize=function(a){return O(this,void 0,void 0,function(){var e,n,i,r,o;return S(this,function(t){switch(t.label){case 0:return this._config=a,this._handlesHash=new core.Map,this._showedHandlers=[],[4,u.Services.resources.getResources(this._config.dependencies.resources)];case 1:for(e=t.sent(),n=this.createParserContext(e),d.instance.initialize(n),this._ui=this.createUI(),this._ui.cursors.init(),this._mediatorMap=new s.MediatorPointer("root"),this._classMediatorsMap=new core.Map,this._mediatorManager=new p.MediatorManager(this._classMediatorsMap,this._handlesHash),this._mediatorManager.initialize(this._ui.stage,this._mediatorMap),i=0,r=this._ui.stage.children;i<r.length;i++)(o=r[i]).addEventListener(v.CHILD_ADDED,this.onChildAdded.bind(this),m.HIGH),o.addEventListener(v.CHILD_REMOVED,this.onChildRemoved.bind(this),m.HIGH);return[2]}})})},ViewService.prototype.addChild=function(t,e,n){"string"==typeof e&&(e=d.instance.createUIElementByName(e));var i=new a.ViewHandle(e,n);return this._handlesHash.set(e,i),t.addChild(e),i},ViewService.prototype.mapMediatorToClass=function(t,e){var n=o.Utils.getNameFromClass(t),i=this._classMediatorsMap.get(n);i||(i=[],this._classMediatorsMap.set(n,i));var r={mediator:e};i.push(r)},ViewService.prototype.mapMediator=function(t,e,n,i){void 0===i&&(i=[]),this._mediatorMap.push(t,e,n,i)},ViewService.prototype.unmapMediator=function(t,e){this._mediatorMap.remove(t,e)},ViewService.prototype.show=function(t,e,n){var i;i="string"==typeof t?d.instance.createUIElementByName(t):t,n=n||this.ui.windows.defaultLayer;var r=e||new c.ViewContext,o=new a.ViewHandle(i,r);return this._showedHandlers.push(o),this._handlesHash.set(i,o),o.onShown.addEventListener(l.ViewHandleOnShownEvent.SHOWN,this.onViewHandleShown.bind(this)),this._ui.windows.show(o,n),o.onShown.shown||o.onShown.captured||o.onShown.capture().complete(),o},ViewService.prototype.onViewHandleShown=function(t){var e=t.viewHandle;e.onShown.removeEventListener(l.ViewHandleOnShownEvent.SHOWN,this.onViewHandleShown.bind(this)),this.eventTarget.dispatchEvent(new i.ViewServiceEvent(i.ViewServiceEvent.WINDOW_SHOWN,e))},ViewService.prototype.isShowed=function(t){for(var e in this._showedHandlers)if("string"==typeof t){if(0===this._showedHandlers[e].displayObject.name.indexOf(t))return!0}else if(this._showedHandlers[e].displayObject===t)return!0;return!1},ViewService.prototype.hideByWindowName=function(t){for(var e=0,n=this._showedHandlers;e<n.length;e++){var i=n[e];i.displayObject.name===t&&this.hide(i)}},ViewService.prototype.hide=function(t,e){if(-1===this._showedHandlers.indexOf(t))throw new Error("ViewService: window is not showed!");e=e||this.ui.windows.getLayer(t),this._showedHandlers.splice(this._showedHandlers.indexOf(t),1),this._ui.windows.hide(t,e),t.onShown.removeEventListener(l.ViewHandleOnShownEvent.SHOWN,this.onViewHandleShown.bind(this)),this._handlesHash.has(t.displayObject)&&this._handlesHash.delete(t.displayObject),t.onClose.resolve(null)},ViewService.prototype.createParserContext=function(t){var e=(new y).parse(t.getResource(this._config.fontsResourceId).getRawData());return new r([t.getResource(this._config.GUIResourceId).getRawData()],e)},ViewService.prototype.createUI=function(){throw new Error("ViewService.createUI must be override!")},Object.defineProperty(ViewService.prototype,"ui",{get:function(){return this._ui},enumerable:!0,configurable:!0}),Object.defineProperty(ViewService.prototype,"DEBUG_CHANNEL",{get:function(){return"view"},enumerable:!0,configurable:!0}),ViewService.prototype.localize=function(t){if(t instanceof h)this.localizeField(t,"text");else if(t instanceof f)this.localizeField(t,"placeholder");else if(t instanceof _)for(var e=0,n=t.children;e<n.length;e++){var i=n[e];this.localize(i)}},ViewService.prototype.localizeField=function(t,e){var n=t[e];if(n){var i=n.match(/@(.+)@/);if(i&&1<i.length){var r=i[1];t[e]=u.Services.localization.localize(r)}}},ViewService.prototype.onChildAdded=function(t){var e=t.data;this.localize(e),this.addContainerListeners(e)},ViewService.prototype.addContainerListeners=function(t){var e=t instanceof _?t:null;if(e){for(var n=0,i=e.children;n<i.length;n++){var r=i[n];this.addContainerListeners(r)}e.addEventListener(v.CHILD_ADDED,this.onChildAdded.bind(this)),e.addEventListener(v.CHILD_REMOVED,this.onChildRemoved.bind(this))}},ViewService.prototype.onChildRemoved=function(t){var e=t.data;this.removeContainerListeners(e)},ViewService.prototype.removeContainerListeners=function(t){if(t instanceof _){for(var e=0,n=t.children;e<n.length;e++){var i=n[e];this.removeContainerListeners(i)}t.removeEventListener(v.CHILD_ADDED,this.onChildAdded.bind(this)),t.removeEventListener(v.CHILD_REMOVED,this.onChildRemoved.bind(this))}},Object.defineProperty(ViewService.prototype,"renderer",{get:function(){return this._ui.pixi.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(ViewService.prototype,"mediatorManager",{get:function(){return this._mediatorManager},enumerable:!0,configurable:!0}),ViewService}(n.Service);e.ViewService=g}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(278),n(17)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function MediatorPointer(t){var e=n.call(this)||this;return e._name=t,e._mediatorConfigs=[],e}return a(MediatorPointer,n),Object.defineProperty(MediatorPointer.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),MediatorPointer.prototype.getChildByName=function(t){for(var e=0,n=this.children;e<n.length;e++){var i=n[e];if(i.name===t)return i}return null},MediatorPointer.prototype.push=function(t,e,n,i){var r=t.split(MediatorPointer.SEPARATOR);this.pushProcess(r,e,this,n,i)},MediatorPointer.prototype.remove=function(t,e){var n=t.split(MediatorPointer.SEPARATOR);this.removeProcess(n,e,this)},MediatorPointer.prototype.addMediatorClass=function(e,t,n){this._mediatorConfigs.some(function(t){return t.mediator===e})&&i.Services.debug.addError("view","Mediator Class is already attached:",e),this._mediatorConfigs.push({mediator:e,data:t,guards:n})},MediatorPointer.prototype.removeMediatorClass=function(t){for(var e=0;e<this._mediatorConfigs.length;e++){if(this._mediatorConfigs[e].mediator===t){this._mediatorConfigs.splice(e,1);break}}},MediatorPointer.prototype.pushProcess=function(t,e,n,i,r){void 0===r&&(r=[]);var o=t.shift(),a=n.getChildByName(o);a||(a=new MediatorPointer(o),n.addChild(a)),0===t.length?a.addMediatorClass(e,i,r):this.pushProcess(t,e,a,i,r)},MediatorPointer.prototype.removeProcess=function(t,e,n){var i=t.shift(),r=n.getChildByName(i);r&&(0===t.length?r.removeMediatorClass(e):this.removeProcess(t,e,r))},Object.defineProperty(MediatorPointer.prototype,"mediatorConfigs",{get:function(){return this._mediatorConfigs},enumerable:!0,configurable:!0}),MediatorPointer.SEPARATOR=".",MediatorPointer.ALL="*",MediatorPointer}(n.Node);e.MediatorPointer=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Node(){this._children=new Array}return Node.prototype.addChild=function(t){return this._children.push(t)-1},Node.prototype.removeChild=function(t){var e=this._children.indexOf(t);if(-1===e)throw new Error("Node.removeChild error: child not found!");return this._children.splice(e,1),this._children.length},Object.defineProperty(Node.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Node}();e.Node=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ViewHandleOnShownEvent(t,e){var n=i.call(this,t)||this;return n.viewHandle=e,n}return o(ViewHandleOnShownEvent,i),ViewHandleOnShownEvent.SHOWN="ViewHandleEvent.SHOWN",ViewHandleOnShownEvent}(uipixi.BaseEvent);e.ViewHandleOnShownEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ViewServiceEvent(t,e){var n=i.call(this,t)||this;return n.viewHandle=e,n}return o(ViewServiceEvent,i),ViewServiceEvent.WINDOW_SHOWN="ViewServiceEvent.WINDOW_SHOWN",ViewServiceEvent}(uipixi.BaseEvent);e.ViewServiceEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(17)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function SettingsService(){var t=null!==e&&e.apply(this,arguments)||this;return t._serverStorage=null,t}return a(SettingsService,e),Object.defineProperty(SettingsService.prototype,"isAvailable",{get:function(){return this._isAvailable},enumerable:!0,configurable:!0}),SettingsService.prototype.initialize=function(t){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){try{e=window.localStorage,n="__storage_test__",e.setItem(n,n),e.removeItem(n),this._isAvailable=!0}catch(t){this._isAvailable=!1}return[2]})})},SettingsService.prototype.setServerStorage=function(t){this._serverStorage=t},Object.defineProperty(SettingsService.prototype,"serverStorage",{get:function(){return this._serverStorage||i.Services.debug.addWarning("core","You cant use server storage while it is not initialized."),this._serverStorage},enumerable:!0,configurable:!0}),Object.defineProperty(SettingsService.prototype,"length",{get:function(){return this._isAvailable?localStorage.length:-1},enumerable:!0,configurable:!0}),SettingsService.prototype.clear=function(){this._isAvailable&&localStorage.clear()},SettingsService.prototype.getItem=function(t){return this._isAvailable?localStorage.getItem(t):null},SettingsService.prototype.key=function(t){return this._isAvailable?localStorage.key(t):null},SettingsService.prototype.removeItem=function(t){this._isAvailable&&localStorage.removeItem(t)},SettingsService.prototype.setItem=function(t,e){this._isAvailable&&localStorage.setItem(t,e)},SettingsService}(n.Service);e.SettingsService=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),g=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},w=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(28),n(283),n(110),n(552),n(17),n(93),n(61),n(56),n(94),n(177),n(35),n(36),n(284)],void 0===(r=function(t,e,n,u,i,c,p,l,d,h,_,f,y,m,v,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=uipixi.BaseEventTarget,o=function(e){function ServerService(){var t=null!==e&&e.apply(this,arguments)||this;return t.errorHandlers={},t.defaultErrorHandler=null,t.eventTarget=new r,t}return a(ServerService,e),ServerService.prototype.initialize=function(t){return g(this,void 0,void 0,function(){return w(this,function(t){return this.actionsTokenMap={},this._preErrorHandlers=[],u.Core.instance.promiseManager.attach(i.ServerActionPromise,this.handleServerPromise.bind(this)),[2]})})},ServerService.prototype.setDefaultErrorHandler=function(t){l.Services.debug.addInfo("server","setDefaultErrorHandler"),this.defaultErrorHandler=t},ServerService.prototype.addErrorHandler=function(t,e){var n=String(t);this.errorHandlers.hasOwnProperty(n)||(this.errorHandlers[n]=[]),this.errorHandlers[n].push(e)},ServerService.prototype.addPreErrorHandler=function(t){this._preErrorHandlers.push(t)},ServerService.prototype.send=function(t){var e=new i.ServerActionPromise(t);return u.Core.instance.promiseManager.ask(e),e},ServerService.prototype.processSendPromise=function(c){return g(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return w(this,function(t){switch(t.label){case 0:this.eventTarget.dispatchEvent(new b.ServerServiceEvent(b.ServerServiceEvent.REQUEST_START,c.action)),e=this.getUrl(c.action.controller,c.action.action),(n=new p.ServerProtocol).params=c.action.input.serializeObj(),n.controller=c.action.controller,n.action=c.action.action,(i=new d.Request).data=JSON.stringify(n.generateRequestBody()),i.url=e,i.timeout=ServerService.REQUEST_TIMEOUT,i.type="json",i.method="POST",i.withCredentials=u.Core.instance.config.devMode,o=r=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,l.Services.network.sendRequest(i)];case 2:return r=t.sent(),[3,4];case 3:return a=t.sent(),l.Services.debug.addError("server","ServerService: network error",a),r=null,o=new h.ServerError,a instanceof f.NetworkError?(o.code=_.ServerErrorCode.UNKNOWN,o.level=y.ServerErrorLevel.NETWORK,o.text=a.text,o.text||(o.text="Server service: Unknown network error."),o.httpErrorStatus=a.httpStatusCode):(o.code=_.ServerErrorCode.UNKNOWN,o.level=y.ServerErrorLevel.UNKNOWN,a instanceof Error?o.text=a.message:o.text="Server service: Unknown error."),c.action.success=!1,c.reject(o),[3,4];case 4:return null!==o?[3,6]:[4,this.onResponse(c,r)];case 5:t.sent(),t.label=6;case 6:return t.trys.push([6,8,,9]),[4,c];case 7:return t.sent(),[3,9];case 8:return s=t.sent(),l.Services.debug.addLog("server","error block"),s instanceof h.ServerError?(this.processError(s,c),s.sendLog&&l.Services.debug.sendLog("[Server error]: "+s.code,"",m.LogFlag.SERVER,v.LogLevel.Critical)):(l.Services.debug.addLog("server",s),l.Services.debug.sendLog("Unknown Server Service error","",m.LogFlag.CLIENT,v.LogLevel.Critical)),[3,9];case 9:return this.eventTarget.dispatchEvent(new b.ServerServiceEvent(b.ServerServiceEvent.REQUEST_COMPLETE,c.action)),[2]}})})},ServerService.prototype.getUrl=function(t,e){return u.Core.instance.config.protocol+"://"+u.Core.instance.config.serverHost+u.Core.instance.config.serverUrl+t+"/"+e},ServerService.prototype.onResponse=function(a,s){return g(this,void 0,void 0,function(){var e,n,i,r,o;return w(this,function(t){switch(t.label){case 0:return l.Services.debug.addLog("server","ServerService.onResponse"),s.data.server&&s.data.server.time&&s.data.server.ms&&(a.action.serverTime=s.data.server.time,a.action.serverMs=s.data.server.ms),e=null,n=new h.ServerError,s.status!==c.NetworkService.RESPONSE_STATUS_ERROR?[3,1]:(a.action.success=!1,n.text="Network error, request is failed.",n.code=_.ServerErrorCode.UNKNOWN,n.level=y.ServerErrorLevel.NETWORK,[3,8]);case 1:try{e=s.data}catch(t){e=null}return e?[3,2]:(n.text="Response don`t have valid JSON format.",n.code=_.ServerErrorCode.UNKNOWN,n.level=y.ServerErrorLevel.SERVER,[3,8]);case 2:if("object"!=typeof e.error)return[3,7];(i=e.error).hasOwnProperty("text")?n.text=i.text:n.text="Error text is missed.",i.hasOwnProperty("code")?n.code=parseInt(i.code):n.code=_.ServerErrorCode.UNKNOWN,n.level=y.ServerErrorLevel.SERVER,i.hasOwnProperty("data")&&(n.data=i.data),r=0,o=this._preErrorHandlers,t.label=3;case 3:return r<o.length?[4,(0,o[r])(n)]:[3,6];case 4:t.sent(),t.label=5;case 5:return r++,[3,3];case 6:return a.action.success=!1,[3,8];case 7:a.action.output&&a.action.output.parse(e),a.action.success=!0,t.label=8;case 8:return a.action.success?a.resolve(a.action):a.reject(n),[2,Promise.resolve(e)]}})})},ServerService.prototype.handleServerPromise=function(t){this.processSendPromise(t)},ServerService.prototype.processError=function(t,e){if(!t.propagationIsStopped){var n=String(t.code);if(this.errorHandlers.hasOwnProperty(n))for(var i=0,r=this.errorHandlers[n];i<r.length;i++){var o=r[i];if(t.propagationIsStopped)break;o.call(null,t)}else null!==this.defaultErrorHandler&&this.defaultErrorHandler.call(null,t)}},ServerService.REQUEST_TIMEOUT=6e4,ServerService}(n.Service);e.ServerService=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ServerActionPromise(t){var e=n.call(this)||this;return e._action=t,e}return a(ServerActionPromise,n),Object.defineProperty(ServerActionPromise.prototype,"action",{get:function(){return this._action},enumerable:!0,configurable:!0}),ServerActionPromise}(n.BasePromise);e.ServerActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ServerServiceEvent(t,e){return n.call(this,t,e)||this}return o(ServerServiceEvent,n),Object.defineProperty(ServerServiceEvent.prototype,"action",{get:function(){return this.data},enumerable:!0,configurable:!0}),ServerServiceEvent.REQUEST_START="ServerServiceEvent.REQUEST_START",ServerServiceEvent.REQUEST_COMPLETE="ServerServiceEvent.REQUEST_COMPLETE",ServerServiceEvent}(uipixi.BaseEvent);e.ServerServiceEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(553),n(554),n(555),n(556),n(557),n(558),n(111),n(25),n(17),n(5)],void 0===(r=function(t,e,a,u,l,n,r,d,s,i,o,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function CalculatorService(){return null!==t&&t.apply(this,arguments)||this}return h(CalculatorService,t),CalculatorService.prototype.initialize=function(t){return _(this,void 0,void 0,function(){return f(this,function(t){return this._operators={},this._functions={},this.registerOperator("+",1,d.OperatorAssociativity.LEFT,n.ExpressionList.sum),this.registerOperator("-",1,d.OperatorAssociativity.LEFT,n.ExpressionList.minus),this.registerOperator("*",2,d.OperatorAssociativity.LEFT,n.ExpressionList.mult),this.registerOperator("%",2,d.OperatorAssociativity.LEFT,n.ExpressionList.mod),this.registerOperator("^",3,d.OperatorAssociativity.RIGHT,n.ExpressionList.pow),this.registerOperator("/",2,d.OperatorAssociativity.LEFT,n.ExpressionList.division),this.registerFunction("sum",n.ExpressionList.sum),this.registerFunction("floor",n.ExpressionList.floor),this.registerFunction("max",n.ExpressionList.max),this.registerFunction("min",n.ExpressionList.min),this.registerFunction("ceil",n.ExpressionList.ceil),this.registerFunction("sin",n.ExpressionList.sin),this.registerFunction("round",n.ExpressionList.round),this.registerFunction("residue_exists",n.ExpressionList.residue_exists),[2]})})},CalculatorService.prototype.calculate=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var i=null;try{t=this.replaceDataValues(t,n);var r=this.parse(t,e);r&&(r=this.convert(r))&&(i=this.calculateRPN(r))}catch(t){throw t}return i},CalculatorService.prototype.getDataValues=function(t){var e=[],n=t.match(/{(.+?)}/g);if(null!==n)for(var i=0,r=n;i<r.length;i++){var o=r[i];e.push(s.ValueInfo.fromString(o.replace(/{|}/g,"")))}return e},CalculatorService.prototype.replaceDataValues=function(t,i){return t.replace(/{(.+?)}/g,function(t,e){if(!e)throw new Error("Invalid mask.");var n=o.Services.dataProvider.getValue(e);switch(typeof n){case"string":if(null===(n=c.Utils.parseInt(n)))throw new Error("Invalid value for "+e);break;case"number":n=n.toString();break;case"object":if(null!==n||!i)throw new Error("Invalid value for "+e);n="0";break;case"boolean":n=n?1:0;break;default:throw new Error("Invalid value for "+e)}return n})},CalculatorService.prototype.parse=function(t,e){for(var n=new l.Expression,i=new a.RawExpression(t),r=null;!i.isEmpty();){var o=this.readToken(i,e,r);if(null===o)throw new Error("Lexer: Invalid token ["+i.getText()+":"+i.peekChar()+"]");n.addToken(o),r=o}return n},CalculatorService.prototype.calculateRPN=function(t){for(var e=[],n=0,i=t.getTokens();n<i.length;n++){var r=i[n];if(r.type!==d.TokenType.NUMBER)if(r.type!==d.TokenType.OPERATOR){if(r.type!==d.TokenType.FUNCTION)throw new Error("Unknown token detected!");this.getFunction(r.value).call(null,e)}else this.getOperator(r.value).executor(e);else e.push(c.Utils.parseFloat(r.value,0))}if(0===e.length)throw new Error("Mismatch operators!");var o=e.pop();if(0!==e.length)throw new Error("Mismatch operands!");return o},CalculatorService.prototype.registerOperator=function(t,e,n,i){this._operators[t]=new r.Operator(t,e,i,n)},CalculatorService.prototype.registerFunction=function(t,e){this._functions[t]=e},CalculatorService.prototype.readToken=function(t,e,n){var i=null,r=!1;for(var o in this._operators){if(r)break;var a=this._operators[o];if(i=t.consumeString(a.value)){if("+"!==a.value&&"-"!==a.value)return new u.Token(i,d.TokenType.OPERATOR);switch(null!==n?n.type:null){case d.TokenType.NUMBER:case d.TokenType.RIGHT_BRACKET:return new u.Token(i,d.TokenType.OPERATOR);case null:case d.TokenType.OPERATOR:case d.TokenType.COMMA:case d.TokenType.LEFT_BRAKET:case d.TokenType.FUNCTION:t.reconsumeString(a.value),r=!0}}}if(i=t.consumeString(/^(\+?|-?)\d+(\.\d*)?/))return new u.Token(i,d.TokenType.NUMBER);if(i=t.consumeString(","))return new u.Token(i,d.TokenType.COMMA);if(i=t.consumeString("("))return new u.Token(i,d.TokenType.LEFT_BRAKET);if(i=t.consumeString(")"))return new u.Token(i,d.TokenType.RIGHT_BRACKET);if(i=t.consumeString(/^\w+/)){for(var s in this._functions)if(s===i)return new u.Token(s,d.TokenType.FUNCTION);for(var c in e)if(c===i)return new u.Token(e[c],d.TokenType.NUMBER);throw new Error("Unknown token: "+i)}return null},CalculatorService.prototype.getOperator=function(t){return this._operators.hasOwnProperty(t)?this._operators[t]:null},CalculatorService.prototype.getFunction=function(t){return this._functions.hasOwnProperty(t)?this._functions[t]:null},CalculatorService.prototype.convert=function(t){for(var e=[],n=new l.Expression,i=0,r=t.getTokens();i<r.length;i++){var o=r[i];switch(o.type){case d.TokenType.NUMBER:n.addToken(o);break;case d.TokenType.OPERATOR:for(var a=this.getOperator(o.value),s=a.associativity===d.OperatorAssociativity.LEFT,c=a.precedence;0!==e.length;){if((p=e[e.length-1]).type!==d.TokenType.OPERATOR)break;var u=this.getOperator(p.value).precedence;if(!(s&&c<=u||!s&&c<u))break;n.addToken(e.pop())}e.push(o);break;case d.TokenType.LEFT_BRAKET:e.push(o);break;case d.TokenType.RIGHT_BRACKET:for(;0!==e.length;){if((p=e[e.length-1]).type===d.TokenType.LEFT_BRAKET)break;n.addToken(e.pop())}if(0===e.length)throw new Error("Mismatched parentheses");e.pop(),0<e.length&&e[e.length-1].type===d.TokenType.FUNCTION&&n.addToken(e.pop());break;case d.TokenType.FUNCTION:e.push(o);break;case d.TokenType.COMMA:for(;0<e.length;){if((p=e[e.length-1]).type===d.TokenType.LEFT_BRAKET)break;n.addToken(e.pop())}break;default:throw new Error("Unknown token detected!")}}for(;0!==e.length;){var p;if((p=e[e.length-1]).type===d.TokenType.LEFT_BRAKET||p.type===d.TokenType.RIGHT_BRACKET)throw new Error("Mismatch bracket!");n.addToken(e.pop())}return n},CalculatorService}(i.Service);e.CalculatorService=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(111),n(131),n(25)],void 0===(r=function(t,e,r,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DataProviderService(){return null!==t&&t.apply(this,arguments)||this}return a(DataProviderService,t),DataProviderService.prototype.initialize=function(t){return s(this,void 0,void 0,function(){return c(this,function(t){return this.providers={},[2]})})},DataProviderService.prototype.registerProvider=function(t,e){this.providers[t]=e},DataProviderService.prototype.getValue=function(t){var e="string"==typeof t?r.ValueInfo.fromString(t):t;if(!e)return null;if(!e.providerName)return null;var n=this.getProvider(e.providerName);if(!n)return null;var i=n.getValue(e.providerData,e.filters);return i=o.DataOperators.calculate(i,e.operator)},DataProviderService.prototype.addWaitChange=function(t,e){var n=this.getProvider(t.providerName);if(!n)return null;n.watch(t.providerData,e)},DataProviderService.prototype.removeWaitChange=function(t,e){var n=this.getProvider(t.providerName);if(!n)return null;n.unwatch(t.providerData,e)},DataProviderService.prototype.getProvider=function(t){return this.providers.hasOwnProperty(t)?this.providers[t]:null},DataProviderService}(n.Service);e.DataProviderService=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,W=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),F=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},V=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(79),n(288),n(561),n(87),n(289),n(133),n(562),n(563),n(564),n(565),n(566),n(180),n(567),n(570),n(571),n(136),n(295),n(572),n(297),n(45),n(17),n(93),n(94),n(573),n(574),n(184),n(138),n(185),n(186),n(187),n(188),n(575),n(576),n(28),n(577)],void 0===(r=function(t,e,a,p,n,r,o,c,s,u,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k){"use strict";var B,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=B||(B={}))[i.PHOTO=4]="PHOTO",i[i.EMAIL=4194304]="EMAIL",i[i.QUICK_MENU=256]="QUICK_MENU",i[i.SET_STATUS=1024]="SET_STATUS";var G=function(){function REQUEST_TYPE(){}return REQUEST_TYPE.API="API",REQUEST_TYPE.CLIENT="CLIENT",REQUEST_TYPE}();e.REQUEST_TYPE=G;var U=function(i){function PlatformVK(){var t=i.call(this)||this;return t.PLATFORM_URL="https://vk.com",t.PLATFORM_APP_URL_MASK="https://vk.com/app%ID%",t.callHistory=[],t.apiConfig={platformVersion:5.62,apiLimitCount:3,apiLimitPerTime:1e3,apiGetUsersLimit:100,apiGetOffersLimit:100,showSettingsBoxInterval:3,uploadImageURL:"/uploadVKImage.php"},t.profileFields=["sex","bdate","first_name","last_name","city","country"],t._requestStartTime=new core.Map,t.profileFields.push(L.Core.instance.config.mobile?"photo_50":"photo_100"),t}return W(PlatformVK,i),PlatformVK.prototype.init=function(){return F(this,void 0,void 0,function(){return V(this,function(t){return window.VK.init(this.onPlatformInitSuccess.bind(this),this.onPlatformInitFail.bind(this),this.getConfig("platformVersion")),[2,this._initAsyncPromise]})})},PlatformVK.prototype.addWidget=function(e,n){return F(this,void 0,void 0,function(){return V(this,function(t){return window.hasOwnProperty("VK")&&window.VK.Widgets.Like(e,n.config),[2]})})},PlatformVK.prototype.getRequiredResources=function(){return["APIVK"]},PlatformVK.prototype.onStageTap=function(){if(this.activePromise&&this.activePromise.request.type===G.CLIENT&&"showOrderBox"===this.activePromise.request.method){this.removeRequestListeners(this.activePromise.request);var t=this.activePromise;t.response.success=!1,t.response.status=r.OrderStatus.CANCEL,this.activePromise.resolve(this.activePromise.response),this.activePromise=null,this.checkQueue()}},PlatformVK.prototype.processPromise=function(t){this.call(t.request.method,t.request.getParams(),t)},PlatformVK.prototype.setLastStartTime=function(t,e){void 0===e&&(e=null),this._requestStartTime.set(t,null===e?this.getCurrentTime():e)},PlatformVK.prototype.getIntervalFromLastStart=function(t){return this._requestStartTime.has(t)?(this.getCurrentTime()-this._requestStartTime.get(t))/O.TIME.MS_IN_SECOND:null},PlatformVK.prototype.call=function(t,e,n){if(this.initialized)if(void 0!==window.VK){S.Services.debug.addLog("social","PlatformVK: call start,",t);var i=n.request.callInterval;if(null!==i){var r=this.getIntervalFromLastStart(t);if(null!==r&&r<i)return S.Services.debug.addWarning("social","PlatformVK. Time limit is reached: min interval "+String(i)+" s, current "+String(r)),n.reject("Time limit is reached: min interval "+String(i)+" s, current "+String(r)),this.activePromise=null,void this.checkQueue()}var o=window.VK,a=this.getTimeToNextCall(n.request);if(0<a)return S.Services.debug.addLog("social","PlatformVK: call limit is reached, retry after "+String(a)+" ms"),void setTimeout(this.call.bind(this,t,e,n),a+50);switch(n.request.type){case G.API:S.Services.debug.addLog("social","PlatformVK: call api.",t,e),this.addToHistory(t,n.request.type,this.getCurrentTime()),o.api(t,e,this.onResponse.bind(this,n));break;case G.CLIENT:S.Services.view.ui.fullscreen.fullscreenEnabled&&S.Services.view.ui.fullscreen.inFullscreen&&S.Services.view.ui.fullscreen.exitFullscreen();var s=n.request;this.addRequestListeners(s,n),S.Services.debug.addLog("social","PlatformVK: call client",[t].concat(n.request.getParamsArray())),this.addToHistory(t,n.request.type,this.getCurrentTime()),o.callMethod.apply(o,[t].concat(n.request.getParamsArray())),s.hasListeners()||(this.activePromise.resolve(n.response),this.activePromise=null,this.checkQueue())}}else n.reject("Cannot find VK library.");else n.reject("Platform is not initialized.")},PlatformVK.prototype.onResponse=function(t,e){if(!this.activePromise)return S.Services.debug.addError("social","PlatformVK: onResponse - there are no active promises."),t.reject("ERROR 1"),void this.checkQueue();if(t!==this.activePromise)return S.Services.debug.addError("social","PlatformVK: onResponse - active and result promises are not equal."),t.reject("ERROR 2"),this.activePromise=null,void this.checkQueue();var n="",i=e.error;if(void 0!==i){t.response.success=!1;var r=i.error_code;void 0!==r&&(t.response.errorCode=214===r?M.PlatformErrorCode.WALLPOST_DENIED:M.PlatformErrorCode.UNKNOWN),n=i.error_msg}else void 0!==e.response?(t.response.success=!0,t.response.parse(e.response)?S.Services.debug.addLogLimited("social",this.RESPONSE_LOG_SIZE,"Response data:",t.request.method,"\n",t.response.traceData(e.response)):(t.response.success=!1,n="Response parse error.")):(t.response.success=!1,n="Unknown error - response is not found");t.response.success?S.Services.debug.addLogToConsole("social","PlatformVK: resolve promise with data: ",t.response):(S.Services.debug.addWarning("social","PlatformVK: resolve promise with error: ",n,i),i||S.Services.debug.addLogLimited("social",this.RESPONSE_LOG_SIZE,"error is undefined, response: ",e)),t.resolve(t.response),this.activePromise=null,this.checkQueue()},PlatformVK.prototype.getConfig=function(t,e){return void 0===e&&(e=null),this.apiConfig.hasOwnProperty(t)?"number"==typeof this.apiConfig[t]?this.apiConfig[t].toString():this.apiConfig[t]:e},PlatformVK.prototype.getConfigInt=function(t,e){return void 0===e&&(e=null),parseInt(this.getConfig(t,null!==e?e.toString():null))},PlatformVK.prototype.getCurrentTime=function(){return Math.round(window.performance.now())},PlatformVK.prototype.checkHistory=function(){},PlatformVK.prototype.addToHistory=function(t,e,n){this.callHistory.push({time:n,method:t,type:e}),this.setLastStartTime(t),this.checkHistory()},PlatformVK.prototype.getTimeToNextCall=function(t){if(t.type!==G.API)return 0;for(var e=this.getConfigInt("apiLimitCount",100),n=this.getConfigInt("apiLimitPerTime",1e3),i=0,r=this.getCurrentTime(),o=this.callHistory.length-1;-1<o;o--)if(this.callHistory[o].type===G.API&&++i===e)return r<this.callHistory[o].time+n?this.callHistory[o].time+n-r:0;return 0},PlatformVK.prototype.addRequestListeners=function(t,e){S.Services.debug.addLog("social",t.method+": addRequestListeners");var n=t.listeners;for(var i in n)window.VK.addCallback(i,this.onClientEvent.bind(this,i,n[i],e))},PlatformVK.prototype.removeRequestListeners=function(t){S.Services.debug.addLog("social",t.method+": removeRequestListeners");var e=t.listeners;for(var n in e)window.VK.removeCallback(n,this.onClientEvent)},PlatformVK.prototype.onClientEvent=function(t,e,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];S.Services.debug.addLog("social","OnClientEvent: "+t+", on method "+n.request.method),this.removeRequestListeners(n.request),this.setLastStartTime(n.request.method),e.apply(this,[n].concat(i)),n.resolve(n.response),this.activePromise=null,this.checkQueue()},PlatformVK.prototype.onOrderSuccessHandle=function(t,e){t.response.success=!0,t.response.status=r.OrderStatus.SUCCESS,t.response.parse(e)},PlatformVK.prototype.onOrderFailHandle=function(t,e){t.response.success=!1,t.response.status=r.OrderStatus.FAIL},PlatformVK.prototype.onOrderCancelHandle=function(t){t.response.success=!1,t.response.status=r.OrderStatus.CANCEL},PlatformVK.prototype.onShowInviteBoxCancelHandle=function(t){t.response.success=!0},PlatformVK.prototype.onSettingsBoxChangedHandle=function(t,e){var n=t.request.getParam("0")||0;t.response.success=(n&e)===n},PlatformVK.prototype.onSettingsBoxCancelHandle=function(t){t.response.success=!1},PlatformVK.prototype.wallPost=function(s,c,u,t){return void 0===u&&(u=null),F(this,void 0,void 0,function(){var e,n,i,r,o,a;return V(this,function(t){switch(t.label){case 0:if(S.Services.view.ui.fullscreen.fullscreenEnabled&&S.Services.view.ui.fullscreen.inFullscreen&&S.Services.view.ui.fullscreen.exitFullscreen(),(e=new g.SocialRequestVkAPI("wall.post")).addParam("owner_id",s),e.addParam("message",c),null!==u&&0<u.length){for(n=[],i=0,r=u;i<r.length;i++)o=r[i],(a=b.AttachmentSerializer.serialize(o))&&n.push(a);0<n.length&&e.addParam("attachments",n.join(","))}return[4,this.getResult(p.WallpostResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.notify=function(o,a,s){return F(this,void 0,void 0,function(){var e,n,i,r;return V(this,function(t){switch(t.label){case 0:e=new v.NotificationResponse,n=0,i=o,t.label=1;case 1:return n<i.length?(r=i[n],[4,this.showRequestBox(r,a,s)]):[3,4];case 2:t.sent().success&&e.notified.push(r),t.label=3;case 3:return n++,[3,1];case 4:return e.success=0<e.notified.length,[2,e]}})})},PlatformVK.prototype.getUser=function(n){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("users.get")).addParam("user_ids",n),e.addParam("fields",this.profileFields.join(",")),[4,this.getResult(y.UserResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.getUsers=function(s){return F(this,void 0,void 0,function(){var e,n,i,r,o,a;return V(this,function(t){switch(t.label){case 0:if(e=null,0===s.length)return[3,5];n=this.getConfigInt("apiGetUsersLimit",100),i=Math.ceil(s.length/n),(e=new m.UsersResponseVK).success=!0,r=0,t.label=1;case 1:return r<i?((o=new g.SocialRequestVkAPI("users.get")).addParam("user_ids",s.slice(r*n,(r+1)*n).join(",")),o.addParam("fields",this.profileFields.join(",")),[4,this.getResult(m.UsersResponseVK,o)]):[3,4];case 2:if(!(a=t.sent()).success)return[2,e];e.users=e.users.concat(a.users),t.label=3;case 3:return r++,[3,1];case 4:return[3,6];case 5:e=new m.UsersResponseVK,t.label=6;case 6:return[2,e]}})})},PlatformVK.prototype.getAppFriendList=function(){return F(this,void 0,void 0,function(){return V(this,function(t){switch(t.label){case 0:return[4,this.getResult(n.AppFriendListResponseVK,new g.SocialRequestVkAPI("friends.getAppUsers"))];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.getFriends=function(n){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("friends.get")).addParam("fields",this.profileFields.join(",")),n&&(n.count&&e.addParam("count",n.count),n.offset&&e.addParam("offset",n.offset)),[4,this.getResult(A.FriendsResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.orderProduct=function(n){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new w.SocialRequestVkClient("showOrderBox")).addParam("0",{type:"item",item:n.orderId}),e.addListener("onOrderCancel",this.onOrderCancelHandle),e.addListener("onOrderFail",this.onOrderFailHandle),e.addListener("onOrderSuccess",this.onOrderSuccessHandle),[4,this.getResult(o.OrderResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.addToQuickMenu=function(){return F(this,void 0,void 0,function(){return V(this,function(t){switch(t.label){case 0:return[4,this.requestPermissions([a.PlatformPermission.QUICK_MENU])];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.getSettings=function(n){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("account.getAppPermissions")).addParam("user_id",n),[4,this.getResult(u.SettingsResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.hasPermission=function(n,i){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return[4,this.getSettings(n)];case 1:return[2,(e=t.sent())&&e.success&&-1!==e.permissions.indexOf(i)]}})})},PlatformVK.prototype.requestPermissions=function(o){return F(this,void 0,void 0,function(){var e,n,i,r;return V(this,function(t){switch(t.label){case 0:for(n=e=0,i=o;n<i.length;n++)switch(i[n]){case a.PlatformPermission.PHOTO:e+=B.PHOTO;break;case a.PlatformPermission.EMAIL:e+=B.EMAIL;break;case a.PlatformPermission.QUICK_MENU:e+=B.QUICK_MENU;break;case a.PlatformPermission.SET_STATUS:e+=B.SET_STATUS}return e?((r=new w.SocialRequestVkClient("showSettingsBox")).addParam("0",e),r.callInterval=this.getConfigInt("showSettingsBoxInterval"),r.addListener("onSettingsCancel",this.onSettingsBoxCancelHandle),r.addListener("onSettingsChanged",this.onSettingsBoxChangedHandle),[4,this.getResult(c.SimpleResponse,r)]):[2,null];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.createAlbum=function(n,i){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("photos.createAlbum")).addParam("title",n),e.addParam("description",i),[4,this.getResult(d.AlbumResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.getAlbums=function(n,i){return void 0===i&&(i=null),F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("photos.getAlbums")).addParam("owner_id",n),null!==i&&e.addParam("album_ids",i.join(",")),[4,this.getResult(l.AlbumsResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.savePhoto=function(o,a,s){return F(this,void 0,void 0,function(){var e,n,i,r;return V(this,function(t){switch(t.label){case 0:return e=!1,(n=new g.SocialRequestVkAPI("photos.getUploadServer")).addParam("album_id",o),[4,this.getResult(h.UploadServerResponseVK,n)];case 1:return(i=t.sent()).success&&i.uploadUrl?[4,this.uploadImage(a,i.uploadUrl)]:[3,4];case 2:return(r=t.sent())&&r.hasOwnProperty("server")?((n=new g.SocialRequestVkAPI("photos.save")).addParam("album_id",o),n.addParam("server",r.server||""),n.addParam("photos_list",r.photos_list||""),n.addParam("hash",r.hash||0),s&&n.addParam("caption",s),[4,this.getResult(c.SimpleResponse,n)]):[3,4];case 3:t.sent().success&&(e=!0),t.label=4;case 4:return[2,e?new _.PhotoEntity:null]}})})},PlatformVK.prototype.uploadPhoto=function(s,c){return void 0===c&&(c="Test caption"),F(this,void 0,void 0,function(){var e,n,i,r,o,a;return V(this,function(t){switch(t.label){case 0:return e=null,n=new g.SocialRequestVkAPI("photos.getWallUploadServer"),[4,this.getResult(h.UploadServerResponseVK,n)];case 1:return(i=t.sent()).success&&i.uploadUrl?[4,this.uploadImage(s,i.uploadUrl)]:[3,4];case 2:return(r=t.sent())&&r.hasOwnProperty("server")?((o=new g.SocialRequestVkAPI("photos.saveWallPhoto")).addParam("server",r.server||""),o.addParam("photo",r.photo||""),o.addParam("hash",r.hash||0),o.addParam("caption",c),[4,this.getResult(f.PhotosResponseVK,o)]):[3,4];case 3:(a=t.sent()).success&&0<a.photos.length&&(e=a.photos[0]),t.label=4;case 4:return[2,e]}})})},PlatformVK.prototype.isGroupMember=function(n,i){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("groups.isMember")).addParam("group_id",i),e.addParam("user_id",n),e.addParam("extended",1),[4,this.getResult(s.GroupMemberResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.showOffer=function(n){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new w.SocialRequestVkClient("showOrderBox")).addParam("0",{type:"offers",offer_id:n,currency:1}),e.addListener("onOrderCancel",this.onOfferOrderCancel),e.addListener("onOrderSuccess",this.onOfferOrderSuccess),e.addListener("onOrderFail",this.onOfferOrderFail),[4,this.getResult(c.SimpleResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.showAllowMessagesFromCommunityBox=function(n){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new w.SocialRequestVkClient("showAllowMessagesFromCommunityBox")).addParam("group_id",n),e.addListener("onAllowMessagesFromCommunity",this.onAllowMessagesFromCommunitySuccess),e.addListener("onAllowMessagesFromCommunityCancel",this.onAllowMessagesFromCommunityCancel),[4,this.getResult(c.SimpleResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.promoHasActiveGift=function(n,i){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("apps.promoHasActiveGift")).addParam("promo_id",i),e.addParam("user_id",n),[4,this.getResult(k.PromoResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.promoUseGift=function(n,i){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("apps.promoUseGift")).addParam("promo_id",i),e.addParam("user_id",n),[4,this.getResult(k.PromoResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.showRequestBox=function(n,i,r){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new w.SocialRequestVkClient("showRequestBox")).addParam("user_id",n),e.addParam("message",i),void 0!==r&&e.addParam("requestKey",r),e.addListener("onRequestSuccess",this.onRequestSuccess),e.addListener("onRequestCancel",this.onRequestCancel),e.addListener("onRequestFail",this.onRequestFail),[4,this.getResult(c.SimpleResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.showInvite=function(i,r,o){return F(this,void 0,void 0,function(){var e,n;return V(this,function(t){switch(t.label){case 0:return[4,this.notify(i,r,o)];case 1:return e=t.sent(),(n=new I.InviteResponse).invited=e.notified,n.success=e.success,[2,n]}})})},PlatformVK.prototype.uploadImage=function(o,a){return F(this,void 0,void 0,function(){var e,n,i,r;return V(this,function(t){switch(t.label){case 0:e=null,t.label=1;case 1:t.trys.push([1,6,,7]),(n=new FormData).append("file1",o),n.append("upload_url",a),(i=new P.Request).data=n,i.url=this.getConfig("uploadImageURL"),i.timeout=6e4,i.method="POST",i.cache=!1,i.processData=!1,i.contentType="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,S.Services.network.sendRequest(i)];case 3:return r=t.sent(),e=JSON.parse(r.data),[3,5];case 4:return t.sent(),e=null,E.NetworkError,[3,5];case 5:return[3,7];case 6:return t.sent(),[3,7];case 7:return[2,e]}})})},PlatformVK.prototype.onOfferOrderCancel=function(t){t.response.success=!0},PlatformVK.prototype.onOfferOrderFail=function(t,e){t.response.success=!0},PlatformVK.prototype.onOfferOrderSuccess=function(t,e){t.response.success=!0},PlatformVK.prototype.onAllowMessagesFromCommunitySuccess=function(t){t.response.success=!0},PlatformVK.prototype.onAllowMessagesFromCommunityCancel=function(t){t.response.success=!1},PlatformVK.prototype.onRequestSuccess=function(t){t.response.success=!0},PlatformVK.prototype.onRequestCancel=function(t){t.response.success=!1},PlatformVK.prototype.onRequestFail=function(t){t.response.success=!1},PlatformVK.prototype.getAdditionalInfo=function(t){return Promise.resolve(new D.AdditionalInfoResponse)},PlatformVK.prototype.getAppUrl=function(t,e){var n=i.prototype.getBaseAppUrl.call(this,t);return e&&(n+="#"+e),n},PlatformVK.prototype.getProfileUrl=function(t){return this.PLATFORM_URL+"/id"+t},PlatformVK.prototype.getInvitableFriends=function(){return Promise.resolve(new C.InvitableFriendsResponse)},PlatformVK.prototype.getIdsForBusiness=function(){return Promise.resolve(new T.BusinessListResponse)},PlatformVK.prototype.getAppRequestInfo=function(t){return Promise.resolve(new j.AppRequestInfoResponse)},PlatformVK.prototype.setCount=function(n){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("setCounter")).addParam("counter",n),[4,this.getResult(x.SetCounterResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.checkOffer=function(n,i){return void 0===i&&(i=!1),F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return(e=new g.SocialRequestVkAPI("leads.checkUser")).addParam("lead_id",n),i&&(e.addParam("test_result",1),e.addParam("test_mode",1)),[4,this.getResult(R.CheckOfferResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.getActiveOffers=function(){return F(this,void 0,void 0,function(){var e;return V(this,function(t){switch(t.label){case 0:return e=new g.SocialRequestVkAPI("account.getActiveOffers"),[4,this.getResult(N.GetActiveOffersResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVK.prototype.trackPurchase=function(t,e){return Promise.resolve(new c.SimpleResponse)},PlatformVK.prototype.scrollTop=function(){var t=new w.SocialRequestVkClient("scrollWindow");return t.addParam("top",110),t.addParam("speed",500),this.getResult(c.SimpleResponse,t)},PlatformVK.prototype.addStickerPack=function(t){return Promise.resolve(!1)},PlatformVK.prototype.hasStickerPack=function(t){return Promise.resolve(!1)},PlatformVK}(a.SocialPlatform);e.PlatformVK=U}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(178)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(WallpostResponseVK,t),WallpostResponseVK.prototype.parse=function(t){return this.postId=t.post_id,!0},WallpostResponseVK}(n.WallpostResponse);e.WallpostResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(87)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function OrderResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(OrderResponseVK,t),OrderResponseVK.prototype.parse=function(t){return this.orderId=t,!0},OrderResponseVK}(n.OrderResponse);e.OrderResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function AlbumsResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.albums=[],t}return a(AlbumsResponse,e),AlbumsResponse}(n.PlatformResponse);e.AlbumsResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(292)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AlbumParser(){}return AlbumParser.parse=function(t){if(!t||"object"!=typeof t)return null;var e=new n.AlbumEntity;return e.id=t.id||0,e.title=t.title||"",e.description=t.description||"",e.ownerId=(t.owner_id||"").toString(),e.size=t.size||0,e},AlbumParser}();e.AlbumParser=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function AlbumEntity(){};e.AlbumEntity=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function AlbumResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.album=null,t}return a(AlbumResponse,e),AlbumResponse}(n.PlatformResponse);e.AlbumResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(5),n(13)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function DynamicItem(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeTransaction=!1,t.changed=!1,t}return a(DynamicItem,e),DynamicItem.prototype.markChanged=function(){this.changeTransaction?this.changed=!0:this.dispatchChange()},DynamicItem.prototype.accumulateMarkChanged=function(){this.changed=!1,this.changeTransaction=!0},DynamicItem.prototype.applyMarkChanged=function(){this.changed&&this.dispatchChange(),this.changed=!1,this.changeTransaction=!1},DynamicItem.prototype.dispatchChange=function(){this.dispatchEvent(new i.BaseDataEvent(i.BaseDataEvent.CHANGED,this))},DynamicItem.prototype.debugGetName=function(){return n.Utils.getNameFromInstance(this)},DynamicItem.prototype.onReplicatedObjectChanged=function(t){this.markChanged()},DynamicItem.prototype.replicateChange=function(t){t.addEventListener(i.BaseDataEvent.CHANGED,this.onReplicatedObjectChanged.bind(this))},DynamicItem.prototype.removeReplication=function(t){t.removeEventListener(i.BaseDataEvent.CHANGED,this.onReplicatedObjectChanged.bind(this))},DynamicItem}(uipixi.BaseEventTarget);e.DynamicItem=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(137)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AttachmentSerializer(){}return AttachmentSerializer.serialize=function(t){switch(t.type){case n.WallpostAttachmentType.LINK:return AttachmentSerializer.serializeLink(t.data);case n.WallpostAttachmentType.PHOTO:return AttachmentSerializer.serializePhoto(t.data)}return""},AttachmentSerializer.serializeLink=function(t){return t.mediaId},AttachmentSerializer.serializePhoto=function(t){return"photo"+t.ownerId+"_"+t.mediaId},AttachmentSerializer}();e.AttachmentSerializer=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(183)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SocialRequestVK(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t.callInterval=null,t}return a(SocialRequestVK,e),SocialRequestVK}(n.SocialRequest);e.SocialRequestVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(296)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SocialRequestVkClient(){var t=null!==e&&e.apply(this,arguments)||this;return t._eventListeners={},t.type="CLIENT",t}return a(SocialRequestVkClient,e),SocialRequestVkClient.prototype.addListener=function(t,e){this._eventListeners[t]=e},Object.defineProperty(SocialRequestVkClient.prototype,"listeners",{get:function(){return this._eventListeners},enumerable:!0,configurable:!0}),SocialRequestVkClient.prototype.hasListeners=function(){for(var t in this._eventListeners)return!0;return!1},SocialRequestVkClient}(n.SocialRequestVK);e.SocialRequestVkClient=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(95),n(112)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function UserParser(){}return UserParser.parse=function(t){if(null===t||"object"!=typeof t)return null;var e=new i.UserEntity;e.firstName=t.first_name,e.lastName=t.last_name,e.birthday=t.birthday,e.userId=t.uid,e.gender=t.gender in UserParser.genders?UserParser.genders[t.gender]:null;var n="uikit/default_ava_96x96";return(t.hasOwnProperty("pic50x50")&&t.pic50x50||t.hasOwnProperty("pic128x128")&&t.pic128x128)&&(n=t.pic50x50?t.pic50x50:t.pic128x128),"gif"===n.substring(n.length-3)&&(n="uikit/default_ava_96x96"),e.photo50=n,e.currentStatus=t.current_status,e.city=t.location.city,e.country=t.location.country,e.lang=t.locale,e.email=t.email,(t.hasOwnProperty("pic50x50")&&t.pic50x50||t.hasOwnProperty("pic128x128")&&t.pic128x128)&&e.pictures.push(new r.UserPictureItem(n,50,50,r.UserPictureType.SQUARE,"*")),e},UserParser.genders={male:"male",female:"female"},UserParser}();e.UserParser=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(292)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AlbumParser(){}return AlbumParser.parse=function(t){if(null===t||"object"!=typeof t)return null;var e=new n.AlbumEntity;return e.id=t.aid||0,e.title=t.title||"",e.description=t.description||"",e.ownerId=t.owner_id||"",e.size=t.photos_count||0,e},AlbumParser}();e.AlbumParser=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(79)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function PermissionParser(){}return PermissionParser.parse=function(t){return this.permissionMap[t]},PermissionParser.toString=function(t){for(var e in this.permissionMap)if(this.permissionMap[e]===t)return e},PermissionParser.permissionMap={user_friends:n.PlatformPermission.USER_FRIENDS,user_birthday:n.PlatformPermission.USER_BIRTHDAY,user_gender:n.PlatformPermission.USER_GENDER,user_location:n.PlatformPermission.USER_LOCATION},PermissionParser}();e.PermissionParser=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(95),n(28),n(17)],void 0===(r=function(t,e,n,i,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function ProfilesService(){var t=null!==e&&e.apply(this,arguments)||this;return t._friendsSocialIds=[],t.socialProfiles=null,t.friendsProfiles=null,t.userId=null,t.socialUserId=null,t._current=null,t}return a(ProfilesService,e),ProfilesService.prototype.initialize=function(t){return s(this,void 0,void 0,function(){return d(this,function(t){return this.socialProfiles=new core.Map,this.friendsProfiles=new core.Map,this.userId=r.Core.instance.config.userId,this.socialUserId=r.Core.instance.config.userIdPlatform,this._current=new i.UserEntity,this._current.userId=this.socialUserId,[2]})})},Object.defineProperty(ProfilesService.prototype,"friendsSocialIds",{get:function(){return this._friendsSocialIds},enumerable:!0,configurable:!0}),ProfilesService.prototype.getProfiles=function(p){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u;return d(this,function(t){switch(t.label){case 0:for(e=[],n=[],i=0,r=p;i<r.length;i++)o=r[i],this.socialProfiles.has(o)?e.push(this.socialProfiles.get(o)):n.push(o);return 0<n.length?[4,l.Services.social.platform.getUsers(n)]:[3,2];case 1:if(null!==(a=t.sent())&&a.success){for(s=0,c=a.users;s<c.length;s++)u=c[s],this.socialProfiles.set(u.userId,u),e.push(u),u.userId===this.socialUserId&&(this._current=u);a.users.length,n.length}t.label=2;case 2:return[2,Promise.resolve(e)]}})})},ProfilesService.prototype.getProfilesMap=function(a){return s(this,void 0,void 0,function(){var e,n,i,r,o;return d(this,function(t){switch(t.label){case 0:return[4,this.getProfiles(a)];case 1:for(e=t.sent(),n=new core.Map,i=0,r=e;i<r.length;i++)o=r[i],n.set(o.userId,o);return[2,Promise.resolve(n)]}})})},Object.defineProperty(ProfilesService.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),ProfilesService.prototype.isFriend=function(t){return this.friendsProfiles.has(t)},ProfilesService.prototype.isAppFriend=function(t){return-1!==this._friendsSocialIds.indexOf(t)},ProfilesService.prototype.getNotAppFriends=function(){var e=this,n=[];return this.friendsProfiles.forEach(function(t){e.isAppFriend(t.userId)||n.push(t)},this),n},ProfilesService.prototype.getInvitableFriends=function(){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u;return d(this,function(t){switch(t.label){case 0:return e=this.getNotAppFriends(),[4,l.Services.social.platform.getInvitableFriends()];case 1:if((n=t.sent()).success){for(i=[],n.users.sort(ProfilesService.sortInvitableFriends),r=0,o=n.users;r<o.length;r++)for(a=o[r],s=0,c=e;s<c.length;s++)if((u=c[s]).userId===a.uid){i.push(u);break}return[2,i]}return[2,e]}})})},ProfilesService.sortInvitableFriends=function(t,e){return t.selectable===e.selectable?0:t.selectable?-1:1},ProfilesService}(n.Service);e.ProfilesService=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(45),n(28),n(619),n(621),n(17)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(e){function DateService(){var t=null!==e&&e.apply(this,arguments)||this;return t._serverTime=0,t._nowFunc=null,t._serverTimeDifference=0,t}return u(DateService,e),Object.defineProperty(DateService.prototype,"timezoneDifference",{get:function(){return this._timezoneDifference},enumerable:!0,configurable:!0}),DateService.getTimezoneDifference=function(){return(-r.Core.instance.config.serverTimezoneOffset*i.TIME.MINUTES_IN_HOUR-(new Date).getTimezoneOffset())*i.TIME.SECONDS_IN_MINUTE*i.TIME.MS_IN_SECOND},DateService.getNowRelative=function(){if(performance)for(var t=0,e=["now","webkitNow","mozNow","oNow"];t<e.length;t++){var n=e[t];if(performance.hasOwnProperty(n))return performance[n].bind(performance)}return Date.now.bind(Date)},DateService.prototype.initialize=function(t){return p(this,void 0,void 0,function(){return l(this,function(t){return this._callProcessor=new o.CallProcessor,this._nowFunc=DateService.getNowRelative(),this.setServerTime(r.Core.instance.config.serverTime),s.Services.dataProvider.registerProvider("date",new a.DateDataProvider(this._callProcessor)),[2]})})},DateService.prototype.setServerTime=function(t){this._serverTime=t,this._serverTimeDifference=t*i.TIME.MS_IN_SECOND-Math.floor(this.currentClientTime()),s.Services.debug.addInfo(this.DEBUG_CHANNEL,"server time",t,(new Date).getTime()/i.TIME.MS_IN_SECOND,new Date(t*i.TIME.MS_IN_SECOND),new Date,this._serverTimeDifference)},Object.defineProperty(DateService.prototype,"rawServerTime",{get:function(){return this._serverTime},enumerable:!0,configurable:!0}),Object.defineProperty(DateService.prototype,"currentTime",{get:function(){return Math.floor((this.currentClientTime()+this._serverTimeDifference)/i.TIME.MS_IN_SECOND)},enumerable:!0,configurable:!0}),Object.defineProperty(DateService.prototype,"currentTimeMS",{get:function(){return this.currentClientTime()+this._serverTimeDifference},enumerable:!0,configurable:!0}),Object.defineProperty(DateService.prototype,"currentDate",{get:function(){return new Date(this.currentClientTime()+this._serverTimeDifference-DateService.getTimezoneDifference())},enumerable:!0,configurable:!0}),Object.defineProperty(DateService.prototype,"callProcessor",{get:function(){return this._callProcessor},enumerable:!0,configurable:!0}),DateService.prototype.currentClientTime=function(){return this._nowFunc()},DateService.prototype.setServerTimeHuman=function(t){var e=t.match(/^\d{2}.\d{2}.\d{4} \d{2}:\d{2}:\d{2}$/g);if(e&&0<e.length){var n=t.split(" "),i=n[0].split("."),r=n[1].split(":"),o=Math.floor(.001*new Date(parseInt(i[2]),parseInt(i[1])-1,parseInt(i[0]),parseInt(r[0]),parseInt(r[1]),parseInt(r[2])).getTime());this._timezoneDifference=this._serverTime-o}},DateService.prototype.getServerTimeByDateString=function(t){var e=t.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/g);if(e&&0<e.length){t=e[0];var n=new Date(parseInt(t.substr(0,4)),parseInt(t.substr(5,2))-1,parseInt(t.substr(8,2)),parseInt(t.substr(11,2)),parseInt(t.substr(14,2)),parseInt(t.substr(17,2)));return Math.floor(.001*n.getTime())+this._timezoneDifference}},DateService}(n.Service);e.DateService=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(622),n(304),n(623),n(267)],void 0===(r=function(t,e,n,o,i,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function SoundService(){var t=null!==e&&e.apply(this,arguments)||this;return t._defaultGroup=new c,t._groupIdToGroup=new core.Map,t}return u(SoundService,e),SoundService.prototype.initialize=function(t){return p(this,void 0,void 0,function(){return l(this,function(t){return[2]})})},SoundService.prototype.mute=function(e,t){if(t){var n=this._groupIdToGroup.get(t);n||(n=new c,this._groupIdToGroup.set(t,n)),n.muted=e}else this._defaultGroup.muted=e,this._groupIdToGroup.forEach(function(t){t.muted=e})},SoundService.prototype.isPlaying=function(t,e){if(e){var n=this._groupIdToGroup.get(e);return!!n&&n.isPlaying(t)}return this._defaultGroup.isPlaying(t)},SoundService.prototype.play=function(t,e,n){void 0===e&&(e=!1),this.stopTween();var i=new o.SoundTrack(t,e);if(n){var r=this._groupIdToGroup.get(n);r||((r=new c).muted=this._defaultGroup.muted,this._groupIdToGroup.set(n,r)),r.addSoundTrack(i)}else this._defaultGroup.addSoundTrack(i);return i.play(),i},SoundService.prototype.stop=function(t){this.stopTween();var e=this._groupIdToGroup.get(t);e?e.stop():(this._defaultGroup.stop(),this._groupIdToGroup.forEach(function(t){return t.stop()}))},SoundService.prototype.fadeAndStop=function(t,e,n){void 0===e&&(e=1e3);var i=this._groupIdToGroup.get(t);this._fadeTween=new a.TweenMax(i,.001*e,{volume:0,onComplete:this.onFadeComplete.bind(this,n,i)})},SoundService.prototype.onFadeComplete=function(t,e){e.stop(),e.volume=1,t&&t.apply(null)},SoundService.prototype.stopTween=function(){this._fadeTween&&this._fadeTween.isActive()&&(this._fadeTween.pause(),this._fadeTween=null)},SoundService}(n.Service);e.SoundService=s;var c=function(){function SoundGroup(){this._soundTracks=[]}return Object.defineProperty(SoundGroup.prototype,"muted",{get:function(){return this._muted},set:function(t){var e=this;t!=this._muted&&(this._muted=t,this._soundTracks.forEach(function(t){return t.muted=e._muted}))},enumerable:!0,configurable:!0}),SoundGroup.prototype.isPlaying=function(t){for(var e=0,n=this._soundTracks;e<n.length;e++){if(n[e].id===t)return!0}return!1},Object.defineProperty(SoundGroup.prototype,"volume",{get:function(){return 0<this._soundTracks.length?this._soundTracks[0].volume:1},set:function(t){for(var e=0,n=this._soundTracks;e<n.length;e++){n[e].volume=t}},enumerable:!0,configurable:!0}),SoundGroup.prototype.stop=function(){for(var t=0,e=this._soundTracks;t<e.length;t++){var n=e[t];n.removeEventListener(i.SoundTrackEvent.STOP,this.onSoundTrackCompleted.bind(this,n)),n.stop()}this._soundTracks=[]},SoundGroup.prototype.addSoundTrack=function(t){-1===this._soundTracks.indexOf(t)&&(this._soundTracks.push(t),t.muted=this._muted,t.addEventListener(i.SoundTrackEvent.END,this.onSoundTrackCompleted.bind(this,t)),t.addEventListener(i.SoundTrackEvent.STOP,this.onSoundTrackCompleted.bind(this,t)))},SoundGroup.prototype.onSoundTrackCompleted=function(t){r.ArrayUtil.removeElementOnce(this._soundTracks,t)},SoundGroup}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function SoundTrackEvent(t,e){return n.call(this,t,e)||this}return o(SoundTrackEvent,n),Object.defineProperty(SoundTrackEvent.prototype,"track",{get:function(){return this.data},enumerable:!0,configurable:!0}),SoundTrackEvent.END="end",SoundTrackEvent.STOP="stop",SoundTrackEvent}(uipixi.BaseEvent);e.SoundTrackEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(306),n(28),n(626),n(108),n(17)],void 0===(r=function(t,e,n,l,u,p,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function LocalizationService(){var t=null!==e&&e.apply(this,arguments)||this;return t._replacementMap=new core.Map([[/\[br\]/g,"\n"]]),t._customLocaleMapping=new core.Map,t._isMale=!0,t}return a(LocalizationService,e),LocalizationService.prototype.initialize=function(t){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c;return _(this,function(t){switch(t.label){case 0:return this.setCustomLocaleMapping(),e=l.Locale.fromString(u.Core.instance.config.locale.split("_")[0]),e=this.checkCustomMappedLocale(e),null===(n=this.getResourceId(e))&&(e=l.Locale.fromString(u.Core.instance.config.defaultLocale.split("_")[0]),n=this.getResourceId(e)),this._locale=l.Locale.toShortString(e),i=[n],[4,h.Services.resources.getResources(i)];case 1:if(!(r=t.sent())||!r.loaded)return u.Core.instance.fatalError(new d.BaseError("LocalizationService: error loading resources.")),[2];for(o=0,a=r.resources;o<a.length;o++)if(s=a[o],c=this.parseResource(s)){this._collection=new p.LocaleDataCollection(e,c);break}if(!this._collection)throw new Error("No localization loaded.");return[2]}})})},LocalizationService.prototype.localize=function(t){for(var i=this,r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];if(null==t)return"";var n=null,o=null,a=this._collection.get(t);null!==a&&(n=a,o=l.Locale.getPluralFunc(this._collection.locale)),null===n&&(n=t),n=n.replace(/%NUM(\d+)\?([^%]*)%/g,function(t,e,n){return o.apply(void 0,[r[e-1]].concat(n.split(":")))}).replace(/%(\d+)/g,function(t,e){return r[e-1]});var s=!1;if(0!==r.length&&"object"==typeof r[0]&&null!==r[0]){var c=r.shift(),u=function(t){if("boolean"==typeof c[t]){var i=c[t],e=void 0;"gender"==t?(e=/{(?:gender\||)([^}]*)\|([^}]*)}/gi,s=!0):e=new RegExp("{"+t+"\\|([^}]*)\\|([^}]*)}","gi"),n=n.replace(e,function(t,e,n){return i?e:n})}n=n.replace("{"+t+"}",c[t])};for(var p in c)u(p)}return s||(n=n.replace(/{(?:gender\||)([^}]*)\|([^}]*)}/gi,function(t,e,n){return i._isMale?e:n})),this._replacementMap.forEach(function(t,e){n=n.replace(e,t)}),n},LocalizationService.prototype.getResourceId=function(t){return null},LocalizationService.prototype.parseResource=function(t){return{}},Object.defineProperty(LocalizationService.prototype,"locale",{get:function(){return this._locale},enumerable:!0,configurable:!0}),LocalizationService.prototype.hasKey=function(t){return this._collection.has(t)},LocalizationService.prototype.setCustomLocaleMapping=function(){},LocalizationService.prototype.checkCustomMappedLocale=function(t){return this._customLocaleMapping.has(t)?this._customLocaleMapping.get(t):t},Object.defineProperty(LocalizationService.prototype,"defaultGender",{set:function(t){this._isMale="male"===t},enumerable:!0,configurable:!0}),LocalizationService}(n.Service);e.LocalizationService=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(307)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function Locale(){}return Locale.fromString=function(t){switch(t){case"de":return n.LocaleLanguage.DE;case"en":return n.LocaleLanguage.EN;case"es":return n.LocaleLanguage.ES;case"fr":return n.LocaleLanguage.FR;case"pl":return n.LocaleLanguage.PL;case"pt":return n.LocaleLanguage.PT;case"ru":return n.LocaleLanguage.RU;case"be":return n.LocaleLanguage.BE;case"uk":return n.LocaleLanguage.UK;default:return n.LocaleLanguage.UNDEFINED}},Locale.toShortString=function(t){switch(t){case n.LocaleLanguage.DE:return"de";case n.LocaleLanguage.EN:return"en";case n.LocaleLanguage.ES:return"es";case n.LocaleLanguage.FR:return"fr";case n.LocaleLanguage.PL:return"pl";case n.LocaleLanguage.PT:return"pt";case n.LocaleLanguage.RU:return"ru";case n.LocaleLanguage.UK:return"uk";case n.LocaleLanguage.BE:return"be";default:return null}},Locale.getPluralFunc=function(t){switch(t){case n.LocaleLanguage.EN:case n.LocaleLanguage.ES:case n.LocaleLanguage.DE:case n.LocaleLanguage.PT:return Locale.plural1;case n.LocaleLanguage.FR:return Locale.plural2;case n.LocaleLanguage.RU:return Locale.plural7;case n.LocaleLanguage.PL:return Locale.plural9;default:return null}},Locale.plural1=function(t,e,n){return 1===t?e:n},Locale.plural2=function(t,e,n){return 1<t?n:e},Locale.plural7=function(t,e,n,i){return t%10==1&&t%100!=11?e:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?n:i},Locale.plural9=function(t,e,n,i){return 1===t?e:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?n:i},Locale}();e.Locale=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.LocaleLanguage||(e.LocaleLanguage={}))[n.UNDEFINED=0]="UNDEFINED",n[n.RU=1]="RU",n[n.EN=2]="EN",n[n.DE=3]="DE",n[n.PT=4]="PT",n[n.FR=5]="FR",n[n.ES=6]="ES",n[n.PL=7]="PL",n[n.UK=8]="UK",n[n.BE=9]="BE"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(34),n(627),n(309)],void 0===(r=function(t,e,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(i){function ParallelProcess(t,e){void 0===t&&(t=null),void 0===e&&(e=0);var n=i.call(this,e)||this;return n.addChildren(t),n}return a(ParallelProcess,i),ParallelProcess.prototype.startHandler=function(){if(0!==this._children.length)for(var t=this._children.length;t--;){var e=this._children[t];e.addEventListener(r.ProcessEvent.COMPLETE,this.process_completeHandler.bind(this)),e.start()}else this.complete()},ParallelProcess.prototype.stopHandler=function(){for(var t=0,e=this._children;t<e.length;t++){var n=e[t];n.removeEventListener(r.ProcessEvent.COMPLETE,this.process_completeHandler.bind(this)),n.stop()}},ParallelProcess.prototype.process_completeHandler=function(t){t.process.removeEventListener(r.ProcessEvent.COMPLETE,this.process_completeHandler.bind(this)),n.ArrayUtil.removeElementOnce(this._children,t.process),0===this._children.length&&this.complete()},ParallelProcess}(i.ProcessContainerBase);e.ParallelProcess=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67),n(17)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ProcessContainerBase(t){void 0===t&&(t=0);var e=i.call(this,t)||this;return e._children=[],e}return a(ProcessContainerBase,i),ProcessContainerBase.prototype.addChildren=function(t){if(t)for(var e=t.length,n=0;n<e;n++)this.addChild(t[n])},ProcessContainerBase.prototype.addChild=function(t){t&&-1===this._children.indexOf(t)&&(this._children[this._children.length]=t)},ProcessContainerBase.prototype.toString=function(){for(var t=0,e=this._children;t<e.length;t++){var n=e[t];r.Services.debug.addLog("animation","Process container "+n.toString())}return i.prototype.toString.call(this)},ProcessContainerBase}(n.Process);e.ProcessContainerBase=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(e.AnimationLayer||(e.AnimationLayer={})).ANIMATION_LAYER="ANIMATION_LAYER"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,w=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(25),n(639),n(640),n(191),n(641),n(28),n(17),n(140),n(642),n(644),n(35),n(36),n(645),n(646),n(312),n(33),n(86)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var b=uipixi.BaseEventTarget,g=function(e){function PushService(){var t=null!==e&&e.apply(this,arguments)||this;return t._channelsToSubscribeQueue=[],t}return w(PushService,e),PushService.prototype.initialize=function(t){this._webSocketSupports="WebSocket"in window;var e=s.Core.instance.config.pushServiceData;if(!("config"in e&&"user"in e))throw new Error("Invalid init-data!");return this._config=new r.Config(e.config),this._user=new i.User(e.user),this._target=new b,this._reconnectCleanAttempts=0,this.resetReconnectTimeout(),this._responseProcessors={history:p.HistoryResponseProcessor},s.Core.instance.eventRouter.addEventListener(v.CoreEvent.GAME_BREAK,this.onGameBreak.bind(this)),Promise.resolve()},PushService.prototype.onGameBreak=function(){s.Core.instance.eventRouter.removeEventListener(v.CoreEvent.GAME_BREAK,this.onGameBreak.bind(this)),this.disconnect()},Object.defineProperty(PushService.prototype,"isConnected",{get:function(){return this._socket&&this._socket.readyState===WebSocket.OPEN},enumerable:!0,configurable:!0}),PushService.prototype.connect=function(t){if(!this._config.getEnabled())return this.log("Service is disabled. Cannot connect."),!1;if(!this._webSocketSupports)return!1;if(this.isConnected)return this.log("Already connected!"),!0;this._reconnectTimerId&&(clearTimeout(this._reconnectTimerId),this._reconnectTimerId=void 0);var e=t||{},n=e.initTime,i=void 0===n?0:n,r=e.isReconnection,o=void 0!==r&&r,a=e.cleanReconnection,s=void 0!==a&&a;this._currentConnectionOptions={initTime:i,cleanReconnection:s,isReconnection:o};var c=this._config.getServerUrl();return this._socket=new WebSocket(c),this._socket.onopen=this.onSocketOpen.bind(this,i,o,s),this._socket.onmessage=this.onSocketMessage.bind(this),this._socket.onerror=this.onSocketError.bind(this),this._socket.onclose=this.onSocketClose.bind(this),!0},PushService.prototype.disconnect=function(){return!!this.isConnected&&(this._socket.close(PushService.DISCONNECT_CODE_MANUAL),!(this._socket=null))},PushService.prototype.sendChatMessage=function(t,e,n){this.sendMessage(new f.ChatMessage(t,e,n))},PushService.prototype.sendMessage=function(t){if(!this.isConnected)throw new Error("Cannot send request. Connection is down!");this.log("sendMessage",t),this._socket.send(t.asJSON())},PushService.prototype.subscribe=function(t){var e=new o.Channel({type:t.type,name:t.name,sign:t.sign});e.authTime=t.initTime,this._user.getChannel(e.getId())&&c.Services.debug.sendLog("Channel already exists!","",d.LogFlag.CLIENT,h.LogLevel.Warning,""),this._user.addChannel(e),this.isConnected&&(this._channelsToSubscribeQueue.push(e),this.sendMessage(new _.ChannelSubscribeMessage(e,e.authTime)))},PushService.prototype.unsubscribe=function(t,e){this._user.removeChannel(t+"_"+e)},PushService.prototype.onSocketOpen=function(t,e,n,i){this._socketConnected=!0,n||this.resetReconnectTimeout();var r=this._config.getServerUrl();this.log("onSocketOpen",r),this._user.authFullyCompleted=!1,this._user.timeInit=t,this._userAuthCompleted=!1;var o=new a.AuthMessage(this._user,t,e);this.sendMessage(o),this._target.dispatchEvent(new y.PushServiceEvent(y.PushServiceEvent.CONNECT))},PushService.prototype.resetReconnectTimeout=function(){this._reconnectTimeout=1e3*this._config.getReconnectTimeoutRand()},PushService.prototype.onSocketError=function(t){this.log("onSocketError",t),c.Services.social.platformIs(m.PlatformType.VK,m.PlatformType.VK_MOBILE)&&c.Services.debug.sendLog("PushService: socket error","",d.LogFlag.CLIENT,h.LogLevel.Warning,this.DEBUG_CHANNEL)},PushService.prototype.onSocketClose=function(t){var e=t.wasClean,n=t.code;(this.log("onSocketClose","wasClean:",e,"code:",n),this._socket=null,this.tryToReconnect(e,n),this._socketConnected)?((!e||this.isReconnectRequired(n))&&this._target.dispatchEvent(new y.PushServiceEvent(y.PushServiceEvent.DISCONNECT_WITH_ERROR)),this._target.dispatchEvent(new y.PushServiceEvent(y.PushServiceEvent.DISCONNECT))):this._target.dispatchEvent(new y.PushServiceEvent(y.PushServiceEvent.ERROR_ON_CONNECT));this._socketConnected=!1},PushService.prototype.tryToReconnect=function(t,e){var n=this;this._config.getReconnectEnabled()&&(!t||this.isReconnectRequired(e)&&this.isReconnectAvailable())&&(this.log("Try to reconnect for "+this._reconnectTimeout+" ms, clean attempts = "+this._reconnectCleanAttempts),this._reconnectTimerId=setTimeout(function(){return n.reconnect(t)},this._reconnectTimeout),this._reconnectTimeout*=this._config.getReconnectFailBackMult(),t&&this._reconnectCleanAttempts++)},PushService.prototype.isReconnectRequired=function(t){return-1===PushService.NO_RECONNECT_CODES.indexOf(t)},PushService.prototype.isReconnectAvailable=function(){return this._reconnectCleanAttempts<this._config.getReconnectCleanAttempts()},PushService.prototype.reconnect=function(t){!this._currentConnectionOptions.isReconnection&&this._user.authFullyCompleted&&(this._currentConnectionOptions={isReconnection:!0,cleanReconnection:t}),this.connect(this._currentConnectionOptions)},PushService.prototype.onSocketMessage=function(t){this.log("onSocketMessage",t.data);var e=l.PushResponse.parse(t.data);if(e){c.Services.debug.addLogToConsole(this.DEBUG_CHANNEL,e);var n=e.data;if(void 0!==e.time){var i=n.channelId;if(void 0!==i){this.log("update lastMessageTime ("+e.time+") for "+i);var r=this._user.getChannel(i);r?r.setLastMessageTime(e.time):this._channelIsNotExists||(c.Services.debug.sendLog("PushService: channel is not exists!","",d.LogFlag.CLIENT,h.LogLevel.Warning,this.DEBUG_CHANNEL),this._channelIsNotExists=!0)}}var o=this._responseProcessors[e.type];if(o)new o(this._user,this._target).execute(e);this._user.authFullyCompleted||"history"===e.type||"auth:complete"===e.type||c.Services.debug.sendLog("PushService: user is not fully authorized!","",d.LogFlag.CLIENT,h.LogLevel.Warning,this.DEBUG_CHANNEL),this._target.dispatchEvent(new u.PushMessageEvent(e)),this.subscribeQueueChannels()}else c.Services.debug.sendLog("PushService: invalid response","",d.LogFlag.CLIENT,h.LogLevel.Warning,this.DEBUG_CHANNEL)},PushService.prototype.subscribeQueueChannels=function(){if(!this._userAuthCompleted&&this._user.authFullyCompleted){this._userAuthCompleted=!0,this._channelsToSubscribeQueue=this._channelsToSubscribeQueue.filter(function(t){return!t.readyToReconnect});for(var t=0,e=this._channelsToSubscribeQueue;t<e.length;t++){var n=e[t];if(!this.isConnected)break;this.sendMessage(new _.ChannelSubscribeMessage(n,n.authTime))}}},PushService.prototype.log=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=c.Services.debug).addLog.apply(t,[this.DEBUG_CHANNEL].concat(e))},Object.defineProperty(PushService.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(PushService.prototype,"webSocketSupport",{get:function(){return this._webSocketSupports},enumerable:!0,configurable:!0}),PushService.NO_RECONNECT_CODES=[PushService.DISCONNECT_REASON_VERSION=4001,PushService.DISCONNECT_CODE_MANUAL=4002],PushService}(n.Service);e.PushService=g}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function PushServiceEvent(t){return e.call(this,t)||this}return o(PushServiceEvent,e),PushServiceEvent.CONNECT="PushServiceEvent.CONNECT",PushServiceEvent.DISCONNECT="PushServiceEvent.DISCONNECT",PushServiceEvent.DISCONNECT_WITH_ERROR="PushServiceEvent.DISCONNECT_WITH_ERROR",PushServiceEvent.ERROR_ON_CONNECT="PushServiceEvent.ERROR_ON_CONNECT",PushServiceEvent}(uipixi.BaseEvent);e.PushServiceEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function CoreConfig(){this.ROLE_ADMIN="admin",this._resourcesDescriptorUrl=null,this._applicationId=null,this._applicationKey=null,this._applicationName=null,this._locale="ru_RU",this._defaultLocale="ru_RU",this._roles=[]}return CoreConfig.prototype.init=function(t){if(void 0===t)return!1;if(this._applicationId=r.Utils.parsePropertyString(t,"appId"),this._applicationKey=r.Utils.parsePropertyString(t,"appKey"),this._applicationName=r.Utils.parsePropertyString(t,"appName"),this._authKey=r.Utils.parsePropertyString(t,"authKey"),this._sessionKey=r.Utils.parsePropertyString(t,"sessionKey"),this._userId=r.Utils.parsePropertyInt(t,"uid"),this._userIdPlatform=r.Utils.parsePropertyString(t,"suid"),this._applicationName=r.Utils.parsePropertyString(t,"appName"),this._locale=r.Utils.parsePropertyString(t,"locale"),this._defaultLocale=r.Utils.parsePropertyString(t,"defaultLocale"),this._serverHost=r.Utils.parsePropertyString(t,"serverHost"),this._serverUrl=r.Utils.parsePropertyString(t,"serverUrl"),this._protocol=r.Utils.parsePropertyString(t,"proto"),this._devMode=r.Utils.parsePropertyBool(t,"isDev"),this._request=t.hasOwnProperty("request")?t.request:"",this._mainConfigPath=r.Utils.parsePropertyString(t,"configPath"),this._platform=r.Utils.parsePropertyString(t,"platform","").toLowerCase(),this._version=r.Utils.parsePropertyInt(t,"version"),this._serverTime=r.Utils.parsePropertyInt(t,"time"),t.hasOwnProperty("timezone")&&"object"==typeof t.timezone&&(this._serverTimezoneOffset=r.Utils.parsePropertyInt(t.timezone,"offset")),this._serverIP=r.Utils.parsePropertyString(t,"serverAddr"),this._userIP=r.Utils.parsePropertyString(t,"ip"),this._clientLogsUrl=r.Utils.parsePropertyString(t,"clientLogsUrl"),this._resourcesDescriptorUrl=r.Utils.parsePropertyString(t,"resourcesDescriptorUrl"),t.hasOwnProperty("locales")&&"object"==typeof t.locales?this._locales=t.locales:this._locales=null,t.hasOwnProperty("roles")&&Array.isArray(t.roles))for(var e=0,n=t.roles;e<n.length;e++){var i=n[e];"string"==typeof i&&this._roles.push(i)}return this._isAdmin=-1!==this._roles.indexOf(this.ROLE_ADMIN),this._clansEnabled=r.Utils.parsePropertyBool(t,"clansEnabled"),this._pushServiceData=t.pushServiceData,null!==this._userId&&null!==this._userIdPlatform&&""!==this._platform},CoreConfig.prototype.isSufficient=function(){return!!(this._applicationId&&this._userId&&this._userIdPlatform&&this._serverHost)},Object.defineProperty(CoreConfig.prototype,"applicationId",{get:function(){return this._applicationId},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"applicationKey",{get:function(){return this._applicationKey},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"applicationName",{get:function(){return this._applicationName},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"protocol",{get:function(){return this._protocol},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"serverHost",{get:function(){return this._serverHost},set:function(t){this._serverHost=t},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"serverUrl",{get:function(){return this._serverUrl},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"userIdPlatform",{get:function(){return this._userIdPlatform},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"authKey",{get:function(){return this._authKey},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"sessionKey",{get:function(){return this._sessionKey},set:function(t){this._sessionKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"resourcesDescriptorUrl",{get:function(){return"//"+this._resourcesDescriptorUrl},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"platform",{get:function(){return this._platform},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"authUrl",{get:function(){return this._authUrl},set:function(t){this._authUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"mainConfigPath",{get:function(){return this._mainConfigPath},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"locale",{get:function(){return this._locale},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"defaultLocale",{get:function(){return this._defaultLocale},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"serverTime",{get:function(){return this._serverTime},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"serverIP",{get:function(){return this._serverIP},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"userIP",{get:function(){return this._userIP},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"devMode",{get:function(){return this._devMode},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"clientLogsUrl",{get:function(){return this._clientLogsUrl},enumerable:!0,configurable:!0}),CoreConfig.prototype.getLocalePath=function(t){return this._locales&&this._locales.hasOwnProperty(t)?this._locales[t]:null},Object.defineProperty(CoreConfig.prototype,"roles",{get:function(){return this._roles},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"mobile",{get:function(){return this._mobile},set:function(t){this._mobile=t},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),CoreConfig.prototype.isUserAdmin=function(){return this._isAdmin},Object.defineProperty(CoreConfig.prototype,"serverTimezoneOffset",{get:function(){return this._serverTimezoneOffset},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"pushServiceData",{get:function(){return this._pushServiceData},enumerable:!0,configurable:!0}),Object.defineProperty(CoreConfig.prototype,"clansEnabled",{get:function(){return this._clansEnabled},enumerable:!0,configurable:!0}),CoreConfig}();e.CoreConfig=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(28),n(108),n(0),n(949),n(4),n(17),n(1193)],void 0===(r=function(t,e,n,o,a,s,c,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function StaticDataService(){var t=null!==e&&e.apply(this,arguments)||this;return t.CHANNEL="staticData",t}return d(StaticDataService,e),StaticDataService.prototype.initialize=function(r){return h(this,void 0,void 0,function(){var e,n,i;return _(this,function(t){switch(t.label){case 0:if(this._config=r,!u.ElkaCore.instance.config.staticDataResourceId)return o.Core.instance.fatalError(new a.BaseError("Static data resource Id is not set.")),[2];e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,p.Services.resources.getResources(this._config.dependencies.resources.concat(u.ElkaCore.instance.config.staticDataResourceId))];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),o.Core.instance.fatalError(new a.BaseError("Cannot load static data resources.")),[2];case 4:return s.Application.resources.staticDataEncrypt.enable?(i=e.getResource(u.ElkaCore.instance.config.staticDataResourceId).xmlString,[4,(new l.DecoderV2).decode(i)]):[3,6];case 5:return i=t.sent(),n=(new DOMParser).parseFromString(i,"text/xml"),[3,7];case 6:n=e.getResource(u.ElkaCore.instance.config.staticDataResourceId).xmlDocument,t.label=7;case 7:try{this._data=c.MainBodyStaticData.parse(jQuery(n).find(this._config.staticDataFirstElementSelector))}catch(t){s.Application.debug.addError(this.CHANNEL,"StaticDataService.initialize error: not found config!",t)}return[2]}})})},Object.defineProperty(StaticDataService.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),StaticDataService}(n.Service);e.StaticDataService=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),v=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},b=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(28),n(0),n(8),n(268),n(26),n(649),n(35),n(36),n(56),n(4),n(2),n(194),n(86),n(62)],void 0===(r=function(t,e,a,i,r,n,o,s,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=function(n){function DebugService(){var t=null!==n&&n.apply(this,arguments)||this;return t._loaderAssistant=null,t._errorWindowShown=!1,t._gameStarted=!1,t}return m(DebugService,n),DebugService.prototype.initialize=function(e){return v(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return[4,n.prototype.initialize.call(this,e)];case 1:return t.sent(),window.hasOwnProperty("ELKA_HELPER")?(console.log("DebugService.initialize: stop console interception."),this._loaderAssistant=window.ELKA_HELPER,this._loaderAssistant.consoleHandler.stopInterception(),this._loaderAssistant.errorHandler.clearHandlers(),this._loaderAssistant.errorHandler.addHandler(this.errorHandler.bind(this)),this.history=this.history.concat(this._loaderAssistant.consoleHandler.getHistory()),this._loaderAssistant.consoleHandler.clearHistory()):console.error("HELPER IS NOT FOUND."),this._performanceLogger=new s.PerformanceLogger,l.ElkaCore.instance.eventRouter.addEventListener(_.CoreEvent.STARTED,this.onCoreStarted.bind(this)),[2]}})})},DebugService.prototype.onCoreStarted=function(){l.ElkaCore.instance.eventRouter.removeEventListener(_.CoreEvent.STARTED,this.onCoreStarted.bind(this)),this._gameStarted=!0,this._performanceLogger.start()},DebugService.prototype.showErrorWindow=function(t,e,n,i){(void 0===i&&(i=!0),this._errorWindowShown)?this.addLog("main","DebugService.showErrorWindow: Error window is already shown."):((!this._gameStarted||!this.tryToShowInGameErrorWindow(t,e,n))&&(this._loaderAssistant?(this.addLog(this.DEBUG_CHANNEL,"DebugService.showErrorWindow: show by Loader"),this._loaderAssistant.errorWindow.show(i?void 0:t)):this.addLog(this.DEBUG_CHANNEL,"DebugService.showErrorWindow: cant show")),this._errorWindowShown=!0,l.ElkaCore.instance.breakGame())},DebugService.prototype.tryToShowInGameErrorWindow=function(t,e,n){this.addLog(this.DEBUG_CHANNEL,"DebugService.showErrorWindow: show by View Service");try{i.Application.view.show(d.GUINames.ERROR_WINDOW,new r.ViewContext({text:t,title:e,button:n?h.ErrorWindowButton.RELOAD:h.ErrorWindowButton.NO_BUTTON}),o.WindowLayer.ERRORS)}catch(t){return this.addLog(this.DEBUG_CHANNEL,"DebugService.showErrorWindow: view service error."),this.addWarning(this.DEBUG_CHANNEL,t.message,t.stack),!1}return!0},DebugService.prototype.sendLog=function(t,e,n,i,r){if(void 0===e&&(e=""),void 0===r&&(r="*"),this.addLog("debug","Sending log..."),this._loaderAssistant){var o=this.makeLog(t,e,n,i,r);this._loaderAssistant.errorHandler.sendError(o)}},DebugService.prototype.errorHandler=function(t){this.addLog("main","DebugService.errorHandler: "+t.message);var e=this.getPermissions({code:t.code,message:t.message}),n=e.allowBreakGame;if(n&&l.ElkaCore.instance.gameIsBroken)this.addLog("main","DebugService.errorHandler: game is already broken");else{if(e.allowSendLog&&this._loaderAssistant){var i=this.makeLog(t.message,t.stack||"",c.LogFlag.CLIENT,n?u.LogLevel.Critical:u.LogLevel.Error);i.extra=t.extra,this._loaderAssistant.errorHandler.sendError(i)}if(n){var r=t.code===p.ServerErrorCode.GAME_ACCESS_DENIED;this.showErrorWindow(r?t.message:"RUNTIME_ERROR_TEXT","ERROR",!0,!r)}}},DebugService.prototype.onCoreReadyHandler=function(){n.prototype.onCoreReadyHandler.call(this),i.Application.view.mapMediator(d.GUINames.ERROR_WINDOW,h.ErrorWindowMediator),i.Application.view.mapMediator(d.GUINames.ERROR_WINDOW,f.SimplePopupAnimationMediator)},DebugService.prototype.makeLog=function(t,e,n,i,r){void 0===e&&(e=""),void 0===r&&(r="*");var o=this._loaderAssistant.errorHandler.createLog();return o.errorMessage=t,o.stack=e,o.log=encodeURIComponent(this.getChannel(r).join("\n")),o.level=i,o.flag=n,a.Core.instance.config.userId&&(o.userId=a.Core.instance.config.userId.toString()),a.Core.instance.config.userIdPlatform&&(o.sUserId=a.Core.instance.config.userIdPlatform),o.authKey=a.Core.instance.config.authKey,o.environment=this._loaderAssistant.environment.getString(),o},DebugService.prototype.getPermissions=function(t){return this._loaderAssistant.errorHandler.getPermissions(t)},DebugService.prototype.getHistorySize=function(){return this.historySize},DebugService}(n.DebugService);e.DebugService=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,k=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19),n(658),n(659),n(660),n(661),n(319),n(662),n(664),n(667),n(672),n(673),n(674),n(675),n(676),n(680),n(196),n(197),n(198),n(320),n(684),n(321),n(322),n(692),n(693),n(694),n(702),n(703),n(704),n(705),n(707),n(708),n(709),n(710)],void 0===(r=function(t,e,n,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function UserDynamicData(t){var e=i.call(this,t)||this;return e._resources=new r.ItemCollection(o.ResourceDynamicData,null),e._objects=new r.ItemCollection(a.ObjectDynamicItem,null),e._wallposts=new r.ItemCollection(s.WallpostDynamicData,null),e._screens=new r.ItemCollection(c.UserScreenDynamicItem,null),e._beauty=new r.ItemCollection(p.BeautyDynamicItem,null),e._boxes=new r.ItemCollection(l.BoxDynamicItem,null),e._generators=new r.ItemCollection(h.GeneratorDynamicItem,null),e._toy=new r.ItemCollection(_.ToyDynamicItem,null),e._designObject=new r.ItemCollection(P.DesignObjectDynamicItem,null),e._achievements=new r.ItemCollection(f.AchievementDynamicItem,null),e._bonuses=new r.ItemCollection(y.BonusDynamicItem,null),e._likes=new r.ItemCollection(d.LikeDynamicItem,null),e._animals=new r.ItemCollection(O.AnimalDynamicItem,null),e._extraItem=new g.ExtraItemsCollection(b.ExtraItemDynamicItem,null),e._activeExtraItem=new r.ItemCollection(w.ActiveExtraItemDynamicItem,null),e._quests=new r.ItemCollection(m.QuestDynamicItem,null),e._farms=new r.ItemCollection(v.FarmDynamicItem,null),e._boughtForCash=new r.ItemCollection(S.BoughtForCashDynamicItem,null),e._roulette=new E.RoulettesDynamicData(null),e._workshop=new r.ItemCollection(M.WorkshopsDynamicItem,null),e._collections=new r.ItemCollection(A.WorkshopsCollectionItem,null),e._gladeDuel=new D.GladeDuelDynamicData,e._clientParams=new r.ItemCollection(I.ClientParamDynamicItem,null),e._guide=new r.ItemCollection(C.GuideDynamicDataItem,null),e._clan=new T.ClanDynamicData(null),e._pendingAwards=new j.PendingAwardsData(null),e._presents=new r.ItemCollection(x.PresentDynamicItem,null),e._friendInvite=new r.ItemCollection(R.FriendInviteDynamicItem,null),e._rating=new r.ItemCollection(N.RatingDynamicItem,null),e._events=new L.EventsDynamicData(null),e.assignChildPath("resource",e._resources),e.assignChildPath("objects",e._objects),e.assignChildPath("wallpost",e._wallposts),e.assignChildPath("screens",e._screens),e.assignChildPath("beauty",e._beauty),e.assignChildPath("box",e._boxes),e.assignChildPath("likes",e._likes),e.assignChildPath("generators",e._generators),e.assignChildPath("toy",e._toy),e.assignChildPath("designObject",e._designObject),e.assignChildPath("achievement",e._achievements),e.assignChildPath("bonus",e._bonuses),e.assignChildPath("quest",e._quests),e.assignChildPath("workshop",e._workshop),e.assignChildPath("collections",e._collections),e.assignChildPath("farm",e._farms),e.assignChildPath("animal",e._animals),e.assignChildPath("extraItem",e._extraItem),e.assignChildPath("activeExtraItem",e._activeExtraItem),e.assignChildPath("boughtForCash",e._boughtForCash),e.assignChildPath("roulette",e._roulette),e.assignChildPath("gladeDuel",e._gladeDuel),e.assignChildPath("clientParams",e._clientParams),e.assignChildPath("guide",e._guide),e.assignChildPath("clan",e._clan),e.assignChildPath("pendingAward",e._pendingAwards),e.assignChildPath("present",e._presents),e.assignChildPath("friendInvite",e._friendInvite),e.assignChildPath("rating",e._rating),e.assignChildPath("events",e._events),e.replicateChange(e._resources),e.replicateChange(e._objects),e.replicateChange(e._wallposts),e.replicateChange(e._screens),e.replicateChange(e._beauty),e.replicateChange(e._boxes),e.replicateChange(e._generators),e.replicateChange(e._toy),e.replicateChange(e._designObject),e.replicateChange(e._achievements),e.replicateChange(e._bonuses),e.replicateChange(e._likes),e.replicateChange(e._quests),e.replicateChange(e._farms),e.replicateChange(e._animals),e.replicateChange(e._extraItem),e.replicateChange(e._activeExtraItem),e.replicateChange(e._boughtForCash),e.replicateChange(e._roulette),e.replicateChange(e._workshop),e.replicateChange(e._collections),e.replicateChange(e._gladeDuel),e.replicateChange(e._clientParams),e.replicateChange(e._guide),e.replicateChange(e._clan),e.replicateChange(e._pendingAwards),e.replicateChange(e._presents),e.replicateChange(e._friendInvite),e.replicateChange(e._rating),e.replicateChange(e._events),e.initChildren(t),e.tryDispatchScreenChanged(),e}return k(UserDynamicData,i),UserDynamicData.parse=function(t){return new UserDynamicData(r.ItemCollection.getObjectByPath(t,"user",{}))},UserDynamicData.prototype.update=function(t,e){void 0===e&&(e=!1);var n=i.prototype.update.call(this,t,e);return this.tryDispatchScreenChanged(),n},Object.defineProperty(UserDynamicData.prototype,"id",{get:function(){return this.getNumber("_id")},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"sUserId",{get:function(){return this.getString("_sUserId")},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"level",{get:function(){return this.getNumber("level")},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"screen",{get:function(){return this.getNumber("screen")},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"exp",{get:function(){return this.getNumber("exp")},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"cups",{get:function(){return this.getRawValue("cups",null)},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"session",{get:function(){return String(this.getRawValue("session",""))},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"resources",{get:function(){return this._resources},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"wallposts",{get:function(){return this._wallposts},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"screens",{get:function(){return this._screens},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"beauty",{get:function(){return this._beauty},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"boxes",{get:function(){return this._boxes},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"likes",{get:function(){return this._likes},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"generators",{get:function(){return this._generators},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"designObject",{get:function(){return this._designObject},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"achievements",{get:function(){return this._achievements},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"toy",{get:function(){return this._toy},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"bonuses",{get:function(){return this._bonuses},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"quests",{get:function(){return this._quests},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"farms",{get:function(){return this._farms},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"extraItem",{get:function(){return this._extraItem},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"activeExtraItem",{get:function(){return this._activeExtraItem},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"animals",{get:function(){return this._animals},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"roulette",{get:function(){return this._roulette},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"workshop",{get:function(){return this._workshop},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"collections",{get:function(){return this._collections},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"gladeDuel",{get:function(){return this._gladeDuel},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"clientParams",{get:function(){return this._clientParams},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"guide",{get:function(){return this._guide},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"clan",{get:function(){return this._clan},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"friendInvite",{get:function(){return this._friendInvite},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"pendingAwards",{get:function(){return this._pendingAwards},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"presents",{get:function(){return this._presents},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"rating",{get:function(){return this._rating},enumerable:!0,configurable:!0}),Object.defineProperty(UserDynamicData.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),UserDynamicData.prototype.tryDispatchScreenChanged=function(){this.screen!==this._lastScreen&&(this._lastScreen=this.screen,this.dispatchEvent(new u.UserDynamicDataEvent(u.UserDynamicDataEvent.SCREEN_CHANGED)))},UserDynamicData}(n.WalletDynamicItem);e.UserDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WalletTransaction(t,e){this._key=t,this._success=e}return Object.defineProperty(WalletTransaction.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(WalletTransaction.prototype,"success",{get:function(){return this._success},enumerable:!0,configurable:!0}),WalletTransaction}();e.WalletTransaction=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Wallet(t){this._objectKey=t,this._value=0}return Wallet.prototype.putIn=function(t){this._value+=t},Object.defineProperty(Wallet.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(Wallet.prototype,"objectKey",{get:function(){return this._objectKey},enumerable:!0,configurable:!0}),Wallet}();e.Wallet=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UserDynamicDataEvent(){return null!==t&&t.apply(this,arguments)||this}return a(UserDynamicDataEvent,t),UserDynamicDataEvent.SCREEN_CHANGED="UserDynamicDataEvent.SCREEN_CHANGED",UserDynamicDataEvent}(n.BaseDataEvent);e.UserDynamicDataEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(683)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AnimalDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._actions=new r.ItemCollection(o.AnimalActionDynamicItem,null),n.assignChildPath("actions",n._actions),n.replicateChange(n._actions),n.initChildren(e),n}return a(AnimalDynamicItem,i),Object.defineProperty(AnimalDynamicItem.prototype,"happy",{get:function(){return this.getNumber("happy")},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalDynamicItem.prototype,"actions",{get:function(){return this._actions},enumerable:!0,configurable:!0}),AnimalDynamicItem}(n.BaseDynamicDataIdentifiable);e.AnimalDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(685),n(686)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function DesignObjectDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._actions=new r.ItemCollection(o.DesignObjectActionDynamicItem,null),n._options=new r.ItemCollection(a.DesignObjectOptionDynamicItem,null),n.assignChildPath("actions",n._actions),n.assignChildPath("options",n._options),n.replicateChange(n._actions),n.replicateChange(n._options),n.initChildren(e),n}return s(DesignObjectDynamicItem,i),Object.defineProperty(DesignObjectDynamicItem.prototype,"points",{get:function(){return this.getNumber("points")},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDynamicItem.prototype,"actions",{get:function(){return this._actions},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDynamicItem.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),DesignObjectDynamicItem}(n.BaseDynamicDataIdentifiable);e.DesignObjectDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(113),n(687)],void 0===(r=function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function RoulettesDynamicData(t){var e=n.call(this,t)||this;return e._roulettes=new i.ItemCollection(r.RouletteDynamicItem,null),e.assignChildPath("items",e._roulettes),e.replicateChange(e._roulettes),e}return a(RoulettesDynamicData,n),RoulettesDynamicData.prototype.init=function(t){n.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(RoulettesDynamicData.prototype,"roulettes",{get:function(){return this._roulettes},enumerable:!0,configurable:!0}),RoulettesDynamicData}(n.WatchedDynamicItem);e.RoulettesDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PaymentDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(PaymentDynamicItem,t),Object.defineProperty(PaymentDynamicItem.prototype,"preorder_id",{get:function(){return this.getNumber("preorder_id")},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentDynamicItem.prototype,"item_id",{get:function(){return this.getNumber("item_id")},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentDynamicItem.prototype,"promo_start_id",{get:function(){return this.getNumber("promo_start_id")},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentDynamicItem.prototype,"item_extra_id",{get:function(){return this.getNumber("item_extra_id")},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentDynamicItem.prototype,"price",{get:function(){return this.getFloat("price")},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentDynamicItem.prototype,"award_status",{get:function(){return this.getNumber("award_status")},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentDynamicItem.prototype,"payment_time",{get:function(){return this.getNumber("payment_time")},enumerable:!0,configurable:!0}),Object.defineProperty(PaymentDynamicItem.prototype,"order_id",{get:function(){return this.getFloat("order_id")},enumerable:!0,configurable:!0}),PaymentDynamicItem}(n.BaseDynamicDataIdentifiable);e.PaymentDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=function(t){function ToyXYDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ToyXYDynamicItem,t),Object.defineProperty(ToyXYDynamicItem.prototype,"toyId",{get:function(){return this.getString(i.ID)},enumerable:!0,configurable:!0}),Object.defineProperty(ToyXYDynamicItem.prototype,"x",{get:function(){return this.getNumber(i.X)},enumerable:!0,configurable:!0}),Object.defineProperty(ToyXYDynamicItem.prototype,"y",{get:function(){return this.getNumber(i.Y)},enumerable:!0,configurable:!0}),Object.defineProperty(ToyXYDynamicItem.prototype,"rotation",{get:function(){return this.getNumber(i.ROTATION)},enumerable:!0,configurable:!0}),Object.defineProperty(ToyXYDynamicItem.prototype,"scale",{get:function(){return this.getNumber(i.SCALE)},enumerable:!0,configurable:!0}),Object.defineProperty(ToyXYDynamicItem.prototype,"flip",{get:function(){return this.getNumber(i.FLIP)},enumerable:!0,configurable:!0}),Object.defineProperty(ToyXYDynamicItem.prototype,"zIndex",{get:function(){return this.getNumber(i.Z_INDEX)},enumerable:!0,configurable:!0}),ToyXYDynamicItem}(n.BaseDynamicDataIdentifiable);e.ToyXYDynamicItem=o,(r=i=e.ToyKey||(e.ToyKey={})).ID="0",r.X="1",r.Y="2",r.LOCATION="3",r.Z_INDEX="4",r.FLIP="5",r.SCALE="6",r.ROTATION="7"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,v=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),b=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},g=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(276),n(26),n(326),n(17),n(742),n(4),n(66),n(193),n(2)],void 0===(r=function(t,e,n,d,i,h,r,o,_,f,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIRectangle,c=uipixi.UI,u=uipixi.UIFactory,y=uipixi.UIImage,m=PIXI.Texture,p=function(l){function ViewService(){var t=null!==l&&l.apply(this,arguments)||this;return t._whiteListConfigs=new core.Map,t}return v(ViewService,l),ViewService.prototype.initialize=function(p){return b(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u;return g(this,function(t){switch(t.label){case 0:return[4,l.prototype.initialize.call(this,p)];case 1:for(t.sent(),this._onGlade=!0,this._triggeredLayersToHideGlade=((e={})[d.WindowLayer.WINDOWS]=!0,e),n=new f.UAParser(window.navigator.userAgent),i=0<=n.getBrowser().name.indexOf("Edge"),h.Services.debug.addLog("ViewService - isEdge: "+i),r=h.Services.resources.getResourcesByType(_.ResourceType.CURSOR),o=0,a=r;o<a.length;o++)s=a[o],c=h.Services.resources.getResourceBaseUrl()+s.descriptor.src,u=this.getCursorOptions(s.descriptor.id,!i),i?this._ui.cursors.addImageCursorStyle(s.descriptor.id,new y(null,s.descriptor.id,m.from(c)),u):this._ui.cursors.addUrlCursorStyle(s.descriptor.id,c,u);return[2]}})})},Object.defineProperty(ViewService.prototype,"viewConfig",{get:function(){return this._config},enumerable:!0,configurable:!0}),ViewService.prototype.show=function(t,e,n){var i=n||d.WindowLayer.WINDOWS,r=this.getWhiteListConfig(i);if(r){var o="string"==typeof t?t:t.name;if(-1===r.names.indexOf(o))return void h.Services.debug.addWarning(this.DEBUG_CHANNEL,"Window is not allowed:",o,"allowed:",r.names)}return h.Services.debug.addLog(this.DEBUG_CHANNEL,"show","string"==typeof t?t:t.name,n),l.prototype.show.call(this,t,e,n)},ViewService.prototype.showCustom=function(t,e){var n;return n="string"==typeof t?u.instance.createUIElementByName(t):t,e.name&&(n.name=e.name),this.show(n,e.context,e.layer)},ViewService.prototype.hide=function(t,e){h.Services.debug.addLog(this.DEBUG_CHANNEL,"hide",t.displayObject.name),l.prototype.hide.call(this,t,e)},ViewService.prototype.getCursorOptions=function(t,e){switch(t){case i.Cursors.WAND:case i.Cursors.WAND_ACTIVE:return{x:e?29:-20,y:e?23:-20}}},ViewService.prototype.createUI=function(){var t=o.ElkaCore.instance.config.mobile,e="vk"===o.ElkaCore.instance.config.platform;this._config.UIOptions.mobile=t||e,e&&!t&&(this._config.UIOptions.webFullscreen=!0),this._config.UIOptions.resolution=window.devicePixelRatio,this._config.UIOptions.autoDensity=!0,this._config.UIOptions.backgroundColor=1121592,this._config.UIOptions.preserveDrawingBuffer=!0;var n=new c(this._config.UIOptions);n.registerLogger(new r.UIPIXILogger);var i=this.getLayersOptions();return this._gladeLayers=i.filter(function(t){return t.isGladeLayer}).map(function(t){return t.layerType}),n.windows.initialize({defaultLayer:d.WindowLayer.WINDOWS,layers:i}),n},ViewService.prototype.getLayersOptions=function(){return[{layerType:d.WindowLayer.DEV,isGladeLayer:!1},{layerType:d.WindowLayer.BACKGROUND,isGladeLayer:!1},{layerType:d.WindowLayer.DECOR_BACK,isGladeLayer:!0},{layerType:d.WindowLayer.OBJECTS,isGladeLayer:!0},{layerType:d.WindowLayer.DECOR_FRONT,isGladeLayer:!0},{layerType:d.WindowLayer.TOYS,isGladeLayer:!0},{layerType:d.WindowLayer.ANIMALS,isGladeLayer:!0},{layerType:d.WindowLayer.GLADE_STARS,isGladeLayer:!0},{layerType:d.WindowLayer.BUBBLES,isGladeLayer:!0},{layerType:d.WindowLayer.SNOW,isGladeLayer:!0},{layerType:d.WindowLayer.HUD,isGladeLayer:!0},{layerType:d.WindowLayer.WINDOWS,windowDivider:u.instance.createUIElementByName(a.GUINames.WINDOW_DIVIDER),singleVisibleWindow:!0,isGladeLayer:!1},{layerType:d.WindowLayer.LOCK,isGladeLayer:!1},{layerType:d.WindowLayer.GUIDE,isGladeLayer:!1},{layerType:d.WindowLayer.GUIDE_SKIP_BUTTON,isGladeLayer:!1},{layerType:d.WindowLayer.TOOLTIP,isGladeLayer:!1},{layerType:d.WindowLayer.ANIMATIONS,isGladeLayer:!1},{layerType:d.WindowLayer.LONG_REQUEST,windowDivider:this.createEmptyDivider(0),isGladeLayer:!1},{layerType:d.WindowLayer.ERRORS,windowDivider:this.createEmptyDivider(.75),isGladeLayer:!1},{layerType:d.WindowLayer.ADMIN,windowDivider:this.createEmptyDivider(.75),isGladeLayer:!1},{layerType:d.WindowLayer.FRAME,isGladeLayer:!1}]},ViewService.prototype.createEmptyDivider=function(t){var e=new s(0);return e.alpha=t,e.outside="center",e.anchor="center",e.width=5e3,e.height=5e3,e.interactive=!0,e},ViewService.prototype.getWhiteListConfig=function(t){return this._whiteListConfigs.get(t)},ViewService.prototype.setWhiteListConfig=function(t,e){null===e?this._whiteListConfigs.delete(t):this._whiteListConfigs.set(t,e)},Object.defineProperty(ViewService.prototype,"onGlade",{get:function(){return this._onGlade},set:function(t){this._onGlade=t},enumerable:!0,configurable:!0}),Object.defineProperty(ViewService.prototype,"gladeLayers",{get:function(){return this._gladeLayers},enumerable:!0,configurable:!0}),ViewService}(n.ViewService);e.ViewService=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.Cursors||(e.Cursors={})).NONE="",n.WAND="wand",n.WAND_ACTIVE="wand_active"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(24),n(141),n(0),n(5),n(201),n(17),n(202),n(25)],void 0===(r=function(t,e,u,p,h,a,_,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function RequirementsService(){return null!==t&&t.apply(this,arguments)||this}return s(RequirementsService,t),RequirementsService.prototype.initialize=function(t){this._waiters=new core.Map},RequirementsService.prototype.check=function(t,e){void 0===e&&(e=null);var n=_.Logic.fromString(t.logic),i=!1,r=null;if(t.ref&&((r=h.Application.static.data.requirements.requirements.getItem(t.ref))||h.Application.debug.addError(this.DEBUG_CHANNEL,"Requirements contain incorrect ref: "+t.ref)),0===t.requirement.length&&0===t.requirements.length)return!r||this.check(r,e);if(r)return h.Application.debug.addWarning(this.DEBUG_CHANNEL,"Requirements contains ref and tree. Only ref will be checked!"),this.check(r,e);for(var o=0,a=t.requirement;o<a.length;o++){var s=a[o],c=this.checkItem(s,e);if(c&&n===_.Logic.OR)return!0;if(!c&&n===_.Logic.AND)return!1;c&&(i=!0)}for(var u=0,p=t.requirements;u<p.length;u++){var l=p[u],d=this.check(l,e);if(d&&n===_.Logic.OR)return!0;if(!d&&n===_.Logic.AND)return!1;d&&(i=!0)}return i},RequirementsService.prototype.wait=function(t,e,n){void 0===n&&(n=null);var i=null;this._waiters.has(t)||(this._waiters.set(t,[]),h.Application.dataProvider.addWaitChange(t,this.innerStateWaitHandler.bind(this,t,n))),i=this._waiters.get(t);var r={state:t instanceof u.RequirementsTreeStaticData?this.check(t):this.checkItem(t),callback:e};return i.push(r),{requirements:t,waiter:r}},RequirementsService.prototype.unwait=function(t,e,n){void 0===n&&(n=null);var i=null;if(this._waiters.has(t)&&(i=this._waiters.get(t)),i){for(var r=-1,o=0;o<i.length;o++)if(a.Utils.equalHackFunctions(i[o].callback,e)){r=o;break}-1!==r?(this._waiters.get(t).splice(r,1),0===this._waiters.get(t).length&&(h.Application.dataProvider.removeWaitChange(t,this.innerStateWaitHandler.bind(this,t,n)),this._waiters.delete(t))):h.Application.debug.addWarning(this.DEBUG_CHANNEL,"unwait: not found waiters with callback for:",arguments)}else h.Application.debug.addWarning(this.DEBUG_CHANNEL,"unwait: not found waiters for:",arguments)},RequirementsService.prototype.unwaitById=function(t){var e=null;if(this._waiters.has(t.requirements)&&(e=this._waiters.get(t.requirements)),e){var n=e.indexOf(t.waiter);-1!==n?(e.splice(n,1),0===this._waiters.get(t.requirements).length&&h.Application.dataProvider.removeWaitChange(t.requirements,this.innerStateWaitHandler.bind(this,t.requirements))):h.Application.debug.addWarning(this.DEBUG_CHANNEL,"unwaitById: not found waiters with callback for:",arguments)}else h.Application.debug.addWarning(this.DEBUG_CHANNEL,"unwaitById: not found waiters for:",arguments)},RequirementsService.prototype.getValueInfos=function(t){var e=[];if(t instanceof p.RequirementItemStaticData)t.data&&e.push.apply(e,h.Application.calculator.getDataValues(t.data)),t.minValue&&e.push.apply(e,this.getDateOrDataValues(t.minValue)),t.maxValue&&e.push.apply(e,this.getDateOrDataValues(t.maxValue)),t.notValue&&e.push.apply(e,this.getDateOrDataValues(t.notValue)),t.value&&e.push.apply(e,this.getDateOrDataValues(t.value));else if(t instanceof u.RequirementsTreeStaticData)if(t.ref){var n=h.Application.static.data.requirements.requirements.getItem(t.ref);n&&(e=e.concat(this.getValueInfos(n)))}else{for(var i=0,r=t.requirements;i<r.length;i++){var o=r[i];e=e.concat(this.getValueInfos(o))}for(var a=0,s=t.requirement;a<s.length;a++){var c=s[a];e=e.concat(this.getValueInfos(c))}}return e},RequirementsService.prototype.getDateOrDataValues=function(t){return t.match(/^(\d{4})\-(\d{2})\-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/)?[new i.DateValueInfo(this.timeFromDateString(t))]:h.Application.calculator.getDataValues(t)},RequirementsService.prototype.checkItem=function(t,e){if(void 0===e&&(e=null),!t.data)return h.Application.debug.addWarning(this.DEBUG_CHANNEL,"Cannot find data value for requirement.",t),!1;var n,i,r=h.Application.calculator.calculate(t.data,e,!0);if(t.value){var o=this.calculate(t.value,e,!0);return null===o?(h.Application.debug.addError(this.DEBUG_CHANNEL,"Cannot calculate value.",t),!1):o===r}if(t.minValue&&t.maxValue)return null===(n=this.calculate(t.minValue,e,!0))?(h.Application.debug.addError(this.DEBUG_CHANNEL,"Cannot calculate minValue.",t),!1):null===(i=this.calculate(t.maxValue,e,!0))?(h.Application.debug.addError(this.DEBUG_CHANNEL,"Cannot calculate maxValue.",t),!1):n<=r&&r<=i;if(t.minValue)return null===(n=this.calculate(t.minValue,e,!0))?(h.Application.debug.addError(this.DEBUG_CHANNEL,"Cannot calculate minValue.",t),!1):n<=r;if(t.maxValue)return null===(i=this.calculate(t.maxValue,e,!0))?(h.Application.debug.addError(this.DEBUG_CHANNEL,"Cannot calculate maxValue.",t),!1):r<=i;if(t.notValue){var a=this.calculate(t.notValue,e,!0);return null===a?(h.Application.debug.addError(this.DEBUG_CHANNEL,"Cannot calculate maxValue.",t),!1):a!==r}return h.Application.debug.addError(this.DEBUG_CHANNEL,"Requirement is empty (value not found).",t),!1},RequirementsService.prototype.calculate=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var i=this.timeFromDateString(t);return void 0!==i?i:h.Application.calculator.calculate(t,e,n)},RequirementsService.prototype.timeFromDateString=function(t){return n.Services.date.getServerTimeByDateString(t)},RequirementsService.prototype.innerStateWaitHandler=function(t,e,n){void 0===n&&(n=null);var i=[];if(this._waiters.has(t)&&(i=this._waiters.get(t)),0!==i.length){var r=!1;r=t instanceof u.RequirementsTreeStaticData?this.check(t,n):this.checkItem(t,n);for(var o=0,a=i=i.slice();o<a.length;o++){var s=a[o];s.state!==r&&s.callback.apply(this)}}},RequirementsService}(r.Service);e.RequirementsService=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(286),n(24),n(111),n(744),n(0),n(131),n(745),n(141),n(202),n(203),n(47),n(142)],void 0===(r=function(t,e,n,i,p,l,s,d,h,r,_,o,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(u){function DataProviderService(){return null!==u&&u.apply(this,arguments)||this}return f(DataProviderService,u),DataProviderService.prototype.initialize=function(e){return y(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,u.prototype.initialize.call(this,e)];case 1:return t.sent(),this._adaptersMap=new core.Map,[2]}})})},DataProviderService.prototype.addWaitChange=function(t,e){if(t instanceof p.ValueInfo)return u.prototype.addWaitChange.call(this,t,e);var n=null;if(this._adaptersMap.has(t))n=this._adaptersMap.get(t);else{var i=this.getDynamicDataValuesRecursively(t);if(0<i.length){for(var r=!1,o=0,a=i;o<a.length;o++){var s=a[o];if(s.operator===d.DataOperatorType.TIMESPENT||s.operator===d.DataOperatorType.TIME_LEFT||s instanceof _.DateValueInfo){r=!0;break}}var c=null;r&&(c=new h.WaitChangeContext(DataProviderService.calculateSecondsToUpdate(i))),n=new l.DynamicDataWaitChangeAdapter(i,c),this._adaptersMap.set(t,n)}}n&&(n.addCallback(e),n.running||n.start())},DataProviderService.prototype.removeWaitChange=function(t,e){if(t instanceof p.ValueInfo)return u.prototype.removeWaitChange.call(this,t,e);var n=null;this._adaptersMap.has(t)&&((n=this._adaptersMap.get(t)).removeCallback(e),n.isEmpty&&(n.stop(),this._adaptersMap.delete(t)))},DataProviderService.prototype.getDynamicDataValuesRecursively=function(t){return t instanceof i.RequirementsTreeStaticData||t instanceof r.RequirementItemStaticData?s.Application.requirements.getValueInfos(t):t instanceof a.PricesTreeStaticData||t instanceof c.PriceItemStaticData||t instanceof o.NamedPriceStaticData?s.Application.price.getValueInfos(t):[]},DataProviderService.calculateSecondsToUpdate=function(t){for(var e,n=[],i=s.Application.date.currentTime,r=0,o=t;r<o.length;r++){var a=o[r];a instanceof _.DateValueInfo&&0<(e=a.seconds-i)&&n.push(e)}return n.sort(),n.length?n[0]:-1},DataProviderService}(n.DataProviderService);e.DataProviderService=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function BasePriceAwardTypeStaticData(){}return BasePriceAwardTypeStaticData.parse=function(t){var e=new BasePriceAwardTypeStaticData;return e._parse(t),e},Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"minValue",{get:function(){return this._minValue},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"maxValue",{get:function(){return this._maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"itemId",{get:function(){return this._itemId},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"ref",{get:function(){return this._ref},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"chance",{get:function(){return this._chance},enumerable:!0,configurable:!0}),Object.defineProperty(BasePriceAwardTypeStaticData.prototype,"optionId",{get:function(){return this._optionId},enumerable:!0,configurable:!0}),BasePriceAwardTypeStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type"),this._value=jQuery(t).attr("value"),this._minValue=jQuery(t).attr("minValue"),this._maxValue=jQuery(t).attr("maxValue"),this._itemId=jQuery(t).attr("itemId"),this._screenId=jQuery(t).attr("screenId"),this._ref=jQuery(t).attr("ref"),this._chance=jQuery(t).attr("chance"),this._optionId=n.Utils.parseInt(jQuery(t).attr("optionId"))},BasePriceAwardTypeStaticData}();e.BasePriceAwardTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(115),n(47),n(201),n(0),n(116),n(49),n(203),n(111),n(142),n(5),n(25),n(204)],void 0===(r=function(t,e,f,u,y,m,v,b,p,n,l,c,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.BaseEventTarget,a=function(e){function PriceService(){var t=null!==e&&e.apply(this,arguments)||this;return t._fixPrice=!1,t.eventTarget=new o,t}return s(PriceService,e),PriceService.prototype.initialize=function(t){this._waiters=new core.Map,this._priceToValueInfos=new core.Map},PriceService.prototype.calculate=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var i=new f.CalculatedPrice;if(y.Logic.fromString(t.logic)===y.Logic.AND){for(var r=0,o=t.price;r<o.length;r++){var a=o[r];if(a.chance)m.Application.debug.addWarning(this.DEBUG_CHANNEL,"calculate: price with chance will be ignored",arguments);else{var s=void 0;if(a.ref){var c=m.Application.static.data.prices.price.getItem(a.ref);s=new v.CalculatedPriceItem(b.PriceType.fromString(c.type),m.Application.calculator.calculate(c.value,e,n),c.itemId)}else s=new v.CalculatedPriceItem(b.PriceType.fromString(a.type),m.Application.calculator.calculate(a.value,e,n),a.itemId);s.type==b.PriceType.REAL&&this._fixPrice&&(s.value=1),i.add(s)}}for(var u=0,p=t.prices;u<p.length;u++){var l=p[u];if(m.Application.requirements.check(l.requirements))for(var d=0,h=this.calculate(l,e,n).prices;d<h.length;d++){var _=h[d];i.add(_)}}}else m.Application.debug.addWarning(this.DEBUG_CHANNEL,"calculate: price logic OR will be ignored",arguments);return i},PriceService.prototype.addWaitCanSpend=function(t,e){if(!this._waiters.has(t)){this._waiters.set(t,{state:this.canSpend(t),callbacks:[]}),m.Application.dataProvider.addWaitChange(t,this.innerWaitHandler.bind(this,t));var n=this.getValueInfosForWait(t);this._priceToValueInfos.set(t,n);for(var i=0,r=n;i<r.length;i++){var o=r[i];m.Application.dataProvider.addWaitChange(o,this.innerWaitHandler.bind(this,t))}}for(var a=this._waiters.get(t).callbacks,s=0;s<a.length;s++)if(c.Utils.equalHackFunctions(a[s],e))return;a.push(e)},PriceService.prototype.removeWaitCanSpend=function(e,t){var n=this,i=this._waiters.get(e);if(i){for(var r=i.callbacks,o=-1,a=0;a<r.length;a++)if(c.Utils.equalHackFunctions(r[a],t)){o=a;break}if(-1!==o){if(r.splice(o,1),0===r.length)m.Application.dataProvider.removeWaitChange(e,this.innerWaitHandler.bind(this,e)),this._waiters.delete(e),this._priceToValueInfos.get(e).forEach(function(t){m.Application.dataProvider.removeWaitChange(t,n.innerWaitHandler.bind(n,e))}),this._priceToValueInfos.delete(e)}else m.Application.debug.addWarning(this.DEBUG_CHANNEL,"removeWaitCanSpend: not found waiters with callback for:",arguments)}else m.Application.debug.addWarning(this.DEBUG_CHANNEL,"removeWaitCanSpend: not found waiter for:",arguments)},PriceService.prototype.canSpend=function(t,e){void 0===e&&(e=null);var n=null;n=t instanceof u.PricesTreeStaticData?this.calculate(t):t;var i=this.calculatedPriceToObject(n);return m.Application.dynamic.user.canHold("",i)},PriceService.prototype.hold=function(t){var e=this.calculatedPriceToObject(t),n=m.Application.dynamic.user.hold("",e);return n.success||this.eventTarget.dispatchEvent(new r.PriceServiceEvent(r.PriceServiceEvent.HOLD_NOT_ENOUGH,t)),n},PriceService.prototype.release=function(t){return m.Application.dynamic.user.release("",t.key)},PriceService.prototype.rollback=function(t){return m.Application.dynamic.user.rollback("",t.key)},PriceService.prototype.convertObjectToCalculated=function(t){var e=new f.CalculatedPrice;if(!t)return e;for(var n in t){switch(b.PriceType.fromString(n)){case b.PriceType.RESOURCE:var i=t[n];for(var r in i){var o=new v.CalculatedPriceItem(b.PriceType.RESOURCE,i[r],r);e.add(o)}break;case b.PriceType.REAL:var a=new v.CalculatedPriceItem(b.PriceType.REAL,t[n]);a.type==b.PriceType.REAL&&this._fixPrice&&(a.value=1),e.add(a);break;case b.PriceType.UNKNOWN:default:m.Application.debug.addWarning(this.DEBUG_CHANNEL,"Price.convertObjectToCalculated: unknown price type",t[n])}}return e},PriceService.prototype.getValueInfos=function(t){var e=[];if(t instanceof l.PriceItemStaticData)t.ref?(n=m.Application.static.data.prices.price.getItem(t.ref))&&(e=e.concat(this.getValueInfos(n))):t.chance?m.Application.debug.addWarning(this.DEBUG_CHANNEL,"getValueInfos: price with chance will be ignored",arguments):(t.minValue&&e.push.apply(e,m.Application.calculator.getDataValues(t.minValue)),t.maxValue&&e.push.apply(e,m.Application.calculator.getDataValues(t.maxValue)),t.value&&e.push.apply(e,m.Application.calculator.getDataValues(t.value)));else if(t instanceof p.NamedPriceStaticData)t.value&&e.push.apply(e,m.Application.calculator.getDataValues(t.value));else if(t instanceof u.PricesTreeStaticData)if(t.ref){var n;(n=m.Application.static.data.prices.price.getItem(t.ref))&&(e=e.concat(this.getValueInfos(n)))}else{for(var i=0,r=t.prices;i<r.length;i++){var o=r[i];e=e.concat(this.getValueInfos(o))}for(var a=0,s=t.price;a<s.length;a++){var c=s[a];e=e.concat(this.getValueInfos(c))}}return e},PriceService.prototype.getValueInfosForWait=function(t){var e=[];if(t instanceof p.NamedPriceStaticData||t instanceof l.PriceItemStaticData){(r=this.getOneValueInfoForWait(t))&&e.push(r)}else{for(var n=0,i=t.price;n<i.length;n++){var r,o=i[n];(r=this.getOneValueInfoForWait(o))&&e.push(r)}for(var a=0,s=t.prices;a<s.length;a++){var c=s[a];e.push.apply(e,this.getValueInfosForWait(c))}}return e},PriceService.prototype.getOneValueInfoForWait=function(t){if(0===m.Application.calculator.getDataValues(t.value).length)switch(b.PriceType.fromString(t.type)){case b.PriceType.RESOURCE:return n.ValueInfo.fromString("user.resource."+t.itemId)}return null},PriceService.prototype.innerWaitHandler=function(t,e){var n=this._waiters.get(t);if(n){var i=this.canSpend(t);i!==n.state&&(n.state=i,n.callbacks.forEach(function(t){t(n.state)}))}},PriceService.prototype.calculatedPriceToObject=function(t){for(var e={},n=0,i=t.prices;n<i.length;n++){var r=i[n];switch(r.type){case b.PriceType.RESOURCE:e.hasOwnProperty("resource")||(e.resource={}),e.resource.hasOwnProperty(r.itemId)||(e.resource[r.itemId]=0),e.resource[r.itemId]+=r.value;break;case b.PriceType.UNKNOWN:default:m.Application.debug.addError(this.DEBUG_CHANNEL,"calculatedPriceToObject: can't work with unknown price",arguments)}}return e},PriceService.prototype.calculateNotEnough=function(t){for(var e=new f.CalculatedPrice,n=0,i=t.prices;n<i.length;n++){var r=i[n],o=this.calculateNotEnoughValue(r);if(0<o){var a=new v.CalculatedPriceItem(r.type,o,r.itemId);e.add(a)}}return e},PriceService.prototype.calculateNotEnoughValue=function(t){var e=t.value-this.getUserValue(t.type,t.itemId);return 0<e?e:0},PriceService.prototype.getUserValue=function(t,e){if(t!==b.PriceType.RESOURCE)throw Error("PriceService: getUserValue - unknown type");var n=m.Application.dynamic.user.resources.getItem(e);return n?n.count:0},Object.defineProperty(PriceService.prototype,"fixPrice",{get:function(){return this._fixPrice},set:function(t){this._fixPrice=t,this.eventTarget.dispatchEvent(new r.PriceServiceEvent(r.PriceServiceEvent.FIX_PRICE_CHANGED))},enumerable:!0,configurable:!0}),PriceService}(i.Service);e.PriceService=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(332),n(201),n(0),n(14),n(54),n(25)],void 0===(r=function(t,e,m,v,b,g,w,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AwardService(){return null!==t&&t.apply(this,arguments)||this}return a(AwardService,t),AwardService.prototype.initialize=function(t){},AwardService.prototype.calculate=function(t,e){void 0===e&&(e=null);var n=new m.CalculatedAward;if(v.Logic.fromString(t.logic)===v.Logic.AND){for(var i=0,r=t.award;i<r.length;i++){var o=r[i];if(o.chance)b.Application.debug.addWarning(this.DEBUG_CHANNEL,"calculate: award with chance will be ignored",arguments);else{var a=void 0;if(o.ref)for(var s=b.Application.static.data.awards.awards.getItem(o.ref),c=0,u=this.calculate(s.awards,e).awards;c<u.length;c++){var p=u[c];n.add(p)}else a=new w.CalculatedAwardItem(g.AwardType.fromString(o.type),b.Application.calculator.calculate(o.value,e),o.itemId),n.add(a)}}for(var l=0,d=t.awards;l<d.length;l++){var h=d[l];if(b.Application.requirements.check(h.requirements,e))for(var _=0,f=this.calculate(h,e).awards;_<f.length;_++){var y=f[_];n.add(y)}}}else b.Application.debug.addWarning(this.DEBUG_CHANNEL,"calculate: award logic OR will be ignored",arguments);return n},AwardService.prototype.accrueAwardImmediately=function(t){if(t)for(var e in t){var n=g.AwardType.fromString(e);switch(n){case g.AwardType.RESOURCE:var i=t[e];for(var r in i){var o=b.Application.dynamic.user.resources.getItem(r),a=o?o.count:0;a+=i[r],(d={})[r]=a,b.Application.dynamic.user.resources.update(d)}break;case g.AwardType.EXTRA_ITEM:var s=t[n];for(var c in s){var u=s[c];b.Application.model.extraItems.updateOwn(u,!0)}b.Application.debug.addLogToConsole("accrueAwardImmediately",n);break;case g.AwardType.TOY:var p=t[e];for(var l in p){var d,h=b.Application.dynamic.user.toy.getItem(l),_=h?p[l]+h.count:p[l];(d={})[l]=_,b.Application.dynamic.user.toy.update(d)}break;case g.AwardType.ROULETTE:case g.AwardType.ROULETTE_SPINS:b.Application.model.roulettes.awardAccrued();break;case g.AwardType.BEAUTY:break;default:b.Application.debug.addWarning(this.DEBUG_CHANNEL,"accrueAwardImmediately: unknown award type",e,t[e])}}},AwardService.prototype.convertObjectToCalculated=function(t){var e=new m.CalculatedAward;if(!t)return e;for(var n in t){var i=g.AwardType.fromString(n);switch(i){case g.AwardType.BEAUTY:var r=t[n];for(var o in r){var a=r[o];for(var s in a){var c=new w.CalculatedAwardItem(g.AwardType.BEAUTY,a[s],s);e.add(c)}}break;case g.AwardType.EXTRA_ITEM:var u=t[n];for(var p in u)e.add(new w.CalculatedAwardItem(i,1,u[p].toString()));break;case g.AwardType.TOY:case g.AwardType.RESOURCE:var l=t[n];for(var d in l)e.add(new w.CalculatedAwardItem(i,l[d],d));break;case g.AwardType.ROULETTE:case g.AwardType.ROULETTE_SPINS:var h=t[n];for(var d in h){var _="number"==typeof h[d]?h[d]:h[d].spin.spinCount;e.add(new w.CalculatedAwardItem(i,_,d))}break;case g.AwardType.REAL:e.add(new w.CalculatedAwardItem(i,t[n]));break;case g.AwardType.UNKNOWN:default:b.Application.debug.addWarning(this.DEBUG_CHANNEL,"convertObjectToCalculated: unknown award type",t[n])}}return e},AwardService}(n.Service);e.AwardService=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function CalculatedAward(){this._awards=[]}return CalculatedAward.prototype.add=function(t){var e=this.getItemLike(t);e?e.value+=t.value:this._awards.push(t.clone())},CalculatedAward.prototype.getItemLike=function(t){for(var e=0,n=this._awards;e<n.length;e++){var i=n[e];if(i.equalsLike(t))return i}return null},CalculatedAward.prototype.getAwardTypeItemId=function(t,e){for(var n=0,i=this._awards;n<i.length;n++){var r=i[n];if(r.equalsBy(t,e))return r}return null},Object.defineProperty(CalculatedAward.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),CalculatedAward.prototype.getByType=function(t){for(var e=0,n=this._awards;e<n.length;e++){var i=n[e];if(i.type===t)return i}return null},CalculatedAward.prototype.hasType=function(t){return null!==this.getByType(t)},CalculatedAward.prototype.clone=function(){var e=new CalculatedAward;return this._awards.forEach(function(t){e.add(t.clone())}),e},CalculatedAward}();e.CalculatedAward=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(301),n(95),n(0),n(334),n(112),n(28),n(117),n(746),n(335),n(4)],void 0===(r=function(t,e,n,r,c,o,i,u,p,a,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(s){function ProfilesService(){var t=null!==s&&s.apply(this,arguments)||this;return t.defaultAvatarResource="uikit/default_ava_96x96",t}return h(ProfilesService,s),ProfilesService.prototype.initialize=function(a){return _(this,void 0,void 0,function(){var e,n,i,r,o;return f(this,function(t){switch(t.label){case 0:return[4,s.prototype.initialize.call(this,a)];case 1:return t.sent(),[4,c.Application.social.platform.getUser(d.ElkaCore.instance.config.userIdPlatform)];case 2:return(e=t.sent()).success?(this._current=e.user,this.socialProfiles.set(this._current.userId,this._current),[4,this.loadAvatar(this._current,"*")]):[3,4];case 3:return t.sent(),[3,5];case 4:this.setDefaultCurrentProfile(),c.Application.debug.addWarning("profiles","our profile not loaded"),t.label=5;case 5:return c.Application.localization.defaultGender=this._current.gender,[4,c.Application.social.platform.getAppFriendList()];case 6:if((n=t.sent()).success&&(this._friendsSocialIds=n.friendList.concat(),void 0!==n.users))for(i=0,r=n.users;i<r.length;i++)o=r[i],this.socialProfiles.set(o.userId,o),this.friendsProfiles.set(o.userId,o);return this.fillDefaultProfile(),this.fillNPCProfiles(),u.Core.instance.promiseManager.wait(p.GameInitServerPromise,this.onGameInit.bind(this)),[2]}})})},ProfilesService.prototype.getProfile=function(t,e){return t===d.ElkaCore.instance.config.userIdPlatform?this._current:this.socialProfiles.has(t)?this.socialProfiles.get(t):e?this._defaultProfile:null},ProfilesService.prototype.avatarLoaded=function(t,e){var n=t&&t.getBiggestSquarePicture(e);return null!==n&&c.Application.resources.isResourceLoaded(n)},ProfilesService.prototype.setDefaultCurrentProfile=function(){this._current.isNPC=!1,this._current.firstName=c.Application.localization.localize("DEFAULT_PROFILE_FIRST_NAME"),this._current.lastName=c.Application.localization.localize("DEFAULT_PROFILE_LAST_NAME"),this._current.photo50="uikit/default_ava_96x96",this._current.pictures.push(new i.UserPictureItem(this._current.photo50,50,50,i.UserPictureType.SQUARE,"*")),this._current.gender="male",this._current.isDefault=!0},ProfilesService.prototype.loadAvatar=function(n,i){return _(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:if(null===(e=n.getBiggestSquarePicture(i)))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,c.Application.resources.getResources([e],!1,!1)];case 2:return t.sent().loaded?n.dispatchEvent(new o.UserEntityEvent(o.UserEntityEvent.AVATAR_LOADED)):e=null,[3,4];case 3:return t.sent(),e=null,[3,4];case 4:return null!==e?[3,6]:[4,this.loadDefaultAvatar()];case 5:e=t.sent(),t.label=6;case 6:return[2,e]}})})},ProfilesService.prototype.onGameInit=function(){this._partLoader=new a.ProfilesPartLoader(300,3e3),this._partLoader.addEventListener(l.ProfilesPartLoaderEvent.PROFILES_LOADED,this.onProfilesPartLoaded.bind(this)),this._partLoader.start()},ProfilesService.prototype.onProfilesPartLoaded=function(t){for(var e=0,n=t.users;e<n.length;e++){var i=n[e];this.socialProfiles.set(i.userId,i),this.friendsProfiles.set(i.userId,i)}},ProfilesService.prototype.fillDefaultProfile=function(){this._defaultProfile=new r.UserEntity,this._defaultProfile.userId="default",this._defaultProfile.isDefault=!0,this._defaultProfile.isNPC=!1,this._defaultProfile.firstName=c.Application.localization.localize("DEFAULT_PROFILE_FIRST_NAME"),this._defaultProfile.lastName=c.Application.localization.localize("DEFAULT_PROFILE_LAST_NAME"),this._defaultProfile.photo50="uikit/default_ava_96x96",this._defaultProfile.pictures.push(new i.UserPictureItem(this._defaultProfile.photo50,50,50,i.UserPictureType.SQUARE,"*")),this._defaultProfile.gender="male"},ProfilesService.prototype.fillNPCProfiles=function(){for(var t=0,e=c.Application.static.data.npcs.npc.items;t<e.length;t++){var n=e[t],i=new r.UserEntity;i.userId=n.id,i.isNPC=!0,this.fillNPCProfile(i,n.profile),this.socialProfiles.set(i.userId,i)}},ProfilesService.prototype.fillNPCProfile=function(t,e,n){t.firstName=c.Application.localization.localize(e.firstName),t.lastName=c.Application.localization.localize(e.lastName),t.gender=e.gender,t.photo50=e.photo_50,t.pictures.push(new i.UserPictureItem("icons_1/ava_"+Math.abs(parseInt(t.userId)),50,50,i.UserPictureType.SQUARE,"*"))},ProfilesService.prototype.loadDefaultAvatar=function(){return _(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:if(c.Application.resources.isResourceLoaded(this.defaultAvatarResource))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this.defaultAvatarResource.substring(0,this.defaultAvatarResource.indexOf("/")),[4,c.Application.resources.getResources([e])];case 2:return t.sent(),[3,4];case 3:return t.sent(),[2,null];case 4:return[2,this.defaultAvatarResource]}})})},Object.defineProperty(ProfilesService.prototype,"defaultProfile",{get:function(){return this._defaultProfile},enumerable:!0,configurable:!0}),ProfilesService}(n.ProfilesService);e.ProfilesService=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function UserEntityEvent(){return null!==t&&t.apply(this,arguments)||this}return o(UserEntityEvent,t),UserEntityEvent.AVATAR_LOADED="UserEntityEvent.AVATAR_LOADED",UserEntityEvent}(uipixi.BaseEvent);e.UserEntityEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ProfilesPartLoaderEvent(t,e,n){return i.call(this,t,e,n)||this}return o(ProfilesPartLoaderEvent,i),Object.defineProperty(ProfilesPartLoaderEvent.prototype,"users",{get:function(){return this.data},enumerable:!0,configurable:!0}),ProfilesPartLoaderEvent.PROFILES_LOADED="ProfilesPartLoaderEvent.PROFILES_LOADED",ProfilesPartLoaderEvent}(uipixi.BaseEvent);e.ProfilesPartLoaderEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},S=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(33),n(0),n(4),n(79),n(17),n(747),n(143),n(749),n(32),n(750)],void 0===(r=function(t,e,g,w,O,r,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,n=function(i){function SocialNetworkService(){var t=null!==i&&i.apply(this,arguments)||this;return t._viralLink="",t}return d(SocialNetworkService,i),SocialNetworkService.prototype.initialize=function(n){return h(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return[4,i.prototype.initialize.call(this,n)];case 1:switch(t.sent(),this._platformType){case g.PlatformType.OK:this._wallpostProcessor=new a.WallpostProcessorOK;break;case g.PlatformType.VK:case g.PlatformType.VK_MOBILE:this._wallpostProcessor=new c.WallpostProcessorVK;break;case g.PlatformType.FB:this._wallpostProcessor=new p.WallpostProcessorFB;break;default:w.Application.debug.addError(this.DEBUG_CHANNEL,"no wallpost processor founded")}return o.Services.view.ui.stage.addEventListener(l.POINTER_DOWN,this.platform.onStageTap.bind(this.platform)),this._platformType!==g.PlatformType.OK?[3,5]:[4,this.platform.setWindowSize(w.Application.view.viewConfig.UIOptions.mobileMinHeight)];case 2:return t.sent(),[4,this.platform.scrollTop()];case 3:return t.sent(),[4,this.platform.getCallsLeft("notifications.sendFromUser")];case 4:return e=t.sent(),w.Application.debug.addLog(this.DEBUG_CHANNEL,"getCallsLeft:",e),[3,7];case 5:return this._platformType!==g.PlatformType.VK?[3,7]:[4,this.platform.scrollTop()];case 6:t.sent(),t.label=7;case 7:return this.platformType!==g.PlatformType.FB?[3,10]:[4,this.platform.hasPermission(O.ElkaCore.instance.config.userIdPlatform,r.PlatformPermission.USER_FRIENDS)];case 8:return t.sent()?[3,10]:[4,this.platform.requestPermissions([r.PlatformPermission.USER_FRIENDS])];case 9:t.sent(),t.label=10;case 10:return[2]}})})},Object.defineProperty(SocialNetworkService.prototype,"viralLink",{get:function(){return this._viralLink},set:function(t){this._viralLink=t},enumerable:!0,configurable:!0}),Object.defineProperty(SocialNetworkService.prototype,"viralFullLink",{get:function(){return this.viralLink?"viral="+this.viralLink:""},enumerable:!0,configurable:!0}),Object.defineProperty(SocialNetworkService.prototype,"viralWallpostLink",{get:function(){return this.platformType===g.PlatformType.OK?this.viralFullLink?"custom_args="+this.viralFullLink:"":this.viralFullLink},enumerable:!0,configurable:!0}),SocialNetworkService.prototype.getAppUrl=function(t){return void 0===t&&(t=!0),this.platform.getAppUrl(void 0,t?this.viralWallpostLink:void 0)},SocialNetworkService.prototype.notify=function(e,n){return h(this,void 0,void 0,function(){return S(this,function(t){switch(this.platformType){case g.PlatformType.OK:return[2,this.platform.notify(e,n,this.viralFullLink)];case g.PlatformType.VK:case g.PlatformType.VK_MOBILE:return[2,this.platform.notify(e,n,this.viralLink)];case g.PlatformType.FB:return[2,this.platform.notify(e,n,this.viralFullLink)];default:w.Application.debug.addError(this.DEBUG_CHANNEL,"Platform is not supported for notify")}return[2]})})},SocialNetworkService.prototype.invite=function(e,n){return h(this,void 0,void 0,function(){return S(this,function(t){switch(this.platformType){case g.PlatformType.OK:return[2,this.platform.showInvite(e,n,this.viralFullLink)];case g.PlatformType.VK:case g.PlatformType.VK_MOBILE:return[2,this.platform.showInvite(e,n,this.viralLink)];default:w.Application.debug.addError(this.DEBUG_CHANNEL,"Platform is not supported for invite")}return[2]})})},SocialNetworkService.prototype.getAdditionalInfo=function(){return h(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return this._additionalInfo?[3,2]:(e=this,[4,w.Application.social.platform.getAdditionalInfo(O.ElkaCore.instance.config.userIdPlatform)]);case 1:e._additionalInfo=t.sent(),t.label=2;case 2:return[2,this._additionalInfo]}})})},SocialNetworkService.prototype.checkWallpostLimit=function(t){var e=w.Application.dynamic.user.wallposts.getItem(t.id.toString());return!t.limitAmount||!e||e.count<t.limitAmount||!!t.limitPeriod&&e.time+t.limitPeriod<=w.Application.date.currentTime},SocialNetworkService.prototype.post=function(n,i,r){return h(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return w.Application.metrics.goalStarkEvent(u.StarkEventsName.SOCIAL_SHARE,{wid:n}),[4,this._wallpostProcessor.post(n,i,r)];case 1:return(e=t.sent()).success||e.errorCode!==s.WallpostErrorCode.NotFound||w.Application.debug.addError(this.DEBUG_CHANNEL,"wallpost not found",n),e.success&&w.Application.social.platformIs(g.PlatformType.OK)&&w.Application.static.data.wallpostsAwards.wallpost.getItem(n)?[4,this._wallpostProcessor.getAward(n)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2,e]}})})},SocialNetworkService.prototype.parseRefLink=function(y,m,v,b){return h(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p,l,d,h,_,f;return S(this,function(t){switch(t.label){case 0:switch(this.platformType){case g.PlatformType.OK:return[3,1];case g.PlatformType.VK:case g.PlatformType.VK_MOBILE:return[3,2];case g.PlatformType.FB:return[3,3]}return[3,6];case 1:if(e=O.ElkaCore.instance.config.customArgs)for(n=e.split("&"),i=0,r=n;i<r.length;i++)if(o=r[i],"custom_args"===(a=o.split("=",3))[0]&&a.shift(),s=a[0],c=a[1],s===y)return w.Application.debug.addLog(this.DEBUG_CHANNEL,y,"custom_args",c),[2,c];return[3,6];case 2:return(u=O.ElkaCore.instance.config.hash)&&(f=m.exec(u))&&f[1]?(w.Application.debug.addLog(this.DEBUG_CHANNEL,y,"hash",f[1]),[2,f[1]]):(p=O.ElkaCore.instance.config.requestKey)&&0===p.indexOf(v)?(w.Application.debug.addLog(this.DEBUG_CHANNEL,y,"request_key",p),[2,p]):[3,6];case 3:return O.ElkaCore.instance.initConfig.request?(l=O.ElkaCore.instance.initConfig.request[y])?(w.Application.debug.addLog(this.DEBUG_CHANNEL,y,l),[2,l]):b&&(d=O.ElkaCore.instance.initConfig.request.request_ids)?(1<(h=d.split(",")).length&&w.Application.debug.addLog(this.DEBUG_CHANNEL,y,"FB: request_ids > 1"),[4,this.platform.getAppRequestInfo(h[0])]):[3,5]:[3,5];case 4:if((_=t.sent()).success&&_.data&&(f=m.exec(_.data))&&f[1])return w.Application.debug.addLog(this.DEBUG_CHANNEL,y,"appRequest",f[1]),[2,f[1]];t.label=5;case 5:return[3,6];case 6:return[2,void 0]}})})},SocialNetworkService}(g.SocialNetworkService);e.SocialNetworkService=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(4),n(0),n(176),n(110),n(28),n(117),n(5)],void 0===(r=function(t,e,n,i,c,r,u,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function OperationService(){return null!==t&&t.apply(this,arguments)||this}return l(OperationService,t),OperationService.prototype.initialize=function(t){return d(this,void 0,void 0,function(){return h(this,function(t){return o.Core.instance.promiseManager.wait(a.GameInitServerPromise,this.onGameInit.bind(this)),this._rules=[],[2]})})},OperationService.prototype.addAllowingRule=function(t){"*"!==t.path||"*"!==t.url?this._rules.push(t):c.Application.debug.addError(this.DEBUG_CHANNEL,"Path and url cant allow all operations together.")},OperationService.prototype.onGameInit=function(){i.ElkaCore.instance.promiseManager.wait(r.NetworkRequestPromise,this.onNetworkResponse.bind(this))},OperationService.prototype.onNetworkResponse=function(t){c.Application.debug.addInfo(this.DEBUG_CHANNEL,"onNetworkResponse");var e=null;t.request&&(e=t.request.url);var n=[];if(t.status===u.NetworkService.RESPONSE_STATUS_SUCCESS&&t.data&&t.data.hasOwnProperty("op")&&t.data.op)for(var i in t.data.op){for(var r=t.data.op[i],o=!1,a=0,s=this._rules;a<s.length;a++){if(s[a].check(r.path,e)){o=!0;break}}o&&n.push(r),c.Application.debug.addLog(this.DEBUG_CHANNEL,r.path,o)}0<n.length&&this.apply(n)},OperationService.prototype.apply=function(t){var e=this;t.forEach(function(t){c.Application.debug.addInfo(e.DEBUG_CHANNEL,"processOperation:",t)});var n=s.Utils.cloneObject(c.Application.dynamic.user.getValue([]));jsonpatch.apply(n,t),c.Application.dynamic.user.update(n,!0)},OperationService.prototype.forceApply=function(t,e){if(0!==Object.keys(e).length){var n=[];for(var i in e)c.Application.debug.addLog(this.DEBUG_CHANNEL,"init op:",e[i]),n.push(e[i]);jsonpatch.apply(t,n)}},OperationService}(n.Service);e.OperationService=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(282),n(117),n(28),n(4)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(n){function ServerService(){return null!==n&&n.apply(this,arguments)||this}return s(ServerService,n),ServerService.prototype.initialize=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,n.prototype.initialize.call(this,e)];case 1:return t.sent(),r.Core.instance.promiseManager.attach(i.GameInitServerPromise,this.handleServerPromise.bind(this)),[2]}})})},ServerService.prototype.getUrl=function(t,e){return o.ElkaCore.instance.config.debug&&o.ElkaCore.instance.config.devMode?n.prototype.getUrl.call(this,t,e)+"?XDEBUG_SESSION_START="+o.ElkaCore.instance.config.debug:n.prototype.getUrl.call(this,t,e)},ServerService}(n.ServerService);e.ServerService=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};i=[n,e,n(0),n(4),n(5),n(751),n(193),n(25),n(35),n(36)],void 0===(r=function(t,e,a,s,o,r,c,n,u,p){"use strict";var l,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=l||(l={}))[i.UNKNOWN=0]="UNKNOWN",i[i.DESKTOP=1]="DESKTOP",i[i.MOBILE=2]="MOBILE";var d=function(t){function MetricsService(){return null!==t&&t.apply(this,arguments)||this}return h(MetricsService,t),MetricsService.prototype.initialize=function(t){this._mobileDetect=null,this._browserType=l.UNKNOWN;try{var e=new c.UAParser(window.navigator.userAgent);this._mobileDetect=new MobileDetect(window.navigator.userAgent),this._browserType=null===this._mobileDetect.mobile()?l.DESKTOP:l.MOBILE,this._browserId=e.getBrowser().name+" "+e.getBrowser().version.split(".")[0],this._device=this._mobileDetect.phone(),this._device||(this._device=this._mobileDetect.tablet())}catch(t){a.Application.debug.addWarning(this.DEBUG_CHANNEL,"Can't receive browser info!")}if(this._starkEvents=new r.StarkEventSystem("stats"),null!==s.ElkaCore.instance.config.fluentClientHost){var n=s.ElkaCore.instance.config.protocol+"://"+s.ElkaCore.instance.config.fluentClientHost+"/stats."+s.ElkaCore.instance.config.applicationName+".event";this._starkEvents.init(n,s.ElkaCore.instance.config.userIdPlatform,s.ElkaCore.instance.config.fluentSession,s.ElkaCore.instance.config.isNewUser)}if(this._yaMetrika=window.ELKA_YA_METRIKA,this._yaMetrika)this._yaMetrika.setUserID(s.ElkaCore.instance.config.userIdPlatform);else{var i=window.ELKA_YA_METRIKA_ERROR;i&&(a.Application.debug.addLog(this.DEBUG_CHANNEL,"YM init error:",i),a.Application.debug.sendLog(i,"",u.LogFlag.CLIENT,p.LogLevel.Warning))}},MetricsService.prototype.goalStarkEvent=function(t,e){var n=a.Application.dynamic.user,i=n.resources.getItem("cash"),r=n.resources.getItem("energy"),o=_({uid:n.id,date:this.createTimeString(a.Application.date.currentDate),level:n.level,rubies:i?i.count:0,energy:r?r.count:0,screen:-1===n.screen?1:n.screen,bt:this._browserType,at:s.ElkaCore.instance.config.mobile?2:1},e);a.Application.debug.addLog(this.DEBUG_CHANNEL,"Try to send starkEvent:",t),this._starkEvents.goal(t,o)},MetricsService.prototype.goalYAEvent=function(t){this._yaMetrika&&this._yaMetrika.reachGoal(t)},MetricsService.prototype.createTimeString=function(t){var e="number"==typeof t?new Date(t):t,n=e.getFullYear()+o.Utils.addZero(e.getMonth()+1,2)+o.Utils.addZero(e.getDate(),2)+"T"+o.Utils.addZero(e.getHours(),2)+o.Utils.addZero(e.getMinutes(),2)+o.Utils.addZero(e.getSeconds(),2),i=e.getTimezoneOffset(),r=i<0;return i*=r?-1:1,n+(r?"+":"-")+o.Utils.addZero(100*Math.floor(i/60)+i%60,4)},Object.defineProperty(MetricsService.prototype,"browserType",{get:function(){return this._browserType},enumerable:!0,configurable:!0}),Object.defineProperty(MetricsService.prototype,"device",{get:function(){return this._device},enumerable:!0,configurable:!0}),Object.defineProperty(MetricsService.prototype,"browserId",{get:function(){return this._browserId},enumerable:!0,configurable:!0}),MetricsService}(n.Service);e.MetricsService=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(281),n(4),n(0),n(752),n(341),n(18),n(31),n(208),n(754),n(22),n(756),n(46)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=function(n){function SettingsService(){var t=null!==n&&n.apply(this,arguments)||this;return t.SOUND=1,t.MUSIC=2,t.ANIMATIONS=3,t.SNOW=4,t.FULLSCREEN_WINDOW=5,t}return f(SettingsService,n),SettingsService.prototype.initialize=function(e){return y(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,n.prototype.initialize.call(this,e)];case 1:return t.sent(),this._settingsData=new o.SettingsData,i.ElkaCore.instance.promiseManager.ask(new s.RegisterModuleLoaderPromise(this)),r.Application.operation.addAllowingRule(new c.OccurrenceBeginningLineRule("/clientParams")),[2]}})})},SettingsService.prototype.onPreloadModule=function(t){return y(this,void 0,void 0,function(){return m(this,function(t){return this._clientParams=r.Application.model.clientParams=new p.ClientParamsModel(r.Application.dynamic.user.clientParams,r.Application.static.data.client.params),l.CommandMap.map(u.SetClientParamPromise,d.SetClientParamCommand),this.applySettings(),this._visibilityService=new a.VisibilityChangeService,this._visibilityService.addEventListener(a.VisibilityChangeEvent.CHANGED,this.onVisibilityChanged.bind(this)),[2]})})},SettingsService.prototype.applySettings=function(){this._settingsData.soundOn=1===this._clientParams.getParam(this.SOUND).number,this._settingsData.musicOn=1===this._clientParams.getParam(this.MUSIC).number,r.Application.sound.mute(!this._settingsData.soundOn,h.SoundGroup.SOUND_GROUP_SOUND),r.Application.sound.mute(!this._settingsData.soundOn,h.SoundGroup.SOUND_GROUP_USE_ENERGY),r.Application.sound.mute(!this._settingsData.soundOn,h.SoundGroup.SOUND_GROUP_BOX_OPEN),r.Application.sound.mute(!this._settingsData.musicOn,h.SoundGroup.SOUND_GROUP_MUSIC),this._settingsData.animationsOn=1===this._clientParams.getParam(this.ANIMATIONS).number,this._settingsData.snowOn=1===this._clientParams.getParam(this.SNOW).number},SettingsService.prototype.toggleSound=function(){this.soundOn(!this._settingsData.soundOn)},SettingsService.prototype.toggleMusic=function(){this.musicOn(!this._settingsData.musicOn)},SettingsService.prototype.toggleAnimations=function(){this.animationsOn(!this._settingsData.animationsOn)},SettingsService.prototype.toggleSnow=function(){this.snowOn(!this._settingsData.snowOn)},SettingsService.prototype.isFullscreenWindowWasShowed=function(){return 1===this._clientParams.getParam(this.FULLSCREEN_WINDOW).number},SettingsService.prototype.setFullscreenWindowParam=function(){i.ElkaCore.instance.promiseManager.ask(new u.SetClientParamPromise(this.FULLSCREEN_WINDOW,1))},SettingsService.prototype.soundOn=function(t){this._settingsData.soundOn!==t&&(r.Application.sound.mute(!t,h.SoundGroup.SOUND_GROUP_SOUND),r.Application.sound.mute(!t,h.SoundGroup.SOUND_GROUP_USE_ENERGY),r.Application.sound.mute(!t,h.SoundGroup.SOUND_GROUP_BOX_OPEN),i.ElkaCore.instance.promiseManager.ask(new u.SetClientParamPromise(this.SOUND,t?1:0)),this._settingsData.soundOn=t,r.Application.debug.addLogToConsole("SettingsService","Sound is "+(this._settingsData.soundOn?"on":"off")))},SettingsService.prototype.musicOn=function(t){this._settingsData.musicOn!==t&&(r.Application.sound.mute(!t,h.SoundGroup.SOUND_GROUP_MUSIC),i.ElkaCore.instance.promiseManager.ask(new u.SetClientParamPromise(this.MUSIC,t?1:0)),this._settingsData.musicOn=t,r.Application.debug.addLogToConsole("SettingsService","Music is "+(this._settingsData.musicOn?"on":"off")))},SettingsService.prototype.animationsOn=function(t){this._settingsData.animationsOn!==t&&(i.ElkaCore.instance.promiseManager.ask(new u.SetClientParamPromise(this.ANIMATIONS,t?1:0)),this._settingsData.animationsOn=t,r.Application.debug.addLogToConsole("SettingsService","Animations is "+(this._settingsData.animationsOn?"on":"off")))},SettingsService.prototype.snowOn=function(t){this._settingsData.snowOn!==t&&(i.ElkaCore.instance.promiseManager.ask(new u.SetClientParamPromise(this.SNOW,t?1:0)),this._settingsData.snowOn=t,r.Application.debug.addLogToConsole("SettingsService","Snow is "+(this._settingsData.animationsOn?"on":"off")))},Object.defineProperty(SettingsService.prototype,"settingsData",{get:function(){return this._settingsData},enumerable:!0,configurable:!0}),SettingsService.prototype.setItemToLocalOrAsync=function(e,n){return y(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this._serverStorage?[4,this._serverStorage.setItem(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.setItem(e,n),[2]}})})},SettingsService.prototype.onVisibilityChanged=function(t){r.Application.debug.addLog(this.DEBUG_CHANNEL,"visibility change | hidden:",this._visibilityService.hidden);var e=this._visibilityService.hidden||!this._settingsData.soundOn,n=this._visibilityService.hidden||!this._settingsData.musicOn;r.Application.sound.mute(n,h.SoundGroup.SOUND_GROUP_MUSIC),r.Application.sound.mute(e,h.SoundGroup.SOUND_GROUP_SOUND),r.Application.sound.mute(e,h.SoundGroup.SOUND_GROUP_USE_ENERGY),r.Application.sound.mute(e,h.SoundGroup.SOUND_GROUP_BOX_OPEN)},SettingsService}(n.SettingsService);e.SettingsService=_}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.BaseEvent,r=function(e){function VisibilityChangeService(){var t=e.call(this)||this;return void 0!==document.hidden?(t._hiddenProperty="hidden",t._eventName="visibilitychange"):void 0!==document.mozHidden?(t._hiddenProperty="mozHidden",t._eventName="mozvisibilitychange"):void 0!==document.msHidden?(t._hiddenProperty="msHidden",t._eventName="msvisibilitychange"):void 0!==document.webkitHidden&&(t._hiddenProperty="webkitHidden",t._eventName="webkitvisibilitychange"),void 0===t._hiddenProperty?n.Application.debug.addWarning("","Page Visibility API is not supported"):(t._listener=t.handleVisibilityChange.bind(t),document.addEventListener(t._eventName,t._listener,!1)),t}return a(VisibilityChangeService,e),VisibilityChangeService.prototype.handleVisibilityChange=function(){this.dispatchEvent(new o(o.CHANGED))},Object.defineProperty(VisibilityChangeService.prototype,"hidden",{get:function(){return void 0!==this._hiddenProperty&&document[this._hiddenProperty]},enumerable:!0,configurable:!0}),VisibilityChangeService.prototype.destroy=function(){this._listener&&document.removeEventListener(this._eventName,this._listener,!1)},VisibilityChangeService}(uipixi.BaseEventTarget);e.VisibilityChangeService=r;var o=function(t){function VisibilityChangeEvent(){return null!==t&&t.apply(this,arguments)||this}return a(VisibilityChangeEvent,t),VisibilityChangeEvent.CHANGED="VisibilityChangeEvent.changed",VisibilityChangeEvent}(i);e.VisibilityChangeEvent=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function ClientParamsModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(ClientParamsModelEvent,t),ClientParamsModelEvent.CHANGED="ClientParamsModelEvent.CHANGED",ClientParamsModelEvent}(uipixi.BaseEvent);e.ClientParamsModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(270),n(0),n(4)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ResourcesService(){return null!==t&&t.apply(this,arguments)||this}return a(ResourcesService,t),ResourcesService.prototype.lazyLoad=function(n,i){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:if(!!o.ElkaCore.instance.config.mobile)return[3,5];r.Application.debug.addLog(i,"lazy loading start"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.getResources(n)];case 2:return t.sent(),r.Application.debug.addLog(i,"lazy loading completed"),[3,4];case 3:return e=t.sent(),r.Application.debug.addWarning(i,"lazy loading not completed",e),[3,4];case 4:return[3,6];case 5:r.Application.debug.addLog(i,"lazy loading is disabled"),t.label=6;case 6:return[2]}})})},ResourcesService}(n.ResourcesService);e.ResourcesService=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},b=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(18),n(4),n(758),n(0),n(5),n(345),n(22),n(759),n(32)],void 0===(r=function(t,e,n,i,_,f,y,m,v,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function InitializationService(){var t=null!==e&&e.apply(this,arguments)||this;return t._moduleLoaders=[],t}return c(InitializationService,e),InitializationService.prototype.initialize=function(t){r.CommandMap.map(f.GameInitPromise,o.GameInitCommand),_.ElkaCore.instance.promiseManager.attach(i.RegisterModuleLoaderPromise,this.onRegisterModuleReady.bind(this))},InitializationService.prototype.onRegisterModuleReady=function(t){this._moduleLoaders.push(t.moduleLoader)},InitializationService.prototype.startGame=function(){return u(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p,l,d,h;return b(this,function(t){switch(t.label){case 0:e=0,n=this._moduleLoaders,t.label=1;case 1:return e<n.length?(h=n[e],(i=h.config)&&(r=i.dependencies.resources)&&0<r.length?[4,y.Application.resources.getResources(r,!1)]:[3,3]):[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[4,_.ElkaCore.instance.promiseManager.ask(new f.GameInitPromise)];case 5:t.sent(),y.Application.debug.addLog(this.DEBUG_CHANNEL,"onGameInit"),o=y.Application.dynamic.user.screen,a=window.ELKA_HELPER,(s=a.loadingProcessor).batchClear(),c=0,u=this._moduleLoaders,t.label=6;case 6:return c<u.length?(h=u[c],y.Application.debug.addLog(this.DEBUG_CHANNEL,"onPreloadModule",m.Utils.getNameFromInstance(h)),void 0===h.onPreloadModule?[3,8]:[4,h.onPreloadModule(o)]):[3,9];case 7:t.sent(),t.label=8;case 8:return c++,[3,6];case 9:return p=v.ResourcesUtils.getScreenResources(this._moduleLoaders,o),s.batchPrepare(p,30,70),[4,y.Application.resources.getResources(p,!1)];case 10:t.sent(),s.batchClear(),l=0,d=this._moduleLoaders,t.label=11;case 11:return l<d.length?(h=d[l],y.Application.debug.addLog(this.DEBUG_CHANNEL,"onStartModule",m.Utils.getNameFromInstance(h)),void 0===h.onStartModule?[3,13]:[4,h.onStartModule(o)]):[3,14];case 12:t.sent(),t.label=13;case 13:return l++,[3,11];case 14:return this.goalEvents(),this.startLazyLoad(o),[2,Promise.resolve(null)]}})})},InitializationService.prototype.startLazyLoad=function(a){return u(this,void 0,void 0,function(){var e,n,i,r,o;return b(this,function(t){switch(t.label){case 0:e=0,n=this._moduleLoaders,t.label=1;case 1:return e<n.length?(i=n[e],(r=i.config)&&(o=r.dependencies.lazyLoadingResources)&&0<o.length?[4,y.Application.resources.lazyLoad(o,m.Utils.getNameFromInstance(i))]:[3,3]):[3,6];case 2:t.sent(),t.label=3;case 3:return[4,v.ResourcesUtils.lazyLoadScreenResources(i,a,m.Utils.getNameFromInstance(i))];case 4:t.sent(),t.label=5;case 5:return e++,[3,1];case 6:return[2]}})})},InitializationService.prototype.goalEvents=function(){if(window.hasOwnProperty("timeOnStart")&&window.hasOwnProperty("timeOnStartChangeTab")){var t=-1;if(m.Utils.cookieEnabled()){var e=m.Utils.getCookie("elkaEnterCount");t=parseInt(e),isNaN(t)?(t=1,m.Utils.setCookie("elkaEnterCount",1,{secure:!0,"max-age":1209600})):(t++,m.Utils.setCookie("elkaEnterCount",t,{secure:!0,"max-age":1209600}))}var n=window.timeOnStartChangeTab,i=window.timeOnStart;i=Math.round(i);var r=performance.now()/1e3,o=(r=Math.round(r))-i;y.Application.metrics.goalStarkEvent(a.StarkEventsName.LOADING_FINISH,{dur:o,tab:n?1:0,url:y.Application.resources.getResourceBaseUrl(),ecount:t})}},InitializationService}(n.Service);e.InitializationService=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(5)],void 0===(r=function(t,e,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResourcesUtils(){}return ResourcesUtils.getResourcesList=function(t,e){for(var n=[],i=0,r=t;i<r.length;i++){for(var o=r[i],a=null,s=0,c=e;s<c.length;s++){var u=c[s];if(u.name===p.Utils.getNameFromClass(o)){a=u.config;break}}a&&a.dependencies&&a.dependencies.resources&&""!=a.dependencies.resources[0]&&(n=n.concat(a.dependencies.resources))}return n=n.filter(function(t,e,n){return e===n.indexOf(t)})},ResourcesUtils.getScreenResources=function(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i].config;if(o&&o.dependencies&&o.dependencies.screenResources){var a=o.dependencies.screenResources[e];a&&0<a.length&&""!=a[0]&&(n=n.concat(o.dependencies.screenResources[e]));var s=o.dependencies.screenResources.pattern;s&&s.forEach(function(t){return n.push(t.replace("{screen}",e.toString()))})}}for(var c=0,u=t;c<u.length;c++){var p=u[c];if(void 0!==p.getResourcesToLoad){var l=p.getResourcesToLoad(e);n.push.apply(n,l)}}return n=n.filter(function(t,e,n){return e===n.indexOf(t)})},ResourcesUtils.lazyLoadScreenResources=function(a,s,c){return o(this,void 0,void 0,function(){var e,n,i,r,o;return l(this,function(t){switch(t.label){case 0:return(e=a.config)&&e.dependencies.lazyLoadingScreenResources?(n=[],(i=e.dependencies.lazyLoadingScreenResources[s])&&n.push.apply(n,i),(r=e.dependencies.lazyLoadingScreenResources.pattern)&&r.forEach(function(t){return n.push(t.replace("{screen}",s.toString()))}),0<(n=n.filter(function(t,e,n){return e===n.indexOf(t)})).length?[4,u.Application.resources.lazyLoad(n,c)]:[3,2]):[3,2];case 1:t.sent(),t.label=2;case 2:return void 0===a.getResourcesToLazyLoad?[3,4]:0<(o=a.getResourcesToLazyLoad(s)).length?[4,u.Application.resources.lazyLoad(o,p.Utils.getNameFromInstance(a))]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},ResourcesUtils}();e.ResourcesUtils=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function SetScreenPromise(t){var e=n.call(this)||this;return e.screenId=t,e}return a(SetScreenPromise,n),SetScreenPromise}(n.BasePromise);e.SetScreenPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(25)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ModelService(){return null!==t&&t.apply(this,arguments)||this}return a(ModelService,t),ModelService.prototype.initialize=function(t){},ModelService}(n.Service);e.ModelService=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,C=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),T=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},j=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(4),n(22),n(18),n(761),n(764),n(25),n(765),n(0),n(766),n(767),n(768),n(769),n(210),n(770),n(350),n(772),n(773),n(774),n(354),n(776),n(2),n(777),n(778),n(779),n(211),n(780),n(781)],void 0===(r=function(t,e,p,n,i,r,o,a,l,s,c,u,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var I=function(t){function PaymentService(){return null!==t&&t.apply(this,arguments)||this}return C(PaymentService,t),PaymentService.prototype.initialize=function(t){p.ElkaCore.instance.promiseManager.ask(new i.RegisterModuleLoaderPromise(this))},PaymentService.prototype.onPreloadModule=function(t){return T(this,void 0,void 0,function(){var e;return j(this,function(t){switch(t.label){case 0:return this._model=new o.PaymentsModel,this._utils=new u.PaymentUtils,this._asyncService=new D.AsyncPaymentsService,n.CommandMap.map(l.BuyDirectPurchasePromoPromise,r.BuyDirectPurchasePromoCommand,{paymentsModel:this._model}),n.CommandMap.map(v.BuyDynamicPromoPromise,b.BuyDynamicPromoCommand,{paymentsModel:this._model}),n.CommandMap.map(d.CalculateSegmentPromise,h.CalculateSegmentCommand,{utils:this._utils}),n.CommandMap.map(_.PreorderPromise,f.PreorderCommand),n.CommandMap.map(y.ProcessPaymentPromise,m.ProcessPaymentCommand),n.CommandMap.map(g.ShowPaymentOnStartPromise,w.ShowPaymentOnStartCommand),n.CommandMap.map(A.UpdateAsyncPaymentPromise,M.UpdateAsyncPaymentCommand),n.CommandMap.map(P.UpdateAsyncPaymentsPromise,E.UpdateAsyncPaymentsCommand),[4,p.ElkaCore.instance.promiseManager.ask(new P.UpdateAsyncPaymentsPromise)];case 1:return t.sent(),[4,p.ElkaCore.instance.promiseManager.ask(new d.CalculateSegmentPromise)];case 2:return e=t.sent(),s.Application.dataProvider.registerProvider("payment",new c.PaymentDataProvider(e,this._utils)),s.Application.view.mapMediator(O.GUINames.PROCESS_PAYMENT_WINDOW,S.ProcessPaymentWindowMediator),[2]}})})},PaymentService.prototype.directBuy=function(t,e,n){var i=void 0===n?{}:n,r=i.count,o=void 0===r?1:r,a=i.friendData,s=void 0===a?void 0:a,c=i.accrueAwardImmediate,u=void 0===c||c;return p.ElkaCore.instance.promiseManager.ask(new l.BuyDirectPurchasePromoPromise(t,e,o,s,u))},PaymentService.prototype.buy=function(t){return p.ElkaCore.instance.promiseManager.ask(new v.BuyDynamicPromoPromise(t))},PaymentService}(a.Service);e.PaymentService=I}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),v=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},b=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(209),n(0),n(4),n(210),n(350),n(2),n(8),n(35),n(33),n(26),n(36)],void 0===(r=function(t,e,n,p,l,d,h,o,_,f,i,a,s,r){"use strict";var y,c;Object.defineProperty(e,"__esModule",{value:!0}),(c=y=e.RealPurchaseState||(e.RealPurchaseState={}))[c.Success=0]="Success",c[c.FailOrCancel=1]="FailOrCancel",c[c.Async=2]="Async";var u=function(t){function AbstractBuyPromoCommand(){return null!==t&&t.apply(this,arguments)||this}return m(AbstractBuyPromoCommand,t),AbstractBuyPromoCommand.prototype.execute=function(e){return v(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return this._promise=e,this._data.paymentsModel.isPurchaseActive?(this.log("Multi purchases are not supported yet."),l.Application.debug.sendLog("Payment error: multi purchases","",i.LogFlag.CLIENT,r.LogLevel.Error),[4,this.rejectPurchase(p.BuyPromoError.Default)]):[3,2];case 1:return t.sent(),[2];case 2:return this.log("Start payment with promo",e.promoId),this._data.paymentsModel.isPurchaseActive=!0,[4,this.processPurchase(e)];case 3:return t.sent(),this._data.paymentsModel.isPurchaseActive=!1,[2]}})})},AbstractBuyPromoCommand.prototype.rejectPurchase=function(e){return v(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return this.log("Resolving payment with error:",p.BuyPromoError[e]),e===p.BuyPromoError.Error&&l.Application.debug.sendLog("Payment error","",i.LogFlag.CLIENT,r.LogLevel.Error),e===p.BuyPromoError.Cancel||e===p.BuyPromoError.NotEnoughPrice?[3,2]:[4,l.Application.view.show(_.GUINames.PAYMENT_ERROR_WINDOW).onClose];case 1:t.sent(),t.label=2;case 2:return this._promise.resolve({success:!1,error:e}),[2]}})})},AbstractBuyPromoCommand.prototype.resolvePurchase=function(t,e,n){this.log("Resolving payment with success"),t.resolve({success:!0,awardObject:e,asyncPayment:n})},AbstractBuyPromoCommand.prototype.realPurchaseOrReject=function(o,a,s,c,u){return v(this,void 0,void 0,function(){var e,n,i,r;return b(this,function(t){switch(t.label){case 0:return[4,d.ElkaCore.instance.promiseManager.ask(new h.PreorderPromise(o,a,s,c,u))];case 1:if((e=t.sent()).success)return[3,8];switch(e.error){case h.PreorderError.Unknown:return[3,2];case h.PreorderError.Fail:return[3,4];case h.PreorderError.UserCancel:return[3,6]}return[3,7];case 2:return[4,this.rejectPurchase(p.BuyPromoError.Default)];case 3:return t.sent(),[3,7];case 4:return[4,this.rejectPurchase(p.BuyPromoError.Error)];case 5:return t.sent(),[3,7];case 6:return this.rejectPurchase(p.BuyPromoError.Cancel),[3,7];case 7:return[2,y.FailOrCancel];case 8:return[4,this.processRealPayment(e.orderId)];case 9:return(n=t.sent()).success?[3,11]:[4,this.rejectPurchase(p.BuyPromoError.Default)];case 10:return t.sent(),[2,y.FailOrCancel];case 11:return(i=n.awardObject)?(r=new f.ViewContext({baseAward:l.Application.award.convertObjectToCalculated(i),title:l.Application.localization.localize("PAYMENT_AWARD_TITLE"),description:l.Application.localization.localize("PAYMENT_AWARD_DESCRIPTION")}),[4,l.Application.view.show(_.GUINames.AWARDS_WINDOW,r).onClose]):[3,13];case 12:t.sent(),l.Application.award.accrueAwardImmediately(i),t.label=13;case 13:return n.async?[4,l.Application.view.show(_.GUINames.PAYMENT_ASYNC_WINDOW).onClose]:[3,15];case 14:return t.sent(),[2,y.Async];case 15:return[2,y.Success]}})})},AbstractBuyPromoCommand.prototype.processRealPayment=function(r){return v(this,void 0,void 0,function(){var e,n,i;return b(this,function(t){switch(t.label){case 0:if(l.Application.social.platformType!==a.PlatformType.VK_MOBILE)return[3,5];e=l.Application.view.show(_.GUINames.PROCESS_PAYMENT_WINDOW,null,s.WindowLayer.LONG_REQUEST),n=[2e3,3e3,4e3,5e3],i=void 0,t.label=1;case 1:return i&&i.success?[3,4]:[4,this.asyncDelay(1!==n.length?n.shift():n[0])];case 2:return t.sent(),[4,d.ElkaCore.instance.promiseManager.ask(new o.ProcessPaymentPromise(r))];case 3:return i=t.sent(),[3,1];case 4:return l.Application.view.hide(e),[2,i];case 5:return[2,d.ElkaCore.instance.promiseManager.ask(new o.ProcessPaymentPromise(r))]}})})},AbstractBuyPromoCommand.prototype.asyncDelay=function(e){return this.log("asyncDelay",e),new Promise(function(t){return setTimeout(t,e)})},AbstractBuyPromoCommand.prototype.log=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=l.Application.debug).addLog.apply(t,["payment"].concat(e))},AbstractBuyPromoCommand}(n.CommandBase);e.AbstractBuyPromoCommand=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ProcessPaymentPromise(t){var e=n.call(this)||this;return e.orderId=t,e}return a(ProcessPaymentPromise,n),ProcessPaymentPromise}(n.BasePromise);e.ProcessPaymentPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.PreorderType||(e.PreorderType={}))[n.Dynamic=1]="Dynamic",n[n.DirectPurchase=2]="DirectPurchase"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function FbProcessAction(t){var e=n.call(this)||this;return e.action="fbProcess",e.controller="payment",e.input=new i.ActionInput({paymentId:t}),e.output=new o,e}return a(FbProcessAction,n),FbProcessAction}(n.Action);e.FbProcessAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.awardStatus=t.data.award_status},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function ProcessPaymentAction(t){var e=n.call(this)||this;return e.action="process",e.controller="payment",e.input=new i.ActionInput({orderId:t}),e.output=new o,e}return a(ProcessPaymentAction,n),ProcessPaymentAction}(n.Action);e.ProcessPaymentAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.payment=t.data.payment,this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowPaymentOnStartPromise(){return null!==t&&t.apply(this,arguments)||this}return a(ShowPaymentOnStartPromise,t),ShowPaymentOnStartPromise}(n.ShowOnStartPromise);e.ShowPaymentOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,_=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),f=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},y=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(25),n(6),n(0),n(8),n(2),n(782),n(784),n(68),n(785),n(786),n(62)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=function(e){function ConfirmService(){var t=null!==e&&e.apply(this,arguments)||this;return t._windowMap=new core.Map,t}return _(ConfirmService,e),ConfirmService.prototype.initialize=function(t){this._windowMap.set(u.ConfirmType.Buy,a.GUINames.CONFIRM_BUY_WINDOW),this._windowMap.set(u.ConfirmType.Beauty,a.GUINames.CONFIRM_BEAUTY_WINDOW),this._windowMap.set(u.ConfirmType.Text,a.GUINames.CONFIRM_TEXT_WINDOW),r.Application.view.mapMediator(""+a.GUINames.CONFIRM_BUY_WINDOW,s.ConfirmBuyWindowMediator),r.Application.view.mapMediator(""+a.GUINames.CONFIRM_BUY_WINDOW,d.SimplePopupAnimationMediator,{displayObjectName:"window"}),r.Application.view.mapMediator(a.GUINames.CONFIRM_BUY_WINDOW+".window.pricesList.*",c.ConfirmBuyPriceItemRendererMediator),r.Application.view.mapMediator(""+a.GUINames.CONFIRM_BEAUTY_WINDOW,p.ConfirmBeautyWindowMediator),r.Application.view.mapMediator(""+a.GUINames.CONFIRM_BEAUTY_WINDOW,d.SimplePopupAnimationMediator),r.Application.view.mapMediator(""+a.GUINames.CONFIRM_TEXT_WINDOW,l.ConfirmTextWindowMediator),r.Application.view.mapMediator(""+a.GUINames.CONFIRM_TEXT_WINDOW,d.SimplePopupAnimationMediator)},ConfirmService.prototype.show=function(e,n){return f(this,void 0,void 0,function(){return y(this,function(t){return void 0===n.result&&(n.result=new i.BasePromise),r.Application.view.show(this._windowMap.get(e),new o.ViewContext(n)),[2,n.result]})})},ConfirmService}(n.Service);e.ConfirmService=h}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.UIUtils,a=uipixi.UIFactory,n=function(){function TwirlAnimation(t){this._loadingContainer=a.instance.createUIElementByName("loading");var e=o.getPointForAnchorOutside(t.anchor);this._loadingContainer.outside=t.outside,this._loadingContainer.offsetX=t.offsetX-e.x*t.width,this._loadingContainer.offsetY=t.offsetY-e.y*t.height;var n=t.parent;n.addChild(this._loadingContainer),n.setChildIndex(this._loadingContainer,n.getChildIndex(t));var i=this._loadingContainer.getChildByName("progressContainer");this._loadingAnimation=r.Application.animation.animate(i,"loading")}return TwirlAnimation.prototype.clearLoading=function(){this._loadingAnimation&&(this._loadingAnimation.stop(),this._loadingAnimation=void 0),this._loadingContainer&&(this._loadingContainer.parent.removeChild(this._loadingContainer),this._loadingContainer=void 0)},TwirlAnimation.prototype.destroy=function(){this.clearLoading()},TwirlAnimation}();e.TwirlAnimation=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(25),n(0),n(4),n(18),n(22),n(787),n(789),n(790),n(792),n(793),n(795),n(796)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=function(t){function MailService(){return null!==t&&t.apply(this,arguments)||this}return f(MailService,t),MailService.prototype.initialize=function(t){r.ElkaCore.instance.promiseManager.ask(new o.RegisterModuleLoaderPromise(this))},MailService.prototype.onPreloadModule=function(t){this._model=new s.MailModel(i.Application.static.data.mail,i.Application.dynamic.mail),a.CommandMap.map(d.MailGetPromise,h.MailGetCommand,this._model),a.CommandMap.map(c.AcceptMailPromise,u.AcceptMailCommand,this._model),a.CommandMap.map(p.AcceptByMailPromise,l.AcceptByMailCommand,this._model)},MailService.prototype.update=function(t){r.ElkaCore.instance.promiseManager.ask(new d.MailGetPromise(t))},MailService.prototype.accept=function(t,e){r.ElkaCore.instance.promiseManager.ask(new c.AcceptMailPromise(t,e))},MailService.prototype.getInbox=function(t){return this._model.getInbox(t)},MailService.prototype.acceptToys=function(t,e,n){r.ElkaCore.instance.promiseManager.ask(new p.AcceptByMailPromise(t,e,n))},MailService}(n.Service);e.MailService=_}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(c){function MailInboxItemModel(t,e,n,i,r,o,a){var s=c.call(this)||this;return s.inboxKey=t,s.itemId=e,s.itemType=n,s.num=i,s.socialId=r,s.time=o,s.userId=a,s}return o(MailInboxItemModel,c),MailInboxItemModel}(uipixi.BaseEventTarget);e.MailInboxItemModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(25),n(0),n(4),n(18),n(2),n(798),n(799),n(800)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function TooltipService(){return null!==t&&t.apply(this,arguments)||this}return l(TooltipService,t),TooltipService.prototype.initialize=function(t){r.ElkaCore.instance.promiseManager.ask(new o.RegisterModuleLoaderPromise(this)),i.Application.view.mapMediator(a.GUINames.TEXT_TOOLTIP,s.TextTooltipMediator)},TooltipService.prototype.onStartModule=function(t){var e=r.ElkaCore.instance.config.mobile;this._manager=e?new c.MobileTooltipManager(this.config.mobileLifetime):new u.WebTooltipManager},TooltipService.prototype.addTooltip=function(t,e,n,i){this._manager.add(t,e,n,i)},TooltipService.prototype.removeTooltip=function(t){this._manager.remove(t)},Object.defineProperty(TooltipService.prototype,"autoRemoveEnabled",{set:function(t){this._manager.autoRemoveEnabled=t},enumerable:!0,configurable:!0}),TooltipService}(n.Service);e.TooltipService=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(8),n(26)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIEvent,o=function(){function TooltipManager(){this.autoRemoveEnabled=!0,this._tooltipsMap=new core.Map}return TooltipManager.prototype.add=function(t,e,n,i){if(this._tooltipsMap.has(t))throw Error("TooltipService: tooltip already added for "+t.name);if(i.anchorObject=t,i.anchorType=e,i.type=n,this._tooltipsMap.set(t,i),i.hitObjects)for(var r=0,o=i.hitObjects;r<o.length;r++){var a=o[r];this._tooltipsMap.set(a,i)}t.addEventListener(s.REMOVED,this.onAnchorObjectRemoved.bind(this))},TooltipManager.prototype.show=function(t){t.handle=n.Application.view.show(t.type,new i.ViewContext(t),r.WindowLayer.TOOLTIP)},TooltipManager.prototype.hide=function(t){n.Application.view.hide(t.handle),delete t.handle},TooltipManager.prototype.remove=function(t){if(this._tooltipsMap.has(t)){t.removeEventListener(s.REMOVED,this.onAnchorObjectRemoved.bind(this));var e=this._tooltipsMap.get(t);if(e.handle&&this.hide(e),this._tooltipsMap.delete(e.anchorObject),e.hitObjects)for(var n=0,i=e.hitObjects;n<i.length;n++){var r=i[n];this._tooltipsMap.delete(r)}}},TooltipManager.prototype.onAnchorObjectRemoved=function(t){this.autoRemoveEnabled&&this.remove(t.uiTarget)},TooltipManager}();e.TooltipManager=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,xt=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),Rt=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},Nt=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(4),n(18),n(0),n(26),n(2),n(801),n(802),n(803),n(804),n(805),n(806),n(807),n(808),n(809),n(810),n(811),n(812),n(814),n(31),n(22),n(362),n(815),n(817),n(212),n(818),n(820),n(821),n(822),n(823),n(824),n(51),n(80),n(367),n(825),n(826),n(831),n(832),n(833),n(368),n(834),n(835),n(836),n(838),n(839),n(840),n(841),n(842),n(844),n(146),n(70),n(846),n(216),n(847),n(848),n(849),n(850),n(851),n(852),n(853),n(854),n(855),n(856),n(857),n(858),n(859),n(860),n(861),n(862),n(863),n(864),n(865),n(866),n(867),n(366),n(868),n(869),n(870),n(871),n(62),n(872),n(873),n(874),n(122)],void 0===(r=function(t,e,n,i,r,d,o,h,a,s,_,f,y,c,m,v,u,b,p,l,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U,W,F,V,H,Y,Q,q,z,K,X,J,Z,$,tt,et,nt,it,rt,ot,at,st,ct,ut,pt,lt,dt,ht,_t,ft,yt,mt,vt,bt,gt,wt,Ot,St,Pt,Et,At,Mt,Dt,It,Ct,Tt){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var jt=function(t){function ObjectsModule(){return null!==t&&t.apply(this,arguments)||this}return xt(ObjectsModule,t),ObjectsModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new x.RegisterSeasonLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new R.RegisterFriendLoaderPromise(this)),d.Application.operation.addAllowingRule(new w.OccurrenceBeginningLineRule("/objects"))},ObjectsModule.prototype.onPreloadModule=function(t){this._modelFactory=new k.ObjectModelFactory(d.Application.static.data.objects,d.Application.static.data.client.skins),this._resourceUtils=new B.ObjectsResourceUtils(this.config.spineResourcePattern,this.config.animationNamePattern,this.config.shineResource,this.config.skinObjectPattern,this.config.spruceResourcePattern),d.Application.model.objects=this._model=this._modelFactory.createSelf(d.Application.dynamic.user.objects),this._useEnergySystem=new l.UseEnergySystem(d.Application.model.user,"energy"),d.Application.dataProvider.registerProvider("objects",new yt.ObjectsDataProvider),this.mapSelfObjectsMediators(),d.Application.view.mapMediator(h.GUINames.HUD+".playButton",s.HUDPlayButtonMediator),d.Application.view.mapMediator(""+h.GUINames.SELECT_OBJECT_WINDOW,c.SelectObjectWindowMediator),d.Application.view.mapMediator(""+h.GUINames.OBJECT_LOCK_TOOLTIP,u.ObjectLockTooltip),d.Application.view.mapMediator(""+h.GUINames.USE_ENERGY_WINDOW,p.UseEnergyWindowMediator),d.Application.view.mapMediator(""+h.GUINames.USE_ENERGY_WINDOW,Dt.UseEnergyLoopedStageMediator,null,[Dt.UseEnergyLoopedStageMediatorGuard]),d.Application.view.mapMediator(""+h.GUINames.USE_ENERGY_WINDOW,Ct.UseEnergyLoopedStageAnimationMediator,null,[Dt.UseEnergyLoopedStageMediatorGuard]),d.Application.view.mapMediator(""+h.GUINames.USE_ENERGY_WINDOW,U.UseEnergyStarsAnimationMediator),d.Application.view.mapMediator(h.GUINames.USE_ENERGY_WINDOW+".useEnergyButton",g.UseEnergyButtonMediator,{useEnergySystem:this._useEnergySystem}),d.Application.view.mapMediator(h.GUINames.USE_ENERGY_WINDOW+".awardsList.*",I.UseEnergyAwardListItemMediator),d.Application.view.mapMediator(""+h.GUINames.USE_ENERGY_WINDOW,rt.GladeStarsShowHideMediator,null,[tt.IsWebGuard]),d.Application.view.mapMediator(""+h.GUINames.OBJECT_MAX_LEVEL_WINDOW,G.ObjectMaxLevelWindowMediator),d.Application.view.mapMediator(""+h.GUINames.UPGRADE_OBJECT_WINDOW,E.UpgradeObjectWindowMediator),d.Application.view.mapMediator(""+h.GUINames.UPGRADE_OBJECT_WINDOW,Mt.SimplePopupAnimationMediator),d.Application.view.mapMediator(""+h.GUINames.STAGE_UP_OBJECT_WINDOW,C.StageUpObjectWindowMediator),d.Application.view.mapMediator(h.GUINames.STAGE_UP_OBJECT_WINDOW+".awardsList.*",J.CommonAnimatedAwardListItemMediator),d.Application.view.mapMediator(""+h.GUINames.ASK_VIRAL_WINDOW,Mt.SimplePopupAnimationMediator),d.Application.view.mapMediator(""+h.GUINames.ASK_VIRAL_WINDOW,Y.AskViralWindowMediator,null,[gt.IsPlatformNotFBGuard]),d.Application.view.mapMediator(""+h.GUINames.ASK_VIRAL_WINDOW,wt.AskViralWindowFBMediator,null,[bt.IsPlatformFBGuard]),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".askWindowCantSendRequestsTab",q.AskWindowCantSendRequestsTabMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".askWindowFriendsTab",V.AskViralFriendsTabMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".askWindowInviteFriendsTab",Q.AskViralInvitesTabMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".askWindowFriendsTab.usersContainer.friendsScrollContainer.friendsList.*",H.AskViralFriendItemMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".askWindowFriendsTab.usersContainer.friendsScrollContainer.friendsList.*",Tt.AlphaOptimizationListItemMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".askWindowInviteFriendsTab.usersContainer.friendsScrollContainer.friendsList.*",H.AskViralFriendItemMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".askWindowInviteFriendsTab.usersContainer.friendsScrollContainer.friendsList.*",Tt.AlphaOptimizationListItemMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW+".*.gotoGroupButton",At.AskViralGoToGroupButtonMediator),d.Application.view.mapMediator(h.GUINames.ASK_VIRAL_WINDOW,mt.AskViralWindowTutorialMediator),d.Application.view.mapMediator(h.GUINames.GLADE_STARS_WINDOW,it.UseEnergyGladeAnimationMediator,null,[tt.IsWebGuard]),d.Application.view.mapMediator(h.GUINames.OBJECT_GLADE_TOOLTIP,ot.ObjectGladeTooltipMediator,null),d.Application.view.mapMediator(h.GUINames.OBJECT_GLADE_TOOLTIP+".contentContainer.infoContainer."+h.GUINames.OBJECT_GLADE_TOOLTIP_ENERGY_LEFT_CONTAINER,st.ObjectGladeTooltipEnergyLeftMediator),d.Application.view.mapMediator(h.GUINames.OBJECT_GLADE_TOOLTIP+".contentContainer.infoContainer."+h.GUINames.OBJECT_GLADE_TOOLTIP_LOOPED_STAGE_CONTAINER,It.ObjectGladeTooltipLoopedStageMediator),d.Application.view.mapMediator(h.GUINames.OBJECT_GLADE_TOOLTIP+".contentContainer."+h.GUINames.OBJECT_GLADE_TOOLTIP_GENERATOR_CONTAINER,at.ObjectGladeTooltipGeneratorContainerMediator),d.Application.view.mapMediator(h.GUINames.OBJECT_BEAUTY_LOCK_WINDOW,ct.ObjectBeautyLockWindowMediator),d.Application.view.mapMediator(h.GUINames.OBJECT_BEAUTY_LOCK_WINDOW,Mt.SimplePopupAnimationMediator),d.Application.view.mapMediator(h.GUINames.OBJECTS,ft.ObjectsBeautyAnimationMediator),d.Application.view.mapMediator(""+h.GUINames.OBJECTS_READY_MARKERS,Et.ObjectsMarkersMediator),O.CommandMap.map(S.SendUseEnergyPromise,P.SendUseEnergyCommand),O.CommandMap.map(A.ObjectStageUpPromise,M.ObjectStageUpCommand,this._resourceUtils),O.CommandMap.map(N.BuyViralResourcesPromise,L.BuyViralResourcesCommand,{resourceModel:d.Application.model.resources}),O.CommandMap.map(W.ShowAskViralWindowPromise,F.ShowAskViralWindowCommand),O.CommandMap.map(ht.LoadObjectsResourcesPromise,_t.LoadObjectsResourcesCommand,this._resourceUtils),O.CommandMap.map(Ot.AccrueUseEnergyAwardPromise,St.AccrueUseEnergyAwardCommand,{resources:this.config.newLevelResources})},ObjectsModule.prototype.mapSelfObjectsMediators=function(){for(var t=d.Application.model.extraItems,e=this._useEnergySystem,n=this._resourceUtils,i=0,r=this._model.all;i<r.length;i++){var o=r[i],a=h.GUINames.OBJECTS+"."+o.id;this.mapObjectViewMediators(a,o,t),d.Application.view.mapMediator(a+".spine",_.ObjectTapMediator,o,[$.IsMobileGuard]),d.Application.view.mapMediator(a+".spine",et.ObjectUseEnergyWebMediator,{object:o,useEnergySystem:e},[tt.IsWebGuard]),d.Application.view.mapMediator(a+".spine",nt.ObjectOverFiltersMediator,null,[tt.IsWebGuard]),d.Application.view.mapMediator(""+a,ut.ObjectGladeTooltipOnMediator,o,[tt.IsWebGuard]);var s=h.GUINames.EXTRA_ITEMS_WINDOW+".previewContainerWrapper.previewContainer.objectContainer."+o.id;d.Application.view.mapMediator(s,K.ObjectSkinViewMediator,{object:o,extraItemsModel:t,resourceUtils:n,isShop:!0},[X.ObjectSkinViewMediatorGuard,pt.IsNotASpruceGuard]),d.Application.view.mapMediator(s,lt.ObjectSpruceMediator,{object:o,extraItemsModel:t,resourceUtils:n},[dt.IsASpruceGuard]);var c=h.GUINames.OBJECTS_READY_MARKERS+"."+o.id+"Container";d.Application.view.mapMediator(c,Pt.ObjectMarkerContainerMediator,o),d.Application.view.mapMediator(c+"."+o.id,T.ObjectReadyMarkerMediator,o),d.Application.view.mapMediator(c+"."+o.id+".requestContainer",j.ObjectRequestMarkerMediator,o);var u=h.GUINames.SELECT_OBJECT_WINDOW+".objectsContainer."+o.id;this.mapObjectViewMediators(u,o,t),d.Application.view.mapMediator(u+".spine",y.SelectObjectTapMediator,o),d.Application.view.mapMediator(u+".spine",nt.ObjectOverFiltersMediator,null,[tt.IsWebGuard]);var p=h.GUINames.FRIENDS_WINDOW+".objectsMarkers."+o.id+"Container."+o.id;d.Application.view.mapMediator(h.GUINames.FRIENDS_WINDOW+".objectsMarkers."+o.id+"Container",Pt.ObjectMarkerContainerMediator,o),d.Application.view.mapMediator(p,T.ObjectReadyMarkerMediator,o),d.Application.view.mapMediator(p+".requestContainer",j.ObjectRequestMarkerMediator,o);var l=h.GUINames.SELECT_OBJECT_WINDOW+".namesContainer."+o.id;d.Application.view.mapMediator(l,f.SelectObjectStatesMediator,o),d.Application.view.mapMediator(l+".maxLevelStateContainer",m.SelectObjectMaxLevelStateMediator,o),d.Application.view.mapMediator(l+".lockStateContainer",v.SelectObjectLockStateMediator,o),d.Application.view.mapMediator(l+".normalStateContainer",b.SelectObjectNormalStateMediator,o),d.Application.view.mapMediator(l+".readyStateContainer",D.SelectObjectReadyStateMediator,o),d.Application.view.mapMediator(l+".shineContainer",vt.SelectObjectShineContainerMediator,o),this.mapObjectViewMediators(h.GUINames.FRIENDS_WINDOW+".objectsContainer."+o.id,o,t),this.mapObjectViewMediators(h.GUINames.EDIT_TOYS_WINDOW+".objectsContainer."+o.id,o,t),this.mapObjectViewMediators(h.GUINames.USE_ENERGY_WINDOW+".spineContainer."+o.id,o,t),this.mapObjectViewMediators(h.GUINames.OBJECT_MAX_LEVEL_WINDOW+".spineContainer."+o.id,o,t),this.mapObjectViewMediators(h.GUINames.STAGE_UP_OBJECT_WINDOW+".spineContainer."+o.id,o,t)}},ObjectsModule.prototype.mapObjectViewMediators=function(t,e,n){d.Application.view.mapMediator(t,a.ObjectViewMediator,{object:e,resourceUtils:this._resourceUtils},[z.ObjectViewMediatorGuard,pt.IsNotASpruceGuard]),d.Application.view.mapMediator(t,K.ObjectSkinViewMediator,{object:e,extraItemsModel:n,resourceUtils:this._resourceUtils},[X.ObjectSkinViewMediatorGuard,pt.IsNotASpruceGuard]),d.Application.view.mapMediator(t,lt.ObjectSpruceMediator,{object:e,extraItemsModel:n,resourceUtils:this._resourceUtils},[dt.IsASpruceGuard])},ObjectsModule.prototype.unmapObjectViewMediators=function(t){d.Application.view.unmapMediator(t,a.ObjectViewMediator),d.Application.view.unmapMediator(t,K.ObjectSkinViewMediator),d.Application.view.unmapMediator(t,lt.ObjectSpruceMediator)},ObjectsModule.prototype.getResourcesToLoad=function(t){return this._resourceUtils.getResourcesToLoadByModel(this._model.all,t,d.Application.model.extraItems)},ObjectsModule.prototype.onVisitSeason=function(t){this._objectsHandle=d.Application.view.showCustom(h.GUINames.OBJECTS+t,{name:h.GUINames.OBJECTS,layer:o.WindowLayer.OBJECTS}),this._markersHandle=d.Application.view.showCustom(h.GUINames.OBJECTS_READY_MARKERS+t,{name:h.GUINames.OBJECTS_READY_MARKERS,layer:o.WindowLayer.BUBBLES}),d.Application.view.show(h.GUINames.GLADE_STARS_WINDOW,null,o.WindowLayer.GLADE_STARS)},ObjectsModule.prototype.onLeaveSeason=function(){d.Application.view.hideByWindowName(h.GUINames.GLADE_STARS_WINDOW),d.Application.view.hide(this._objectsHandle),d.Application.view.hide(this._markersHandle)},ObjectsModule.prototype.onVisitFriend=function(r){return Rt(this,void 0,void 0,function(){var e,n,i=this;return Nt(this,function(t){switch(t.label){case 0:return e=r.screenId,this._currentFriendModels=this._modelFactory.createFriend(e,r.friendData.user.objects),n=new Z.ExtraItemsModel(d.Application.static.data.extraItems,r.friendData.user.extraItem,r.friendData.user.activeExtraItem),[4,this.loadObjectsResources(this._currentFriendModels,e,n)];case 1:return t.sent(),this._currentFriendModels.forEach(function(t){return i.mapObjectViewMediators(h.GUINames.FRIEND_OBJECTS+"."+t.id,t,n)}),this._objectsHandle=d.Application.view.showCustom(h.GUINames.OBJECTS+e,{name:h.GUINames.FRIEND_OBJECTS,layer:o.WindowLayer.OBJECTS}),[2]}})})},ObjectsModule.prototype.onLeaveFriend=function(){d.Application.view.hide(this._objectsHandle);for(var t=0,e=this._currentFriendModels;t<e.length;t++){var n=e[t];this.unmapObjectViewMediators(h.GUINames.FRIEND_OBJECTS+"."+n.id)}this._currentFriendModels.length=0},ObjectsModule.prototype.loadObjectsResources=function(t,e,n){return i.ElkaCore.instance.promiseManager.ask(new ht.LoadObjectsResourcesPromise(t,e,n))},ObjectsModule.prototype.getCurrentFriendModel=function(){return this._currentFriendModels},Object.defineProperty(ObjectsModule.prototype,"useEnergySystem",{get:function(){return this._useEnergySystem},enumerable:!0,configurable:!0}),ObjectsModule}(n.Module);e.ObjectsModule=jt}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function SendUseEnergyPromise(t,e,n){var i=r.call(this)||this;return i.object=t,i.count=e,i.transactions=n,i}return a(SendUseEnergyPromise,r),SendUseEnergyPromise}(n.BasePromise);e.SendUseEnergyPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.UseResult||(e.UseResult={}))[n.Process=0]="Process",n[n.Stop=1]="Stop"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(363),n(213),n(2),n(214),n(26)],void 0===(r=function(t,e,o,n,a,i,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.WindowsManagerEvent,p=uipixi.GestureEvent,r=function(r){function UseEnergyViewModel(t,e,n){var i=r.call(this)||this;return i._object=e,i._useEnergySystem=t,i._interval=o.Application.static.data.client.useEnergySpeed.interval,i._speed=o.Application.static.data.client.useEnergySpeed.second.items,i._objectsModel=o.Application.model.objects,i._onGlade=n,i.setTurboSpeed(),i._objectsModel.addEventListener(a.ObjectsModelEvent.USE_ENERGY_TURBO_SPEED_CHANGED,i.setTurboSpeed.bind(i)),i}return l(UseEnergyViewModel,r),UseEnergyViewModel.prototype.start=function(){if(this.isInProgress)throw Error("UseEnergyViewModel: already started");this.checkForRequestUpgrade()||(this._startTime=o.Application.date.currentTime,this._useEnergySystem.use(this._object,this.getUseEnergyCount())===n.UseResult.Process&&this.onStart())},Object.defineProperty(UseEnergyViewModel.prototype,"isInProgress",{get:function(){return void 0!==this._timer},enumerable:!0,configurable:!0}),UseEnergyViewModel.prototype.onStart=function(){o.Application.view.ui.stage.addEventListener(p.POINTER_UP,this.onStageUp.bind(this)),o.Application.view.ui.windows.addEventListener(u.WINDOW_SHOWED,this.onWindowShowed.bind(this)),this._timer=o.Application.date.callProcessor.repeatCall(this.onTick.bind(this),this._interval),this.dispatchEvent(new s.UseEnergyViewModelEvent(s.UseEnergyViewModelEvent.STARTED)),this._objectsModel.lastUseEnergyWasOnGlade=this._onGlade},UseEnergyViewModel.prototype.onTick=function(){this._useEnergySystem.use(this._object,this.getUseEnergyCount())===n.UseResult.Stop&&(this.isInProgress&&this.stop(),this.checkForRequestUpgrade())},UseEnergyViewModel.prototype.stop=function(){if(!this.isInProgress)throw Error("UseEnergyViewModel: already stopped");o.Application.view.ui.stage.removeEventListener(p.POINTER_UP,this.onStageUp.bind(this)),o.Application.view.ui.windows.removeEventListener(u.WINDOW_SHOWED,this.onWindowShowed.bind(this)),o.Application.date.callProcessor.deleteCall(this._timer),this._timer=void 0,this.dispatchEvent(new s.UseEnergyViewModelEvent(s.UseEnergyViewModelEvent.STOPPED))},UseEnergyViewModel.prototype.getUseEnergyCount=function(){if(this._turboSpeed)return Math.max(this._object.nextStageExp-this._object.exp,1);var t=o.Application.date.currentTime-this._startTime;return t=Math.min(t,this._speed.length-1),o.Application.calculator.calculate(this._speed[t].wands)},UseEnergyViewModel.prototype.setTurboSpeed=function(){this._turboSpeed=this._objectsModel.useEnergyTurboSpeed},UseEnergyViewModel.prototype.onStageUp=function(){this.stop()},UseEnergyViewModel.prototype.onWindowShowed=function(t){t.windowName!==i.GUINames.LONG_REQUEST_WINDOW&&t.layer===c.WindowLayer.WINDOWS&&this.stop()},UseEnergyViewModel.prototype.checkForRequestUpgrade=function(){return!this._object.isLoopedStage&&(this._object.exp===this._object.nextStageExp&&(this.dispatchEvent(new s.UseEnergyViewModelEvent(s.UseEnergyViewModelEvent.REQUEST_UPGRADE)),!0))},UseEnergyViewModel.prototype.destroy=function(){o.Application.view.ui.stage.removeEventListener(p.POINTER_UP,this.onStageUp.bind(this)),o.Application.view.ui.windows.removeEventListener(u.WINDOW_SHOWED,this.onWindowShowed.bind(this)),this._objectsModel.removeEventListener(a.ObjectsModelEvent.USE_ENERGY_TURBO_SPEED_CHANGED,this.setTurboSpeed.bind(this)),void 0!==this._timer&&o.Application.date.callProcessor.deleteCall(this._timer)},UseEnergyViewModel}(uipixi.BaseEventTarget);e.UseEnergyViewModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ActionCustomData||(e.ActionCustomData={})).SoftLongRequestWindow="SoftLongRequestWindow",n.DisableLongRequestWindow="DisableLongRequestWindow"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AccrueUseEnergyAwardPromise(t,e){var n=i.call(this)||this;return n.awardObject=t,n.userLevelUpWasTriggered=e,n}return a(AccrueUseEnergyAwardPromise,i),AccrueUseEnergyAwardPromise}(n.BasePromise);e.AccrueUseEnergyAwardPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function BuyViralResourcesPromise(t){var e=n.call(this)||this;return e.viralPrice=t,e}return a(BuyViralResourcesPromise,n),BuyViralResourcesPromise}(n.BasePromise);e.BuyViralResourcesPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ShowAskViralWindowPromise(t){var e=n.call(this)||this;return e.viralItemId=t,e}return a(ShowAskViralWindowPromise,n),ShowAskViralWindowPromise}(n.BasePromise);e.ShowAskViralWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ObjectEvent(t,e){var n=i.call(this,t)||this;return n.objectId=e,n}return o(ObjectEvent,i),ObjectEvent.UPGRADE_WINDOW_SHOW="ObjectEvent.UPGRADE_WINDOW_SHOW",ObjectEvent}(uipixi.BaseEvent);e.ObjectEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(54)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ObjectStageAward(t,e,n){this.type=t,this.itemId=e,this.value=n}return ObjectStageAward.prototype.minMaxFromValue=function(t){if(void 0===this.value)return this.minValue=Math.min(this.minValue,t),void(this.maxValue=Math.max(this.maxValue,t));this.minValue=Math.min(this.value,t),this.maxValue=Math.max(this.value,t),this.value=void 0},ObjectStageAward.prototype.toCalculated=function(){return new n.CalculatedAwardItem(this.type,this.value,this.itemId)},ObjectStageAward.prototype.hasMinMax=function(){return void 0!==this.minValue&&void 0!==this.maxValue},ObjectStageAward}();e.ObjectStageAward=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(43),n(0),n(46)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function UseEnergySoundController(){this._starSounds=[n.SoundName.STARS_1,n.SoundName.STARS_2,n.SoundName.STARS_3,n.SoundName.STARS_4,n.SoundName.STARS_5],this._soundIndex=0}return UseEnergySoundController.prototype.playNextSound=function(){i.Application.sound.play(this._starSounds[this._soundIndex],!1,r.SoundGroup.SOUND_GROUP_USE_ENERGY),this._soundIndex=this._soundIndex>=this._starSounds.length?1:this._soundIndex+1},UseEnergySoundController.prototype.stop=function(){this._soundIndex=0},UseEnergySoundController.prototype.destroy=function(){i.Application.sound.stop(r.SoundGroup.SOUND_GROUP_USE_ENERGY)},UseEnergySoundController}();e.UseEnergySoundController=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(145)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function AskViralFriendItemData(t,e,n){var i=r.call(this)||this;return i._friend=t,i._name=e,i._selected=n||!1,i}return a(AskViralFriendItemData,r),Object.defineProperty(AskViralFriendItemData.prototype,"friend",{get:function(){return this._friend},enumerable:!0,configurable:!0}),Object.defineProperty(AskViralFriendItemData.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!==t&&(this._selected=t,this.dispatchEvent(new n.ViralSelectItemsEvent(n.ViralSelectItemsEvent.ITEM_SELECTED_CHANGED,this._selected)))},enumerable:!0,configurable:!0}),Object.defineProperty(AskViralFriendItemData.prototype,"locked",{get:function(){return this._locked},set:function(t){this._locked!==t&&(this._locked=t,this.dispatchEvent(new n.ViralSelectItemsEvent(n.ViralSelectItemsEvent.ITEM_LOCK_CHANGED,this._locked)))},enumerable:!0,configurable:!0}),Object.defineProperty(AskViralFriendItemData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),AskViralFriendItemData}(uipixi.BaseEventTarget);e.AskViralFriendItemData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.SkinPartTypeEnum||(e.SkinPartTypeEnum={})).SKIN="skin",n.ATTACHMENT="attachment",n.ANIMATION="animation"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function GuidesModelFiredEvent(t){return e.call(this,t)||this}return o(GuidesModelFiredEvent,e),GuidesModelFiredEvent.SELECT_NPC_FRIENDS="GuidesModelFiredEvent.SELECT_NPC_FRIENDS",GuidesModelFiredEvent}(uipixi.BaseEvent);e.GuidesModelFiredEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function FlyViralRequestEvent(t,e){var n=i.call(this,t)||this;return n.flyData=e,n}return o(FlyViralRequestEvent,i),FlyViralRequestEvent.FLY_REQUEST="FlyViralRequestEvent.FLY_REQUEST",FlyViralRequestEvent}(uipixi.BaseEvent);e.FlyViralRequestEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,A=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(80),n(51),n(875),n(0),n(2),n(26),n(878),n(879),n(880),n(881),n(22),n(882),n(379),n(883),n(218),n(885),n(378),n(887),n(31),n(70)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var E=function(t){function AnimalModule(){return null!==t&&t.apply(this,arguments)||this}return A(AnimalModule,t),AnimalModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new o.RegisterFriendLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new a.RegisterSeasonLoaderPromise(this)),c.Application.operation.addAllowingRule(new S.OccurrenceBeginningLineRule("/animal"))},AnimalModule.prototype.onPreloadModule=function(t){this._model=new s.AnimalsModel(c.Application.static.data.animals,c.Application.dynamic.user.animals,c.Application.static.data.client.skins),this.mapCommands(),this.mapMediators()},AnimalModule.prototype.mapCommands=function(){f.CommandMap.map(m.AnimalBoostPromise,v.AnimalBoostCommand),f.CommandMap.map(b.AnimalStageUpPromise,g.AnimalStageUpCommand,this._model),f.CommandMap.map(w.AnimalStartActionPromise,O.AnimalStartActionCommand,this._model)},AnimalModule.prototype.getResourcesToLazyLoad=function(t){return 2<c.Application.model.objects.getObject(this._model.getAnimalById(t).staticData.view.animalHouse).stage?["animals/animal_"+t]:[]},AnimalModule.prototype.mapMediators=function(){for(var t=c.Application.model.extraItems,e=0,n=this._model.animals;e<n.length;e++){var i=n[e],r=c.Application.model.objects.getObject(i.staticData.view.animalHouse),o=u.GUINames.ANIMAL_LAYER_WINDOW+"."+i.name;this.mapGladeViewMediators(o,i,t,r),this.mapGladeViewMediators(u.GUINames.FRIENDS_WINDOW+"."+u.GUINames.ANIMAL_LAYER_WINDOW+"."+i.name,i,t,r),c.Application.view.mapMediator(o,h.AnimalTapMediator,i),c.Application.view.mapMediator(o+".animalContainer.animalBubble",d.AnimalBubbleMediator,i);var a=u.GUINames.EXTRA_ITEMS_WINDOW+".previewContainerWrapper.previewContainer.objectContainer."+i.name;c.Application.view.mapMediator(a,l.AnimalViewMediator,{model:i,walking:!1,actions:!1,extraItemsModel:t,object:r,isShop:!0});var s=u.GUINames.ANIMAL_WINDOW+".previewContainer.animalContainer."+i.name;c.Application.view.mapMediator(s,l.AnimalViewMediator,{model:i,walking:!1,actions:!0,extraItemsModel:t,object:r})}c.Application.view.mapMediator(u.GUINames.ANIMAL_WINDOW,_.AnimalWindowMediator),c.Application.view.mapMediator(u.GUINames.ANIMAL_WINDOW+".actionsList.*",y.AnimalWindowActionItemMediator)},AnimalModule.prototype.showAnimalLayer=function(t){c.Application.view.showCustom("animalLayer"+t+"Window",{name:u.GUINames.ANIMAL_LAYER_WINDOW,layer:p.WindowLayer.ANIMALS})},AnimalModule.prototype.hideAnimalLayer=function(){c.Application.view.hideByWindowName(u.GUINames.ANIMAL_LAYER_WINDOW)},AnimalModule.prototype.onLeaveFriend=function(){c.Application.view.hideByWindowName(u.GUINames.FRIEND_ANIMAL_LAYER_WINDOW);for(var t=0,e=this._friendAnimalModel.animals;t<e.length;t++){var n=e[t];this.unmapGladeViewMediators(u.GUINames.FRIEND_ANIMAL_LAYER_WINDOW+"."+n.name)}this._friendAnimalModel=null},AnimalModule.prototype.onVisitFriend=function(t){this._friendAnimalModel=new s.AnimalsModel(c.Application.static.data.animals,t.friendData.user.animals,c.Application.static.data.client.skins);for(var e=new P.ExtraItemsModel(c.Application.static.data.extraItems,t.friendData.user.extraItem,t.friendData.user.activeExtraItem),n=0,i=this._friendAnimalModel.animals;n<i.length;n++){var r=i[n];this.mapGladeViewMediators(u.GUINames.FRIEND_ANIMAL_LAYER_WINDOW+"."+r.name,r,e,this.getFriendAnimalHouseModel(r))}c.Application.view.showCustom("animalLayer"+t.screenId+"Window",{name:u.GUINames.FRIEND_ANIMAL_LAYER_WINDOW,layer:p.WindowLayer.ANIMALS})},AnimalModule.prototype.getFriendAnimalHouseModel=function(t){for(var e=0,n=c.Application.objects.getCurrentFriendModel();e<n.length;e++){var i=n[e];if(i.id===t.staticData.view.animalHouse)return i}return null},AnimalModule.prototype.onLeaveSeason=function(){this.hideAnimalLayer()},AnimalModule.prototype.onVisitSeason=function(t){this.showAnimalLayer(t)},AnimalModule.prototype.mapGladeViewMediators=function(t,e,n,i){c.Application.view.mapMediator(t,l.AnimalViewMediator,{model:e,walking:!0,actions:!1,extraItemsModel:n,object:i})},AnimalModule.prototype.unmapGladeViewMediators=function(t){c.Application.view.unmapMediator(t,l.AnimalViewMediator)},AnimalModule}(n.Module);e.AnimalModule=E}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(876),n(877),n(0),n(14)],void 0===(r=function(t,e,h,_,f,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(d){function AnimalModel(t,e,n){var i=d.call(this)||this;i._staticData=t,i._dynamicData=e,i._skin=n;for(var r=0,o=f.Application.static.data.extraItemsShops.extraItemsShop;r<o.length;r++){var a=o[r];if(a.object===i._staticData.name){i._animalPromo=f.Application.static.data.promos.promo.getItem(a.category[0].promoId);break}}i._animation=new h.AnimalAnimationModel(t),i._actions=[];for(var s=0,c=i._staticData.actions.items;s<c.length;s++){var u=c[s],p=u.id.toString();if(i._dynamicData.actions||i._dynamicData.update({actions:[]}),!i._dynamicData.actions.getItem(p)){var l={};l[p]=0,i._dynamicData.actions.update(l)}i._actions.push(new _.AnimalActionModel(u,i._dynamicData.actions.getItem(p)))}return i}return s(AnimalModel,d),AnimalModel.prototype.hasSkinOnStage=function(t){for(var e=0,n=this._animalPromo.offers.items;e<n.length;e++){var i=n[e];if(parseInt(i.buyRequirements.requirement[0].minValue)===t){var r=f.Application.award.calculate(i.awards),o=parseInt(r.getByType(a.AwardType.EXTRA_ITEM).itemId);return f.Application.model.extraItems.getItem(o)}}return null},AnimalModel.prototype.getNextStageSkinAward=function(){for(var t=0,e=this._animalPromo.offers.items;t<e.length;t++){var n=e[t];if(parseInt(n.buyRequirements.requirement[0].minValue)>this.stage)return parseInt(n.buyRequirements.requirement[0].minValue)}return-1},Object.defineProperty(AnimalModel.prototype,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),AnimalModel.prototype.canStageUp=function(){var t=this.stage+1,e=this.getStageData(t.toString()),n=f.Application.calculator.calculate(e.requirements.requirement[0].minValue,{stage:t.toString()});return this.happy>=n},Object.defineProperty(AnimalModel.prototype,"dynamicData",{get:function(){return this._dynamicData},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalModel.prototype,"stage",{get:function(){return this._dynamicData.stage||1},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalModel.prototype,"staticData",{get:function(){return this._staticData},enumerable:!0,configurable:!0}),AnimalModel.prototype.getStageData=function(t){var e=this._staticData.stages.getItem(t);return e||(e=this._staticData.stages.getItem("default")),e},Object.defineProperty(AnimalModel.prototype,"happy",{get:function(){return this._dynamicData.happy||0},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalModel.prototype,"screen",{get:function(){return this._staticData.screenId},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalModel.prototype,"name",{get:function(){return this._staticData.name},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalModel.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalModel.prototype,"actions",{get:function(){return this._actions},enumerable:!0,configurable:!0}),AnimalModel}(uipixi.BaseEventTarget);e.AnimalModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function AnimalStartActionPromise(t,e,n){var i=r.call(this)||this;return i.animalId=t,i.action=e,i.animParams=n,i}return a(AnimalStartActionPromise,r),AnimalStartActionPromise}(n.BasePromise);e.AnimalStartActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AnimalBoostPromise(t,e){var n=i.call(this)||this;return n.animalId=t,n.action=e,n}return a(AnimalBoostPromise,i),AnimalBoostPromise}(n.BasePromise);e.AnimalBoostPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,j=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),x=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},R=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(4),n(20),n(51),n(18),n(31),n(22),n(2),n(26),n(889),n(148),n(896),n(897),n(898),n(899),n(900),n(901),n(384),n(902),n(383),n(904),n(382),n(907),n(146),n(80),n(909),n(910),n(385),n(911)],void 0===(r=function(t,e,c,r,n,i,o,a,s,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var T=function(e){function DesignObjectModule(){var t=null!==e&&e.apply(this,arguments)||this;return t._decorBackHandle=null,t._decorFrontHandle=null,t._screenId=-1,t}return j(DesignObjectModule,e),DesignObjectModule.prototype.initialize=function(t){r.ElkaCore.instance.promiseManager.ask(new i.RegisterSeasonLoaderPromise(this)),r.ElkaCore.instance.promiseManager.ask(new o.RegisterModuleLoaderPromise(this)),r.ElkaCore.instance.promiseManager.ask(new A.RegisterFriendLoaderPromise(this)),c.Application.operation.addAllowingRule(new a.OccurrenceBeginningLineRule("/designObject"))},DesignObjectModule.prototype.onPreloadModule=function(t){c.Application.model.designObject=this._model=new l.DesignObjectContainerModel(this.config),this._model.addEventListener(d.DesignObjectContainerEvent.DESIGN_OBJECT_ADDED,this.onDesignObjectAdded.bind(this)),this.mapMediators(),this.mapCommands()},DesignObjectModule.prototype.mapMediators=function(){c.Application.view.mapMediator(u.GUINames.HUD+".bottomPanel.designObjectButtonContainer",h.HUDDesignObjectButtonContainerMediator),c.Application.view.mapMediator(u.GUINames.HUD+".bottomPanel.designObjectButtonContainer.hudDesignObjectButton",D.HUDDesignObjectButtonMediator),c.Application.view.mapMediator(u.GUINames.DESIGN_OBJECT_WINDOW,_.DesignObjectWindowMediator),c.Application.view.mapMediator(u.GUINames.DESIGN_OBJECT_WINDOW+".builderList.*",f.DesignObjectBuilderMediator),c.Application.view.mapMediator(u.GUINames.DESIGN_OBJECT_WINDOW+".optionList.*",y.DesignObjectOptionMediator),c.Application.view.mapMediator(u.GUINames.DESIGN_OBJECT_STAGE_UP_WINDOW,m.DesignObjectStageUpWindowMediator),c.Application.view.mapMediator(u.GUINames.DESIGN_OBJECT_STAGE_UP_WINDOW+".awardsList.*",E.CommonAnimatedAwardListItemMediator)},DesignObjectModule.prototype.mapDecorMediators=function(t){for(var e=this.getDecorBackPrefix(t),n=this.getDecorFrontPrefix(t),i=u.GUINames.EDIT_TOYS_WINDOW+".decorContainerBack.",r=u.GUINames.EDIT_TOYS_WINDOW+".decorContainerFront.",o=0,a=t.decor;o<a.length;o++){var s=a[o];c.Application.view.mapMediator(e+s.id,v.DesignObjectDecorMediator,s),c.Application.view.mapMediator(n+s.id,v.DesignObjectDecorMediator,s),c.Application.view.mapMediator(i+e+s.id,v.DesignObjectDecorMediator,s),c.Application.view.mapMediator(r+n+s.id,v.DesignObjectDecorMediator,s)}},DesignObjectModule.prototype.unmapDecorMediators=function(t){for(var e=this.getDecorBackPrefix(t),n=this.getDecorFrontPrefix(t),i=u.GUINames.EDIT_TOYS_WINDOW+".decorContainerBack.",r=u.GUINames.EDIT_TOYS_WINDOW+".decorContainerFront.",o=0,a=t.decor;o<a.length;o++){var s=a[o];c.Application.view.unmapMediator(e+s.id,v.DesignObjectDecorMediator),c.Application.view.unmapMediator(n+s.id,v.DesignObjectDecorMediator),c.Application.view.unmapMediator(i+e+s.id,v.DesignObjectDecorMediator),c.Application.view.unmapMediator(r+n+s.id,v.DesignObjectDecorMediator)}},DesignObjectModule.prototype.getDecorFrontPrefix=function(t){return u.GUINames.DESIGN_OBJECT_DECOR_FRONT+t.screen+".decor"},DesignObjectModule.prototype.getDecorBackPrefix=function(t){return u.GUINames.DESIGN_OBJECT_DECOR_BACK+t.screen+".decor"},DesignObjectModule.prototype.mapCommands=function(){s.CommandMap.map(b.DesignObjectStartPromise,g.DesignObjectStartCommand),s.CommandMap.map(w.DesignObjectBoostPromise,O.DesignObjectBoostCommand),s.CommandMap.map(S.DesignObjectSetOptionsPromise,P.DesignObjectSetOptionsCommand),s.CommandMap.map(I.DesignObjectLoadDecorPromise,C.DesignObjectLoadDecorCommand)},DesignObjectModule.prototype.onDesignObjectAdded=function(t){this.mapDecorMediators(t.designObjectModel),this.addDesignObjectView()},DesignObjectModule.prototype.addDesignObjectView=function(){this._model.getDesignObjectByScreen(this._screenId)&&(this._decorBackHandle=c.Application.view.show(u.GUINames.DESIGN_OBJECT_DECOR_BACK+this._screenId,null,p.WindowLayer.DECOR_BACK),this._decorFrontHandle=c.Application.view.show(u.GUINames.DESIGN_OBJECT_DECOR_FRONT+this._screenId,null,p.WindowLayer.DECOR_FRONT))},DesignObjectModule.prototype.removeDesignObjectView=function(){this._decorBackHandle&&(c.Application.view.hide(this._decorBackHandle),c.Application.view.hide(this._decorFrontHandle),this._decorBackHandle=null,this._decorFrontHandle=null)},DesignObjectModule.prototype.onVisitSeason=function(t){this._screenId=t;for(var e=0,n=c.Application.model.designObject.designObjects;e<n.length;e++){var i=n[e];this.mapDecorMediators(i)}this.addDesignObjectView()},DesignObjectModule.prototype.onLeaveSeason=function(){for(var t=0,e=c.Application.model.designObject.designObjects;t<e.length;t++){var n=e[t];this.unmapDecorMediators(n)}this.removeDesignObjectView()},DesignObjectModule.prototype.onVisitFriend=function(i){return x(this,void 0,void 0,function(){var e,n;return R(this,function(t){switch(t.label){case 0:return this._friendDesignObjectDynamicItem=i.friendData.user.designObject.getItem(this._screenId.toString()),[4,r.ElkaCore.instance.promiseManager.ask(new I.DesignObjectLoadDecorPromise(this._friendDesignObjectDynamicItem))];case 1:return t.sent(),e=u.GUINames.DESIGN_OBJECT_DECOR_BACK+this._screenId,n=u.GUINames.DESIGN_OBJECT_DECOR_FRONT+this._screenId,this.mapFriendGladeMediators(e,n,this._friendDesignObjectDynamicItem),this._decorBackHandle=c.Application.view.show(e,null,p.WindowLayer.DECOR_BACK),this._decorFrontHandle=c.Application.view.show(n,null,p.WindowLayer.DECOR_FRONT),[2]}})})},DesignObjectModule.prototype.onLeaveFriend=function(){var t=u.GUINames.DESIGN_OBJECT_DECOR_BACK+this._screenId,e=u.GUINames.DESIGN_OBJECT_DECOR_FRONT+this._screenId;this.unmapFriendGladeMediators(t,e,this._friendDesignObjectDynamicItem),this._friendDesignObjectDynamicItem=null,this.removeDesignObjectView()},DesignObjectModule.prototype.mapFriendGladeMediators=function(t,e,n){if(t+=".decor",e+=".decor",n)for(var i=0,r=n.options.items;i<r.length;i++){var o=r[i];c.Application.view.mapMediator(t+o.id,M.FriendDesignObjectDecorMediator,{selectedOption:o.option.toString()}),c.Application.view.mapMediator(e+o.id,M.FriendDesignObjectDecorMediator,{selectedOption:o.option.toString()})}},DesignObjectModule.prototype.unmapFriendGladeMediators=function(t,e,n){if(t+=".decor",e+=".decor",n)for(var i=0,r=n.options.items;i<r.length;i++){var o=r[i];c.Application.view.unmapMediator(t+o.id,M.FriendDesignObjectDecorMediator),c.Application.view.unmapMediator(e+o.id,M.FriendDesignObjectDecorMediator)}},DesignObjectModule}(n.Module);e.DesignObjectModule=T}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function DesignObjectEvent(t,e){return n.call(this,t,e)||this}return o(DesignObjectEvent,n),Object.defineProperty(DesignObjectEvent.prototype,"designObjectModel",{get:function(){return this.data},enumerable:!0,configurable:!0}),DesignObjectEvent.POINTS_CHANGED="pointsChanged",DesignObjectEvent.STAGE_CHANGED="stageChanged",DesignObjectEvent}(uipixi.BaseEvent);e.DesignObjectEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function DesignObjectSetOptionsPromise(t){var e=n.call(this)||this;return e.designObjectModel=t,e}return a(DesignObjectSetOptionsPromise,n),DesignObjectSetOptionsPromise}(n.BasePromise);e.DesignObjectSetOptionsPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function DesignObjectBoostPromise(t){var e=n.call(this)||this;return e.action=t,e}return a(DesignObjectBoostPromise,n),DesignObjectBoostPromise}(n.BasePromise);e.DesignObjectBoostPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function DesignObjectStartPromise(t){var e=n.call(this)||this;return e.action=t,e}return a(DesignObjectStartPromise,n),DesignObjectStartPromise}(n.BasePromise);e.DesignObjectStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function DesignObjectLoadDecorPromise(t){var e=n.call(this)||this;return e.designObject=t,e}return a(DesignObjectLoadDecorPromise,n),DesignObjectLoadDecorPromise}(n.BasePromise);e.DesignObjectLoadDecorPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,D=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),I=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},C=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(4),n(18),n(0),n(2),n(8),n(26),n(31),n(22),n(912),n(913),n(914),n(80),n(51),n(149),n(916),n(917),n(920),n(921),n(922),n(923),n(924),n(925),n(390),n(926)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var M=function(t){function ToysModule(){return null!==t&&t.apply(this,arguments)||this}return D(ToysModule,t),ToysModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new f.RegisterSeasonLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new _.RegisterFriendLoaderPromise(this)),o.Application.operation.addAllowingRule(new u.OccurrenceBeginningLineRule("/toyScreen"))},ToysModule.prototype.onPreloadModule=function(t){return I(this,void 0,void 0,function(){return C(this,function(t){return o.Application.model.toys=this._toysModel=new h.ToysModel(o.Application.static.data.toys,o.Application.dynamic.user.toy),o.Application.model.screensToys=this._screensToysModel=new m.ScreensToysModel(o.Application.dynamic.toyXY),this.mapMediators(),this.mapCommands(),[2]})})},ToysModule.prototype.getResourcesToLoad=function(t){return this._screensToysModel.getScreen(t).getViewResources()},ToysModule.prototype.mapCommands=function(){p.CommandMap.map(d.LoadToysRespacksPromise,l.LoadToysRespacksCommand),p.CommandMap.map(E.ToySetXYPromise,A.ToySetXYCommand)},ToysModule.prototype.mapMediators=function(){o.Application.view.mapMediator(a.GUINames.HUD+".bottomPanel.decorButtonContainer",w.EditModeButtonMediator),this.mapGladeMediators(a.GUINames.TOYS_WINDOW,!0),o.Application.view.mapMediator(a.GUINames.EDIT_TOYS_WINDOW+".toysContainer",v.ToysWindowMediator,{listenUpdates:!1}),o.Application.view.mapMediator(a.GUINames.EDIT_TOYS_WINDOW+".beautyContainer",O.EditToysFakeBeautyMediator),o.Application.view.mapMediator(a.GUINames.EDIT_TOYS_WINDOW+".toysContainer.*",S.EditToyViewMediator),o.Application.view.mapMediator(a.GUINames.EDIT_TOYS_WINDOW,b.EditToysWindowMediator)},ToysModule.prototype.mapGladeMediators=function(t,e){o.Application.view.mapMediator(t,v.ToysWindowMediator,{listenUpdates:e}),o.Application.view.mapMediator(t+".*",g.ToyViewSpineMediator,null,[P.IsSpineToyViewGuard])},ToysModule.prototype.showToysWindow=function(t){var e=new s.ViewContext(t);this._windowHandle=o.Application.view.show(a.GUINames.TOYS_WINDOW,e,c.WindowLayer.TOYS)},ToysModule.prototype.onVisitSeason=function(n){return I(this,void 0,void 0,function(){var e;return C(this,function(t){return e=this._screensToysModel.getScreen(n),this.showToysWindow(e),[2]})})},ToysModule.prototype.onLeaveSeason=function(){o.Application.view.hide(this._windowHandle),this._windowHandle=null},ToysModule.prototype.onVisitFriend=function(i){return I(this,void 0,void 0,function(){var e,n;return C(this,function(t){switch(t.label){case 0:return e=i.screenId,n=new y.ScreenToysModel(e,i.friendData.toyXY.screens.getItem(e.toString())),[4,this.loadToysOnScreen(n)];case 1:return t.sent(),this.showToysWindow(n),[2]}})})},ToysModule.prototype.onLeaveFriend=function(){o.Application.view.hide(this._windowHandle),this._windowHandle=null},ToysModule.prototype.loadToysOnScreen=function(t){return i.ElkaCore.instance.promiseManager.ask(new d.LoadToysRespacksPromise(t,!0))},ToysModule}(n.Module);e.ToysModule=M}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(388)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ScreenToyModel(t,e){var n=i.call(this)||this;return n._x=0,n._y=0,n._isFlipped=!1,n._rotation=0,n._zIndex=0,n._scale=0,n._staticData=t,e&&(n._toyId=e.toyId,n._x=e.x,n._y=e.y,n._scale=e.scale,n._isFlipped=1===e.flip,n._zIndex=e.zIndex,n._rotation=e.rotation),n}return a(ScreenToyModel,i),Object.defineProperty(ScreenToyModel.prototype,"staticData",{get:function(){return this._staticData},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToyModel.prototype,"scale",{get:function(){return this._scale/1e3},set:function(t){this._scale=Math.floor(1e3*t)},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToyModel.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToyModel.prototype,"isFlipped",{get:function(){return this._isFlipped},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToyModel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToyModel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToyModel.prototype,"toyId",{get:function(){return this._toyId},set:function(t){this._toyId=t},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenToyModel.prototype,"rotation",{get:function(){return this._rotation},set:function(t){t<-180&&(t=360+t),this._rotation=t},enumerable:!0,configurable:!0}),ScreenToyModel.prototype.serialize=function(){var t=[];return t.push(parseInt(this._toyId)),t.push(this._x),t.push(this._y),t.push(0),t.push(this._zIndex),t.push(this._isFlipped?1:0),t.push(this._scale),t.push(this._rotation),t},ScreenToyModel.prototype.flip=function(){this._isFlipped=!this._isFlipped,this.dispatchEvent(new n.ScreenToyModelEvent(n.ScreenToyModelEvent.FLIP))},ScreenToyModel.prototype.rotateLeft=function(){this._rotation=this._rotation-ScreenToyModel.ROTATION_STEP,this.dispatchEvent(new n.ScreenToyModelEvent(n.ScreenToyModelEvent.ROTATE))},ScreenToyModel.prototype.rotateRight=function(){this._rotation=this._rotation+ScreenToyModel.ROTATION_STEP,this.dispatchEvent(new n.ScreenToyModelEvent(n.ScreenToyModelEvent.ROTATE))},ScreenToyModel.prototype.scaleDown=function(){var t=this.scale||ScreenToyModel.DEFAULT_SCALE;this.scale=Math.max(ScreenToyModel.MIN_SCALE,t-ScreenToyModel.SCALE_STEP),this.dispatchEvent(new n.ScreenToyModelEvent(n.ScreenToyModelEvent.SCALE))},ScreenToyModel.prototype.scaleUp=function(){var t=this.scale||ScreenToyModel.DEFAULT_SCALE;this.scale=Math.min(ScreenToyModel.MAX_SCALE,t+ScreenToyModel.SCALE_STEP),this.dispatchEvent(new n.ScreenToyModelEvent(n.ScreenToyModelEvent.SCALE))},ScreenToyModel.prototype.getViewResource=function(){return this._staticData.view.spine||this._staticData.view.resource.split("/",1)[0]},ScreenToyModel.MIN_SCALE=.5,ScreenToyModel.MAX_SCALE=1,ScreenToyModel.SCALE_STEP=.1,ScreenToyModel.ROTATION_STEP=15,ScreenToyModel.DEFAULT_SCALE=.75,ScreenToyModel}(uipixi.BaseEventTarget);e.ScreenToyModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function ScreenToyModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(ScreenToyModelEvent,t),ScreenToyModelEvent.FLIP="ScreenToyModelEvent.FLIP",ScreenToyModelEvent.SCALE="ScreenToyModelEvent.SCALE",ScreenToyModelEvent.ROTATE="ScreenToyModelEvent.ROTATE",ScreenToyModelEvent}(uipixi.BaseEvent);e.ScreenToyModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(387),n(388),n(120)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ToyView(t,e){var n=i.call(this)||this;return n._screenToyModel=t,n._resource=e,n._view=n.createView(),n.initView(),n.addChild(n._view),n._screenToyModel.addEventListener(r.ScreenToyModelEvent.FLIP,n.onFlip.bind(n)),n._screenToyModel.addEventListener(r.ScreenToyModelEvent.SCALE,n.onScale.bind(n)),n._screenToyModel.addEventListener(r.ScreenToyModelEvent.ROTATE,n.onRotate.bind(n)),n}return a(ToyView,i),Object.defineProperty(ToyView.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(ToyView.prototype,"screenToyModel",{get:function(){return this._screenToyModel},enumerable:!0,configurable:!0}),ToyView.prototype.initView=function(){this._view.outside="center",this._view.anchor="topLeft"},ToyView.prototype.onFlip=function(){this.view.scaleX=this._screenToyModel.isFlipped?-this._screenToyModel.scale:this._screenToyModel.scale},ToyView.prototype.onScale=function(){0===this._screenToyModel.scale&&(this._screenToyModel.scale=n.ScreenToyModel.DEFAULT_SCALE),this.view.scaleX=this._screenToyModel.isFlipped?-this._screenToyModel.scale:this._screenToyModel.scale,this.view.scaleY=this._screenToyModel.scale},ToyView.prototype.onRotate=function(){this.view.rotation=o.MathUtils.degreesToRadians(this._screenToyModel.rotation)},ToyView.prototype.updateView=function(){this.offsetX=this._screenToyModel.x,this.offsetY=this._screenToyModel.y,this.onScale(),this.onRotate(),this.onFlip()},ToyView.prototype.destroy=function(){this._screenToyModel.removeEventListener(r.ScreenToyModelEvent.FLIP,this.onFlip.bind(this)),this._screenToyModel.removeEventListener(r.ScreenToyModelEvent.SCALE,this.onScale.bind(this)),this._screenToyModel.removeEventListener(r.ScreenToyModelEvent.ROTATE,this.onRotate.bind(this)),i.prototype.destroy.call(this)},ToyView}(uipixi.UIContainer);e.ToyView=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ToySetXYPromise(t,e){var n=i.call(this)||this;return n.screenId=t,n.coords=e,n}return a(ToySetXYPromise,i),ToySetXYPromise}(n.BasePromise);e.ToySetXYPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,E=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(25),n(4),n(18),n(0),n(928),n(22),n(933),n(934),n(936),n(937),n(939),n(940),n(941),n(942),n(944),n(945),n(947),n(948),n(140),n(69),n(2),n(62)],void 0===(r=function(t,e,n,i,r,a,o,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var P=function(t){function ViralExchangeService(){return null!==t&&t.apply(this,arguments)||this}return E(ViralExchangeService,t),ViralExchangeService.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this))},ViralExchangeService.prototype.onPreloadModule=function(t){this._model=a.Application.model.viralExchange=new o.ViralExchangeModel(a.Application.dynamic.viralExchange,a.Application.static.data.viralExchange),this.mapCommands(),this.mapMediators(),a.Application.push.target.addEventListener(g.PushMessageEvent.TYPE_MESSAGE,this.onPushEvent.bind(this))},ViralExchangeService.prototype.onPushEvent=function(t){switch(t.messageType){case"viral:rq":a.Application.debug.addLog(this.DEBUG_CHANNEL,t);var e={key:t.data.data.id,itemId:t.data.data.itemId,num:1,time:t.data.data.id.split(":")[1],userId:t.data.data.userId,socialId:t.data.data.friendId};a.Application.model.viralExchange.addRequestItem(e);break;case"viral:rs":a.Application.debug.addLog(this.DEBUG_CHANNEL,t),e={key:t.data.data.id,itemId:t.data.data.itemId,num:1,time:t.data.data.id.split(":")[1],userId:t.data.data.userId,socialId:t.data.data.friendId},a.Application.model.viralExchange.addResponseItem(e)}},ViralExchangeService.prototype.mapMediators=function(){a.Application.view.mapMediator(O.GUINames.CANT_SEND_VIRAL_NOTICE_WINDOW,S.SimplePopupAnimationMediator)},ViralExchangeService.prototype.mapCommands=function(){s.CommandMap.map(c.AcceptAllViralPromise,u.AcceptAllViralCommand),s.CommandMap.map(p.ResponseAllViralPromise,l.ResponseAllViralCommand),s.CommandMap.map(d.RequestViralPromise,h.RequestViralCommand,this._model),s.CommandMap.map(_.AcceptViralPromise,f.AcceptViralCommand),s.CommandMap.map(y.ResponseViralPromise,m.ResponseViralCommand),s.CommandMap.map(v.RequestViralAndInvitePromise,b.RequestViralAndInviteCommand)},ViralExchangeService.prototype.requestViralResources=function(t,e){i.ElkaCore.instance.promiseManager.ask(new d.RequestViralPromise(t,e))},ViralExchangeService.prototype.requestViralResourcesAndInvite=function(t,e){i.ElkaCore.instance.promiseManager.ask(new v.RequestViralAndInvitePromise(t,e))},ViralExchangeService.prototype.accept=function(t){i.ElkaCore.instance.promiseManager.ask(new _.AcceptViralPromise(t))},ViralExchangeService.prototype.response=function(t){i.ElkaCore.instance.promiseManager.ask(new y.ResponseViralPromise(t))},ViralExchangeService.prototype.acceptAllViral=function(){i.ElkaCore.instance.promiseManager.ask(new c.AcceptAllViralPromise)},ViralExchangeService.prototype.responseAllViral=function(){i.ElkaCore.instance.promiseManager.ask(new p.ResponseAllViralPromise)},ViralExchangeService.prototype.getAvailableToAcceptResourceTypes=function(){for(var t=[],e=0,n=a.Application.model.objects.getByScreen(a.Application.dynamic.user.screen);e<n.length;e++){var i=n[e],r=i.getViralResourceId();void 0!==r&&i.state===w.ObjectState.REQUEST&&-1===t.indexOf(r)&&t.push(r)}return t},ViralExchangeService.prototype.getCurrentScreenObjectViralResponseResources=function(){for(var t=a.Application.model.objects.getByScreen(a.Application.dynamic.user.screen),n=[],e=function(t){var e=t.getViralResourceId();void 0!==e&&t.state===w.ObjectState.REQUEST&&-1===n.indexOf(e)&&i._model.response.some(function(t){return t.itemId===e})&&n.push(e)},i=this,r=0,o=t;r<o.length;r++){e(o[r])}return n},ViralExchangeService.prototype.countOfCurrentScreenResponses=function(){for(var t=a.Application.viralExchange.getCurrentScreenObjectViralResponseResources(),e=0,n=0,i=a.Application.model.viralExchange.response;n<i.length;n++){var r=i[n];0<=t.indexOf(r.itemId)&&a.Application.dynamic.friends.getItem(r.socialId)&&e++}return e},ViralExchangeService}(n.Service);e.ViralExchangeService=P}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RequestViralAction(t,e){var n=i.call(this)||this;return n.action="request",n.controller="viralExchange",n.input=new r.ActionInput({resourceId:t,friendsList:e}),n.output=new o,n}return a(RequestViralAction,i),RequestViralAction}(n.Action);e.RequestViralAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.response=[];var e=t.data.mail;for(var n in e){var i=e[n];i.key=n,this.response.push(i)}this.failedList=t.data.failedList,this.successList=t.data.successList},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(225),n(394)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ResourceViewTypeStaticData(){}return ResourceViewTypeStaticData.parse=function(t){var e=new ResourceViewTypeStaticData;return e._parse(t),e},Object.defineProperty(ResourceViewTypeStaticData.prototype,"icons",{get:function(){return this._icons},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceViewTypeStaticData.prototype,"strings",{get:function(){return this._strings},enumerable:!0,configurable:!0}),ResourceViewTypeStaticData.prototype._parse=function(t){this._icons=n.IconsViewTypeStaticData.parse(jQuery("> icons",t).first()),this._strings=i.StringsViewTypeStaticData.parse(jQuery("> strings",t).first())},ResourceViewTypeStaticData}();e.ResourceViewTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(958),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function StringsViewTypeStaticData(){}return StringsViewTypeStaticData.parse=function(t){var e=new StringsViewTypeStaticData;return e._parse(t),e},Object.defineProperty(StringsViewTypeStaticData.prototype,"string",{get:function(){return this._string},enumerable:!0,configurable:!0}),StringsViewTypeStaticData.prototype._parse=function(t){this._string=i.StaticDataCollection.parse(n.StringItemViewTypeStaticData,t,"> string ")},StringsViewTypeStaticData}();e.StringsViewTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function SkinPartAttachmentItemStaticData(){}return SkinPartAttachmentItemStaticData.parse=function(t){var e=new SkinPartAttachmentItemStaticData;return e._parse(t),e},Object.defineProperty(SkinPartAttachmentItemStaticData.prototype,"slot",{get:function(){return this._slot},enumerable:!0,configurable:!0}),Object.defineProperty(SkinPartAttachmentItemStaticData.prototype,"off",{get:function(){return this._off},enumerable:!0,configurable:!0}),SkinPartAttachmentItemStaticData.prototype._parse=function(t){this._slot=jQuery(t).attr("slot"),this._off=n.Utils.parseBool(jQuery(t).attr("off"))},SkinPartAttachmentItemStaticData}();e.SkinPartAttachmentItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1109),n(1111),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function RoulettesListStaticData(){}return RoulettesListStaticData.parse=function(t){var e=new RoulettesListStaticData;return e._parse(t),e},Object.defineProperty(RoulettesListStaticData.prototype,"vars",{get:function(){return this._vars},enumerable:!0,configurable:!0}),Object.defineProperty(RoulettesListStaticData.prototype,"roulette",{get:function(){return this._roulette},enumerable:!0,configurable:!0}),RoulettesListStaticData.prototype._parse=function(t){this._vars=n.RoulettesVarListStaticData.parse(jQuery("> vars",t).first()),this._roulette=r.StaticDataCollection.parse(i.RouletteNewItemStaticData,t,"> roulette ")},RoulettesListStaticData}();e.RoulettesListStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";t.exports=function adler32(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--a;);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,n){"use strict";var s=function makeTable(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function crc32(t,e,n,i){var r=s,o=i+n;t^=-1;for(var a=i;a<o;a++)t=t>>>8^r[255&(t^e[a])];return-1^t}},function(t,e,n){"use strict";var c=n(81),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var u=new c.Buf8(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function buf2binstring(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,c.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}u[254]=u[254]=1,e.string2buf=function(t){var e,n,i,r,o,a=t.length,s=0;for(r=0;r<a;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new c.Buf8(s),r=o=0;o<s;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),e[o++]=n<128?n:(e[o++]=n<2048?192|n>>>6:(e[o++]=n<65536?224|n>>>12:(e[o++]=240|n>>>18,128|n>>>12&63),128|n>>>6&63),128|63&n);return e},e.buf2binstring=function(t){return buf2binstring(t,t.length)},e.binstring2buf=function(t){for(var e=new c.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,i,r,o,a=e||t.length,s=new Array(2*a);for(n=i=0;n<a;)if((r=t[n++])<128)s[i++]=r;else if(4<(o=u[r]))s[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<a;)r=r<<6|63&t[n++],o--;s[i++]=1<o?65533:r<65536?r:(r-=65536,s[i++]=55296|r>>10&1023,56320|1023&r)}return buf2binstring(s,i)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+u[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(125),n(227)],void 0===(r=function(t,e,i,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a,s=uipixi.BaseEventTarget,c=uipixi.BaseEvent;(a=o=e.QuestMarkersContainerState||(e.QuestMarkersContainerState={})).OFF="off",a.DONE="done",a.ATTENTION="attention";var u=function(t){function QuestMarkersModel(){return t.call(this)||this}return p(QuestMarkersModel,t),QuestMarkersModel.prototype.initialize=function(){this._questLineModels=i.Application.model.quests.getQuestsByScreen(i.Application.dynamic.user.screen);for(var t=0,e=this._questLineModels;t<e.length;t++){var n=e[t];n.addEventListener(r.QuestLineModelEvent.CURRENT_TASKS_COMPLETED_CHANGED,this.updateMarker.bind(this)),n.addEventListener(r.QuestLineModelEvent.TASK_CHANGED,this.updateMarker.bind(this)),n.addEventListener(r.QuestLineModelEvent.STATE_CHANGED,this.updateMarker.bind(this)),n.addEventListener(r.QuestLineModelEvent.WAS_SHOWN_CHANGED,this.updateMarker.bind(this))}return this},QuestMarkersModel.prototype.updateMarker=function(){this.dispatchEvent(new c(QuestMarkersModel.UPDATE_MARKER_EVENT))},QuestMarkersModel.prototype.getMarkerType=function(){return this._questLineModels.some(function(t){return t.state!==n.QuestLineState.COMPLETED&&t.currentTasksCompleted})?o.DONE:this._questLineModels.some(function(t){return t.state===n.QuestLineState.IN_PROGRESS&&!t.wasShown})?o.ATTENTION:o.OFF},QuestMarkersModel.prototype.destroy=function(){for(var t=0,e=this._questLineModels;t<e.length;t++){var n=e[t];n.removeEventListener(r.QuestLineModelEvent.CURRENT_TASKS_COMPLETED_CHANGED,this.updateMarker.bind(this)),n.removeEventListener(r.QuestLineModelEvent.TASK_CHANGED,this.updateMarker.bind(this)),n.removeEventListener(r.QuestLineModelEvent.STATE_CHANGED,this.updateMarker.bind(this)),n.removeEventListener(r.QuestLineModelEvent.WAS_SHOWN_CHANGED,this.updateMarker.bind(this))}},QuestMarkersModel.UPDATE_MARKER_EVENT="QuestIconModel.UPDATE_MARKER_EVENT",QuestMarkersModel}(s);e.QuestMarkersModel=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(42),n(0),n(4),n(228),n(21),n(2)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function ResourceBarMediator(){return null!==e&&e.apply(this,arguments)||this}return l(ResourceBarMediator,e),ResourceBarMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._resource=r.Application.model.resources.get(this.resolveResourceId()),this._countLabel=this.child("countLabel"),this._mapData.purchaseAvailable?(this._container.buttonMode=!0,this.registerListener(this._container,u.POINTER_TAP,this.onTap.bind(this))):this.child("addButton").visible=!1,this._mapData.infoAvailable?this._container.buttonMode=!0:this.child("infoButton").visible=!1,this._mapData.tooltip&&r.Application.tooltip.addTooltip(this._container,s.TooltipAnchor.Bottom,c.GUINames.TEXT_TOOLTIP,{text:this._mapData.tooltip}),this.setCount(),this.registerListener(this._resource,i.ResourceModelEvent.COUNT_CHANGED,this.setCount.bind(this))},ResourceBarMediator.prototype.resolveResourceId=function(){return this._mapData.seasonResource?this._mapData.resourcePrefix+r.Application.dynamic.user.screen:this._mapData.resourcePrefix},ResourceBarMediator.prototype.setCount=function(){this._countLabel.text=this._resource.count.toString()},ResourceBarMediator.prototype.onTap=function(){o.ElkaCore.instance.promiseManager.ask(new a.ShowShopPromise(this._resource.id))},ResourceBarMediator}(n.DisplayObjectContainerMediator);e.ResourceBarMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(e){function UserProfileListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(UserProfileListItemMediator,e),UserProfileListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container.currentState=this._showData},UserProfileListItemMediator}(n.DisplayObjectContainerMediator);e.UserProfileListItemMediator=r,(i=e.UserProfileItemState||(e.UserProfileItemState={})).DEFAULT="default",i.EMPTY="empty",i.COMPLETE="complete"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GetPrereleaseClanPromise(){return t.call(this)||this}return a(GetPrereleaseClanPromise,t),GetPrereleaseClanPromise}(n.BasePromise);e.GetPrereleaseClanPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowRatingWindowPromise(){return null!==t&&t.apply(this,arguments)||this}return a(ShowRatingWindowPromise,t),ShowRatingWindowPromise}(n.BasePromise);e.ShowRatingWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(16),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function UserProfileCupMediatorVO(t,e,n){this.ratingId=t,this.placeId=e,this.numCups=n};e.UserProfileCupMediatorVO=o;var a=function(n){function UserProfileCupMediator(){return null!==n&&n.apply(this,arguments)||this}return s(UserProfileCupMediator,n),UserProfileCupMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=r.Application.model.ratings.getCupResource(96,this._showData.ratingId,this._showData.placeId);this._cup=new i.LoadableImage(this.child("cup"),e),this.child("numCups").text=this._showData.numCups.toString()},UserProfileCupMediator.prototype.destroy=function(){n.prototype.destroy.call(this),this._cup.destroy()},UserProfileCupMediator}(n.DisplayObjectContainerMediator);e.UserProfileCupMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowFullscreenWindowOnStartPromise(){return t.call(this)||this}return a(ShowFullscreenWindowOnStartPromise,t),ShowFullscreenWindowOnStartPromise}(n.ShowOnStartPromise);e.ShowFullscreenWindowOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(410),n(0)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function GuideArrowMediator(){return null!==i&&i.apply(this,arguments)||this}return a(GuideArrowMediator,i),GuideArrowMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),void 0!==this._showData.angle&&(this._displayObject.angle=this._showData.angle);var e=void 0!==this._showData.offset?this._showData.offset:0,n=this.child("arrowImage");n.offsetX=-e,this._animation=r.Application.animation.animate(n,"guideArrow",{offsetX:-(e+30)})},GuideArrowMediator.prototype.destroy=function(){this._animation.stop(),i.prototype.destroy.call(this)},GuideArrowMediator}(n.GuideUIElementMediator);e.GuideArrowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(35),n(78),n(1),n(36)],void 0===(r=function(t,e,i,r,o,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIEvent,c=uipixi.UIUtils,u=function(n){function GuideUIElementMediator(){return null!==n&&n.apply(this,arguments)||this}return p(GuideUIElementMediator,n),GuideUIElementMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this._showData.bindObject;e&&(e=o.GuideUtils.getDataValue(e),this._anchorObject=o.GuideUtils.getUIContainerByPath(e),this._anchorObject||(i.Application.debug.addError("guide","anchor object is not found:",e),i.Application.debug.sendLog("AddUIElement: no anchor object","",r.LogFlag.CLIENT,a.LogLevel.Error))),this._anchorObject&&(this.updatePosition(),this.registerListener(i.Application.view.ui.stage,s.STAGE_RESIZE,this.updatePosition.bind(this)))},GuideUIElementMediator.prototype.updatePosition=function(){i.Application.view.ui.stage.update();var t=this.calculatePosition();this._displayObject.offsetX=t.x,this._displayObject.offsetY=t.y},GuideUIElementMediator.prototype.calculatePosition=function(){var t=this._anchorObject,e=c.getPointForAnchorOutside(this._showData.bindAnchor);e.x+=.5,e.y+=.5,e.x*=t.width,e.y*=t.height;var n=t.getGlobalPosition();return void 0!==this._showData.x&&(n.x+=this._showData.x),void 0!==this._showData.y&&(n.y+=this._showData.y),n.x+=e.x,n.y+=e.y,n},GuideUIElementMediator}(n.DisplayObjectContainerMediator);e.GuideUIElementMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function FriendGetAction(t,e,n){var i=o.call(this)||this;i.action="get",i.controller="friend";var r={screenId:t,sFriendId:e};return void 0!==n&&(r.chestId=n),i.input=new a.ActionInput(r),i.output=new s,i}return c(FriendGetAction,o),FriendGetAction}(n.Action);e.FriendGetAction=i;var s=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(78),n(413),n(35),n(2),n(36)],void 0===(r=function(t,e,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SkipGuideCommand(t,e,n){this.queueId=t,this.save=e,this.skipValue=n}return SkipGuideCommand.prototype.execute=function(){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return i.Application.debug.addLog("guide","skip guide",this.queueId),void 0!==(e=i.Application.dynamic.guide.getLastTimestampedStep(this.queueId))?r.GuideUtils.sendFinishEvent(this.queueId,e,!0):(i.Application.debug.addError("guide","SkipCommand: undefined start timestamp"),i.Application.debug.sendLog("SkipCommand: undefined start timestamp","",a.LogFlag.CLIENT,c.LogLevel.Warning)),n=[this.queueId],this.save?[4,i.Application.server.send(new o.GuideSetProgressAction(this.queueId,this.skipValue))]:[3,2];case 1:t.sent(),t.label=2;case 2:return i.Application.model.guides.interrupt(n),i.Application.view.hideByWindowName(s.GUINames.GUIDE_SKIP_BUTTON_LEFT),i.Application.view.hideByWindowName(s.GUINames.GUIDE_SKIP_BUTTON_RIGHT),i.Application.view.hideByWindowName(s.GUINames.GUIDE_SKIP_BUTTON_LEFT_BOTTOM),i.Application.view.hideByWindowName(s.GUINames.GUIDE_SKIP_BUTTON_RIGHT_BOTTOM),i.Application.dynamic.guide.whiteLists.clear(),i.Application.model.guides.lockScreen=!1,i.Application.model.guides.skip(n),i.Application.model.guides.active=0,[2]}})})},SkipGuideCommand}();e.SkipGuideCommand=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function GuideSetProgressAction(t,e){var n=i.call(this)||this;return n.action="setProgress",n.controller="guide",n.input=new r.ActionInput({guideId:t,stepId:e}),n.output=new o,n}return a(GuideSetProgressAction,i),GuideSetProgressAction}(n.Action);e.GuideSetProgressAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function RouletteSpinAction(t){var e=n.call(this)||this;return e.action="spin",e.controller="roulette",e.input=new i.ActionInput({rouletteId:t}),e.output=new o,e}return a(RouletteSpinAction,n),RouletteSpinAction}(n.Action);e.RouletteSpinAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data},Object.defineProperty(Output.prototype,"sector",{get:function(){return this.data.award.sector},enumerable:!0,configurable:!0}),Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(38),n(30),n(43),n(46)],void 0===(r=function(t,e,n,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.Point,r=function(e){function BaseThrowAwardLevelUpAnimationMediator(){return null!==e&&e.apply(this,arguments)||this}return l(BaseThrowAwardLevelUpAnimationMediator,e),BaseThrowAwardLevelUpAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._animations=[],this.initComponents(),this.cacheAnchorPoints(),this._updateCallback=this.cacheAnchorPoints.bind(this),a.Application.view.ui.fullscreen.addEventListener("fullscreenchange",this._updateCallback)},BaseThrowAwardLevelUpAnimationMediator.prototype.initComponents=function(){this._homeButton=this.window.getChildByName("closeButton"),this._dropAwardsContainer=this.window.getChildByName("dropAwardsContainer"),this._dropAwardCenterPoint=this.window.getChildByName("dropAwardCenterPoint"),this._startPointDisplayObject=this.getStartPointDisplayObject()},BaseThrowAwardLevelUpAnimationMediator.prototype.cacheAnchorPoints=function(){a.Application.view.ui.stage.update(),this._bottomLeft=this._dropAwardsContainer.getGlobalPosition().add(new i(this._dropAwardsContainer.width/3,this._dropAwardsContainer.height)),this._startPoint=this._startPointDisplayObject.getGlobalPosition().add(new i(.5*this._startPointDisplayObject.width,.5*this._startPointDisplayObject.height)),this._endPoint=this._homeButton.getGlobalPosition().add(new i(.5*this._homeButton.width,.5*this._homeButton.height))},BaseThrowAwardLevelUpAnimationMediator.prototype.throwAwards=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],r=s.PriceAwardUtils.getAwardIconResource(i,"64"),o=c.AnimationUtils.throwLevelUpAward(r,this._startPoint,60,150,this._bottomLeft.y,this._endPoint);a.Application.sound.play(u.SoundName.GIFTS,!1,p.SoundGroup.SOUND_GROUP_SOUND),this._animations.push(o)}},BaseThrowAwardLevelUpAnimationMediator.prototype.destroy=function(){a.Application.view.ui.fullscreen.removeEventListener("fullscreenchange",this._updateCallback),this._updateCallback=null,this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},BaseThrowAwardLevelUpAnimationMediator}(n.DisplayObjectContainerMediator);e.BaseThrowAwardLevelUpAnimationMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(26),n(38),n(30),n(43),n(46)],void 0===(r=function(t,e,n,f,y,m,v,b,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w=uipixi.Point,i=function(e){function BaseThrowAwardLevelUpGladeAnimationMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t._endPoints={},t}return a(BaseThrowAwardLevelUpGladeAnimationMediator,e),BaseThrowAwardLevelUpGladeAnimationMediator.prototype.throwAwards=function(t,e){f.Application.view.ui.stage.update();var n=f.Application.view.ui.stage.getChildByName("windowsManager_layer_"+y.WindowLayer.HUD),i=f.Application.view.ui.stage.getChildByName("floorPosition"),r=i.getGlobalPosition().y+i.height,o=this.getStartPointDisplayObject(n),a=o.getGlobalPosition().add(new w(.5*o.width,.5*o.height)),s={};for(var c in this._endPoints){(l=n.getChildByName(this._endPoints[c]))&&(s[c]=l.getGlobalPosition().add(new w(.5*l.width,.5*l.height)))}for(var u=0,p=t;u<p.length;u++){var l,d=p[u];if(l=s[d.itemId]){var h=m.PriceAwardUtils.getAwardIconResource(d,"64"),_=v.AnimationUtils.throwLevelUpAward(h,a,60,150*e,r,l);f.Application.sound.play(b.SoundName.GIFTS,!1,g.SoundGroup.SOUND_GROUP_SOUND),this._animations.push(_)}}},BaseThrowAwardLevelUpGladeAnimationMediator.prototype.registerEndPoint=function(t,e){this._endPoints[t]=e},BaseThrowAwardLevelUpGladeAnimationMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},BaseThrowAwardLevelUpGladeAnimationMediator}(n.DisplayObjectContainerMediator);e.BaseThrowAwardLevelUpGladeAnimationMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function TravelModelEvent(t,e){var n=i.call(this,t)||this;return n.currentFriend=e,n}return o(TravelModelEvent,i),TravelModelEvent.VISIT_FRIEND="TravelModelEvent.CURRENT_FRIEND_CHANGED",TravelModelEvent}(uipixi.BaseEvent);e.TravelModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowInviteFriendsWindowPromise(){return t.call(this)||this}return a(ShowInviteFriendsWindowPromise,t),ShowInviteFriendsWindowPromise}(n.BasePromise);e.ShowInviteFriendsWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function SendFriendInvitePromise(t){var e=n.call(this)||this;return e.socialIds=t,e}return a(SendFriendInvitePromise,n),SendFriendInvitePromise}(n.BasePromise);e.SendFriendInvitePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function OpenSelfChestPromise(t){var e=n.call(this)||this;return e.chestId=t,e}return a(OpenSelfChestPromise,n),OpenSelfChestPromise}(n.BasePromise);e.OpenSelfChestPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function ChestOpenAction(t,e){var n=r.call(this)||this;n.action="open",n.controller="chest";var i={chestId:t};return e&&(i.sFriendId=e.socialId,i.hash=e.hash,i.fastOpen=e.fastOpen?1:0),n.input=new o.ActionInput(i),n.output=new a,n}return s(ChestOpenAction,r),ChestOpenAction}(n.Action);e.ChestOpenAction=i;var a=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.baseAward=t.data.baseAward,this.bonusAward=t.data.bonusAward,this.chest=t.data.chest},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(38),n(75),n(120),n(43),n(46)],void 0===(r=function(t,e,n,d,c,i,h,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,_=uipixi.UIImage,u=uipixi.Point,s=function(n){function OpenChestAnimationWindowMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t.CHEST_OPEN_ANIMATION="03_chest_open",t.CHEST_IDLE_ANIMATION="04_chest_opened_idle",t.SHINE_REVEAL_ANIMATION="01_reveal",t.SHINE_IDLE_ANIMATION="02_idle",t}return p(OpenChestAnimationWindowMediator,n),OpenChestAnimationWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.getChildren(),this._animations=[];var e=d.Application.model.beauty.currentScreenBeauty.bonus;this.setChestAnimation(),this.setWindowAnimation(this._showData.baseAward.awards.length,0<e),this.setDropAwardsAnimation(this._showData.baseAward.awards),this.registerListener(d.Application.view.ui.stage,a.POINTER_TAP,this.onStageTap.bind(this))},OpenChestAnimationWindowMediator.prototype.getChildren=function(){this._chestSpine=this.child("chestSpine"),this._shineSpine=this.child("shineSpine"),this._dropAwardsContainer=this.child("dropAwardsContainer"),this._dropAwardCenterPoint=this.child("dropAwardCenterPoint")},OpenChestAnimationWindowMediator.prototype.setChestAnimation=function(){this._chestSpine.setAnimation(this.CHEST_OPEN_ANIMATION,!1),this._chestSpine.addAnimation(this.CHEST_IDLE_ANIMATION,!0)},OpenChestAnimationWindowMediator.prototype.setWindowAnimation=function(t,e){var n=this,i=(t-1)*OpenChestAnimationWindowMediator.AWARD_ITEM_ANIMATION_STEP_DELAY*(e?2:1),r=d.Application.animation.animate(null,"chestOpen",{caption:this.child("captionLabel"),awardLabel:this.child("awardLabel"),button:this.child("closeButton"),beautyBonusContainer:this.child("beautyBonusContainer"),awardsAnimationDuration:i,shine:this._shineSpine,startSound:this.startSound.bind(this),onShine:function(){return n.startShine()}});this._animations.push(r)},OpenChestAnimationWindowMediator.prototype.setDropAwardsAnimation=function(t){d.Application.view.ui.stage.update();for(var e=new u(0,0),n=new u(this._dropAwardsContainer.width,this._dropAwardsContainer.height),i=new u(this._dropAwardCenterPoint.x,this._dropAwardCenterPoint.y),r=[],o=0;o<4;o++){var a=t[o]||this.getRandomArrayElement(t);r[o]=c.PriceAwardUtils.getAwardIconResource(a,"64")}for(o=0;o<4;o++)if(this.createDropAward(1-.125*o+h.MathUtils.getRandomPlusMinus(.05),1,r[o],i,e,n),!(o<2)){var s=this.getRandomArrayElement(r);this.createDropAward(1-.125*o+h.MathUtils.getRandomPlusMinus(.05),-1,s,i,e,n)}},OpenChestAnimationWindowMediator.prototype.createDropAward=function(t,e,n,i,r,o){var a=new _(n),s=i.y+(r.y-i.y)*t,c=i.x+(o.x-i.x)*t*e,u=(.5+.5*Math.random())*OpenChestAnimationWindowMediator.DROP_AWARD_MAX_DURATION,p=o.y+h.MathUtils.getRandomPlusMinus(.125)*a.height,l=d.Application.animation.animate(a,"chestDropAward",{startX:i.x,startY:i.y,topY:s,finalX:c,finalY:p,time:u,halfTime:.5*u},this._dropAwardsContainer);this._animations.push(l)},OpenChestAnimationWindowMediator.prototype.getRandomArrayElement=function(t){return t[Math.floor(Math.random()*t.length)]},OpenChestAnimationWindowMediator.prototype.startSound=function(){this._soundTrack=d.Application.sound.play(r.SoundName.CHEST_GLADE,!1,o.SoundGroup.SOUND_GROUP_SOUND)},OpenChestAnimationWindowMediator.prototype.startShine=function(){this._shineSpine.setAnimation(this.SHINE_REVEAL_ANIMATION,!1),this._shineSpine.addAnimation(this.SHINE_IDLE_ANIMATION,!0)},OpenChestAnimationWindowMediator.prototype.onStageTap=function(){this.unregisterListener(d.Application.view.ui.stage,a.POINTER_TAP,this.onStageTap.bind(this)),this.stopSound(),this._animations.forEach(function(t){return t.stop(!0)}),this._chestSpine.currentAnimation!==this.CHEST_IDLE_ANIMATION&&this._chestSpine.setAnimation(this.CHEST_IDLE_ANIMATION,!0),this._shineSpine.currentAnimation||this._shineSpine.setAnimation(this.SHINE_IDLE_ANIMATION,!0)},OpenChestAnimationWindowMediator.prototype.stopSound=function(){this._soundTrack&&this._soundTrack.isPlaying&&this._soundTrack.stop()},OpenChestAnimationWindowMediator.prototype.destroy=function(){this.stopSound(),this._animations.forEach(function(t){return t.stop()}),n.prototype.destroy.call(this)},OpenChestAnimationWindowMediator.AWARD_ITEM_ANIMATION_STEP_DELAY=5.5*i.AnimationService.FPS,OpenChestAnimationWindowMediator.DROP_AWARD_MAX_DURATION=20*i.AnimationService.FPS,OpenChestAnimationWindowMediator}(n.DisplayObjectContainerMediator);e.OpenChestAnimationWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function OpenFriendChestPromise(t,e){var n=i.call(this)||this;return n.chest=t,n.fastOpen=e,n}return a(OpenFriendChestPromise,i),OpenFriendChestPromise}(n.BasePromise);e.OpenFriendChestPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(103)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SelfChestModel(t,e){var n=i.call(this)||this;return n._static=t,n._dynamic=e,n._dynamic.addEventListener(r.BaseDataEvent.CHILDREN_CHANGED,n.onChildrenChanged.bind(n)),n}return a(SelfChestModel,i),SelfChestModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("time")&&this.dispatchEvent(new n.ChestModelEvent(n.ChestModelEvent.OPEN))},Object.defineProperty(SelfChestModel.prototype,"awards",{get:function(){return this._static.awards},enumerable:!0,configurable:!0}),Object.defineProperty(SelfChestModel.prototype,"id",{get:function(){return this._static.id},enumerable:!0,configurable:!0}),Object.defineProperty(SelfChestModel.prototype,"readyToOpenTime",{get:function(){return this._dynamic.time+this._static.period},enumerable:!0,configurable:!0}),SelfChestModel.prototype.destroy=function(){this._dynamic.removeEventListener(r.BaseDataEvent.CHILDREN_CHANGED,this.onChildrenChanged.bind(this))},SelfChestModel}(uipixi.BaseEventTarget);e.SelfChestModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function LeaveSeasonPromise(){return t.call(this)||this}return a(LeaveSeasonPromise,t),LeaveSeasonPromise}(n.BasePromise);e.LeaveSeasonPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function VisitSeasonPromise(t){var e=n.call(this)||this;return e.data=t,e}return a(VisitSeasonPromise,n),VisitSeasonPromise}(n.BasePromise);e.VisitSeasonPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function BoxModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(BoxModelEvent,t),BoxModelEvent.BOX_CHANGED="BoxModelEvent.BOX_CHANGED",BoxModelEvent.BOX_AWARD_CHANGED="BoxModelEvent.BOX_AWARD_CHANGED",BoxModelEvent}(uipixi.BaseEvent);e.BoxModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function UpgradeBoxPromise(t){var e=n.call(this)||this;return e.boxModel=t,e}return a(UpgradeBoxPromise,n),UpgradeBoxPromise}(n.BasePromise);e.UpgradeBoxPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.BoxAnimation||(e.BoxAnimation={})).closed="01_idle_1",n.ready_to_open="02_idle_2",n.opening="03_box_opening",n.opened="04_box_opened"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function BoxesModelEvent(t,e){return n.call(this,t,e)||this}return o(BoxesModelEvent,n),BoxesModelEvent.OPENED="BoxesModelEvent.OPENED",BoxesModelEvent}(uipixi.BaseEvent);e.BoxesModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function LikeFriendPromise(t){var e=n.call(this)||this;return e.friendLikesModel=t,e}return a(LikeFriendPromise,n),LikeFriendPromise}(n.BasePromise);e.LikeFriendPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function LikesModelEvent(t){return e.call(this,t)||this}return o(LikesModelEvent,e),LikesModelEvent.COUNT_CHANGED="LikesModelEvent.COUNT_CHANGED",LikesModelEvent}(uipixi.BaseEvent);e.LikesModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function LikeBaseFriendAction(t,e){var n=i.call(this)||this;return n.action="",n.controller="friend",n.input=new r.ActionInput({screenId:t,friendData:e}),n.output=new o,n}return a(LikeBaseFriendAction,i),LikeBaseFriendAction}(n.Action);e.LikeBaseFriendAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.VisitorState||(e.VisitorState={})).FRIEND="friend",n.NPC="npc",n.GUEST="guest"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function BeautyStageUpPromise(t){var e=n.call(this)||this;return e.beautyItem=t,e}return a(BeautyStageUpPromise,n),BeautyStageUpPromise}(n.BasePromise);e.BeautyStageUpPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowBeautyOnStartPromise(){return t.call(this)||this}return a(ShowBeautyOnStartPromise,t),ShowBeautyOnStartPromise}(n.ShowOnStartPromise);e.ShowBeautyOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function ShopModelEvent(t){return e.call(this,t)||this}return a(ShopModelEvent,e),ShopModelEvent.BEST_OFFER_CHANGED="ShopModelEvent.BEST_OFFER_CHANGED",ShopModelEvent}(n.BaseDataEvent);e.ShopModelEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function QuestSkipPromise(t,e,n){var i=r.call(this)||this;return i.questLineId=t,i.questTaskId=e,i.price=n,i}return a(QuestSkipPromise,r),QuestSkipPromise}(n.BasePromise);e.QuestSkipPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.QuestLineType||(e.QuestLineType={})).LINEAR="linear",n.RANDOM="random"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1375),n(0),n(441),n(37)],void 0===(r=function(t,e,n,f,i,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(_){function QuestsModel(t,e){var n=_.call(this)||this;n._dynamicData=t,n._staticData=e;for(var i=0,r=f.Application.static.data.quests.tasks;i<r.length;i++){var o=r[i];QuestsModel._poolIdToPool.set(o.poolId,o)}n._idToQuestLineMap=new core.Map;for(var a=0,s=n._dynamicData.items;a<s.length;a++){var c=s[a];n.addQuestLine(parseInt(c.id))}n._dynamicData.addEventListener(y.ItemCollectionEvent.ITEM_ADDED,n.onQuestsChanged.bind(n)),n._screenToQuests=new core.Map;for(var u=0,p=n._staticData.questLine.items;u<p.length;u++){var l=p[u],d=n._screenToQuests.get(l.screen);d||(d=[],n._screenToQuests.set(l.screen,d));var h=n.getQuestLineById(l.id);h&&d.push(h)}return n}return a(QuestsModel,_),QuestsModel.prototype.addQuestLine=function(t){var e=new n.QuestLineModel(t,this._dynamicData.getItem(t.toString()),this._staticData.questLine.getItem(t));this._idToQuestLineMap.set(e.id,e)},QuestsModel.prototype.onQuestsChanged=function(t){this.addQuestLine(parseInt(t.item.id)),this.dispatchEvent(new i.QuestsModelEvent(i.QuestsModelEvent.QUEST_ADDED))},QuestsModel.getPoolStaticDataById=function(t){return this._poolIdToPool.get(t)},QuestsModel.prototype.getQuestLineById=function(t){return this._idToQuestLineMap.get(t)},QuestsModel.prototype.getQuestsByScreen=function(t){return this._screenToQuests.get(t)},QuestsModel._poolIdToPool=new core.Map,QuestsModel}(uipixi.BaseEventTarget);e.QuestsModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function QuestsModelEvent(t){return e.call(this,t)||this}return o(QuestsModelEvent,e),QuestsModelEvent.QUEST_ADDED="questAdded",QuestsModelEvent}(uipixi.BaseEvent);e.QuestsModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function QuestStartPromise(t){var e=n.call(this)||this;return e.questLineId=t,e}return a(QuestStartPromise,n),QuestStartPromise}(n.BasePromise);e.QuestStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function QuestSetProgressPromise(t,e,n){var i=r.call(this)||this;return i.questLineId=t,i.questTaskId=e,i.progress=n,i}return a(QuestSetProgressPromise,r),QuestSetProgressPromise}(n.BasePromise);e.QuestSetProgressPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteShowOnStartPromise(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteShowOnStartPromise,t),RouletteShowOnStartPromise}(n.ShowOnStartPromise);e.RouletteShowOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowPromoOnStartPromise(){return t.call(this)||this}return a(ShowPromoOnStartPromise,t),ShowPromoOnStartPromise}(n.ShowOnStartPromise);e.ShowPromoOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ShowPendingAwardPromise(t){var e=n.call(this)||this;return e.type=t,e}return a(ShowPendingAwardPromise,n),ShowPendingAwardPromise}(n.ShowOnStartPromise);e.ShowPendingAwardPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowRatingOnStartPromise(){return t.call(this)||this}return a(ShowRatingOnStartPromise,t),ShowRatingOnStartPromise}(n.ShowOnStartPromise);e.ShowRatingOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearCheckNewPromise(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearCheckNewPromise,t),EventNewYearCheckNewPromise}(n.ShowOnStartPromise);e.EventNewYearCheckNewPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(76)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowNewsPresentsOnStartPromise(){return t.call(this)||this}return a(ShowNewsPresentsOnStartPromise,t),ShowNewsPresentsOnStartPromise}(n.ShowOnStartPromise);e.ShowNewsPresentsOnStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(243)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DecorWindowBuyToyPromise(){return null!==t&&t.apply(this,arguments)||this}return a(DecorWindowBuyToyPromise,t),DecorWindowBuyToyPromise}(n.DecorWindowBasePromise);e.DecorWindowBuyToyPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(243)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DecorWindowBuyFriendPromise(){return null!==t&&t.apply(this,arguments)||this}return a(DecorWindowBuyFriendPromise,t),DecorWindowBuyFriendPromise}(n.DecorWindowBasePromise);e.DecorWindowBuyFriendPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(105),n(0),n(1402),n(65),n(82)],void 0===(r=function(t,e,n,c,u,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function DecorShopDecorModel(){return t.call(this,r.DecorShopType.DECOR)||this}return a(DecorShopDecorModel,t),DecorShopDecorModel.prototype.init=function(){this._inboxModel=c.Application.mail.getInbox(DecorShopDecorModel.DECOR_INBOX_ID),t.prototype.init.call(this)},DecorShopDecorModel.prototype.createItems=function(){for(var t,e=0,n=c.Application.static.data.clientShopsConfig.decorShop;e<n.length;e++){var i=n[e];i.screenId===c.Application.dynamic.user.screen&&(t=i.promoId)}for(var r=c.Application.static.data.promos.promo.getItem(t),o=0,a=r.offers.items;o<a.length;o++){var s=a[o];this._items.push(new u.DecorShopItemDecorModel(r.id,s,this._inboxModel))}},DecorShopDecorModel.prototype.sortItems=function(){var o=[i.DecorShopItemState.TAKE,i.DecorShopItemState.PLACE,i.DecorShopItemState.BUY,i.DecorShopItemState.LOCK];this._items.sort(function(t,e){for(var n=0,i=o;n<i.length;n++){var r=i[n];if(t.state===r&&e.state!==r)return-1;if(t.state!==r&&e.state===r)return 1;if(t.state===r&&e.state===r)return t.toyModel.static.id-e.toyModel.static.id}})},DecorShopDecorModel.DECOR_INBOX_ID=1,DecorShopDecorModel}(n.DecorShopModel);e.DecorShopDecorModel=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(243)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DecorWindowWorkshopCollectPromise(){return null!==t&&t.apply(this,arguments)||this}return a(DecorWindowWorkshopCollectPromise,t),DecorWindowWorkshopCollectPromise}(n.DecorWindowBasePromise);e.DecorWindowWorkshopCollectPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(121),n(0),n(1409)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.BaseEventTarget,s=function(t){function DecorSelectFriendEvent(){return null!==t&&t.apply(this,arguments)||this}return u(DecorSelectFriendEvent,t),DecorSelectFriendEvent.SELECTED="DecorSelectFriendEvent.SELECTED",DecorSelectFriendEvent}(uipixi.BaseEvent);e.DecorSelectFriendEvent=s;var c=function(n){function DecorSelectFriendWindowMediator(){return null!==n&&n.apply(this,arguments)||this}return u(DecorSelectFriendWindowMediator,n),DecorSelectFriendWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._selectEventTarget=new a,this._searchContainer=this.child("searchContainer"),this._friendsList=this.child("friendsList");var e=this.createAllFriendsList();this._searchedItems=e,this._searchRenderer=new i.SearchRenderer(this._searchContainer,{dataItems:e,searchKey:"name"}),this.registerListener(this._searchRenderer,i.SearchRendererEvent.SEARCH,this.onSearch.bind(this)),this.registerListener(this._selectEventTarget,s.SELECTED,this.onSelectFriend.bind(this)),this.fillList(),this._showData.selectedFriend=null},DecorSelectFriendWindowMediator.prototype.onSelectFriend=function(t){var e=t.data;this._showData.selectedFriend=e,r.Application.view.hide(this.viewHandle)},DecorSelectFriendWindowMediator.prototype.onSearch=function(t){this.clearList(),this._searchedItems=t.data,this.fillList()},DecorSelectFriendWindowMediator.prototype.createAllFriendsList=function(){var n=this;return r.Application.dynamic.friends.items.filter(function(t){return!t.isNPC}).map(function(t){var e=r.Application.profiles.getProfile(t.sUserId,!0);return new o.DecorSelectFriendItemData(t,e.firstName+" "+e.lastName,n._selectEventTarget)})},DecorSelectFriendWindowMediator.prototype.clearList=function(){this._friendsList.removeAllItems()},DecorSelectFriendWindowMediator.prototype.fillList=function(){this.clearList(),this._friendsList.addItems(this._searchedItems)},DecorSelectFriendWindowMediator.prototype.destroy=function(){this._searchRenderer.destroy(),n.prototype.destroy.call(this)},DecorSelectFriendWindowMediator}(n.DisplayObjectContainerMediator);e.DecorSelectFriendWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopGetSlotPromise(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopGetSlotPromise,t),WorkshopGetSlotPromise}(n.BasePromise);e.WorkshopGetSlotPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function BuyExtraItemPromise(t){var e=n.call(this)||this;return e.model=t,e}return a(BuyExtraItemPromise,n),BuyExtraItemPromise}(n.BasePromise);e.BuyExtraItemPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function UnsetExtraItemPromise(t){var e=n.call(this)||this;return e.model=t,e}return a(UnsetExtraItemPromise,n),UnsetExtraItemPromise}(n.BasePromise);e.UnsetExtraItemPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function GetAchievementAwardPromise(t){var e=n.call(this)||this;return e.achievement=t,e}return a(GetAchievementAwardPromise,n),GetAchievementAwardPromise}(n.BasePromise);e.GetAchievementAwardPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function UpgradeBonusPromise(t){var e=n.call(this)||this;return e.bonus=t,e}return a(UpgradeBonusPromise,n),UpgradeBonusPromise}(n.BasePromise);e.UpgradeBonusPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function FarmExchangePromise(t){var e=n.call(this)||this;return e.generator=t,e}return a(FarmExchangePromise,n),FarmExchangePromise}(n.BasePromise);e.FarmExchangePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function FarmStageUpPromise(t){var e=n.call(this)||this;return e.generator=t,e}return a(FarmStageUpPromise,n),FarmStageUpPromise}(n.BasePromise);e.FarmStageUpPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function FarmBuyPromise(t){var e=n.call(this)||this;return e.cell=t,e}return a(FarmBuyPromise,n),FarmBuyPromise}(n.BasePromise);e.FarmBuyPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function FarmShopEvent(t,e){return n.call(this,t,e)||this}return o(FarmShopEvent,n),Object.defineProperty(FarmShopEvent.prototype,"cell",{get:function(){return this.data},enumerable:!0,configurable:!0}),FarmShopEvent.MULTIPLIER_CHANGED="multiplierChanged",FarmShopEvent}(uipixi.BaseEvent);e.FarmShopEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopClearSlotPromise(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopClearSlotPromise,t),WorkshopClearSlotPromise}(n.BasePromise);e.WorkshopClearSlotPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopAcceptSlotPromise(){return t.call(this)||this}return a(WorkshopAcceptSlotPromise,t),WorkshopAcceptSlotPromise}(n.BasePromise);e.WorkshopAcceptSlotPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function WorkshopBuyPromise(t){var e=n.call(this)||this;return e.collection=t,e}return a(WorkshopBuyPromise,n),WorkshopBuyPromise}(n.BasePromise);e.WorkshopBuyPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function WorkshopCollectPromise(t){var e=n.call(this)||this;return e.collection=t,e}return a(WorkshopCollectPromise,n),WorkshopCollectPromise}(n.BasePromise);e.WorkshopCollectPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopGetFinalAwardPromise(){return t.call(this)||this}return a(WorkshopGetFinalAwardPromise,t),WorkshopGetFinalAwardPromise}(n.BasePromise);e.WorkshopGetFinalAwardPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function WorkshopSetSlotPromise(t,e){var n=i.call(this)||this;return n.collectionId=t,n.elementId=e,n}return a(WorkshopSetSlotPromise,i),WorkshopSetSlotPromise}(n.BasePromise);e.WorkshopSetSlotPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function WorkshopSendPromise(t){var e=n.call(this)||this;return e.requestData=t,e}return a(WorkshopSendPromise,n),WorkshopSendPromise}(n.BasePromise);e.WorkshopSendPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function PromoReadyServiceEvent(t,e){return n.call(this,t,e)||this}return o(PromoReadyServiceEvent,n),Object.defineProperty(PromoReadyServiceEvent.prototype,"promo",{get:function(){return this.data},enumerable:!0,configurable:!0}),PromoReadyServiceEvent.READY_TO_START="PromoStartServiceEvent.readyToStart",PromoReadyServiceEvent}(uipixi.BaseEvent);e.PromoReadyServiceEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(250),n(74),n(14),n(204)],void 0===(r=function(t,e,r,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function PromoModel(t,e){var n=i.call(this)||this;return n.dynamicData=t,n._staticData=e,n._offerStaticData=e.offers.getItem(t.offerId),n.prices=r.Application.price.convertObjectToCalculated(t.price),n.price=n.prices.prices[0],n.id=parseInt(t.id),n.offerId=t.offerId,n.xmlId=e.id,n}return c(PromoModel,i),PromoModel.prototype.initialize=function(){this._active=!1,this._buyRequirements=new n.Requirements(this._staticData.buyRequirements,this._offerStaticData.buyRequirements);var t=this.expireTime-r.Application.date.currentTime;if(!r.Application.requirements.check(this._buyRequirements)||t<=0)return r.Application.debug.addWarning("promo","Ошибка при активации - промо уже завершено",this.id),void this.dispatchEvent(new o.PromoModelEvent(o.PromoModelEvent.DEACTIVATED,this));r.Application.price.eventTarget.addEventListener(s.PriceServiceEvent.FIX_PRICE_CHANGED,this.onFixPriceChanged.bind(this)),r.Application.requirements.wait(this._buyRequirements,this.onBuyRequirementsChanged.bind(this)),this._timerId=r.Application.date.callProcessor.delayCall(this.onExpired.bind(this),1e3*t),this._active=!0},PromoModel.prototype.onBuyRequirementsChanged=function(){this.deactivate()},PromoModel.prototype.onExpired=function(){this.deactivate()},PromoModel.prototype.deactivate=function(){this._active=!1,r.Application.requirements.unwait(this._buyRequirements,this.onBuyRequirementsChanged.bind(this)),r.Application.date.callProcessor.deleteCall(this._timerId),this.dispatchEvent(new o.PromoModelEvent(o.PromoModelEvent.DEACTIVATED,this))},PromoModel.prototype.getAward=function(){for(var t=r.Application.award.convertObjectToCalculated(this.dynamicData.award),e=0,n=t.awards;e<n.length;e++){var i=n[e];i.type===a.AwardType.RESOURCE&&"money"===i.itemId&&(i.itemId="money"+r.Application.dynamic.user.screen)}return t},Object.defineProperty(PromoModel.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"expireTime",{get:function(){return this.dynamicData.expireTime},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"title",{get:function(){return this._staticData.title},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"icon",{get:function(){return this._staticData.view.icon},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"background",{get:function(){return this._staticData.view.background},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"hasSelfWindow",{get:function(){return this._staticData.view.selfWindow},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"bundle",{get:function(){return this._staticData.view.bundle},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"window",{get:function(){return this._staticData.view.selfWindow?this._staticData.view.background:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"offerStaticData",{get:function(){return this._offerStaticData},enumerable:!0,configurable:!0}),PromoModel.prototype.onFixPriceChanged=function(){this.prices=r.Application.price.convertObjectToCalculated(this.dynamicData.price),this.price=this.prices.prices[0]},Object.defineProperty(PromoModel.prototype,"isSolo",{get:function(){return this.hasSelfWindow&&!this.bundle},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"customTitle1",{get:function(){return this._staticData.view.customTitle1},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"customTitle2",{get:function(){return this._staticData.view.customTitle2},enumerable:!0,configurable:!0}),Object.defineProperty(PromoModel.prototype,"customTitle3",{get:function(){return this._staticData.view.customTitle3},enumerable:!0,configurable:!0}),PromoModel}(uipixi.BaseEventTarget);e.PromoModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(74),n(166)],void 0===(r=function(t,e,r,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function PromoBundleModel(t){var e=i.call(this)||this,n=r.Application.model.promos;return e._staticData=t,e.offers=n.all.filter(function(t){return t.xmlId===e.id}),n.addEventListener(o.PromoModelEvent.ACTIVATED,e.onPromoActivated.bind(e)),n.addEventListener(o.PromoModelEvent.DEACTIVATED,e.onPromoDeactivated.bind(e)),e}return a(PromoBundleModel,i),PromoBundleModel.prototype.onPromoActivated=function(t){var e=this.active;t.model.xmlId===this.id&&(this.offers.push(t.model),e||this.dispatchEvent(new n.PromoBundleModelEvent(n.PromoBundleModelEvent.ACTIVATED,this)))},PromoBundleModel.prototype.onPromoDeactivated=function(t){this.active||this.dispatchEvent(new n.PromoBundleModelEvent(n.PromoBundleModelEvent.DEACTIVATED,this))},Object.defineProperty(PromoBundleModel.prototype,"expireTime",{get:function(){for(var t=void 0,e=0,n=this.offers.filter(function(t){return t.active});e<n.length;e++){var i=n[e];(!t||t.expireTime>i.expireTime)&&(t=i)}return t?t.expireTime:this.offers[0].expireTime},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"title",{get:function(){return this._staticData.title},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"active",{get:function(){return this.offers.some(function(t){return t.active})},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"window",{get:function(){return this._staticData.view.background},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"icon",{get:function(){return this._staticData.view.icon},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"customTitle1",{get:function(){return this._staticData.view.customTitle1},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"customTitle2",{get:function(){return this._staticData.view.customTitle2},enumerable:!0,configurable:!0}),Object.defineProperty(PromoBundleModel.prototype,"customTitle3",{get:function(){return this._staticData.view.customTitle3},enumerable:!0,configurable:!0}),PromoBundleModel}(uipixi.BaseEventTarget);e.PromoBundleModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RouletteShowWindowPromise(t){var e=n.call(this)||this;return e.rouletteModel=t,e}return a(RouletteShowWindowPromise,n),RouletteShowWindowPromise}(n.BasePromise);e.RouletteShowWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteModelEvent(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteModelEvent,t),RouletteModelEvent.SPIN="RouletteModelEvent.SPIN",RouletteModelEvent.SPINS_UPDATED="RouletteModelEvent.SPINS_UPDATED",RouletteModelEvent}(n.BaseDataEvent);e.RouletteModelEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(251)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteAnimationShowPromise(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteAnimationShowPromise,t),RouletteAnimationShowPromise}(n.RouletteAnimationBasePromise);e.RouletteAnimationShowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RouletteSpinPromise(t,e){var n=i.call(this)||this;return n.rouletteModel=t,n.animationData=e,n}return a(RouletteSpinPromise,i),RouletteSpinPromise}(n.BasePromise);e.RouletteSpinPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(251)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteAnimationHidePromise(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteAnimationHidePromise,t),RouletteAnimationHidePromise}(n.RouletteAnimationBasePromise);e.RouletteAnimationHidePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteShowActiveRoulettesPromise(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteShowActiveRoulettesPromise,t),RouletteShowActiveRoulettesPromise}(n.BasePromise);e.RouletteShowActiveRoulettesPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(251)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteAnimationSpinPromise(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteAnimationSpinPromise,t),RouletteAnimationSpinPromise}(n.RouletteAnimationBasePromise);e.RouletteAnimationSpinPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RouletteShowSpinAwardPromise(t,e){var n=i.call(this)||this;return n.rouletteModel=t,n.animationData=e,n}return a(RouletteShowSpinAwardPromise,i),RouletteShowSpinAwardPromise}(n.BasePromise);e.RouletteShowSpinAwardPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RoulettesModelEvent(){return null!==t&&t.apply(this,arguments)||this}return a(RoulettesModelEvent,t),RoulettesModelEvent.AWARD_ACCRUED="RoulettesModelEvent.AWARD_ACCRUED",RoulettesModelEvent}(n.BaseDataEvent);e.RoulettesModelEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelStartPromise(){return t.call(this)||this}return a(GladeDuelStartPromise,t),GladeDuelStartPromise}(n.BasePromise);e.GladeDuelStartPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function GladeDuelVotePromise(t){var e=n.call(this)||this;return e.userId=t,e}return a(GladeDuelVotePromise,n),GladeDuelVotePromise}(n.BasePromise);e.GladeDuelVotePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelSkipPromise(){return t.call(this)||this}return a(GladeDuelSkipPromise,t),GladeDuelSkipPromise}(n.BasePromise);e.GladeDuelSkipPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowSettingsWindowPromise(){return t.call(this)||this}return a(ShowSettingsWindowPromise,t),ShowSettingsWindowPromise}(n.BasePromise);e.ShowSettingsWindowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(255),n(488),n(256)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function GuideStepModel(t,e){var n=i.call(this)||this;return n._staticData=t,n._injectData=e,n}return a(GuideStepModel,i),GuideStepModel.prototype.process=function(){this._action=r.GuideActionFactory.instance.getAction(this._staticData),this._action.injectData=this._injectData,this._action.addEventListener(o.GuideActionEvent.COMPLETE,this.onActionCompleted.bind(this)),this._action.execute()},GuideStepModel.prototype.interrupt=function(){this._action.removeEventListener(o.GuideActionEvent.COMPLETE,this.onActionCompleted.bind(this)),this._action.interrupt()},GuideStepModel.prototype.onActionCompleted=function(){this._action.removeEventListener(o.GuideActionEvent.COMPLETE,this.onActionCompleted.bind(this)),this.complete()},GuideStepModel.prototype.complete=function(){this.dispatchEvent(new n.GuideStepModelEvent(n.GuideStepModelEvent.COMPLETE))},GuideStepModel.prototype.toDebugStrings=function(){return[this._staticData.type]},GuideStepModel.prototype.revert=function(){this._action.revert()},GuideStepModel}(uipixi.BaseEventTarget);e.GuideStepModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1630),n(1631),n(1632),n(1633),n(1634),n(1635),n(1636),n(1637),n(1639),n(1640),n(1641),n(1642),n(1643),n(1644),n(1645),n(1646),n(1647),n(1655),n(1656),n(1657),n(1658),n(1659),n(1660),n(1661),n(1662),n(1663),n(1664),n(1665),n(1666),n(1667),n(1668),n(1670),n(1671),n(1672),n(1673),n(1674)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var B=function(){function GuideActionFactory(){this._actionsMap=new core.Map,this.registerAction("guideStep",w.GuideStepAction,b.GuideGuideStepStaticData),this.registerAction("if",c.IfStepAction,a.GuideIfStaticData),this.registerAction("fork",r.ForkStepAction,i.GuideForkStaticData),this.registerAction("while",p.WhileStepAction,l.GuideWhileStaticData),this.registerAction("showWindow",d.ShowWindowAction,_.GuideStepShowWindowStaticData),this.registerAction("hideWindow",n.HideWindowAction,M.GuideStepHideWindowStaticData),this.registerAction("trigger",g.TriggerStepAction,v.GuideStepTriggerStaticData),this.registerAction("save",D.SaveStepAction,y.GuideStepSaveStaticData),this.registerAction("fade",I.FadeStepAction,f.GuideStepFadeStaticData),this.registerAction("fire",S.FireStepAction,P.GuideStepFireStaticData),this.registerAction("event",O.SendEventStepAction,A.GuideStepEventStaticData),this.registerAction("bubble",E.BubbleStepAction,m.GuideStepBubbleStaticData),this.registerAction("arrow",C.ArrowStepAction,T.GuideStepArrowStaticData),this.registerAction("start",h.StartStepAction,u.GuideStepStartStaticData),this.registerAction("complete",s.CompleteStepAction,o.GuideStepCompleteStaticData),this.registerAction("bringToFront",j.BringToFrontAction,x.GuideStepBringToFrontStaticData),this.registerAction("disableUIElement",R.DisableUIElementStepAction,N.GuideStepDisableUIElementStaticData),this.registerAction("getPresent",L.GetPresentStepAction,k.GuideStepGetPresentStaticData)}return GuideActionFactory.prototype.registerAction=function(t,e,n){this._actionsMap.set(t,{actionClass:e,actionData:n})},GuideActionFactory.prototype.getAction=function(t){var e=this._actionsMap.get(t.type);if(!e)throw new Error("[GuideStepActionFactory] unknown action type: "+t.type);return new e.actionClass(e.actionData.parse(t.source))},GuideActionFactory.instance=new GuideActionFactory,GuideActionFactory}();e.GuideActionFactory=B}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function GuideModelEvent(t,e){return n.call(this,t,e)||this}return o(GuideModelEvent,n),Object.defineProperty(GuideModelEvent.prototype,"guide",{get:function(){return this.data},enumerable:!0,configurable:!0}),GuideModelEvent.COMPLETE="GuideModelEvent.COMPLETE",GuideModelEvent}(uipixi.BaseEvent);e.GuideModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function GuideAdminEvent(){return null!==t&&t.apply(this,arguments)||this}return o(GuideAdminEvent,t),GuideAdminEvent.MOVE_BUBBLE="GuideAdminEvent.MOVE_BUBBLE",GuideAdminEvent}(uipixi.BaseEvent);e.GuideAdminEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function SendInviteToClanMemberPromise(t){var e=n.call(this)||this;return e.sUserId=t,e}return a(SendInviteToClanMemberPromise,n),SendInviteToClanMemberPromise}(n.BasePromise);e.SendInviteToClanMemberPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ClanModelEvent(t,e){return n.call(this,t,e)||this}return o(ClanModelEvent,n),Object.defineProperty(ClanModelEvent.prototype,"sUserId",{get:function(){return this.data},enumerable:!0,configurable:!0}),ClanModelEvent.CHANGED="ClanModelEvent.CHANGED",ClanModelEvent}(uipixi.BaseEvent);e.ClanModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function GetPendingAwardPromise(t){var e=n.call(this)||this;return e.awardId=t,e}return a(GetPendingAwardPromise,n),GetPendingAwardPromise}(n.BasePromise);e.GetPendingAwardPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RatingGetPromise(t,e){var n=i.call(this)||this;return n.ratingId=t,n.pageId=e,n}return a(RatingGetPromise,i),RatingGetPromise}(n.BasePromise);e.RatingGetPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(83),n(496),n(58),n(0)],void 0===(r=function(t,e,n,o,i,r,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function RatingsData(){return null!==t&&t.apply(this,arguments)||this}return s(RatingsData,t),Object.defineProperty(RatingsData.prototype,"myRatingData",{get:function(){return this._myRatingData},set:function(t){this._myRatingData=t},enumerable:!0,configurable:!0}),RatingsData.prototype.hasWin=function(){return p.Application.dynamic.user.rating.items.some(function(t){return 1===t.show})},RatingsData.prototype.getCupResource=function(t,e,n){var i=Math.ceil(e/2);return r.StringUtils.format(this.config.cupPattern,{size:t,type:i,place:n})},RatingsData.prototype.getCupTitle=function(t){var e=Math.ceil(t/2);return p.Application.localization.localize(r.StringUtils.format(this.config.cupTitlePattern,{type:e}))},RatingsData.prototype.getFrameResource=function(t,e){return r.StringUtils.format(this.config.framePattern,{size:t,place:e})},RatingsData.prototype.getBestPlace=function(t){return t===p.Application.dynamic.user.sUserId?this.getMyBestPlace():this.getFriendBestPlace(t)},RatingsData.prototype.getMyBestPlace=function(){for(var t=0,e=p.Application.static.data.ratings.rating,n=0,i=p.Application.dynamic.user.rating.items;n<i.length;n++){var r=i[n];e.getItem(+r.id).friend&&((0===t||t>r.placeId)&&(t=r.placeId))}return t},RatingsData.prototype.getFriendBestPlace=function(t){var e=p.Application.dynamic.friends.getItem(t);if(!e)return 0;if(e.isNPC)return 0;var n=e.ratings;if(!n)return 0;for(var i=JSON.parse(n),r=0,o=p.Application.static.data.ratings.rating,a=0,s=i;a<s.length;a++){var c=s[a],u=c[0];o.getItem(u).friend&&(Array.isArray(c)&&3===c.length&&(0===r||r>c[1])&&(r=c[1]))}return r},RatingsData.prototype.getRatingPageData=function(t,e,n){return this.getById(t.toString()+"_"+e+"_"+n.toString())},RatingsData.prototype.updateRatingPageData=function(t,e,n,i){var r=t.toString()+"_"+e+"_"+n.toString();null==this.getById(r)?this.addItem(r,i):this.getById(r).reinit(i),this.dispatchEvent(new o.RatingDataEvent(o.RatingDataEvent.CHANGED,{ratingId:t,friends:e,pageId:n}))},RatingsData.prototype.clear=function(){this._items=[],this._myRatingData=new i.MyRatingData("",{})},RatingsData.PAGE_SIZE=4,RatingsData}(n.ItemCollection);e.RatingsData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(83)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,a=function(e){function MyRatingData(){return null!==e&&e.apply(this,arguments)||this}return s(MyRatingData,e),Object.defineProperty(MyRatingData.prototype,"rank",{get:function(){return this.getNumber(r.RANK)},enumerable:!0,configurable:!0}),Object.defineProperty(MyRatingData.prototype,"score",{get:function(){return this.getNumber(r.SCORE)},enumerable:!0,configurable:!0}),Object.defineProperty(MyRatingData.prototype,"size",{get:function(){return this.getNumber(r.SIZE)},enumerable:!0,configurable:!0}),MyRatingData.prototype.reinit=function(t){e.prototype.reinit.call(this,t),this.dispatchEvent(new i.RatingDataEvent(i.RatingDataEvent.CHANGED))},MyRatingData}(n.BaseDynamicDataIdentifiable);e.MyRatingData=a,(o=r=e.MyRatingDataKey||(e.MyRatingDataKey={})).RANK="rank",o.SIZE="size",o.SCORE="score"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RatingTabChangedPromise(t){var e=n.call(this)||this;return e._tabName=t,e}return a(RatingTabChangedPromise,n),Object.defineProperty(RatingTabChangedPromise.prototype,"tabName",{get:function(){return this._tabName},enumerable:!0,configurable:!0}),RatingTabChangedPromise}(n.BasePromise);e.RatingTabChangedPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RatingPageChangedPromise(t){var e=n.call(this)||this;return e._pageId=t,e}return a(RatingPageChangedPromise,n),Object.defineProperty(RatingPageChangedPromise.prototype,"pageId",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),RatingPageChangedPromise}(n.BasePromise);e.RatingPageChangedPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RatingFriendsPromise(t){var e=n.call(this)||this;return e.ratingId=t,e}return a(RatingFriendsPromise,n),RatingFriendsPromise}(n.BasePromise);e.RatingFriendsPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function RatingMyRankPromise(t){var e=n.call(this)||this;return e.ratingId=t,e}return a(RatingMyRankPromise,n),RatingMyRankPromise}(n.BasePromise);e.RatingMyRankPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function RatingUtils(){}return RatingUtils.getAwardPlaceDataByRealPlace=function(t,e){for(var n=0,i=o.Application.static.data.ratings.rating.getItem(t).places.place.items;n<i.length;n++){var r=i[n];if(e>=r.from&&e<=r.to)return r}return null},RatingUtils}();e.RatingUtils=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(16),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function RatingAwardMediatorVO(t,e){this.ratingId=t,this.placeId=e};e.RatingAwardMediatorVO=o;var a=function(n){function RatingAwardMediator(){return null!==n&&n.apply(this,arguments)||this}return s(RatingAwardMediator,n),RatingAwardMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=r.Application.model.ratings.getCupResource(96,this._showData.ratingId,this._showData.placeId);this._cup=new i.LoadableImage(this.child("cup"),e),this.child("title").text=r.Application.model.ratings.getCupTitle(this._showData.ratingId)},RatingAwardMediator.prototype.destroy=function(){n.prototype.destroy.call(this),this._cup.destroy()},RatingAwardMediator}(n.DisplayObjectContainerMediator);e.RatingAwardMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function OkMoneyEventInitPromise(){return t.call(this)||this}return a(OkMoneyEventInitPromise,t),OkMoneyEventInitPromise}(n.BasePromise);e.OkMoneyEventInitPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function OkMoneyEventShowPromise(t){var e=n.call(this)||this;return e.event=t,e}return a(OkMoneyEventShowPromise,n),OkMoneyEventShowPromise}(n.BasePromise);e.OkMoneyEventShowPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function OkMoneyEventSpinPromise(t,e){var n=i.call(this)||this;return n.rouletteModel=t,n.animationData=e,n}return a(OkMoneyEventSpinPromise,i),OkMoneyEventSpinPromise}(n.BasePromise);e.OkMoneyEventSpinPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),v=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},b=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(1728),n(6),n(4),n(507),n(2),n(8),n(14),n(84)],void 0===(r=function(t,e,c,n,u,p,l,d,h,_,f,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m,i,r=function(t){function OkMoneyEventSpinCommand(){return null!==t&&t.apply(this,arguments)||this}return a(OkMoneyEventSpinCommand,t),OkMoneyEventSpinCommand.prototype.execute=function(s){return v(this,void 0,void 0,function(){var e,n,i,r,o,a;return b(this,function(t){switch(t.label){case 0:return(e=c.Application.price.hold(s.rouletteModel.price)).success?(s.rouletteModel.isSpinning=!0,[4,c.Application.server.send(new u.OkMoneyEventSpinAction(parseInt(s.rouletteModel.id)))]):[2];case 1:return n=t.sent(),c.Application.price.release(e),s.rouletteModel.winSector=n.output.sector,i=c.Application.award.convertObjectToCalculated(n.output.award),r=m.OTHER,i.awards[0].type===f.AwardType.REAL?r=m.OK:"okEventRoulette2"===i.awards[0].itemId&&(r=m.TICKET),o=new p.BasePromise,l.ElkaCore.instance.promiseManager.ask(new d.OkMoneyEventRouletteAnimationSpinPromise(s.rouletteModel,r,s.animationData,o)),[4,o];case 2:return t.sent(),s.rouletteModel.isSpinning=!1,a={baseAward:r===m.OTHER?i:void 0,bonusAward:r===m.OTHER?void 0:i,title:c.Application.localization.localize("OK_MONEY_EVENT_AWARD_WINDOW_TITLE"),description:c.Application.localization.localize("OK_MONEY_EVENT_AWARD_WINDOW_DESCRIPTION"),wallpostId:s.rouletteModel.id===y.OkMoneyEventRouletteId.COMMON?c.Application.static.data.events.raffleMoney.wallpostId:null},[4,c.Application.view.show(h.GUINames.AWARDS_WINDOW,new _.ViewContext(a)).onClose];case 3:return t.sent(),i.awards[0].type===f.AwardType.REAL&&s.rouletteModel.addOk(),c.Application.award.accrueAwardImmediately(n.output.award),[2]}})})},OkMoneyEventSpinCommand}(n.CommandBase);e.OkMoneyEventSpinCommand=r,(i=m=e.OkMoneyEventAwardType||(e.OkMoneyEventAwardType={})).TICKET="ticket",i.OK="ok",i.OTHER="other"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function OkMoneyEventRouletteAnimationSpinPromise(t,e,n,i){var r=o.call(this)||this;return r.rouletteModel=t,r.awardType=e,r.data=n,r.completePromise=i,r}return a(OkMoneyEventRouletteAnimationSpinPromise,o),OkMoneyEventRouletteAnimationSpinPromise}(n.BasePromise);e.OkMoneyEventRouletteAnimationSpinPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(14)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearAchievementStageModel(t,e){this._dynamicItem=t,this._staticItem=e,this._award=n.Application.award.calculate(this._staticItem.awards).awards[0]}return Object.defineProperty(EventNewYearAchievementStageModel.prototype,"id",{get:function(){return this._staticItem.id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementStageModel.prototype,"isToyAward",{get:function(){return this._award.type===i.AwardType.TOY},enumerable:!0,configurable:!0}),EventNewYearAchievementStageModel.prototype.canGetStage=function(){return this._dynamicItem.progress>=parseInt(this._staticItem.task)},Object.defineProperty(EventNewYearAchievementStageModel.prototype,"award",{get:function(){return this._award},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementStageModel.prototype,"task",{get:function(){return parseInt(this._staticItem.task)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementStageModel.prototype,"wallpostId",{get:function(){return this._staticItem.wallpostId?parseInt(this._staticItem.wallpostId):-1},enumerable:!0,configurable:!0}),EventNewYearAchievementStageModel}();e.EventNewYearAchievementStageModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearInitPromise(){return t.call(this)||this}return a(EventNewYearInitPromise,t),EventNewYearInitPromise}(n.BasePromise);e.EventNewYearInitPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ClientHelpId||(e.ClientHelpId={}))[n.EVENT_NEW_YEAR_GENERAL=1]="EVENT_NEW_YEAR_GENERAL",n[n.EVENT_NEW_YEAR_EXTRA=2]="EVENT_NEW_YEAR_EXTRA"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(121),n(0),n(512)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.BaseEventTarget,s=function(t){function EventNewYearSelectFriendEvent(){return null!==t&&t.apply(this,arguments)||this}return u(EventNewYearSelectFriendEvent,t),EventNewYearSelectFriendEvent.SELECTED="EventNewYearSelectFriendEvent.SELECTED",EventNewYearSelectFriendEvent}(uipixi.BaseEvent);e.EventNewYearSelectFriendEvent=s;var c=function(n){function EventNewYearSelectFriendWindowMediator(){return null!==n&&n.apply(this,arguments)||this}return u(EventNewYearSelectFriendWindowMediator,n),EventNewYearSelectFriendWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._selectEventTarget=new a,this._searchContainer=this.child("searchContainer"),this._friendsList=this.child("friendsList");var e=this.createAllFriendsList();this._searchedItems=e,this._searchRenderer=new i.SearchRenderer(this._searchContainer,{dataItems:e,searchKey:"name"}),this.registerListener(this._searchRenderer,i.SearchRendererEvent.SEARCH,this.onSearch.bind(this)),this.registerListener(this._selectEventTarget,s.SELECTED,this.onSelectFriend.bind(this)),this.fillList(),this._showData.selectedFriend=null},EventNewYearSelectFriendWindowMediator.prototype.onSelectFriend=function(t){this._showData.selectedFriend=t.data,r.Application.view.hide(this.viewHandle)},EventNewYearSelectFriendWindowMediator.prototype.onSearch=function(t){this.clearList(),this._searchedItems=t.data,this.fillList()},EventNewYearSelectFriendWindowMediator.prototype.createAllFriendsList=function(){var n=this,t=r.Application.model.eventNewYear.presents,i=t.getSentUserIds(this._showData.resourceId),e=r.Application.dynamic.friends.items.filter(function(e){return!t.isFriendExcluded(e.userId)&&i.every(function(t){return t!==e.userId})&&!e.isNPC});return 0===e.length&&(e=r.Application.dynamic.friends.items.filter(function(t){return t.isNPC})),e.map(function(t){var e=r.Application.profiles.getProfile(t.sUserId,!0);return new o.EventNewYearSelectFriendItemData(t,e.firstName+" "+e.lastName,n._selectEventTarget)})},EventNewYearSelectFriendWindowMediator.prototype.clearList=function(){this._friendsList.removeAllItems()},EventNewYearSelectFriendWindowMediator.prototype.fillList=function(){this.clearList(),this._friendsList.addItems(this._searchedItems)},EventNewYearSelectFriendWindowMediator.prototype.destroy=function(){this._searchRenderer.destroy(),n.prototype.destroy.call(this)},EventNewYearSelectFriendWindowMediator}(n.DisplayObjectContainerMediator);e.EventNewYearSelectFriendWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(40),n(0),n(16),n(511)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(){function EventNewYearSelectFriendItemData(t,e,n){this._friend=t,this._name=e,this._eventTarget=n}return Object.defineProperty(EventNewYearSelectFriendItemData.prototype,"friend",{get:function(){return this._friend},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearSelectFriendItemData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearSelectFriendItemData.prototype,"eventTarget",{get:function(){return this._eventTarget},enumerable:!0,configurable:!0}),EventNewYearSelectFriendItemData}();e.EventNewYearSelectFriendItemData=c;var u=function(e){function EventNewYearSelectFriendItemMediator(){return null!==e&&e.apply(this,arguments)||this}return p(EventNewYearSelectFriendItemMediator,e),EventNewYearSelectFriendItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._button=this._container,this._profile=r.Application.profiles.getProfile(this._showData.friend.sUserId,!0),this._profileRenderer=new i.ProfileRenderer,this._profileRenderer.initialize(this._profile,this._container),this.registerListener(this._button,s.POINTER_TAP,this.onTapButton.bind(this)),this.setupFrame()},EventNewYearSelectFriendItemMediator.prototype.setupFrame=function(){var t=this.child("frame"),e=r.Application.model.ratings.getBestPlace(this._profile.userId),n=r.Application.model.ratings.getFrameResource(64,e);this._frameLoadableImage=new o.LoadableImage(t,n)},EventNewYearSelectFriendItemMediator.prototype.onTapButton=function(){this._showData.eventTarget.dispatchEvent(new a.EventNewYearSelectFriendEvent(a.EventNewYearSelectFriendEvent.SELECTED,this._showData.friend))},EventNewYearSelectFriendItemMediator.prototype.destroy=function(){this._frameLoadableImage.destroy(),this._profileRenderer.destroy(),e.prototype.destroy.call(this)},EventNewYearSelectFriendItemMediator}(n.DisplayObjectContainerMediator);e.EventNewYearSelectFriendItemMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function EventNewYearWindowGetGiftPromise(t){var e=n.call(this)||this;return e.mailIds=t,e}return a(EventNewYearWindowGetGiftPromise,n),EventNewYearWindowGetGiftPromise}(n.BasePromise);e.EventNewYearWindowGetGiftPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function EventNewYearWindowOpenGiftPromise(t){var e=n.call(this)||this;return e.mailId=t,e}return a(EventNewYearWindowOpenGiftPromise,n),EventNewYearWindowOpenGiftPromise}(n.BasePromise);e.EventNewYearWindowOpenGiftPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function EventNewYearAchievementStageUpPromise(t,e){var n=i.call(this)||this;return n.achievementId=t,n.stageId=e,n}return a(EventNewYearAchievementStageUpPromise,i),EventNewYearAchievementStageUpPromise}(n.BasePromise);e.EventNewYearAchievementStageUpPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearGetRatingPromise(){return t.call(this)||this}return a(EventNewYearGetRatingPromise,t),EventNewYearGetRatingPromise}(n.BasePromise);e.EventNewYearGetRatingPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearGetRatingAwardPromise(){return t.call(this)||this}return a(EventNewYearGetRatingAwardPromise,t),EventNewYearGetRatingAwardPromise}(n.BasePromise);e.EventNewYearGetRatingAwardPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function EventNewYearOpenPresentAction(t){var e=n.call(this)||this;return e.action="openPresent",e.controller="eventNewYear",e.input=new i.ActionInput({mailId:t}),e.output=new o,e}return a(EventNewYearOpenPresentAction,n),EventNewYearOpenPresentAction}(n.Action);e.EventNewYearOpenPresentAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data,this.award=this.data.award,this.slots=this.data.slots},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function EventNewYearWindowSpendStarsPromise(t,e,n){var i=r.call(this)||this;return i.resourceId=t,i.count=e,i.animData=n,i}return a(EventNewYearWindowSpendStarsPromise,r),EventNewYearWindowSpendStarsPromise}(n.BasePromise);e.EventNewYearWindowSpendStarsPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(4)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),window.ELKA=new n.ElkaCore(window.ELKA_CONFIG||{})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(5),n(17)],void 0===(r=function(t,e,c,i){"use strict";var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.PromisePriority||(e.PromisePriority={}))[n.HIGH=0]="HIGH",n[n.NORMAL=1]="NORMAL",n[n.LOW=2]="LOW";var o=function(){function PromiseManager(){this.promiseHash={},this.promisesMap={},this.promisesWaiters={}}return PromiseManager.error=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.Services.debug?(t=i.Services.debug).addError.apply(t,[""].concat(e)):console.error.apply(console,e)},PromiseManager.warn=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.Services.debug?(t=i.Services.debug).addWarning.apply(t,[""].concat(e)):console.warn.apply(console,e)},PromiseManager.prototype.attach=function(t,e,n){void 0===n&&(n=r.NORMAL);var i=c.Utils.getNameFromClass(t);this.promiseHash[i]||(this.promiseHash[i]=[]),this.promiseHash[i].push([n,e]),this.promiseHash[i].sort(promiseHashSort)},PromiseManager.prototype.detach=function(t,e){var n=c.Utils.getNameFromClass(t);if(this.promiseHash[n]){var i=this.promiseHash[n].concat();delete this.promiseHash[n];for(var r=[],o=0,a=i;o<a.length;o++){var s=a[o];c.Utils.equalHackFunctions(s[1],e)||r.push(s)}r.sort(promiseHashSort),this.promiseHash[n]=r}else PromiseManager.warn("PromiseManager.detach warn: not found in hash: ",arguments)},PromiseManager.prototype.has=function(t,e){var n=c.Utils.getNameFromClass(t);if(!this.promiseHash[n])return!1;for(var i=0,r=this.promiseHash[n];i<r.length;i++){var o=r[i];if(c.Utils.equalHackFunctions(o[1],e))return!0}return!1},PromiseManager.prototype.ask=function(t){var e=c.Utils.getNameFromInstance(t),n=new a(e,this.promiseHash,this.deleteList.bind(this));if(this.promisesMap[e]||(this.promisesMap[e]=[]),this.promisesMap[e].push(n),this.promisesWaiters[e])for(var i=0,r=this.promisesWaiters[e];i<r.length;i++){var o=r[i];n.then(o[0],o[1])}return n.ask(t),n.commit(),n},PromiseManager.prototype.wait=function(t,e,n){var i=c.Utils.getNameFromClass(t);this.promisesWaiters[i]||(this.promisesWaiters[i]=[]),this.promisesWaiters[i].push([e,n]),this.addWaiterToList(i,[e,n])},PromiseManager.prototype.unwait=function(t,e,n){var i=c.Utils.getNameFromClass(t);if(this.promisesWaiters[i]){for(var r,o=this.promisesWaiters[i].length,a=-1,s=0;s<o;s++)if(r=this.promisesWaiters[i][s],c.Utils.equalHackFunctions(e,r[0])&&c.Utils.equalHackFunctions(n,r[1])){a=s;break}-1!==a&&(this.promisesWaiters[i].splice(a,1),this.removeWaiterFromList(i,[e,n]))}else PromiseManager.error("PromiseManager.unwait error: not found promisesWaiters for: "+i)},PromiseManager.prototype.waitTimeout=function(e){return s(this,void 0,void 0,function(){return u(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})},PromiseManager.prototype.addWaiterToList=function(t,e){if(this.promisesMap[t])for(var n=0,i=this.promisesMap[t];n<i.length;n++){i[n].then(e[0],e[1])}},PromiseManager.prototype.removeWaiterFromList=function(t,e){if(this.promisesMap[t])for(var n=0,i=this.promisesMap[t];n<i.length;n++){i[n].unthen(e[0],e[1])}},PromiseManager.prototype.deleteList=function(t){delete this.promisesMap[t.promiseClassName]},PromiseManager}();e.PromiseManager=o;var a=function(){function PromiseList(t,e,n){this._promiseClassName=t,this._list=[],this.promiseHash=e,this._commit=n,this._waiters=[]}return Object.defineProperty(PromiseList.prototype,"promiseClassName",{get:function(){return this._promiseClassName},enumerable:!0,configurable:!0}),PromiseList.prototype.ask=function(t){if(0!==this._list.length)return this._list[this._list.length-1].then(this.resolveInner.bind(this,t),this.rejectInner.bind(this,t)),this._list.push(t),this;this._list.push(t),this.resolveInner(t);for(var e=0,n=this._waiters;e<n.length;e++){var i=n[e];this.then(i[0],i[1])}return this},PromiseList.prototype.then=function(t,e){if(0<this._list.length){var n=this._list[this._list.length-1],i=null==e?this.catchInner.bind(this):e;n.then(t,i)}else this._waiters.push([t,e]);return this},PromiseList.prototype.unthen=function(t,e){o.error("PromiseList.unthen must be implemented!")},PromiseList.prototype.commit=function(){this.then(this._commit.bind(this,this),this._commit.bind(this,this))},PromiseList.prototype.resolveInner=function(t){var e=c.Utils.getNameFromInstance(t);if(!this.promiseHash[e])return o.warn("PromiseManager: There are no handlers for ["+e+"] promise."),void this.rejectInner(t,"PromiseManager: There are no handlers for ["+e+"] promise.");for(var n=0,i=this.promiseHash[e];n<i.length;n++){i[n][1].apply(this,[t])}},PromiseList.prototype.rejectInner=function(t,e){t.reject(e)},PromiseList.prototype.catchInner=function(t){o.error("PromiseList:catchInner",arguments)},PromiseList.a=null,PromiseList}();function promiseHashSort(t,e){return t[0]-e[0]}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ConsoleItem(t){this.timeClient=null,this.timeServer=null,0<t.length?this.setData(t):(this._data=null,this.dataCache=null)}return ConsoleItem.dateToString=function(t){function fillZero(t,e){for(var n=t.toString();n.length<e;)n="0"+n;return n}return fillZero(t.getHours(),2)+":"+fillZero(t.getMinutes(),2)+":"+fillZero(t.getSeconds(),2)+"."+fillZero(t.getMilliseconds(),3)},ConsoleItem.valueToStringUnlimited=function(t){var e="";switch(typeof t){case"object":try{e=JSON.stringify(t,null,4)}catch(t){e="Object [stringify error]"}break;case"string":e=t;break;case"undefined":e="undefined";break;case"function":case"number":case"boolean":default:e=t.toString()}return e},ConsoleItem.limitLogString=function(t,e){return void 0===e&&(e=null),null===e&&(e=ConsoleItem.MAX_LOG_SIZE),t.length>e?t.substr(0,e-3).concat("..."):t},ConsoleItem.prototype.setData=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0),this.dataCache=t.map(function(t){return ConsoleItem.valueToStringUnlimited(t)}).join(" "),n&&(this.dataCache=ConsoleItem.limitLogString(this.dataCache,e))},ConsoleItem.prototype.getStringData=function(){return this.dataCache},ConsoleItem.prototype.toString=function(){return"["+ConsoleItem.dateToString(this.timeClient)+"] ["+(this.timeServer?ConsoleItem.dateToString(this.timeServer):"null")+"] [#"+this.channel+"] "+this.dataCache},ConsoleItem.prototype.toHTMLRow=function(){return"<tr><td class="+this.type+"><pre>["+ConsoleItem.dateToString(this.timeClient)+"] ["+(this.timeServer?ConsoleItem.dateToString(this.timeServer):"null")+"] [#"+this.channel+"] "+this.getStringData()+"</pre></td></tr>"},ConsoleItem.MAX_LOG_SIZE=65536,ConsoleItem}();e.ConsoleItem=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(108)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RuntimeError(t,e){void 0===t&&(t=""),void 0===e&&(e=null);var n=i.call(this,t)||this;return n.message=t,n.code=e,n.type=null,n}return a(RuntimeError,i),RuntimeError}(n.BaseError);e.RuntimeError=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Monitor(){this.monitor=null,this.isMonitorActive=!1}return Monitor.prototype.init=function(){null===this.monitor&&(this.monitor=new Stats,this.monitor.showPanel(Monitor.ID_PANEL_MS),this.monitor.showPanel(Monitor.ID_PANEL_MEMORY),this.monitor.showPanel(Monitor.ID_PANEL_FPS),this.monitor.dom.style.display="none",this.monitor.dom.style.position="absolute",this.monitor.dom.style.top="50px",document.body.appendChild(this.monitor.dom))},Monitor.prototype.toggle=function(){this.isMonitorActive?this.hide():this.show()},Monitor.prototype.show=function(){this.isMonitorActive||this.monitor&&(this.isMonitorActive=!0,this.monitor.dom.style.display="",requestAnimationFrame(this.onRequestAnimationFrame.bind(this)))},Monitor.prototype.hide=function(){this.isMonitorActive&&this.monitor&&(this.isMonitorActive=!1,this.monitor.dom.style.display="none")},Monitor.prototype.onRequestAnimationFrame=function(){this.monitor.update(),this.isMonitorActive&&requestAnimationFrame(this.onRequestAnimationFrame.bind(this))},Monitor.ID_PANEL_FPS=0,Monitor.ID_PANEL_MS=1,Monitor.ID_PANEL_MEMORY=2,Monitor}();e.Monitor=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=createjs.RequestUtils,i=function(){function FilePathInfo(t,e){this._rawPath=t}return FilePathInfo.parse=function(t){return new FilePathInfo(t,n.parseURI(t))},Object.defineProperty(FilePathInfo.prototype,"rawPath",{get:function(){return this._rawPath},enumerable:!0,configurable:!0}),FilePathInfo}();e.FilePathInfo=i}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResourcesThemeTypes(){}return ResourcesThemeTypes.DEFAULT="default",ResourcesThemeTypes}();e.ResourcesThemeTypes=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(271),n(171)],void 0===(r=function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResourcesDescriptionsXMLParser(){}return ResourcesDescriptionsXMLParser.parse=function(t){var e={};if(t){var n=jQuery(t).find("theme");n&&n.each(this.jQueryParseThemes.bind(this,e))}return e},ResourcesDescriptionsXMLParser.jQueryParseThemes=function(t,e,n){var i=jQuery(n).attr("id"),r=t[i];null==r&&(t[(r=new a.ResourcesTheme(i)).id]=r);var o=jQuery(n).find("resource");o&&o.each(this.jQueryParseResource.bind(this,r))},ResourcesDescriptionsXMLParser.jQueryParseResource=function(t,e,n){var i=r.ResourcesFactory.create(n);i&&t.addResource(i)},ResourcesDescriptionsXMLParser}();e.ResourcesDescriptionsXMLParser=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function JavascriptResource(t){return e.call(this,t)||this}return a(JavascriptResource,e),JavascriptResource.prototype.setRawData=function(t){e.prototype.setRawData.call(this,t)},JavascriptResource}(n.Resource);e.JavascriptResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function TextResource(t){return e.call(this,t)||this}return a(TextResource,e),TextResource.prototype.setRawData=function(t){e.prototype.setRawData.call(this,t),this._text=t},Object.defineProperty(TextResource.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),TextResource}(n.Resource);e.TextResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SoundResource(){return null!==t&&t.apply(this,arguments)||this}return a(SoundResource,t),SoundResource}(n.Resource);e.SoundResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function FontResource(t){return e.call(this,t)||this}return a(FontResource,e),Object.defineProperty(FontResource.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0}),FontResource}(n.Resource);e.FontResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function SpineResource(t){var e=n.call(this,t)||this;return e._skeleton=null,e._atlas=null,e._textures=[],e}return a(SpineResource,n),SpineResource.prototype.setRawData=function(t){throw new Error("SpineResource.setRawData not available!")},Object.defineProperty(SpineResource.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0}),Object.defineProperty(SpineResource.prototype,"skeleton",{get:function(){return this._skeleton},set:function(t){this._skeleton=t,this.updateLoaded()},enumerable:!0,configurable:!0}),Object.defineProperty(SpineResource.prototype,"atlas",{get:function(){return this._atlas},set:function(t){this._atlas=t,this.updateLoaded()},enumerable:!0,configurable:!0}),SpineResource.prototype.addTexture=function(t){this._textures.push(t),this.updateLoaded()},SpineResource.prototype.updateLoaded=function(){this._loaded=null!==this._skeleton&&this._skeleton.descriptor.id===this.descriptor.skeleton.id&&null!==this._atlas&&this._atlas.descriptor.id===this.descriptor.atlas.id&&this._textures.length===this.descriptor.getTextures().length},Object.defineProperty(SpineResource.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),SpineResource}(n.Resource);e.SpineResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(91),n(66),n(274),n(534),n(535),n(5),n(536)],void 0===(r=function(t,e,h,_,f,y,m,v,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResourceDescriptorsFactory(){}return ResourceDescriptorsFactory.create=function(t){var e=f.ResourcesUtils.getResourceType(t.getAttribute("type")),n=t.getAttribute("id"),i=t.hasAttribute("path")?t.getAttribute("path"):null,r=v.Utils.parseInt(t.getAttribute("priority"),0);switch(e){case _.ResourceType.SPRITESHEET:var o=new b.SpritesheetResourceDescriptor(n,r);return o.data=ResourceDescriptorsFactory.getChildElement(t,"data"),o.texture=ResourceDescriptorsFactory.getChildElement(t,"texture"),o;case _.ResourceType.BITMAPFONT:var a=new b.SpritesheetResourceDescriptor(n,r);return a.data=ResourceDescriptorsFactory.getChildElement(t,"data"),a.texture=ResourceDescriptorsFactory.getChildElement(t,"texture"),a;case _.ResourceType.SPINE:var s=new y.SpineResourceDescriptor(n,r);s.skeleton=ResourceDescriptorsFactory.getChildElement(t,"skeleton"),s.atlas=ResourceDescriptorsFactory.getChildElement(t,"atlas");for(var c=t.getElementsByTagName("texture"),u=0;u<c.length;u++)s.addTexture(ResourceDescriptorsFactory.create(c[u]));return s;case _.ResourceType.FONT:var p=new m.FontResourceDescriptor(n,r),l=t.getElementsByTagName("css");if(0===l.length||1<l.length)throw new Error("ResourceDescriptorsFactory.create: only 1 css allowed in font");var d=l[0];return p.css=ResourceDescriptorsFactory.create(d),p}return new h.ResourceDescriptor(n,i,e,r,t.hasAttribute("hash")?t.getAttribute("hash"):null,t.hasAttribute("size")?v.Utils.parseInt(t.getAttribute("size"),null):null,t.hasAttribute("mtime")?t.getAttribute("mtime"):null,!!t.hasAttribute("local")&&!!t.getAttribute("local"))},ResourceDescriptorsFactory.getChildElement=function(t,e){var n=t.getElementsByTagName(e);if(0===n.length||1<n.length)throw new Error("ResourceDescriptorsFactory.create: only one "+e+" element allowed.");var i=n[0];return ResourceDescriptorsFactory.create(i)},ResourceDescriptorsFactory}();e.ResourceDescriptorsFactory=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(91),n(66)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SpineResourceDescriptor(t,e){var n=i.call(this,t,t,r.ResourceType.SPINE,e)||this;return n._textures=[],n}return a(SpineResourceDescriptor,i),Object.defineProperty(SpineResourceDescriptor.prototype,"skeleton",{get:function(){return this._skeleton},set:function(t){this._skeleton=t},enumerable:!0,configurable:!0}),Object.defineProperty(SpineResourceDescriptor.prototype,"atlas",{get:function(){return this._atlas},set:function(t){this._atlas=t},enumerable:!0,configurable:!0}),SpineResourceDescriptor.prototype.addTexture=function(t){this._textures.push(t)},SpineResourceDescriptor.prototype.getTextures=function(){return this._textures.concat()},SpineResourceDescriptor.prototype.containsTexture=function(t){for(var e=0,n=this._textures;e<n.length;e++){if(n[e].id===t)return!0}return!1},SpineResourceDescriptor}(n.ResourceDescriptor);e.SpineResourceDescriptor=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(91),n(66)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function FontResourceDescriptor(t,e){return n.call(this,t,t,i.ResourceType.FONT,e)||this}return a(FontResourceDescriptor,n),Object.defineProperty(FontResourceDescriptor.prototype,"css",{get:function(){return this._css},set:function(t){this._css=t},enumerable:!0,configurable:!0}),FontResourceDescriptor}(n.ResourceDescriptor);e.FontResourceDescriptor=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(91),n(66)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SpritesheetResourceDescriptor(t,e){var n=i.call(this,t,t,r.ResourceType.SPRITESHEET,e)||this;return n._texture=null,n._data=null,n}return a(SpritesheetResourceDescriptor,i),Object.defineProperty(SpritesheetResourceDescriptor.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(SpritesheetResourceDescriptor.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t},enumerable:!0,configurable:!0}),SpritesheetResourceDescriptor}(n.ResourceDescriptor);e.SpritesheetResourceDescriptor=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function SpritesheetResource(t){var e=n.call(this,t)||this;return e._data=null,e._texture=null,e}return a(SpritesheetResource,n),SpritesheetResource.prototype.setRawData=function(t){throw new Error("SpineResource.setRawData not available!")},Object.defineProperty(SpritesheetResource.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0}),Object.defineProperty(SpritesheetResource.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.updateLoaded()},enumerable:!0,configurable:!0}),Object.defineProperty(SpritesheetResource.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this.updateLoaded()},enumerable:!0,configurable:!0}),SpritesheetResource.prototype.updateLoaded=function(){this._loaded=null!==this._data&&this._data.descriptor.id===this.descriptor.data.id},Object.defineProperty(SpritesheetResource.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),SpritesheetResource}(n.Resource);e.SpritesheetResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function CursorResource(t){var e=n.call(this,t)||this;return e._loaded=!0,e}return a(CursorResource,n),CursorResource}(n.Resource);e.CursorResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function BitmapFontResource(t){var e=n.call(this,t)||this;return e._data=null,e}return a(BitmapFontResource,n),BitmapFontResource.prototype.setRawData=function(t){throw new Error("SpineResource.setRawData not available!")},Object.defineProperty(BitmapFontResource.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!0,configurable:!0}),Object.defineProperty(BitmapFontResource.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.updateLoaded()},enumerable:!0,configurable:!0}),Object.defineProperty(BitmapFontResource.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this.updateLoaded()},enumerable:!0,configurable:!0}),BitmapFontResource.prototype.updateLoaded=function(){this._loaded=null!==this._data&&this._data.descriptor.id===this.descriptor.data.id},BitmapFontResource}(n.Resource);e.BitmapFontResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(60)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function DmgResource(t){return e.call(this,t)||this}return a(DmgResource,e),DmgResource.prototype.setRawData=function(t){e.prototype.setRawData.call(this,t)},DmgResource}(n.Resource);e.DmgResource=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6),n(92)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.BaseEventTarget,r=function(r){function LoadPackPromise(t,e,n){void 0===e&&(e=!0);var i=r.call(this)||this;return i._logError=e,i._showLoading=n,i._resourcesIds=i.getUnique(t).concat(),i.eventTarget=new o,i}return a(LoadPackPromise,r),Object.defineProperty(LoadPackPromise.prototype,"resourcesIds",{get:function(){return this._resourcesIds},enumerable:!0,configurable:!0}),Object.defineProperty(LoadPackPromise.prototype,"logError",{get:function(){return this._logError},enumerable:!0,configurable:!0}),Object.defineProperty(LoadPackPromise.prototype,"showLoading",{get:function(){return this._showLoading},enumerable:!0,configurable:!0}),LoadPackPromise.prototype.getUnique=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n];-1===e.indexOf(r)&&e.push(r)}return e},LoadPackPromise.prototype.resolve=function(t){this.eventTarget.dispatchEvent(new i.ResourcesPackEvent(i.ResourcesPackEvent.LOAD_COMPLETED,t)),r.prototype.resolve.call(this,t)},LoadPackPromise}(n.BasePromise);e.LoadPackPromise=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(174),n(274),n(109)],void 0===(r=function(t,e,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=createjs.LoadQueue,r=function(e){function JavascriptLoader(){var t=e.call(this)||this;return t.RELOAD_TIMEOUT=5e3,t.LOAD_TRY_COUNT=3,t._queueFails={},t._loadQueue=new i(!1),t._loadQueue.stopOnError=!1,t._loadQueue.addEventListener("fileload",t.onFileLoad.bind(t)),t._loadQueue.addEventListener("error",t.onFileError.bind(t)),t}return s(JavascriptLoader,e),JavascriptLoader.prototype.load=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],r={src:i.descriptor.src,type:o.ResourcesUtils.getLoadType(i.descriptor.type),resource:i,crossOrigin:!0};this._loadQueue.loadFile(r,!0)}},JavascriptLoader.prototype.onFileLoad=function(t){var e=t.item.resource;e.setRawData(t.result);var n=0;this._queueFails.hasOwnProperty(e.descriptor.id)&&(n=this._queueFails[e.descriptor.id],delete this._queueFails[e.descriptor.id]);var i=new a.ResourceLoaderEvent(a.ResourceLoaderEvent.LOADED,e);i.failsCount=n,this.dispatchEvent(i)},JavascriptLoader.prototype.onFileError=function(t){var e=this,n=t.data.resource,i=0;if((i=this._queueFails[n.descriptor.id]?++this._queueFails[n.descriptor.id]:this._queueFails[n.descriptor.id]=1)<this.LOAD_TRY_COUNT)setTimeout(function(){return e.load([n])},this.RELOAD_TIMEOUT);else{var r=new a.ResourceLoaderEvent(a.ResourceLoaderEvent.ERROR,n,new Error(t.title+": "+t.message));r.failsCount=i,this.dispatchEvent(r)}},JavascriptLoader}(n.ResourceLoader);e.JavascriptLoader=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(174),n(109),n(171),n(17)],void 0===(r=function(t,e,n,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function FontLoader(t){var e=n.call(this)||this;return e._resources={},e._loader=t,e._loader.addEventListener(i.ResourceLoaderEvent.LOADED,e.onCssResourceLoaded.bind(e)),e._loader.addEventListener(i.ResourceLoaderEvent.ERROR,e.onCssResourceLoadError.bind(e)),e}return s(FontLoader,n),FontLoader.prototype.load=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];this._resources[i.descriptor.id]=i;var r=o.ResourcesFactory.createResource(i.descriptor.css);this._loader.load([r])}},FontLoader.prototype.onCssResourceLoaded=function(t){for(var e in this._resources){var n=this._resources[e];if(n.descriptor.css.id===t.resource.descriptor.id){var i=document.getElementById("fontStyle"),r=document.createTextNode(t.resource.getRawData().replace(/{RESOURCES_HOST}/g,a.Services.resources?a.Services.resources.getResourceBaseUrl():""));i.appendChild(r),WebFont.load({custom:{families:[n.descriptor.id]},fontactive:this.fontsLoaded.bind(this),fontinactive:this.loadError.bind(this),timeout:6e4});break}}},FontLoader.prototype.onCssResourceLoadError=function(t){for(var e in this._resources){var n=this._resources[e];n.descriptor.css.id===t.resource.descriptor.id&&(this.dispatchEvent(new i.ResourceLoaderEvent(i.ResourceLoaderEvent.ERROR,n)),delete this._resources[t.resource.descriptor.id],t.stopPropagation())}},FontLoader.prototype.fontsLoaded=function(t,e){var n=this._resources[t];n&&(n.setRawData(t),this.dispatchEvent(new i.ResourceLoaderEvent(i.ResourceLoaderEvent.LOADED,n)),delete this._resources[t])},FontLoader.prototype.loadError=function(t,e){var n=this._resources[t];n&&(this.dispatchEvent(new i.ResourceLoaderEvent(i.ResourceLoaderEvent.ERROR,n)),delete this._resources[t])},FontLoader}(n.ResourceLoader);e.FontLoader=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(174),n(109),n(60),n(66),n(171),n(17),n(275)],void 0===(r=function(t,e,n,h,i,_,d,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function PIXIProviderLoader(){var t=e.call(this)||this;return t._waitingResources=[],t._waitingSpineResources=[],t._waitingSpritesheetsResources=[],t._waitingBitmapfontsResources=[],PIXI.Loader.shared.onProgress.add(t.onFileProgress.bind(t)),PIXI.Loader.shared.onLoad.add(t.onFileLoaded.bind(t)),PIXI.Loader.shared.onError.add(t.onFileError.bind(t)),t}return s(PIXIProviderLoader,e),PIXIProviderLoader.prototype.setBaseUrl=function(t){PIXI.Loader.shared.baseUrl=t},PIXIProviderLoader.prototype.load=function(t){this._waitingResources=this._waitingResources.concat(t),this.loadProcess()},PIXIProviderLoader.prototype.loadProcess=function(){if(!PIXI.Loader.shared.loading&&0!==this._waitingResources.length){for(;0<this._waitingResources.length;){var t=this._waitingResources.shift();switch(t.descriptor.type){case _.ResourceType.SPINE:this._waitingSpineResources.push(t);var e=t.descriptor,n=d.ResourcesFactory.createResource(e.skeleton);n.spineAtlas=!1,this.addToLoad(n);var i=d.ResourcesFactory.createResource(e.atlas);i.spineAtlas=!1,this.addToLoad(i);for(var r=void 0,o=0,a=e.getTextures();o<a.length;o++){var s=a[o];(r=d.ResourcesFactory.createResource(s)).spineAtlas=!1,this.addToLoad(r)}break;case _.ResourceType.SPRITESHEET:this._waitingSpritesheetsResources.push(t);var c=t.descriptor,u=d.ResourcesFactory.createResource(c.data);u.spineAtlas=!1,this.addToLoad(u);break;case _.ResourceType.BITMAPFONT:this._waitingBitmapfontsResources.push(t);var p=t.descriptor,l=d.ResourcesFactory.createResource(p.data);l.spineAtlas=!1,this.addToLoad(l);break;default:t.spineAtlas=!1,this.addToLoad(t)}}PIXI.Loader.shared.load(this.onLoadCompleted.bind(this))}},PIXIProviderLoader.prototype.addToLoad=function(t){t.descriptor.type===_.ResourceType.IMAGE?PIXI.Loader.shared.add(t.descriptor.id,t.descriptor.src,{metadata:t,loadType:2,crossOrigin:!0}):PIXI.Loader.shared.add(t.descriptor.id,t.descriptor.src,{metadata:t,crossOrigin:!0})},PIXIProviderLoader.prototype.onFileProgress=function(t,e){this.checkMetadata(e)&&this.dispatchEvent(new o.ResourceLoaderProgressEvent(o.ResourceLoaderProgressEvent.PROGRESS,e.metadata,{progress:t.progress,total:100}))},PIXIProviderLoader.prototype.onLoadCompleted=function(t,e){this.loadProcess()},PIXIProviderLoader.prototype.onFileLoaded=function(t,e){if(this.checkMetadata(e)){var n=e.metadata;switch(n.descriptor.type){case _.ResourceType.SOUND:n.setRawData(e.sound);break;case _.ResourceType.TEXT:n.setRawData(e.data);break;case _.ResourceType.XML:n.setRawData(e);break;default:n.setRawData(e.data)}this.dispatchEvent(new h.ResourceLoaderEvent(h.ResourceLoaderEvent.LOADED,n));for(var i=0,r=this._waitingSpineResources;i<r.length;i++){var o=r[i];if(o.descriptor.skeleton.id===n.descriptor.id?o.skeleton=n:o.descriptor.atlas.id===n.descriptor.id?o.atlas=n:o.descriptor.containsTexture(n.descriptor.id)&&o.addTexture(n),o.loaded){var a=this._waitingSpineResources.indexOf(o);this._waitingSpineResources.splice(a,1),this.dispatchEvent(new h.ResourceLoaderEvent(h.ResourceLoaderEvent.LOADED,o))}}for(var s=0,c=this._waitingSpritesheetsResources;s<c.length;s++){var u=c[s];if(u.descriptor.data.id===n.descriptor.id&&(u.data=n),u.loaded){a=this._waitingSpritesheetsResources.indexOf(u);this._waitingSpritesheetsResources.splice(a,1),this.dispatchEvent(new h.ResourceLoaderEvent(h.ResourceLoaderEvent.LOADED,u))}}for(var p=0,l=this._waitingBitmapfontsResources;p<l.length;p++){var d=l[p];if(d.descriptor.data.id===n.descriptor.id&&(d.data=n),d.loaded){a=this._waitingBitmapfontsResources.indexOf(d);this._waitingBitmapfontsResources.splice(a,1),this.dispatchEvent(new h.ResourceLoaderEvent(h.ResourceLoaderEvent.LOADED,d))}}}},PIXIProviderLoader.prototype.onFileError=function(t,e,n){if(this.checkMetadata(n)){var i=n.metadata;this.dispatchEvent(new h.ResourceLoaderEvent(h.ResourceLoaderEvent.ERROR,n.metadata,t)),delete PIXI.Loader.shared.resources[i.descriptor.src]}else r.Services.debug.addError("PIXIProviderLoader","onFileError",t);this.loadProcess()},PIXIProviderLoader.prototype.checkMetadata=function(t){return t&&t.metadata&&t.metadata instanceof i.Resource},PIXIProviderLoader}(n.ResourceLoader);e.PIXIProviderLoader=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ErrorMessageConstants(){}return ErrorMessageConstants.CAN_NOT_LOAD_RESOURCE="Can not load resource",ErrorMessageConstants.ON_LOAD_FILE_ERROR="onLoadFileError",ErrorMessageConstants}();e.ErrorMessageConstants=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(279)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ViewHandleOnShown(t){var e=n.call(this)||this;return e._handle=t,e._captured=e._shown=!1,e}return a(ViewHandleOnShown,n),ViewHandleOnShown.prototype.capture=function(){if(this._shown)throw Error("OnShown already shown!");if(this._captured)throw Error("OnShown already captured!");return this._captured=!0,this},ViewHandleOnShown.prototype.complete=function(){if(this._shown)throw Error("OnShown already shown!");if(!this._captured)throw Error("OnShown not captured!");this._captured=!1,this._shown=!0,this.dispatchEvent(new i.ViewHandleOnShownEvent(i.ViewHandleOnShownEvent.SHOWN,this._handle))},Object.defineProperty(ViewHandleOnShown.prototype,"captured",{get:function(){return this._captured},enumerable:!0,configurable:!0}),Object.defineProperty(ViewHandleOnShown.prototype,"shown",{get:function(){return this._shown},enumerable:!0,configurable:!0}),ViewHandleOnShown}(uipixi.BaseEventTarget);e.ViewHandleOnShown=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(277),n(548),n(175),n(8),n(5)],void 0===(r=function(t,e,E,A,M,D,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.ListenerPriority,C=uipixi.UIContainer,T=uipixi.UIList,a=uipixi.UIEvent,n=function(){function MediatorManager(t,e){this._classMediatorsMap=t,this._handlesHash=e,this._mediatorsHash=new core.Map}return MediatorManager.prototype.initialize=function(t,e){for(var n=0,i=t.children;n<i.length;n++){var r=i[n];r.addEventListener(a.CHILD_ADDED,this.onChildAdded.bind(this,[e],null)),r.addEventListener(a.CHILD_REMOVED,this.onChildRemoved.bind(this),o.HIGH)}},MediatorManager.prototype.onChildAdded=function(t,e,n){if(!this.suspended){var i=n.data;this.addMediator(i,t,e)}},MediatorManager.prototype.onChildRemoved=function(t){if(!this.suspended){var e=t.data;this.removeMediator(e)}},MediatorManager.prototype.addMediator=function(t,e,n){var i=this._handlesHash.get(t)||new M.ViewHandle(t,new D.ViewContext),r=new A.ViewHandleNode(i);if(i.viewContext.node=r,n&&n.addChild(r),t.parent&&t.parent instanceof T){var o=t.parent;i.viewContext.showData=o.getItemByDisplayObject(t).data}var a=this._classMediatorsMap.get(I.Utils.getNameFromInstance(t));if(a)for(var s=0,c=a;s<c.length;s++){var u=c[s];this.initializeMediator(u.mediator,i,void 0)}for(var p=[],l=0,d=e;l<d.length;l++){var h=d[l],_=h.getChildByName(t.name);if(_){for(var f=0,y=this.getApproved(_.mediatorConfigs,i);f<y.length;f++){var m=y[f];this.initializeMediator(m.mediator,i,m.data)}p.push(_)}var v=h.getChildByName(E.MediatorPointer.ALL);if(v){for(var b=0,g=this.getApproved(v.mediatorConfigs,i);b<g.length;b++){m=g[b];this.initializeMediator(m.mediator,i,m.data)}p.push(v)}}var w=t instanceof C?t:null;if(w){if(0<p.length)for(var O=0,S=w.children;O<S.length;O++){var P=S[O];this.addMediator(P,p,r)}this.addContainerListeners(w,p,r)}},MediatorManager.prototype.getApproved=function(t,n){return t.filter(function(e){return e.guards.every(function(t){return new t(n,e.data).approve()})})},MediatorManager.prototype.initializeMediator=function(t,e,n){var i=new t(n);i.initialize(e);var r=this._mediatorsHash.get(e.displayObject);r||(r=new Array,this._mediatorsHash.set(e.displayObject,r)),r.push(i)},MediatorManager.prototype.addContainerListeners=function(t,e,n){t.addEventListener(a.CHILD_ADDED,this.onChildAdded.bind(this,e,n)),t.addEventListener(a.CHILD_REMOVED,this.onChildRemoved.bind(this))},MediatorManager.prototype.removeMediator=function(t){var e=[t];t instanceof C&&(e=e.concat(t.allChildren));for(var n=0,i=e;n<i.length;n++){var r=i[n];r instanceof C&&this.removeContainerListeners(r),this.destroyMediators(r),this._handlesHash.has(r)&&this._handlesHash.delete(r)}},MediatorManager.prototype.destroyMediators=function(t){var e=this._mediatorsHash.get(t);if(e){for(var n=0,i=e;n<i.length;n++){i[n].destroy()}this._mediatorsHash.delete(t)}},MediatorManager.prototype.removeContainerListeners=function(t){t.removeEventListener(a.CHILD_ADDED,this.onChildAdded.bind(this)),t.removeEventListener(a.CHILD_REMOVED,this.onChildRemoved.bind(this))},MediatorManager}();e.MediatorManager=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(278)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ViewHandleNode(t){var e=n.call(this)||this;return e._handle=t,e}return a(ViewHandleNode,n),ViewHandleNode.prototype.addChild=function(t){return t._parent=this,n.prototype.addChild.call(this,t)},Object.defineProperty(ViewHandleNode.prototype,"handle",{get:function(){return this._handle},enumerable:!0,configurable:!0}),Object.defineProperty(ViewHandleNode.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(ViewHandleNode.prototype,"root",{get:function(){for(var t=this;null!=t.parent;)t=t.parent;return t},enumerable:!0,configurable:!0}),ViewHandleNode}(n.Node);e.ViewHandleNode=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Response(t,e){this._data=t,this._status=e}return Response.prototype.assignRequest=function(t){this._request=t},Object.defineProperty(Response.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),Object.defineProperty(Response.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(Response.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Response}();e.Response=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.NetworkErrorType||(e.NetworkErrorType={}))[n.UNKNOWN=0]="UNKNOWN",n[n.TIMEOUT=1]="TIMEOUT",n[n.ERROR=2]="ERROR",n[n.ABORT=3]="ABORT",n[n.PARSEERROR=4]="PARSEERROR"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function NetworkQueue(){this._queue=[],this._activeRequestLimit=1,this._activeRequests=[]}return NetworkQueue.prototype.push=function(t){this._queue.push(t)},NetworkQueue.prototype.isReadyToSend=function(){return 0<this._queue.length&&this._activeRequests.length<this._activeRequestLimit},NetworkQueue.prototype.send=function(){var t=this._queue.shift();return this._activeRequests.push(t),t},NetworkQueue.prototype.complete=function(t){var e=this._activeRequests.indexOf(t);-1!==e&&this._activeRequests.splice(e,1)},NetworkQueue}();e.NetworkQueue=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5),n(17),n(28)],void 0===(r=function(t,e,r,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ServerProtocol(){this.params={},this.action="",this.controller=""}return ServerProtocol.calcParamsArraySign=function(t){var e=new core.Map;for(var n in t){var i=t[n];switch(typeof i){case"object":e.set(n,null!==i?ServerProtocol.calcParamsArraySign(i):"");break;case"undefined":case"boolean":case"number":case"string":e.set(n,String(i));break;case"function":o.Services.debug.addError("server","Signed data for request is function: key = "+n)}}var r=[];return Object.keys(t).sort().forEach(function(t){r.push(t+"="+e.get(t))}),console.log(r),md5(r.join("&"))},ServerProtocol.prototype.generateRequestBody=function(){var t=this.getBody();return t.sign=this.generateSig(t),t},ServerProtocol.prototype.getBody=function(){var t={};return t.params=this.params,t.uid=n.Core.instance.config.userId,t.suid=n.Core.instance.config.userIdPlatform,t.aid=n.Core.instance.config.applicationId,t.authKey=n.Core.instance.config.authKey,t.sessionKey=n.Core.instance.config.sessionKey,t.version=n.Core.instance.config.version,t.clientPlatform="js",t},ServerProtocol.prototype.generateSig=function(t){var e=r.Utils.cloneObject(t.params||{}),n={suid:1,uid:1,aid:1,authKey:1,sessionKey:1,clientPlatform:0,clientVersion:0};for(var i in n)t.hasOwnProperty(i)?e[i]=t[i]:1===n[i]&&(e[i]="",o.Services.debug.addError("server","Signed data for request is not enough: param `"+i+"` not found."));return this.fillRequestDataForSign(e),ServerProtocol.calcParamsArraySign(e)},ServerProtocol.prototype.fillRequestDataForSign=function(t){t.action=this.action.toLowerCase(),t.controller=this.controller.toLowerCase()},ServerProtocol}();e.ServerProtocol=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function RawExpression(t){this.index=0,this.text=t.replace(/\s/gi,""),this.length=this.text.length}return RawExpression.prototype.getText=function(){return this.text},RawExpression.prototype.getIndex=function(){return this.index},RawExpression.prototype.isEmpty=function(){return null===this.peekChar()},RawExpression.prototype.peekChar=function(){return this.index>=this.length?null:this.text[this.index]},RawExpression.prototype.consumeChar=function(){return this.index>=this.length?null:this.text[this.index++]},RawExpression.prototype.consumeString=function(t){if(this.index>=this.length)return null;var e=null;if("string"==typeof t)(e=this.text.substring(this.index,this.index+t.length))!==t&&(e=null);else{var n=this.text.substring(this.index).match(t);n&&n[0]&&(e=n[0])}return null!==e&&(this.index+=e.length),e},RawExpression.prototype.reconsumeString=function(t){this.index-=t.length},RawExpression}();e.RawExpression=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Token(t,e){this._value=t,this._type=e}return Object.defineProperty(Token.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(Token.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Token}();e.Token=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Expression(){this.tokens=[]}return Expression.prototype.addToken=function(t){this.tokens.push(t)},Expression.prototype.getTokens=function(){return this.tokens},Expression.prototype.getTokensCount=function(){return this.tokens.length},Expression}();e.Expression=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.ExpressionList||(e.ExpressionList={})).sum=function sum(t){t.push(t.pop()+t.pop())},n.minus=function minus(t){var e=t.pop(),n=t.pop();t.push(n-e)},n.mult=function mult(t){t.push(t.pop()*t.pop())},n.division=function division(t){var e=t.pop(),n=t.pop();t.push(n/e)},n.pow=function pow(t){var e=t.pop(),n=t.pop();t.push(Math.pow(n,e))},n.mod=function mod(t){var e=t.pop(),n=t.pop();t.push(n%e)},n.residue_exists=function residue_exists(t){var e=t.pop(),n=t.pop();t.push(0<n%e?0:1)},n.ceil=function ceil(t){t.push(Math.ceil(t.pop()))},n.floor=function floor(t){t.push(Math.floor(t.pop()))},n.max=function max(t){t.push(Math.max(t.pop(),t.pop()))},n.min=function min(t){t.push(Math.min(t.pop(),t.pop()))},n.sin=function sin(t){t.push(Math.sin(t.pop()))},n.round=function round(t){t.push(Math.round(t.pop()))},n.compareLeft=function compareLeft(t){var e=t.pop()<t.pop()?1:0;t.push(e)},n.compareRight=function compareRight(t){var e=t.pop(),n=t.pop()<e?1:0;t.push(n)},n.compare=function compare(t){var e=t.pop()==t.pop()?1:0;t.push(e)}}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Operator(t,e,n,i){this._value=t,this._precedence=e,this._associativity=i,this._executor=n}return Object.defineProperty(Operator.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(Operator.prototype,"precedence",{get:function(){return this._precedence},enumerable:!0,configurable:!0}),Object.defineProperty(Operator.prototype,"associativity",{get:function(){return this._associativity},enumerable:!0,configurable:!0}),Object.defineProperty(Operator.prototype,"executor",{get:function(){return this._executor},enumerable:!0,configurable:!0}),Operator}();e.Operator=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.OperatorAssociativity||(e.OperatorAssociativity={}))[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",(i=e.TokenType||(e.TokenType={}))[i.NUMBER=1]="NUMBER",i[i.OPERATOR=2]="OPERATOR",i[i.COMMA=3]="COMMA",i[i.LEFT_BRAKET=4]="LEFT_BRAKET",i[i.RIGHT_BRACKET=5]="RIGHT_BRACKET",i[i.FUNCTION=6]="FUNCTION"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(e.IDataFilterConfig||(e.IDataFilterConfig={})).fromString=function fromString(t){return t.split(";").map(function(t){var e=t.split("=");return{type:e[0],values:e[1].split(",")}},this)}}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SocialPromise(t,e){var n=i.call(this)||this;return n.response=new t,n.request=e,n}return a(SocialPromise,i),Object.defineProperty(SocialPromise.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),SocialPromise}(n.BasePromise);e.SocialPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(132)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AppFriendListResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(AppFriendListResponseVK,t),AppFriendListResponseVK.prototype.parse=function(t){if(!Array.isArray(t))return!1;for(var e=0,n=t;e<n.length;e++){var i=n[e];this.friendList.push(i.toString())}return!0},AppFriendListResponseVK}(n.FriendListResponse);e.AppFriendListResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(134)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GroupMemberResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(GroupMemberResponseVK,t),GroupMemberResponseVK.prototype.parse=function(t){return this.status=n.SOCIAL_GROUP_STATUS.UNDEFINED,null!==t&&"object"==typeof t&&(t.hasOwnProperty("member")&&(parseInt(t.member)?this.status=n.SOCIAL_GROUP_STATUS.MEMBER:this.status=n.SOCIAL_GROUP_STATUS.NON_MEMBER),this.status!==n.SOCIAL_GROUP_STATUS.MEMBER&&t.request&&(this.status=n.SOCIAL_GROUP_STATUS.REQUESTED),!0)},GroupMemberResponseVK}(n.GroupMemberResponse);e.GroupMemberResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(179),n(79)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function SettingsResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(SettingsResponseVK,t),SettingsResponseVK.prototype.parse=function(t){if("number"!=typeof t)return!1;var e=t;return 0<(256&e)&&this.permissions.push(i.PlatformPermission.QUICK_MENU),0<(4&e)&&this.permissions.push(i.PlatformPermission.PHOTO),0<(4194304&e)&&this.permissions.push(i.PlatformPermission.EMAIL),0<(1024&e)&&this.permissions.push(i.PlatformPermission.SET_STATUS),!0},SettingsResponseVK}(n.SettingsResponse);e.SettingsResponseVK=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(290),n(291)],void 0===(r=function(t,e,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AlbumsResponseVK(){return null!==t&&t.apply(this,arguments)||this}return s(AlbumsResponseVK,t),AlbumsResponseVK.prototype.parse=function(t){if(null===t||"object"!=typeof t)return!1;var e=t.items;if(!Array.isArray(e))return!1;for(var n=0,i=e;n<i.length;n++){var r=i[n],o=a.AlbumParser.parse(r);null!==o&&this.albums.push(o)}return!0},AlbumsResponseVK}(n.AlbumsResponse);e.AlbumsResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(293),n(291)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function AlbumResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(AlbumResponseVK,t),AlbumResponseVK.prototype.parse=function(t){return null!==t&&"object"==typeof t&&(this.album=i.AlbumParser.parse(t),!0)},AlbumResponseVK}(n.AlbumResponse);e.AlbumResponseVK=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function UploadServerResponseVK(){var t=null!==e&&e.apply(this,arguments)||this;return t.uploadUrl=null,t}return a(UploadServerResponseVK,e),UploadServerResponseVK.prototype.parse=function(t){return"object"==typeof t&&(t.hasOwnProperty("upload_url")&&"string"==typeof t.upload_url&&(this.uploadUrl=t.upload_url),!0)},UploadServerResponseVK}(n.PlatformResponse);e.UploadServerResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(568),n(569)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function PhotosResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(PhotosResponseVK,t),PhotosResponseVK.prototype.parse=function(t){if(!Array.isArray(t))return!1;for(var e in this.photos=[],t)this.photos.push(i.PhotoParser.parse(t[e]));return!0},PhotosResponseVK}(n.PhotosResponse);e.PhotosResponseVK=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PhotosResponse(){return null!==t&&t.apply(this,arguments)||this}return a(PhotosResponse,t),PhotosResponse}(n.PlatformResponse);e.PhotosResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(180),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function PhotoParser(){}return PhotoParser.parse=function(t){if(null===t||"object"!=typeof t)return null;var e=new n.PhotoEntity;return e.albumId=i.Utils.parseInt(t.album_id),e.id=t.id,e.userId=t.user_id,e.ownerId=t.owner_id,e.text=t.text,e.date=i.Utils.parseInt(t.date),e},PhotoParser}();e.PhotoParser=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(181),n(182)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function UserResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(UserResponseVK,t),UserResponseVK.prototype.parse=function(t){return"object"==typeof t&&(!!Array.isArray(t)&&(0!==t.length&&(this.user=i.UserParser.parse(t[0]),!0)))},UserResponseVK}(n.UserResponse);e.UserResponseVK=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(135),n(182)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UsersResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(UsersResponseVK,t),UsersResponseVK.prototype.parse=function(t){if(!Array.isArray(t))return!1;for(var e=0,n=t;e<n.length;e++){var i=n[e],r=o.UserParser.parse(i);null!==r&&this.users.push(r)}return!0},UsersResponseVK.prototype.traceData=function(t){if(!Array.isArray(t))return t;for(var e="",n=0,i=t;n<i.length;n++){var r=i[n];e+=r.id+" "+r.first_name+" "+r.last_name+"\n"}return e},UsersResponseVK}(n.UsersResponse);e.UsersResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(296)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SocialRequestVkAPI(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="API",t}return a(SocialRequestVkAPI,e),SocialRequestVkAPI}(n.SocialRequestVK);e.SocialRequestVkAPI=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(135),n(182)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FriendsResponseVK(){return null!==t&&t.apply(this,arguments)||this}return a(FriendsResponseVK,t),FriendsResponseVK.prototype.parse=function(t){if("object"!=typeof t)return!1;if("object"!=typeof(t=t.items))return!1;if(!Array.isArray(t))return!1;for(var e=0,n=t;e<n.length;e++){var i=n[e],r=o.UserParser.parse(i);null!==r&&this.users.push(r)}return!0},FriendsResponseVK.prototype.traceData=function(t){if(!Array.isArray(t.items))return t;for(var e="",n=0,i=t.items;n<i.length;n++){var r=i[n];e+=r.id+" "+r.first_name+" "+r.last_name+"\n"}return e},FriendsResponseVK}(n.UsersResponse);e.FriendsResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.PlatformErrorCode||(e.PlatformErrorCode={}))[n.UNKNOWN=0]="UNKNOWN",n[n.WALLPOST_DENIED=1]="WALLPOST_DENIED"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function CheckOfferResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.result=!1,t}return a(CheckOfferResponse,e),CheckOfferResponse.prototype.parse=function(t){return t&&(this.result=void 0!==t.result&&t.result,this.start_link=t.start_link,this.reason=t.reason),!0},CheckOfferResponse}(n.PlatformResponse);e.CheckOfferResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function GetActiveOffersResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t.offers=[],t}return a(GetActiveOffersResponse,e),GetActiveOffersResponse.prototype.parse=function(t){if(t&&t.items){for(var e=0,n=t.items;e<n.length;e++){var i=n[e];this.offers.push(i)}return!0}return!0},GetActiveOffersResponse}(n.PlatformResponse);e.GetActiveOffersResponse=i,(e.OfferLinkType||(e.OfferLinkType={})).GROUP="group"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function PromoResponseVK(){var t=null!==e&&e.apply(this,arguments)||this;return t.isResponse=!1,t}return a(PromoResponseVK,e),PromoResponseVK.prototype.parse=function(t){return"object"!=typeof t&&(this.isResponse=1===parseInt(t),!0)},PromoResponseVK}(n.PlatformResponse);e.PromoResponseVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,F=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),V=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},H=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(579),n(580),n(581),n(582),n(79),n(189),n(87),n(583),n(584),n(133),n(585),n(586),n(587),n(588),n(589),n(590),n(180),n(591),n(592),n(593),n(595),n(596),n(597),n(93),n(17),n(94),n(5),n(598),n(599),n(600),n(35),n(186),n(187),n(179),n(188),n(601),n(603),n(28),n(36)],void 0===(r=function(t,e,c,i,u,r,o,a,s,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function PlatformOK(){var t=n.call(this)||this;return t.PLATFORM_URL="https://ok.ru",t.PLATFORM_APP_URL_MASK="https://ok.ru/game/%ID%",t.profileFields=["AGE","GENDER","BIRTHDAY","FIRST_NAME","LAST_NAME","NAME","UID","CURRENT_STATUS","LOCATION","LOCALE","EMAIL"],t._notificationsLeft=0,t.profileFields.push(U.Core.instance.config.mobile?"PIC50X50":"PIC128X128"),t}return F(PlatformOK,n),PlatformOK.resolvePermissionName=function(t){switch(t){case o.PlatformPermission.PHOTO:return"PHOTO_CONTENT";case o.PlatformPermission.EMAIL:return"GET_EMAIL";case o.PlatformPermission.SET_STATUS:return"SET_STATUS";default:return null}},PlatformOK.prototype.canUploadPhoto=function(){return!0},PlatformOK.prototype.init=function(){return V(this,void 0,void 0,function(){return H(this,function(t){switch(t.label){case 0:return[4,window.ELKA_HELPER.socialPreloader.initialized];case 1:return t.sent()?this.onPlatformInitSuccess():(M.Services.debug.addLog("social",window.FAPI?"FAPI exists":"No FAPI exists"),this.onPlatformInitFail()),[2,this._initAsyncPromise]}})})},PlatformOK.prototype.addWidget=function(n,i){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:if(window.hasOwnProperty("OK"))return[3,5];e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,M.Services.resources.getResources(["APIOKWIDGET"])];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2];case 4:if(!e||!e.loaded)return[2];t.label=5;case 5:return window.OK.CONNECT.insertShareWidget(n,i.url||document.URL,i.config,"","",""),[2]}})})},PlatformOK.prototype.setWindowSize=function(n,i){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return(e=new P.SocialRequestOkUI("setWindowSize")).addParamsArray(i||0,n),[4,this.getResult(d.SimpleResponse,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.showPortalPayment=function(){return V(this,void 0,void 0,function(){return H(this,function(t){switch(t.label){case 0:return[4,this.getResult(d.SimpleResponse,new P.SocialRequestOkUI("showPortalPayment"))];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.showPaymentPromo=function(){return V(this,void 0,void 0,function(){return H(this,function(t){switch(t.label){case 0:return[4,this.getResult(d.SimpleResponse,new P.SocialRequestOkUI("showPaymentPromo"))];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.orderProduct=function(n){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return(e=new P.SocialRequestOkUI("showPayment")).addParamsArray(n.name,n.name,n.orderId,n.price,null,null,"ok","true"),[4,this.getResult(m.OrderResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.hasPermission=function(i,r){return V(this,void 0,void 0,function(){var e,n;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("users.hasAppPermission")).addParam("fid",i),e.addParam("ext_perm",PlatformOK.resolvePermissionName(r)),[4,this.getResult(h.PermissionResponseOK,e)];case 1:return[2,(n=t.sent()).success&&n.hasPermission]}})})},PlatformOK.prototype.isGroupMember=function(n,i){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("group.getUserGroupsByIds")).addParam("group_id",i),e.addParam("uids",n),[4,this.getResult(v.GroupMemberResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.requestPermissions=function(s){return V(this,void 0,void 0,function(){var e,n,i,r,o,a;return H(this,function(t){switch(t.label){case 0:for(e=[],n=0,i=s;n<i.length;n++)r=i[n],(o=PlatformOK.resolvePermissionName(r))&&e.push('"'+o+'"');return 0===e.length?[2,null]:((a=new P.SocialRequestOkUI("showPermissions")).addParamsArray("["+e.join(",")+"]"),[4,this.getResult(d.SimpleResponse,a)]);case 1:return[2,t.sent()]}})})},PlatformOK.prototype.notify=function(r,o,a){return V(this,void 0,void 0,function(){var e,n,i;return H(this,function(t){switch(t.label){case 0:return this._notificationsLeft<=0?((e=new f.NotificationResponseOK).success=!1,e.limitReached=!0,[2,e]):(M.Services.debug.addLog("social","notify",r),n=new P.SocialRequestOkUI("showNotification"),void 0!==a&&120<a.length&&(M.Services.debug.addError(this.CHANNEL_NAME,"showNotification: invalid custom_args length"),M.Services.debug.sendLog("showNotification: invalid custom_args length","",x.LogFlag.CLIENT,W.LogLevel.Warning)),r.length>this._notificationsLeft&&(r=r.slice(0,this._notificationsLeft)),n.addParamsArray(o,a||"",r.join(";")),[4,this.getResult(f.NotificationResponseOK,n)]);case 1:return(i=t.sent()).success&&(this._notificationsLeft-=i.notified.length,this._notificationsLeft<=0&&(i.limitReached=!0)),[2,i]}})})},PlatformOK.prototype.wallPost=function(t,e,a,s){return V(this,void 0,void 0,function(){var e,n,i,r,o;return H(this,function(t){switch(t.label){case 0:for(e=new P.SocialRequestOkUI("postMediatopic"),n=[],i=0,r=a;i<r.length;i++)o=r[i],n.push(S.AttachmentSerializer.serialize(o));return e.addParamsArray({media:n},s),[4,this.getResult(c.WallpostResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.getUser=function(n){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("users.getInfo")).addParam("uids",n),e.addParam("fields",this.profileFields.join(",")),[4,this.getResult(i.UserResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.getUsers=function(s){return V(this,void 0,void 0,function(){var e,n,i,r,o,a;return H(this,function(t){switch(t.label){case 0:e=new u.UsersResponseOK,n=100,i=Math.min(n,s.length),r=s.splice(0,i),o=null,t.label=1;case 1:return 0<r.length?((a=new E.SocialRequestOkClient("users.getInfo")).addParam("uids",r.join(",")),a.addParam("fields",this.profileFields.join(",")),[4,this.getResult(u.UsersResponseOK,a)]):[3,3];case 2:return(o=t.sent()).success&&(e.users=e.users.concat(o.users)),i=Math.min(n,s.length),r=s.splice(0,i),[3,1];case 3:return e.success=!0,[2,e]}})})},PlatformOK.prototype.getAppFriendList=function(){return V(this,void 0,void 0,function(){return H(this,function(t){switch(t.label){case 0:return[4,this.getResult(r.AppFriendListResponseOK,new E.SocialRequestOkClient("friends.getAppUsers"))];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.getFriends=function(t){return V(this,void 0,void 0,function(){var e,n;return H(this,function(t){switch(t.label){case 0:return[4,this.getResult(p.FriendListResponseOK,new E.SocialRequestOkClient("friends.get"))];case 1:return(n=t.sent()).success&&0<n.friendList.length?[4,this.getUsers(n.friendList)]:[3,3];case 2:return e=t.sent(),[3,4];case 3:e=new u.UsersResponseOK,t.label=4;case 4:return[2,e]}})})},PlatformOK.prototype.uploadPhoto=function(e){return V(this,void 0,void 0,function(){return H(this,function(t){return[2,n.prototype.uploadPhoto.call(this,e)]})})},PlatformOK.prototype.savePhoto=function(p,l,d){return V(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u;return H(this,function(t){switch(t.label){case 0:return[4,this.getUploadURL(null===p?null:String(p))];case 1:return(e=t.sent())&&e.uploadUrl?[4,this.uploadImage(l,e.uploadUrl)]:[2,null];case 2:if(!(n=t.sent()))return[2,null];for(a in o=n.photos)r=o[i=a].token;return(s=new E.SocialRequestOkClient("photosV2.commit")).addParam("photo_id",i),s.addParam("token",r),d&&s.addParam("comment",d),[4,this.getResult(O.SavePhotoResponseOK,s)];case 3:return c=t.sent(),u=null,c.success&&c.photos&&c.photos.length&&((u=new b.PhotoEntity).id=c.photos[0].photo_id,u.token=r),[2,u]}})})},PlatformOK.prototype.createAlbum=function(i,r){return V(this,void 0,void 0,function(){var e,n;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("photos.createAlbum")).addParam("title",i),e.addParam("description",r),e.addParam("type","public"),[4,this.getResult(g.CreateAlbumResponseOK,e)];case 1:return(n=t.sent()).success&&n.id?[4,this.getAlbum(n.id)]:[3,3];case 2:return[2,t.sent()];case 3:return[2,null]}})})},PlatformOK.prototype.getAlbums=function(n,t){return void 0===t&&(t=null),V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("photos.getAlbums")).addParam("fid",n),e.addParam("fields","album.aid, album.title, album.description, album.type, album.photos_count"),[4,this.getResult(_.AlbumsResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.showInvite=function(n,i,r){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return M.Services.debug.addLog("social","showInvite",n),e=new P.SocialRequestOkUI("showInvite"),void 0!==r&&120<r.length&&(M.Services.debug.addError(this.CHANNEL_NAME,"showNotification: invalid custom_args length"),M.Services.debug.sendLog("showNotification: invalid custom_args length","",x.LogFlag.CLIENT,W.LogLevel.Warning)),e.addParamsArray(i,r||"",n.join(";")),[4,this.getResult(T.InviteResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.onPlatformInitSuccess=function(){window.API_callback=this.apiCallback.bind(this),n.prototype.onPlatformInitSuccess.call(this)},PlatformOK.prototype.processPromise=function(t){this.call(t)},PlatformOK.prototype.onStageTap=function(t){if(this.activePromise&&this.activePromise.request.type===a.SocialRequestOkType.UI){if(this.activePromise.response instanceof m.OrderResponseOK)return M.Services.debug.addLog("PlatformOK","resolve promise ("+this.activePromise.request.method+") with 'unknown'"),this.activePromise.response.success=!0,this.activePromise.response.status=s.OrderStatus.UNKNOWN,this.activePromise.resolve(this.activePromise.response),this.activePromise=null,void this.checkQueue();M.Services.debug.addLog("PlatformOK","resolve promise ("+this.activePromise.request.method+") with 'cancel'"),this.activePromise.response.success=!1,this.activePromise.response.status=s.OrderStatus.CANCEL,this.activePromise.resolve(this.activePromise.response),this.activePromise=null,this.checkQueue()}},PlatformOK.prototype.apiCallback=function(t,e,n){M.Services.debug.addLog(this.CHANNEL_NAME,"Api callback",t,e,n),null!==this.activePromise?this.activePromise.request.method===t?this.onResponse(this.activePromise,e,n):M.Services.debug.addLog(this.CHANNEL_NAME,"ActivePromise's method and the method supplied do not match."):M.Services.debug.addLog(this.CHANNEL_NAME,"There are no active promises.")},PlatformOK.prototype.call=function(t){if(this.initialized)if(window.FAPI)switch(t.request.type){case a.SocialRequestOkType.UI:M.Services.view.ui.fullscreen.fullscreenEnabled&&M.Services.view.ui.fullscreen.inFullscreen&&M.Services.view.ui.fullscreen.exitFullscreen(),window.FAPI.UI[t.request.method].apply(null,t.request.getParamsArray());break;case a.SocialRequestOkType.CLIENT:var e=t.request.getParams();e.method=t.request.method,M.Services.debug.addLog(this.CHANNEL_NAME,"Call with params: ",e),window.FAPI.Client.call(e,this.onResponse.bind(this,t))}else t.reject("Cannot find OK library.");else t.reject("Platform is not initialized.")},PlatformOK.prototype.onResponse=function(t,e,n,i){if(M.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response got status, error: ",e,i),!this.activePromise)return M.Services.debug.addError(this.CHANNEL_NAME,"onResponse: there are no active promises."),t.reject("There are no active promises"),void this.checkQueue();if(t!==this.activePromise)return M.Services.debug.addError(this.CHANNEL_NAME,"onResponse: active and result promises are not equal."),t.reject("Active and result promises are not equal"),this.activePromise=null,void this.checkQueue();var r="";switch("error"===e&&"cancel"===n&&(e="cancel"),e){case"cancel":t.response.success=!1,r="Request canceled",t.response instanceof m.OrderResponseOK&&(t.response.status=s.OrderStatus.CANCEL);break;case"ok":t.response.parse(n),t.response.success=!0,t.response instanceof m.OrderResponseOK&&(t.response.status=s.OrderStatus.SUCCESS);break;default:t.response.success=!1,r="Unknown response status",t.response instanceof m.OrderResponseOK&&(t.response.status=s.OrderStatus.FAIL)}M.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response data:",t.request.method,"\n",t.response.traceData(n)),t.response.success?M.Services.debug.addLogToConsole(this.CHANNEL_NAME,"PlatformOK: resolve promise with data: ",t.response):M.Services.debug.addWarning(this.CHANNEL_NAME,"PlatformOK: resolve promise with error: ",r),t.resolve(t.response),this.activePromise=null,this.checkQueue()},PlatformOK.prototype.getCallsLeft=function(i){return V(this,void 0,void 0,function(){var e,n;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("users.getCallsLeft")).addParam("methods",i),[4,this.getResult(y.GetCallsLeftResponseOK,e)];case 1:return(n=t.sent()).success?("notifications.sendFromUser"==i&&(this._notificationsLeft=n.getCallsLeft(i)),[2,n.getCallsLeft(i)]):[2,-1]}})})},PlatformOK.prototype.getAdditionalInfo=function(n){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("users.getAdditionalInfo")).addParam("uids",n),[4,this.getResult(C.AdditionalInfoResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.getUploadURL=function(n){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return e=new E.SocialRequestOkClient("photosV2.getUploadUrl"),null!==n&&e.addParam("aid",n),[4,this.getResult(w.UploadServerResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.getAlbum=function(n){return V(this,void 0,void 0,function(){var e;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("photos.getAlbumInfo")).addParam("aid",n),e.addParam("fields","album.aid, album.title, album.description, album.type, album.photos_count"),[4,this.getResult(l.AlbumResponseOK,e)];case 1:return[2,t.sent()]}})})},PlatformOK.prototype.uploadImage=function(o,a){return V(this,void 0,void 0,function(){var e,n,i,r;return H(this,function(t){switch(t.label){case 0:(e=new FormData).append("file1",I.Utils.dataURLtoBlob(o),"filename.jpg"),(n=new A.Request).data=e,n.url=a,n.method="POST",n.cache=!1,n.processData=!1,n.contentType="",i=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,M.Services.network.sendRequest(n)];case 2:return r=t.sent(),i=JSON.parse(r.data),[3,4];case 3:return t.sent(),i=null,D.NetworkError,[3,4];case 4:return[2,i]}})})},PlatformOK.prototype.getAppUrl=function(t,e){var n=this.getBaseAppUrl(t);return e&&(n+="?"+e),n},PlatformOK.prototype.getProfileUrl=function(t){return this.PLATFORM_URL+"/profile/"+t},PlatformOK.prototype.getInvitableFriends=function(){return V(this,void 0,void 0,function(){var e;return H(this,function(t){return e=new E.SocialRequestOkClient("users.getInvitableFriends"),[2,this.getResult(j.InvitableFriendsResponseOK,e)]})})},PlatformOK.prototype.getIdsForBusiness=function(){return Promise.resolve(new R.BusinessListResponse)},PlatformOK.prototype.getAppRequestInfo=function(t){return Promise.resolve(new N.AppRequestInfoResponse)},PlatformOK.prototype.getSettings=function(t){return Promise.resolve(new L.SettingsResponse)},PlatformOK.prototype.setCount=function(t){return Promise.resolve(new k.SetCounterResponse)},PlatformOK.prototype.checkOffer=function(t,e){},PlatformOK.prototype.getActiveOffers=function(){},PlatformOK.prototype.trackPurchase=function(t,e){return Promise.resolve(new d.SimpleResponse)},PlatformOK.prototype.scrollTop=function(){return V(this,void 0,void 0,function(){return H(this,function(t){return window.FAPI.UI.scrollTo.apply(null,[0,76]),[2,Promise.resolve(new d.SimpleResponse)]})})},PlatformOK.prototype.hasStickerPack=function(i){return V(this,void 0,void 0,function(){var e,n;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("sticker.getActive")).addParam("fields","sticker_set.*"),[4,this.getResult(B.HasStickerPackResponseOK,e)];case 1:return n=t.sent(),[2,Promise.resolve(n.hasStickerPack(i))]}})})},PlatformOK.prototype.addStickerPack=function(i){return V(this,void 0,void 0,function(){var e,n;return H(this,function(t){switch(t.label){case 0:return(e=new E.SocialRequestOkClient("sticker.addToMy")).addParam("sticker_set_id",i),[4,this.getResult(G.AddStickerPackResponseOK,e)];case 1:return n=t.sent(),[2,Promise.resolve(n.addSuccess)]}})})},PlatformOK}(o.SocialPlatform);e.PlatformOK=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(178)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(WallpostResponseOK,t),WallpostResponseOK.prototype.parse=function(t){return this.postId=t,!0},WallpostResponseOK}(n.WallpostResponse);e.WallpostResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(181),n(298)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function UserResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(UserResponseOK,t),UserResponseOK.prototype.parse=function(t){return!!Array.isArray(t)&&(0!==t.length&&(this.user=i.UserParser.parse(t[0]),!0))},UserResponseOK}(n.UserResponse);e.UserResponseOK=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(135),n(298)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UsersResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(UsersResponseOK,t),UsersResponseOK.prototype.parse=function(t){if(!Array.isArray(t))return!1;for(var e=0,n=t;e<n.length;e++){var i=n[e],r=o.UserParser.parse(i);null!==r&&this.users.push(r)}return!0},UsersResponseOK.prototype.traceData=function(t){if(!Array.isArray(t))return t;for(var e="",n=0,i=t;n<i.length;n++){var r=i[n];e+=r.uid+" "+r.first_name+" "+r.last_name+"\n"}return e},UsersResponseOK}(n.UsersResponse);e.UsersResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(132)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AppFriendListResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(AppFriendListResponseOK,t),AppFriendListResponseOK.prototype.parse=function(t){return null!==t&&"object"==typeof t&&(!!Array.isArray(t.uids)&&(this.friendList=t.uids,!0))},AppFriendListResponseOK}(n.FriendListResponse);e.AppFriendListResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(132)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FriendListResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(FriendListResponseOK,t),FriendListResponseOK.prototype.parse=function(t){return!!Array.isArray(t)&&(this.friendList=t,!0)},FriendListResponseOK}(n.FriendListResponse);e.FriendListResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(293),n(299)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function AlbumResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(AlbumResponseOK,t),AlbumResponseOK.prototype.parse=function(t){return null!==t&&"object"==typeof t&&(this.album=i.AlbumParser.parse(t.album),!0)},AlbumResponseOK}(n.AlbumResponse);e.AlbumResponseOK=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PermissionResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(PermissionResponseOK,t),PermissionResponseOK.prototype.parse=function(t){return"boolean"==typeof t&&(this.hasPermission=t,!0)},PermissionResponseOK}(n.PlatformResponse);e.PermissionResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(290),n(299)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AlbumsResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(AlbumsResponseOK,t),AlbumsResponseOK.prototype.parse=function(t){if(null===t||"object"!=typeof t)return!1;if(!Array.isArray(t.albums))return!1;for(var e=0,n=t.albums;e<n.length;e++){var i=n[e],r=o.AlbumParser.parse(i);r&&this.albums.push(r)}return!0},AlbumsResponseOK}(n.AlbumsResponse);e.AlbumsResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(136)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function NotificationResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(NotificationResponseOK,t),NotificationResponseOK.prototype.parse=function(t){return"string"==typeof t&&(this.notified=t.split(",")),!0},NotificationResponseOK}(n.NotificationResponse);e.NotificationResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function GetCallsLeftResponseOK(){var t=null!==e&&e.apply(this,arguments)||this;return t._methodToCalls={},t}return a(GetCallsLeftResponseOK,e),GetCallsLeftResponseOK.prototype.getCallsLeft=function(t){return this._methodToCalls[t]},GetCallsLeftResponseOK.prototype.parse=function(t){if(!Array.isArray(t))return!1;for(var e=0,n=t;e<n.length;e++){var i=n[e];this._methodToCalls[i.name]=i.callsLeft}return!0},GetCallsLeftResponseOK}(n.PlatformResponse);e.GetCallsLeftResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(87)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function OrderResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(OrderResponseOK,t),OrderResponseOK.prototype.parse=function(t){return this.orderId=t,!0},OrderResponseOK}(n.OrderResponse);e.OrderResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(134)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GroupMemberResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(GroupMemberResponseOK,t),GroupMemberResponseOK.prototype.parse=function(t){if(!Array.isArray(t))return!1;if(0===t.length)return this.status=n.SOCIAL_GROUP_STATUS.NON_MEMBER,!0;switch(t[0].status){case"ACTIVE":case"ADMIN":case"MODERATOR":this.status=n.SOCIAL_GROUP_STATUS.MEMBER;break;case"PASSIVE":case"BLOCKED":this.status=n.SOCIAL_GROUP_STATUS.NON_MEMBER;break;case"UNKNOWN":this.status=n.SOCIAL_GROUP_STATUS.UNDEFINED}return!0},GroupMemberResponseOK}(n.GroupMemberResponse);e.GroupMemberResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function CreateAlbumResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(CreateAlbumResponseOK,t),CreateAlbumResponseOK.prototype.parse=function(t){return"string"==typeof t&&(this.id=t,!0)},CreateAlbumResponseOK}(n.PlatformResponse);e.CreateAlbumResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function UploadServerResponseOK(){var t=null!==e&&e.apply(this,arguments)||this;return t.uploadUrl=null,t}return a(UploadServerResponseOK,e),UploadServerResponseOK.prototype.parse=function(t){return"object"==typeof t&&(this.uploadUrl=t.upload_url,!0)},UploadServerResponseOK}(n.PlatformResponse);e.UploadServerResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(594)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SavePhotoResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(SavePhotoResponseOK,t),SavePhotoResponseOK.prototype.parse=function(t){return"object"==typeof t&&(this.albumID=t.aid,this.photos=t.photos,!0)},SavePhotoResponseOK}(n.SavePhotoResponse);e.SavePhotoResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SavePhotoResponse(){return null!==t&&t.apply(this,arguments)||this}return a(SavePhotoResponse,t),SavePhotoResponse}(n.PlatformResponse);e.SavePhotoResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(137)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AttachmentSerializer(){}return AttachmentSerializer.serialize=function(t){switch(t.type){case n.WallpostAttachmentType.LINK:return AttachmentSerializer.serializeLink(t.data);case n.WallpostAttachmentType.PHOTO:return AttachmentSerializer.serializePhoto(t.data);case n.WallpostAttachmentType.TEXT:return AttachmentSerializer.serializeText(t.data);case n.WallpostAttachmentType.APP:return AttachmentSerializer.serializeApp(t.data)}return null},AttachmentSerializer.serializeLink=function(t){return{type:"link",url:t.mediaId}},AttachmentSerializer.serializePhoto=function(t){return{type:"photo",list:[{id:t.mediaId}]}},AttachmentSerializer.serializeText=function(t){return{type:"text",text:t.text}},AttachmentSerializer.serializeApp=function(t){return{type:"app",text:t.text,images:t.images,actions:t.actions}},AttachmentSerializer}();e.AttachmentSerializer=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(189)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SocialRequestOkUI(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.SocialRequestOkType.UI,t}return a(SocialRequestOkUI,e),SocialRequestOkUI}(n.SocialRequestOK);e.SocialRequestOkUI=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(189)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SocialRequestOkClient(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.SocialRequestOkType.CLIENT,t}return a(SocialRequestOkClient,e),SocialRequestOkClient}(n.SocialRequestOK);e.SocialRequestOkClient=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(184)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AdditionalInfoResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(AdditionalInfoResponseOK,t),AdditionalInfoResponseOK.prototype.parse=function(t){return"users"in t&&0<t.users.length&&(this.lastPayment=t.users[0].info.last_payment,this.appPayer=t.users[0].info.app_payer,this.balance=t.users[0].info.balance,this.okPayer=t.users[0].info.ok_payer,this.player=t.users[0].info.player),!0},AdditionalInfoResponseOK}(n.AdditionalInfoResponse);e.AdditionalInfoResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(138)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function InviteResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(InviteResponseOK,t),InviteResponseOK.prototype.parse=function(t){return"string"==typeof t&&(this.invited=t.split(",")),!0},InviteResponseOK}(n.InviteResponse);e.InviteResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(185)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function InvitableFriendsResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(InvitableFriendsResponseOK,t),InvitableFriendsResponseOK.prototype.parse=function(t){if(null===t||"object"!=typeof t)return!1;if(!Array.isArray(t.users))return!1;for(var e=0,n=t.users;e<n.length;e++){var i=n[e],r=i.uid,o=i.selectable;this.users.push({uid:r,selectable:o})}return!0},InvitableFriendsResponseOK}(n.InvitableFriendsResponse);e.InvitableFriendsResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(602)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function HasStickerPackResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(HasStickerPackResponseOK,t),HasStickerPackResponseOK.prototype.parse=function(t){return"setIds"in t&&0<t.setIds.length&&(this._stickerPackIds=t.setIds),!0},HasStickerPackResponseOK}(n.HasStickerPackResponse);e.HasStickerPackResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function HasStickerPackResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t._stickerPackIds=[],t}return a(HasStickerPackResponse,e),HasStickerPackResponse.prototype.parse=function(t){return!1},HasStickerPackResponse.prototype.hasStickerPack=function(t){return 0<=this._stickerPackIds.indexOf(t)},HasStickerPackResponse}(n.PlatformResponse);e.HasStickerPackResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(604)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AddStickerPackResponseOK(){return null!==t&&t.apply(this,arguments)||this}return a(AddStickerPackResponseOK,t),AddStickerPackResponseOK.prototype.parse=function(t){return"success"in t&&(this._addSuccess=t.success),!0},AddStickerPackResponseOK}(n.AddStickerPackResponse);e.AddStickerPackResponseOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(27)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function AddStickerPackResponse(){var t=null!==e&&e.apply(this,arguments)||this;return t._addSuccess=!1,t}return a(AddStickerPackResponse,e),Object.defineProperty(AddStickerPackResponse.prototype,"addSuccess",{get:function(){return this._addSuccess},enumerable:!0,configurable:!0}),AddStickerPackResponse.prototype.parse=function(t){return!1},AddStickerPackResponse}(n.PlatformResponse);e.AddStickerPackResponse=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,D=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),I=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},C=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(79),n(184),n(136),n(138),n(606),n(607),n(608),n(139),n(17),n(609),n(610),n(611),n(185),n(612),n(134),n(613),n(614),n(615),n(616),n(133),n(300),n(617),n(188),n(35),n(36)],void 0===(r=function(t,e,n,r,l,o,a,s,p,c,u,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function PlatformFB(){var t=null!==i&&i.apply(this,arguments)||this;return t.appFriendsLimit=500,t.getUsersPerRequestLimit=50,t.appRequestLimit=50,t.PLATFORM_APP_URL_MASK="https://apps.facebook.com/%ID%",t}return D(PlatformFB,i),PlatformFB.prototype.init=function(){return I(this,void 0,void 0,function(){return C(this,function(t){return this.onPlatformInitSuccess(),[2,this._initAsyncPromise]})})},PlatformFB.prototype.processPromise=function(t){switch(u.Services.debug.addLog(this.CHANNEL_NAME,"processPromise",t.request),t.request.type){case c.SocialRequestFBType.API:window.FB.api(t.request.method,t.request.getParams(),this.onResponse.bind(this,t));break;case c.SocialRequestFBType.UI:u.Services.view.ui.fullscreen.fullscreenEnabled&&u.Services.view.ui.fullscreen.inFullscreen&&u.Services.view.ui.fullscreen.exitFullscreen(),window.FB.ui(t.request.getParams(),this.onUIResponse.bind(this,t));break;case c.SocialRequestFBType.LOGIN:u.Services.view.ui.fullscreen.fullscreenEnabled&&u.Services.view.ui.fullscreen.inFullscreen&&u.Services.view.ui.fullscreen.exitFullscreen(),window.FB.login(this.onLoginResponse.bind(this,t),t.request.getParams())}},PlatformFB.prototype.onResponse=function(t,e){u.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response got for:",t.request.method),this.checkCorrectOrReject(t)&&(e&&!e.error&&t.response.parse(e)?(u.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response data:",t.request.method,"\n",t.response.traceData(e)),u.Services.debug.addLogToConsole(this.CHANNEL_NAME,"PlatformFB: resolve promise with data: ",t.response),t.response.success=!0):u.Services.debug.addWarning(this.CHANNEL_NAME,"PlatformFB: resolve promise with error:",e),t.resolve(t.response),this.activePromise=null),this.checkQueue()},PlatformFB.prototype.onUIResponse=function(t,e){u.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response got for:",t.request.method),this.checkCorrectOrReject(t)&&(e&&!e.error_code&&!e.error_message&&t.response.parse(e)?(u.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response data:",t.request.method,"\n",t.response.traceData(e)),u.Services.debug.addLogToConsole(this.CHANNEL_NAME,"PlatformFB: resolve promise with data: ",t.response),t.response.success=!0):(u.Services.debug.addWarning(this.CHANNEL_NAME,"PlatformFB: resolve promise with error:",e),e.error_code&&t.request.onError&&t.request.onError(t.response,e.error_code)),t.resolve(t.response),this.activePromise=null),this.checkQueue()},PlatformFB.prototype.onLoginResponse=function(t,e){u.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response got for login"),this.checkCorrectOrReject(t)&&(e&&"connected"===e.status?(u.Services.debug.addLogLimited(this.CHANNEL_NAME,this.RESPONSE_LOG_SIZE,"Response data:","login","\n",t.response.traceData(e)),u.Services.debug.addLogToConsole(this.CHANNEL_NAME,"PlatformFB: resolve promise with data: ",t.response),t.response.success=!0):u.Services.debug.addWarning(this.CHANNEL_NAME,"PlatformFB: resolve promise with error:",e),t.resolve(t.response),this.activePromise=null),this.checkQueue()},PlatformFB.prototype.checkCorrectOrReject=function(t){return this.activePromise?t===this.activePromise||(u.Services.debug.addError(this.CHANNEL_NAME,"Active and result promises are not equal"),t.reject("Active and result promises are not equal"),this.activePromise=null,!1):(u.Services.debug.addError(this.CHANNEL_NAME,"There are no active promises"),t.reject("There are no active promises"),!1)},PlatformFB.prototype.getAdditionalInfo=function(t){return Promise.resolve(new r.AdditionalInfoResponse)},PlatformFB.prototype.getAppFriendList=function(){var t=new h.SocialRequestFBAPI("/me/friends");return t.addParam("fields","first_name,last_name,gender,location,birthday,picture.height(100).width(100)"),t.addParam("limit",this.appFriendsLimit),this.getResult(s.FriendListResponseFB,t)},PlatformFB.prototype.getAppUrl=function(t,e){var n=i.prototype.getBaseAppUrl.call(this,t);return e&&(n+="/?"+e),n},PlatformFB.prototype.getFriends=function(t){return Promise.resolve(new p.UsersResponseFB)},PlatformFB.prototype.getProfileUrl=function(t){},PlatformFB.prototype.getUser=function(t){var e=new h.SocialRequestFBAPI("/"+t);return e.addParam("fields","first_name,last_name,gender,location{location},birthday,picture.height(100).width(100)"),this.getResult(a.UserResponseFB,e)},PlatformFB.prototype.getUsers=function(u){return I(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c;return C(this,function(t){switch(t.label){case 0:n=Math.ceil(u.length/this.getUsersPerRequestLimit),(i=new p.UsersResponseFB).success=!0,o=r=0,t.label=1;case 1:return o<n?(a=u.slice(r,r+this.getUsersPerRequestLimit),(s=new h.SocialRequestFBAPI("/")).addParam("ids",a),s.addParam("fields","first_name,last_name,gender,picture.height(100).width(100)"),[4,this.getResult(p.UsersResponseFB,s)]):[3,4];case 2:(c=t.sent()).success&&(e=i.users).push.apply(e,c.users),r+=this.getUsersPerRequestLimit,t.label=3;case 3:return o++,[3,1];case 4:return[2,Promise.resolve(i)]}})})},PlatformFB.prototype.notify=function(c,u,p){return I(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return C(this,function(t){switch(t.label){case 0:n=new l.NotificationResponse,i=Math.ceil(c.length/this.appRequestLimit),o=r=0,t.label=1;case 1:return o<i?(a=c.slice(r,r+this.appRequestLimit),[4,this.notifyInternal(a,u,p)]):[3,4];case 2:if(!(s=t.sent()).success)return[3,4];(e=n.notified).push.apply(e,s.notified),r+=this.appRequestLimit,t.label=3;case 3:return o++,[3,1];case 4:return n.success=0<n.notified.length,[2,n]}})})},PlatformFB.prototype.notifyInternal=function(t,e,n){var i=new _.SocialRequestFBUI("apprequests");return i.addParam("message",e),i.addParam("to",t),n&&i.addParam("data",n),this.getResult(d.AppRequestsResponseFB,i)},PlatformFB.prototype.orderProduct=function(t){var e=new _.SocialRequestFBUI("pay");return e.addParam("action","purchaseitem"),e.addParam("product",t.link),e.addParam("request_id",t.orderId),e.onError=y.OrderResponseFB.parseError,this.getResult(y.OrderResponseFB,e)},PlatformFB.prototype.showInvite=function(t,e,n){return Promise.resolve(new o.InviteResponse)},PlatformFB.prototype.wallPost=function(t,n,e,i){return I(this,void 0,void 0,function(){var e;return C(this,function(t){return(e=new _.SocialRequestFBUI("share")).addParam("href",n),[2,this.getResult(g.WallpostResponseFB,e)]})})},PlatformFB.prototype.getInvitableFriends=function(){return Promise.resolve(new f.InvitableFriendsResponse)},PlatformFB.prototype.isGroupMember=function(t,e){return Promise.resolve(new m.GroupMemberResponse)},PlatformFB.prototype.getIdsForBusiness=function(){var t=new h.SocialRequestFBAPI("/me/ids_for_business");return this.getResult(v.BusinessListResponseFB,t)},PlatformFB.prototype.getAppRequestInfo=function(t){var e=new h.SocialRequestFBAPI("/"+t);return this.getResult(b.AppRequestInfoResponseFB,e)},PlatformFB.prototype.getSettings=function(t){var e=new h.SocialRequestFBAPI("/me/permissions");return this.getResult(w.SettingsResponseFB,e)},PlatformFB.prototype.hasPermission=function(e,n){return I(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.getSettings(e)];case 1:return[2,-1!==t.sent().permissions.indexOf(n)]}})})},PlatformFB.prototype.requestPermissions=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n],o=S.PermissionParser.toString(r);o&&e.push(o)}if(0===e.length)return u.Services.debug.addError(this.CHANNEL_NAME,"Unsupported permissions."),Promise.resolve(new O.SimpleResponse);var a=new P.SocialRequestFBLogin;return a.addParam("scope",e.join(",")),a.addParam("auth_type","rerequest"),this.getResult(O.SimpleResponse,a)},PlatformFB.prototype.setCount=function(t){return Promise.resolve(new E.SetCounterResponse)},PlatformFB.prototype.checkOffer=function(t,e){},PlatformFB.prototype.getActiveOffers=function(){},PlatformFB.prototype.trackPurchase=function(t,e){var n=new O.SimpleResponse,i=window.fbq;return i?(i("track","Purchase",{value:t.toString(),currency:e}),n.success=!0):u.Services.debug.sendLog("FBQ is not exists","",A.LogFlag.CLIENT,M.LogLevel.Warning),Promise.resolve(n)},PlatformFB.prototype.scrollTop=function(){return Promise.resolve(new O.SimpleResponse)},PlatformFB.prototype.addStickerPack=function(t){return Promise.resolve(!1)},PlatformFB.prototype.hasStickerPack=function(t){return Promise.resolve(!1)},PlatformFB}(n.SocialPlatform);e.PlatformFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(181),n(190)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function UserResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(UserResponseFB,t),UserResponseFB.prototype.parse=function(t){return this.user=i.UserParser.parse(t),!0},UserResponseFB}(n.UserResponse);e.UserResponseFB=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(132),n(190)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FriendListResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(FriendListResponseFB,t),FriendListResponseFB.prototype.parse=function(t){if(t=t.data,!Array.isArray(t))return!1;this.users=[];for(var e=0,n=t;e<n.length;e++){var i=n[e],r=o.UserParser.parse(i);null!==r&&(this.users.push(r),this.friendList.push(r.userId))}return!0},FriendListResponseFB}(n.FriendListResponse);e.FriendListResponseFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(135),n(190)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function UsersResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(UsersResponseFB,t),UsersResponseFB.prototype.parse=function(t){for(var e in t)this.users.push(i.UserParser.parse(t[e]));return!0},UsersResponseFB}(n.UsersResponse);e.UsersResponseFB=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(136)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AppRequestsResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(AppRequestsResponseFB,t),AppRequestsResponseFB.prototype.parse=function(t){if(!t.hasOwnProperty("request")||!t.hasOwnProperty("to"))return!1;for(var e=0,n=t.to;e<n.length;e++){var i=n[e];this.notified.push(i)}return!0},AppRequestsResponseFB}(n.NotificationResponse);e.AppRequestsResponseFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(139)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SocialRequestFBAPI(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.SocialRequestFBType.API,t}return a(SocialRequestFBAPI,e),SocialRequestFBAPI}(n.SocialRequestFB);e.SocialRequestFBAPI=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(139)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function SocialRequestFBUI(t){var e=n.call(this,t)||this;return e.type=i.SocialRequestFBType.UI,e.addParam("method",t),e}return a(SocialRequestFBUI,n),SocialRequestFBUI}(i.SocialRequestFB);e.SocialRequestFBUI=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(87)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function OrderResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(OrderResponseFB,t),OrderResponseFB.prototype.parse=function(t){switch(this.orderId=t.payment_id,t.status){case"initiated":case"completed":this.status=n.OrderStatus.SUCCESS;break;case"failed":this.status=n.OrderStatus.FAIL}return this.requestId=parseInt(t.request_id),this.signedRequest=t.signed_request,!0},OrderResponseFB.parseError=function(t,e){switch(e){case 1383010:case-200:t.status=n.OrderStatus.CANCEL;break;default:t.status=n.OrderStatus.FAIL}},OrderResponseFB}(n.OrderResponse);e.OrderResponseFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(186)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BusinessListResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(BusinessListResponseFB,t),BusinessListResponseFB.prototype.parse=function(t){return this.data=t.data,!0},BusinessListResponseFB}(n.BusinessListResponse);e.BusinessListResponseFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(187)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AppRequestInfoResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(AppRequestInfoResponseFB,t),AppRequestInfoResponseFB.prototype.parse=function(t){return this.data=t.data,!0},AppRequestInfoResponseFB}(n.AppRequestInfoResponse);e.AppRequestInfoResponseFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(178)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostResponseFB(){return null!==t&&t.apply(this,arguments)||this}return a(WallpostResponseFB,t),WallpostResponseFB.prototype.parse=function(t){return!0},WallpostResponseFB}(n.WallpostResponse);e.WallpostResponseFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(179),n(300)],void 0===(r=function(t,e,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SettingsResponseFB(){return null!==t&&t.apply(this,arguments)||this}return s(SettingsResponseFB,t),SettingsResponseFB.prototype.parse=function(t){for(var e=0,n=t.data;e<n.length;e++){var i=n[e],r=i.permission;if("granted"===i.status){var o=a.PermissionParser.parse(r);void 0!==o&&this.permissions.push(o)}}return!0},SettingsResponseFB}(n.SettingsResponse);e.SettingsResponseFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(139)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SocialRequestFBLogin(){var t=e.call(this,"")||this;return t.type=n.SocialRequestFBType.LOGIN,t}return a(SocialRequestFBLogin,e),SocialRequestFBLogin}(n.SocialRequestFB);e.SocialRequestFBLogin=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),f=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},y=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(287),n(87),n(297),n(289),n(133),n(138),n(295),n(288),n(28)],void 0===(r=function(t,e,n,i,l,r,o,a,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function PlatformVKMobile(){return t.call(this)||this}return c(PlatformVKMobile,t),PlatformVKMobile.prototype.getRequiredResources=function(){return["APIVKMOBILE"]},PlatformVKMobile.prototype.wallPost=function(c,u,p,t){return void 0===p&&(p=null),f(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return y(this,function(t){switch(t.label){case 0:if((e=new l.SocialRequestVkClient("showShareBox")).addParam("message",u),null!==p&&0<p.length){for(n=[],i=0,r=p;i<r.length;i++)o=r[i],(a=d.AttachmentSerializer.serialize(o))&&n.push(a);0<n.length&&e.addParam("attachments",n)}return s=_.Core.instance.config.userIdPlatform===c?"wall":"im",e.addParam("target",s),e.addListener("onShareBoxDone",this.onShareBoxDone),[4,this.getResult(h.WallpostResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVKMobile.prototype.orderProduct=function(n){return f(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return(e=new l.SocialRequestVkClient("showOrderBox")).addParam("0",{type:"item",item:n.orderId.toString()}),e.addListener("onOrderCancel",this.onOrderCancelHandle),e.addListener("onOrderFail",this.onOrderFailHandle),e.addListener("onOrderSuccess",this.onOrderSuccessHandle),e.addListener("onOrderBoxDone",this.onOrderBoxDone),[4,this.getResult(r.OrderResponseVK,e)];case 1:return[2,t.sent()]}})})},PlatformVKMobile.prototype.showInvite=function(t,e,n){return f(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return[4,this.inviteFriends()];case 1:return e=t.sent(),(n=new a.InviteResponse).success=e.success,[2,n]}})})},PlatformVKMobile.prototype.inviteFriends=function(){return f(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return(e=new l.SocialRequestVkClient("showInviteBox")).addListener("onInviteBoxDone",this.onInviteBoxDone),[4,this.getResult(o.SimpleResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVKMobile.prototype.showRequestBox=function(n,i,r){return f(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return(e=new l.SocialRequestVkClient("showRequestBox")).addParam("user_id",n),e.addParam("message",i),void 0!==r&&e.addParam("requestKey",r),e.addListener("onRequestBoxDone",this.onRequestBoxDone),[4,this.getResult(o.SimpleResponse,e)];case 1:return[2,t.sent()]}})})},PlatformVKMobile.prototype.onShareBoxDone=function(t,e){switch(e){case"success":t.response.success=!0;break;case"cancel":case"fail":default:t.response.success=!1}},PlatformVKMobile.prototype.onRequestBoxDone=function(t,e){switch(e){case"success":t.response.success=!0;break;case"cancel":case"fail":default:t.response.success=!1}},PlatformVKMobile.prototype.onInviteBoxDone=function(t,e,n){t.response.success=!0,console.log()},PlatformVKMobile.prototype.onOrderBoxDone=function(t,e){switch(e){case"success":var n=parseInt(t.request.getParam("0").item);t.response.success=!0,t.response.status=i.OrderStatus.SUCCESS,t.response.parse(n);break;case"cancel":case"fail":default:t.response.success=!1,t.response.status=i.OrderStatus.CANCEL}},PlatformVKMobile}(n.PlatformVK);e.PlatformVKMobile=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(620)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function CallProcessor(){this._calls=[],this._id=0,this._id2Call={},this._ticker=new n.Ticker,this._ticker.add(this.tick.bind(this))}return CallProcessor.prototype.delayCall=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return this.repeatCall.apply(this,[t,e,1].concat(n))},CallProcessor.prototype.nextCallTime=function(t){return t<1e3?performance.now()+t:1e3*Math.floor(performance.now()/1e3)+t},CallProcessor.prototype.repeatCall=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=-1);for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];var o=new a;return o.callTime=this.nextCallTime(e),o.id=++this._id,o.job=t,o.canSkip=!0,o.interval=e,o.repeatCount=n,o.args=i,this.add(o),o.id},CallProcessor.prototype.repeatCallNoSkip=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=-1);for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];var o=new a;return o.callTime=this.nextCallTime(e),o.id=++this._id,o.job=t,o.canSkip=!1,o.interval=e,o.repeatCount=n,o.args=i,this.add(o),o.id},CallProcessor.prototype.deleteCall=function(t){var e=this._id2Call[t];e&&(e.job=null,e.repeatCount=0,-1!=this._calls.indexOf(e)&&this._calls.splice(this._calls.indexOf(e),1),delete this._id2Call[t])},CallProcessor.prototype.tick=function(t){for(;0<this._calls.length&&this._calls[this._calls.length-1].callTime<=performance.now();){var e=this._calls.pop();e.job.apply(null,e.args),(-1===e.repeatCount||0<--e.repeatCount)&&(e.canSkip?e.callTime=this.nextCallTime(e.interval):e.callTime+=e.interval,this.add(e))}},CallProcessor.prototype.add=function(t){if(this._id2Call[t.id]=t,0!=this._calls.length){if(t.callTime>=this._calls[0].callTime)this._calls.unshift(t);else for(var e=this._calls.length-1;-1<e;e--)if(!(t.callTime>=this._calls[e].callTime))return void this._calls.splice(e+1,0,t)}else this._calls[0]=t},CallProcessor}();e.CallProcessor=i;var a=function Call(){}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Ticker(){this._callbacks=[],this.tick()}return Ticker.prototype.add=function(t){-1===this._callbacks.indexOf(t)&&this._callbacks.push(t)},Ticker.prototype.remove=function(t){var e=this._callbacks.indexOf(t);-1!==e&&this._callbacks.splice(e,1)},Ticker.prototype.tick=function(){var t=performance.now(),e=t-this._prevTime;this._callbacks.forEach(function(t){t(e)}),this._prevTime=t,requestAnimationFrame(this.tick.bind(this))},Ticker}();e.Ticker=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(17),n(13)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i,a=uipixi.BaseEventTarget,s=function(){function DateDataProvider(t){this._eventTarget=new a,t.repeatCall(this.repeat.bind(this),1e3)}return DateDataProvider.prototype.getValue=function(t,e){switch(t){case o.CURRENT:case o.NOW:return r.Services.date.currentTime;case o.TODAY_START:var n=new Date;return n.setTime(1e3*r.Services.date.rawServerTime),n.setHours(0,0,0,0),n.valueOf();case o.TODAY_END:var i=new Date;return i.setTime(1e3*r.Services.date.rawServerTime),i.setHours(23,59,59,0),i.valueOf();default:r.Services.debug.addWarning("DateDataProvider","DateDataProvider.getValue not found value for path = "+t)}},DateDataProvider.prototype.watch=function(t,e){this._eventTarget.hasListener(n.BaseDataEvent.CHANGED,e)||this._eventTarget.addEventListener(n.BaseDataEvent.CHANGED,e)},DateDataProvider.prototype.unwatch=function(t,e){this._eventTarget.hasListener(n.BaseDataEvent.CHANGED,e)&&this._eventTarget.removeEventListener(n.BaseDataEvent.CHANGED,e)},DateDataProvider.prototype.repeat=function(){0<this._eventTarget.listenersCount&&this._eventTarget.dispatchEvent(new n.BaseDataEvent(n.BaseDataEvent.CHANGED))},DateDataProvider}();e.DateDataProvider=s,(i=o||(o={})).CURRENT="current",i.NOW="now",i.TODAY_START="todayStart",i.TODAY_END="todayEnd"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(304),n(17)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SoundTrack(t,e){var n=i.call(this)||this;return n.id=t,n._loop=e,n}return a(SoundTrack,i),Object.defineProperty(SoundTrack.prototype,"muted",{set:function(t){this._muted=t,this._mediaInstance&&(this._mediaInstance.muted=t)},enumerable:!0,configurable:!0}),Object.defineProperty(SoundTrack.prototype,"volume",{get:function(){return this._mediaInstance.volume},set:function(t){this._mediaInstance.volume=Math.max(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(SoundTrack.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(SoundTrack.prototype,"loop",{set:function(t){this._loop=t},enumerable:!0,configurable:!0}),SoundTrack.prototype.stop=function(){this._isPlaying&&(this._isPlaying=!1,this._mediaInstance&&this._mediaInstance.stop(),this.dispatchEvent(new n.SoundTrackEvent(n.SoundTrackEvent.STOP,this)))},SoundTrack.prototype.play=function(){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:if(!PIXI.sound.exists(this.id))return r.Services.debug.addLog("sound","sound "+this.id+" doesn't exist"),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,PIXI.sound.play(this.id,{loop:this._loop,muted:this._muted})];case 2:return e._mediaInstance=t.sent(),this._isPlaying=!0,this._mediaInstance.once("end",this.onEnd.bind(this)),[3,4];case 3:return n=t.sent(),r.Services.debug.addLog("sound",n),[3,4];case 4:return[2]}})})},SoundTrack.prototype.onEnd=function(){this.dispatchEvent(new n.SoundTrackEvent(n.SoundTrackEvent.END,this))},SoundTrack}(uipixi.BaseEventTarget);e.SoundTrack=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ArrayUtil(){}return ArrayUtil.removeElementOnce=function(t,e){for(var n=t.length-1;-1<n;n--)if(t[n]===e)return void t.splice(n,1)},ArrayUtil.removeRandomElement=function(t){var e=Math.floor(Math.random()*t.length),n=t[e];return t.splice(e,1),n},ArrayUtil}();e.ArrayUtil=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(uVe,vVe){var wVe;wVe=function(){return this}();try{wVe=wVe||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(wVe=window)}uVe.exports=wVe},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function LocaleDataCollection(t,e){void 0===e&&(e={}),this._locale=t,this._hash=e}return LocaleDataCollection.prototype.addData=function(t){if(this._hash)for(var e in t)this._hash[e]=t[e];else this._hash=t},Object.defineProperty(LocaleDataCollection.prototype,"locale",{get:function(){return this._locale},enumerable:!0,configurable:!0}),LocaleDataCollection.prototype.get=function(t){return this._hash.hasOwnProperty(t)?this._hash[t]:null},LocaleDataCollection.prototype.has=function(t){return this._hash.hasOwnProperty(t)},LocaleDataCollection}();e.LocaleDataCollection=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ArrayUtil(){}return ArrayUtil.removeElementOnce=function(t,e){for(var n=t.length-1;-1<n;n--)if(t[n]===e)return void t.splice(n,1)},ArrayUtil.removeRandomElement=function(t){var e=Math.floor(Math.random()*t.length),n=t[e];return t.splice(e,1),n},ArrayUtil}();e.ArrayUtil=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(34),n(309)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(i){function SerialProcess(t,e){void 0===t&&(t=null),void 0===e&&(e=0);var n=i.call(this,e)||this;return n.addChildren(t),n}return a(SerialProcess,i),SerialProcess.prototype.startHandler=function(){this.process()},SerialProcess.prototype.stopHandler=function(){this._currentProcess&&this._currentProcess.stop()},SerialProcess.prototype.process=function(){0!=this._children.length?(this._currentProcess=this._children.shift(),this._currentProcess?(this._currentProcess.addEventListener(n.ProcessEvent.COMPLETE,this.action_completeHandler.bind(this)),this._currentProcess.start()):this.process()):this.complete()},SerialProcess.prototype.action_completeHandler=function(t){this._currentProcess.removeEventListener(n.ProcessEvent.COMPLETE,this.action_completeHandler.bind(this)),this.process()},SerialProcess}(i.ProcessContainerBase);e.SerialProcess=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function Wait(t){return e.call(this,t)||this}return a(Wait,e),Wait.prototype.startHandler=function(){this.complete()},Wait}(n.Process);e.Wait=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function Call(t,e,n){void 0===e&&(e=null),void 0===n&&(n=0);var i=r.call(this,n)||this;return i._handler=t,i._args=e,i}return a(Call,r),Call.prototype.start=function(){r.prototype.start.call(this)},Call.prototype.startHandler=function(){this._handler.apply(null,this._args),this.complete()},Call}(n.Process);e.Call=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function Add(t,e,n){void 0===n&&(n=0);var i=r.call(this,n)||this;return i._target=t,i._container=e,i}return a(Add,r),Add.prototype.startHandler=function(){this._container.addChild(this._target),this.complete()},Add}(n.Process);e.Add=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function Remove(t,e,n){void 0===n&&(n=0);var i=r.call(this,n)||this;return i._target=t,i._container=e,i}return a(Remove,r),Remove.prototype.startHandler=function(){this._container.removeChild(this._target),this.complete()},Remove}(n.Process);e.Remove=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function SetProperties(t,e,n){void 0===n&&(n=0);var i=r.call(this,n)||this;return i._target=t,i._props=e,i}return a(SetProperties,r),SetProperties.prototype.startHandler=function(){for(var t in this._props)this._target[t]=this._props[t];this.complete()},SetProperties}(n.Process);e.SetProperties=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(267),n(67)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(o){function Tween(t,e,n,i){void 0===i&&(i=0);var r=o.call(this,i)||this;return r._target=t,r._duration=e,r._vars=n,r._onCompleteCallback=n.onComplete,r}return a(Tween,o),Tween.prototype.startHandler=function(){o.prototype.startHandler.call(this),this._vars.onComplete=this.tweenCallback.bind(this),this._tween=new n.TweenMax(this._target,.001*this._duration,this._vars)},Tween.prototype.stopHandler=function(){o.prototype.stopHandler.call(this),this._tween.kill()},Tween.prototype.tweenCallback=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._onCompleteCallback&&this._onCompleteCallback.apply(null,t),this.complete()},Tween}(i.Process);e.Tween=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67),n(17)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(o){function PlaySound(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=0);var r=o.call(this,i)||this;return r._name=t,r._group=e,r._loop=n,r}return a(PlaySound,o),PlaySound.prototype.startHandler=function(){i.Services.sound.play(this._name,this._loop,this._group),this.complete()},PlaySound}(n.Process);e.PlaySound=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(267)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function EaseMap(){}return EaseMap.getEase=function(t){return null===EaseMap.map&&EaseMap.init(),EaseMap.map[t]},EaseMap.init=function(){EaseMap.map={"Linear.easeIn":n.Linear.easeIn,"Linear.ease":n.Linear.ease,"Linear.easeInOut":n.Linear.easeInOut,Linear:n.Linear.easeNone,"Linear.easeNone":n.Linear.easeNone,"Linear.easeOut":n.Linear.easeOut,"Elastic.easeIn":n.Elastic.easeIn,"Elastic.easeInOut":n.Elastic.easeInOut,"Elastic.easeOut":n.Elastic.easeOut,"Elastic.easeOut.config(1, 0.4)":n.Elastic.easeOut.config(1,.4),"Elastic.easeOut.config(0.8, 0.4)":n.Elastic.easeOut.config(.8,.4),"Elastic.easeOut.config(1, 0.5)":n.Elastic.easeOut.config(1,.5),"Sine.easeOut":n.Sine.easeOut,"Sine.easeIn":n.Sine.easeIn,"Sine.easeInOut":n.Sine.easeInOut,"Quad.easeOutFast":new window.Ease(null,null,1,2),"Quad.easeIn":window.Quad.easeIn,"Quad.easeOut":window.Quad.easeOut,"Quad.easeInOut":window.Quad.easeInOut,"Cubic.easeIn":window.Cubic.easeIn,"Cubic.easeInOut":window.Cubic.easeInOut,"Cubic.easeOut":window.Cubic.easeOut,"Back.easeOut":window.Back.easeOut,"Back.easeIn":window.Back.easeIn,"Back.easeInOut":window.Back.easeInOut,"Back.easeIn.config(1)":window.Back.easeIn.config(1),"Back.easeIn.config(2)":window.Back.easeIn.config(2),"Back.easeOut.config(2)":window.Back.easeOut.config(2),"Back.easeOut.config(1)":window.Back.easeOut.config(1),"Back.easeOut.config(3)":window.Back.easeOut.config(3),"Back.easeOut.config(4)":window.Back.easeOut.config(4)}},EaseMap.map=null,EaseMap}();e.EaseMap=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function PlaySpine(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=0);var r=o.call(this,i)||this;return r._spine=t,r._name=e,r._loop=n,r}return a(PlaySpine,o),PlaySpine.prototype.startHandler=function(){this._spine.setAnimation(this._name,this._loop)},PlaySpine.prototype.stopHandler=function(){this._spine.stop()},PlaySpine}(n.Process);e.PlaySpine=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(67),n(34)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(a){function Animate(t,e,n,i,r){var o=a.call(this,r)||this;return o.onInit=t,o.onStart=e,o.onSkip=n,o.onComplete=i,o.initialize(),o}return s(Animate,a),Animate.prototype.initialize=function(){if(this.onInit&&(this.onInit.start(),this.onInit.running))throw new Error("onInit process must be synchronous")},Animate.prototype.startHandler=function(){this.onStart?(this.onStart.addEventListener(i.ProcessEvent.COMPLETE,this.onStartComplete.bind(this)),this.onStart.start()):this.onStartComplete()},Animate.prototype.stopHandler=function(){this.onStart&&this.onStart.running&&this.onStart.stop(),this.executeOnSkip(),this.executeOnComplete()},Animate.prototype.onStartComplete=function(t){this.executeOnComplete(),this.complete()},Animate.prototype.executeOnSkip=function(){if(this.onSkip&&(this.onSkip.start(),this.onSkip.running))throw new Error("onSkip process must be synchronous")},Animate.prototype.executeOnComplete=function(){if(this.onComplete&&(this.onComplete.start(),this.onComplete.running))throw new Error("onComplete process must be synchronous")},Animate}(n.Process);e.Animate=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(191)],void 0===(r=function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function User(t){if(!("userId"in t))throw new Error("WSCHAT: User construct failed. Id is not found!");if(this._userId=parseInt(t.userId),isNaN(this._userId))throw new Error("WsChat: userId is invalid!");if(!("sUserId"in t))throw new Error("WSCHAT: User construct failed. sUserId is not found!");if(this._socialId=t.sUserId,!("sign"in t))throw new Error("WSCHAT: User construct failed. sign is not found!");if(this._sign=t.sign,!("channels"in t)||"object"!=typeof t.channels)throw new Error("WSCHAT: User construct failed. channels is not found!");var e=t.channels;for(var n in this._channels={},e)if(e.hasOwnProperty(n)){var i=new r.Channel(e[n]);i.readyToReconnect=!0,this._channels[i.getId()]=i}}return User.prototype.getChannel=function(t){return t in this._channels?this._channels[t]:null},User.prototype.addChannel=function(t){this._channels[t.getId()]=t},User.prototype.removeChannel=function(t){delete this._channels[t]},Object.defineProperty(User.prototype,"sign",{get:function(){return this._sign},enumerable:!0,configurable:!0}),Object.defineProperty(User.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(User.prototype,"socialId",{get:function(){return this._socialId},enumerable:!0,configurable:!0}),Object.defineProperty(User.prototype,"channels",{get:function(){return this._channels},enumerable:!0,configurable:!0}),Object.defineProperty(User.prototype,"authFullyCompleted",{get:function(){return this._authFullyCompleted},set:function(t){this._authFullyCompleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(User.prototype,"timeInit",{get:function(){return this._timeInit},set:function(t){this._timeInit=t},enumerable:!0,configurable:!0}),User}();e.User=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function Config(t){this.PROTO_SECURED="wss",this.PROTO_UNSECURED="ws","reconnect"in t||(t.reconnect={}),this.data=t}return Config.prototype.getEnabled=function(){return"enabled"in this.data&&1==this.data.enabled},Config.prototype.getHost=function(){return this.data.host||null},Config.prototype.getPort=function(){return parseInt(this.data.port)||443},Config.prototype.getSecured=function(){return"secured"in this.data&&1==this.data.secured},Config.prototype.getProto=function(){return this.getSecured()?this.PROTO_SECURED:this.PROTO_UNSECURED},Config.prototype.getServerUrl=function(){return this.getProto()+"://"+this.getHost()+":"+this.getPort()},Config.prototype.getReconnectEnabled=function(){return parseInt(this.data.reconnect.enabled)||0},Config.prototype.getReconnectTimeoutMin=function(){return parseInt(this.data.reconnect.timeoutMin)||1},Config.prototype.getReconnectTimeoutMax=function(){return parseInt(this.data.reconnect.timeoutMax)||10},Config.prototype.getReconnectTimeoutRand=function(){return Math.floor(Math.random()*(this.getReconnectTimeoutMax()-this.getReconnectTimeoutMin()+1))+this.getReconnectTimeoutMin()},Config.prototype.getReconnectFailBackMult=function(){return this.data.reconnect.failBackMult||2},Config.prototype.getReconnectCleanAttempts=function(){return this.data.reconnect.cleanAttempts||10},Config}();e.Config=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(192)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(s){function AuthMessage(t,e,n){var i={userId:t.userId,sUserId:t.socialId,sign:t.sign,channels:{},timeInit:e,reconnection:n},r=t.channels;for(var o in r){var a=r[o];a.readyToReconnect&&(i.channels[o]=a.getDump())}return s.call(this,"auth",i)||this}return a(AuthMessage,s),AuthMessage}(n.Message);e.AuthMessage=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(643),n(35),n(36),n(140),n(17),n(191)],void 0===(r=function(t,e,n,m,v,b,g,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function HistoryResponseProcessor(){return null!==t&&t.apply(this,arguments)||this}return a(HistoryResponseProcessor,t),HistoryResponseProcessor.prototype.execute=function(t){this._user.authFullyCompleted=!0;var e=t.data,r=e.history,n=e.reconnected;for(var i in this._user.channels){var o=r[i],a=this._user.getChannel(i),s=0;o&&(s=o.map(function(t){return t.time}).reduce(function(t,e){return Math.max(t,e)},0),a.readyToReconnect=!0),this.log("history time",i,"max:",s,"response:",t.time,a.readyToReconnect),a.readyToReconnect&&a.setLastMessageTime(s||t.time)}var c=[],u=function(e){var t=e.split("_"),n=t[0];t[1];if(n!==w.ChannelType.Personal&&n!==w.ChannelType.Clan)throw new Error("Unknown channel type: "+n);var i=r[e];p.log(n+" size:",i?i.length:"null"),i&&c.push.apply(c,i.map(function(t){return[t,e]}))},p=this;for(var i in this._user.channels)u(i);if(c.length>=HistoryResponseProcessor.HISTORY_LIMIT_LOG){var l=c.length>=HistoryResponseProcessor.HISTORY_LIMIT?"Истории больно":"История в опасносте!";g.Services.debug.sendLog(l,"",m.LogFlag.CLIENT,v.LogLevel.Warning,"PushService")}c.sort(function(t,e){return t[0].time-e[0].time});for(var d=0,h=c;d<h.length;d++){var _=h[d],f=new b.PushMessageEvent(_[0]);f.channelId=_[1];var y=void 0!==(a=this._user.getChannel(_[1])).authTime?a.authTime:this._user.timeInit;!n&&_[0].time<=y&&(f.outdated=!0),this._target.dispatchEvent(f)}},HistoryResponseProcessor.HISTORY_LIMIT=1250,HistoryResponseProcessor.HISTORY_LIMIT_LOG=1e3,HistoryResponseProcessor}(n.ResponseProcessor);e.HistoryResponseProcessor=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(17)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResponseProcessor(t,e){this._target=e,this._user=t}return ResponseProcessor.prototype.log=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=i.Services.debug).addLog.apply(t,["PushService"].concat(e))},ResponseProcessor}();e.ResponseProcessor=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(e.PushResponse||(e.PushResponse={})).parse=function parse(t){var e=null;try{e=JSON.parse(t)}catch(t){this.log(t)}return e&&e.data&&e.type?e:null}}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(192)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ChannelSubscribeMessage(t,e){var n=t.getDump();return n.timeInit=e,i.call(this,"subscribe",n)||this}return a(ChannelSubscribeMessage,i),ChannelSubscribeMessage}(n.Message);e.ChannelSubscribeMessage=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(192)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function ChatMessage(t,e,n){var i={channelId:"c_"+t,message:e,id:n};return r.call(this,"msg",i)||this}return a(ChatMessage,r),ChatMessage}(n.Message);e.ChatMessage=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function InitConfig(t){this._data=null,this._data=t}return Object.defineProperty(InitConfig.prototype,"gameUrl",{get:function(){return this.getParam("gameUrl")},enumerable:!0,configurable:!0}),Object.defineProperty(InitConfig.prototype,"defaultLocale",{get:function(){return this.getParam("defaultLocale")},enumerable:!0,configurable:!0}),Object.defineProperty(InitConfig.prototype,"logUrl",{get:function(){return this.getParam("logUrl")},enumerable:!0,configurable:!0}),Object.defineProperty(InitConfig.prototype,"serverHost",{get:function(){return this.getParam("serverHost")},enumerable:!0,configurable:!0}),Object.defineProperty(InitConfig.prototype,"request",{get:function(){return this._data.REQUEST},enumerable:!0,configurable:!0}),Object.defineProperty(InitConfig.prototype,"mobile",{get:function(){return this._data.mobile},enumerable:!0,configurable:!0}),InitConfig.prototype.getParam=function(t,e){return void 0===e&&(e=null),this._data.hasOwnProperty(t)?String(this._data[t]):e},InitConfig}();e.InitConfig=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(313),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ElkaConfig(){var t=null!==e&&e.apply(this,arguments)||this;return t._staticDataResourceId=null,t._debug=null,t._fluentClientHost=null,t._fluentSession=null,t._isNewUser=null,t._hash=null,t._requestKey=null,t._customArgs=null,t._signedRequest=null,t}return a(ElkaConfig,e),ElkaConfig.prototype.init=function(t){return!!e.prototype.init.call(this,t)&&(this._staticDataResourceId=i.Utils.parsePropertyString(t,"staticDataResourceId"),this._debug=i.Utils.parsePropertyString(t,"debug"),this._fluentClientHost=i.Utils.parsePropertyString(t,"fluentClientHost"),this._fluentSession=i.Utils.parsePropertyString(t,"fluentSession"),this._isNewUser=i.Utils.parsePropertyBool(t,"newUser"),this._hash=i.Utils.parsePropertyString(this._request,"hash"),this._requestKey=i.Utils.parsePropertyString(this._request,"request_key"),this._customArgs=i.Utils.parsePropertyString(this._request,"custom_args"),this._signedRequest=i.Utils.parsePropertyString(this._request,"signed_request"),!0)},Object.defineProperty(ElkaConfig.prototype,"staticDataResourceId",{get:function(){return this._staticDataResourceId},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"debug",{get:function(){return this._debug},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"fluentSession",{get:function(){return this._fluentSession},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"fluentClientHost",{get:function(){return this._fluentClientHost},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"isNewUser",{get:function(){return this._isNewUser},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"hash",{get:function(){return this._hash},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"requestKey",{get:function(){return this._requestKey},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"customArgs",{get:function(){return this._customArgs},enumerable:!0,configurable:!0}),Object.defineProperty(ElkaConfig.prototype,"signedRequest",{get:function(){return this._signedRequest},enumerable:!0,configurable:!0}),ElkaConfig}(n.CoreConfig);e.ElkaConfig=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(650),n(5),n(28),n(86),n(32),n(652)],void 0===(r=function(t,e,i,r,o,n,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function PerformanceLogger(){this._performanceMeter=new c.PerformanceMeter}return PerformanceLogger.getEnvironment=function(){var t=new r.EnvironmentDataProvider(window.navigator.userAgent).get();if(t.hasOwnProperty("error"))return t;var e=document.getElementById(i.Application.view.viewConfig.UIOptions.elementID),n={fullscreen:t.fullscreen,page:{navigator:{platform:t.page.navigator.platform,vendor:t.page.navigator.vendor,userAgent:t.page.navigator.userAgent,name:t.page.navigator.name},window:t.page.window,document:t.page.document,screen:t.page.screen},canvasList:t.canvasList,browserType:PerformanceLogger.getBrowserType(),device:PerformanceLogger.getDevice(),render:t.pixiRender,es6:t.es6,es6_nomodules:t.es6_nomodules,canvas:{width:e?e.offsetWidth:null,height:e?e.offsetHeight:null}};return t.webgl?n.webgl={supported:t.webgl.supported,name:t.webgl.name,VENDOR:o.Utils.getObjectByPath(t,"webgl.params.VENDOR",null),RENDERER:o.Utils.getObjectByPath(t,"webgl.params.RENDERER",null),VERSION:o.Utils.getObjectByPath(t,"webgl.params.VERSION",null),VENDOR_WEBGL:o.Utils.getObjectByPath(t,"webgl.extensions.capabilities.WEBGL_debug_renderer_info.UNMASKED_RENDERER_WEBGL",null),RENDERER_WEBGL:o.Utils.getObjectByPath(t,"webgl.extensions.capabilities.WEBGL_debug_renderer_info.UNMASKED_RENDERER_WEBGL",null)}:n.webgl={supported:!1},t.webgl2?n.webgl2={supported:t.webgl2.supported,name:t.webgl2.name,VENDOR:o.Utils.getObjectByPath(t,"webgl2.params.VENDOR"),RENDERER:o.Utils.getObjectByPath(t,"webgl2.params.RENDERER"),VERSION:o.Utils.getObjectByPath(t,"webgl2.params.VERSION"),VENDOR_WEBGL:o.Utils.getObjectByPath(t,"webgl2.extensions.capabilities.WEBGL_debug_renderer_info.UNMASKED_RENDERER_WEBGL"),RENDERER_WEBGL:o.Utils.getObjectByPath(t,"webgl2.extensions.capabilities.WEBGL_debug_renderer_info.UNMASKED_RENDERER_WEBGL")}:n.webgl2={supported:!1},n},PerformanceLogger.getDevice=function(){if(void 0!==PerformanceLogger.device)return PerformanceLogger.device;var t=new MobileDetect(window.navigator.userAgent);return(PerformanceLogger.device=t.phone())||(PerformanceLogger.device=t.tablet()),PerformanceLogger.device},PerformanceLogger.getBrowserType=function(){if(void 0!==PerformanceLogger.browserType)return PerformanceLogger.browserType;var t=new MobileDetect(window.navigator.userAgent);return this.browserType=null===t.mobile()?"d":"m",PerformanceLogger.browserType},PerformanceLogger.prototype.start=function(){this._performanceMeter.start(),this.dateStart=new Date,this.durationTime=0,this.currentIntervalId=0,this.timeInterval=1e3*PerformanceLogger.logIntervals[this.currentIntervalId],i.Application.metrics.goalStarkEvent(s.StarkEventsName.ENVIRONMENT,{env:PerformanceLogger.getEnvironment()}),this.setTimer(),n.Core.instance.eventRouter.addEventListener(a.CoreEvent.GAME_BREAK,this.onBreakGame.bind(this))},PerformanceLogger.prototype.setTimer=function(){this._currentTimerId=setTimeout(this.onTimer.bind(this),this.timeInterval)},PerformanceLogger.prototype.onTimer=function(){this.durationTime+=this.timeInterval,i.Application.metrics.goalStarkEvent(s.StarkEventsName.PERFORMANCE,{stats:this._performanceMeter.getStats(),logSize:i.Application.debug.getHistorySize(),duration:Math.round(this.durationTime/1e3),durationAbs:Math.round(((new Date).getTime()-this.dateStart.getTime())/1e3),device:PerformanceLogger.getDevice(),browserType:PerformanceLogger.getBrowserType()}),this.currentIntervalId++,PerformanceLogger.logIntervals.length>this.currentIntervalId&&(this.timeInterval=1e3*PerformanceLogger.logIntervals[this.currentIntervalId],this.setTimer())},PerformanceLogger.prototype.onBreakGame=function(){n.Core.instance.eventRouter.removeEventListener(a.CoreEvent.GAME_BREAK,this.onBreakGame.bind(this)),clearTimeout(this._currentTimerId)},PerformanceLogger.logIntervals=[15,15,30,120,420,600,2400,3600,7200],PerformanceLogger.device=void 0,PerformanceLogger.browserType=void 0,PerformanceLogger}();e.PerformanceLogger=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(193)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function EnvironmentDataProvider(t){this.vendors=[null,"webkit","moz","ms","o"],this._uaBrowser=new n.UAParser(t).getBrowser()}return EnvironmentDataProvider.prototype.get=function(t){if(void 0===t&&(t=!0),null!==EnvironmentDataProvider.cache&&t)return EnvironmentDataProvider.cache;var e={};try{e=this.getFullData()}catch(t){e={error:{message:t.message,name:t.name,stack:t.stack}}}return EnvironmentDataProvider.cache=e},EnvironmentDataProvider.prototype.getString=function(){var e="";try{e=JSON.stringify(this.get())}catch(t){e=JSON.stringify({error:t.message})}return e},EnvironmentDataProvider.prototype.getBrowserName=function(){return this._uaBrowser.name+" "+this._uaBrowser.version.split(".")[0]},EnvironmentDataProvider.prototype.vendorName=function(t,e){return null!==e&&0<e.length?e+t[0].toUpperCase()+t.substr(1):t},EnvironmentDataProvider.prototype.getAttrib=function(t,e){if(null!==t)for(var n=0,i=this.vendors;n<i.length;n++){var r=i[n],o=this.vendorName(e,r);if(null!=t[o])return t[o]}return null},EnvironmentDataProvider.prototype.isPresent=function(t,e){return null!=this.getAttrib(t,e)},EnvironmentDataProvider.prototype.getExtensions=function(t){var e,n,i,r;e={};for(var o=0,a=(r=t.getSupportedExtensions()).length;o<a;o++)(i=r[o]).match("texture_filter_anisotropic")?(n=t.getExtension(i),e[i]={MAX_TEXTURE_MAX_ANISOTROPY_EXT:t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}):i.match("OES_standard_derivatives")?(n=t.getExtension(i),e[i]={FRAGMENT_SHADER_DERIVATIVE_HINT_OES:t.getParameter(n.FRAGMENT_SHADER_DERIVATIVE_HINT_OES)}):i.match("WEBGL_draw_buffers")?(n=t.getExtension(i),e[i]={MAX_COLOR_ATTACHMENTS_WEBGL:t.getParameter(n.MAX_COLOR_ATTACHMENTS_WEBGL),MAX_DRAW_BUFFERS_WEBGL:t.getParameter(n.MAX_DRAW_BUFFERS_WEBGL)}):i.match("WEBGL_debug_renderer_info")&&null!=(n=t.getExtension(i))&&(e[i]={UNMASKED_VENDOR_WEBGL:t.getParameter(n.UNMASKED_VENDOR_WEBGL),UNMASKED_RENDERER_WEBGL:t.getParameter(n.UNMASKED_RENDERER_WEBGL)});return{capabilities:e}},EnvironmentDataProvider.prototype.getParams=function(t,e){var n,i,r,o;o={};for(var a=0,s=e;a<s.length;a++){var c=s[a];null!=(n=t[c])&&((i=t.getParameter(n))instanceof Float32Array||i instanceof Int32Array?o[c]=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r);return n}():o[c]=i)}return o},EnvironmentDataProvider.prototype.getContext=function(t,e,n){var i;try{return null!=(i=e.getContext(n,{stencil:!0}))&&(t.name=n,t.supported=!0),i}catch(t){return null}},EnvironmentDataProvider.prototype.getContextByName=function(t,e,n){var i;return null==(i=this.getContext(t,e,n))&&(i=this.getContext(t,e,"experimental-"+n)),i},EnvironmentDataProvider.prototype.getWebglInfo=function(t,e){var n,i,r=null;return i={supported:!1},null!=(r=document.createElement("canvas"))&&null!=r.getContext&&null!=(n=this.getContextByName(i,r,t))&&(n.enable(n.SAMPLE_ALPHA_TO_COVERAGE),n.enable(n.SAMPLE_COVERAGE),i.params=this.getParams(n,e),i.extensions=this.getExtensions(n),n.getShaderPrecisionFormat,i.shaderPrecision=null,this.loseContext(n),n=null),r&&r.remove(),i},EnvironmentDataProvider.prototype.loseContext=function(t){if(t)try{if(t.hasOwnProperty("getExtension")){var e=t.getExtension("WEBGL_lose_context");e&&e.loseContext()}}catch(t){}},EnvironmentDataProvider.prototype.pixiIsWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var r=n.getExtension("WEBGL_lose_context");r&&r.loseContext()}return n=null,i}catch(t){return!1}},EnvironmentDataProvider.prototype.getFullData=function(){var t={webgl:["ALIASED_LINE_WIDTH_RANGE","ALIASED_POINT_SIZE_RANGE","ALPHA_BITS","BLUE_BITS","DEPTH_BITS","GREEN_BITS","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_RENDERBUFFER_SIZE","MAX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_VARYING_VECTORS","MAX_VERTEX_ATTRIBS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VIEWPORT_DIMS","RED_BITS","SAMPLE_COVERAGE_VALUE","SAMPLES","STENCIL_BITS","SUBPIXEL_BITS","VENDOR","RENDERER","VERSION","SHADING_LANGUAGE_VERSION","COMPRESSED_TEXTURE_FORMATS","SAMPLE_BUFFERS"],webgl2new:["MAX_3D_TEXTURE_SIZE","MAX_ARRAY_TEXTURE_LAYERS","MAX_COLOR_ATTACHMENTS","MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS","MAX_COMBINED_UNIFORM_BLOCKS","MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS","MAX_DRAW_BUFFERS","MAX_ELEMENT_INDEX","MAX_ELEMENTS_INDICES","MAX_ELEMENTS_VERTICES","MAX_FRAGMENT_INPUT_COMPONENTS","MAX_FRAGMENT_UNIFORM_BLOCKS","MAX_FRAGMENT_UNIFORM_COMPONENTS","MAX_PROGRAM_TEXEL_OFFSET","MAX_SAMPLES","MAX_SERVER_WAIT_TIMEOUT","MAX_TEXTURE_LOD_BIAS","MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS","MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS","MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS","MAX_UNIFORM_BLOCK_SIZE","MAX_UNIFORM_BUFFER_BINDINGS","MAX_VARYING_COMPONENTS","MAX_VERTEX_OUTPUT_COMPONENTS","MAX_VERTEX_UNIFORM_BLOCKS","MAX_VERTEX_UNIFORM_COMPONENTS","MIN_PROGRAM_TEXEL_OFFSET"]};t.webgl2=t.webgl.concat(t.webgl2new);var e=this.getAttrib(navigator,"battery"),n=null;null!=e&&(n={charging:e.charging,level:e.level,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime});for(var i=document.createElement("canvas"),r={},o=0,a=["webgl","experimental-webgl","moz-webgl","webkit-3d"];o<a.length;o++){var s=a[o];try{var c=i.getContext(s);c&&"function"==typeof c.getParameter?r[s]=1:r[s]=0,this.loseContext(c),c=null}catch(t){r[s]=-1}}return i.remove(),{webgl:this.getWebglInfo("webgl",t.webgl),webgl2:this.getWebglInfo("webgl2",t.webgl2),requestAnimationFrame:this.isPresent(window,"requestAnimationFrame"),fullscreen:this.isPresent(document,"cancelFullScreen"),pointerlock:this.isPresent(document.body,"requestPointerLock"),gamepads:this.isPresent(navigator,"getGamepads"),webAudioData:this.isPresent(window,"AudioContext"),websocket:this.isPresent(window,"WebSocket"),webworker:this.isPresent(window,"Worker"),WebGLRenderingContext:this.isPresent(window,"WebGLRenderingContext"),webRTC:{support:this.isPresent(window,"RTCPeerConnection"),data:this.isPresent(window,"RTCDataChannelEvent")},page:{navigator:{doNotTrack:navigator.doNotTrack,hardwareConcurrency:navigator.hardwareConcurrency,platform:navigator.platform,vendor:navigator.vendor,maxTouchPoints:navigator.maxTouchPoints,battery:n,userAgent:navigator.userAgent,name:this.getBrowserName()},document:{clientWidth:document.documentElement?document.documentElement.clientWidth:null,clientHeight:document.documentElement?document.documentElement.clientHeight:null},window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,devicePixelRatio:window.devicePixelRatio},screen:{availTop:screen.hasOwnProperty("availTop")?screen.availTop:null,availLeft:screen.hasOwnProperty("availLeft")?screen.availLeft:null,availWidth:screen.availWidth,availHeight:screen.availHeight,width:screen.width,height:screen.height,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,orientation:{type:screen.hasOwnProperty("orientation")?screen.orientation.type:null,angle:screen.hasOwnProperty("orientation")?screen.orientation.angle:null}}},canvasList:r,pixiRender:this.pixiIsWebGLSupported()?"webgl":"canvas",es6:document.es6Check(),es6_nomodules:document.es6NomodulesCheck()}},EnvironmentDataProvider.cache=null,EnvironmentDataProvider}();e.EnvironmentDataProvider=i}.apply(e,i))||(t.exports=r)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function FPSCalculator(){this.MAX_TICKS=100,this.totalTicks=0,this.totalTickTime=0,this.lastTicks=[];for(var t=this.tickPointer=0;t<this.MAX_TICKS;t++)this.lastTicks.push(null)}return FPSCalculator.prototype.addTick=function(t){this.totalTicks++,this.totalTickTime+=t,this.lastTicks[this.tickPointer]=t,this.tickPointer>=this.MAX_TICKS-1?this.tickPointer=0:this.tickPointer++},FPSCalculator.prototype.getAvgFPS=function(){return 0===this.totalTicks?0:1e3/(this.totalTickTime/this.totalTicks)},FPSCalculator.prototype.getCurrentFPS=function(){for(var t=0,e=0,n=0,i=this.lastTicks;n<i.length;n++){var r=i[n];null!==r&&(t+=r,e++)}return 0===e?0:1e3/(t/e)},FPSCalculator.prototype.getTotalTicks=function(){return this.totalTicks},FPSCalculator.prototype.getTotalTickTime=function(){return this.totalTickTime},FPSCalculator}(),r=function(){function PerformanceMeter(){this.currentTime=null,this.previousTime=null,this.started=!1,this.visible=!1,this.fpsCommon=new i,this.fpsFullscreen=new i}return PerformanceMeter.prototype.start=function(){this.started||(this.addVisibilityListeners(),this.onVisibilityChange(),this.addFullscreenListeners(),this.onFullscreenChange(),this.onTick())},PerformanceMeter.prototype.getStats=function(){return{common:{fps:this.fpsCommon.getAvgFPS(),tickCount:this.fpsCommon.getTotalTicks(),tickTime:this.fpsCommon.getTotalTickTime(),currentFps:this.fpsCommon.getCurrentFPS()},fullscreen:{fps:this.fpsFullscreen.getAvgFPS(),tickCount:this.fpsFullscreen.getTotalTicks(),tickTime:this.fpsFullscreen.getTotalTickTime(),currentFps:this.fpsFullscreen.getCurrentFPS()}}},PerformanceMeter.prototype.addFullscreenListeners=function(){n.Application.view.ui.fullscreen.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this))},PerformanceMeter.prototype.onFullscreenChange=function(){this.fullscreenActive=this.isFullscreenActive()},PerformanceMeter.prototype.isFullscreenActive=function(){return n.Application.view.ui.fullscreen.inFullscreen},PerformanceMeter.prototype.isDocumentVisible=function(){var t=this.getBrowserKeys();for(var e in t)if(e in document&&void 0!==document[e])return!document[e];return!0},PerformanceMeter.prototype.getBrowserKeys=function(){return{hidden:"visibilitychange",msHidden:"msvisibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange"}},PerformanceMeter.prototype.getVisibilityEvent=function(){var t=this.getBrowserKeys();for(var e in t)if(e in document&&void 0!==document[e])return t[e];return null},PerformanceMeter.prototype.onVisibilityChange=function(){this.visible=this.isDocumentVisible(),this.previousTime=null},PerformanceMeter.prototype.addVisibilityListeners=function(){var t=this.getVisibilityEvent();null!==t&&document.addEventListener(t,this.onVisibilityChange.bind(this))},PerformanceMeter.prototype.onTick=function(){if(this.visible){if(null===this.previousTime)return this.previousTime=new Date,void requestAnimationFrame(this.onTick.bind(this));this.currentTime=new Date;var t=this.currentTime.getTime()-this.previousTime.getTime();this.previousTime=this.currentTime,0<t&&t<5e3&&(this.fullscreenActive?this.fpsFullscreen.addTick(t):this.fpsCommon.addTick(t)),requestAnimationFrame(this.onTick.bind(this))}else requestAnimationFrame(this.onTick.bind(this))},PerformanceMeter}();e.PerformanceMeter=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function CancellationToken(){}return Object.defineProperty(CancellationToken.prototype,"requested",{get:function(){return this._requested},enumerable:!0,configurable:!0}),CancellationToken.prototype.request=function(){this._requested=!0},CancellationToken}();e.CancellationToken=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WalletKeyGenerator(){this._count=1}return Object.defineProperty(WalletKeyGenerator.prototype,"nextKey",{get:function(){return this._count++},enumerable:!0,configurable:!0}),WalletKeyGenerator}();e.WalletKeyGenerator=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function WalletEvent(t,e,n){return i.call(this,t,e,n)||this}return o(WalletEvent,i),WalletEvent.WALLETS_CHANGED="WalletEvent.WALLETS_CHANGED",WalletEvent}(uipixi.BaseEvent);e.WalletEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(317)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ComplexWalletTransaction(t,e){void 0===e&&(e=!0);var n=i.call(this,t,e)||this;return n._transactions={},n}return a(ComplexWalletTransaction,i),ComplexWalletTransaction.prototype.add=function(t,e){this._transactions[t]=e,this._success=this._success&&e.success},Object.defineProperty(ComplexWalletTransaction.prototype,"transactions",{get:function(){return this._transactions},enumerable:!0,configurable:!0}),ComplexWalletTransaction}(n.WalletTransaction);e.ComplexWalletTransaction=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(318)],void 0===(r=function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ComplexWallet(t){var e=n.call(this,t)||this;return e._wallets={},e}return a(ComplexWallet,n),ComplexWallet.prototype.put=function(t,e,n){var i=new r.Wallet(e);i.putIn(n),this._wallets[t]=i},Object.defineProperty(ComplexWallet.prototype,"wallets",{get:function(){return this._wallets},enumerable:!0,configurable:!0}),ComplexWallet}(r.Wallet);e.ComplexWallet=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ResourceDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(ResourceDynamicData,t),Object.defineProperty(ResourceDynamicData.prototype,"count",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),ResourceDynamicData}(n.BaseDynamicDataIdentifiable);e.ResourceDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ObjectDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ObjectDynamicItem,t),Object.defineProperty(ObjectDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDynamicItem.prototype,"exp",{get:function(){return this.getNumber("exp")},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDynamicItem.prototype,"hideAward",{get:function(){return this.getRawValue("hideAward")},enumerable:!0,configurable:!0}),ObjectDynamicItem}(n.BaseDynamicDataIdentifiable);e.ObjectDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(WallpostDynamicData,t),Object.defineProperty(WallpostDynamicData.prototype,"time",{get:function(){return this.getNumber("time")},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostDynamicData.prototype,"count",{get:function(){return this.getNumber("count")},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostDynamicData.prototype,"available",{get:function(){return this.getNumber("available")},enumerable:!0,configurable:!0}),WallpostDynamicData}(n.BaseDynamicDataIdentifiable);e.WallpostDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UserScreenDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(UserScreenDynamicItem,t),UserScreenDynamicItem}(n.BaseDynamicDataIdentifiable);e.UserScreenDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(663),n(19)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function BeautyDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._source=new o.ItemCollection(r.BeautySourceDynamicItem,null),n.assignChildPath("source",n._source),n.replicateChange(n._source),n.initChildren(e),n}return a(BeautyDynamicItem,i),Object.defineProperty(BeautyDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyDynamicItem.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyDynamicItem.prototype,"total",{get:function(){return this.getNumber("total")},enumerable:!0,configurable:!0}),BeautyDynamicItem}(n.BaseDynamicDataIdentifiable);e.BeautyDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BeautySourceDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(BeautySourceDynamicItem,t),Object.defineProperty(BeautySourceDynamicItem.prototype,"value",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),BeautySourceDynamicItem}(n.BaseDynamicDataIdentifiable);e.BeautySourceDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(665)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function BoxDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._counter=new r.BoxCounterDynamicItem(null),n.assignChildPath("counter",n._counter),n.replicateChange(n._counter),n.initChildren(e),n}return a(BoxDynamicItem,i),Object.defineProperty(BoxDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(BoxDynamicItem.prototype,"counter",{get:function(){return this._counter},enumerable:!0,configurable:!0}),BoxDynamicItem}(n.BaseDynamicDataIdentifiable);e.BoxDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(666),n(19)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function BoxCounterDynamicItem(){return null!==e&&e.apply(this,arguments)||this}return a(BoxCounterDynamicItem,e),BoxCounterDynamicItem.prototype.init=function(t){e.prototype.init.call(this,t),this._roulette=new r.ItemCollection(i.BoxRouletteDynamicItem,null),this.assignChildPath("roulette",this._roulette),this.replicateChange(this._roulette),this.initChildren(t)},Object.defineProperty(BoxCounterDynamicItem.prototype,"open",{get:function(){return this.getNumber("open")},enumerable:!0,configurable:!0}),Object.defineProperty(BoxCounterDynamicItem.prototype,"roulette",{get:function(){return this._roulette},enumerable:!0,configurable:!0}),BoxCounterDynamicItem}(n.WalletDynamicItem);e.BoxCounterDynamicItem=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BoxRouletteDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(BoxRouletteDynamicItem,t),Object.defineProperty(BoxRouletteDynamicItem.prototype,"count",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),BoxRouletteDynamicItem}(n.BaseDynamicDataIdentifiable);e.BoxRouletteDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(668),n(19),n(670),n(671)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function LikeDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._likesUsersList=new a.UsersIdsCollection(s.UserIdItemData,null),n._likesByType=new o.ItemCollection(r.LikeByTypeItem,null),n.assignChildPath("list",n._likesUsersList),n.assignChildPath("types",n._likesByType),n.replicateChange(n._likesUsersList),n.replicateChange(n._likesByType),n.initChildren(e),n}return c(LikeDynamicItem,i),Object.defineProperty(LikeDynamicItem.prototype,"count",{get:function(){return this.getNumber("count",0)},enumerable:!0,configurable:!0}),Object.defineProperty(LikeDynamicItem.prototype,"likesUsersList",{get:function(){return this._likesUsersList},enumerable:!0,configurable:!0}),Object.defineProperty(LikeDynamicItem.prototype,"likesByType",{get:function(){return this._likesByType},enumerable:!0,configurable:!0}),LikeDynamicItem}(n.BaseDynamicDataIdentifiable);e.LikeDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(669)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function LikeByTypeItem(t,e){var n=i.call(this,t,e)||this;return n._likesFriendsList=new r.ItemCollection(o.SocialUserIdItemData,null),n.assignChildPath("list",n._likesFriendsList),n.replicateChange(n._likesFriendsList),n.initChildren(e),n}return a(LikeByTypeItem,i),Object.defineProperty(LikeByTypeItem.prototype,"count",{get:function(){return this.getNumber("value",0)},enumerable:!0,configurable:!0}),Object.defineProperty(LikeByTypeItem.prototype,"list",{get:function(){return this._likesFriendsList},enumerable:!0,configurable:!0}),LikeByTypeItem}(n.BaseDynamicDataIdentifiable);e.LikeByTypeItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SocialUserIdItemData(){return null!==t&&t.apply(this,arguments)||this}return a(SocialUserIdItemData,t),Object.defineProperty(SocialUserIdItemData.prototype,"sUserId",{get:function(){return this.getNumber("",0)},enumerable:!0,configurable:!0}),SocialUserIdItemData}(n.BaseDynamicDataIdentifiable);e.SocialUserIdItemData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UsersIdsCollection(){return null!==t&&t.apply(this,arguments)||this}return a(UsersIdsCollection,t),UsersIdsCollection.prototype.hasItem=function(t){return null!==this.getUserItem(t)},UsersIdsCollection.prototype.getUserItem=function(t){for(var e=0,n=this.items;e<n.length;e++){var i=n[e];if(i.userId===t)return i}return null},UsersIdsCollection}(n.ItemCollection);e.UsersIdsCollection=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UserIdItemData(){return null!==t&&t.apply(this,arguments)||this}return a(UserIdItemData,t),Object.defineProperty(UserIdItemData.prototype,"userId",{get:function(){return this.getNumber("",0)},enumerable:!0,configurable:!0}),UserIdItemData}(n.BaseDynamicDataIdentifiable);e.UserIdItemData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GeneratorDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(GeneratorDynamicItem,t),Object.defineProperty(GeneratorDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorDynamicItem.prototype,"timer",{get:function(){return this.getNumber("timer")},enumerable:!0,configurable:!0}),GeneratorDynamicItem}(n.BaseDynamicDataIdentifiable);e.GeneratorDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ToyDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ToyDynamicItem,t),Object.defineProperty(ToyDynamicItem.prototype,"count",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),ToyDynamicItem}(n.BaseDynamicDataIdentifiable);e.ToyDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AchievementDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(AchievementDynamicItem,t),Object.defineProperty(AchievementDynamicItem.prototype,"progress",{get:function(){return this.getNumber("0")},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementDynamicItem.prototype,"stage",{get:function(){return this.getNumber("1")},enumerable:!0,configurable:!0}),AchievementDynamicItem}(n.BaseDynamicDataIdentifiable);e.AchievementDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BonusDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(BonusDynamicItem,t),Object.defineProperty(BonusDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(BonusDynamicItem.prototype,"value",{get:function(){return this.getNumber("value")},enumerable:!0,configurable:!0}),BonusDynamicItem}(n.BaseDynamicDataIdentifiable);e.BonusDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(677),n(678),n(679)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function QuestDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._tasks=new r.ItemCollection(a.QuestTaskDynamicItem,null),n._skipped=new r.ItemCollection(s.QuestSkippedDynamicItem,null),n._progress=new r.ItemCollection(o.QuestProgressDynamicItem,null),n.assignChildPath("tasks",n._tasks),n.assignChildPath("skipped",n._skipped),n.assignChildPath("progress",n._progress),n.replicateChange(n._tasks),n.replicateChange(n._skipped),n.replicateChange(n._progress),n.initChildren(e),n}return c(QuestDynamicItem,i),Object.defineProperty(QuestDynamicItem.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(QuestDynamicItem.prototype,"timeEnd",{get:function(){return this.getNumber("timeEnd")},enumerable:!0,configurable:!0}),Object.defineProperty(QuestDynamicItem.prototype,"skipped",{get:function(){return this._skipped},enumerable:!0,configurable:!0}),Object.defineProperty(QuestDynamicItem.prototype,"quest",{get:function(){return this.getNumber("quest")},enumerable:!0,configurable:!0}),Object.defineProperty(QuestDynamicItem.prototype,"award",{get:function(){return this.getValue(["award"])},enumerable:!0,configurable:!0}),Object.defineProperty(QuestDynamicItem.prototype,"tasks",{get:function(){return this._tasks},enumerable:!0,configurable:!0}),Object.defineProperty(QuestDynamicItem.prototype,"nextQuestAt",{get:function(){return this.getNumber("nextQuestAt")},enumerable:!0,configurable:!0}),Object.defineProperty(QuestDynamicItem.prototype,"finished",{get:function(){return 1<=this.getNumber("finished")},enumerable:!0,configurable:!0}),QuestDynamicItem}(n.BaseDynamicDataIdentifiable);e.QuestDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function QuestProgressDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(QuestProgressDynamicItem,t),Object.defineProperty(QuestProgressDynamicItem.prototype,"progress",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),QuestProgressDynamicItem}(n.BaseDynamicDataIdentifiable);e.QuestProgressDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function QuestTaskDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(QuestTaskDynamicItem,t),Object.defineProperty(QuestTaskDynamicItem.prototype,"target",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),QuestTaskDynamicItem}(n.BaseDynamicDataIdentifiable);e.QuestTaskDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function QuestSkippedDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(QuestSkippedDynamicItem,t),Object.defineProperty(QuestSkippedDynamicItem.prototype,"taskId",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),QuestSkippedDynamicItem}(n.BaseDynamicDataIdentifiable);e.QuestSkippedDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(681),n(682)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function FarmDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._cells=new r.ItemCollection(o.FarmCellDynamicItem,null),n._generators=new r.ItemCollection(a.FarmGeneratorDynamicItem,null),n.assignChildPath("cells",n._cells),n.assignChildPath("generators",n._generators),n.replicateChange(n._cells),n.replicateChange(n._generators),n.initChildren(e),n}return s(FarmDynamicItem,i),Object.defineProperty(FarmDynamicItem.prototype,"status",{get:function(){return this.getNumber("status")},enumerable:!0,configurable:!0}),Object.defineProperty(FarmDynamicItem.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(FarmDynamicItem.prototype,"generators",{get:function(){return this._generators},enumerable:!0,configurable:!0}),FarmDynamicItem}(n.BaseDynamicDataIdentifiable);e.FarmDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FarmCellDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(FarmCellDynamicItem,t),Object.defineProperty(FarmCellDynamicItem.prototype,"purchased",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),FarmCellDynamicItem}(n.BaseDynamicDataIdentifiable);e.FarmCellDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FarmGeneratorDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(FarmGeneratorDynamicItem,t),Object.defineProperty(FarmGeneratorDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorDynamicItem.prototype,"time",{get:function(){return this.getNumber("time")},enumerable:!0,configurable:!0}),FarmGeneratorDynamicItem}(n.BaseDynamicDataIdentifiable);e.FarmGeneratorDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AnimalActionDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(AnimalActionDynamicItem,t),Object.defineProperty(AnimalActionDynamicItem.prototype,"timeEnd",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),AnimalActionDynamicItem}(n.BaseDynamicDataIdentifiable);e.AnimalActionDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BoughtForCashDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(BoughtForCashDynamicItem,t),Object.defineProperty(BoughtForCashDynamicItem.prototype,"count",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),BoughtForCashDynamicItem}(n.BaseDynamicDataIdentifiable);e.BoughtForCashDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DesignObjectActionDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(DesignObjectActionDynamicItem,t),Object.defineProperty(DesignObjectActionDynamicItem.prototype,"timeEnd",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),DesignObjectActionDynamicItem}(n.BaseDynamicDataIdentifiable);e.DesignObjectActionDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DesignObjectOptionDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(DesignObjectOptionDynamicItem,t),Object.defineProperty(DesignObjectOptionDynamicItem.prototype,"option",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),DesignObjectOptionDynamicItem}(n.BaseDynamicDataIdentifiable);e.DesignObjectOptionDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(688),n(12),n(689),n(691)],void 0===(r=function(t,e,r,o,n,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RouletteDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._sectors=new r.ItemCollection(o.RouletteSectorDynamicItem,null),n._spin=new a.RouletteSpinDynamicData(null),n._meta=new s.RouletteMetaDynamicData(null),n.assignChildPath("sectors",n._sectors),n.assignChildPath("spin",n._spin),n.assignChildPath("meta",n._meta),n.replicateChange(n._sectors),n.replicateChange(n._spin),n.replicateChange(n._meta),n.initChildren(e),n}return c(RouletteDynamicItem,i),Object.defineProperty(RouletteDynamicItem.prototype,"sectors",{get:function(){return this._sectors},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteDynamicItem.prototype,"meta",{get:function(){return this._meta},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteDynamicItem.prototype,"spin",{get:function(){return this._spin},enumerable:!0,configurable:!0}),RouletteDynamicItem}(n.BaseDynamicDataIdentifiable);e.RouletteDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteSectorDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteSectorDynamicItem,t),Object.defineProperty(RouletteSectorDynamicItem.prototype,"award",{get:function(){return this.getRawValue("award",null)},enumerable:!0,configurable:!0}),RouletteSectorDynamicItem}(n.BaseDynamicDataIdentifiable);e.RouletteSectorDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(113),n(690)],void 0===(r=function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function RouletteSpinDynamicData(t){var e=n.call(this,t)||this;return e._awards=new i.ItemCollection(r.RouletteSpinAwardDynamicItem,null),e.assignChildPath("awards",e._awards),e.replicateChange(e._awards),e}return a(RouletteSpinDynamicData,n),RouletteSpinDynamicData.prototype.init=function(t){n.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(RouletteSpinDynamicData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteSpinDynamicData.prototype,"award",{get:function(){return this.getRawValue("award",null)},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteSpinDynamicData.prototype,"spinCount",{get:function(){return this.getNumber("spinCount")},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteSpinDynamicData.prototype,"currentSpin",{get:function(){return this.getNumber("currentSpin")},enumerable:!0,configurable:!0}),RouletteSpinDynamicData}(n.WatchedDynamicItem);e.RouletteSpinDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteSpinAwardDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteSpinAwardDynamicItem,t),Object.defineProperty(RouletteSpinAwardDynamicItem.prototype,"award",{get:function(){return this.getRawValue("award",null)},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteSpinAwardDynamicItem.prototype,"sector",{get:function(){return this.getNumber("sector")},enumerable:!0,configurable:!0}),RouletteSpinAwardDynamicItem}(n.BaseDynamicDataIdentifiable);e.RouletteSpinAwardDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(113)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteMetaDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteMetaDynamicData,t),Object.defineProperty(RouletteMetaDynamicData.prototype,"wheelSource",{get:function(){return this.getNumber("wheelSource")},enumerable:!0,configurable:!0}),RouletteMetaDynamicData}(n.WatchedDynamicItem);e.RouletteMetaDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopsCollectionItem(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopsCollectionItem,t),Object.defineProperty(WorkshopsCollectionItem.prototype,"count",{get:function(){return this.getNumber("count",0)},enumerable:!0,configurable:!0}),WorkshopsCollectionItem}(n.BaseDynamicDataIdentifiable);e.WorkshopsCollectionItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopsDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopsDynamicItem,t),Object.defineProperty(WorkshopsDynamicItem.prototype,"award",{get:function(){return this.getNumber("award",0)},enumerable:!0,configurable:!0}),WorkshopsDynamicItem}(n.BaseDynamicDataIdentifiable);e.WorkshopsDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(96),n(695),n(696),n(19),n(700)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function GladeDuelDynamicData(){var t=e.call(this,null)||this;return t._token=new i.GladeDuelTokenDynamicData(null),t._game=new r.GladeDuelGameDynamicData,t._rating=new o.ItemCollection(a.GladeDuelRatingScreenDynamicItem,null),t.assignChildPath("token",t._token),t.assignChildPath("game",t._game),t.assignChildPath("rating",t._rating),t.replicateChange(t._token),t.replicateChange(t._game),t.replicateChange(t._rating),t}return c(GladeDuelDynamicData,e),GladeDuelDynamicData.prototype.init=function(t){e.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(GladeDuelDynamicData.prototype,"token",{get:function(){return this._token},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelDynamicData.prototype,"game",{get:function(){return this._game},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelDynamicData.prototype,"rating",{get:function(){return this._rating},enumerable:!0,configurable:!0}),GladeDuelDynamicData}(n.BaseDynamicData);e.GladeDuelDynamicData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(96)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelTokenDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(GladeDuelTokenDynamicData,t),Object.defineProperty(GladeDuelTokenDynamicData.prototype,"stage",{get:function(){return this.getNumber("stage")},enumerable:!0,configurable:!0}),GladeDuelTokenDynamicData}(n.BaseDynamicData);e.GladeDuelTokenDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(96),n(19),n(697)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function GladeDuelGameDynamicData(){var t=e.call(this,null)||this;return t._pairs=new i.ItemCollection(r.GladeDuelGamePairDynamicData,null),t.assignChildPath("pairs",t._pairs),t.replicateChange(t._pairs),t}return a(GladeDuelGameDynamicData,e),GladeDuelGameDynamicData.prototype.init=function(t){t||(t={}),e.prototype.init.call(this,t),this.initChildren(t)},Object.defineProperty(GladeDuelGameDynamicData.prototype,"award",{get:function(){return this.getNumber("award")},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGameDynamicData.prototype,"count",{get:function(){return this.getNumber("count")},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGameDynamicData.prototype,"offset",{get:function(){return this.getNumber("offset")},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGameDynamicData.prototype,"timeout",{get:function(){return this.getNumber("timeout",0)},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGameDynamicData.prototype,"screenId",{get:function(){return this.getNumber("screenId")},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGameDynamicData.prototype,"pairs",{get:function(){return this._pairs},enumerable:!0,configurable:!0}),GladeDuelGameDynamicData}(n.BaseDynamicData);e.GladeDuelGameDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(698),n(699)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function GladeDuelGamePairDynamicData(t,e){var n=i.call(this,t,e)||this;return n._users=new r.ItemCollection(o.GladeDuelGamePairUserDynamicItem,null),n._vote=new a.GladeDuelGamePairVoteDynamicData(null),n.assignChildPath("users",n._users),n.assignChildPath("vote",n._vote),n.replicateChange(n._users),n.replicateChange(n._vote),n.initChildren(e),n}return s(GladeDuelGamePairDynamicData,i),Object.defineProperty(GladeDuelGamePairDynamicData.prototype,"pairId",{get:function(){return this.getNumber("pairId")},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGamePairDynamicData.prototype,"users",{get:function(){return this._users},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGamePairDynamicData.prototype,"vote",{get:function(){return this._vote},enumerable:!0,configurable:!0}),GladeDuelGamePairDynamicData}(n.BaseDynamicDataIdentifiable);e.GladeDuelGamePairDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelGamePairUserDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(GladeDuelGamePairUserDynamicItem,t),Object.defineProperty(GladeDuelGamePairUserDynamicItem.prototype,"userId",{get:function(){return this.getNumber("userId")},enumerable:!0,configurable:!0}),GladeDuelGamePairUserDynamicItem}(n.BaseDynamicDataIdentifiable);e.GladeDuelGamePairUserDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(96)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelGamePairVoteDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(GladeDuelGamePairVoteDynamicData,t),Object.defineProperty(GladeDuelGamePairVoteDynamicData.prototype,"userId",{get:function(){return this.getNumber("userId")},enumerable:!0,configurable:!0}),GladeDuelGamePairVoteDynamicData}(n.BaseDynamicData);e.GladeDuelGamePairVoteDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(701)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function GladeDuelRatingScreenDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._games=new r.ItemCollection(o.GladeDuelRatingDynamicItem,null),n.assignChildPath("",n._games),n.replicateChange(n._games),n.initChildren(e),n}return a(GladeDuelRatingScreenDynamicItem,i),Object.defineProperty(GladeDuelRatingScreenDynamicItem.prototype,"games",{get:function(){return this._games},enumerable:!0,configurable:!0}),GladeDuelRatingScreenDynamicItem}(n.BaseDynamicDataIdentifiable);e.GladeDuelRatingScreenDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelRatingDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(GladeDuelRatingDynamicItem,t),Object.defineProperty(GladeDuelRatingDynamicItem.prototype,"value",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),GladeDuelRatingDynamicItem}(n.BaseDynamicDataIdentifiable);e.GladeDuelRatingDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ClientParamDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ClientParamDynamicItem,t),Object.defineProperty(ClientParamDynamicItem.prototype,"number",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamDynamicItem.prototype,"string",{get:function(){return this.getString("").toString()},enumerable:!0,configurable:!0}),ClientParamDynamicItem}(n.BaseDynamicDataIdentifiable);e.ClientParamDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GuideDynamicDataItem(){return null!==t&&t.apply(this,arguments)||this}return a(GuideDynamicDataItem,t),Object.defineProperty(GuideDynamicDataItem.prototype,"step",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),GuideDynamicDataItem}(n.BaseDynamicDataIdentifiable);e.GuideDynamicDataItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function ClanDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(ClanDynamicData,t),ClanDynamicData.parse=function(t){return new ClanDynamicData(i.ItemCollection.getObjectByPath(t,"clan",{}))},Object.defineProperty(ClanDynamicData.prototype,"idPrerelease",{get:function(){return this.getNumber("idPrerelease")},enumerable:!0,configurable:!0}),Object.defineProperty(ClanDynamicData.prototype,"namePrerelease",{get:function(){return this.getString("namePrerelease")},enumerable:!0,configurable:!0}),ClanDynamicData}(n.WalletDynamicItem);e.ClanDynamicData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(96),n(19),n(706)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function PendingAwardsData(t){var e=n.call(this,t)||this;return e._awards=new i.ItemCollection(r.PendingAwardItem,null),e.assignChildPath("awards",e._awards),e.replicateChange(e._awards),e}return a(PendingAwardsData,n),PendingAwardsData.prototype.init=function(t){n.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(PendingAwardsData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(PendingAwardsData.prototype,"counter",{get:function(){return this.getNumber("counter",0)},enumerable:!0,configurable:!0}),PendingAwardsData}(n.BaseDynamicData);e.PendingAwardsData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PendingAwardItem(){return null!==t&&t.apply(this,arguments)||this}return a(PendingAwardItem,t),Object.defineProperty(PendingAwardItem.prototype,"award",{get:function(){return this.getRawValue("award")},enumerable:!0,configurable:!0}),Object.defineProperty(PendingAwardItem.prototype,"expire",{get:function(){return this.getNumber("expire")},enumerable:!0,configurable:!0}),Object.defineProperty(PendingAwardItem.prototype,"isExpiring",{get:function(){return 0!==this.expire},enumerable:!0,configurable:!0}),Object.defineProperty(PendingAwardItem.prototype,"params",{get:function(){return this.getRawValue("params")},enumerable:!0,configurable:!0}),Object.defineProperty(PendingAwardItem.prototype,"type",{get:function(){return this.getString("type")},enumerable:!0,configurable:!0}),PendingAwardItem}(n.BaseDynamicDataIdentifiable);e.PendingAwardItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PresentDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(PresentDynamicItem,t),Object.defineProperty(PresentDynamicItem.prototype,"reciptTime",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),PresentDynamicItem}(n.BaseDynamicDataIdentifiable);e.PresentDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FriendInviteDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(FriendInviteDynamicItem,t),Object.defineProperty(FriendInviteDynamicItem.prototype,"sUserId",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(FriendInviteDynamicItem.prototype,"time",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),FriendInviteDynamicItem}(n.BaseDynamicDataIdentifiable);e.FriendInviteDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RatingDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(RatingDynamicItem,t),Object.defineProperty(RatingDynamicItem.prototype,"placeId",{get:function(){return this.getNumber("placeId")},enumerable:!0,configurable:!0}),Object.defineProperty(RatingDynamicItem.prototype,"placeIdRaw",{get:function(){return this.getNumber("placeIdRaw")},enumerable:!0,configurable:!0}),Object.defineProperty(RatingDynamicItem.prototype,"show",{get:function(){return this.getNumber("show")},enumerable:!0,configurable:!0}),RatingDynamicItem}(n.BaseDynamicDataIdentifiable);e.RatingDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(711),n(719)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function EventsDynamicData(t){var e=n.call(this,t)||this;return e._newYear=new i.EventNewYearDynamicData(null),e._raffleMoney=new r.RaffleMoneyDynamicData(null),e.assignChildPath("newYear",e._newYear),e.assignChildPath("raffleMoney",e._raffleMoney),e.replicateChange(e._newYear),e.replicateChange(e._raffleMoney),e}return a(EventsDynamicData,n),EventsDynamicData.prototype.init=function(t){n.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(EventsDynamicData.prototype,"newYear",{get:function(){return this._newYear},enumerable:!0,configurable:!0}),Object.defineProperty(EventsDynamicData.prototype,"raffleMoney",{get:function(){return this._raffleMoney},enumerable:!0,configurable:!0}),EventsDynamicData}(n.WalletDynamicItem);e.EventsDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19),n(712),n(716),n(718)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(n){function EventNewYearDynamicData(t){var e=n.call(this,t)||this;return e._achievements=new i.ItemCollection(o.EventNewYearAchievementDynamicItem,null),e.assignChildPath("achievements",e._achievements),e.replicateChange(e._achievements),e._presents=new r.EventNewYearPresentsDynamicData(null),e.assignChildPath("presents",e._presents),e.replicateChange(e._presents),e._rating=new i.ItemCollection(a.EventNewYearRatingDynamicItem,null),e.assignChildPath("rating",e._rating),e.replicateChange(e._rating),e}return c(EventNewYearDynamicData,n),EventNewYearDynamicData.prototype.init=function(t){t||(t={}),n.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(EventNewYearDynamicData.prototype,"ratingPlace",{get:function(){return this.getNumber("ratingPlace",0)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearDynamicData.prototype,"placeSize",{get:function(){return this.getNumber("placeSize",0)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearDynamicData.prototype,"level",{get:function(){return this.getNumber("level",1)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearDynamicData.prototype,"exp",{get:function(){return this.getNumber("exp",0)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearDynamicData.prototype,"period",{get:function(){return this.getNumber("period",0)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearDynamicData.prototype,"achievements",{get:function(){return this._achievements},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearDynamicData.prototype,"presents",{get:function(){return this._presents},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearDynamicData.prototype,"rating",{get:function(){return this._rating},enumerable:!0,configurable:!0}),EventNewYearDynamicData}(n.WalletDynamicItem);e.EventNewYearDynamicData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19),n(713),n(715)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(n){function EventNewYearPresentsDynamicData(t){var e=n.call(this,t)||this;return e._send=new i.ItemCollection(r.EventNewYearPresentsSendDynamicItem,null),e._get=new i.ItemCollection(o.EventNewYearPresentsGetDynamicItem,null),e.assignChildPath("send",e._send),e.assignChildPath("get",e._get),e.replicateChange(e._send),e.replicateChange(e._get),e}return s(EventNewYearPresentsDynamicData,n),EventNewYearPresentsDynamicData.prototype.init=function(t){t||(t={}),n.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(EventNewYearPresentsDynamicData.prototype,"send",{get:function(){return this._send},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearPresentsDynamicData.prototype,"get",{get:function(){return this._get},enumerable:!0,configurable:!0}),EventNewYearPresentsDynamicData}(n.WalletDynamicItem);e.EventNewYearPresentsDynamicData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(714)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function EventNewYearPresentsSendDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._resources=new r.ItemCollection(o.EventNewYearPresentsSendItemDynamicItem,null),n.assignChildPath("",n._resources),n.replicateChange(n._resources),n.initChildren(e),n}return a(EventNewYearPresentsSendDynamicItem,i),Object.defineProperty(EventNewYearPresentsSendDynamicItem.prototype,"resources",{get:function(){return this._resources},enumerable:!0,configurable:!0}),EventNewYearPresentsSendDynamicItem}(n.BaseDynamicDataIdentifiable);e.EventNewYearPresentsSendDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearPresentsSendItemDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearPresentsSendItemDynamicItem,t),Object.defineProperty(EventNewYearPresentsSendItemDynamicItem.prototype,"resourceId",{get:function(){return this.getString("")},enumerable:!0,configurable:!0}),EventNewYearPresentsSendItemDynamicItem}(n.BaseDynamicDataIdentifiable);e.EventNewYearPresentsSendItemDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearPresentsGetDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearPresentsGetDynamicItem,t),Object.defineProperty(EventNewYearPresentsGetDynamicItem.prototype,"inboxKey",{get:function(){return this.getString("")},enumerable:!0,configurable:!0}),EventNewYearPresentsGetDynamicItem}(n.BaseDynamicDataIdentifiable);e.EventNewYearPresentsGetDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(717)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function EventNewYearAchievementDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._history=new r.ItemCollection(o.EventNewYearAchievementHistoryDynamicItem,null),n.assignChildPath("history",n._history),n.replicateChange(n._history),n.initChildren(e),n}return a(EventNewYearAchievementDynamicItem,i),Object.defineProperty(EventNewYearAchievementDynamicItem.prototype,"progress",{get:function(){return this.getNumber("progress")},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementDynamicItem.prototype,"stage",{get:function(){return this.getNumber("stage",0)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementDynamicItem.prototype,"history",{get:function(){return this._history},enumerable:!0,configurable:!0}),EventNewYearAchievementDynamicItem}(n.BaseDynamicDataIdentifiable);e.EventNewYearAchievementDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearAchievementHistoryDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearAchievementHistoryDynamicItem,t),Object.defineProperty(EventNewYearAchievementHistoryDynamicItem.prototype,"stage",{get:function(){return this.getNumber("")},enumerable:!0,configurable:!0}),EventNewYearAchievementHistoryDynamicItem}(n.BaseDynamicDataIdentifiable);e.EventNewYearAchievementHistoryDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearRatingDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearRatingDynamicItem,t),Object.defineProperty(EventNewYearRatingDynamicItem.prototype,"id",{get:function(){return this.getString("")},enumerable:!0,configurable:!0}),EventNewYearRatingDynamicItem}(n.BaseDynamicDataIdentifiable);e.EventNewYearRatingDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(113),n(322)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function RaffleMoneyDynamicData(t){var e=n.call(this,t)||this;return e._roulette=new i.RoulettesDynamicData(null),e.assignChildPath("roulette",e._roulette),e.replicateChange(e._roulette),e}return a(RaffleMoneyDynamicData,n),RaffleMoneyDynamicData.prototype.init=function(t){n.prototype.init.call(this,t),this.initChildren(t||{})},Object.defineProperty(RaffleMoneyDynamicData.prototype,"roulette",{get:function(){return this._roulette},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyDynamicData.prototype,"counterMoney",{get:function(){return this.getNumber("counterMoney")},enumerable:!0,configurable:!0}),RaffleMoneyDynamicData}(n.WatchedDynamicItem);e.RaffleMoneyDynamicData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DynamicDataProvider(t){this.parserType=t}return DynamicDataProvider.prototype.getValue=function(t,e){var n=t.split(".");if(1<e.length)throw new Error("DynamicDataProvider: unsupported filters: "+e.toString());var i=h.Application.dynamic.parsedData(this.parserType);if(!i)throw new Error("DynamicDataProvider: base data not found for "+String(this.parserType));var r=i.getValue(n);if(1===e.length){var o=e[0];switch(o.type.split(".")[0]){case"field":var a=o.type.split(".")[1];if("object"!=typeof r)throw new Error("DynamicDataProvider: can't find field "+a+" in element: "+r);var s=[];for(var c in r){if(r.hasOwnProperty(c))if((l=r[c]).hasOwnProperty(a)){var u=l[a];-1!==o.values.indexOf(u)&&s.push(l)}}return s;case"indexOf":if("object"!=typeof r)throw new Error("DynamicDataProvider: unsupported indexOf value type: "+typeof r);var p=[];for(var c in r)if(r.hasOwnProperty(c)){var l=r[c];-1!==o.values.indexOf(l)&&p.push(l)}return p;case"value":if("object"!=typeof r)throw new Error("DynamicDataProvider: filter:value unsupported value type: "+typeof r);var d=[];for(var c in r){l=r[c];-1!==o.values.indexOf(l.toString())&&d.push(l)}return d;default:throw new Error("DynamicDataProvider: unsupported filter: "+o)}}return r},DynamicDataProvider.prototype.watch=function(t,e){var n=this.data?this.data:null;n&&n.addWaitChange(t,e)},DynamicDataProvider.prototype.unwatch=function(t,e){var n=this.data?this.data:null;n&&n.removeWaitChange(t,e)},Object.defineProperty(DynamicDataProvider.prototype,"data",{get:function(){var t=h.Application.dynamic.parsedData(this.parserType);if(!t)throw new Error("DynamicDataProvider: base data not found for "+String(this.parserType));return t},enumerable:!0,configurable:!0}),DynamicDataProvider}();e.DynamicDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(25),n(5)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function DataService(){var t=e.call(this)||this;return t._parserClasses=[],t._parsedData=new core.Map,t}return a(DataService,e),DataService.prototype.assignParser=function(t){this._parserClasses.push(t),this.parse(t)},DataService.prototype.reparse=function(){for(var t=0,e=this._parserClasses;t<e.length;t++){var n=e[t];this.parse(n)}},DataService.prototype.getParsedData=function(t){var e=i.Utils.getNameFromClass(t);return this._parsedData.has(e)?this._parsedData.get(e):null},DataService.prototype.parse=function(t){var e=this.getDataForParsers();if(null!=e&&!this._parsedData.has(i.Utils.getNameFromClass(t))){var n=t.parse(e);null!=n&&this._parsedData.set(i.Utils.getNameFromClass(t),n)}},DataService}(n.Service);e.DataService=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19),n(114)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function FriendsDynamicData(t){var e=n.call(this,t)||this;return e._friends=new i.ItemCollection(r.FriendDynamicItem,null),e.assignChildPath("",e._friends),e.replicateChange(e._friends),e.initChildren(t),e}return a(FriendsDynamicData,n),FriendsDynamicData.parse=function(t){return new FriendsDynamicData(i.ItemCollection.getObjectByPath(t,"friendsList",{}))},Object.defineProperty(FriendsDynamicData.prototype,"friends",{get:function(){return this._friends},enumerable:!0,configurable:!0}),FriendsDynamicData}(n.WalletDynamicItem);e.FriendsDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(724)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function ChestsDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(ChestsDynamicData,t),ChestsDynamicData.parse=function(t){return new ChestsDynamicData(i.ChestDynamicItem,n.ItemCollection.getObjectByPath(t,"chest",{}))},ChestsDynamicData}(n.ItemCollection);e.ChestsDynamicData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ChestDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ChestDynamicItem,t),Object.defineProperty(ChestDynamicItem.prototype,"user",{get:function(){return this.getString("user")},enumerable:!0,configurable:!0}),Object.defineProperty(ChestDynamicItem.prototype,"time",{get:function(){return this.getNumber("time")},enumerable:!0,configurable:!0}),ChestDynamicItem}(n.BaseDynamicDataIdentifiable);e.ChestDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(726)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function MailDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(MailDynamicData,t),MailDynamicData.parse=function(t){return new MailDynamicData(i.MailDynamicItem,n.ItemCollection.getObjectByPath(t,"mail",{}))},MailDynamicData}(n.ItemCollection);e.MailDynamicData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(727)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function MailDynamicItem(t,e){var n=i.call(this,t,e)||this;return n._inbox=new r.ItemCollection(o.MailInboxDynamicItem,null),n.assignChildPath("",n._inbox),n.replicateChange(n._inbox),n.initChildren(e),n}return a(MailDynamicItem,i),Object.defineProperty(MailDynamicItem.prototype,"inbox",{get:function(){return this._inbox},enumerable:!0,configurable:!0}),MailDynamicItem}(n.BaseDynamicDataIdentifiable);e.MailDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function MailInboxDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(MailInboxDynamicItem,t),Object.defineProperty(MailInboxDynamicItem.prototype,"itemId",{get:function(){return this.getString("itemId")},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxDynamicItem.prototype,"itemType",{get:function(){return this.getString("itemType")},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxDynamicItem.prototype,"num",{get:function(){return this.getNumber("num")},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxDynamicItem.prototype,"socialId",{get:function(){return this.getString("socialId")},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxDynamicItem.prototype,"time",{get:function(){return this.getNumber("time")},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxDynamicItem.prototype,"userId",{get:function(){return this.getNumber("userId")},enumerable:!0,configurable:!0}),MailInboxDynamicItem}(n.BaseDynamicDataIdentifiable);e.MailInboxDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(323)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function PaymentDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(PaymentDynamicData,t),PaymentDynamicData.parse=function(t){return new PaymentDynamicData(i.PaymentDynamicItem,n.ItemCollection.getObjectByPath(t,"payment",{}))},PaymentDynamicData.prototype.addPayment=function(t){var e=t.id;return this.addItem(e,t)},PaymentDynamicData}(n.ItemCollection);e.PaymentDynamicData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(323)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function Payments2019DynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(Payments2019DynamicData,t),Payments2019DynamicData.parse=function(t){return new Payments2019DynamicData(i.PaymentDynamicItem,n.ItemCollection.getObjectByPath(t,"payments2019",{}))},Payments2019DynamicData}(n.ItemCollection);e.Payments2019DynamicData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(731)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function PromoDynamicData(t){return e.call(this,i.PromoDynamicItem,t)||this}return a(PromoDynamicData,e),PromoDynamicData.parse=function(t){return new PromoDynamicData(n.ItemCollection.getObjectByPath(t,"promo",{}))},PromoDynamicData.prototype.addPromo=function(t,e){this.addItem(t,e)},PromoDynamicData}(n.ItemCollection);e.PromoDynamicData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PromoDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(PromoDynamicItem,t),Object.defineProperty(PromoDynamicItem.prototype,"promoId",{get:function(){return this.getNumber("promoId")},enumerable:!0,configurable:!0}),Object.defineProperty(PromoDynamicItem.prototype,"offerId",{get:function(){return this.getNumber("offerId")},enumerable:!0,configurable:!0}),Object.defineProperty(PromoDynamicItem.prototype,"expireTime",{get:function(){return this.getNumber("expireTime")},set:function(t){this.update({expireTime:t})},enumerable:!0,configurable:!0}),Object.defineProperty(PromoDynamicItem.prototype,"award",{get:function(){return this.getRawValue("award")},enumerable:!0,configurable:!0}),Object.defineProperty(PromoDynamicItem.prototype,"price",{get:function(){return this.getRawValue("price")},enumerable:!0,configurable:!0}),PromoDynamicItem}(n.BaseDynamicDataIdentifiable);e.PromoDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19),n(199)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function ToyXYDynamicData(t){var e=n.call(this,t)||this;return e._screens=new i.ItemCollection(r.ScreenToysDynamicData,null),e.assignChildPath("",e._screens),e.initChildren(e._data),e.replicateChange(e._screens),e}return a(ToyXYDynamicData,n),ToyXYDynamicData.parse=function(t){return new ToyXYDynamicData(i.ItemCollection.getObjectByPath(t,"toyXY",{}))},Object.defineProperty(ToyXYDynamicData.prototype,"screens",{get:function(){return this._screens},enumerable:!0,configurable:!0}),ToyXYDynamicData.prototype.getToyCountOnScreen=function(t,e){var n=0,i=this._screens.getItem(t);if(i)for(var r=0,o=i.toys.items;r<o.length;r++){o[r].toyId===e&&n++}return n},ToyXYDynamicData.prototype.getNextId=function(t){for(var e=0,n=0,i=this._screens.getItem(t).toys.items;n<i.length;n++){var r=i[n],o=parseInt(r.id);e<=o&&(e=o+1)}return e.toString()},ToyXYDynamicData}(n.WalletDynamicItem);e.ToyXYDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19),n(734)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function WorkshopDynamicData(t){var e=n.call(this,t)||this;return e._requiredSlot=new r.RequiredSlotDynamicData(null),e.assignChildPath("slot",e._requiredSlot),e.replicateChange(e._requiredSlot),e.initChildren(t),e}return a(WorkshopDynamicData,n),WorkshopDynamicData.parse=function(t){return new WorkshopDynamicData(i.ItemCollection.getObjectByPath(t,"workshop",{}))},Object.defineProperty(WorkshopDynamicData.prototype,"requiredSlot",{get:function(){return this._requiredSlot},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopDynamicData.prototype,"list",{get:function(){var t=[],e=this.getValue(["list"]);for(var n in e)t.push(e[n]);return t},enumerable:!0,configurable:!0}),WorkshopDynamicData}(n.WalletDynamicItem);e.WorkshopDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RequiredSlotDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(RequiredSlotDynamicData,t),Object.defineProperty(RequiredSlotDynamicData.prototype,"status",{get:function(){return this.getNumber("status")},enumerable:!0,configurable:!0}),Object.defineProperty(RequiredSlotDynamicData.prototype,"elementId",{get:function(){return this.getString("elementId")},enumerable:!0,configurable:!0}),Object.defineProperty(RequiredSlotDynamicData.prototype,"cooldown",{get:function(){return this.getNumber("cooldown")},enumerable:!0,configurable:!0}),Object.defineProperty(RequiredSlotDynamicData.prototype,"sFriendId",{get:function(){return this.getString("sFriendId")},enumerable:!0,configurable:!0}),RequiredSlotDynamicData}(n.WalletDynamicItem);e.RequiredSlotDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(53),n(19),n(736),n(737)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(n){function ViralExchangeDynamicData(t){var e=n.call(this,t)||this;return e._request=new i.ItemCollection(r.ViralExchangeDynamicItem,null),e._response=new i.ItemCollection(r.ViralExchangeDynamicItem,null),e._sentList=new i.ItemCollection(o.ViralExchangeSentListDynamicItem,null),e.assignChildPath("request",e._request),e.assignChildPath("response",e._response),e.assignChildPath("sentList",e._sentList),e.replicateChange(e._request),e.replicateChange(e._response),e.replicateChange(e._sentList),e.initChildren(t),e}return s(ViralExchangeDynamicData,n),ViralExchangeDynamicData.parse=function(t){return new ViralExchangeDynamicData(i.ItemCollection.getObjectByPath(t,"viralExchange",{}))},Object.defineProperty(ViralExchangeDynamicData.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeDynamicData.prototype,"response",{get:function(){return this._response},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeDynamicData.prototype,"sentList",{get:function(){return this._sentList},enumerable:!0,configurable:!0}),ViralExchangeDynamicData}(n.WalletDynamicItem);e.ViralExchangeDynamicData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ViralExchangeDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ViralExchangeDynamicItem,t),Object.defineProperty(ViralExchangeDynamicItem.prototype,"socialId",{get:function(){return this.getString("socialId")},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeDynamicItem.prototype,"userId",{get:function(){return this.getNumber("userId")},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeDynamicItem.prototype,"time",{get:function(){return this.getNumber("time")},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeDynamicItem.prototype,"num",{get:function(){return this.getNumber("num")},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeDynamicItem.prototype,"itemId",{get:function(){return this.getString("itemId")},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeDynamicItem.prototype,"key",{get:function(){return this.id},enumerable:!0,configurable:!0}),ViralExchangeDynamicItem}(n.BaseDynamicDataIdentifiable);e.ViralExchangeDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ViralExchangeSentListDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ViralExchangeSentListDynamicItem,t),Object.defineProperty(ViralExchangeSentListDynamicItem.prototype,"socialId",{get:function(){return this.getString("socialId")},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeSentListDynamicItem.prototype,"resourceId",{get:function(){return this.getString("resourceId")},enumerable:!0,configurable:!0}),ViralExchangeSentListDynamicItem}(n.BaseDynamicDataIdentifiable);e.ViralExchangeSentListDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(739)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function GuideData(){var t=e.call(this)||this;return t._tutorialEventData="",t._whiteLists=new i.GuideWhiteLists,t._stepsTimestamps=new core.Map,t._lastQueueStep=new core.Map,t}return a(GuideData,e),GuideData.prototype.markChanged=function(){this.dispatchEvent(new n.BaseDataEvent(n.BaseDataEvent.CHANGED))},Object.defineProperty(GuideData.prototype,"tutorialEventData",{get:function(){return this._tutorialEventData},set:function(t){this._tutorialEventData=t},enumerable:!0,configurable:!0}),Object.defineProperty(GuideData.prototype,"lastTriggerId",{get:function(){return this._lastTriggerId},set:function(t){this._lastTriggerId=t,this.markChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(GuideData.prototype,"whiteLists",{get:function(){return this._whiteLists},enumerable:!0,configurable:!0}),GuideData.prototype.setTimestamp=function(t,e,n){this._stepsTimestamps.set(this.getTimestampName(t,e),n),this._lastQueueStep.set(t,e)},GuideData.prototype.getTimestamp=function(t,e){return this._stepsTimestamps.get(this.getTimestampName(t,e))},GuideData.prototype.getLastTimestampedStep=function(t){return this._lastQueueStep.get(t)},GuideData.prototype.getTimestampName=function(t,e){return t+"_"+e},GuideData}(uipixi.BaseEventTarget);e.GuideData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(26),n(35),n(36)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function GuideWhiteLists(){this._lists=[]}return GuideWhiteLists.prototype.add=function(t){this._lists.push(t),this.updateViewService()},GuideWhiteLists.prototype.remove=function(t){var e=this._lists.indexOf(t);-1!==e?(this._lists.splice(e,1),this.updateViewService()):n.Application.debug.sendLog("Guide: unknown white list","",r.LogFlag.CLIENT,o.LogLevel.Warning)},GuideWhiteLists.prototype.clear=function(){this._lists.length=0,this.updateViewService()},GuideWhiteLists.prototype.updateViewService=function(){var t=this.getAllowedWindows();n.Application.view.setWhiteListConfig(i.WindowLayer.WINDOWS,t?{names:t}:null)},GuideWhiteLists.prototype.getAllowedWindows=function(){if(0===this._lists.length)return null;for(var t=[],e=0,n=this._lists;e<n.length;e++)for(var i=0,r=n[e].windows;i<r.length;i++){var o=r[i];-1===t.indexOf(o)&&t.push(o)}return t},GuideWhiteLists}();e.GuideWhiteLists=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(19),n(53),n(741)],void 0===(r=function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function ViralRefTokensDynamicData(t){var e=n.call(this,t)||this;return e._tokens=new i.ItemCollection(r.ViralRefDynamicItem,null),e.assignChildPath("",e._tokens),e.replicateChange(e._tokens),e.initChildren(t),e}return a(ViralRefTokensDynamicData,n),ViralRefTokensDynamicData.parse=function(t){return new ViralRefTokensDynamicData(i.ItemCollection.getObjectByPath(t,"viralRefTokens",{}))},Object.defineProperty(ViralRefTokensDynamicData.prototype,"tokens",{get:function(){return this._tokens},enumerable:!0,configurable:!0}),ViralRefTokensDynamicData}(n.WalletDynamicItem);e.ViralRefTokensDynamicData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ViralRefDynamicItem(){return null!==t&&t.apply(this,arguments)||this}return a(ViralRefDynamicItem,t),Object.defineProperty(ViralRefDynamicItem.prototype,"token",{get:function(){return this.getString("")},enumerable:!0,configurable:!0}),ViralRefDynamicItem}(n.BaseDynamicDataIdentifiable);e.ViralRefDynamicItem=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(17)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function UIPIXILogger(){this.CHANNEL_NAME="ui-pixi"}return UIPIXILogger.prototype.log=function(t){n.Services.debug.addWarning(this.CHANNEL_NAME,t)},UIPIXILogger}();e.UIPIXILogger=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function RequirementsTreeViewTypeStaticData(){}return RequirementsTreeViewTypeStaticData.parse=function(t){var e=new RequirementsTreeViewTypeStaticData;return e._parse(t),e},Object.defineProperty(RequirementsTreeViewTypeStaticData.prototype,"textKey",{get:function(){return this._textKey},enumerable:!0,configurable:!0}),RequirementsTreeViewTypeStaticData.prototype._parse=function(t){this._textKey=jQuery("> textKey",t).first().text()},RequirementsTreeViewTypeStaticData}();e.RequirementsTreeViewTypeStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(13),n(131),n(0),n(45),n(202)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.BaseEventTarget,c=function(){function DynamicDataWaitChangeAdapter(t,e){void 0===e&&(e=null),this._timeJob=0,this._valueInfos=t,this._running=!1,this._callbacksCount=0,this._eventTarget=new s,this._timeJob=null,this._context=e}return DynamicDataWaitChangeAdapter.prototype.addCallback=function(t){this._eventTarget.hasListener(n.BaseDataEvent.CHANGED,t)||(this._eventTarget.addEventListener(n.BaseDataEvent.CHANGED,t),this._callbacksCount++)},DynamicDataWaitChangeAdapter.prototype.removeCallback=function(t){this._eventTarget.hasListener(n.BaseDataEvent.CHANGED,t)&&(this._eventTarget.removeEventListener(n.BaseDataEvent.CHANGED,t),this._callbacksCount--)},Object.defineProperty(DynamicDataWaitChangeAdapter.prototype,"isEmpty",{get:function(){return 0===this._callbacksCount},enumerable:!0,configurable:!0}),DynamicDataWaitChangeAdapter.prototype.start=function(){this._running=!0;for(var t=0,e=this._valueInfos;t<e.length;t++){var n=e[t];n.operator===i.DataOperatorType.TIME_LEFT||n.operator===i.DataOperatorType.TIMESPENT?0===this._timeJob&&(this._timeJob=r.Application.date.callProcessor.repeatCall(this.changedHandler.bind(this,null),this._context&&this._context.setted?this._context.millisecondsToUpdate:o.TIME.MS_IN_SECOND)):n instanceof a.DateValueInfo?0===this._timeJob&&this._context.setted&&(this._timeJob=r.Application.date.callProcessor.delayCall(this.changedHandler.bind(this,null),this._context.millisecondsToUpdate)):r.Application.dataProvider.addWaitChange(n,this.changedHandler.bind(this))}},DynamicDataWaitChangeAdapter.prototype.stop=function(){this._timeJob&&(r.Application.date.callProcessor.deleteCall(this._timeJob),this._timeJob=0);for(var t=0,e=this._valueInfos;t<e.length;t++){var n=e[t];r.Application.dataProvider.removeWaitChange(n,this.changedHandler.bind(this))}this._running=!1},Object.defineProperty(DynamicDataWaitChangeAdapter.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),DynamicDataWaitChangeAdapter.prototype.changedHandler=function(t){this._eventTarget.dispatchEvent(new n.BaseDataEvent(n.BaseDataEvent.CHANGED))},DynamicDataWaitChangeAdapter}();e.DynamicDataWaitChangeAdapter=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(45)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function WaitChangeContext(t){this._secondsToUpdate=WaitChangeContext.NOT_SET,this._secondsToUpdate=t}return Object.defineProperty(WaitChangeContext.prototype,"secondsToUpdate",{get:function(){return this._secondsToUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(WaitChangeContext.prototype,"millisecondsToUpdate",{get:function(){return this._secondsToUpdate*n.TIME.MS_IN_SECOND},enumerable:!0,configurable:!0}),Object.defineProperty(WaitChangeContext.prototype,"setted",{get:function(){return this._secondsToUpdate!=WaitChangeContext.NOT_SET},enumerable:!0,configurable:!0}),WaitChangeContext.NOT_SET=-1,WaitChangeContext}();e.WaitChangeContext=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(335)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ProfilesPartLoader(t,e){var n=i.call(this)||this;return n._inProcess=!1,n._interval=e,n._params={offset:0,count:t},n}return a(ProfilesPartLoader,i),ProfilesPartLoader.prototype.start=function(){this._processCall=n.Application.date.callProcessor.repeatCall(this.process.bind(this),this._interval),this.process()},ProfilesPartLoader.prototype.stop=function(){n.Application.date.callProcessor.deleteCall(this._processCall)},ProfilesPartLoader.prototype.process=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this._inProcess?[2]:(this._inProcess=!0,[4,n.Application.social.platform.getFriends(this._params)]);case 1:return(e=t.sent()).users.length<this._params.count&&this.stop(),this._params.offset+=this._params.count,this.dispatchEvent(new r.ProfilesPartLoaderEvent(r.ProfilesPartLoaderEvent.PROFILES_LOADED,e.users.concat())),this._inProcess=!1,[2]}})})},ProfilesPartLoader}(uipixi.BaseEventTarget);e.ProfilesPartLoader=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(205),n(0),n(137),n(206),n(143)],void 0===(r=function(t,e,n,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostProcessorOK(){return null!==t&&t.apply(this,arguments)||this}return p(WallpostProcessorOK,t),WallpostProcessorOK.prototype.post=function(r,o){return l(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:return(e=this.getStaticItem(r))?((n=[]).push(new s.WallpostTextAttachment(this.processText(e.text,o))),e.photo&&n.push(new s.WallpostAttachment(s.WallpostAttachmentType.APP,{images:[{url:e.photo,title:a.Application.localization.localize(a.Application.static.data.wallposts.title),mark:a.Application.social.viralWallpostLink+"&wallpost="+r}]})),[4,a.Application.social.platform.wallPost("","",n,!1)]):[2,new c.WallpostResult(!1,u.WallpostErrorCode.NotFound)];case 1:return i=t.sent(),[2,new c.WallpostResult(i.success,i.errorCode)]}})})},WallpostProcessorOK}(n.WallpostProcessor);e.WallpostProcessorOK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function WallpostAwardAction(t){var e=n.call(this)||this;return e.controller="wallpost",e.action="post",e.input=new i.ActionInput({id:t}),e.output=new o,e}return a(WallpostAwardAction,n),WallpostAwardAction}(n.Action);e.WallpostAwardAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),f=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},y=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(205),n(0),n(137),n(206),n(143),n(28)],void 0===(r=function(t,e,n,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostProcessorVK(){return null!==t&&t.apply(this,arguments)||this}return a(WallpostProcessorVK,t),WallpostProcessorVK.prototype.post=function(s,c,u){return f(this,void 0,void 0,function(){var e,n,i,r,o,a;return y(this,function(t){switch(t.label){case 0:return(e=this.getStaticItem(s))?(n=p.Application.social.getAppUrl(),i=n+(-1!==n.indexOf("#")?"&":"#")+"wallpost="+s,(r=[]).push(new l.WallpostAttachment(l.WallpostAttachmentType.LINK,{mediaId:i})),o=this.processText(e.text,c),o+=" "+i,e.photo&&r.push(new l.WallpostAttachment(l.WallpostAttachmentType.LINK,{mediaId:e.photo})),u=u||_.Core.instance.config.userIdPlatform,[4,p.Application.social.platform.wallPost(u,o,r,!1)]):[2,new d.WallpostResult(!1,h.WallpostErrorCode.NotFound)];case 1:return a=t.sent(),[2,new d.WallpostResult(a.success,a.errorCode)]}})})},WallpostProcessorVK}(n.WallpostProcessor);e.WallpostProcessorVK=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(205),n(206),n(28),n(0),n(4),n(143)],void 0===(r=function(t,e,n,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WallpostProcessorFB(){return null!==t&&t.apply(this,arguments)||this}return l(WallpostProcessorFB,t),WallpostProcessorFB.prototype.post=function(r,o){return d(this,void 0,void 0,function(){var e,n,i;return h(this,function(t){switch(t.label){case 0:if(!this.getStaticItem(r))return[2,new a.WallpostResult(!1,p.WallpostErrorCode.NotFound)];if(e=u.ElkaCore.instance.config.protocol+"://"+u.ElkaCore.instance.config.serverHost+"/fbWallpost/get?wallpostId="+r+"&userId="+s.Core.instance.config.userId+"&sex="+(c.Application.profiles.current.isMale?2:1)+"&locale="+c.Application.localization.locale,c.Application.social.viralLink&&(e+="&viralRefId=1"),o)for(n in o)e+="&"+n+"="+o[n];return[4,c.Application.social.platform.wallPost(null,e,[],!1)];case 1:return i=t.sent(),[2,new a.WallpostResult(i.success,i.errorCode)]}})})},WallpostProcessorFB}(n.WallpostProcessor);e.WallpostProcessorFB=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(93),n(17),n(94),n(35),n(36)],void 0===(r=function(t,e,o,a,s,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function StarkEventSystem(t){this._systemName=t,this._counter=1,this._firstSession=!1,this._queue=[],this._triesCounter=0,this._nowLoadingEvents=[],this._initialized=!1,this._batchDelayJob=null,this._resendTime=StarkEventSystem.RESEND_TIME}return StarkEventSystem.prototype.init=function(t,e,n,i){this._urlString=t,this._userId=e,this._sessionId=n,this._firstSession=i,this._counter=1,this._initialized=!0},StarkEventSystem.prototype.prepareParams=function(t){return t.n=this._counter,t.session=this._sessionId,this._firstSession&&(t.first=this._firstSession),{params:t,user_id:this._userId}},StarkEventSystem.prototype.goal=function(t,e){this._initialized&&((e=this.prepareParams(e)).event=t,this._counter++,this._queue.push(e),this.checkQueue())},StarkEventSystem.prototype.checkQueue=function(){0<this._nowLoadingEvents.length||0<this._queue.length&&(1===this._queue.length?this.startBatchTimer():this.sendAwaitingEventsInternal())},StarkEventSystem.prototype.sendAwaitingEventsInternal=function(){return c(this,void 0,void 0,function(){var e,n,i,r;return u(this,function(t){switch(t.label){case 0:if(null!==this._batchDelayJob)return[2];e=JSON.stringify(this._queue),this.log("отправка эвентов ("+this._queue.length+"): "+e),e=encodeURIComponent(e),this._nowLoadingEvents=this._queue.concat(),this._queue=[],(n=new o.Request).data="json="+e,n.url=this._urlString,n.timeout=StarkEventSystem.REQUEST_TIMEOUT,n.type="text",n.method="POST",n.queueId=StarkEventSystem.NETWORK_QUEUE_ID,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.Services.network.sendRequest(n)];case 2:return t.sent(),[3,4];case 3:return i=t.sent(),r=void 0,r=i instanceof s.NetworkError?"Network error: "+i.text:i.message,this.log("ошибка отправки: "+r),a.Services.date.callProcessor.delayCall(this.trySendAfterError.bind(this),this._resendTime,r),[2];case 4:return this._nowLoadingEvents=[],this._triesCounter=0,this.checkQueue(),[2]}})})},StarkEventSystem.prototype.trySendAfterError=function(t){if(0!==this._nowLoadingEvents.length){if(this._triesCounter++,this._triesCounter==StarkEventSystem.NUM_TRIES){this.log("достигнут лимит попыток отправки: "+StarkEventSystem.NUM_TRIES);var e=this._systemName+"_"+(new Date).getTime(),n=JSON.stringify(this._nowLoadingEvents);a.Services.debug.addError(e,t),a.Services.debug.addLog(e,"failed events ("+this._nowLoadingEvents.length+"): "+n),a.Services.debug.sendLog("cannot send events","",i.LogFlag.CLIENT,r.LogLevel.Info,e),this._triesCounter=0,this._resendTime+=StarkEventSystem.RESEND_TIME_INCREMENT}this._queue=this._nowLoadingEvents.concat(this._queue),this._nowLoadingEvents=[],this.checkQueue()}},StarkEventSystem.prototype.log=function(t){a.Services.debug.addLog(this._systemName,t)},StarkEventSystem.prototype.startBatchTimer=function(){this._batchDelayJob=a.Services.date.callProcessor.delayCall(this.sendBatchedEvents.bind(this),StarkEventSystem.BATCH_WAIT_TIME)},StarkEventSystem.prototype.sendBatchedEvents=function(){this._batchDelayJob=null,this.sendAwaitingEventsInternal()},StarkEventSystem.NETWORK_QUEUE_ID=1,StarkEventSystem.NUM_TRIES=3,StarkEventSystem.REQUEST_TIMEOUT=1e4,StarkEventSystem.RESEND_TIME=1e3,StarkEventSystem.RESEND_TIME_INCREMENT=2e3,StarkEventSystem.BATCH_WAIT_TIME=500,StarkEventSystem}();e.StarkEventSystem=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(207)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function SettingsData(){var t=null!==e&&e.apply(this,arguments)||this;return t._soundOn=!0,t._musicOn=!0,t._animationsOn=!0,t._snowOn=!0,t}return a(SettingsData,e),Object.defineProperty(SettingsData.prototype,"musicOn",{get:function(){return this._musicOn},set:function(t){this._musicOn!==t&&(this._musicOn=t,this.dispatchEvent(new n.SettingsEvent(n.SettingsEvent.MUSIC_ON_CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(SettingsData.prototype,"soundOn",{get:function(){return this._soundOn},set:function(t){this._soundOn!==t&&(this._soundOn=t,this.dispatchEvent(new n.SettingsEvent(n.SettingsEvent.SOUND_ON_CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(SettingsData.prototype,"animationsOn",{get:function(){return this._animationsOn},set:function(t){this._animationsOn!==t&&(this._animationsOn=t,this.dispatchEvent(new n.SettingsEvent(n.SettingsEvent.ANIMATIONS_ON_CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(SettingsData.prototype,"snowOn",{get:function(){return this._snowOn},set:function(t){this._snowOn!==t&&(this._snowOn=t,this.dispatchEvent(new n.SettingsEvent(n.SettingsEvent.SNOW_ON_CHANGED)))},enumerable:!0,configurable:!0}),SettingsData}(uipixi.BaseEventTarget);e.SettingsData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function FilterRule(t,e){void 0===e&&(e=null),null===t&&(t="*"),null===e&&(e="*"),this._path=t,this._url=e}return Object.defineProperty(FilterRule.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(FilterRule.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),FilterRule}();e.FilterRule=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(755),n(342)],void 0===(r=function(t,e,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(c){function ClientParamsModel(t,e){var n=c.call(this)||this;n._params=[];for(var i=0,r=e.param.items;i<r.length;i++){var o=r[i];if(!t.getItem(o.id.toString())){var a={};a[o.id.toString()]=void 0,t.update(a)}var s=new u.ClientParamModel(t.getItem(o.id.toString()),o);n._params.push(s),s.addEventListener(p.ClientParamsModelEvent.CHANGED,n.onChanged.bind(n))}return n}return a(ClientParamsModel,c),ClientParamsModel.prototype.onChanged=function(){this.dispatchEvent(new p.ClientParamsModelEvent(p.ClientParamsModelEvent.CHANGED))},ClientParamsModel.prototype.getParam=function(t){for(var e=0,n=this._params;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},ClientParamsModel}(uipixi.BaseEventTarget);e.ClientParamsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(342)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ClientParamModel(t,e){var n=i.call(this)||this;return n._dynamic=t,n._dynamic.addEventListener(r.BaseDataEvent.CHANGED,n.onDataChanged.bind(n)),n._static=e,n._id=e.id,n}return a(ClientParamModel,i),ClientParamModel.prototype.onDataChanged=function(){this.dispatchEvent(new n.ClientParamsModelEvent(n.ClientParamsModelEvent.CHANGED))},Object.defineProperty(ClientParamModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamModel.prototype,"number",{get:function(){return this._dynamic.number},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamModel.prototype,"string",{get:function(){return this._dynamic.string},enumerable:!0,configurable:!0}),ClientParamModel}(uipixi.BaseEventTarget);e.ClientParamModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(757)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function SetClientParamCommand(){return null!==t&&t.apply(this,arguments)||this}return a(SetClientParamCommand,t),SetClientParamCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.SetClientParamAction(e.id,e.value))];case 1:return t.sent(),[2]}})})},SetClientParamCommand}(n.CommandBase);e.SetClientParamCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SetClientParamAction(t,e){var n=i.call(this)||this;return n.action="set",n.controller="clientParam",n.input=new r.ActionInput({id:t,value:e}),n.output=new o,n}return a(SetClientParamAction,i),SetClientParamAction}(n.Action);e.SetClientParamAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GameInitPromise(){return t.call(this)||this}return a(GameInitPromise,t),GameInitPromise}(n.BasePromise);e.GameInitPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},g=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(760),n(4),n(28),n(5),n(346),n(33),n(29),n(117)],void 0===(r=function(t,e,n,h,_,f,y,m,v,i,r,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function GameInitCommand(){return null!==t&&t.apply(this,arguments)||this}return a(GameInitCommand,t),GameInitCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p,l,d;return g(this,function(t){switch(t.label){case 0:return e=h.Application.static.data.friends.limit,n=h.Application.profiles.friendsSocialIds.slice(0,e),[4,h.Application.social.getAdditionalInfo()];case 1:return i=t.sent(),r=this.generateSocialData(i),[4,h.Application.social.parseRefLink("viral",/viral=(vlink_[0-9a-zA-z%]+)/g,"vlink_",!0)];case 2:return(o=t.sent())?[3,4]:[4,h.Application.social.parseRefLink("blink",/blink=(blink_[0-9a-zA-z%]+)/g,"blink_",!1)];case 3:o=t.sent(),t.label=4;case 4:return a=this.generateSessionData(),[4,h.Application.social.platform.getIdsForBusiness()];case 5:return s=t.sent(),c=s.success?s.data:null,h.Application.dynamic.idsForBusiness=c,u=new _.GameInitAction(n,r,a,o,f.ElkaCore.instance.config.signedRequest,c),[4,y.Core.instance.promiseManager.ask(new b.GameInitServerPromise(u))];case 6:return t.sent(),p=u.output.data,h.Application.operation.forceApply(p.user,u.output.op),h.Application.dynamic.setData(p),f.ElkaCore.instance.config.sessionKey=h.Application.dynamic.user.session,(l=h.Application.dynamic.viralRefTokens.tokens.getItem("1"))&&(h.Application.social.viralLink=l.token),-1!==h.Application.dynamic.user.screen?[3,8]:(d=m.Utils.parseInt(h.Application.static.data.screens.startingScreen,1),[4,f.ElkaCore.instance.promiseManager.ask(new v.SetScreenPromise(d))]);case 7:t.sent(),t.label=8;case 8:return h.Application.social.platform.setCount(0),[2]}})})},GameInitCommand.prototype.generateSocialData=function(t){var e={},n=h.Application.profiles.current;return n.gender&&(e.sex="male"===n.gender?"m":"f"),n.birthday&&6<n.birthday.length&&(e.bdate=r.DateUtils.dateToDDMMYYYY(new Date(n.birthday))),n.lang&&(e.lang=n.lang),n.city&&(e.city=n.city),n.country&&(e.country=n.country),n.email&&(e.email=n.email),h.Application.social.platformType===i.PlatformType.OK&&(e.ok_last_payment=t.lastPayment,e.ok_ok_payer=t.okPayer,e.ok_balance=t.balance,e.ok_app_payer=t.appPayer,e.ok_player=t.player),e},GameInitCommand.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.Application.debug.addLog("gameInit",t)},GameInitCommand.prototype.generateSessionData=function(){var t={};return t.browserType=h.Application.metrics.browserType,t.browserName=h.Application.metrics.browserId,t.deviceId=h.Application.metrics.device,t.sessionId=f.ElkaCore.instance.config.fluentSession,t.applicationType=f.ElkaCore.instance.config.mobile?2:1,t},GameInitCommand}(n.CommandBase);e.GameInitCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(s){function GameInitAction(t,e,n,i,r,o){var a=s.call(this)||this;return a.action="init",a.controller="game",a.input=new c,a.output=new u,a.input.socialData=e,a.input.sessionData=n,a.input.friendIds=t.concat(),i&&(a.input.starkReferrer=i),r&&(a.input.signedRequest=r),o&&(a.input.businessList=o),a}return a(GameInitAction,s),GameInitAction}(n.Action);e.GameInitAction=i;var c=function(){function GameInitActionInput(){this.friendIds=[],this.socialData=null,this.sessionData=null,this.signedRequest="",this.businessList=null,this.starkReferrer=""}return GameInitActionInput.prototype.serializeObj=function(){return{friendIds:this.friendIds,socialData:this.socialData,signedRequest:this.signedRequest,businessList:this.businessList,starkReferrer:this.starkReferrer,sessionData:this.sessionData}},GameInitActionInput}(),u=function(){function GameInitActionOutput(){}return GameInitActionOutput.prototype.parse=function(t){this.data=t.data,this.op=t.op},GameInitActionOutput}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},v=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(49),n(762),n(763),n(349),n(351),n(209)],void 0===(r=function(t,e,l,d,h,_,f,y,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function BuyDirectPurchasePromoCommand(){return null!==t&&t.apply(this,arguments)||this}return a(BuyDirectPurchasePromoCommand,t),BuyDirectPurchasePromoCommand.prototype.processPurchase=function(p){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u;return v(this,function(t){switch(t.label){case 0:if(!(e=l.Application.static.data.promos.promo.getItem(p.promoId)).directPurchase)throw Error("Promo should be available for direct purchase");return l.Application.requirements.check(e.buyRequirements)?[3,2]:(this.log("Promo requirements are not satisfied"),[4,this.rejectPurchase(m.BuyPromoError.Error)]);case 1:return t.sent(),[2];case 2:if(n=p.offerId,!(i=e.offers.getItem(n)))throw Error("Offer is not found");return l.Application.requirements.check(i.requirements)?[3,4]:(this.log("Offer requirements are not satisfied"),[4,this.rejectPurchase(m.BuyPromoError.Error)]);case 3:return t.sent(),[2];case 4:if(r=l.Application.price.calculate(i.prices),1<p.count){if(!e.multiOffer)throw Error("Count param is supported only for multiOffer promo");r.multiply(p.count)}return o=void 0,r.hasPriceType(d.PriceType.REAL)?(s=l.Application.localization.localize(i.title||e.title),[4,this.realPurchaseOrReject(e.id,n,y.PreorderType.DirectPurchase,r.getPriceFirst(d.PriceType.REAL).value,s)]):[3,6];case 5:return(a=t.sent())===f.RealPurchaseState.FailOrCancel?[2]:[3,12];case 6:return(c=l.Application.price.hold(r)).success?[3,8]:[4,this.rejectPurchase(m.BuyPromoError.NotEnoughPrice)];case 7:return t.sent(),[2];case 8:return p.friend?[4,l.Application.server.send(new h.PromoPresentAction(e.id,n,p.friend.socialId,p.friend.hash))]:[3,10];case 9:return t.sent(),l.Application.price.release(c),[3,12];case 10:return[4,l.Application.server.send(new _.PromoBuyOfferAction(e.id,n,p.count))];case 11:u=t.sent(),l.Application.price.release(c),p.accrueAwardImmediate&&l.Application.award.accrueAwardImmediately(u.output.award),o=u.output.award,t.label=12;case 12:return this.resolvePurchase(p,o,a===f.RealPurchaseState.Async),[2]}})})},BuyDirectPurchasePromoCommand}(f.AbstractBuyPromoCommand);e.BuyDirectPurchasePromoCommand=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function PromoPresentAction(t,e,n,i){var r=o.call(this)||this;return r.action="present",r.controller="promo",r.input=new a.ActionInput({promoId:t,offerId:e,sFriendId:n,hash:i}),r.output=new s,r}return c(PromoPresentAction,o),PromoPresentAction}(n.Action);e.PromoPresentAction=i;var s=function(){function Output(){}return Output.prototype.parse=function(t){this.price=t.data.price},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function PromoBuyOfferAction(t,e,n){void 0===e&&(e=null),void 0===n&&(n=1);var i=r.call(this)||this;return i.action="buyOffer",i.controller="promo",i.input=new o.ActionInput({promoId:t,offerId:e,count:n}),i.output=new a,i}return s(PromoBuyOfferAction,r),PromoBuyOfferAction}(n.Action);e.PromoBuyOfferAction=i;var a=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.price=t.data.price},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function PaymentsModel(){}return Object.defineProperty(PaymentsModel.prototype,"isPurchaseActive",{get:function(){return this._isPurchaseActive},set:function(t){this._isPurchaseActive=t},enumerable:!0,configurable:!0}),PaymentsModel}();e.PaymentsModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(a){function BuyDirectPurchasePromoPromise(t,e,n,i,r){var o=a.call(this)||this;return o.promoId=t,o.offerId=e,o.count=n,o.friend=i,o.accrueAwardImmediate=r,o}return s(BuyDirectPurchasePromoPromise,a),BuyDirectPurchasePromoPromise}(n.BasePromise);e.BuyDirectPurchasePromoPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(13)],void 0===(r=function(t,e,c,r){"use strict";var n,i,o,a;Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function PaymentDataProvider(t,e){this._segment=t,this._currentPayments=c.Application.dynamic.payment,this._prevPayments=c.Application.dynamic.payments2019,this._utils=e}return PaymentDataProvider.prototype.getValue=function(t,r){var e=t.split("."),n=e[0],i=e[1];if(void 0!==e[2])throw new Error("PaymentDataProvider: invalid path "+t);if(n===PaymentDataProvider.TYPE_SEGMENT)return this._segment;if(!PaymentDataProvider._paymentTypes[n])throw new Error("PaymentDataProvider: unsupported type "+n);var o=[];if(PaymentDataProvider._prevPaymentTypes[n]&&o.push.apply(o,this._utils.getSuccessPrevPayments()),PaymentDataProvider._currentPaymentTypes[n])o.push.apply(o,this._utils.getSuccessCurrentPayments());else if(PaymentDataProvider._currentIncludedPaymentTypes[n]){var a=c.Application.static.data.promos.promo;o.push.apply(o,this._utils.getSuccessCurrentPayments().filter(function(t){return 1!==a.getItem(t.item_id).excluded}))}o.sort(function(t,e){return e.payment_time-t.payment_time});var s=0;switch(o=o.filter(function(t){for(var e=0,n=r;e<n.length;e++){var i=n[e];switch(i.type){case"itemId":if(-1===i.values.indexOf(t.item_id.toString()))return!1;break;case"itemCount":if(s>=parseInt(i.values[0]))return!1;break;case"days":if(t.payment_time<c.Application.date.currentTime-86400*parseInt(i.values[0]))return!1;break;case"itemExtraId":if(-1===i.values.indexOf(t.item_extra_id.toString()))return!1;break;default:throw new Error("PaymentDataProvider: unsupported filter "+i.type)}}return s++,!0}),i){case"price":return o.map(function(t){return t.price});case void 0:return c.Application.debug.addError("promo","PaymentDataProvider: deprecated undefined parameter"),o;default:throw new Error("PaymentDataProvider: unsupported parameter "+i)}},PaymentDataProvider.prototype.watch=function(t,e){var n=t.split("."),i=n[0];n[1];(PaymentDataProvider._currentPaymentTypes[i]||PaymentDataProvider._currentIncludedPaymentTypes[i])&&this._currentPayments.addEventListener(r.BaseDataEvent.CHANGED,e),PaymentDataProvider._prevPaymentTypes[i]&&this._prevPayments.addEventListener(r.BaseDataEvent.CHANGED,e)},PaymentDataProvider.prototype.unwatch=function(t,e){var n=t.split("."),i=n[0];n[1];(PaymentDataProvider._currentPaymentTypes[i]||PaymentDataProvider._currentIncludedPaymentTypes[i])&&this._currentPayments.removeEventListener(r.BaseDataEvent.CHANGED,e),PaymentDataProvider._prevPaymentTypes[i]&&this._prevPayments.removeEventListener(r.BaseDataEvent.CHANGED,e)},PaymentDataProvider.TYPE_CURRENT="current",PaymentDataProvider.TYPE_PREV="prev",PaymentDataProvider.TYPE_ALL="all",PaymentDataProvider.TYPE_ALL_INCLUDED="allIncluded",PaymentDataProvider.TYPE_CURRENT_INCLUDED="currentIncluded",PaymentDataProvider.TYPE_SEGMENT="segment",PaymentDataProvider._paymentTypes=((n={})[PaymentDataProvider.TYPE_CURRENT]=!0,n[PaymentDataProvider.TYPE_PREV]=!0,n[PaymentDataProvider.TYPE_ALL]=!0,n[PaymentDataProvider.TYPE_ALL_INCLUDED]=!0,n[PaymentDataProvider.TYPE_CURRENT_INCLUDED]=!0,n),PaymentDataProvider._prevPaymentTypes=((i={})[PaymentDataProvider.TYPE_PREV]=!0,i[PaymentDataProvider.TYPE_ALL]=!0,i[PaymentDataProvider.TYPE_ALL_INCLUDED]=!0,i),PaymentDataProvider._currentPaymentTypes=((o={})[PaymentDataProvider.TYPE_CURRENT]=!0,o[PaymentDataProvider.TYPE_ALL]=!0,o),PaymentDataProvider._currentIncludedPaymentTypes=((a={})[PaymentDataProvider.TYPE_ALL_INCLUDED]=!0,a[PaymentDataProvider.TYPE_CURRENT_INCLUDED]=!0,a),PaymentDataProvider}();e.PaymentDataProvider=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(118)],void 0===(r=function(t,e,n,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function PaymentUtils(){}return PaymentUtils.prototype.getSuccessCurrentPayments=function(){return this.getSuccessPayments(n.Application.dynamic.payment.items)},PaymentUtils.prototype.getSuccessPrevPayments=function(){return this.getSuccessPayments(n.Application.dynamic.payments2019.items)},PaymentUtils.prototype.getSuccessPayments=function(t){return t.filter(function(t){return!0===PaymentUtils.SUCCESS_PAYMENT_STATUS_MAP[t.award_status]})},PaymentUtils.SUCCESS_PAYMENT_STATUS_MAP=((r={})[i.PaymentAwardStatus.GRANTED]=!0,r[i.PaymentAwardStatus.PENDING]=!0,r[i.PaymentAwardStatus.REFUND_GRANTED]=!0,r),PaymentUtils}();e.PaymentUtils=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function CalculateSegmentPromise(){return t.call(this)||this}return a(CalculateSegmentPromise,t),CalculateSegmentPromise}(n.BasePromise);e.CalculateSegmentPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0)],void 0===(r=function(t,e,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function CalculateSegmentCommand(){return null!==t&&t.apply(this,arguments)||this}return a(CalculateSegmentCommand,t),CalculateSegmentCommand.prototype.execute=function(a){return c(this,void 0,void 0,function(){var e,n,i,r,o;return u(this,function(t){switch(t.label){case 0:return e=this._data.utils.getSuccessCurrentPayments(),n=this._data.utils.getSuccessPrevPayments(),[4,s.Application.social.getAdditionalInfo()];case 1:return i=t.sent(),r=i.success&&"sms"===i.lastPayment,o=this.calculateSegment(e.length,this.calculateAvgCheck(e),r,n.length,this.calculateAvgCheck(n)),a.resolve(o),[2]}})})},CalculateSegmentCommand.prototype.calculateAvgCheck=function(t){var e=0;if(0<t.length){for(var n=0,i=t;n<i.length;n++){e+=i[n].price}e/=t.length}return e},CalculateSegmentCommand.prototype.calculateSegment=function(t,e,n,i,r){var o=s.Application.static.data.cashSegments;return t>o.currentPaymentsCount?e>=o.avgCheck?3:n?1:2:i>o.prevPaymentsCount?r>=o.avgCheck?3:n?1:2:1},CalculateSegmentCommand}(n.CommandBase);e.CalculateSegmentCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(210),n(771),n(0),n(4),n(87),n(61),n(56),n(33),n(352)],void 0===(r=function(t,e,n,a,s,c,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PreorderCommand(){return null!==t&&t.apply(this,arguments)||this}return f(PreorderCommand,t),PreorderCommand.prototype.execute=function(o){return y(this,void 0,void 0,function(){var e,n,i,r;return m(this,function(t){switch(t.label){case 0:e=new s.CreatePreorderAction(o.offerId,o.promoId,c.Application.localization.locale,o.type),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,c.Application.server.send(e)];case 2:return t.sent(),[3,4];case 3:if(!((n=t.sent())instanceof l.ServerError))throw n;return n.code===d.ServerErrorCode.PROMO_BUY_REQUIREMENT&&(n.stopPropagation(),n.data&&(i=parseInt(n.data.preorderId),!isNaN(i)))?(c.Application.debug.addLog("payment","414 error: payment exists:",i),o.resolve({success:!0,orderId:i}),[2]):(o.resolve({success:!1,error:a.PreorderError.Unknown}),[3,4]);case 4:return c.Application.view.ui.fullscreen.fullscreenEnabled&&c.Application.view.ui.fullscreen.inFullscreen&&c.Application.view.ui.fullscreen.exitFullscreen(),[4,c.Application.social.platform.orderProduct({orderId:e.output.orderId,name:o.title,price:o.realPriceValue,link:u.ElkaCore.instance.config.protocol+"://"+u.ElkaCore.instance.config.serverHost+e.output.link})];case 5:switch(r=t.sent(),c.Application.debug.addLog("payment","Platform order response status:",r.status),r.status){case p.OrderStatus.UNKNOWN:break;case p.OrderStatus.CANCEL:return o.resolve({success:!1,error:a.PreorderError.UserCancel}),[2];case p.OrderStatus.FAIL:return o.resolve({success:!1,error:a.PreorderError.Fail}),[2];case p.OrderStatus.SUCCESS:c.Application.social.platform.trackPurchase(o.realPriceValue,"USD")}return c.Application.social.platformType!==h.PlatformType.FB?[3,7]:[4,c.Application.server.send(new _.FbProcessAction(r.orderId))];case 6:t.sent(),t.label=7;case 7:return o.resolve({success:!0,orderId:e.output.orderId}),[2]}})})},PreorderCommand}(n.CommandBase);e.PreorderCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function CreatePreorderAction(t,e,n,i){var r=o.call(this)||this;return r.action="create",r.controller="preorder",r.input=new a.ActionInput({offerId:t,promoId:e,locale:n,type:i}),r.output=new s,r}return c(CreatePreorderAction,o),CreatePreorderAction}(n.Action);e.CreatePreorderAction=i;var s=function(){function Output(){}return Output.prototype.parse=function(t){this.orderId=t.data.orderId,this.link=t.data.link},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(353),n(61),n(56),n(118)],void 0===(r=function(t,e,n,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ProcessPaymentCommand(){return null!==t&&t.apply(this,arguments)||this}return l(ProcessPaymentCommand,t),ProcessPaymentCommand.prototype.execute=function(o){return d(this,void 0,void 0,function(){var e,n,i,r;return h(this,function(t){switch(t.label){case 0:e=new s.ProcessPaymentAction(o.orderId),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.Application.server.send(e)];case 2:return t.sent(),[3,4];case 3:if((n=t.sent())instanceof c.ServerError)return n.code===u.ServerErrorCode.PAYMENT_NOT_FOUND&&n.stopPropagation(),[2,o.resolve({success:!1})];throw n;case 4:return(i={success:!0}).awardObject=e.output.award,r=a.Application.dynamic.payment.addPayment(e.output.payment),i.async=r.award_status===p.PaymentAwardStatus.INIT,o.resolve(i),[2]}})})},ProcessPaymentCommand}(n.CommandBase);e.ProcessPaymentCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function BuyDynamicPromoPromise(t){var e=n.call(this)||this;return e.promo=t,e}return a(BuyDynamicPromoPromise,n),Object.defineProperty(BuyDynamicPromoPromise.prototype,"promoId",{get:function(){return this.promo.id},enumerable:!0,configurable:!0}),BuyDynamicPromoPromise}(n.BasePromise);e.BuyDynamicPromoPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(49),n(349),n(351),n(775),n(209)],void 0===(r=function(t,e,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function BuyDynamicPromoCommand(){return null!==t&&t.apply(this,arguments)||this}return a(BuyDynamicPromoCommand,t),BuyDynamicPromoCommand.prototype.processPurchase=function(c){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return f(this,function(t){switch(t.label){case 0:return e=c.promo,n=e.prices,i=void 0,n.hasPriceType(p.PriceType.REAL)?(o=u.Application.localization.localize(e.offerStaticData.title||e.title),[4,this.realPurchaseOrReject(c.promoId,0,d.PreorderType.Dynamic,n.getPriceFirst(p.PriceType.REAL).value,o)]):[3,2];case 1:return(r=t.sent())===l.RealPurchaseState.FailOrCancel?[2]:[3,6];case 2:return(a=u.Application.price.hold(n)).success?[3,4]:[4,this.rejectPurchase(_.BuyPromoError.NotEnoughPrice)];case 3:return t.sent(),[2];case 4:return[4,u.Application.server.send(new h.BuyPromoAction(c.promoId))];case 5:s=t.sent(),u.Application.price.release(a),u.Application.award.accrueAwardImmediately(s.output.award),i=s.output.award,t.label=6;case 6:return this.resolvePurchase(c,i,r===l.RealPurchaseState.Async),[2]}})})},BuyDynamicPromoCommand}(l.AbstractBuyPromoCommand);e.BuyDynamicPromoCommand=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function BuyPromoAction(t){var e=n.call(this)||this;return e.action="buy",e.controller="promo",e.input=new i.ActionInput({promoId:t}),e.output=new o,e}return a(BuyPromoAction,n),BuyPromoAction}(n.Action);e.BuyPromoAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(118),n(353),n(8),n(2)],void 0===(r=function(t,e,n,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowPaymentOnStartCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ShowPaymentOnStartCommand,t),ShowPaymentOnStartCommand.prototype.execute=function(c){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return _(this,function(t){switch(t.label){case 0:e=u.Application.dynamic.payment.items.filter(function(t){return t.award_status===p.PaymentAwardStatus.PENDING}),n=0,i=e,t.label=1;case 1:return n<i.length?(r=i[n],[4,u.Application.server.send(new l.ProcessPaymentAction(r.preorder_id))]):[3,5];case 2:return o=t.sent(),a=o.output.award,u.Application.award.accrueAwardImmediately(a),r.update(o.output.payment),s=new d.ViewContext({baseAward:u.Application.award.convertObjectToCalculated(a),title:u.Application.localization.localize("PAYMENT_AWARD_TITLE"),description:u.Application.localization.localize("PAYMENT_AWARD_DESCRIPTION")}),[4,u.Application.view.show(h.GUINames.AWARDS_WINDOW,s).onClose];case 3:t.sent(),t.label=4;case 4:return n++,[3,1];case 5:return c.resolve({shown:0<e.length}),[2]}})})},ShowPaymentOnStartCommand}(n.CommandBase);e.ShowPaymentOnStartCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ProcessPaymentWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ProcessPaymentWindowMediator,e),ProcessPaymentWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._animations=[i.Application.animation.animate(this._container,"longRequestWindow"),i.Application.animation.animate(this.child("progressContainer"),"loading")]},ProcessPaymentWindowMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},ProcessPaymentWindowMediator}(n.DisplayObjectContainerMediator);e.ProcessPaymentWindowMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UpdateAsyncPaymentsPromise(){return t.call(this)||this}return a(UpdateAsyncPaymentsPromise,t),UpdateAsyncPaymentsPromise}(n.BasePromise);e.UpdateAsyncPaymentsPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(33),n(118),n(4),n(211)],void 0===(r=function(t,e,n,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UpdateAsyncPaymentsCommand(){return null!==t&&t.apply(this,arguments)||this}return p(UpdateAsyncPaymentsCommand,t),UpdateAsyncPaymentsCommand.prototype.execute=function(t){return l(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){switch(t.label){case 0:if(o.Application.social.platformType!==a.PlatformType.FB)return[3,4];e=o.Application.dynamic.payment.items.filter(function(t){return t.award_status===s.PaymentAwardStatus.INIT}),n=0,i=e,t.label=1;case 1:return n<i.length?(r=i[n],[4,c.ElkaCore.instance.promiseManager.ask(new u.UpdateAsyncPaymentPromise(r))]):[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},UpdateAsyncPaymentsCommand}(n.CommandBase);e.UpdateAsyncPaymentsCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(352)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function UpdateAsyncPaymentCommand(){return null!==t&&t.apply(this,arguments)||this}return a(UpdateAsyncPaymentCommand,t),UpdateAsyncPaymentCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.FbProcessAction(n.payment.order_id))];case 1:return e=t.sent(),n.payment.update({award_status:e.output.awardStatus}),[2]}})})},UpdateAsyncPaymentCommand}(n.CommandBase);e.UpdateAsyncPaymentCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(37),n(118),n(4),n(211),n(33)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function AsyncPaymentsService(){this._queue=[],this._counter=1,this._timer=0}return AsyncPaymentsService.prototype.start=function(){var e=this;n.Application.social.platformType===s.PlatformType.FB&&(this._queue=n.Application.dynamic.payment.items.filter(function(t){return e.isAsyncPayment(t)}),n.Application.dynamic.payment.addEventListener(i.ItemCollectionEvent.ITEM_ADDED,this.onPaymentAdded.bind(this)),this.checkQueue())},AsyncPaymentsService.prototype.isAsyncPayment=function(t){return t.award_status===r.PaymentAwardStatus.INIT},AsyncPaymentsService.prototype.onPaymentAdded=function(t){var e=t.item;this.isAsyncPayment(e)&&(this._queue.push(e),this.checkQueue())},AsyncPaymentsService.prototype.checkQueue=function(){0!==this._queue.length&&0===this._timer&&(this._timer=n.Application.date.callProcessor.delayCall(this.onTimer.bind(this),AsyncPaymentsService.INTERVAL*this._counter))},AsyncPaymentsService.prototype.onTimer=function(){return u(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return this._counter++,e=this._queue.shift(),[4,o.ElkaCore.instance.promiseManager.ask(new a.UpdateAsyncPaymentPromise(e))];case 1:return t.sent(),this.isAsyncPayment(e)&&this._queue.push(e),this._timer=0,this.checkQueue(),[2]}})})},AsyncPaymentsService.INTERVAL=1e4,AsyncPaymentsService}();e.AsyncPaymentsService=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(49),n(119),n(14)],void 0===(r=function(t,e,n,r,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,l=uipixi.UIFactory,i=function(i){function ConfirmBuyWindowMediator(){return null!==i&&i.apply(this,arguments)||this}return a(ConfirmBuyWindowMediator,i),ConfirmBuyWindowMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._result=this._showData.result,this.child("pricesList").addItems(this._showData.prices?this._showData.prices.prices:this._showData.award.awards),this._showData.title&&(this.child("titleLabel").text=this._showData.title),this._showData.description&&(this.child("descriptionLabel").text=this._showData.description);var e=this.child("successButton");this.registerListener(e,o.POINTER_TAP,this.onSuccessButton.bind(this));var n=this.child("cancelButton");this.registerListener(n,o.POINTER_TAP,this.onCancelButton.bind(this)),this.setCurrencyBar()},ConfirmBuyWindowMediator.prototype.onSuccessButton=function(){this._result.resolve(!0),r.Application.view.hide(this.viewHandle)},ConfirmBuyWindowMediator.prototype.onCancelButton=function(){this._result.resolve(!1),r.Application.view.hide(this.viewHandle)},ConfirmBuyWindowMediator.prototype.setCurrencyBar=function(){var t;if(this._showData.prices)for(var e=0,n=this._showData.prices.prices;e<n.length;e++){var i=n[e];if(i.type===c.PriceType.RESOURCE&&(t=u.UIUtils.getHUDBarTemplate(i.itemId)))break}else for(var r=0,o=this._showData.award.awards;r<o.length;r++){var a=o[r];if(a.type===p.AwardType.RESOURCE&&(t=u.UIUtils.getHUDBarTemplate(a.itemId)))break}if(t){var s=l.instance.createUIElementByName(t);this.child("currencyContainer").addChild(s),s.anchor=s.outside="center",s.offsetX=s.offsetY=0}},ConfirmBuyWindowMediator.prototype.destroy=function(){this._result.isPending&&this._result.resolve(!1),i.prototype.destroy.call(this)},ConfirmBuyWindowMediator}(n.DisplayObjectContainerMediator);e.ConfirmBuyWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,H){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function StackBlur(){}return StackBlur.stackBlurCanvasRGBA=function(t,e,n,i){var r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I=new ImageData(H.Application.view.renderer.extract.pixels(n.render),t.width,t.height),C=t.width,T=t.height,j=I.data,x=i+i+1,R=C-1,N=T-1,L=i+1,k=L*(L+1)/2,B=new Y,G=B;for(a=1;a<x;a++)G=G.next=new Y,a==L&&(D=G);G.next=B;var U=null,W=null;p=u=0;var F=StackBlur.mul_table[i],V=StackBlur.shg_table[i];for(o=0;o<T;o++){for(b=g=w=O=l=d=h=_=0,f=L*(S=j[u]),y=L*(P=j[u+1]),m=L*(E=j[u+2]),v=L*(A=j[u+3]),l+=k*S,d+=k*P,h+=k*E,_+=k*A,G=B,a=0;a<L;a++)G.r=S,G.g=P,G.b=E,G.a=A,G=G.next;for(a=1;a<L;a++)s=u+((R<a?R:a)<<2),l+=(G.r=S=j[s])*(M=L-a),d+=(G.g=P=j[s+1])*M,h+=(G.b=E=j[s+2])*M,_+=(G.a=A=j[s+3])*M,b+=S,g+=P,w+=E,O+=A,G=G.next;for(U=B,W=D,r=0;r<C;r++)j[u+3]=A=_*F>>V,0!=A?(A=255/A,j[u]=(l*F>>V)*A,j[u+1]=(d*F>>V)*A,j[u+2]=(h*F>>V)*A):j[u]=j[u+1]=j[u+2]=0,l-=f,d-=y,h-=m,_-=v,f-=U.r,y-=U.g,m-=U.b,v-=U.a,s=p+((s=r+i+1)<R?s:R)<<2,l+=b+=U.r=j[s],d+=g+=U.g=j[s+1],h+=w+=U.b=j[s+2],_+=O+=U.a=j[s+3],U=U.next,f+=S=W.r,y+=P=W.g,m+=E=W.b,v+=A=W.a,b-=S,g-=P,w-=E,O-=A,W=W.next,u+=4;p+=C}for(r=0;r<C;r++){for(g=w=O=b=d=h=_=l=0,f=L*(S=j[u=r<<2]),y=L*(P=j[u+1]),m=L*(E=j[u+2]),v=L*(A=j[u+3]),l+=k*S,d+=k*P,h+=k*E,_+=k*A,G=B,a=0;a<L;a++)G.r=S,G.g=P,G.b=E,G.a=A,G=G.next;for(c=C,a=1;a<=i;a++)u=c+r<<2,l+=(G.r=S=j[u])*(M=L-a),d+=(G.g=P=j[u+1])*M,h+=(G.b=E=j[u+2])*M,_+=(G.a=A=j[u+3])*M,b+=S,g+=P,w+=E,O+=A,G=G.next,a<N&&(c+=C);for(u=r,U=B,W=D,o=0;o<T;o++)j[(s=u<<2)+3]=A=_*F>>V,0<A?(A=255/A,j[s]=(l*F>>V)*A,j[s+1]=(d*F>>V)*A,j[s+2]=(h*F>>V)*A):j[s]=j[s+1]=j[s+2]=0,l-=f,d-=y,h-=m,_-=v,f-=U.r,y-=U.g,m-=U.b,v-=U.a,s=r+((s=o+L)<N?s:N)*C<<2,l+=b+=U.r=j[s],d+=g+=U.g=j[s+1],h+=w+=U.b=j[s+2],_+=O+=U.a=j[s+3],U=U.next,f+=S=W.r,y+=P=W.g,m+=E=W.b,v+=A=W.a,b-=S,g-=P,w-=E,O-=A,W=W.next,u+=C}e.putImageData(I,0,0)},StackBlur.mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],StackBlur.shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],StackBlur}();e.StackBlur=n;var Y=function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};e.BlurStack=Y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ConfirmBuyPriceItemRendererMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ConfirmBuyPriceItemRendererMediator,e),ConfirmBuyPriceItemRendererMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._priceRenderer=(new i.AwardRenderer).initialize(this._showData,this._container,{iconId:64})},ConfirmBuyPriceItemRendererMediator.prototype.destroy=function(){this._priceRenderer.destroy(),e.prototype.destroy.call(this)},ConfirmBuyPriceItemRendererMediator}(n.DisplayObjectContainerMediator);e.ConfirmBuyPriceItemRendererMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,i=function(i){function ConfirmBeautyWindowMediator(){return null!==i&&i.apply(this,arguments)||this}return a(ConfirmBeautyWindowMediator,i),ConfirmBeautyWindowMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._result=this._showData.result,this._showData.title&&(this.child("titleLabel").text=this._showData.title),this._showData.beauty&&(this.child("beautyLabel").text=this._showData.beauty.toString()),this._showData.description&&(this.child("descriptionLabel").text=this._showData.description);var e=this.child("successButton");this.registerListener(e,o.POINTER_TAP,this.onSuccessButton.bind(this));var n=this.child("cancelButton");this.registerListener(n,o.POINTER_TAP,this.onCancelButton.bind(this))},ConfirmBeautyWindowMediator.prototype.onSuccessButton=function(){this._result.resolve(!0),r.Application.view.hide(this.viewHandle)},ConfirmBeautyWindowMediator.prototype.onCancelButton=function(){this._result.resolve(!1),r.Application.view.hide(this.viewHandle)},ConfirmBeautyWindowMediator.prototype.destroy=function(){this._result.isPending&&this._result.resolve(!1),i.prototype.destroy.call(this)},ConfirmBeautyWindowMediator}(n.DisplayObjectContainerMediator);e.ConfirmBeautyWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,i=function(i){function ConfirmTextWindowMediator(){return null!==i&&i.apply(this,arguments)||this}return a(ConfirmTextWindowMediator,i),ConfirmTextWindowMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._result=this._showData.result,this._showData.title&&(this.child("titleLabel").text=this._showData.title),this._showData.description&&(this.child("descriptionLabel").text=this._showData.description);var e=this.child("successButton");this.registerListener(e,o.POINTER_TAP,this.onSuccessButton.bind(this));var n=this.child("cancelButton");this.registerListener(n,o.POINTER_TAP,this.onCancelButton.bind(this))},ConfirmTextWindowMediator.prototype.onSuccessButton=function(){this._result.resolve(!0),r.Application.view.hide(this.viewHandle)},ConfirmTextWindowMediator.prototype.onCancelButton=function(){this._result.resolve(!1),r.Application.view.hide(this.viewHandle)},ConfirmTextWindowMediator.prototype.destroy=function(){this._result.isPending&&this._result.resolve(!1),i.prototype.destroy.call(this)},ConfirmTextWindowMediator}(n.DisplayObjectContainerMediator);e.ConfirmTextWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(788)],void 0===(r=function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function MailModel(t,e){this._inboxMap=new core.Map;for(var n=0,i=t.inbox.items;n<i.length;n++){var r=i[n],o=new a.MailInboxModel(r,e.getItem(r.id.toString()));this._inboxMap.set(r.id,o)}}return MailModel.prototype.getInbox=function(t){return this._inboxMap.get(t)},MailModel.prototype.removeInboxItem=function(t,e){this.getInbox(t).removeInboxItem(e)},MailModel}();e.MailModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(358),n(98)],void 0===(r=function(t,e,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=uipixi.BaseEventTarget,o=function MailInboxUserItemsModel(t,e){this.userId=t,this.inboxItems=e};e.MailInboxUserItemsModel=o;var i=function(i){function MailInboxModel(t,e){var n=i.call(this)||this;return n._staticData=t,n.id=t.id,n._inboxByUserMap=new core.Map,n._inboxList=e.inbox.items.map(function(t){return new r.MailInboxItemModel(t.id,t.itemId,t.itemType,t.num,t.socialId,t.time,t.userId)}),n._inboxList.forEach(function(t){return n.addInboxIntoMap(t)}),n}return s(MailInboxModel,i),MailInboxModel.prototype.addInboxIntoMap=function(t){this._inboxByUserMap.has(t.socialId)||this._inboxByUserMap.set(t.socialId,[]),this._inboxByUserMap.get(t.socialId).push(t)},MailInboxModel.prototype.getInboxItemsForUser=function(t){return this._inboxByUserMap.has(t)?this._inboxByUserMap.get(t):[]},MailInboxModel.prototype.addInboxItem=function(e){this._inboxList.every(function(t){return t.inboxKey!==e.inboxKey})&&(this._inboxList.push(e),this.addInboxIntoMap(e),this.dispatchEvent(new a.MailModelEvent(a.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED)))},MailInboxModel.prototype.removeInboxItem=function(t){for(var e,n=0,i=this._inboxList;n<i.length;n++){var r=i[n];if(r.inboxKey===t){e=r;break}}if(e){e.dispatchEvent(new a.MailModelEvent(a.MailModelEvent.INBOX_ITEM_WILL_BE_DELETED)),this._inboxList.splice(this._inboxList.indexOf(e),1);var o=this._inboxByUserMap.get(e.socialId);o.splice(o.indexOf(e),1),this.dispatchEvent(new a.MailModelEvent(a.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED))}},MailInboxModel.prototype.getInboxItemsByItemId=function(e){return this._inboxList.filter(function(t){return t.itemId===e})},MailInboxModel.prototype.hasInboxItem=function(e){return this._inboxList.some(function(t){return t.inboxKey===e})},MailInboxModel.prototype.getAllItems=function(){return this._inboxList.sort(function(t,e){return t.userId-e.userId==0?t.time-e.time:t.userId-e.userId})},MailInboxModel.prototype.getInboxItem=function(t){for(var e=0,n=this._inboxList;e<n.length;e++){var i=n[e];if(i.inboxKey===t)return i}},MailInboxModel.prototype.getItemsGroupedByUserId=function(){var n=new core.Map;this._inboxList.forEach(function(t){var e=n.get(t.userId+":"+t.itemId);(e=e||[]).push(t),n.set(t.userId+":"+t.itemId,e)});var i=[];return n.forEach(function(t,e){return i.push(new o(parseInt(e.split(":")[0]),t))}),i},MailInboxModel}(n);e.MailInboxModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AcceptMailPromise(t,e){var n=i.call(this)||this;return n.inboxId=t,n.inboxKey=e,n}return a(AcceptMailPromise,i),AcceptMailPromise}(n.BasePromise);e.AcceptMailPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(791),n(0)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AcceptMailCommand(){return null!==t&&t.apply(this,arguments)||this}return a(AcceptMailCommand,t),AcceptMailCommand.prototype.execute=function(i){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return[4,o.Application.server.send(new r.AcceptMailAction(i.inboxId,i.inboxKey))];case 1:for(n in(e=t.sent()).output.dropKeys)this._data.removeInboxItem(i.inboxId,e.output.dropKeys[n]);return o.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},AcceptMailCommand}(n.CommandBase);e.AcceptMailCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AcceptMailAction(t,e){var n=i.call(this)||this;return n.action="accept",n.controller="mail",n.input=new r.ActionInput({inboxId:t,inboxKey:e}),n.output=new o,n}return a(AcceptMailAction,i),AcceptMailAction}(n.Action);e.AcceptMailAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.dropKeys=t.data.dropKeys,this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function AcceptByMailPromise(t,e,n){var i=r.call(this)||this;return i.inboxId=t,i.itemId=e,i.socialId=n,i}return a(AcceptByMailPromise,r),AcceptByMailPromise}(n.BasePromise);e.AcceptByMailPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(794),n(0)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AcceptByMailCommand(){return null!==t&&t.apply(this,arguments)||this}return a(AcceptByMailCommand,t),AcceptByMailCommand.prototype.execute=function(i){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return[4,o.Application.server.send(new r.MailAcceptByUserIdAndItemIdAction(i.inboxId,i.itemId,i.socialId))];case 1:for(n in(e=t.sent()).output.dropKeys)this._data.removeInboxItem(i.inboxId,e.output.dropKeys[n]);return o.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},AcceptByMailCommand}(n.CommandBase);e.AcceptByMailCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function MailAcceptByUserIdAndItemIdAction(t,e,n){var i=r.call(this)||this;return i.action="acceptByUserIdAndItemId",i.controller="mail",i.input=new o.ActionInput({inboxId:t,itemId:e,socialId:n}),i.output=new a,i}return s(MailAcceptByUserIdAndItemIdAction,r),MailAcceptByUserIdAndItemIdAction}(n.Action);e.MailAcceptByUserIdAndItemIdAction=i;var a=function(){function Output(){}return Output.prototype.parse=function(t){this.dropKeys=t.data.dropKeys,this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function MailGetPromise(t){var e=n.call(this)||this;return e.inboxId=t,e}return a(MailGetPromise,n),MailGetPromise}(n.BasePromise);e.MailGetPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(797),n(358)],void 0===(r=function(t,e,n,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function MailGetCommand(){return null!==t&&t.apply(this,arguments)||this}return a(MailGetCommand,t),MailGetCommand.prototype.execute=function(a){return p(this,void 0,void 0,function(){var e,n,i,r,o;return l(this,function(t){switch(t.label){case 0:return e=a.inboxId,[4,s.Application.server.send(new c.MailGetAction(e))];case 1:if(n=t.sent(),i=n.output.inboxData)for(r in i)o=new u.MailInboxItemModel(r,i[r].itemId,i[r].itemType,i[r].num,i[r].socialId,i[r].time,i[r].userId),this._data.getInbox(e).addInboxItem(o);return[2]}})})},MailGetCommand}(n.CommandBase);e.MailGetCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function MailGetAction(t){var e=n.call(this)||this;return e.action="get",e.controller="mail",e.input=new i.ActionInput({inboxId:t}),e.output=new o,e}return a(MailGetAction,n),MailGetAction}(n.Action);e.MailGetAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.inboxData=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(99)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function TextTooltipMediator(){return null!==t&&t.apply(this,arguments)||this}return a(TextTooltipMediator,t),TextTooltipMediator.prototype.onInitialize=function(){var t=this.child("textLabel");void 0===this._showData.gender?t.text=n.Application.localization.localize(this._showData.text):t.text=n.Application.localization.localize(this._showData.text,{gender:n.Application.profiles.current.isMale})},TextTooltipMediator}(i.TooltipMediator);e.TextTooltipMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(360),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,r=function(a){function MobileTooltipManager(t){var e=a.call(this)||this;return e.lifeTime=t,e._stage=i.Application.view.ui.stage,e}return c(MobileTooltipManager,a),MobileTooltipManager.prototype.add=function(t,e,n,i){if(a.prototype.add.call(this,t,e,n,i),t.addEventListener(s.POINTER_TAP,this.onPointerTap.bind(this)),i&&i.hitObjects)for(var r=0,o=i.hitObjects;r<o.length;r++){o[r].addEventListener(s.POINTER_TAP,this.onPointerTap.bind(this))}},MobileTooltipManager.prototype.remove=function(t){t.removeEventListener(s.POINTER_TAP,this.onPointerTap.bind(this));var e=this._tooltipsMap.get(t);if(e&&e.hitObjects)for(var n=0,i=e.hitObjects;n<i.length;n++){i[n].removeEventListener(s.POINTER_TAP,this.onPointerTap.bind(this))}a.prototype.remove.call(this,t)},MobileTooltipManager.prototype.onPointerTap=function(t){var e=t.UICurrentTarget,n=this._tooltipsMap.get(e);this.show(n)},MobileTooltipManager.prototype.show=function(t){a.prototype.show.call(this,t),this._current=t,this._stage.addEventListener(s.POINTER_DOWN,this.onStageTap.bind(this)),this._timer=i.Application.date.callProcessor.delayCall(this.onTimer.bind(this),this.lifeTime)},MobileTooltipManager.prototype.hide=function(t){a.prototype.hide.call(this,t),void 0!==this._timer&&(i.Application.date.callProcessor.deleteCall(this._timer),this._timer=void 0),this._stage.removeEventListener(s.POINTER_DOWN,this.onStageTap.bind(this)),this._current=void 0},MobileTooltipManager.prototype.onStageTap=function(){this.hide(this._current)},MobileTooltipManager.prototype.onTimer=function(){this.hide(this._current)},MobileTooltipManager}(n.TooltipManager);e.MobileTooltipManager=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(360)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,i=function(a){function WebTooltipManager(){return null!==a&&a.apply(this,arguments)||this}return c(WebTooltipManager,a),WebTooltipManager.prototype.add=function(t,e,n,i){if(a.prototype.add.call(this,t,e,n,i),t.addEventListener(s.POINTER_OVER,this.onPointerOver.bind(this)),i&&i.hitObjects)for(var r=0,o=i.hitObjects;r<o.length;r++){o[r].addEventListener(s.POINTER_OVER,this.onPointerOver.bind(this))}},WebTooltipManager.prototype.remove=function(t){t.removeEventListener(s.POINTER_OVER,this.onPointerOver.bind(this));var e=this._tooltipsMap.get(t);if(e&&e.hitObjects)for(var n=0,i=e.hitObjects;n<i.length;n++){i[n].removeEventListener(s.POINTER_OVER,this.onPointerOver.bind(this))}a.prototype.remove.call(this,t)},WebTooltipManager.prototype.onPointerOver=function(t){var e=t.UICurrentTarget;e.removeEventListener(s.POINTER_OVER,this.onPointerOver.bind(this));var n=this._tooltipsMap.get(e);this.show(n),e.addEventListener(s.POINTER_OUT,this.onPointerOut.bind(this))},WebTooltipManager.prototype.onPointerOut=function(t){var e=t.UICurrentTarget;this.hide(this._tooltipsMap.get(e)),e.addEventListener(s.POINTER_OVER,this.onPointerOver.bind(this))},WebTooltipManager.prototype.hide=function(t){t.anchorObject.removeEventListener(s.POINTER_OUT,this.onPointerOut.bind(this)),a.prototype.hide.call(this,t)},WebTooltipManager}(n.TooltipManager);e.WebTooltipManager=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(39),n(1)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=uipixi.UISpine,o=function(e){function ObjectViewMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ObjectViewMediator,e),ObjectViewMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData.object,this._resourceUtils=this._mapData.resourceUtils,this._spine=new r(this.getSpineResource(),"spine"),this._spine.anchor=this._spine.outside="topLeft",this._container.addChild(this._spine),this.setAnimation(),this.setContainerState(),this.registerListener(this._object,n.ObjectModelEvent.STAGE_UP,this.onLevelUp.bind(this))},ObjectViewMediator.prototype.getSpineResource=function(){return this._resourceUtils.getSpineResource(this._object.id,this._object.stage)},ObjectViewMediator.prototype.setAnimation=function(){this._spine.setAnimation(this._resourceUtils.getAnimationName(this._object.stage),!0)},ObjectViewMediator.prototype.setContainerState=function(){this._container.states&&this._container.states.indexOf("stage"+this._object.stage)&&(this._container.currentState="stage"+this._object.stage)},ObjectViewMediator.prototype.onLevelUp=function(){this._spine.setResource(this.getSpineResource()),this.setAnimation(),this.setContainerState()},ObjectViewMediator}(i.DisplayObjectContainerMediator);e.ObjectViewMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0),n(2)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function HUDPlayButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(HUDPlayButtonMediator,t),HUDPlayButtonMediator.prototype.onButton=function(t){i.Application.view.show(r.GUINames.SELECT_OBJECT_WINDOW)},HUDPlayButtonMediator}(n.SimpleButtonMediator);e.HUDPlayButtonMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57),n(0),n(2),n(8),n(69)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function ObjectTapMediator(){return null!==e&&e.apply(this,arguments)||this}return u(ObjectTapMediator,e),ObjectTapMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerListener(t.displayObject,s.POINTER_TAP,this.onTap.bind(this))},ObjectTapMediator.prototype.onTap=function(){var t=this._mapData;switch(t.state){case a.ObjectState.LOCK:i.Application.view.show(r.GUINames.OBJECT_BEAUTY_LOCK_WINDOW,new o.ViewContext(t));break;case a.ObjectState.NORMAL:i.Application.view.show(r.GUINames.USE_ENERGY_WINDOW,new o.ViewContext({object:t}));break;case a.ObjectState.REQUEST:case a.ObjectState.READY:i.Application.view.show(r.GUINames.UPGRADE_OBJECT_WINDOW,new o.ViewContext({object:t}));break;case a.ObjectState.MAX_STAGE:i.Application.view.show(r.GUINames.OBJECT_MAX_LEVEL_WINDOW,new o.ViewContext({object:t}))}},ObjectTapMediator}(n.DisplayObjectMediator);e.ObjectTapMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(39),n(69),n(0),n(8),n(2)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(n){function SelectObjectStatesMediator(){return null!==n&&n.apply(this,arguments)||this}return p(SelectObjectStatesMediator,n),SelectObjectStatesMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._object=this._mapData,this.setState(),this.setName();var e=this.child("nameContainer");e.buttonMode=!0,e.interactive=!0,e.interactiveChildren=!0,this.registerListener(e,c.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._object,i.ObjectModelEvent.STATE_CHANGED,this.setState.bind(this))},SelectObjectStatesMediator.prototype.onTap=function(){switch(this._object.state){case r.ObjectState.MAX_STAGE:o.Application.view.hide(this.viewHandle.viewContext.node.root.handle),o.Application.view.show(s.GUINames.OBJECT_MAX_LEVEL_WINDOW,new a.ViewContext({object:this._object}));break;case r.ObjectState.NORMAL:o.Application.view.show(s.GUINames.USE_ENERGY_WINDOW,new a.ViewContext({object:this._object})),o.Application.view.hide(this.viewHandle.viewContext.node.root.handle);break;case r.ObjectState.READY:case r.ObjectState.REQUEST:o.Application.view.show(s.GUINames.UPGRADE_OBJECT_WINDOW,new a.ViewContext({object:this._object})),o.Application.view.hide(this.viewHandle.viewContext.node.root.handle)}},SelectObjectStatesMediator.prototype.setName=function(){this.child("nameLabel").text=this._object.title},SelectObjectStatesMediator.prototype.setState=function(){this._container.currentState=this._object.state===r.ObjectState.REQUEST?r.ObjectState.READY:this._object.state},SelectObjectStatesMediator}(n.DisplayObjectContainerMediator);e.SelectObjectStatesMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.GestureEvent,r=function(n){function SelectObjectTapMediator(){return null!==n&&n.apply(this,arguments)||this}return a(SelectObjectTapMediator,n),SelectObjectTapMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=t.displayObject;e.buttonMode=!0,this.registerListener(e,i.POINTER_TAP,this.onTap.bind(this))},SelectObjectTapMediator.prototype.onTap=function(){this._mapData.requestStateAction()},SelectObjectTapMediator}(n.DisplayObjectMediator);e.SelectObjectTapMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.UIFactory,i=function(a){function SelectObjectWindowMediator(){return null!==a&&a.apply(this,arguments)||this}return u(SelectObjectWindowMediator,a),SelectObjectWindowMediator.prototype.initialize=function(t){a.prototype.initialize.call(this,t);var e=s.Application.dynamic.user.screen,n=c.instance.createUIElementByName("objects"+e);n.name="objectsContainer",this._container.addChild(n);var i=this.child("objectsContainerTemp");this._container.setChildIndex(n,this._container.getChildIndex(i));var r=c.instance.createUIElementByName("objectsNames"+e);r.name="namesContainer",this._container.addChild(r);var o=this.child("objectsContainerTemp");this._container.setChildIndex(r,this._container.getChildIndex(o)),s.Application.model.objects.updateMinimalPercentObject()},SelectObjectWindowMediator}(n.DisplayObjectContainerMediator);e.SelectObjectWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8),n(39)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function SelectObjectMaxLevelStateMediator(){return null!==e&&e.apply(this,arguments)||this}return u(SelectObjectMaxLevelStateMediator,e),SelectObjectMaxLevelStateMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData,this._container.buttonMode=!0,this.registerListener(this._container,s.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._object,a.ObjectModelEvent.REQUEST_STATE_ACTION,this.onTap.bind(this))},SelectObjectMaxLevelStateMediator.prototype.onTap=function(){i.Application.view.hide(this.viewHandle.viewContext.node.root.handle);var t=new o.ViewContext({object:this._object});i.Application.view.show(r.GUINames.OBJECT_MAX_LEVEL_WINDOW,t)},SelectObjectMaxLevelStateMediator}(n.DisplayObjectContainerMediator);e.SelectObjectMaxLevelStateMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(21)],void 0===(r=function(t,e,n,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function SelectObjectLockStateMediator(){return null!==o&&o.apply(this,arguments)||this}return u(SelectObjectLockStateMediator,o),SelectObjectLockStateMediator.prototype.initialize=function(t){o.prototype.initialize.call(this,t);var e=this._mapData;this._container.buttonMode=!0;var n=this.child("tooltipSideRight")?c.TooltipAnchor.Right:c.TooltipAnchor.Left,i=this.window.getChildByName(e.id),r=this._container.parent;a.Application.tooltip.addTooltip(r,n,s.GUINames.OBJECT_LOCK_TOOLTIP,{beautyLockStage:e.nextStage.requiredBeautyStage,hitObjects:[i]})},SelectObjectLockStateMediator}(n.DisplayObjectContainerMediator);e.SelectObjectLockStateMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(99)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ObjectLockTooltip(){return null!==t&&t.apply(this,arguments)||this}return a(ObjectLockTooltip,t),ObjectLockTooltip.prototype.onInitialize=function(){this.child("beautyLabel").text=this._showData.beautyLockStage.toString()},ObjectLockTooltip}(n.TooltipMediator);e.ObjectLockTooltip=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8),n(39)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function SelectObjectNormalStateMediator(){return null!==e&&e.apply(this,arguments)||this}return u(SelectObjectNormalStateMediator,e),SelectObjectNormalStateMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData,this.getChildren(),this._container.buttonMode=!0,this.registerListener(this._container,s.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._object,a.ObjectModelEvent.REQUEST_STATE_ACTION,this.onTap.bind(this)),this.setExp(),this.registerListener(this._object,a.ObjectModelEvent.EXP_CHANGED,this.setExp.bind(this))},SelectObjectNormalStateMediator.prototype.onTap=function(){var t=new o.ViewContext({object:this._object});i.Application.view.show(r.GUINames.USE_ENERGY_WINDOW,t),i.Application.view.hide(this.viewHandle.viewContext.node.root.handle)},SelectObjectNormalStateMediator.prototype.getChildren=function(){this._expLabel=this.child("expLabel"),this._expBar=this.child("expBar"),this._purple=this.child("purple")},SelectObjectNormalStateMediator.prototype.setExp=function(){var t=this._object.currentStageExp,e=(this._object.exp-t)/(this._object.nextStageExp-t);e=Math.max(0,e);var n=Math.floor(100*e);this._expLabel.text=n+"%",this._expBar.alpha=0<n?1:.3,this._expBar.progress=e,0<n?this._purple.visible&&(this._purple.visible=!1):this._purple.visible||(this._purple.visible=!0)},SelectObjectNormalStateMediator}(n.DisplayObjectContainerMediator);e.SelectObjectNormalStateMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(39)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=uipixi.UIContainer,c=function(e){function UseEnergyWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return u(UseEnergyWindowMediator,e),UseEnergyWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._showData.object,this.getChildren(),this.setInfo(),this.setSpine(),this.setExp(),this.registerListener(this._object,o.ObjectModelEvent.EXP_CHANGED,this.onExpChanged.bind(this)),this.registerListener(this._object,o.ObjectModelEvent.STAGE_UP,this.onExpChanged.bind(this)),this.setAwards(),this.initBackButton()},UseEnergyWindowMediator.prototype.getChildren=function(){this._objectExpBar=this.child("objectExpBar"),this._objectExpLabel=this.child("objectExpLabel")},UseEnergyWindowMediator.prototype.setInfo=function(){this.child("nameLabel").text=this._object.title,this.child("levelLabel").text=i.Application.localization.localize("UPGRADE_LEVEL",{stage:this._object.stage.toString(),maxStage:this._object.maxStage.toString()})},UseEnergyWindowMediator.prototype.setSpine=function(){this.child("spineContainer").addChild(new s(this._object.id))},UseEnergyWindowMediator.prototype.setExp=function(){var t=this._object.exp,e=this._object.currentStageExp,n=this._object.nextStageExp;this._objectExpLabel.text=Math.max(0,n-t).toString(),this._objectExpBar.progress=(t-e)/(n-e)},UseEnergyWindowMediator.prototype.onExpChanged=function(){this.setExp()},UseEnergyWindowMediator.prototype.setAwards=function(){this.child("awardsList").addItems(this._object.getNextStageAwards())},UseEnergyWindowMediator.prototype.initBackButton=function(){var t=this.child("backButton");this.registerListener(t,a.POINTER_TAP,this.onBackButton.bind(this))},UseEnergyWindowMediator.prototype.onBackButton=function(){i.Application.view.show(r.GUINames.SELECT_OBJECT_WINDOW),i.Application.view.hide(this.viewHandle)},UseEnergyWindowMediator}(n.DisplayObjectContainerMediator);e.UseEnergyWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(116),n(49),n(115),n(4),n(362),n(363),n(813),n(212)],void 0===(r=function(t,e,d,h,_,f,n,i,y,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function UseEnergySystem(t,e){this.SEND_DELAY_TIMER=5e3,this._lastObjectStageRequested={},this._userModel=t,this._energyResourceId=e,this._lastUserLevelRequested=t.level,this._usedEnergy=new r.UseEnergyFake}return UseEnergySystem.prototype.use=function(t,e){this._delayTimer&&(d.Application.date.callProcessor.deleteCall(this._delayTimer),this._delayTimer=void 0),this._usedEnergy.exists&&this._usedEnergy.object!==t&&this.sendToServer(),void 0===this._lastObjectStageRequested[t.id]&&(this._lastObjectStageRequested[t.id]=t.realStage);var n=t.getExpToStage(this._lastObjectStageRequested[t.id]+1)-t.exp;if(t.isLoopedStage&&0===n)return this._lastObjectStageRequested[t.id]++,this.requestObjectStageUp(t),y.UseResult.Process;var i,r=this._userModel.getExpToLevel(this._lastUserLevelRequested+1)-this._userModel.exp;this._eventUseEnergy&&(i=this._eventUseEnergy.getExpToLevel(this._eventUseEnergy.requestedLevel+1)-this._eventUseEnergy.exp),e=Math.min(e,n),e=Math.min(e,r),i&&(e=Math.min(e,i));var o=new h.CalculatedPriceItem(_.PriceType.RESOURCE,e,this._energyResourceId),a=d.Application.price.calculateNotEnoughValue(o);a<e&&(e-=a,o.value=e);var s=d.Application.price.hold((new f.CalculatedPrice).add(o));if(!s.success)return this._usedEnergy.exists&&this.sendToServer(),y.UseResult.Stop;this.saveFake(t,e,s);var c=e===n,u=e===r,p=e===i;if(c||u||p){u&&this._lastUserLevelRequested++,c&&this._lastObjectStageRequested[t.id]++,p&&this._eventUseEnergy.requestedLevel++;var l=c&&t.isLoopedStage;return this.sendToServer(),l&&this.requestObjectStageUp(t),c&&!t.isLoopedStage?y.UseResult.Stop:y.UseResult.Process}return this._delayTimer=d.Application.date.callProcessor.delayCall(this.onDelayTimer.bind(this),this.SEND_DELAY_TIMER),y.UseResult.Process},UseEnergySystem.prototype.saveFake=function(t,e,n){t.exp+=e,this._userModel.exp+=e,this._eventUseEnergy&&(this._eventUseEnergy.exp+=e),this._usedEnergy.add(t,e,n)},UseEnergySystem.prototype.onDelayTimer=function(){this._delayTimer=void 0,this.sendToServer()},UseEnergySystem.prototype.sendToServer=function(){n.ElkaCore.instance.promiseManager.ask(new i.SendUseEnergyPromise(this._usedEnergy.object,this._usedEnergy.count,this._usedEnergy.walletTransactions)),this._usedEnergy.clear()},UseEnergySystem.prototype.requestObjectStageUp=function(t){n.ElkaCore.instance.promiseManager.ask(new o.ObjectStageUpPromise(t))},UseEnergySystem.prototype.registerEvent=function(t){if(this._eventUseEnergy)throw Error("UseEnergySystem: only one event allowed!");this._eventUseEnergy=t},UseEnergySystem.prototype.unregisterEvent=function(){this._eventUseEnergy=void 0},UseEnergySystem}();e.UseEnergySystem=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function UseEnergyFake(){this.count=0,this.walletTransactions=[]}return UseEnergyFake.prototype.add=function(t,e,n){this.object=t,this.count+=e,this.walletTransactions.push(n)},UseEnergyFake.prototype.clear=function(){this.object=void 0,this.count=0,this.walletTransactions=[]},Object.defineProperty(UseEnergyFake.prototype,"exists",{get:function(){return void 0!==this.object},enumerable:!0,configurable:!0}),UseEnergyFake}();e.UseEnergyFake=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(2),n(8),n(364),n(214)],void 0===(r=function(t,e,i,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(n){function UseEnergyButtonMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t.CURSOR_OFF_ANIMATION="07_cursor_off",t.CURSOR_ON_ANIMATION="06_cursor_idle",t.IDLE_ANIMATION="01_idle",t.SPIN_ANIMATION="03_autospin_cycle",t.CURSOR_ANIMATION_TRACK_INDEX=1,t.SPIN_ANIMATION_TRACK_INDEX=0,t}return p(UseEnergyButtonMediator,n),UseEnergyButtonMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=t.viewContext.node.root.handle.viewContext.showData;this._object=e.object,this._container.buttonMode=!0,this.setSpine(),this._viewModel=new a.UseEnergyViewModel(this._mapData.useEnergySystem,this._object,!1),this.registerListener(this._container,c.POINTER_DOWN,this.onDown.bind(this)),this.registerListener(this._container,c.POINTER_OVER,this.onOver.bind(this)),this.registerListener(this._container,c.POINTER_OUT,this.onOut.bind(this)),this.registerListener(this._viewModel,s.UseEnergyViewModelEvent.STARTED,this.onStarted.bind(this)),this.registerListener(this._viewModel,s.UseEnergyViewModelEvent.STOPPED,this.onStopped.bind(this)),this.registerListener(this._viewModel,s.UseEnergyViewModelEvent.REQUEST_UPGRADE,this.onRequestUpgrade.bind(this))},UseEnergyButtonMediator.prototype.setSpine=function(){this._spine=this.child("spine"),this._spine.stateData.setMix(this.CURSOR_OFF_ANIMATION,this.CURSOR_ON_ANIMATION,.08),this._spine.stateData.setMix(this.CURSOR_ON_ANIMATION,this.CURSOR_OFF_ANIMATION,.2),this._spine.stateData.setMix(this.IDLE_ANIMATION,this.SPIN_ANIMATION,.2),this._spine.stateData.setMix(this.SPIN_ANIMATION,this.IDLE_ANIMATION,.2),this.setSpinAnimation(!1),this.setCursorAnimation(!1)},UseEnergyButtonMediator.prototype.onDown=function(){this._viewModel.start()},UseEnergyButtonMediator.prototype.onStarted=function(){this.unregisterListener(this._container,c.POINTER_DOWN,this.onDown.bind(this)),this.setCursorAnimation(!0),this.setSpinAnimation(!0)},UseEnergyButtonMediator.prototype.onRequestUpgrade=function(){var t=new o.ViewContext({object:this._object});i.Application.view.show(r.GUINames.UPGRADE_OBJECT_WINDOW,t),i.Application.view.hide(this.windowHandle)},UseEnergyButtonMediator.prototype.onStopped=function(){this.registerListener(this._container,c.POINTER_DOWN,this.onDown.bind(this)),this.setSpinAnimation(!1),this._pointerOver||this.setCursorAnimation(!1)},UseEnergyButtonMediator.prototype.onOver=function(){this._pointerOver=!0,this.setCursorAnimation(!0)},UseEnergyButtonMediator.prototype.onOut=function(){this._pointerOver=!1,this._viewModel.isInProgress||this.setCursorAnimation(!1)},UseEnergyButtonMediator.prototype.setCursorAnimation=function(t){this._spine.setAnimation(t?this.CURSOR_ON_ANIMATION:this.CURSOR_OFF_ANIMATION,!0,this.CURSOR_ANIMATION_TRACK_INDEX)},UseEnergyButtonMediator.prototype.setSpinAnimation=function(t){this._spine.setAnimation(t?this.SPIN_ANIMATION:this.IDLE_ANIMATION,!0,this.SPIN_ANIMATION_TRACK_INDEX)},UseEnergyButtonMediator.prototype.destroy=function(){this._viewModel.destroy(),n.prototype.destroy.call(this)},UseEnergyButtonMediator}(n.DisplayObjectContainerMediator);e.UseEnergyButtonMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(816),n(365),n(4),n(366)],void 0===(r=function(t,e,n,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function SendUseEnergyCommand(){return null!==t&&t.apply(this,arguments)||this}return l(SendUseEnergyCommand,t),SendUseEnergyCommand.prototype.execute=function(o){return d(this,void 0,void 0,function(){var e,n,i,r;return h(this,function(t){switch(t.label){case 0:return e=a.Application.model.objects.lastUseEnergyWasOnGlade?s.ObjectUseEnergyActionWindow.Glade:s.ObjectUseEnergyActionWindow.Upgrade,n=a.Application.model.user.level,(i=new s.ObjectUseEnergyAction(o.object.id,o.count,e)).customData=c.ActionCustomData.SoftLongRequestWindow,[4,a.Application.server.send(i)];case 1:return t.sent(),o.transactions.forEach(function(t){return a.Application.price.release(t)}),i.output.award?[4,u.ElkaCore.instance.promiseManager.ask(new p.AccrueUseEnergyAwardPromise(i.output.award,a.Application.model.user.level>n))]:[3,3];case 2:t.sent(),t.label=3;case 3:for(r in i.output.addedAward&&a.Application.award.accrueAwardImmediately(i.output.addedAward),i.output.dropKeys)a.Application.model.viralExchange.removeResponseItem(i.output.dropKeys[r]);return[2]}})})},SendUseEnergyCommand}(n.CommandBase);e.SendUseEnergyCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,o){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.ObjectUseEnergyActionWindow||(e.ObjectUseEnergyActionWindow={}))[i.Glade=1]="Glade",i[i.Upgrade=2]="Upgrade";var r=function(r){function ObjectUseEnergyAction(t,e,n){var i=r.call(this)||this;return i.action="useEnergy",i.controller="object",i.input=new o.ActionInput({objectName:t,count:e,window:n}),i.output=new a,i}return s(ObjectUseEnergyAction,r),ObjectUseEnergyAction}(n.Action);e.ObjectUseEnergyAction=r;var a=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.addedAward=t.data.addedAward,this.price=t.data.price,this.dropKeys=t.data.dropKeys||{}},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(212),n(38),n(49),n(42),n(69),n(39),n(367),n(368),n(16),n(369)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=uipixi.GestureEvent,y=function(e){function UpgradeObjectWindowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadableImages=[],t}return m(UpgradeObjectWindowMediator,e),UpgradeObjectWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._showData.object,this._viralPrice=i.Application.price.calculate(this._object.nextStage.prices).getPriceFirst(s.PriceType.RESOURCE),this._resourceModel=i.Application.model.resources.get(this._viralPrice.itemId),this._resourceCountLabel=this.child("resourceCountLabel"),this.setInfo(),this.setResourceCount(),this.setViralImages(),this.setState(),this.registerListener(this._resourceModel,c.ResourceModelEvent.COUNT_CHANGED,this.setResourceCount.bind(this)),this.registerListener(this._object,p.ObjectModelEvent.STATE_CHANGED,this.setState.bind(this)),this.registerListener(this.child("upgradeButton"),f.POINTER_TAP,this.onUpgradeButton.bind(this)),this.registerListener(this.child("buyButton"),f.POINTER_TAP,this.onBuyButton.bind(this)),this.registerListener(this.child("askButton"),f.POINTER_TAP,this.onAskButton.bind(this)),i.Application.model.objects.dispatchEvent(new _.ObjectEvent(_.ObjectEvent.UPGRADE_WINDOW_SHOW,this._object.id))},UpgradeObjectWindowMediator.prototype.setViralImages=function(){for(var t=a.PriceAwardUtils.getResourceResourceId(this._viralPrice.itemId,"64"),e=0;e<3;e++)this._loadableImages[e]=new h.LoadableImage(this.child("resource"+(e+1)+"Icon"),t,0===e)},UpgradeObjectWindowMediator.prototype.setInfo=function(){this.child("nameLabel").text=this._object.title,this.child("levelLabel").text=i.Application.localization.localize("UPGRADE_LEVEL",{stage:this._object.stage.toString(),maxStage:this._object.maxStage.toString()}),this.child("resourceNameLabel").text=i.Application.localization.localize(a.PriceAwardUtils.getAwardString(this._viralPrice,"name"))},UpgradeObjectWindowMediator.prototype.setState=function(){this._container.currentState=this._object.state===u.ObjectState.REQUEST?"notEnough":"upgrade"},UpgradeObjectWindowMediator.prototype.setResourceCount=function(){this._resourceCountLabel.text=this._resourceModel.count+"/"+this._viralPrice.value},UpgradeObjectWindowMediator.prototype.onUpgradeButton=function(){i.Application.view.hide(this.viewHandle),r.ElkaCore.instance.promiseManager.ask(new o.ObjectStageUpPromise(this._showData.object))},UpgradeObjectWindowMediator.prototype.onBuyButton=function(){r.ElkaCore.instance.promiseManager.ask(new l.BuyViralResourcesPromise(this._viralPrice))},UpgradeObjectWindowMediator.prototype.onAskButton=function(){r.ElkaCore.instance.promiseManager.ask(new d.ShowAskViralWindowPromise(this._viralPrice.itemId))},UpgradeObjectWindowMediator.prototype.destroy=function(){this._loadableImages.forEach(function(t){return t.destroy()}),e.prototype.destroy.call(this)},UpgradeObjectWindowMediator}(n.DisplayObjectContainerMediator);e.UpgradeObjectWindowMediator=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},w=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(819),n(8),n(2),n(14),n(32),n(4),n(144)],void 0===(r=function(t,e,n,_,f,y,m,v,i,b,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function ObjectStageUpCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ObjectStageUpCommand,t),ObjectStageUpCommand.prototype.execute=function(h){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p,l,d;return w(this,function(t){switch(t.label){case 0:return e=h.object,n=void 0,(i=e.isLoopedStage)||(r=_.Application.price.calculate(e.nextStage.prices),n=_.Application.price.hold(r)),o=[this._data.shineResource],e.stage<e.maxStage&&o.push(this._data.getSpineResource(e.id,e.stage+1)),[4,_.Application.resources.getResources(o,!0)];case 1:return t.sent(),a=e.getGeneratorBoostAward(),s=e.getNextStageExtraItemAward(),[4,_.Application.server.send(new f.ObjectStageUpAction(e.id))];case 2:if(c=t.sent(),_.Application.award.accrueAwardImmediately(c.output.award),n&&_.Application.price.release(n),u=_.Application.award.convertObjectToCalculated(c.output.award),a&&u.add(a.toCalculated()),!s)return[3,4];if(p=u.getByType(v.AwardType.EXTRA_ITEM),l=u.awards.filter(function(t){return t.type===v.AwardType.BEAUTY&&"extraItem"===t.itemId}),!p||p.itemId!==s.itemId||1!==l.length)throw Error("ObjectStageUpCommand: incorrect extraItem award!");return p.type=s.type,p.value=s.value,u.awards.splice(u.awards.indexOf(l[0]),1),[4,b.ElkaCore.instance.promiseManager.ask(new g.SetExtraItemPromise(parseInt(s.itemId)))];case 3:t.sent(),t.label=4;case 4:return i||(d=new y.ViewContext({object:e,awards:u.awards}),_.Application.view.show(m.GUINames.STAGE_UP_OBJECT_WINDOW,d),_.Application.view.hideByWindowName(m.GUINames.FRIENDS_WINDOW)),this.goalStarkEvent(u,e),[2]}})})},ObjectStageUpCommand.prototype.goalStarkEvent=function(t,e){var n=t.getAwardTypeItemId(v.AwardType.RESOURCE,"farmCrystal");_.Application.metrics.goalStarkEvent(i.StarkEventsName.OBJECT_UPGRADE,{lev:e.realStage,fcreward:n?n.value:0,on:e.id})},ObjectStageUpCommand}(n.CommandBase);e.ObjectStageUpCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function ObjectStageUpAction(t){var e=n.call(this)||this;return e.action="stageUp",e.controller="object",e.input=new i.ActionInput({objectName:t}),e.output=new o,e}return a(ObjectStageUpAction,n),ObjectStageUpAction}(n.Action);e.ObjectStageUpAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8),n(39)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function SelectObjectReadyStateMediator(){return null!==e&&e.apply(this,arguments)||this}return u(SelectObjectReadyStateMediator,e),SelectObjectReadyStateMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData,this._container.buttonMode=!0,this.registerListener(this._container,s.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._object,a.ObjectModelEvent.REQUEST_STATE_ACTION,this.onTap.bind(this))},SelectObjectReadyStateMediator.prototype.onTap=function(){i.Application.view.show(r.GUINames.UPGRADE_OBJECT_WINDOW,new o.ViewContext({object:this._object})),i.Application.view.hide(this.viewHandle.viewContext.node.root.handle)},SelectObjectReadyStateMediator}(n.DisplayObjectContainerMediator);e.SelectObjectReadyStateMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(21),n(14)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function UseEnergyAwardListItemMediator(){return null!==i&&i.apply(this,arguments)||this}return s(UseEnergyAwardListItemMediator,i),UseEnergyAwardListItemMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t);var e=this._showData;e.type===a.AwardType.EXTRA_ITEM_WITH_BEAUTY&&(this._container.currentState="extraItem");var n=this.child("countLabel");this._awardRenderer=(new r.AwardRenderer).initialize(e.toCalculated(),this._container,{iconId:64,tooltip:o.TooltipAnchor.Right,countLabel:!e.hasMinMax()&&n,fit:64}),e.hasMinMax()&&(n.text=e.minValue+"-"+e.maxValue)},UseEnergyAwardListItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),i.prototype.destroy.call(this)},UseEnergyAwardListItemMediator}(n.DisplayObjectContainerMediator);e.UseEnergyAwardListItemMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(30),n(34),n(43),n(46)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.UIContainer,u=uipixi.GestureEvent,p=function(e){function StageUpObjectWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return l(StageUpObjectWindowMediator,e),StageUpObjectWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.viewHandle.onShown.capture(),this._object=this._showData.object,this._snowMaidenId="",this.setName(),this.setStage(),this.setSpine(),this.setAwards(this._showData.awards),this.setContinueButton(),this.setWallpostCheckBox(),this.setAnimation(this._showData.awards.length),i.Application.sound.play(a.SoundName.UPGRADE_JINGLE,!1,s.SoundGroup.SOUND_GROUP_SOUND)},StageUpObjectWindowMediator.prototype.setWallpostCheckBox=function(){this._wallpostCheckBox=this.child("wallpostCheckBox"),this._wallpostCheckBox.selected=!1},StageUpObjectWindowMediator.prototype.setSpine=function(){this.child("spineContainer").addChild(new c(this._object.id))},StageUpObjectWindowMediator.prototype.setName=function(){this.child("nameLabel").text=this._object.title},StageUpObjectWindowMediator.prototype.setStage=function(){this.child("prevStageLabel").text=i.Application.localization.localize("STAGE_UP_STAGE",{stage:(this._object.stage-1).toString()}),this.child("nextStageLabel").text=i.Application.localization.localize("STAGE_UP_STAGE",{stage:this._object.stage.toString()})},StageUpObjectWindowMediator.prototype.setAwards=function(t){for(var e=this.child("awardsList"),n=0;n<t.length;n++){var i=t[n];e.addItem({award:i,index:n})}},StageUpObjectWindowMediator.prototype.setContinueButton=function(){var t=this.child("continueButton");this.registerListener(t,u.POINTER_TAP,this.onContinue.bind(this))},StageUpObjectWindowMediator.prototype.onContinue=function(){return d(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return this._wallpostCheckBox.selected?[4,i.Application.social.post(this._object.currentStage.wallpostId)]:[3,2];case 1:if(t.sent(),this._cancellationToken.requested)return[2];t.label=2;case 2:return i.Application.view.hide(this.viewHandle),i.Application.model.objects.completeStageUp(this._object),[2]}})})},StageUpObjectWindowMediator.prototype.setAnimation=function(t){var e=0,n=1;this._object.id===this._snowMaidenId&&(e=.85,n=0),this._animation=r.AnimationUtils.awardWindow(this.child("labelsContainer"),this.child("awardLabel"),this.child("spineContainer"),this.child("continueButton"),this.child("wallpostCheckBox"),this.child("shineSpine"),e,n,t),this.registerListener(this._animation,o.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this.registerListener(i.Application.view.ui.stage,u.POINTER_DOWN,this.onStageTap.bind(this))},StageUpObjectWindowMediator.prototype.onStageTap=function(){this.unregisterListener(i.Application.view.ui.stage,u.POINTER_DOWN,this.onStageTap.bind(this)),this._animation.stop(!0)},StageUpObjectWindowMediator.prototype.onAnimationComplete=function(){this.viewHandle.onShown.complete()},StageUpObjectWindowMediator.prototype.destroy=function(){this._animation.stop(),e.prototype.destroy.call(this)},StageUpObjectWindowMediator}(n.DisplayObjectContainerMediator);e.StageUpObjectWindowMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(39),n(69),n(0),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(e){function ObjectReadyMarkerMediator(){return null!==e&&e.apply(this,arguments)||this}return p(ObjectReadyMarkerMediator,e),ObjectReadyMarkerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData,this._container.buttonMode=!0,this.setState(),this.registerListener(this._object,i.ObjectModelEvent.STATE_CHANGED,this.setState.bind(this)),this.registerListener(this._container,c.POINTER_TAP,this.onTap.bind(this))},ObjectReadyMarkerMediator.prototype.setState=function(){switch(this._object.state){case r.ObjectState.READY:case r.ObjectState.REQUEST:this._container.currentState=this._object.state;break;default:this._container.currentState="off"}},ObjectReadyMarkerMediator.prototype.onTap=function(){o.Application.view.show(a.GUINames.UPGRADE_OBJECT_WINDOW,new s.ViewContext({object:this._object}))},ObjectReadyMarkerMediator}(n.DisplayObjectContainerMediator);e.ObjectReadyMarkerMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(49),n(42),n(16),n(38)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(n){function ObjectRequestMarkerMediator(){return null!==n&&n.apply(this,arguments)||this}return u(ObjectRequestMarkerMediator,n),ObjectRequestMarkerMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._viralPrice=i.Application.price.calculate(this._mapData.nextStage.prices).getPriceFirst(r.PriceType.RESOURCE),this._resourceModel=i.Application.model.resources.get(this._viralPrice.itemId),this._countLabel=this.child("countLabel");var e=s.PriceAwardUtils.getResourceResourceId(this._viralPrice.itemId,"64");this._loadableImage=new a.LoadableImage(this.child("iconImage"),e),this.setCount(),this.registerListener(this._resourceModel,o.ResourceModelEvent.COUNT_CHANGED,this.setCount.bind(this))},ObjectRequestMarkerMediator.prototype.setCount=function(){this._countLabel.text=this._resourceModel.count+"/"+this._viralPrice.value},ObjectRequestMarkerMediator.prototype.destroy=function(){this._loadableImage.destroy(),n.prototype.destroy.call(this)},ObjectRequestMarkerMediator}(n.DisplayObjectContainerMediator);e.ObjectRequestMarkerMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(68)],void 0===(r=function(t,e,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BuyViralResourcesCommand(){return null!==t&&t.apply(this,arguments)||this}return s(BuyViralResourcesCommand,t),BuyViralResourcesCommand.prototype.execute=function(r){return c(this,void 0,void 0,function(){var e,n,i;return u(this,function(t){switch(t.label){case 0:return e=o.Application.price.calculateNotEnoughValue(r.viralPrice),n=this._data.resourceModel.get(r.viralPrice.itemId).static,(i=o.Application.price.calculate(o.Application.static.data.promos.promo.getItem(n.promoId).offers.getItem(n.offerId).prices)).multiply(e),[4,o.Application.confirm.show(a.ConfirmType.Buy,{prices:i})];case 1:return t.sent()&&o.Application.payment.directBuy(n.promoId,n.offerId,{count:e}),[2]}})})},BuyViralResourcesCommand}(n.CommandBase);e.BuyViralResourcesCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(827),n(215),n(828)],void 0===(r=function(t,e,i,p,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ObjectModelFactory(t,e){this._staticData=t,this._skinsStaticData=e}return ObjectModelFactory.prototype.createSelf=function(e){var n=this;return new i.ObjectsModel(this._staticData.object.items.map(function(t){return new r.ObjectModel(e.getItem(t.id),n._staticData.object.getItem(t.id),n._skinsStaticData.skin.getItem(t.id))}))},ObjectModelFactory.prototype.createFriend=function(t,e){for(var n=[],i=0,r=this._staticData.object.items;i<r.length;i++){var o=r[i];if(o.screen===t){var a=o.id,s=e.getItem(a),c=s?s.stage:1,u=new p.FriendObjectModel(a,o,c,this._skinsStaticData.skin.getItem(a));n.push(u)}}return n},ObjectModelFactory}();e.ObjectModelFactory=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(213),n(69)],void 0===(r=function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ObjectsModel(t){var e=n.call(this)||this;return e._useEnergyTurboSpeed=!1,e._objects=new core.Map,t.forEach(function(t){return e._objects.set(t.id,t)}),e}return s(ObjectsModel,n),ObjectsModel.prototype.getObject=function(t){return this._objects.get(t)},Object.defineProperty(ObjectsModel.prototype,"all",{get:function(){var e=[];return this._objects.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),ObjectsModel.prototype.getByScreen=function(e){return this.all.filter(function(t){return t.staticData.screen===e})},Object.defineProperty(ObjectsModel.prototype,"useEnergyTurboSpeed",{get:function(){return this._useEnergyTurboSpeed},set:function(t){this._useEnergyTurboSpeed!==t&&(this._useEnergyTurboSpeed=t,this.dispatchEvent(new i.ObjectsModelEvent(i.ObjectsModelEvent.USE_ENERGY_TURBO_SPEED_CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectsModel.prototype,"minimalPercentObjectId",{get:function(){return this._minObjectId},enumerable:!0,configurable:!0}),ObjectsModel.prototype.updateMinimalPercentObject=function(){for(var t=Number.MAX_VALUE,e=null,n=0,i=this.all;n<i.length;n++){var r=i[n];if(r.nextStageExp){var o=r.nextStageExp-r.currentStageExp;o<=t&&r.state===a.ObjectState.NORMAL&&(t=o,e=r.id)}}this._minObjectId=e},ObjectsModel.prototype.completeStageUp=function(t){this.dispatchEvent(new i.ObjectsModelEvent(i.ObjectsModelEvent.STAGE_UP_COMPLETED,t))},ObjectsModel.prototype.getObjectNameByViralResource=function(t){for(var e=0,n=this.all;e<n.length;e++){var i=n[e];if(i.getViralResourceId()===t)return i.id}return null},ObjectsModel}(uipixi.BaseEventTarget);e.ObjectsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(39),n(0),n(829),n(49),n(14),n(370),n(23)],void 0===(r=function(t,e,o,n,d,a,i,s,h,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(r){function ObjectModel(t,e,n){var i=r.call(this)||this;return i._dynamic=t,i._static=e,i.id=t.id,i._exp=t.exp,i.maxStage=i._static.stage.items.reduce(function(t,e){return Math.max(t,e.id)},1),i._states=new a.SelfObjectStates(i),i._state=i._states.getState(),i._generator=d.Application.model.generators.getById(i.id),i._skin=n,i._dynamic.addEventListener(o.BaseDataEvent.CHILDREN_CHANGED,i.onChildrenChanged.bind(i)),i}return u(ObjectModel,r),ObjectModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("stage")&&this.dispatchEvent(new n.ObjectModelEvent(n.ObjectModelEvent.STAGE_UP))},Object.defineProperty(ObjectModel.prototype,"stage",{get:function(){return Math.min(this._dynamic.stage,this.maxStage)},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"realStage",{get:function(){return this._dynamic.stage},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp!==t&&(this._exp=t,this.dispatchEvent(new n.ObjectModelEvent(n.ObjectModelEvent.EXP_CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"title",{get:function(){return d.Application.localization.localize(this._static.titleKey)},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"hasSkin",{get:function(){return this._static.hasSkins},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"staticData",{get:function(){return this._static},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"currentStageExp",{get:function(){return this.getExpToStage(this.realStage)},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"nextStageExp",{get:function(){return this.getExpToStage(this.realStage+1)},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"nextStage",{get:function(){return this.getStageStaticData(this.realStage+1)},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"currentStage",{get:function(){return this.getStageStaticData(this.realStage)},enumerable:!0,configurable:!0}),ObjectModel.prototype.getStageStaticData=function(t){return this._static.stage.getItem(t>this.maxStage?-1:t)},Object.defineProperty(ObjectModel.prototype,"state",{get:function(){return this._state},set:function(t){this._state!==t&&(this._state=t,this.dispatchEvent(new n.ObjectModelEvent(n.ObjectModelEvent.STATE_CHANGED)))},enumerable:!0,configurable:!0}),ObjectModel.prototype.requestStateAction=function(){this.dispatchEvent(new n.ObjectModelEvent(n.ObjectModelEvent.REQUEST_STATE_ACTION))},ObjectModel.prototype.getViralResourceId=function(){if(this.nextStage){var t=d.Application.price.calculate(this.nextStage.prices).getPriceFirst(i.PriceType.RESOURCE);return t?t.itemId:void 0}},ObjectModel.prototype.getNextStageAwards=function(){var t=this.nextStage;if(t){for(var e=this.getAwards(t.awards),n=this.getExtraItemAwardFromRef(e),i=[],r=0,o=e=e.filter(function(t){return!t.ref});r<o.length;r++){for(var a=o[r],s=!1,c=0,u=i;c<u.length;c++){if((p=u[c]).type===a.type&&p.itemId===a.itemId){p.minMaxFromValue(d.Application.calculator.calculate(a.value,null,!0)),s=!0;break}}if(!s){var p=new h.ObjectStageAward(a.type,a.itemId,d.Application.calculator.calculate(a.value,null,!0));i.push(p)}}var l=this.getGeneratorBoostAward();return l&&i.push(l),n&&i.push(n),i}},ObjectModel.prototype.getGeneratorBoostAward=function(){if(this._generator){var t=this._generator.cooldown-this._generator.nextStageCooldown;if(0<t)return new h.ObjectStageAward(s.AwardType.GENERATOR_BOOST,this._generator.resource.id,t)}},ObjectModel.prototype.getExtraItemAwardFromRef=function(t){var e,n=t.filter(function(t){return t.ref});if(0<n.length){var i=c.AwardsTreeStaticData.parse({});(e=i.award).push.apply(e,n);var r=d.Application.award.calculate(i);if(2!==r.awards.length)throw Error("Incorrect extraItem award ref");var o=r.getByType(s.AwardType.EXTRA_ITEM),a=r.getByType(s.AwardType.BEAUTY);return new h.ObjectStageAward(s.AwardType.EXTRA_ITEM_WITH_BEAUTY,o.itemId,a.value)}},ObjectModel.prototype.getNextStageExtraItemAward=function(){var t=this.nextStage;if(t){var e=this.getAwards(t.awards);return this.getExtraItemAwardFromRef(e)}},ObjectModel.prototype.getAwards=function(t){var e=this,n=[];return d.Application.requirements.check(t.requirements)&&(n=(n=n.concat(t.award.map(function(t){return t}))).concat.apply(n,t.awards.map(function(t){return e.getAwards(t)}))),n},Object.defineProperty(ObjectModel.prototype,"currentBeauty",{get:function(){for(var t=0,e=0,n=this.staticData.stage.items;e<n.length;e++){var i=n[e];if(-1!==i.id&&i.id>this.stage)break;var r=d.Application.award.calculate(i.awards).getByType(s.AwardType.BEAUTY);r&&(t+=r.value)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModel.prototype,"isLoopedStage",{get:function(){var t=this.nextStage;return t&&-1===t.id},enumerable:!0,configurable:!0}),ObjectModel.prototype.getLoopedAward=function(){var t=this._static.stage.getItem(-1);return t?d.Application.award.calculate(t.awards).getByType(s.AwardType.RESOURCE):void 0},ObjectModel.prototype.getExpToStage=function(t){var e=this.getStageStaticData(t);if(e)return d.Application.calculator.calculate(e.exp,{objectStage:(t-1).toString()})},ObjectModel}(uipixi.BaseEventTarget);e.ObjectModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(69),n(0),n(39)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function SelfObjectStates(t){var e=n.call(this)||this;return e._object=t,e._object.addEventListener(o.ObjectModelEvent.EXP_CHANGED,e.onChanged.bind(e)),e._object.addEventListener(o.ObjectModelEvent.STAGE_UP,e.onChanged.bind(e)),e.waitStageRequirements(),e.waitPrices(),e}return a(SelfObjectStates,n),SelfObjectStates.prototype.getState=function(){var t=this._object.nextStage;return t?r.Application.requirements.check(t.requirements)?this._object.isLoopedStage?i.ObjectState.NORMAL:this._object.exp>=this._object.nextStageExp?r.Application.price.canSpend(this._object.nextStage.prices)?i.ObjectState.READY:i.ObjectState.REQUEST:i.ObjectState.NORMAL:i.ObjectState.LOCK:i.ObjectState.MAX_STAGE},SelfObjectStates.prototype.updateState=function(){this._waitRequirements&&this.unwaitStageRequirements(),this._waitPrices&&this.unwaitPrices(),this._object.state=this.getState(),this.waitStageRequirements(),this.waitPrices()},SelfObjectStates.prototype.onChanged=function(){this.updateState()},SelfObjectStates.prototype.waitStageRequirements=function(){this._object.nextStage&&(this._waitRequirements=this._object.nextStage.requirements,r.Application.requirements.wait(this._waitRequirements,this.onStageRequirementsChanged.bind(this)))},SelfObjectStates.prototype.onStageRequirementsChanged=function(){this.unwaitStageRequirements(),this.updateState()},SelfObjectStates.prototype.unwaitStageRequirements=function(){r.Application.requirements.unwait(this._waitRequirements,this.onStageRequirementsChanged.bind(this)),this._waitRequirements=void 0},SelfObjectStates.prototype.waitPrices=function(){this._object.nextStage&&(this._waitPrices=this._object.nextStage.prices,r.Application.price.addWaitCanSpend(this._waitPrices,this.onWaitPricesChanged.bind(this)))},SelfObjectStates.prototype.onWaitPricesChanged=function(){this.unwaitPrices(),this.updateState()},SelfObjectStates.prototype.unwaitPrices=function(){r.Application.price.removeWaitCanSpend(this._waitPrices,this.onWaitPricesChanged.bind(this)),this._waitPrices=void 0},SelfObjectStates}(uipixi.BaseEventTarget);e.SelfObjectStates=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(329)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function AwardItemStaticData(){return null!==e&&e.apply(this,arguments)||this}return a(AwardItemStaticData,e),AwardItemStaticData.parse=function(t){var e=new AwardItemStaticData;return e._parse(t),e},AwardItemStaticData.prototype._parse=function(t){e.prototype._parse.call(this,t)},AwardItemStaticData}(n.BasePriceAwardTypeStaticData);e.AwardItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ObjectsResourceUtils(t,e,n,i,r){this._spruceResourcePattern=r,this._spineResourcePattern=t,this._animationNamePattern=e,this._shineResource=n,this._skinObjectPattern=i}return ObjectsResourceUtils.prototype.getSpineResource=function(t,e){return this._spineResourcePattern.replace("{name}",t).replace("{stage}",e.toString())},ObjectsResourceUtils.prototype.getSkinnedObjectSpineResource=function(t){return this._skinObjectPattern.replace("{name}",t)},ObjectsResourceUtils.prototype.getAnimationName=function(t){return this._animationNamePattern.replace("{stage}",t.toString())},ObjectsResourceUtils.prototype.getSpruceGarlandResources=function(t){var e=t.getActiveItemByType(o.Application.static.data.client.skins.spruceGarlands.extraItemType);if(!e)return null;for(var n=0,i=o.Application.static.data.client.skins.spruceGarlands.item;n<i.length;n++){var r=i[n];if(r.extraItemId===e.id)return r.spine}return null},ObjectsResourceUtils.prototype.getResourcesToLoadByModel=function(t,e,n){var i=this,r=t.filter(function(t){return t.staticData.screen===e}).map(function(t){return"winterSpruce"===t.id?"objects/winterSpruce/spruce":t.hasSkin?i.getSkinnedObjectSpineResource(t.id):i.getSpineResource(t.id,t.stage)});if(1===e){var o=this.getSpruceGarlandResources(n);o&&r.push(o)}return r},Object.defineProperty(ObjectsResourceUtils.prototype,"shineResource",{get:function(){return this._shineResource},enumerable:!0,configurable:!0}),ObjectsResourceUtils}();e.ObjectsResourceUtils=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(2),n(1),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,a=uipixi.UIContainer,s=function(e){function ObjectMaxLevelWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return c(ObjectMaxLevelWindowMediator,e),ObjectMaxLevelWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._showData.object,this.setInfo(),this.setSpine(),this.initBackButton()},ObjectMaxLevelWindowMediator.prototype.setInfo=function(){this.child("nameLabel").text=this._object.title},ObjectMaxLevelWindowMediator.prototype.setSpine=function(){this.child("spineContainer").addChild(new a(this._object.id))},ObjectMaxLevelWindowMediator.prototype.initBackButton=function(){var t=this.child("backButton");this.registerListener(t,o.POINTER_TAP,this.onBackButton.bind(this))},ObjectMaxLevelWindowMediator.prototype.onBackButton=function(){r.Application.view.show(n.GUINames.SELECT_OBJECT_WINDOW),r.Application.view.hide(this.viewHandle)},ObjectMaxLevelWindowMediator}(i.DisplayObjectContainerMediator);e.ObjectMaxLevelWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(39),n(0),n(30),n(371)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.Point,c=uipixi.GestureEvent,u=function(n){function UseEnergyStarsAnimationMediator(){return null!==n&&n.apply(this,arguments)||this}return p(UseEnergyStarsAnimationMediator,n),UseEnergyStarsAnimationMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._animations=[],this._startTime=0,this._speed=r.Application.static.data.client.useEnergySpeed.second.items,this._interval=.001*r.Application.static.data.client.useEnergySpeed.interval,this._fullStarTime=1,this.getChildren(),this.cacheAnchorPoints(),this._soundController=new a.UseEnergySoundController;var e=this._showData.object;this.registerListener(e,i.ObjectModelEvent.EXP_CHANGED,this.onExpChanged.bind(this)),this.registerListener(this._container,c.POINTER_UP,this.onUp.bind(this))},UseEnergyStarsAnimationMediator.prototype.getChildren=function(){this._dropAwardsContainer=this.child("dropAwardsContainer"),this._dropAwardCenterPoint=this.child("dropAwardCenterPoint"),this._expBarStarImage=this.child("expBarStarImage")},UseEnergyStarsAnimationMediator.prototype.cacheAnchorPoints=function(){r.Application.view.ui.stage.update(),this._topLeft=new s(0,0),this._bottomRight=new s(this._dropAwardsContainer.width,this._dropAwardsContainer.height),this._center=new s(this._dropAwardCenterPoint.x,this._dropAwardCenterPoint.y),this._barPoint=this._expBarStarImage.getGlobalPosition().add(new s(.5*this._expBarStarImage.width,.5*this._expBarStarImage.height));var t=this._dropAwardsContainer.getGlobalPosition();this._barPoint.x-=t.x,this._barPoint.y-=t.y},UseEnergyStarsAnimationMediator.prototype.onExpChanged=function(){this._startTime+=this._interval;var t=Math.min(Math.floor(this._startTime),this._speed.length-1);this._fullStarTime+=this._speed[t].stars,1<=this._fullStarTime&&(this._fullStarTime-=1,this.createStar())},UseEnergyStarsAnimationMediator.prototype.createStar=function(){var t=o.AnimationUtils.throwStar("resources_64/star_animate",this._center,this._center.y-this._topLeft.y,this._bottomRight.x-this._center.x,this._bottomRight.y,this._barPoint,this._dropAwardsContainer);this._animations.push(t),this._soundController.playNextSound()},UseEnergyStarsAnimationMediator.prototype.onUp=function(){this._startTime=0,this._fullStarTime=1,this._soundController.stop()},UseEnergyStarsAnimationMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),this._soundController.destroy(),n.prototype.destroy.call(this)},UseEnergyStarsAnimationMediator}(n.DisplayObjectContainerMediator);e.UseEnergyStarsAnimationMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(2),n(0),n(8),n(33)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIFactory,c=function(t){function ShowAskViralWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return u(ShowAskViralWindowCommand,t),ShowAskViralWindowCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return[4,r.Application.profiles.getInvitableFriends()];case 1:return e=t.sent(),(n=new o.ViewContext).showData={friendsTabData:{friends:r.Application.dynamic.friends.items,viralItemId:i.viralItemId},invitesTabData:{friends:e,viralItemId:i.viralItemId}},this.showWindow(n),[2]}})})},ShowAskViralWindowCommand.prototype.showWindow=function(t){switch(r.Application.social.platformType){case a.PlatformType.OK:case a.PlatformType.VK:case a.PlatformType.VK_MOBILE:return r.Application.view.show(i.GUINames.ASK_VIRAL_WINDOW,t);case a.PlatformType.FB:var e=s.instance.createUIElementByName("askViralWindow_FB");return e.name=i.GUINames.ASK_VIRAL_WINDOW,r.Application.view.show(e,t);default:r.Application.debug.addError("mail","Platform is not supported for requests")}},ShowAskViralWindowCommand}(n.CommandBase);e.ShowAskViralWindowCommand=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(145),n(121),n(372),n(2),n(21)],void 0===(r=function(t,e,n,r,o,a,i,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=uipixi.ToggleButtonEvent,l=function(e){function AskViralFriendsTabMediator(){return null!==e&&e.apply(this,arguments)||this}return d(AskViralFriendsTabMediator,e),AskViralFriendsTabMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._data=t.viewContext.node.root.handle.viewContext.showData.friendsTabData,this.initComponents(),this.setupComponents()},AskViralFriendsTabMediator.prototype.initComponents=function(){this._searchContainer=this.child("searchContainer"),this._selectAllCheckBox=this.child("selectAllCheckBox"),this._askButton=this.child("askButton"),this._requestsLabel=this.child("requestsLabel"),this._friendsList=this.child("friendsList")},AskViralFriendsTabMediator.prototype.setupComponents=function(){this._todaySentCount=r.Application.model.viralExchange.getSentCount(this._data.viralItemId),this._todaySentLimit=r.Application.static.data.viralExchange.dailyLimit,this._maxCountToSelect=this._todaySentLimit-this._todaySentCount,this.registerListener(this._askButton,u.POINTER_TAP,this.onTapAsk.bind(this)),this.registerListener(this._selectAllCheckBox,p.SELECTED_CHANGED,this.onSelectAllChanged.bind(this));for(var t=this.createAllFriendsList(),e=0,n=t;e<n.length;e++){var i=n[e];this.registerListener(i,o.ViralSelectItemsEvent.ITEM_SELECTED_CHANGED,this.selectedCountChanged.bind(this))}this._searchedItems=t,this._searchRenderer=new a.SearchRenderer(this._searchContainer,{dataItems:t,searchKey:"name"}),this.registerListener(this._searchRenderer,a.SearchRendererEvent.SEARCH,this.onSearch.bind(this)),this.selectMaxCount(),this.lockUnselectedItems(),this.fillList(),this.updateButton(),this.updateRequestsLabel(),this.addTooltip()},AskViralFriendsTabMediator.prototype.updateRequestsLabel=function(){this._requestsLabel.text=this._todaySentCount+"/"+this._todaySentLimit},AskViralFriendsTabMediator.prototype.updateButton=function(){this._askButton.enabled=0<this.countOfSelectedItems()},AskViralFriendsTabMediator.prototype.onSearch=function(t){this.clearList(),this.unlockAll(),this.unSelectAll(),this._searchedItems=t.data,this.selectedCountChanged(),this.fillList()},AskViralFriendsTabMediator.prototype.countOfSelectedItems=function(){for(var t=0,e=0,n=this.showedItems;e<n.length;e++){n[e].selected&&t++}return t},AskViralFriendsTabMediator.prototype.checkOnMaxCount=function(){this.isMaxCountSelected()?this.lockUnselectedItems():this.unlockAll()},AskViralFriendsTabMediator.prototype.unlockAll=function(){for(var t=0,e=this.showedItems;t<e.length;t++){e[t].locked=!1}},AskViralFriendsTabMediator.prototype.lockUnselectedItems=function(){for(var t=0,e=this.showedItems;t<e.length;t++){var n=e[t];n.selected||(n.locked=!0)}},AskViralFriendsTabMediator.prototype.onSelectAllChanged=function(t){t.data.selected?(this.selectMaxCount(),this.lockUnselectedItems()):this.unSelectAll()},AskViralFriendsTabMediator.prototype.selectedCountChanged=function(){var t=this.isMaxCountSelected()&&0<this.countOfSelectedItems();this._selectAllCheckBox.selected!==t&&(this.unregisterListener(this._selectAllCheckBox,p.SELECTED_CHANGED,this.onSelectAllChanged.bind(this)),this._selectAllCheckBox.selected=t,this.registerListener(this._selectAllCheckBox,p.SELECTED_CHANGED,this.onSelectAllChanged.bind(this))),this._selectAllCheckBox.enabled=0<this.showedItems.length,this.checkOnMaxCount(),this.updateButton()},Object.defineProperty(AskViralFriendsTabMediator.prototype,"showedItems",{get:function(){return this._searchedItems},enumerable:!0,configurable:!0}),AskViralFriendsTabMediator.prototype.isMaxCountSelected=function(){var t=this.countOfSelectedItems();return t===this._maxCountToSelect||t===this.showedItems.length},AskViralFriendsTabMediator.prototype.selectMaxCount=function(){this.unSelectAll();for(var t=0,e=0,n=this.showedItems;e<n.length;e++){if(n[e].selected=!0,++t===this._maxCountToSelect)break}},AskViralFriendsTabMediator.prototype.unSelectAll=function(){for(var t=0,e=this.showedItems;t<e.length;t++){e[t].selected=!1}},AskViralFriendsTabMediator.prototype.createAllFriendsList=function(){var e=this,t=this._data.friends.filter(function(t){return r.Application.model.viralExchange.isAvailableToSend(t.sUserId,e._data.viralItemId)});return t.sort(function(t,e){return t.isNPC?e.isNPC&&t.userId<e.userId?1:-1:e.isNPC?1:t.loginTime>e.loginTime?-1:1}),t.map(function(t){var e=r.Application.profiles.getProfile(t.sUserId,!0);return new i.AskViralFriendItemData(t,e.firstName+" "+e.lastName)})},AskViralFriendsTabMediator.prototype.clearList=function(){this._friendsList.removeAllItems()},AskViralFriendsTabMediator.prototype.fillList=function(){this.clearList(),this._friendsList.addItems(this.showedItems)},AskViralFriendsTabMediator.prototype.onTapAsk=function(){var t=this.showedItems.filter(function(t){return t.selected}).map(function(t){return t.friend.sUserId});r.Application.viralExchange.requestViralResources(this._data.viralItemId,t),r.Application.view.isShowed(s.GUINames.UPGRADE_OBJECT_WINDOW)&&r.Application.view.hideByWindowName(s.GUINames.UPGRADE_OBJECT_WINDOW),r.Application.view.hide(this.viewHandle.viewContext.node.root.handle)},AskViralFriendsTabMediator.prototype.addTooltip=function(){var t=this.child("helpButton");r.Application.tooltip.addTooltip(t,c.TooltipAnchor.Top,s.GUINames.TEXT_TOOLTIP,{text:"REQUEST_SELECT_FRIENDS_REQUESTS_HELP"})},AskViralFriendsTabMediator.prototype.destroy=function(){this._searchRenderer.destroy(),e.prototype.destroy.call(this)},AskViralFriendsTabMediator}(n.DisplayObjectContainerMediator);e.AskViralFriendsTabMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(40),n(95),n(0),n(145),n(58),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.ToggleButtonEvent,p=function(e){function AskViralFriendItemMediator(){return null!==e&&e.apply(this,arguments)||this}return l(AskViralFriendItemMediator,e),AskViralFriendItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._toggleButton=this._container,this._showData.friend instanceof r.UserEntity?this._profile=o.Application.profiles.getProfile(this._showData.friend.userId,!0):this._profile=o.Application.profiles.getProfile(this._showData.friend.sUserId,!0),this._profileRenderer=new i.ProfileRenderer,this._profileRenderer.initialize(this._profile,this._container,{cropedFullnameLength:18,cropedFullnameSuffix:s.StringUtils.DEFAULT_CROP_SUFFIX}),this._checkBoxBG=this.child("checkBoxBG"),this.registerListener(this._showData,a.ViralSelectItemsEvent.ITEM_SELECTED_CHANGED,this.selectChanged.bind(this)),this.registerListener(this._showData,a.ViralSelectItemsEvent.ITEM_LOCK_CHANGED,this.lockedChanged.bind(this)),this.registerListener(this._toggleButton,u.SELECTED_CHANGED,this.onTapButton.bind(this)),this.selectChanged(null),this.lockedChanged(null),this.setupFrame()},AskViralFriendItemMediator.prototype.setupFrame=function(){var t=this.child("frame"),e=o.Application.model.ratings.getBestPlace(this._profile.userId),n=o.Application.model.ratings.getFrameResource(64,e);this._frameLoadableImage=new c.LoadableImage(t,n)},AskViralFriendItemMediator.prototype.onTapButton=function(){this._showData.selected=this._toggleButton.selected},AskViralFriendItemMediator.prototype.selectChanged=function(t){this._toggleButton.select(this._showData.selected)},AskViralFriendItemMediator.prototype.lockedChanged=function(t){this._showData.locked?(this._container.alpha=.5,this._checkBoxBG.visible=!1):(this._container.alpha=1,this._checkBoxBG.visible=!0),this._toggleButton.enabled=!this._showData.locked},AskViralFriendItemMediator.prototype.destroy=function(){this._frameLoadableImage&&this._frameLoadableImage.destroy(),this._profileRenderer.destroy(),e.prototype.destroy.call(this)},AskViralFriendItemMediator}(n.DisplayObjectContainerMediator);e.AskViralFriendItemMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function ProfileRendererEvent(t){return e.call(this,t)||this}return a(ProfileRendererEvent,e),ProfileRendererEvent.AVATAR_COMPLETED="avatarCompleted",ProfileRendererEvent}(n.BaseDataEvent);e.ProfileRendererEvent=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=uipixi.ToggleButtonEvent,o=function(e){function AskViralWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return a(AskViralWindowMediator,e),AskViralWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.initComponents(),this.setupComponents()},AskViralWindowMediator.prototype.initComponents=function(){this._viralButton=this.child("viralButton"),this._inviteButton=this.child("inviteButton")},AskViralWindowMediator.prototype.setupComponents=function(){this.registerListener(this._viralButton,r.SELECTED,this.onSelectedViral.bind(this)),this.registerListener(this._inviteButton,r.SELECTED,this.onSelectedInvite.bind(this)),this.onSelectedViral()},AskViralWindowMediator.prototype.onSelectedViral=function(){var e=this,t=i.Application.model.viralExchange.getSentCount(this._showData.friendsTabData.viralItemId),n=i.Application.static.data.viralExchange.dailyLimit;0<i.Application.dynamic.friends.items.filter(function(t){return i.Application.model.viralExchange.isAvailableToSend(t.sUserId,e._showData.friendsTabData.viralItemId)}).length&&t<n?this._container.currentState="viral":this._container.currentState="cantSend"},AskViralWindowMediator.prototype.onSelectedInvite=function(){0<this._showData.invitesTabData.friends.filter(function(t){return null===i.Application.dynamic.user.friendInvite.getItem(t.userId)}).length?this._container.currentState="invite":this._container.currentState="cantInvite"},AskViralWindowMediator}(n.DisplayObjectContainerMediator);e.AskViralWindowMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(121),n(372),n(0),n(145),n(2)],void 0===(r=function(t,e,n,r,i,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=uipixi.ToggleButtonEvent,p=function(e){function AskViralInvitesTabMediator(){return null!==e&&e.apply(this,arguments)||this}return l(AskViralInvitesTabMediator,e),AskViralInvitesTabMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._data=t.viewContext.node.root.handle.viewContext.showData.invitesTabData,this.initComponents(),this.setupComponents()},AskViralInvitesTabMediator.prototype.initComponents=function(){this._searchContainer=this.child("searchContainer"),this._selectAllCheckBox=this.child("selectAllCheckBox"),this._askButton=this.child("askButton"),this._requestsLabel=this.child("requestsLabel"),this._friendsList=this.child("friendsList")},AskViralInvitesTabMediator.prototype.setupComponents=function(){this.registerListener(this._askButton,c.POINTER_TAP,this.onTapAsk.bind(this)),this.registerListener(this._selectAllCheckBox,u.SELECTED_CHANGED,this.onSelectAllChanged.bind(this));for(var t=this.createAllFriendsList(),e=0,n=t;e<n.length;e++){var i=n[e];this.registerListener(i,a.ViralSelectItemsEvent.ITEM_SELECTED_CHANGED,this.selectedCountChanged.bind(this))}this._searchedItems=t,this._searchRenderer=new r.SearchRenderer(this._searchContainer,{dataItems:t,searchKey:"name"}),this.registerListener(this._searchRenderer,r.SearchRendererEvent.SEARCH,this.onSearch.bind(this)),this.selectMaxCount(),this.lockUnselectedItems(),this.fillList(),this.updateButton()},AskViralInvitesTabMediator.prototype.updateButton=function(){this._askButton.enabled=0<this.countOfSelectedItems()},AskViralInvitesTabMediator.prototype.onSearch=function(t){this.clearList(),this.unlockAll(),this.unSelectAll(),this._searchedItems=t.data,this.selectedCountChanged(),this.fillList()},AskViralInvitesTabMediator.prototype.countOfSelectedItems=function(){for(var t=0,e=0,n=this.showedItems;e<n.length;e++){n[e].selected&&t++}return t},AskViralInvitesTabMediator.prototype.checkOnMaxCount=function(){this.isMaxCountSelected()?this.lockUnselectedItems():this.unlockAll()},AskViralInvitesTabMediator.prototype.unlockAll=function(){for(var t=0,e=this.showedItems;t<e.length;t++){e[t].locked=!1}},AskViralInvitesTabMediator.prototype.lockUnselectedItems=function(){for(var t=0,e=this.showedItems;t<e.length;t++){var n=e[t];n.selected||(n.locked=!0)}},AskViralInvitesTabMediator.prototype.onSelectAllChanged=function(t){t.data.selected?(this.selectMaxCount(),this.lockUnselectedItems()):this.unSelectAll()},AskViralInvitesTabMediator.prototype.selectedCountChanged=function(){var t=this.isMaxCountSelected()&&0<this.countOfSelectedItems();this._selectAllCheckBox.selected!==t&&(this.unregisterListener(this._selectAllCheckBox,u.SELECTED_CHANGED,this.onSelectAllChanged.bind(this)),this._selectAllCheckBox.selected=t,this.registerListener(this._selectAllCheckBox,u.SELECTED_CHANGED,this.onSelectAllChanged.bind(this))),this._selectAllCheckBox.enabled=0<this.showedItems.length,this.checkOnMaxCount(),this.updateButton()},Object.defineProperty(AskViralInvitesTabMediator.prototype,"showedItems",{get:function(){return this._searchedItems},enumerable:!0,configurable:!0}),AskViralInvitesTabMediator.prototype.isMaxCountSelected=function(){return this.countOfSelectedItems()===this.showedItems.length},AskViralInvitesTabMediator.prototype.selectMaxCount=function(){this.unSelectAll();for(var t=0,e=this.showedItems;t<e.length;t++){e[t].selected=!0}},AskViralInvitesTabMediator.prototype.unSelectAll=function(){for(var t=0,e=this.showedItems;t<e.length;t++){e[t].selected=!1}},AskViralInvitesTabMediator.prototype.createAllFriendsList=function(){return this._data.friends.filter(function(t){return null===o.Application.dynamic.user.friendInvite.getItem(t.userId)}).map(function(t){var e=o.Application.profiles.getProfile(t.userId,!0);return new i.AskViralFriendItemData(t,e.firstName+" "+e.lastName)})},AskViralInvitesTabMediator.prototype.clearList=function(){this._friendsList.removeAllItems()},AskViralInvitesTabMediator.prototype.fillList=function(){this.clearList(),this._friendsList.addItems(this.showedItems)},AskViralInvitesTabMediator.prototype.onTapAsk=function(){var t=this.showedItems.filter(function(t){return t.selected}).map(function(t){return t.friend.userId.toString()});o.Application.viralExchange.requestViralResourcesAndInvite(this._data.viralItemId,t),o.Application.view.isShowed(s.GUINames.UPGRADE_OBJECT_WINDOW)&&o.Application.view.hideByWindowName(s.GUINames.UPGRADE_OBJECT_WINDOW),o.Application.view.hide(this.viewHandle.viewContext.node.root.handle)},AskViralInvitesTabMediator.prototype.destroy=function(){this._searchRenderer.destroy(),e.prototype.destroy.call(this)},AskViralInvitesTabMediator}(n.DisplayObjectContainerMediator);e.AskViralInvitesTabMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function AskWindowCantSendRequestsTabMediator(){return null!==e&&e.apply(this,arguments)||this}return a(AskWindowCantSendRequestsTabMediator,e),AskWindowCantSendRequestsTabMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._data=t.viewContext.node.root.handle.viewContext.showData.friendsTabData,this.updateDescription()},AskWindowCantSendRequestsTabMediator.prototype.updateDescription=function(){var t=this.child("descriptionLabel"),e=i.Application.model.viralExchange.getSentCount(this._data.viralItemId),n=i.Application.static.data.viralExchange.dailyLimit;t.text=n<=e?i.Application.localization.localize("REQUEST_SELECT_FRIENDS_DAILY_LIMIT_REACHED",{sent:e.toString(),limit:n.toString()}):i.Application.localization.localize("REQUEST_SELECT_FRIENDS_FRIENDS_NOT_EXIST",{sent:e.toString(),limit:n.toString()})},AskWindowCantSendRequestsTabMediator}(n.DisplayObjectContainerMediator);e.AskWindowCantSendRequestsTabMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ObjectViewMediatorGuard(){return null!==t&&t.apply(this,arguments)||this}return a(ObjectViewMediatorGuard,t),ObjectViewMediatorGuard.prototype.approve=function(){return!this.mapData.object.hasSkin},ObjectViewMediatorGuard}(n.Guard);e.ObjectViewMediatorGuard=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(843),n(373),n(77),n(1)],void 0===(r=function(t,e,n,p,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.UISpine,a=function(e){function ObjectSkinViewMediator(){return null!==e&&e.apply(this,arguments)||this}return s(ObjectSkinViewMediator,e),ObjectSkinViewMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData.object,this._resourceUtils=this._mapData.resourceUtils,this._extraItems=this._mapData.extraItemsModel,this._spine=new o(this.getSpineResource(),"spine"),this._container.addChild(this._spine),this._animationsAdapter=new n.SpineAnimationsAdapter(this._spine),this._mapData.isShop&&(this._spine.scaleX*=1.2,this._spine.scaleY*=1.2),this.registerListener(this._extraItems,i.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE,this.onExtraItemsChangeActive.bind(this)),this.update()},ObjectSkinViewMediator.prototype.onExtraItemsChangeActive=function(){this.update()},ObjectSkinViewMediator.prototype.getSpineResource=function(){return this._resourceUtils.getSkinnedObjectSpineResource(this._object.id)},ObjectSkinViewMediator.prototype.update=function(){var e=this;this._animationsAdapter.stopQueueAnimations(),this._spine.render.spineData.slots.forEach(function(t){return e._spine.setAttachment(t.name,null)});for(var t=0,n=this._object.skin.skinPart.items;t<n.length;t++){var i=n[t];this.updateSkinPart(i,this._object.skin.regexp)}},ObjectSkinViewMediator.prototype.updateSkinPart=function(t,e){var n=this,i=this._spine.render,r=this.getActiveItemId(t),o=t.item.getItem(r);if(!o)throw new Error("ObjectSkinsMediator.updateSkinPart: not found skin part for id = "+r);switch(o.type){case p.SkinPartTypeEnum.SKIN:this._spine.setSkinByName(o.skin);break;case p.SkinPartTypeEnum.ANIMATION:if(e){var a=i.spineData.animations.filter(function(t){return new RegExp(o.animation[0].n).test(t.name)}).map(function(t){return t.name});this._animationsAdapter.startQueueAnimations(a)}else this._animationsAdapter.startQueueAnimations(this.getAnimationsFor(o));break;case p.SkinPartTypeEnum.ATTACHMENT:if(e)i.spineData.slots.filter(function(t){return new RegExp(o.attachment[0].slot).test(t.name)}).forEach(function(t){return n._spine.setAttachment(t.name,t.name)});else for(var s=0,c=o.attachment;s<c.length;s++){var u=c[s];this._spine.setAttachment(u.slot,u.slot)}}},ObjectSkinViewMediator.prototype.getAnimationsFor=function(t){for(var e=[],n=0,i=t.animation;n<i.length;n++){var r=i[n];e.push(r.n)}return e},ObjectSkinViewMediator.prototype.getActiveItemId=function(t){var e=this._extraItems.getActiveItemByType(t.id);return e?e.id:0},ObjectSkinViewMediator}(r.DisplayObjectContainerMediator);e.ObjectSkinViewMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=uipixi.SpineDisplayObjectEvent,i=function(){function SpineAnimationsAdapter(t){this._spine=t,this._running=!1,this._currentAnimationIndex=0}return SpineAnimationsAdapter.prototype.startQueueAnimations=function(t){this._running&&this.stopQueueAnimations(),this._running=!0,this._queueAnimations=t.concat(),this._spine.addEventListener(n.ANIMATION_COMPLETE,this.startNextQueueAnimation.bind(this)),this.startNextQueueAnimation()},SpineAnimationsAdapter.prototype.stopQueueAnimations=function(){this._spine.stop(),this._spine.removeEventListener(n.ANIMATION_COMPLETE,this.startNextQueueAnimation.bind(this)),this._running=!1},SpineAnimationsAdapter.prototype.startNextQueueAnimation=function(){this._spine&&(this._spine.setAnimation(this._queueAnimations[this._currentAnimationIndex]),this._currentAnimationIndex=this._currentAnimationIndex+1>this._queueAnimations.length-1?0:this._currentAnimationIndex+1)},SpineAnimationsAdapter}();e.SpineAnimationsAdapter=i}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ObjectSkinViewMediatorGuard(){return null!==t&&t.apply(this,arguments)||this}return a(ObjectSkinViewMediatorGuard,t),ObjectSkinViewMediatorGuard.prototype.approve=function(){return this.mapData.object.hasSkin},ObjectSkinViewMediatorGuard}(n.Guard);e.ObjectSkinViewMediatorGuard=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(77),n(70)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function ExtraItemModel(t,e,n){var i=r.call(this)||this;return i._mode=o.ExtraItemsModelMode.NORMAL,i._staticItem=t,i.id=i._staticItem.id,i.boost=i._staticItem.boost,i.type=i._staticItem.type,i.itemId=i._staticItem.itemId,i._active=e,i._own=n,i}return a(ExtraItemModel,r),Object.defineProperty(ExtraItemModel.prototype,"resource",{get:function(){return this._staticItem.view.icons.icon.getItem("96").resourceId},enumerable:!0,configurable:!0}),ExtraItemModel.prototype.hasItem=function(){return this._own},ExtraItemModel.prototype.isActive=function(t){return void 0===t&&(t=o.ExtraItemsModelMode.PREVIEW),t===o.ExtraItemsModelMode.PREVIEW&&this._previewItem&&this._previewItem.type===this.type?this._previewItem.id===this.id:this._active},ExtraItemModel.prototype.updateActive=function(t){this._active!==t&&(this._active=t,this.dispatchEvent(new n.ExtraItemModelEvent(n.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE)))},ExtraItemModel.prototype.updateOwn=function(t){this._own!==t&&(this._own=t,this.dispatchEvent(new n.ExtraItemModelEvent(n.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,this)))},ExtraItemModel.prototype.setPreviewItem=function(t){this._previewItem=t},Object.defineProperty(ExtraItemModel.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t,this._mode===o.ExtraItemsModelMode.NORMAL&&(this._previewItem=null)},enumerable:!0,configurable:!0}),ExtraItemModel}(uipixi.BaseEventTarget);e.ExtraItemModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(4)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function IsMobileGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsMobileGuard,t),IsMobileGuard.prototype.approve=function(){return i.ElkaCore.instance.config.mobile},IsMobileGuard}(n.Guard);e.IsMobileGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57),n(364),n(214),n(0),n(8),n(2),n(326),n(39),n(69)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,d=function(e){function ObjectUseEnergyWebMediator(){return null!==e&&e.apply(this,arguments)||this}return h(ObjectUseEnergyWebMediator,e),ObjectUseEnergyWebMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData.object,this.updateStateCursor(),this._viewModel=new i.UseEnergyViewModel(this._mapData.useEnergySystem,this._object,!0),this.registerListener(this._displayObject,l.POINTER_DOWN,this.onDown.bind(this)),this.registerListener(this._viewModel,r.UseEnergyViewModelEvent.STARTED,this.onStarted.bind(this)),this.registerListener(this._viewModel,r.UseEnergyViewModelEvent.STOPPED,this.onStopped.bind(this)),this.registerListener(this._viewModel,r.UseEnergyViewModelEvent.REQUEST_UPGRADE,this.onRequestUpgrade.bind(this)),this.registerListener(this._object,u.ObjectModelEvent.STAGE_UP,this.onStageUp.bind(this))},ObjectUseEnergyWebMediator.prototype.onStageUp=function(){this.updateStateCursor()},ObjectUseEnergyWebMediator.prototype.updateStateCursor=function(){this._displayObject.cursor=this._object.state===p.ObjectState.MAX_STAGE?c.Cursors.NONE:c.Cursors.WAND},ObjectUseEnergyWebMediator.prototype.onDown=function(){this._object.state!==p.ObjectState.LOCK?this._object.state!==p.ObjectState.MAX_STAGE&&this._viewModel.start():o.Application.view.show(s.GUINames.OBJECT_BEAUTY_LOCK_WINDOW,new a.ViewContext(this._object))},ObjectUseEnergyWebMediator.prototype.onStarted=function(){this.unregisterListener(this._displayObject,l.POINTER_DOWN,this.onDown.bind(this)),this._displayObject.cursor=c.Cursors.WAND_ACTIVE},ObjectUseEnergyWebMediator.prototype.onStopped=function(){this.registerListener(this._displayObject,l.POINTER_DOWN,this.onDown.bind(this)),this._displayObject.cursor=c.Cursors.WAND},ObjectUseEnergyWebMediator.prototype.onRequestUpgrade=function(){var t=new a.ViewContext({object:this._object});o.Application.view.show(s.GUINames.UPGRADE_OBJECT_WINDOW,t)},ObjectUseEnergyWebMediator.prototype.destroy=function(){this._viewModel.destroy(),e.prototype.destroy.call(this)},ObjectUseEnergyWebMediator}(n.DisplayObjectMediator);e.ObjectUseEnergyWebMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.GestureEvent,r=PIXI.filters.GlowFilter,o=function(e){function ObjectOverFiltersMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ObjectOverFiltersMediator,e),ObjectOverFiltersMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._filter=new r(10,4,0,11664639,.3),this._filter.padding=this._filter.distance,this.registerListener(this._displayObject,i.POINTER_OVER,this.onOver.bind(this)),this.registerListener(this._displayObject,i.POINTER_OUT,this.onOut.bind(this))},ObjectOverFiltersMediator.prototype.onOver=function(){this._displayObject.filters=[this._filter]},ObjectOverFiltersMediator.prototype.onOut=function(){this._displayObject.filters=[]},ObjectOverFiltersMediator}(n.DisplayObjectMediator);e.ObjectOverFiltersMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(39),n(2),n(30),n(371),n(38)],void 0===(r=function(t,e,n,a,s,r,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.Point,l=uipixi.GestureEvent,o=function(o){function UseEnergyGladeAnimationMediator(){var t=null!==o&&o.apply(this,arguments)||this;return t._objectsAnchorPoint=new core.Map,t}return d(UseEnergyGladeAnimationMediator,o),UseEnergyGladeAnimationMediator.prototype.initialize=function(t){o.prototype.initialize.call(this,t),this._animations=[],this._startTime=0,this._speed=a.Application.static.data.client.useEnergySpeed.second.items,this._interval=.001*a.Application.static.data.client.useEnergySpeed.interval,this._fullStarTime=1,this._soundController=new u.UseEnergySoundController,a.Application.view.ui.stage.update();var e=this._container.getGlobalPosition();this.cacheCommonAnchorPoints(e);for(var n=0,i=a.Application.model.objects.getByScreen(a.Application.dynamic.user.screen);n<i.length;n++){var r=i[n];this._objectsAnchorPoint.set(r.id,this.cacheObjectAnchorPoint(r,e)),this.registerListener(r,s.ObjectModelEvent.EXP_CHANGED,this.onExpChanged.bind(this,r)),this.registerListener(r,s.ObjectModelEvent.STAGE_UP,this.onStageUp.bind(this,r))}this.registerListener(a.Application.view.ui.stage,l.POINTER_UP,this.onUp.bind(this))},UseEnergyGladeAnimationMediator.prototype.cacheObjectAnchorPoint=function(t,e){var n=a.Application.view.ui.stage.getChildByName(r.GUINames.OBJECTS);if(n=n.getChildByName(t.id)){var i=n.getGlobalPosition();return i.x-=e.x,i.y-=e.y,i}a.Application.debug.addError("objects","Контейнер с объектом не найден",t.id)},UseEnergyGladeAnimationMediator.prototype.cacheCommonAnchorPoints=function(t){var e=this._container.getChildByName("floorPosition");this._floorYPosition=e.getGlobalPosition().y+e.height-t.y;var n=a.Application.view.ui.stage.getChildByName("expBar");this._barPoint=n.getGlobalPosition().add(new i(.5*n.width,.5*n.height)),this._barPoint.x-=t.x,this._barPoint.y-=t.y},UseEnergyGladeAnimationMediator.prototype.onExpChanged=function(t){this._startTime+=this._interval;var e=Math.min(Math.floor(this._startTime),this._speed.length-1);this._fullStarTime+=this._speed[e].stars,1<=this._fullStarTime&&(this._fullStarTime-=1,this.createStar(this._objectsAnchorPoint.get(t.id)))},UseEnergyGladeAnimationMediator.prototype.createStar=function(t){this._soundController.playNextSound();var e=c.AnimationUtils.throwStar("resources_64/star_animate_small",t,100,200,this._floorYPosition,this._barPoint,this._container);this._animations.push(e)},UseEnergyGladeAnimationMediator.prototype.onUp=function(){this._startTime=0,this._fullStarTime=1,this._soundController.stop()},UseEnergyGladeAnimationMediator.prototype.onStageUp=function(t){if(-1===t.currentStage.id)for(var e=t.getLoopedAward(),n=p.PriceAwardUtils.getAwardIconResource(e,"48"),i=this._objectsAnchorPoint.get(t.id),r=0;r<Math.min(e.value,5);r++){var o=c.AnimationUtils.throwLoopedAwardOnGlade(n,e.itemId,i,100,200,this._floorYPosition,this._container);this._animations.push(o)}},UseEnergyGladeAnimationMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),this._soundController.destroy(),o.prototype.destroy.call(this)},UseEnergyGladeAnimationMediator}(n.DisplayObjectContainerMediator);e.UseEnergyGladeAnimationMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57),n(0),n(2),n(26)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function GladeStarsShowHideMediator(){return null!==e&&e.apply(this,arguments)||this}return s(GladeStarsShowHideMediator,e),GladeStarsShowHideMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),i.Application.view.hideByWindowName(r.GUINames.GLADE_STARS_WINDOW)},GladeStarsShowHideMediator.prototype.destroy=function(){i.Application.view.show(r.GUINames.GLADE_STARS_WINDOW,null,o.WindowLayer.GLADE_STARS),e.prototype.destroy.call(this)},GladeStarsShowHideMediator}(n.DisplayObjectMediator);e.GladeStarsShowHideMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(99),n(0),n(2),n(8),n(69)],void 0===(r=function(t,e,n,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ObjectGladeTooltipMediator(){return null!==t&&t.apply(this,arguments)||this}return u(ObjectGladeTooltipMediator,t),ObjectGladeTooltipMediator.prototype.onInitialize=function(){var t=this._showData.object,e=this.child("contentContainer");if(this.child("titleLabel").text=t.title,this.child("stageLabel").text=t.stage.toString(),this.child("beautyLabel").text=t.currentBeauty.toString(),t.isLoopedStage){var n=this.child("infoContainer"),i=o.Application.view.addChild(n,a.GUINames.OBJECT_GLADE_TOOLTIP_LOOPED_STAGE_CONTAINER,new s.ViewContext(t));this._container.height+=i.displayObject.height}else if(t.state!==c.ObjectState.MAX_STAGE){n=this.child("infoContainer"),i=o.Application.view.addChild(n,a.GUINames.OBJECT_GLADE_TOOLTIP_ENERGY_LEFT_CONTAINER,new s.ViewContext(t));this._container.height+=i.displayObject.height}var r=o.Application.model.generators.getById(t.id);if(r&&0<r.stage){i=o.Application.view.addChild(e,a.GUINames.OBJECT_GLADE_TOOLTIP_GENERATOR_CONTAINER,new s.ViewContext(r));this._container.height+=i.displayObject.height}},ObjectGladeTooltipMediator}(n.TooltipMediator);e.ObjectGladeTooltipMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(38),n(29),n(1)],void 0===(r=function(t,e,i,r,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(n){function ObjectGladeTooltipGeneratorContainerMediator(){return null!==n&&n.apply(this,arguments)||this}return s(ObjectGladeTooltipGeneratorContainerMediator,n),ObjectGladeTooltipGeneratorContainerMediator.prototype.initialize=function(t){var e=this;n.prototype.initialize.call(this,t),this._generator=this._showData,this._generatorTimeLeftLabel=this.child("generatorTimeLeftLabel"),this._generatorBonusLabel=this.child("generatorBonusLabel"),this._generatorCountLabel=this.child("generatorCountLabel"),this._stateContainer=this.child("stateContainer"),this.children("generatorIcon").forEach(function(t){return t.resource=r.PriceAwardUtils.getResourceResourceId(e._generator.resource.id,"64")}),this.child("generatorCooldownLabel").text=o.DateUtils.timeToString(this._generator.cooldown),this.update(),this._timer=i.Application.date.callProcessor.repeatCall(this.update.bind(this))},ObjectGladeTooltipGeneratorContainerMediator.prototype.update=function(){this._generatorCountLabel.text=this._generator.numResources.toString(),this._generatorBonusLabel.text=this._generator.numBonusResources.toString();var t=this._generator.numResources===this._generator.maxResources;if(this._stateContainer.currentState=t?"full":"default",!t){var e=this._generator.timer+this._generator.cooldown*(this._generator.numResources+1);this._generatorTimeLeftLabel.text=o.DateUtils.timeToString(e-i.Application.date.currentTime)}},ObjectGladeTooltipGeneratorContainerMediator.prototype.destroy=function(){i.Application.date.callProcessor.deleteCall(this._timer),n.prototype.destroy.call(this)},ObjectGladeTooltipGeneratorContainerMediator}(n.DisplayObjectContainerMediator);e.ObjectGladeTooltipGeneratorContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(39)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ObjectGladeTooltipEnergyLeftMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ObjectGladeTooltipEnergyLeftMediator,e),ObjectGladeTooltipEnergyLeftMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._showData,this._energyLeftLabel=this.child("energyLeftLabel"),this.updateExp(),this.registerListener(this._object,i.ObjectModelEvent.EXP_CHANGED,this.updateExp.bind(this))},ObjectGladeTooltipEnergyLeftMediator.prototype.updateExp=function(){this._energyLeftLabel.text=(this._object.nextStageExp-this._object.exp).toString()},ObjectGladeTooltipEnergyLeftMediator}(n.DisplayObjectContainerMediator);e.ObjectGladeTooltipEnergyLeftMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function ObjectBeautyLockWindowMediator(){return null!==n&&n.apply(this,arguments)||this}return a(ObjectBeautyLockWindowMediator,n),ObjectBeautyLockWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this._showData;this.child("descriptionLabel").text=i.Application.localization.localize("OBJECT_BEAUTY_LOCK_DESCRIPTION",{beautyStage:e.nextStage.requiredBeautyStage.toString()})},ObjectBeautyLockWindowMediator}(n.DisplayObjectContainerMediator);e.ObjectBeautyLockWindowMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(21),n(2),n(1)],void 0===(r=function(t,e,r,o,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.Point,i=function(i){function ObjectGladeTooltipOnMediator(){return null!==i&&i.apply(this,arguments)||this}return c(ObjectGladeTooltipOnMediator,i),ObjectGladeTooltipOnMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t);var e=this._container.offsetX>this._container.parent.width/2,n=this.child("spine");r.Application.tooltip.addTooltip(this._container,e?o.TooltipAnchor.Left:o.TooltipAnchor.Right,a.GUINames.OBJECT_GLADE_TOOLTIP,{object:this._mapData,anchorOffset:new s(e?.5*-n.width:.5*n.width,0)})},ObjectGladeTooltipOnMediator}(n.DisplayObjectContainerMediator);e.ObjectGladeTooltipOnMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function IsNotASpruceGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsNotASpruceGuard,t),IsNotASpruceGuard.prototype.approve=function(){return"winterSpruce"!==this.mapData.object.id},IsNotASpruceGuard}(n.Guard);e.IsNotASpruceGuard=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(77),n(0),n(39),n(373),n(92)],void 0===(r=function(t,e,n,i,c,r,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UISpine,u=PIXI.spine.core.Color,p=function(e){function ObjectSpruceMediator(){return null!==e&&e.apply(this,arguments)||this}return l(ObjectSpruceMediator,e),ObjectSpruceMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData.object,this._resourceUtils=this._mapData.resourceUtils,this._extraItems=this._mapData.extraItemsModel,this._spine=new s(this.getSpineResource(),"spine"),this._container.addChild(this._spine),this.registerListener(this._object,r.ObjectModelEvent.STAGE_UP,this.onLevelUp.bind(this)),this.registerListener(this._extraItems,i.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE,this.onExtraItemsChangeActive.bind(this)),this.update(),this.setContainerState()},ObjectSpruceMediator.prototype.applyGarland=function(t){if(!this._garland&&c.Application.resources.isResourceLoaded(t)){this._garland=new s(t,"garlandAnimation"),this._container.addChild(this._garland),this._garland.interactive=!1,this._garland.interactiveChildren=!1,this._garland.visible=!0;var e=this.getGarlandAnimationNameForLevel(this._object.stage);this._garland.setAnimation(e,!0)}if(c.Application.resources.isResourceLoaded(t)){this._garland.setResource(t),this._garland.interactive=!1,this._garland.interactiveChildren=!1,this._garland.visible=!0;e=this.getGarlandAnimationNameForLevel(this._object.stage);this._garland.setAnimation(e,!0)}else this._eventTarget&&this._eventTarget.hasListener(o.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadGarlandComplete.bind(this))&&this._eventTarget.removeEventListener(o.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadGarlandComplete.bind(this)),this._eventTarget=c.Application.resources.getResources([t],!1).eventTarget,this._eventTarget.addEventListener(o.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadGarlandComplete.bind(this))},ObjectSpruceMediator.prototype.onLoadGarlandComplete=function(t){this._eventTarget.removeEventListener(o.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadGarlandComplete.bind(this)),this._eventTarget=null,this.update()},ObjectSpruceMediator.prototype.onLevelUp=function(){this.update(),this.setContainerState()},ObjectSpruceMediator.prototype.setContainerState=function(){this._container.states&&this._container.states.indexOf("stage"+this._object.stage)&&(this._container.currentState="stage"+this._object.stage)},ObjectSpruceMediator.prototype.onExtraItemsChangeActive=function(){this.update()},ObjectSpruceMediator.prototype.getSpineResource=function(){return"objects/winterSpruce/spruce"},ObjectSpruceMediator.prototype.updateAnimation=function(){var t=this.getSpruceAnimationNameForLevel(this._object.stage);-1!==this._spine.animations.indexOf(t)?this._spine.setAnimation(t,!0):c.Application.debug.addWarning("ObjectSpruceMediator","update error: not found animation with name = "+t)},ObjectSpruceMediator.prototype.getSpruceAnimationNameForLevel=function(t){return t<10?"level_0"+t:"level_"+t},ObjectSpruceMediator.prototype.getGarlandAnimationNameForLevel=function(t){return"level_"+t},ObjectSpruceMediator.prototype.update=function(){for(var t=0,e=this._object.skin.skinPart.items;t<e.length;t++){var n=e[t];this.updateSkinPart(n)}this.updateGarland(),this.updateAnimation(),this.updateColor()},ObjectSpruceMediator.prototype.resetAttachments=function(t){for(var e=0,n=t.item.items;e<n.length;e++)for(var i=0,r=n[e].attachment;i<r.length;i++){var o=r[i];this._spine.setAttachment(o.slot,null)}},ObjectSpruceMediator.prototype.updateSkinPart=function(t){this.resetAttachments(t);var e=this.getActiveItemId(t),n=t.item.getItem(e);if(n)switch(n.type){case a.SkinPartTypeEnum.SKIN:this._spine.setSkinByName(n.skin);break;case a.SkinPartTypeEnum.ATTACHMENT:for(var i=0,r=n.attachment;i<r.length;i++){var o=r[i];this._spine.setAttachment(o.slot,o.slot)}}},ObjectSpruceMediator.prototype.getActiveItemId=function(t){var e=this._extraItems.getActiveItemByType(t.id);return e?e.id:0},ObjectSpruceMediator.prototype.getGarlandActiveItemId=function(){var t=this._extraItems.getActiveItemByType(c.Application.static.data.client.skins.spruceGarlands.extraItemType);return t?t.id:0},ObjectSpruceMediator.prototype.updateGarland=function(){var t=this.getGarlandActiveItemId();if(0===t&&this._garland)this._garland.visible=!1;else for(var e=0,n=c.Application.static.data.client.skins.spruceGarlands.item;e<n.length;e++){var i=n[e];i.extraItemId===t&&this.applyGarland(i.spine)}},ObjectSpruceMediator.prototype.updateColor=function(){for(var t=this.getColorActiveItemId(),e=0,n=c.Application.static.data.client.skins.spruceColors.item.items;e<n.length;e++){var i=n[e];if(i.extraItemId===t){this._currentColor=new u(0,0,0,1),this._currentColor.r=parseFloat(i.red),this._currentColor.g=parseFloat(i.green),this._currentColor.b=parseFloat(i.blue);break}}if(this._currentColor){var r=this._spine.render;r.updateTransform();for(var o=0,a=r.skeleton.getRootBone().skeleton.slots;o<a.length;o++){var s=a[o];s.sprites&&s.currentSpriteName&&0<=s.currentSpriteName.indexOf("elka")&&(this._customColor?s.color=this._customColor:s.color=this._currentColor)}}this._customColor&&(this._customColor=null)},ObjectSpruceMediator.prototype.getColorActiveItemId=function(){var t=this._extraItems.getActiveItemByType(c.Application.static.data.client.skins.spruceColors.extraItemType);return t?t.id:0},ObjectSpruceMediator.prototype.destroy=function(){this._eventTarget&&this._eventTarget.removeEventListener(o.ResourcesPackEvent.LOAD_COMPLETED,this.onLoadGarlandComplete.bind(this)),e.prototype.destroy.call(this)},ObjectSpruceMediator}(n.DisplayObjectContainerMediator);e.ObjectSpruceMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function IsASpruceGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsASpruceGuard,t),IsASpruceGuard.prototype.approve=function(){return"winterSpruce"===this.mapData.object.id},IsASpruceGuard}(n.Guard);e.IsASpruceGuard=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function LoadObjectsResourcesPromise(t,e,n){var i=r.call(this)||this;return i.objects=t,i.screenId=e,i.extraItems=n,i}return a(LoadObjectsResourcesPromise,r),LoadObjectsResourcesPromise}(n.BasePromise);e.LoadObjectsResourcesPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function LoadObjectsResourcesCommand(){return null!==t&&t.apply(this,arguments)||this}return a(LoadObjectsResourcesCommand,t),LoadObjectsResourcesCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this._data.getResourcesToLoadByModel(n.objects,n.screenId,n.extraItems),[4,i.Application.resources.getResources(e,!0)];case 1:return t.sent(),[2]}})})},LoadObjectsResourcesCommand}(n.CommandBase);e.LoadObjectsResourcesCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(213),n(30)],void 0===(r=function(t,e,n,s,i,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.Point,r=function(e){function ObjectsBeautyAnimationMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return a(ObjectsBeautyAnimationMediator,e),ObjectsBeautyAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerListener(s.Application.model.objects,i.ObjectsModelEvent.STAGE_UP_COMPLETED,this.onStageUpCompleted.bind(this))},ObjectsBeautyAnimationMediator.prototype.onStageUpCompleted=function(t){var e,n=this.child(t.object.id),i=s.Application.view.ui.stage.getChildByName("beautyHUDBar").getGlobalPosition().add(new u(60,18)),r=n.getGlobalPosition(),o=new u(r.x,r.y-100),a=c.AnimationUtils.flyBeautyCrowns(64,6,r,o,i,new u(75,50));(e=this._animations).push.apply(e,a)},ObjectsBeautyAnimationMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},ObjectsBeautyAnimationMediator}(n.DisplayObjectContainerMediator);e.ObjectsBeautyAnimationMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(69)],void 0===(r=function(t,e,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ObjectsDataProvider(){}return ObjectsDataProvider.prototype.getValue=function(t,e){var n=t.split("."),i=n[0];n[1];switch(i){case ObjectsDataProvider.READY_TO_UPGRADE:return this.getObjectByIdFilter(e).state===o.ObjectState.READY?1:0;case ObjectsDataProvider.CAN_USE_ENERGY:return this.getObjectByIdFilter(e).state===o.ObjectState.NORMAL?1:0;case ObjectsDataProvider.CAN_ASK_VIRAL:return this.getObjectByIdFilter(e).state===o.ObjectState.REQUEST?1:0;case ObjectsDataProvider.EXP_LEFT:var r=this.getObjectByIdFilter(e);return r.nextStageExp-r.exp;default:throw new Error("ObjectsDataProvider: unsupported type "+i)}},ObjectsDataProvider.prototype.getObjectByIdFilter=function(t){var e=t.filter(function(t){return"id"===t.type})[0];if(!e||1!==e.values.length)throw Error("ObjectsDataProvider incorrect filter");var n="questsGuideObject"===e.values[0]?i.Application.model.quests.guideObject:e.values[0];return i.Application.model.objects.getObject(n)},ObjectsDataProvider.prototype.watch=function(t,e){},ObjectsDataProvider.prototype.unwatch=function(t,e){},ObjectsDataProvider.READY_TO_UPGRADE="readyToUpgrade",ObjectsDataProvider.CAN_USE_ENERGY="canUseEnergy",ObjectsDataProvider.CAN_ASK_VIRAL="canAskViral",ObjectsDataProvider.EXP_LEFT="expLeft",ObjectsDataProvider}();e.ObjectsDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(374)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function AskViralWindowTutorialMediator(){return null!==e&&e.apply(this,arguments)||this}return a(AskViralWindowTutorialMediator,e),AskViralWindowTutorialMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._list=this.child("friendsList"),this.registerListener(n.Application.model.guides,r.GuidesModelFiredEvent.SELECT_NPC_FRIENDS,this.onSelectNpc.bind(this))},AskViralWindowTutorialMediator.prototype.onSelectNpc=function(t){for(var e=0;e<this._list.items.length;e++){var n=this._list.items[e];n.data.friend.isNPC?n.data.selected=!0:n.data.selected=!1}},AskViralWindowTutorialMediator}(i.DisplayObjectContainerMediator);e.AskViralWindowTutorialMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function SelectObjectShineContainerMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._shineAnimation=null,t}return a(SelectObjectShineContainerMediator,e),SelectObjectShineContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._mapData.id===i.Application.model.objects.minimalPercentObjectId?(this._container.visible=!0,this._shineAnimation=i.Application.animation.animate(this._container,"objectShineAnimation",{shine1:this.child("shineContainer1"),shine2:this.child("shineContainer2")})):this._container.visible=!1},SelectObjectShineContainerMediator.prototype.destroy=function(){this._shineAnimation&&this._shineAnimation.stop(),e.prototype.destroy.call(this)},SelectObjectShineContainerMediator}(n.DisplayObjectContainerMediator);e.SelectObjectShineContainerMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(4),n(52)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function IsPlatformFBGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsPlatformFBGuard,t),IsPlatformFBGuard.prototype.approve=function(){return"fb"===n.ElkaCore.instance.config.platform},IsPlatformFBGuard}(i.Guard);e.IsPlatformFBGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(4)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function IsPlatformNotFBGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsPlatformNotFBGuard,t),IsPlatformNotFBGuard.prototype.approve=function(){return"fb"!==i.ElkaCore.instance.config.platform},IsPlatformNotFBGuard}(n.Guard);e.IsPlatformNotFBGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function AskViralWindowFBMediator(){return null!==e&&e.apply(this,arguments)||this}return a(AskViralWindowFBMediator,e),AskViralWindowFBMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setupComponents()},AskViralWindowFBMediator.prototype.setupComponents=function(){var e=this,t=i.Application.model.viralExchange.getSentCount(this._showData.friendsTabData.viralItemId),n=i.Application.static.data.viralExchange.dailyLimit;0<i.Application.dynamic.friends.items.filter(function(t){return i.Application.model.viralExchange.isAvailableToSend(t.sUserId,e._showData.friendsTabData.viralItemId)}).length&&t<n?this._container.currentState="viral":this._container.currentState="cantSend"},AskViralWindowFBMediator}(n.DisplayObjectContainerMediator);e.AskViralWindowFBMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(8),n(2),n(43),n(46)],void 0===(r=function(t,e,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AccrueUseEnergyAwardCommand(){return null!==t&&t.apply(this,arguments)||this}return u(AccrueUseEnergyAwardCommand,t),AccrueUseEnergyAwardCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return e=i.awardObject,i.userLevelUpWasTriggered?(n=r.Application.model.user.level)%r.Application.static.data.userLevels.levelUpWindowValue!=0?[3,3]:[4,r.Application.resources.getResources(this._data.resources,!0)]:[3,3];case 1:return t.sent(),r.Application.sound.play(s.SoundName.UPGRADE_JINGLE,!1,c.SoundGroup.SOUND_GROUP_SOUND),[4,r.Application.view.show(a.GUINames.NEW_LEVEL_WINDOW,new o.ViewContext({level:n,award:r.Application.award.convertObjectToCalculated(e)})).onClose];case 2:t.sent(),t.label=3;case 3:return r.Application.award.accrueAwardImmediately(e),[2]}})})},AccrueUseEnergyAwardCommand}(n.CommandBase);e.AccrueUseEnergyAwardCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(39)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ObjectMarkerContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ObjectMarkerContainerMediator,e),ObjectMarkerContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._mapData,this.onLevelUp(),this.registerListener(this._object,i.ObjectModelEvent.STAGE_UP,this.onLevelUp.bind(this))},ObjectMarkerContainerMediator.prototype.onLevelUp=function(){this._container.states&&this._container.states.indexOf("stage"+this._object.stage)&&(this._container.currentState="stage"+this._object.stage)},ObjectMarkerContainerMediator}(n.DisplayObjectContainerMediator);e.ObjectMarkerContainerMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(375),n(0),n(30),n(26),n(48),n(34),n(2)],void 0===(r=function(t,e,n,i,p,l,d,r,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=uipixi.Point,o=function(n){function ObjectsMarkersMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._animations=[],t}return a(ObjectsMarkersMediator,n),ObjectsMarkersMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.registerListener(p.Application.model.viralExchange,i.FlyViralRequestEvent.FLY_REQUEST,this.startRequestViralAnimation.bind(this))},ObjectsMarkersMediator.prototype.startRequestViralAnimation=function(t){var e;if(!p.Application.view.isShowed(_.GUINames.FRIENDS_WINDOW)){var n=p.Application.model.objects.getObjectNameByViralResource(t.flyData.itemId),i=this._container.getChildByName(n),r=i.getGlobalPosition();r.x+=i.width/2,r.y+=32;var o=p.Application.view.ui.stage.getChildByName("windowsManager_layer_"+d.WindowLayer.HUD).getChildByName("friendsButton"),a=l.AnimationUtils.flyResources("uikit/check",r,new f(r.x,r.y).add(new f(-100,0)),o.getGlobalPosition().add(new f(o.width/2,o.height/2)),new f(30,30),{angle:-69,count:8<t.flyData.count?8:t.flyData.count});(e=this._animations).push.apply(e,a);for(var s=0,c=a;s<c.length;s++){var u=c[s];this.registerListener(u,h.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this))}}},ObjectsMarkersMediator.prototype.onAnimationComplete=function(t){this._animations.splice(this._animations.indexOf(t.process),1),this._animations.length&&p.Application.model.guides.dispatchEvent(new r.GuidesModelEvent(r.GuidesModelEvent.VIRAL_REQUEST_ANIMATION_COMPLETE))},ObjectsMarkersMediator.prototype.destroy=function(){for(var t=0,e=this._animations;t<e.length;t++){e[t].stop()}n.prototype.destroy.call(this)},ObjectsMarkersMediator}(n.DisplayObjectContainerMediator);e.ObjectsMarkersMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function AskViralGoToGroupButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(AskViralGoToGroupButtonMediator,t),AskViralGoToGroupButtonMediator.prototype.onButton=function(t){window.open(i.Application.static.data.social.groupURL,"_blank")},AskViralGoToGroupButtonMediator}(n.SimpleButtonMediator);e.AskViralGoToGroupButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(52)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function UseEnergyLoopedStageMediatorGuard(){return null!==t&&t.apply(this,arguments)||this}return s(UseEnergyLoopedStageMediatorGuard,t),UseEnergyLoopedStageMediatorGuard.prototype.approve=function(){return this.viewHandle.viewContext.showData.object.isLoopedStage},UseEnergyLoopedStageMediatorGuard}(r.Guard);e.UseEnergyLoopedStageMediatorGuard=o;var a=function(e){function UseEnergyLoopedStageMediator(){return null!==e&&e.apply(this,arguments)||this}return s(UseEnergyLoopedStageMediator,e),UseEnergyLoopedStageMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.child("awardsLabel").text=i.Application.localization.localize("USE_ENERGY_LOOPED_STAGE_AWARD"),this.child("objectExpTitleLabel").text=i.Application.localization.localize("USE_ENERGY_LOPPED_STAGE_PROGRESS_BAR")},UseEnergyLoopedStageMediator}(n.DisplayObjectContainerMediator);e.UseEnergyLoopedStageMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(39),n(15)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function ObjectGladeTooltipLoopedStageMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ObjectGladeTooltipLoopedStageMediator,e),ObjectGladeTooltipLoopedStageMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._object=this._showData,this._energyLeftLabel=this.child("energyLeftLabel"),this._objectExpBar=this.child("objectExpBar"),this._awardRenderer=(new r.AwardRenderer).initialize(this._object.getLoopedAward(),this.child("awardContainer"),{iconId:48,fit:!0}),this.updateExp(),this.registerListener(this._object,i.ObjectModelEvent.EXP_CHANGED,this.updateExp.bind(this)),this.registerListener(this._object,i.ObjectModelEvent.STAGE_UP,this.updateExp.bind(this))},ObjectGladeTooltipLoopedStageMediator.prototype.updateExp=function(){var t=this._object.exp,e=this._object.currentStageExp,n=this._object.nextStageExp;this._energyLeftLabel.text=Math.max(0,n-t).toString(),this._objectExpBar.progress=(t-e)/(n-e)},ObjectGladeTooltipLoopedStageMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},ObjectGladeTooltipLoopedStageMediator}(n.DisplayObjectContainerMediator);e.ObjectGladeTooltipLoopedStageMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(39),n(38),n(30),n(75)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.Point,u=function(e){function UseEnergyLoopedStageAnimationMediator(){return null!==e&&e.apply(this,arguments)||this}return p(UseEnergyLoopedStageAnimationMediator,e),UseEnergyLoopedStageAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._animations=[],this.initComponents(),this.cacheAnchorPoints(),this._object=this._showData.object,this.registerListener(this._object,r.ObjectModelEvent.STAGE_UP,this.onStageUp.bind(this)),this._updateCallback=this.cacheAnchorPoints.bind(this),i.Application.view.ui.fullscreen.addEventListener("fullscreenchange",this._updateCallback)},UseEnergyLoopedStageAnimationMediator.prototype.initComponents=function(){this._homeButton=this.child("closeButton"),this._awardList=this.child("awardsList"),this._dropAwardsContainer=this.child("dropAwardsContainer"),this._dropAwardCenterPoint=this.child("dropAwardCenterPoint")},UseEnergyLoopedStageAnimationMediator.prototype.cacheAnchorPoints=function(){i.Application.view.ui.stage.update(),this._bottomLeft=this._dropAwardsContainer.getGlobalPosition().add(new c(this._dropAwardsContainer.width/3,this._dropAwardsContainer.height)),this._startPoint=this._awardList.getGlobalPosition().add(new c(.5*this._awardList.width,.5*this._awardList.height)),this._endPoint=this._homeButton.getGlobalPosition().add(new c(.5*this._homeButton.width,.5*this._homeButton.height))},UseEnergyLoopedStageAnimationMediator.prototype.onStageUp=function(){for(var t=this._object.getLoopedAward(),e=o.PriceAwardUtils.getAwardIconResource(t,"64"),n=0;n<Math.min(t.value,5);n++){var i=a.AnimationUtils.throwLoopedAward(e,t.itemId,this._startPoint,60,150,this._bottomLeft.y,this._endPoint,n*s.AnimationService.FPS*(2+Math.random()));this._animations.push(i)}},UseEnergyLoopedStageAnimationMediator.prototype.destroy=function(){i.Application.view.ui.fullscreen.removeEventListener("fullscreenchange",this._updateCallback),this._updateCallback=null,this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},UseEnergyLoopedStageAnimationMediator}(n.DisplayObjectContainerMediator);e.UseEnergyLoopedStageAnimationMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(377)],void 0===(r=function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function AnimalsModel(t,e,n){this._staticData=t,this._dynamicData=e,this._animals=[];for(var i=0,r=t.animal.items;i<r.length;i++){var o=r[i];if(!e.getItem(o.id.toString())){var a={};a[o.id]={},e.update(a)}this._animals.push(new s.AnimalModel(o,e.getItem(o.id.toString()),n.skin.getItem(o.name)))}}return AnimalsModel.prototype.getAnimalById=function(t){for(var e=0,n=this._animals;e<n.length;e++){var i=n[e];if(i.id===t)return i}},AnimalsModel.prototype.getAnimalByScreen=function(t){for(var e=0,n=this._animals;e<n.length;e++){var i=n[e];if(i.screen===t)return i}},Object.defineProperty(AnimalsModel.prototype,"animals",{get:function(){return this._animals},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalsModel.prototype,"staticData",{get:function(){return this._staticData},enumerable:!0,configurable:!0}),AnimalsModel}();e.AnimalsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function AnimalAnimationModel(t){this._commonAnimationsPool=[],this._viewStatic=t.view,this._WALK=this._viewStatic.animations.walkAnimationName,this._WALK_SPEED=this._viewStatic.animations.walkAnimationSpeed;for(var e=0,n=this._viewStatic.animations.states.state.items;e<n.length;e++){var i=n[e];0!==i.id.indexOf("act_")&&i.params.animName!==this._WALK||this._commonAnimationsPool.push(i.params.animName),"idle"===i.id&&(this._IDLE=i.params.animName)}}return AnimalAnimationModel.prototype.getActionAnimation=function(t){for(var e=0,n=this._viewStatic.animations.states.state.items;e<n.length;e++){var i=n[e];if(i.id==="action_"+t)return i.params.animName}},Object.defineProperty(AnimalAnimationModel.prototype,"commonAnimationsPool",{get:function(){return this._commonAnimationsPool},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalAnimationModel.prototype,"IDLE",{get:function(){return this._IDLE},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalAnimationModel.prototype,"WALK",{get:function(){return this._WALK},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalAnimationModel.prototype,"WALK_SPEED",{get:function(){return this._WALK_SPEED},enumerable:!0,configurable:!0}),AnimalAnimationModel}();e.AnimalAnimationModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AnimalActionModel(t,e){this._staticData=t,this._dynamicData=e}return Object.defineProperty(AnimalActionModel.prototype,"dynamicData",{get:function(){return this._dynamicData},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"timeEnd",{get:function(){return this._dynamicData.timeEnd},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"price",{get:function(){return n.Application.price.calculate(this._staticData.prices)},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"speedUpPrice",{get:function(){return n.Application.price.calculate(this._staticData.speedUpPrice)},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"award",{get:function(){return n.Application.award.calculate(this._staticData.awards)},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"name",{get:function(){return this._staticData.view.actionName},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"icon",{get:function(){return this._staticData.view.icons.icon.getItem("96").resourceId},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionModel.prototype,"duration",{get:function(){return this._staticData.duration},enumerable:!0,configurable:!0}),AnimalActionModel}();e.AnimalActionModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(77),n(217),n(92),n(39)],void 0===(r=function(t,e,n,r,i,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.UISpine,u=uipixi.SpineDisplayObjectEvent,p=function(e){function AnimalViewMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._actionAnimationsPool=[],t._occurredActions=[],t}return l(AnimalViewMediator,e),AnimalViewMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._mapData.model,this._walking=this._mapData.walking,this._actions=this._mapData.actions,this._extraItems=this._mapData.extraItemsModel,this._object=this._mapData.object,this._container.visible=!1,this.initComponents(),2<=this._object.stage||!this._walking?this.loadSpine():this.registerListener(this._object,s.ObjectModelEvent.STAGE_UP,this.checkObjectLevel.bind(this))},AnimalViewMediator.prototype.initComponents=function(){this._animalContainer=this.child("animalContainer"),this._spineAnimation=this.child("spineAnimation")},AnimalViewMediator.prototype.setupComponents=function(){this._container.visible=!0,this.setupAnimation(),this.registerListener(this._extraItems,i.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE,this.onExtraItemsChangeActive.bind(this)),this.registerListener(this._model,o.AnimalModelEvent.ON_ACTION_OCCURRED,this.onActionOccurred.bind(this)),this.registerListener(this._model,o.AnimalModelEvent.PLAY_ACTION_ANIMATIONS,this.onPlayActionAnimation.bind(this)),this.onExtraItemsChangeActive(),this.startAnimalAnimations()},AnimalViewMediator.prototype.checkObjectLevel=function(){2<=this._object.stage&&(this.unregisterListener(this._object,s.ObjectModelEvent.STAGE_UP,this.checkObjectLevel.bind(this)),this.loadSpine())},AnimalViewMediator.prototype.loadSpine=function(){r.Application.resources.isResourceLoaded("animals/animal_"+this._model.id)?this.spineLoaded():(this._eventTarget=r.Application.resources.getResources(["animals/animal_"+this._model.id]).eventTarget,this.registerListener(this._eventTarget,a.ResourcesPackEvent.LOAD_COMPLETED,this.spineLoaded.bind(this)))},AnimalViewMediator.prototype.spineLoaded=function(){this.setupComponents(),this._mapData.isShop&&(this._spineAnimation.scaleX*=1.2,this._spineAnimation.scaleY*=1.2)},AnimalViewMediator.prototype.onPlayActionAnimation=function(t){for(var e=0,n=this._occurredActions;e<n.length;e++){var i=n[e];this._actionAnimationsPool.push(this._model.animation.getActionAnimation(i))}this._occurredActions=[]},AnimalViewMediator.prototype.onActionOccurred=function(t){this._actions?(this._actionAnimationsPool.push(this._model.animation.getActionAnimation(t.data)),this.startAnimalAnimations()):this._occurredActions.push(t.data)},AnimalViewMediator.prototype.onExtraItemsChangeActive=function(){var t=this.getActiveItemId(this._model.name),e=this._model.skin.skinPart.getItem(this._model.name).item.getItem(t);this._spineAnimation.setSkinByName(e.skin)},AnimalViewMediator.prototype.setupAnimation=function(){this._spineAnimation=new c("animals/animal_"+this._model.id,"spineAnimation"),this._spineAnimation.anchor="topLeft",this._spineAnimation.outside="bottomCenter",this._spineAnimation.floorPosition=!1,this._animalContainer?this._animalContainer.addChild(this._spineAnimation):this._container.addChild(this._spineAnimation)},AnimalViewMediator.prototype.startAnimalAnimations=function(){this._spineAnimation.hasListener(u.ANIMATION_COMPLETE,this.onAnimationComplete.bind(this))||this.registerListener(this._spineAnimation,u.ANIMATION_COMPLETE,this.onAnimationComplete.bind(this)),this.stopWalkingAnimation(),0<this._actionAnimationsPool.length?this._spineAnimation.setAnimation(this._actionAnimationsPool.shift(),!1):(this._lastAnimation!==this._model.animation.IDLE?this._lastAnimation=this._model.animation.IDLE:this._lastAnimation=this.getRandomAnimation(),this._lastAnimation===this._model.animation.WALK?(this._spineAnimation.setAnimation(this._lastAnimation,!0),this.startWalking()):this._spineAnimation.setAnimation(this._lastAnimation,!1))},AnimalViewMediator.prototype.getRandomAnimation=function(){var t=Math.floor(Math.random()*this._model.animation.commonAnimationsPool.length),e=this._model.animation.commonAnimationsPool[t];return this._walking||e!==this._model.animation.WALK||(t=t===this._model.animation.commonAnimationsPool.length-1?0:t+1,e=this._model.animation.commonAnimationsPool[t]),e},AnimalViewMediator.prototype.onAnimationComplete=function(){this.startAnimalAnimations()},AnimalViewMediator.prototype.startWalking=function(){var t,e=this;this._spineAnimation.hasListener(u.ANIMATION_COMPLETE,this.onAnimationComplete.bind(this))&&this.unregisterListener(this._spineAnimation,u.ANIMATION_COMPLETE,this.onAnimationComplete.bind(this));var n=0,i=this._animalContainer.parent.width;n=this._animalContainer.offsetX-100-n,i-=this._animalContainer.offsetX+100,n<0||0<=i&&.5<Math.random()?(t=this._animalContainer.offsetX+100+Math.random()*i,this._animalContainer.scaleX=-1):(t=this._animalContainer.offsetX-100-Math.random()*n,this._animalContainer.scaleX=1),this._walkingTween=r.Application.animation.create("animalWalkingAnimation",{target:this._animalContainer,offsetX:t,duration:Math.abs(t-this._animalContainer.offsetX)/this._model.animation.WALK_SPEED,onComplete:function(){return e.startAnimalAnimations()}}),this._walkingTween.start()},AnimalViewMediator.prototype.stopWalkingAnimation=function(){this._walkingTween&&(this._walkingTween.stop(!1),this._walkingTween=null)},AnimalViewMediator.prototype.getActiveItemId=function(t){var e=this._extraItems.getActiveItemByType(t);return e?e.id:0},AnimalViewMediator.prototype.destroy=function(){this.stopWalkingAnimation(),e.prototype.destroy.call(this)},AnimalViewMediator}(n.DisplayObjectContainerMediator);e.AnimalViewMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(42),n(13),n(49)],void 0===(r=function(t,e,n,r,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(n){function AnimalBubbleMediator(){return null!==n&&n.apply(this,arguments)||this}return c(AnimalBubbleMediator,n),AnimalBubbleMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._model=this._mapData,this._bubble=this._container,this.updateBubble();var e=r.Application.model.resources.get(this._model.actions[1].price.prices[0].itemId);this.registerListener(e,i.ResourceModelEvent.COUNT_CHANGED,this.updateBubble.bind(this)),this.registerListener(this._model.dynamicData.actions,o.BaseDataEvent.CHANGED,this.updateBubble.bind(this))},AnimalBubbleMediator.prototype.updateBubble=function(){for(var t,e=0,n=this._model.actions;e<n.length;e++){var i=n[e];if(0===i.price.prices.length){t=i;break}t?i.price.getPriceFirst(a.PriceType.RESOURCE).value<t.price.getPriceFirst(a.PriceType.RESOURCE).value&&(t=i):t=i}t.timeEnd<r.Application.date.currentTime?this._bubble.visible=r.Application.price.canSpend(t.price)||0===t.price.prices.length:this._bubble.visible=!1},AnimalBubbleMediator}(n.DisplayObjectContainerMediator);e.AnimalBubbleMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=function(e){function AnimalTapMediator(){return null!==e&&e.apply(this,arguments)||this}return c(AnimalTapMediator,e),AnimalTapMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerListener(this._container,a.POINTER_TAP,this.onTapOnAnimal.bind(this))},AnimalTapMediator.prototype.onTapOnAnimal=function(){i.Application.view.show(r.GUINames.ANIMAL_WINDOW,new o.ViewContext(this._mapData))},AnimalTapMediator}(n.DisplayObjectContainerMediator);e.AnimalTapMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,y=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(13),n(15),n(217),n(21),n(2),n(16),n(4),n(218),n(30)],void 0===(r=function(t,e,n,s,i,r,a,c,u,p,o,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=uipixi.UIContainer,_=uipixi.Point,f=function(n){function AnimalWindowMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._animations=[],t}return y(AnimalWindowMediator,n),AnimalWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._model=this._showData,this.initComponents(),this.setupComponents(),this.checkAnimalStageUp(),this.update(),this.registerListener(this._model.dynamicData,i.BaseDataEvent.CHANGED,this.update.bind(this))},AnimalWindowMediator.prototype.initComponents=function(){this._actionsList=this.child("actionsList"),this._nameLabel=this.child("nameLabel"),this._helpButton=this.child("helpButton"),this._levelLabel=this.child("levelLabel"),this._animalExpBar=this.child("animalExpBar"),this._animalExpLabel=this.child("animalExpLabel"),this._awardContainer=this.child("awardContainer"),this._awardDescription=this.child("awardDescription"),this._animalContainer=this.child("animalContainer"),this._progressHappyImage=this.child("progressHappyImage"),this._animationLayer=this.child("animationLayer"),this._bubbleText=this.child("bubbleText"),this._bubbleContainer=this.child("bubbleContainer"),this._awardRenderer=new r.AwardRenderer},AnimalWindowMediator.prototype.setupComponents=function(){var t="object_bg_"+s.Application.dynamic.user.screen+"_jpg/image_za_soft";this._baner1Loader=new p.LoadableImage(this.child("baner1"),t),this._baner2Loader=new p.LoadableImage(this.child("baner2"),t,!1),this._baner3Loader=new p.LoadableImage(this.child("baner3"),t,!1);for(var e=[],n=0,i=this._model.actions;n<i.length;n++){var r=i[n];e.push({model:this._model,action:r})}this._actionsList.addItems(e),this._nameLabel.text=s.Application.localization.localize(this._model.staticData.view.defaultNameKey),this._animalContainer.addChild(new h(this._model.name));var o=this.child("tooltipButton");s.Application.tooltip.addTooltip(o,c.TooltipAnchor.Bottom,u.GUINames.TEXT_TOOLTIP,{text:"ANIMAL_WINDOW_TOOLTIP"}),this.registerListener(this._model,a.AnimalModelEvent.PLAY_HAPPY_ANIMATIONS,this.onPlayAddHappyAnimation.bind(this))},AnimalWindowMediator.prototype.onPlayAddHappyAnimation=function(t){var e,n=this._animationLayer.getGlobalPosition();n.x*=-1,n.y*=-1;var i=this._progressHappyImage.getGlobalPosition().add(new _(.5*this._progressHappyImage.width,.5*this._progressHappyImage.height)).add(n),r=d.AnimationUtils.flyResources("resources_64/animalHappy",t.data.startPoint.add(n),t.data.middlePoint.add(n),i,new _(30,30),{angle:-69,count:t.data.count,layer:this._animationLayer});(e=this._animations).push.apply(e,r)},AnimalWindowMediator.prototype.checkAnimalStageUp=function(){this._model.canStageUp()&&o.ElkaCore.instance.promiseManager.ask(new l.AnimalStageUpPromise(this._model))},AnimalWindowMediator.prototype.updateBubble=function(){var t=this._model.getNextStageSkinAward();this._bubbleContainer.visible=0<t,this._bubbleText.text=s.Application.localization.localize("ANIMAL_WINDOW_NEXT_STAGE_AWARD",{level:t.toString()})},AnimalWindowMediator.prototype.update=function(){this.updateBubble(),this.updateProgress(),this.updateAward(),this._levelLabel.text=s.Application.localization.localize("ANIMAL_WINDOW_LEVEL",{level:this._model.stage.toString()})},AnimalWindowMediator.prototype.updateAward=function(){this._awardDescription.text=s.Application.localization.localize("ANIMAL_WINDOW_AWARD_DESCRIPTION",{level:(this._model.stage+1).toString()});var t=s.Application.award.calculate(this._model.getStageData((this._model.stage+1).toString()).awards,{stage:(this._model.stage+1).toString()});this._awardRenderer.initialized?this._awardRenderer.updateAward(t.awards[0]):this._awardRenderer.initialize(t.awards[0],this._awardContainer,{iconId:64,tooltip:c.TooltipAnchor.Right})},AnimalWindowMediator.prototype.updateProgress=function(){var t=this._model.stage+1,e=this._model.getStageData(t.toString()),n=this._model.getStageData(this._model.stage.toString()),i=this._model.happy,r=s.Application.calculator.calculate(e.requirements.requirement[0].minValue,{stage:t.toString()}),o=s.Application.calculator.calculate(n.requirements.requirement[0].minValue,{stage:this._model.stage.toString()}),a=(i-o)/(r-o);this._animalExpBar.progress=a,this._animalExpLabel.text=0<r-i?(r-i).toString():"0"},AnimalWindowMediator.prototype.destroy=function(){for(var t=0,e=this._animations;t<e.length;t++){e[t].stop()}this._baner1Loader.destroy(),this._baner2Loader.destroy(),this._baner3Loader.destroy(),this._awardRenderer.destroy(),this._model.dispatchEvent(new a.AnimalModelEvent(a.AnimalModelEvent.PLAY_ACTION_ANIMATIONS)),n.prototype.destroy.call(this)},AnimalWindowMediator}(n.DisplayObjectContainerMediator);e.AnimalWindowMediator=f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(378),n(4),n(15),n(14),n(379),n(29),n(13),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d,h,_=uipixi.GestureEvent,f=uipixi.Point;(h=d||(d={})).free="free",h.notFree="notFree",h.speedUp="speedUp";var y=function(e){function AnimalWindowActionItemMediator(){return null!==e&&e.apply(this,arguments)||this}return m(AnimalWindowActionItemMediator,e),AnimalWindowActionItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._showData.model,this._action=this._showData.action,this.initComponents(),this.setupComponents()},AnimalWindowActionItemMediator.prototype.initComponents=function(){this._happyValue=this.child("happyValue"),this._actionLabel=this.child("actionLabel"),this._timerLabel=this.child("timerLabel"),this._actionImage=this.child("actionImage"),this._happyIcon=this.child("happyIcon"),this._middle=this.child("middlePoint"),this._freeActionButton=this.child("freeActionButton"),this._notFreeActionButton=this.child("notFreeActionButton"),this._speedUpButton=this.child("speedUpButton"),this._actionContainer=this.child("action")},AnimalWindowActionItemMediator.prototype.setupComponents=function(){this._loadableImage=new l.LoadableImage(this._actionImage,this._action.icon),this._actionLabel.text=i.Application.localization.localize(this._action.name),0<this._action.price.prices.length?this.setupNotFreeButton():this.setupFreeButton(),this.setupSpeedUpButton(),this._happyValue.text="+"+this._action.award.getByType(s.AwardType.ANIMAL_HAPPY).value.toString(),this.update(),this.registerListener(this._action.dynamicData,p.BaseDataEvent.CHANGED,this.update.bind(this))},AnimalWindowActionItemMediator.prototype.update=function(){this.updateState(),this.updateTimer()},AnimalWindowActionItemMediator.prototype.updateTimer=function(){if(this._timerId&&!this.inProgress()&&this.clearTimer(),this.inProgress()){this._timerId=i.Application.date.callProcessor.repeatCall(this.onTimer.bind(this));var t=this._action.timeEnd-i.Application.date.currentTime;this.updateTimerLabel(t)}else this.updateTimerLabel(this._action.duration)},AnimalWindowActionItemMediator.prototype.onTimer=function(){var t=this._action.timeEnd-i.Application.date.currentTime;if(t<=0)return this.clearTimer(),t=0,void this.update();this.updateTimerLabel(t)},AnimalWindowActionItemMediator.prototype.updateTimerLabel=function(t){this._timerLabel.text=u.DateUtils.timeToString(t)},AnimalWindowActionItemMediator.prototype.clearTimer=function(){this._timerId&&(i.Application.date.callProcessor.deleteCall(this._timerId),this._timerId=null)},AnimalWindowActionItemMediator.prototype.updateState=function(){this.inProgress()?this._actionContainer.currentState=d.speedUp:this._actionContainer.currentState=this._READY_STATE},AnimalWindowActionItemMediator.prototype.setupFreeButton=function(){this._READY_STATE=d.free,this.registerListener(this._freeActionButton,_.POINTER_TAP,this.onStartAction.bind(this))},AnimalWindowActionItemMediator.prototype.setupNotFreeButton=function(){this._READY_STATE=d.notFree,this._awardRenderer=(new a.AwardRenderer).initialize(this._action.price.prices[0],this._notFreeActionButton,{iconId:64,fit:!0}),this.registerListener(this._notFreeActionButton,_.POINTER_TAP,this.onStartAction.bind(this))},AnimalWindowActionItemMediator.prototype.setupSpeedUpButton=function(){this.registerListener(this._speedUpButton,_.POINTER_TAP,this.onSpeedUp.bind(this))},AnimalWindowActionItemMediator.prototype.onSpeedUp=function(){o.ElkaCore.instance.promiseManager.ask(new c.AnimalBoostPromise(this._model.id,this._action))},AnimalWindowActionItemMediator.prototype.onStartAction=function(){var t={startPoint:this._happyIcon.getGlobalPosition().add(new f(this._happyIcon.width/2,this._happyIcon.height/2)),middlePoint:this._middle.getGlobalPosition().add(new f(.5*this._middle.width,.5*this._middle.height)),count:this._action.award.getByType(s.AwardType.ANIMAL_HAPPY).value};o.ElkaCore.instance.promiseManager.ask(new r.AnimalStartActionPromise(this._model.id,this._action,t))},AnimalWindowActionItemMediator.prototype.inProgress=function(){return this._action.timeEnd>i.Application.date.currentTime},AnimalWindowActionItemMediator.prototype.destroy=function(){this.clearTimer(),this._awardRenderer&&this._awardRenderer.destroy(),this._loadableImage.destroy(),e.prototype.destroy.call(this)},AnimalWindowActionItemMediator}(n.DisplayObjectContainerMediator);e.AnimalWindowActionItemMediator=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(884),n(0),n(68)],void 0===(r=function(t,e,n,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AnimalBoostCommand(){return null!==t&&t.apply(this,arguments)||this}return u(AnimalBoostCommand,t),AnimalBoostCommand.prototype.execute=function(o){return p(this,void 0,void 0,function(){var e,n,i,r;return l(this,function(t){switch(t.label){case 0:return e=o.action.speedUpPrice,[4,s.Application.confirm.show(c.ConfirmType.Buy,{prices:e})];case 1:return t.sent()&&(n=s.Application.price.hold(e)).success?(s.Application.price.rollback(n),[4,s.Application.server.send(new a.AnimalBoostAction(o.animalId,o.action.id))]):[3,3];case 2:i=t.sent(),r=s.Application.price.hold(s.Application.price.convertObjectToCalculated(i.output.price)),s.Application.price.release(r),t.label=3;case 3:return[2]}})})},AnimalBoostCommand}(n.CommandBase);e.AnimalBoostCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AnimalBoostAction(t,e){var n=i.call(this)||this;return n.action="boost",n.controller="animal",n.input=new r.ActionInput({animalId:t,actionId:e}),n.output=new o,n}return a(AnimalBoostAction,i),AnimalBoostAction}(n.Action);e.AnimalBoostAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.price=t.data.price},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(886),n(0),n(8),n(2),n(54),n(14)],void 0===(r=function(t,e,n,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AnimalStageUpCommand(){return null!==t&&t.apply(this,arguments)||this}return l(AnimalStageUpCommand,t),AnimalStageUpCommand.prototype.execute=function(r){return d(this,void 0,void 0,function(){var e,n,i;return h(this,function(t){switch(t.label){case 0:return[4,a.Application.server.send(new o.AnimalStageUpAction(r.animal.id))];case 1:return e=t.sent(),n=a.Application.award.convertObjectToCalculated(e.output.award),(i=r.animal.hasSkinOnStage(r.animal.stage))&&n.add(new u.CalculatedAwardItem(p.AwardType.UNLOCKED_EXTRA_ITEM,1,i.id.toString())),[4,a.Application.view.show(c.GUINames.AWARDS_WINDOW,new s.ViewContext({baseAward:n,title:a.Application.localization.localize("ANIMAL_NEXT_STAGE_AWARD_WINDOW_TITLE"),description:a.Application.localization.localize("ANIMAL_NEXT_STAGE_AWARD_WINDOW_DESCRIPTION")})).onClose];case 2:return t.sent(),a.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},AnimalStageUpCommand}(n.CommandBase);e.AnimalStageUpCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function AnimalStageUpAction(t){var e=n.call(this)||this;return e.action="stageUp",e.controller="animal",e.input=new i.ActionInput({animalId:t}),e.output=new o,e}return a(AnimalStageUpAction,n),AnimalStageUpAction}(n.Action);e.AnimalStageUpAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(888),n(4),n(218),n(217)],void 0===(r=function(t,e,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AnimalStartActionCommand(){return null!==t&&t.apply(this,arguments)||this}return u(AnimalStartActionCommand,t),AnimalStartActionCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return 0<i.action.price.prices.length?(e=r.Application.price.hold(i.action.price)).success?[4,r.Application.server.send(new o.AnimalStartAction(i.animalId,i.action.id))]:[3,2]:[3,4];case 1:return t.sent(),r.Application.price.release(e),[3,3];case 2:return[2];case 3:return[3,6];case 4:return[4,r.Application.server.send(new o.AnimalStartAction(i.animalId,i.action.id))];case 5:t.sent(),t.label=6;case 6:return(n=this._data.getAnimalById(i.animalId)).dispatchEvent(new c.AnimalModelEvent(c.AnimalModelEvent.ON_ACTION_OCCURRED,i.action.id)),n.dispatchEvent(new c.AnimalModelEvent(c.AnimalModelEvent.PLAY_HAPPY_ANIMATIONS,i.animParams)),n.canStageUp()&&a.ElkaCore.instance.promiseManager.ask(new s.AnimalStageUpPromise(n)),[2]}})})},AnimalStartActionCommand}(n.CommandBase);e.AnimalStartActionCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AnimalStartAction(t,e){var n=i.call(this)||this;return n.action="start",n.controller="animal",n.input=new r.ActionInput({animalId:t,actionId:e}),n.output=new o,n}return a(AnimalStartAction,i),AnimalStartAction}(n.Action);e.AnimalStartAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(37),n(890),n(148),n(895)],void 0===(r=function(t,e,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function DesignObjectContainerModel(t){var e=n.call(this)||this;return e._designObjects=[],e._idDesignObjectMap=new core.Map,e._screenDesignObjectMap=new core.Map,e._config=new s.DesignObjectConfigModel(t),e._designObjectItemCollection=i.Application.dynamic.user.designObject,e._designObjectItemCollection.items.forEach(function(t){return e.addDesignObject(t)}),e._designObjectItemCollection.addEventListener(r.ItemCollectionEvent.ITEM_ADDED,e.onDesignObjectAdded.bind(e)),e}return c(DesignObjectContainerModel,n),Object.defineProperty(DesignObjectContainerModel.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),DesignObjectContainerModel.prototype.getDesignObjectByScreen=function(t){return this._screenDesignObjectMap.get(t)},DesignObjectContainerModel.prototype.getDesignObjectByUserScreen=function(){return this._screenDesignObjectMap.get(i.Application.dynamic.user.screen)},DesignObjectContainerModel.prototype.getDesignObjectById=function(t){return this._idDesignObjectMap.get(t)},Object.defineProperty(DesignObjectContainerModel.prototype,"designObjects",{get:function(){return this._designObjects},enumerable:!0,configurable:!0}),DesignObjectContainerModel.prototype.completeStageUp=function(t){var e=new a.DesignObjectContainerEvent(a.DesignObjectContainerEvent.STAGE_UP_COMPLETED);e.models=t,this.dispatchEvent(e)},DesignObjectContainerModel.prototype.onDesignObjectAdded=function(t){var e=this.addDesignObject(t.item);if(e){var n=new a.DesignObjectContainerEvent(a.DesignObjectContainerEvent.DESIGN_OBJECT_ADDED);n.designObjectModel=e,this.dispatchEvent(n)}},DesignObjectContainerModel.prototype.addDesignObject=function(t){if(this._idDesignObjectMap.has(parseInt(t.id)))return null;var e=new o.DesignObjectModel(this,t);return this._designObjects.push(e),this._idDesignObjectMap.set(e.id,e),this._screenDesignObjectMap.set(e.screen,e),e},DesignObjectContainerModel}(uipixi.BaseEventTarget);e.DesignObjectContainerModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(891),n(0),n(13),n(381),n(37),n(893)],void 0===(r=function(t,e,f,y,m,n,v,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(_){function DesignObjectModel(t,e){var n=_.call(this)||this;n.containerModel=t,n._designObjectDynamicItem=e,n._builders=[],n._decor=[],n._idDecorMap=new core.Map,n._points=0,n._stage=0,n._points=e.points,n._designObjectStaticData=y.Application.static.data.designObjects.designObject.getItem(parseInt(e.id));var i=n.containerModel.config;n._help=i.getHelpKey(n.id),n._bgResource=i.getBGResource(n.id),n._optionDefaultResource=i.getOptionDefaultResource(n.id);for(var r=0,o=n._designObjectStaticData.actions.action.items;r<o.length;r++){var a=o[r],s=new b.DesignObjectBuilderModel(n,a,e.actions.getItem(a.id.toString()));n._builders.push(s)}for(var c=null,u=0,p=n._designObjectStaticData.stages.stage.items;u<p.length;u++){var l=p[u];if(0!==l.id){var d=e.options.getItem(l.id.toString()),h=new f.DesignObjectDecorModel(n,l,c,d);n._decor.push(h),n._idDecorMap.set(h.id,h),c=l}}return e.addEventListener(m.BaseDataEvent.CHANGED,n.onDynamicDataChanged.bind(n)),e.options.addEventListener(v.ItemCollectionEvent.ITEM_ADDED,n.onOptionAdded.bind(n)),n}return a(DesignObjectModel,_),DesignObjectModel.prototype.onOptionAdded=function(t){this._idDecorMap.get(+t.item.id).getOptionById(t.item.option).selected=!0},DesignObjectModel.prototype.getChangedOptions=function(){for(var t={},e=0,n=this._decor;e<n.length;e++){var i=n[e],r=this._designObjectDynamicItem.options.getItem(i.id.toString());if(!r)break;var o=i.selectedOption.id;o!==r.option&&(t[i.id]=o)}return 0!==Object.keys(t).length?t:null},DesignObjectModel.prototype.setStage=function(t){t!==this._stage&&(this._stage=t,this.dispatchEvent(new n.DesignObjectEvent(n.DesignObjectEvent.STAGE_CHANGED,this)))},DesignObjectModel.prototype.setPoints=function(t){t!==this._points&&(this._points=t,this.dispatchEvent(new n.DesignObjectEvent(n.DesignObjectEvent.POINTS_CHANGED,this)))},DesignObjectModel.prototype.onDynamicDataChanged=function(t){this.setPoints(this._designObjectDynamicItem.points),this.setStage(this._designObjectDynamicItem.stage)},Object.defineProperty(DesignObjectModel.prototype,"points",{get:function(){return this._designObjectDynamicItem.points},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"stage",{get:function(){return this._designObjectDynamicItem.stage},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"id",{get:function(){return this._designObjectStaticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"screen",{get:function(){return this._designObjectStaticData.screenId},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"builders",{get:function(){return this._builders},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"bgResource",{get:function(){return this._bgResource},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"optionDefaultResource",{get:function(){return this._optionDefaultResource},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"decor",{get:function(){return this._decor},enumerable:!0,configurable:!0}),DesignObjectModel.prototype.getDecorById=function(t){return this._idDecorMap.get(t)},DesignObjectModel.prototype.getDecorInProgress=function(){for(var t=0,e=this._decor;t<e.length;t++){var n=e[t];if("inProgress"===n.state)return n}return this._decor[0]},Object.defineProperty(DesignObjectModel.prototype,"completed",{get:function(){return"completed"===this._decor[this._decor.length-1].state},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectModel.prototype,"help",{get:function(){return this._help},enumerable:!0,configurable:!0}),DesignObjectModel}(uipixi.BaseEventTarget);e.DesignObjectModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(381),n(0),n(147),n(892),n(219)],void 0===(r=function(t,e,l,d,n,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(p){function DesignObjectDecorModel(t,e,n,i){var r=p.call(this)||this;r.designObjectModel=t,r._stageStaticData=e,r._prevStageStaticData=n,r._options=[],r._idOptionMap=new core.Map,r._progress=0,r._prevPoints=r.getPoints(n),r._nextPoints=r.getPoints(e),r._deltaPoints=r._nextPoints-r._prevPoints,r._state=r.getState(),r._title=d.Application.localization.localize(e.options[0].title),r._progress=r.getProgress();for(var o=i?i.option:-1,a=0,s=e.options[0].option.items;a<s.length;a++){var c=s[a],u=new h.DesignObjectOptionModel(r,c,c.id===o);u.addEventListener(_.DesignObjectOptionEvent.SELECTED,r.onOptionSelect.bind(r)),r._options.push(u),r._idOptionMap.set(u.id,u)}return t.addEventListener(l.DesignObjectEvent.POINTS_CHANGED,r.onPointsChanged.bind(r)),t.addEventListener(l.DesignObjectEvent.STAGE_CHANGED,r.onStageChanged.bind(r)),r}return a(DesignObjectDecorModel,p),DesignObjectDecorModel.prototype.calculateStageAward=function(){return d.Application.award.calculate(this._stageStaticData.awards[0])},DesignObjectDecorModel.prototype.getOptionById=function(t){return this._idOptionMap.get(t)},DesignObjectDecorModel.prototype.onOptionSelect=function(e){e.option.selected&&(this._options.forEach(function(t){return t.selected=e.option===t}),this.dispatchEvent(new n.DesignObjectDecorEvent(n.DesignObjectDecorEvent.OPTION_SELECTED,this)))},DesignObjectDecorModel.prototype.onPointsChanged=function(t){this.setProgress(this.getProgress()),this.setState(this.getState())},DesignObjectDecorModel.prototype.onStageChanged=function(t){this.setState(this.getState())},DesignObjectDecorModel.prototype.getCompleted=function(){return this._nextPoints<=this.designObjectModel.points},DesignObjectDecorModel.prototype.setState=function(t){t!==this._state&&(this._state=t,this.dispatchEvent(new n.DesignObjectDecorEvent(n.DesignObjectDecorEvent.STATE_CHANGED,this)))},DesignObjectDecorModel.prototype.getState=function(){return this.getCompleted()?"completed":this._stageStaticData.id===this.designObjectModel.stage+1?"inProgress":"locked"},DesignObjectDecorModel.prototype.setProgress=function(t){t!==this._progress&&(this._progress=t,this.dispatchEvent(new n.DesignObjectDecorEvent(n.DesignObjectDecorEvent.PROGRESS_CHANGED,this)))},DesignObjectDecorModel.prototype.getProgress=function(){var t=this.designObjectModel.points;return t<=this._prevPoints?0:t>=this._nextPoints?1:(t-this._prevPoints)/this._deltaPoints},DesignObjectDecorModel.prototype.getPoints=function(t){return t?t.points:0},Object.defineProperty(DesignObjectDecorModel.prototype,"selectedOption",{get:function(){for(var t=0,e=this._options;t<e.length;t++){var n=e[t];if(n.selected)return n}return null},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"selectedOptionId",{get:function(){var t=this.selectedOption;return t?t.id:0},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"awards",{get:function(){return this._stageStaticData.awards},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"pointsToComplete",{get:function(){return Math.max(this._nextPoints-this.designObjectModel.points,0)},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"id",{get:function(){return this._stageStaticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectDecorModel.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),DesignObjectDecorModel}(uipixi.BaseEventTarget);e.DesignObjectDecorModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(219)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(a){function DesignObjectOptionModel(t,e,n){void 0===n&&(n=!1);var i=a.call(this)||this;i.decorModel=t,i._optionStaticData=e,i._selected=n;var r=i.decorModel.designObjectModel.containerModel.config,o=i.decorModel.designObjectModel.id;return i._optionIconResource=r.getOptionIconResource(o,t.id,i.id),i._optionGladeResource=r.getOptionGladeResource(o,t.id,i.id),i}return s(DesignObjectOptionModel,a),Object.defineProperty(DesignObjectOptionModel.prototype,"id",{get:function(){return this._optionStaticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectOptionModel.prototype,"optionIconResource",{get:function(){return this._optionIconResource},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectOptionModel.prototype,"optionGladeResource",{get:function(){return this._optionGladeResource},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectOptionModel.prototype,"title",{get:function(){return n.Application.localization.localize(this._optionStaticData.title)},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectOptionModel.prototype,"selected",{get:function(){return this._selected},set:function(t){t!==this._selected&&(this._selected=t,this.dispatchEvent(new i.DesignObjectOptionEvent(i.DesignObjectOptionEvent.SELECTED,this)))},enumerable:!0,configurable:!0}),DesignObjectOptionModel}(uipixi.BaseEventTarget);e.DesignObjectOptionModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(13),n(894)],void 0===(r=function(t,e,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function DesignObjectBuilderModel(t,e,n){var i=r.call(this)||this;return i.designObjectModel=t,i._actionStaticData=e,i._actionDynamicData=n,i._actionDynamicData.addEventListener(o.BaseDataEvent.CHANGED,i.onActionChanged.bind(i)),i._timeout=new a.DesignObjectTimeoutModel,i._timeout.start(n.timeEnd),i._builderResourceId=i.designObjectModel.containerModel.config.getBuilderResource(t.id,i.id),i._builderName=i.resolveBuilderName(),i}return s(DesignObjectBuilderModel,r),DesignObjectBuilderModel.prototype.onActionChanged=function(t){this._timeout.start(this._actionDynamicData.timeEnd)},DesignObjectBuilderModel.prototype.resolveBuilderName=function(){return n.Application.localization.localize(this._actionStaticData.title)},Object.defineProperty(DesignObjectBuilderModel.prototype,"builderResourceId",{get:function(){return this._builderResourceId},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectBuilderModel.prototype,"builderName",{get:function(){return this._builderName},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectBuilderModel.prototype,"numPoints",{get:function(){return this._actionStaticData.point},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectBuilderModel.prototype,"id",{get:function(){return this._actionStaticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectBuilderModel.prototype,"idle",{get:function(){return!this._timeout.running},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectBuilderModel.prototype,"timeout",{get:function(){return this._timeout},enumerable:!0,configurable:!0}),DesignObjectBuilderModel.prototype.calculatePriceStart=function(){return n.Application.price.calculate(this._actionStaticData.start[0].prices[0])},DesignObjectBuilderModel.prototype.calculatePriceBoost=function(){return n.Application.price.calculate(this._actionStaticData.boost[0].prices[0])},DesignObjectBuilderModel}(uipixi.BaseEventTarget);e.DesignObjectBuilderModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(220)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function DesignObjectTimeoutModel(){var t=e.call(this)||this;return t._timeout=0,t._intervalId=-1,t._running=!1,t._date=n.Application.date,t}return a(DesignObjectTimeoutModel,e),Object.defineProperty(DesignObjectTimeoutModel.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectTimeoutModel.prototype,"timeout",{get:function(){return this._timeout},enumerable:!0,configurable:!0}),DesignObjectTimeoutModel.prototype.start=function(t){this.stop(),this._finishTime=t,this._finishTime<=this._date.currentTime||(this._intervalId=this._date.callProcessor.repeatCall(this.onInterval.bind(this),1e3),this.setRunning(!0),this.onInterval())},DesignObjectTimeoutModel.prototype.stop=function(){-1!==this._intervalId&&(this._date.callProcessor.deleteCall(this._intervalId),this._intervalId=-1,this.setRunning(!1))},DesignObjectTimeoutModel.prototype.setRunning=function(t){t!==this._running&&(this._running=t,this.dispatchEvent(new i.DesignObjectTimeoutEvent(i.DesignObjectTimeoutEvent.RUNNING_CHANGED)))},DesignObjectTimeoutModel.prototype.setTimeout=function(t){t!==this._timeout&&(this._timeout=t,this.dispatchEvent(new i.DesignObjectTimeoutEvent(i.DesignObjectTimeoutEvent.TIMEOUT_CHANGED)))},DesignObjectTimeoutModel.prototype.onInterval=function(){var t=this._finishTime-this._date.currentTime;t<0&&(t=0),this.setTimeout(t),t<=0&&this.stop()},DesignObjectTimeoutModel}(uipixi.BaseEventTarget);e.DesignObjectTimeoutModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(58)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DesignObjectConfigModel(t){this._config=t}return DesignObjectConfigModel.prototype.getOptionIconResource=function(t,e,n){return i.StringUtils.format(this._config.optionResourcePattern,{designObject:t,option:n,stage:e})},DesignObjectConfigModel.prototype.getOptionGladeResource=function(t,e,n){return i.StringUtils.format(this._config.decorResourcePattern,{designObject:t,option:n,stage:e})},DesignObjectConfigModel.prototype.getBuilderResource=function(t,e){return i.StringUtils.format(this._config.builderResourcePattern,{designObject:t,builder:e})},DesignObjectConfigModel.prototype.getHelpKey=function(t){return i.StringUtils.format(this._config.helpPattern,{designObject:t})},DesignObjectConfigModel.prototype.getDecorSubtitleKey=function(t,e){return i.StringUtils.format(this._config.decorSubtitlePattern,{designObject:t,stage:e})},DesignObjectConfigModel.prototype.getBGResource=function(t){return i.StringUtils.format(this._config.bgResourcePattern,{designObject:t})},DesignObjectConfigModel.prototype.getOptionDefaultResource=function(t){return i.StringUtils.format(this._config.defaultResourcePattern,{designObject:t})},DesignObjectConfigModel.prototype.getDecorRespack=function(t){return i.StringUtils.format(this._config.decorResourceRespack,{designObject:t})},DesignObjectConfigModel.prototype.getShineResource=function(){return this._config.shineResource},DesignObjectConfigModel}();e.DesignObjectConfigModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(148)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.UIFactory,a=function(e){function HUDDesignObjectButtonContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return s(HUDDesignObjectButtonContainerMediator,e),HUDDesignObjectButtonContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._designObjectModel=i.Application.model.designObject.getDesignObjectByUserScreen(),this._designObjectModel?this.addDesignObject():this.registerListener(i.Application.model.designObject,r.DesignObjectContainerEvent.DESIGN_OBJECT_ADDED,this.addDesignObject.bind(this))},HUDDesignObjectButtonContainerMediator.prototype.addDesignObject=function(t){this._designObjectModel=i.Application.model.designObject.getDesignObjectByUserScreen(),this._designObjectModel&&this.unregisterListener(i.Application.model.designObject,r.DesignObjectContainerEvent.DESIGN_OBJECT_ADDED,this.addDesignObject.bind(this));var e=o.instance.createUIElementByName("hudDesignObjectButton");this._container.addChild(e)},HUDDesignObjectButtonContainerMediator}(n.DisplayObjectContainerMediator);e.HUDDesignObjectButtonContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(147),n(4),n(15),n(123),n(221),n(0),n(21),n(2),n(382),n(16)],void 0===(r=function(t,e,n,i,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=uipixi.GestureEvent,r=function(r){function DesignObjectWindowMediator(){var t=null!==r&&r.apply(this,arguments)||this;return t._upgradeObjects=[],t._bg=[],t}return f(DesignObjectWindowMediator,r),DesignObjectWindowMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this._progressBar=this.child("decorProgress"),this._pointsLeftLabel=this.child("pointsLeftLabel"),this._title=this.child("title"),this._options=this.child("optionList"),this._preview=this.child("preview"),this.child("builderList").addItems(this._showData.builders);var e=this._showData.getDecorInProgress();this._navigator=(new s.NavigatorRenderer).initialize({items:this._showData.decor,pageSize:1,startPage:e.id-1},this._container),this._awardRenderer=(new a.AwardRenderer).initialize(null,this.child("stageAwardContainer"),{iconId:64,fit:!0,renderOnInit:!1});for(var n=1;n<=3;n++)this._bg.push(new h.LoadableImage(this.child("decorBG_"+n),this._showData.bgResource,!1));this._defaultView=new h.LoadableImage(this.child("defaultView"),this._showData.optionDefaultResource),this.setupDecor(e),this.registerListener(this._navigator,c.NavigatorRendererEvent.PAGE_CHANGED,this.onPageChanged.bind(this)),this.registerListener(this.child("closeButton"),_.POINTER_TAP,this.onClose.bind(this));var i=this.child("tooltipButton");u.Application.tooltip.addTooltip(i,p.TooltipAnchor.Bottom,l.GUINames.TEXT_TOOLTIP,{text:this._showData.help})},DesignObjectWindowMediator.prototype.setupDecor=function(t){this._currentDecor&&(this.unregisterListener(this._currentDecor,i.DesignObjectDecorEvent.PROGRESS_CHANGED,this.onProgressChanged.bind(this)),this.unregisterListener(this._currentDecor,i.DesignObjectDecorEvent.STATE_CHANGED,this.onStateChanged.bind(this)),this.unregisterListener(this._currentDecor,i.DesignObjectDecorEvent.OPTION_SELECTED,this.onOptionSelected.bind(this)),this._options.removeAllItems()),this._currentDecor=t,this._title.text=this._currentDecor.title,this._options.addItems(this._currentDecor.options),this.registerListener(this._currentDecor,i.DesignObjectDecorEvent.PROGRESS_CHANGED,this.onProgressChanged.bind(this)),this.registerListener(this._currentDecor,i.DesignObjectDecorEvent.STATE_CHANGED,this.onStateChanged.bind(this)),this.registerListener(this._currentDecor,i.DesignObjectDecorEvent.OPTION_SELECTED,this.onOptionSelected.bind(this)),this.onProgressChanged(),this.onStateChanged(),this.onOptionSelected(),this._awardRenderer.updateAward(this._currentDecor.calculateStageAward().awards[0])},DesignObjectWindowMediator.prototype.onClose=function(t){u.Application.model.designObject.completeStageUp(this._upgradeObjects),o.ElkaCore.instance.promiseManager.ask(new d.DesignObjectSetOptionsPromise(this._showData))},DesignObjectWindowMediator.prototype.onOptionSelected=function(t){this._currentDecor.selectedOption&&(this._decorView&&this._decorView.destroy(),this._decorView=new h.LoadableImage(this._preview,this._currentDecor.selectedOption.optionGladeResource))},DesignObjectWindowMediator.prototype.onProgressChanged=function(t){this._progressBar.progress=this._currentDecor.progress,this._pointsLeftLabel.text=this._currentDecor.pointsToComplete.toString()},DesignObjectWindowMediator.prototype.onStateChanged=function(t){t&&"completed"===this._currentDecor.state&&this._upgradeObjects.push(this._currentDecor),this._container.currentState=this._currentDecor.state},DesignObjectWindowMediator.prototype.onPageChanged=function(t){this.setupDecor(this._showData.getDecorById(t.data+1))},DesignObjectWindowMediator.prototype.destroy=function(){this._awardRenderer.destroy(),this._navigator.destroy(),this._bg.forEach(function(t){return t.destroy()}),this._decorView&&this._decorView.destroy(),this._defaultView.destroy(),r.prototype.destroy.call(this)},DesignObjectWindowMediator}(n.DisplayObjectContainerMediator);e.DesignObjectWindowMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,_=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),f=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},y=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(4),n(15),n(29),n(383),n(384),n(220),n(30),n(16)],void 0===(r=function(t,e,n,c,i,r,o,u,a,p,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,d=uipixi.Point,h=function(n){function DesignObjectBuilderMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._animations=[],t}return _(DesignObjectBuilderMediator,n),DesignObjectBuilderMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._timeout=this._showData.timeout,this._boostButton=this.child("boostButton"),this._buildButton=this.child("buildButton"),this._timerLabel=this.child("timerLabel"),this._start=this.child("startPoint"),this._middle=this.child("middlePoint"),this._finish=this.window.getChildByName("decorProgress"),this._animationLayer=this.window.getChildByName("animationLayer"),this.child("pointsLabel").text="+"+this._showData.numPoints,this.child("builderName").text=this._showData.builderName,this._builderImage=new s.LoadableImage(this.child("builderImage"),this._showData.builderResourceId);var e=this._buildButton.getChildByName("priceContainer");this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.calculatePriceStart().prices[0],e,{iconId:48,fit:!0}),this.registerListener(this._boostButton,l.POINTER_TAP,this.onBoost.bind(this)),this.registerListener(this._buildButton,l.POINTER_TAP,this.onBuild.bind(this)),this.registerListener(this._timeout,a.DesignObjectTimeoutEvent.RUNNING_CHANGED,this.onRunningChanged.bind(this)),this.registerListener(this._timeout,a.DesignObjectTimeoutEvent.TIMEOUT_CHANGED,this.onTimeoutChanged.bind(this)),this.onRunningChanged(),this.onTimeoutChanged()},DesignObjectBuilderMediator.prototype.onRunningChanged=function(t){this._container.currentState=this._timeout.running?"boost":"build"},DesignObjectBuilderMediator.prototype.onTimeoutChanged=function(t){this._timerLabel.text=r.DateUtils.timeToString(this._timeout.timeout)},DesignObjectBuilderMediator.prototype.onBoost=function(t){return f(this,void 0,void 0,function(){return y(this,function(t){return c.ElkaCore.instance.promiseManager.ask(new o.DesignObjectBoostPromise(this._showData)),[2]})})},DesignObjectBuilderMediator.prototype.onBuild=function(t){return f(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return y(this,function(t){switch(t.label){case 0:return[4,c.ElkaCore.instance.promiseManager.ask(new u.DesignObjectStartPromise(this._showData))];case 1:return n=t.sent(),this._cancellationToken.requested||!n.success?[2]:((i=this._animationLayer.getGlobalPosition()).x*=-1,i.y*=-1,r=this._start.getGlobalPosition().add(new d(.5*this._start.width,.5*this._start.height)).add(i),o=this._middle.getGlobalPosition().add(new d(.5*this._middle.width,.5*this._middle.height)).add(i),a=this._finish.getGlobalPosition().add(new d(.5*this._finish.width,.5*this._finish.height)).add(i),s=p.AnimationUtils.flyResources(this._start.resource,r,o,a,new d(.5*this._middle.width,.5*this._middle.height),{angle:-69,count:this._showData.numPoints,layer:this._animationLayer}),(e=this._animations).push.apply(e,s),[2])}})})},DesignObjectBuilderMediator.prototype.destroy=function(){this._awardRenderer.destroy(),this._animations.forEach(function(t){return t.stop()}),this._builderImage.destroy(),n.prototype.destroy.call(this)},DesignObjectBuilderMediator}(n.DisplayObjectContainerMediator);e.DesignObjectBuilderMediator=h}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(219),n(16)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,a=function(e){function DesignObjectOptionMediator(){return null!==e&&e.apply(this,arguments)||this}return s(DesignObjectOptionMediator,e),DesignObjectOptionMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.child("optionName").text=this._showData.title,this._optionImage=new r.LoadableImage(this.child("optionImage"),this._showData.optionIconResource),this.registerListener(this.child("selectButton"),o.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._showData,i.DesignObjectOptionEvent.SELECTED,this.onSelected.bind(this)),this.onSelected()},DesignObjectOptionMediator.prototype.onTap=function(t){this._showData.selected=!0},DesignObjectOptionMediator.prototype.onSelected=function(t){this._container.currentState=this._showData.selected?"selected":"unselected"},DesignObjectOptionMediator.prototype.destroy=function(){this._optionImage.destroy(),e.prototype.destroy.call(this)},DesignObjectOptionMediator}(n.DisplayObjectContainerMediator);e.DesignObjectOptionMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(30),n(16),n(34)],void 0===(r=function(t,e,n,r,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function DesignObjectStageUpWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return u(DesignObjectStageUpWindowMediator,e),DesignObjectStageUpWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.viewHandle.onShown.capture(),this.setDecor(),this.setName(),this.setAwards(),this.setContinueButton(),this.setAnimation(r.Application.award.calculate(this._showData.awards[0]).awards.length)},DesignObjectStageUpWindowMediator.prototype.setDecor=function(){this._decorImage=new o.LoadableImage(this.child("option"),this._showData.selectedOption.optionGladeResource)},DesignObjectStageUpWindowMediator.prototype.setName=function(){var t=this._showData.designObjectModel.containerModel.config;this.child("title").text=r.Application.localization.localize(this._showData.title),this.child("subtitle").text=r.Application.localization.localize(t.getDecorSubtitleKey(this._showData.designObjectModel.id,this._showData.id))},DesignObjectStageUpWindowMediator.prototype.setAwards=function(){for(var t=this.child("awardsList"),e=r.Application.award.calculate(this._showData.awards[0]).awards,n=0;n<e.length;n++){var i=e[n];t.addItem({award:i,index:n})}},DesignObjectStageUpWindowMediator.prototype.setContinueButton=function(){this.registerListener(this.child("continueButton"),s.POINTER_TAP,this.onContinue.bind(this))},DesignObjectStageUpWindowMediator.prototype.onContinue=function(){r.Application.view.hide(this.viewHandle)},DesignObjectStageUpWindowMediator.prototype.setAnimation=function(t){this._animation=i.AnimationUtils.awardWindow(this.child("labelsContainer"),this.child("awardLabel"),this.child("optionContainer"),this.child("continueButton"),this.child("wallpostCheckBox"),this.child("shineSpine"),0,1,t),this.registerListener(this._animation,a.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this.registerListener(r.Application.view.ui.stage,s.POINTER_DOWN,this.onStageTap.bind(this))},DesignObjectStageUpWindowMediator.prototype.onStageTap=function(){this.unregisterListener(r.Application.view.ui.stage,s.POINTER_DOWN,this.onStageTap.bind(this)),this._animation.stop(!0)},DesignObjectStageUpWindowMediator.prototype.onAnimationComplete=function(){this.viewHandle.onShown.complete()},DesignObjectStageUpWindowMediator.prototype.destroy=function(){this._animation.stop(),this._decorImage.destroy(),e.prototype.destroy.call(this)},DesignObjectStageUpWindowMediator}(n.DisplayObjectContainerMediator);e.DesignObjectStageUpWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(147),n(0),n(148),n(30),n(16)],void 0===(r=function(t,e,n,i,p,r,l,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=uipixi.Point,a=function(e){function DesignObjectDecorMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return s(DesignObjectDecorMediator,e),DesignObjectDecorMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerListener(this._mapData,i.DesignObjectDecorEvent.OPTION_SELECTED,this.onOptionSelected.bind(this)),this.registerListener(p.Application.model.designObject,r.DesignObjectContainerEvent.STAGE_UP_COMPLETED,this.onStageUpCompleted.bind(this)),this.onOptionSelected()},DesignObjectDecorMediator.prototype.onOptionSelected=function(t){this._view&&this._view.destroy();var e=this._mapData.selectedOptionId;this._container.currentState=e.toString(),0!==e&&(this._view=new o.LoadableImage(this.child("option"+e),this._mapData.selectedOption.optionGladeResource))},DesignObjectDecorMediator.prototype.onStageUpCompleted=function(t){for(var e,n=!1,i=0,r=t.models;i<r.length;i++){var o=r[i];this._mapData===o&&(n=!0)}if(n){var a=p.Application.view.ui.stage.getChildByName("beautyHUDBar").getGlobalPosition().add(new d(60,18)),s=this._container.getGlobalPosition(),c=new d(s.x,s.y-100),u=l.AnimationUtils.flyBeautyCrowns(48,4,s,c,a,new d(75,50));(e=this._animations).push.apply(e,u)}},DesignObjectDecorMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),this._view&&this._view.destroy(),e.prototype.destroy.call(this)},DesignObjectDecorMediator}(n.DisplayObjectContainerMediator);e.DesignObjectDecorMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(8),n(2),n(903)],void 0===(r=function(t,e,n,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DesignObjectStartCommand(){return null!==t&&t.apply(this,arguments)||this}return a(DesignObjectStartCommand,t),DesignObjectStartCommand.prototype.execute=function(a){return l(this,void 0,void 0,function(){var e,n,i,r,o;return d(this,function(t){switch(t.label){case 0:return(e=a.action.designObjectModel).completed?(a.resolve({success:!1}),[2]):(n=e.getDecorInProgress(),i=a.action.calculatePriceStart(),(r=s.Application.price.hold(i)).success?(o=new p.DesignObjectStartAction(e.id,a.action.id),[4,s.Application.server.send(o)]):(a.resolve({success:!1}),[2]));case 1:return t.sent(),s.Application.price.release(r),o.output.award?[4,s.Application.resources.getResources([e.containerModel.config.getShineResource()],!0)]:[3,3];case 2:t.sent(),s.Application.award.accrueAwardImmediately(o.output.award),s.Application.view.show(u.GUINames.DESIGN_OBJECT_STAGE_UP_WINDOW,new c.ViewContext(n)),t.label=3;case 3:return a.resolve({success:!0}),[2]}})})},DesignObjectStartCommand}(n.CommandBase);e.DesignObjectStartCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function DesignObjectStartAction(t,e){var n=i.call(this)||this;return n.action="Start",n.controller="DesignObject",n.input=new r.ActionInput({objectId:t,actionId:e}),n.output=new o,n}return a(DesignObjectStartAction,i),DesignObjectStartAction}(n.Action);e.DesignObjectStartAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){var e=t.data;this.price=e.price,this.award=e.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(68),n(905),n(906)],void 0===(r=function(t,e,n,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DesignObjectBoostCommand(){return null!==t&&t.apply(this,arguments)||this}return p(DesignObjectBoostCommand,t),DesignObjectBoostCommand.prototype.execute=function(o){return l(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){switch(t.label){case 0:return o.action.idle?[2]:(e=o.action.designObjectModel).completed?[2]:(n=o.action.calculatePriceBoost(),[4,a.Application.confirm.show(s.ConfirmType.Buy,{prices:n,title:a.Application.localization.localize(c.DesignObjectLocalizationKey.BOOST_TITLE),description:a.Application.localization.localize(c.DesignObjectLocalizationKey.BOOST_SUBTITLE)})]);case 1:return t.sent()&&(i=a.Application.price.hold(n)).success?(r=new u.DesignObjectBoostAction(e.id,o.action.id),[4,a.Application.server.send(r)]):[2];case 2:return t.sent(),a.Application.price.release(i),[2]}})})},DesignObjectBoostCommand}(n.CommandBase);e.DesignObjectBoostCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DesignObjectLocalizationKey(){}return DesignObjectLocalizationKey.BOOST_TITLE="DESIGN_BOOST_TITLE",DesignObjectLocalizationKey.BOOST_SUBTITLE="DESIGN_BOOST_SUBTITLE",DesignObjectLocalizationKey}();e.DesignObjectLocalizationKey=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function DesignObjectBoostAction(t,e){var n=i.call(this)||this;return n.controller="DesignObject",n.action="Boost",n.input=new r.ActionInput({objectId:t,actionId:e}),n.output=new o,n}return a(DesignObjectBoostAction,i),DesignObjectBoostAction}(n.Action);e.DesignObjectBoostAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.price=t.data.price},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(908)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function DesignObjectSetOptionsCommand(){return null!==t&&t.apply(this,arguments)||this}return a(DesignObjectSetOptionsCommand,t),DesignObjectSetOptionsCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return(e=n.designObjectModel.getChangedOptions())?[4,i.Application.server.send(new r.DesignObjectSetOptionsAction(n.designObjectModel.id,e))]:[2];case 1:return t.sent(),[2]}})})},DesignObjectSetOptionsCommand}(n.CommandBase);e.DesignObjectSetOptionsCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function DesignObjectSetOptionsAction(t,e){var n=i.call(this)||this;return n.controller="DesignObject",n.action="SetOptions",n.input=new r.ActionInput({objectId:t,options:e}),n.output=new o,n}return a(DesignObjectSetOptionsAction,i),DesignObjectSetOptionsAction}(n.Action);e.DesignObjectSetOptionsAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function FriendDesignObjectDecorMediator(){return null!==e&&e.apply(this,arguments)||this}return a(FriendDesignObjectDecorMediator,e),FriendDesignObjectDecorMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container.currentState=this._mapData.selectedOption},FriendDesignObjectDecorMediator}(n.DisplayObjectContainerMediator);e.FriendDesignObjectDecorMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8),n(42),n(220),n(147)],void 0===(r=function(t,e,n,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=uipixi.GestureEvent,i=function(i){function HUDDesignObjectButtonMediator(){return null!==i&&i.apply(this,arguments)||this}return l(HUDDesignObjectButtonMediator,i),HUDDesignObjectButtonMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._marker=this.child("markerImage"),this._designObjectModel=r.Application.model.designObject.getDesignObjectByUserScreen(),this.registerListener(this._container,p.POINTER_TAP,this.showWindow.bind(this)),this._firstBuilder=this._designObjectModel.builders[0];var e=this._firstBuilder.calculatePriceStart();this._startResource=r.Application.model.resources.get(e.prices[0].itemId);var n=this._designObjectModel.decor;this.registerListener(this._startResource,s.ResourceModelEvent.COUNT_CHANGED,this.updateMarker.bind(this)),this.registerListener(this._firstBuilder.timeout,c.DesignObjectTimeoutEvent.RUNNING_CHANGED,this.updateMarker.bind(this)),this.registerListener(n[n.length-1],u.DesignObjectDecorEvent.STATE_CHANGED,this.updateMarker.bind(this)),this.updateMarker()},HUDDesignObjectButtonMediator.prototype.updateMarker=function(t){var e=r.Application.price.canSpend(this._firstBuilder.calculatePriceStart());this._marker.visible=!this._designObjectModel.completed&&!this._firstBuilder.timeout.running&&e},HUDDesignObjectButtonMediator.prototype.showWindow=function(t){r.Application.view.show(o.GUINames.DESIGN_OBJECT_WINDOW,new a.ViewContext(this._designObjectModel))},HUDDesignObjectButtonMediator}(n.DisplayObjectContainerMediator);e.HUDDesignObjectButtonMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function DesignObjectLoadDecorCommand(){return null!==t&&t.apply(this,arguments)||this}return a(DesignObjectLoadDecorCommand,t),DesignObjectLoadDecorCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return n.designObject?(e=i.Application.model.designObject.config,[4,i.Application.resources.getResources([e.getDecorRespack(+n.designObject.id)],!0)]):[2];case 1:return t.sent(),[2]}})})},DesignObjectLoadDecorCommand}(n.CommandBase);e.DesignObjectLoadDecorCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function LoadToysRespacksCommand(){return null!==t&&t.apply(this,arguments)||this}return a(LoadToysRespacksCommand,t),LoadToysRespacksCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return 0<(e=n.screenModel.getViewResources()).length?[4,i.Application.resources.getResources(e,n.showLoading)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},LoadToysRespacksCommand}(n.CommandBase);e.LoadToysRespacksCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function LoadToysRespacksPromise(t,e){var n=i.call(this)||this;return n.screenModel=t,n.showLoading=e,n}return a(LoadToysRespacksPromise,i),LoadToysRespacksPromise}(n.BasePromise);e.LoadToysRespacksPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(915),n(37)],void 0===(r=function(t,e,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ToysModel(t,e){this._resources=new core.Map,this._dynamic=e;for(var n=0,i=t.toy.items;n<i.length;n++){var r=i[n],o=r.id.toString(),a=new s.ToyModel(r,this._dynamic.getItem(o));this._resources.set(o,a)}this._dynamic.addEventListener(c.ItemCollectionEvent.ITEM_ADDED,this.onItemAdded.bind(this))}return ToysModel.prototype.onItemAdded=function(t){var e=t.item;this._resources.get(e.id).dynamic=e},ToysModel.prototype.get=function(t){return this._resources.get(t)},ToysModel}();e.ToysModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(222),n(13)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ToyModel(t,e){var n=i.call(this)||this;return n.id=t.id.toString(),n._static=t,e&&n.setDynamic(e),n}return a(ToyModel,i),Object.defineProperty(ToyModel.prototype,"dynamic",{set:function(t){if(this._dynamic)throw new Error("ToyModel dynamic already exists: "+this._dynamic.id);this.setDynamic(t),this.dispatchEvent(new n.ToyModelEvent(n.ToyModelEvent.COUNT_CHANGED))},enumerable:!0,configurable:!0}),ToyModel.prototype.setDynamic=function(t){this._dynamic=t,this._dynamic.addEventListener(r.BaseDataEvent.CHANGED,this.onChanged.bind(this))},ToyModel.prototype.onChanged=function(){this.dispatchEvent(new n.ToyModelEvent(n.ToyModelEvent.COUNT_CHANGED))},Object.defineProperty(ToyModel.prototype,"count",{get:function(){return this._dynamic?this._dynamic.count:0},enumerable:!0,configurable:!0}),Object.defineProperty(ToyModel.prototype,"static",{get:function(){return this._static},enumerable:!0,configurable:!0}),Object.defineProperty(ToyModel.prototype,"isExist",{get:function(){return!!this._dynamic},enumerable:!0,configurable:!0}),ToyModel}(uipixi.BaseEventTarget);e.ToyModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(149)],void 0===(r=function(t,e,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(o){function ScreensToysModel(t){var e=o.call(this)||this;e._screens=new core.Map;for(var n=0,i=a.Application.static.data.screens.screen.items;n<i.length;n++){var r=i[n];e.addScreen(new s.ScreenToysModel(r.id,t.screens.getItem(r.id.toString())))}return e}return c(ScreensToysModel,o),ScreensToysModel.prototype.addScreen=function(t){this._screens.set(t.id,t)},ScreensToysModel.prototype.getScreen=function(t){return this._screens.get(t)},ScreensToysModel}(uipixi.BaseEventTarget);e.ScreensToysModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(100),n(918),n(919),n(0)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function ToysWindowOptions(){this.listenUpdates=!0};e.ToysWindowOptions=s;var c=function(e){function ToysWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return u(ToysWindowMediator,e),ToysWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._toyViews=new core.Map,this._showData?this._screenToysModel=this._showData:this._screenToysModel=a.Application.model.screensToys.getScreen(a.Application.dynamic.user.screen),this.addToys(),this._mapData.listenUpdates&&(this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_POP_UP,this.onToyPopup.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_UPDATED,this.onToyUpdated.bind(this))),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_ADDED,this.onToyAdded.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_REMOVED,this.onToyRemoved.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.REMOVE_ALL,this.onAllToysRemoved.bind(this))},ToysWindowMediator.prototype.addView=function(t){var e=this.createToyView(t);this._container.addChild(e),this._toyViews.set(t,e)},ToysWindowMediator.prototype.addToys=function(){for(var t=0,e=this._screenToysModel.toys;t<e.length;t++){var n=e[t];this.addView(n)}},ToysWindowMediator.prototype.onToyAdded=function(t){this.addView(t.toyModel)},ToysWindowMediator.prototype.onToyPopup=function(t){var e=this._toyViews.get(t.toyModel);this._container.setChildIndex(e,this._toyViews.size-1)},ToysWindowMediator.prototype.onToyUpdated=function(t){this._toyViews.get(t.toyModel).updateView()},ToysWindowMediator.prototype.onToyRemoved=function(t){var e=this._toyViews.get(t.toyModel);this._container.removeChild(e)},ToysWindowMediator.prototype.onAllToysRemoved=function(){for(;0<this._container.children.length;)this._container.removeChild(this._container.children[0]);this._toyViews.clear()},ToysWindowMediator.prototype.createToyView=function(t){var e;return(e=t.staticData.view.spine?new r.SpineToyView(t,t.staticData.view.spine):new o.ImageToyView(t,t.staticData.view.resource)).outside="center",e.updateView(),e},ToysWindowMediator}(n.DisplayObjectContainerMediator);e.ToysWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(389)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.UISpine,r=function(n){function SpineToyView(t,e){return n.call(this,t,e)||this}return a(SpineToyView,n),SpineToyView.prototype.createView=function(){return new i(this._resource)},SpineToyView.prototype.initView=function(){n.prototype.initView.call(this),this._view.anchor="topLeft"},SpineToyView}(n.ToyView);e.SpineToyView=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(389)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.UIImage,r=function(n){function ImageToyView(t,e){return n.call(this,t,e)||this}return a(ImageToyView,n),ImageToyView.prototype.createView=function(){return new i(this._resource)},ImageToyView.prototype.initView=function(){n.prototype.initView.call(this),this._view.render.anchor.x=.5,this._view.render.anchor.y=.5},ImageToyView}(n.ToyView);e.ImageToyView=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(100),n(68),n(4),n(390),n(2),n(26)],void 0===(r=function(t,e,n,c,i,u,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p,l,d=uipixi.GestureEvent,h=uipixi.UIFactory;(l=p||(p={})).SELECTED="selected",l.DRAG_SELECTED="dragSelected",l.NOT_SELECTED="notSelected";var _=function(e){function EditToysWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return f(EditToysWindowMediator,e),EditToysWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._screenId=c.Application.dynamic.user.screen,this._screenToysModel=c.Application.model.screensToys.getScreen(this._screenId),this._oldToys=this._screenToysModel.serialize(),this.initBackground(),this.initObjects(),this._container.currentState=p.NOT_SELECTED,this.registerListener(this.child("clearButton"),d.POINTER_TAP,this.onClear.bind(this)),this.registerListener(this.child("applyButton"),d.POINTER_TAP,this.onApply.bind(this)),this.registerListener(this.child("exitEditModeButton"),d.POINTER_TAP,this.onExit.bind(this)),this.registerListener(this.child("rotateLeftButton"),d.POINTER_TAP,this.onRotateLeft.bind(this)),this.registerListener(this.child("rotateRightButton"),d.POINTER_TAP,this.onRotateRight.bind(this)),this.registerListener(this.child("flipButton"),d.POINTER_TAP,this.onFlip.bind(this)),this.registerListener(this.child("scaleDownButton"),d.POINTER_TAP,this.onScaleDown.bind(this)),this.registerListener(this.child("scaleUpButton"),d.POINTER_TAP,this.onScaleUp.bind(this)),this.registerListener(this.child("removeButton"),d.POINTER_TAP,this.onRemove.bind(this)),this.registerListener(this.child("shopButton"),d.POINTER_TAP,this.onDecorShop.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_SELECTED_CHANGED,this.onSelectedToy.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_DRAG_START,this.onDragToy.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_DRAG_STOP,this.onSelectedToy.bind(this))},EditToysWindowMediator.prototype.initBackground=function(){this._backContainer=h.instance.createUIElementByName("background_"+this._screenId),this.child("backgroundContainer").addChild(this._backContainer)},EditToysWindowMediator.prototype.initObjects=function(){var t=h.instance.createUIElementByName("objects"+this._screenId);t.name="objectsContainer",this._container.addChild(t);var e=this.child("objectsContainerTemp");this._container.setChildIndex(t,this._container.getChildIndex(e));var n=h.instance.createUIElementByName(a.GUINames.DESIGN_OBJECT_DECOR_BACK+this._screenId),i=h.instance.createUIElementByName(a.GUINames.DESIGN_OBJECT_DECOR_FRONT+this._screenId);this.child("decorContainerBack").addChild(n),this.child("decorContainerFront").addChild(i)},EditToysWindowMediator.prototype.onClear=function(){return y(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return m(this,function(t){switch(t.label){case 0:for(e=u.ConfirmType.Text,n={title:c.Application.localization.localize("REMOVE_TOYS_CONFIRM_TITLE"),description:c.Application.localization.localize("REMOVE_TOYS_CONFIRM_DESCRIPTION")},r=i=0,o=this._screenToysModel.toys;r<o.length;r++)a=o[r],i+=a.staticData.beauty;return 0<i&&(e=u.ConfirmType.Beauty,n.beauty=-i),[4,c.Application.confirm.show(e,n)];case 1:return s=t.sent(),!this._cancellationToken.requested&&s&&this._screenToysModel.removeAll(),[2]}})})},EditToysWindowMediator.prototype.onDecorShop=function(){var t=this._screenToysModel.serialize();this.checkToysChanged(t)&&(r.ElkaCore.instance.promiseManager.ask(new o.ToySetXYPromise(this._screenId,t)),this._oldToys=this._screenToysModel.serialize()),c.Application.view.show(a.GUINames.DECOR_WINDOW,null,s.WindowLayer.WINDOWS)},EditToysWindowMediator.prototype.onRotateLeft=function(){this._screenToysModel.selectedToy.rotateLeft()},EditToysWindowMediator.prototype.onRotateRight=function(){this._screenToysModel.selectedToy.rotateRight()},EditToysWindowMediator.prototype.onFlip=function(){this._screenToysModel.selectedToy.flip()},EditToysWindowMediator.prototype.onScaleDown=function(){this._screenToysModel.selectedToy.scaleDown()},EditToysWindowMediator.prototype.onScaleUp=function(){this._screenToysModel.selectedToy.scaleUp()},EditToysWindowMediator.prototype.onRemove=function(){this._screenToysModel.removeToy(this._screenToysModel.selectedToy)},EditToysWindowMediator.prototype.onSelectedToy=function(){this._container.currentState=this._screenToysModel.selectedToy?p.SELECTED:p.NOT_SELECTED},EditToysWindowMediator.prototype.onDragToy=function(){this._container.currentState=p.DRAG_SELECTED},EditToysWindowMediator.prototype.onApply=function(){this._screenToysModel.selectedToy=null},EditToysWindowMediator.prototype.onExit=function(){return y(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return e=this._screenToysModel.serialize(),this.checkToysChanged(e)?[4,r.ElkaCore.instance.promiseManager.ask(new o.ToySetXYPromise(this._screenId,e))]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._cancellationToken.requested||(c.Application.view.hide(this.viewHandle),c.Application.model.beauty.currentScreenBeauty.canStageUp&&c.Application.view.show(a.GUINames.BEAUTY_WINDOW)),[2]}})})},EditToysWindowMediator.prototype.checkToysChanged=function(i){return i.length!=this._oldToys.length||this._oldToys.some(function(t,n){return t.some(function(t,e){return t!==i[n][e]})})},EditToysWindowMediator}(n.DisplayObjectContainerMediator);e.EditToysWindowMediator=_}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57),n(0),n(207)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function ToyViewSpineMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ToyViewSpineMediator,e),ToyViewSpineMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._spine=this._displayObject.view,this._settingsData=i.Application.settings.settingsData,this.registerListener(this._settingsData,r.SettingsEvent.ANIMATIONS_ON_CHANGED,this.setAnimationOrNot.bind(this)),this.setAnimationOrNot()},ToyViewSpineMediator.prototype.setAnimationOrNot=function(){this._settingsData.animationsOn?this._spine.setAnimation("animation",!0):this._spine.stopAndReset()},ToyViewSpineMediator}(n.DisplayObjectMediator);e.ToyViewSpineMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(223),n(2),n(1)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=uipixi.UIFactory,c=function(e){function EditModeButtonMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._isWaitUsing=!1,t.BUTTON_NAME="toysButton",t}return u(EditModeButtonMediator,e),EditModeButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._requirements=n.Application.static.data.client.minLevelParams.minLevelParam.getItem(this.BUTTON_NAME).requirements,n.Application.requirements.check(this._requirements)?this.addButton():(this._isWaitUsing=!0,n.Application.requirements.wait(this._requirements,this.addButton.bind(this)))},EditModeButtonMediator.prototype.addButton=function(){this._isWaitUsing&&(n.Application.requirements.unwait(this._requirements,this.addButton.bind(this)),this._isWaitUsing=!1);var t=s.instance.createUIElementByName(this.BUTTON_NAME);this._container.addChild(t),this._doneMarkerImage=this.child("doneMarkerImage"),this._attentionMarkerImage=this.child("attentionMarkerImage"),this._shopsModel=n.Application.model.decorShops,this.registerListener(this._shopsModel,i.DecorShopsModelEvent.STATE_CHANGED,this.updateMarkers.bind(this)),this.updateMarkers(),this.registerListener(this._container,a.POINTER_TAP,this.onButton.bind(this))},EditModeButtonMediator.prototype.onButton=function(t){n.Application.view.show(r.GUINames.EDIT_TOYS_WINDOW)},EditModeButtonMediator.prototype.updateMarkers=function(){this._doneMarkerImage.visible=this._shopsModel.markerDone,this._attentionMarkerImage.visible=this._shopsModel.markerAttention},EditModeButtonMediator.prototype.destroy=function(){this._isWaitUsing&&n.Application.requirements.unwait(this._requirements,this.addButton.bind(this)),e.prototype.destroy.call(this)},EditModeButtonMediator}(o.DisplayObjectContainerMediator);e.EditModeButtonMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(100),n(1),n(34),n(43),n(46)],void 0===(r=function(t,e,r,i,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.UIFactory,u=function(n){function EditToysFakeBeautyMediator(){return null!==n&&n.apply(this,arguments)||this}return p(EditToysFakeBeautyMediator,n),EditToysFakeBeautyMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=r.Application.dynamic.user.screen;this._screenToysModel=r.Application.model.screensToys.getScreen(e),this._beautyScreenModel=r.Application.model.beauty.currentScreenBeauty,this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_ADDED,this.onToyAdded.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.TOY_REMOVED,this.onToyRemoved.bind(this)),this.registerListener(this._screenToysModel,i.ScreenToysModelEvent.REMOVE_ALL,this.onRemoveAll.bind(this))},EditToysFakeBeautyMediator.prototype.onToyAdded=function(t){r.Application.sound.play(a.SoundName.DECORATION,!1,s.SoundGroup.SOUND_GROUP_SOUND),0<t.toyModel.staticData.beauty&&(this._beautyScreenModel.fakeBeauty+=t.toyModel.staticData.beauty,this.animateBeautyChange(t.toyModel.staticData.beauty,t.toyModel))},EditToysFakeBeautyMediator.prototype.onToyRemoved=function(t){var e=t.toyModel,n=e.staticData.beauty;0<n&&(this._beautyScreenModel.fakeBeauty-=n,this.animateBeautyChange(-n,e))},EditToysFakeBeautyMediator.prototype.onRemoveAll=function(t){for(var e=0,n=this._screenToysModel.toys;e<n.length;e++){var i=n[e];0<i.staticData.beauty&&(this._beautyScreenModel.fakeBeauty-=i.staticData.beauty)}},EditToysFakeBeautyMediator.prototype.animateBeautyChange=function(t,e){this.clearBeautyTween();var n=0<t?"toyBeautyContainer":"toyBeautyRemoveContainer",i=c.instance.createUIElementByName(n);i.getChildByName("label").text=(0<t?"+":"")+t.toString(),i.offsetX=e.x,i.offsetY=e.y-30,this._beautyTween=r.Application.animation.create("toyBeauty",{target:i,container:this._container,endPointY:e.y-30-EditToysFakeBeautyMediator.BEAUTY_ANIMATION_Y}),this._beautyTween.addEventListener(o.ProcessEvent.COMPLETE,this.onBeautyTweenComplete.bind(this,i)),this._beautyTween.start()},EditToysFakeBeautyMediator.prototype.onBeautyTweenComplete=function(t){this._beautyTween.removeEventListener(o.ProcessEvent.COMPLETE,this.onBeautyTweenComplete.bind(this)),this._beautyTween=null},EditToysFakeBeautyMediator.prototype.clearBeautyTween=function(){this._beautyTween&&(this._beautyTween.removeEventListener(o.ProcessEvent.COMPLETE,this.onBeautyTweenComplete.bind(this)),this._beautyTween.stop(),this._beautyTween=null)},EditToysFakeBeautyMediator.prototype.destroy=function(){this.clearBeautyTween(),this._beautyScreenModel.fakeBeauty=0,n.prototype.destroy.call(this)},EditToysFakeBeautyMediator.BEAUTY_ANIMATION_Y=40,EditToysFakeBeautyMediator}(n.DisplayObjectContainerMediator);e.EditToysFakeBeautyMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(100)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,a=PIXI.filters.GlowFilter,s=function(e){function EditToyViewMediator(){return null!==e&&e.apply(this,arguments)||this}return c(EditToyViewMediator,e),EditToyViewMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._SELECTED_FILTER=new a(8,3,.5,11664639,.3),this._SELECTED_FILTER.padding=this._SELECTED_FILTER.distance,this._SELECTED_FILTER2=new a(10,1,.5,55551,.3),this._SELECTED_FILTER2.padding=this._SELECTED_FILTER2.distance,this._view=this._container,this._toyModel=this._view.screenToyModel,this._toysModel=n.Application.model.screensToys.getScreen(n.Application.dynamic.user.screen),this._view.view.buttonMode=!0,this.registerListener(this._view,o.POINTER_DOWN,this.onPointerDown.bind(this)),this.registerListener(this._view,o.POINTER_OVER,this.onOver.bind(this)),this.registerListener(this._view,o.POINTER_OUT,this.onOut.bind(this)),this.registerListener(this._toysModel,r.ScreenToysModelEvent.TOY_SELECTED_CHANGED,this.onSelectedToy.bind(this)),this._toyModel.placeGestureEvent&&(this._toysModel.selectedToy=this._toyModel,this.startDrag(),this.onPointerMove(this._toyModel.placeGestureEvent),this._toyModel.placeGestureEvent=null)},EditToyViewMediator.prototype.onSelectedToy=function(){this._toysModel.selectedToy===this._toyModel?this._view.view.filters=[this._SELECTED_FILTER,this._SELECTED_FILTER2]:this._view.view.filters=null},EditToyViewMediator.prototype.onOver=function(){this._toysModel.selectedToy===this._toyModel&&this._toysModel.selectedToy||(this._view.view.filters=[this._SELECTED_FILTER,this._SELECTED_FILTER2])},EditToyViewMediator.prototype.onOut=function(){this._toysModel.selectedToy!==this._toyModel&&(this._view.view.filters=null)},EditToyViewMediator.prototype.startDrag=function(){this._dragLocalOffset||(this._dragLocalOffset=new PIXI.Point),this.registerListener(n.Application.view.ui.stage,o.POINTER_UP,this.onPointerUp.bind(this)),this.registerListener(n.Application.view.ui.stage,o.POINTER_MOVE,this.onPointerMove.bind(this)),this._drag=!0,this._toysModel.dispatchEvent(new r.ScreenToysModelEvent(r.ScreenToysModelEvent.TOY_DRAG_START,this._toyModel))},EditToyViewMediator.prototype.onPointerDown=function(t){this._dragLocalOffset=t.input.data.getLocalPosition(this._container.render);var e=this._view.parent,n=e.children.length-1;this._view.screenToyModel.zIndex!==n&&(e.setChildIndex(this._view,n),this._toysModel.popUpToy(this._toyModel)),this._toysModel.selectedToy=this._toyModel,this.startDrag()},EditToyViewMediator.prototype.onPointerUp=function(){this.unregisterListener(n.Application.view.ui.stage,o.POINTER_MOVE,this.onPointerMove.bind(this)),this.unregisterListener(n.Application.view.ui.stage,o.POINTER_UP,this.onPointerUp.bind(this)),this._dragLocalOffset=null,this._drag=!1,this._toysModel.dispatchEvent(new r.ScreenToysModelEvent(r.ScreenToysModelEvent.TOY_DRAG_STOP,this._toyModel)),this._toysModel.dispatchEvent(new r.ScreenToysModelEvent(r.ScreenToysModelEvent.TOY_UPDATED,this._toyModel))},EditToyViewMediator.prototype.onPointerMove=function(t){var e=t.data.data.getLocalPosition(this._view.parent.render);this._view.offsetX=Math.round(e.x-this._view.parent.width/2-this._dragLocalOffset.x),this._view.offsetY=Math.round(e.y-this._view.parent.height/2-this._dragLocalOffset.y),this._view.screenToyModel.x=this._view.offsetX,this._view.screenToyModel.y=this._view.offsetY},EditToyViewMediator.prototype.destroy=function(){this._beautyTween&&this._beautyTween.stop(!0),this._view.view.buttonMode=!1,e.prototype.destroy.call(this)},EditToyViewMediator}(i.DisplayObjectContainerMediator);e.EditToyViewMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.UISpine,r=function(t){function IsSpineToyViewGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsSpineToyViewGuard,t),IsSpineToyViewGuard.prototype.approve=function(){return this.viewHandle.displayObject.view instanceof i},IsSpineToyViewGuard}(n.Guard);e.IsSpineToyViewGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(927)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function ToySetXYCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ToySetXYCommand,t),ToySetXYCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,n.Application.server.send(new r.ToySetXYAction(e.screenId,e.coords))];case 1:return t.sent(),n.Application.model.beauty.currentScreenBeauty.fakeBeauty=0,n.Application.model.beauty.currentScreenBeauty.updateBeautyProgress(),[2]}})})},ToySetXYCommand}(i.CommandBase);e.ToySetXYCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ToySetXYAction(t,e){var n=i.call(this)||this;return n.action="setXY",n.controller="toy",n.input=new r.ActionInput({screenId:t,coords:e}),n.output=new o,n}return a(ToySetXYAction,i),ToySetXYAction}(n.Action);e.ToySetXYAction=i;var o=function(){function SetXYActionOutput(){}return SetXYActionOutput.prototype.parse=function(t){},SetXYActionOutput}();e.SetXYActionOutput=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(929),n(930),n(224),n(150),n(931),n(0)],void 0===(r=function(t,e,h,_,o,a,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(d){function ViralExchangeModel(t,e){var n=d.call(this)||this;n._dynamicData=t,n._staticData=e,n._request=[],n._response=[],n._sentList=[],n._users=new core.Map;for(var i=0,r=t.request.items;i<r.length;i++){var o=r[i],a=new h.ViralExchangeItemModel(o);n._request.push(a),n.getUser(a.socialId).addRequest(a)}for(var s=0,c=t.response.items;s<c.length;s++){o=c[s],a=new h.ViralExchangeItemModel(o);n._response.push(a),n.getUser(a.socialId).addResponse(a)}for(var u=0,p=t.sentList.items;u<p.length;u++){var l=p[u];n._sentList.push(new _.ViralExchangeSentListItemModel(l))}return n._responseDroppedKeys=new core.Map,n._requestDroppedKeys=new core.Map,n}return s(ViralExchangeModel,d),ViralExchangeModel.prototype.removeRequestItem=function(t){for(var e=null,n=0,i=this._request;n<i.length;n++){var r=i[n];if(r.key===t){e=r;break}}e&&(this._request.splice(this._request.indexOf(e),1),this.getUser(e.socialId).removeRequest(e.key),e.dispatchEvent(new o.ViralExchangeItemModelEvent(o.ViralExchangeItemModelEvent.INBOX_ITEM_WILL_BE_DELETED,e)),this.dispatchEvent(new a.ViralExchangeModelEvent(a.ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED))),this._requestDroppedKeys.has(t)||this._requestDroppedKeys.set(t,1)},ViralExchangeModel.prototype.removeResponseItem=function(t){for(var e=null,n=0,i=this._response;n<i.length;n++){var r=i[n];if(r.key===t){e=r;break}}e&&(this._response.splice(this._response.indexOf(e),1),this.getUser(e.socialId).removeResponse(e.key),e.dispatchEvent(new o.ViralExchangeItemModelEvent(o.ViralExchangeItemModelEvent.INBOX_ITEM_WILL_BE_DELETED,e)),this.dispatchEvent(new a.ViralExchangeModelEvent(a.ViralExchangeModelEvent.RESPONSE_ITEMS_COUNT_CHANGED))),this._responseDroppedKeys.has(t)||this._responseDroppedKeys.set(t,1)},ViralExchangeModel.prototype.addResponseItem=function(t){if(!this._responseDroppedKeys.has(t.key)){for(var e=0,n=this._response;e<n.length;e++){if(n[e].key===t.key)return}var i=new h.ViralExchangeItemModel(t);this._response.push(i),this.addResponseToUser(i),this.dispatchEvent(new a.ViralExchangeModelEvent(a.ViralExchangeModelEvent.RESPONSE_ITEMS_COUNT_CHANGED))}},ViralExchangeModel.prototype.addRequestItem=function(t){if(!this._requestDroppedKeys.has(t.key)){for(var e=0,n=this._request;e<n.length;e++){if(n[e].key===t.key)return}var i=new h.ViralExchangeItemModel(t);this._request.push(i),this.addRequestToUser(i),this.dispatchEvent(new a.ViralExchangeModelEvent(a.ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED))}},ViralExchangeModel.prototype.addUserInSentList=function(t){this._sentList.push(new _.ViralExchangeSentListItemModel(t)),this.dispatchEvent(new a.ViralExchangeModelEvent(a.ViralExchangeModelEvent.SENT_LIST_ITEMS_COUNT_CHANGED))},ViralExchangeModel.prototype.getSentCount=function(e){return this._sentList.filter(function(t){return t.resourceId===e}).length},ViralExchangeModel.prototype.getSentCountByUser=function(e,n){return this._sentList.filter(function(t){return t.resourceId===e&&t.socialId===n}).length},ViralExchangeModel.prototype.isAvailableToSend=function(t,e){return 0===this.getSentCountByUser(e,t)},Object.defineProperty(ViralExchangeModel.prototype,"requestCount",{get:function(){for(var t=0,e=0,n=this._request;e<n.length;e++){var i=n[e];r.Application.dynamic.friends.getItem(i.socialId)&&t++}return t},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeModel.prototype,"responseCount",{get:function(){for(var t=0,e=0,n=this._response;e<n.length;e++){var i=n[e];r.Application.dynamic.friends.getItem(i.socialId)&&t++}return t},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeModel.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeModel.prototype,"response",{get:function(){return this._response},enumerable:!0,configurable:!0}),ViralExchangeModel.prototype.addResponseToUser=function(t){this.getUser(t.socialId).addResponse(t)},ViralExchangeModel.prototype.addRequestToUser=function(t){this.getUser(t.socialId).addRequest(t)},ViralExchangeModel.prototype.getUser=function(t){return this._users.has(t)||this._users.set(t,new n.ViralExchangeUserModel),this._users.get(t)},ViralExchangeModel}(uipixi.BaseEventTarget);e.ViralExchangeModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function ViralExchangeItemModel(t){var e=n.call(this)||this;return e._socialId=t.socialId,e._userId=t.userId,e._time=t.time,e._num=t.num,e._itemId=t.itemId,e._key=t.key,e}return o(ViralExchangeItemModel,n),Object.defineProperty(ViralExchangeItemModel.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeItemModel.prototype,"socialId",{get:function(){return this._socialId},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeItemModel.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeItemModel.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeItemModel.prototype,"num",{get:function(){return this._num},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeItemModel.prototype,"itemId",{get:function(){return this._itemId},enumerable:!0,configurable:!0}),ViralExchangeItemModel}(uipixi.BaseEventTarget);e.ViralExchangeItemModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ViralExchangeSentListItemModel(t){this._socialId=t.socialId,this._resourceId=t.resourceId}return Object.defineProperty(ViralExchangeSentListItemModel.prototype,"socialId",{get:function(){return this._socialId},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeSentListItemModel.prototype,"resourceId",{get:function(){return this._resourceId},enumerable:!0,configurable:!0}),ViralExchangeSentListItemModel}();e.ViralExchangeSentListItemModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(932)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function ViralExchangeUserModel(){var t=e.call(this)||this;return t._requestById=new core.Map,t._responseById=new core.Map,t}return a(ViralExchangeUserModel,e),ViralExchangeUserModel.prototype.getResponses=function(e){var n=[];return this._responseById.forEach(function(t){0<=e.indexOf(t.itemId)&&n.push(t)}),n},ViralExchangeUserModel.prototype.addResponse=function(t){this._responseById.has(t.key)||(this._responseById.set(t.key,t),this.dispatchEvent(new n.ViralExchangeUserModelEvent(n.ViralExchangeUserModelEvent.RESPONSE_COUNT_CHANGE)))},ViralExchangeUserModel.prototype.removeResponse=function(t){return!!this._responseById.has(t)&&(this._responseById.delete(t),!0)},ViralExchangeUserModel.prototype.getRequests=function(){var e=[];return this._requestById.forEach(function(t){return e.push(t)}),e},ViralExchangeUserModel.prototype.addRequest=function(t){this._requestById.has(t.key)||(this._requestById.set(t.key,t),this.dispatchEvent(new n.ViralExchangeUserModelEvent(n.ViralExchangeUserModelEvent.REQUEST_COUNT_CHANGE)))},ViralExchangeUserModel.prototype.removeRequest=function(t){return!!this._requestById.has(t)&&(this._requestById.delete(t),!0)},ViralExchangeUserModel}(uipixi.BaseEventTarget);e.ViralExchangeUserModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function ViralExchangeUserModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(ViralExchangeUserModelEvent,t),ViralExchangeUserModelEvent.RESPONSE_COUNT_CHANGE="ViralExchangeUserModelEvent.RESPONSE_COUNT_CHANGE",ViralExchangeUserModelEvent.REQUEST_COUNT_CHANGE="ViralExchangeUserModelEvent.REQUEST_COUNT_CHANGE",ViralExchangeUserModelEvent}(uipixi.BaseEvent);e.ViralExchangeUserModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AcceptAllViralPromise(){return t.call(this)||this}return a(AcceptAllViralPromise,t),AcceptAllViralPromise}(n.BasePromise);e.AcceptAllViralPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(935),n(48)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function AcceptAllViralCommand(){return null!==t&&t.apply(this,arguments)||this}return s(AcceptAllViralCommand,t),AcceptAllViralCommand.prototype.execute=function(t){return c(this,void 0,void 0,function(){var e,n;return u(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.AcceptAllViralAction)];case 1:for(n in(e=t.sent()).output.dropKeys)i.Application.model.viralExchange.removeResponseItem(e.output.dropKeys[n]);return i.Application.award.accrueAwardImmediately(e.output.award),i.Application.model.guides.dispatchEvent(new o.GuidesModelEvent(o.GuidesModelEvent.VIRAL_RESOURCE_ACCEPTED)),[2]}})})},AcceptAllViralCommand}(n.CommandBase);e.AcceptAllViralCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function AcceptAllViralAction(){var t=e.call(this)||this;return t.action="acceptAll",t.controller="viralExchange",t.input=new i.ActionInput,t.output=new o,t}return a(AcceptAllViralAction,e),AcceptAllViralAction}(n.Action);e.AcceptAllViralAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.dropKeys=t.data.dropKeys},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ResponseAllViralPromise(){return t.call(this)||this}return a(ResponseAllViralPromise,t),ResponseAllViralPromise}(n.BasePromise);e.ResponseAllViralPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(938),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function ResponseAllViralCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ResponseAllViralCommand,t),ResponseAllViralCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return[4,r.Application.server.send(new i.ResponseAllViralAction)];case 1:for(n in(e=t.sent()).output.dropKeys)r.Application.model.viralExchange.removeRequestItem(e.output.dropKeys[n]);return[2]}})})},ResponseAllViralCommand}(n.CommandBase);e.ResponseAllViralCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ResponseAllViralAction(){var t=e.call(this)||this;return t.action="responseAll",t.controller="viralExchange",t.input=new i.ActionInput,t.output=new o,t}return a(ResponseAllViralAction,e),ResponseAllViralAction}(n.Action);e.ResponseAllViralAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.dropKeys=t.data.dropKeys},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RequestViralPromise(t,e){var n=i.call(this)||this;return n.resourceId=t,n.friendsList=e,n}return a(RequestViralPromise,i),RequestViralPromise}(n.BasePromise);e.RequestViralPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},v=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(392),n(33),n(375),n(2)],void 0===(r=function(t,e,n,h,_,f,y,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RequestViralCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RequestViralCommand,t),RequestViralCommand.prototype.execute=function(d){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p,l;return v(this,function(t){switch(t.label){case 0:return e=h.Application.localization.localize(h.Application.model.resources.get(d.resourceId).static.notification,{gender:h.Application.profiles.current.isMale}),0!==(n=d.friendsList.filter(function(t){return"-"!==t[0]})).length&&h.Application.social.platformIs(f.PlatformType.OK,f.PlatformType.FB)?[4,h.Application.social.notify(n,e)]:[3,3];case 1:return l=t.sent(),l.success||l.limitReached?[3,3]:[4,h.Application.view.show(m.GUINames.CANT_SEND_VIRAL_NOTICE_WINDOW).onClose];case 2:return t.sent(),[2];case 3:return[4,h.Application.server.send(new _.RequestViralAction(d.resourceId,d.friendsList))];case 4:for(i=t.sent(),r=0,o=i.output.response;r<o.length;r++)a=o[r],h.Application.model.viralExchange.addResponseItem(a);for(c in s=0,i.output.successList)h.Application.model.viralExchange.addUserInSentList({resourceId:d.resourceId,socialId:i.output.successList[c]}),s++;if(0===n.length||!h.Application.social.platformIs(f.PlatformType.VK,f.PlatformType.VK_MOBILE))return[3,8];u=0,t.label=5;case 5:return u<3?void 0===(p=n[u])?[3,8]:[4,h.Application.social.notify([p],e)]:[3,8];case 6:if(!(l=t.sent()).success)return[3,8];t.label=7;case 7:return u++,[3,5];case 8:return 0<s&&this._data.dispatchEvent(new y.FlyViralRequestEvent(y.FlyViralRequestEvent.FLY_REQUEST,{itemId:d.resourceId,count:s})),[2]}})})},RequestViralCommand}(n.CommandBase);e.RequestViralCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function AcceptViralPromise(t){var e=n.call(this)||this;return e.key=t,e}return a(AcceptViralPromise,n),AcceptViralPromise}(n.BasePromise);e.AcceptViralPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(943),n(0),n(48)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AcceptViralCommand(){return null!==t&&t.apply(this,arguments)||this}return s(AcceptViralCommand,t),AcceptViralCommand.prototype.execute=function(i){return c(this,void 0,void 0,function(){var e,n;return u(this,function(t){switch(t.label){case 0:return[4,o.Application.server.send(new r.AcceptViralAction(i.key))];case 1:for(n in(e=t.sent()).output.dropKeys)o.Application.model.viralExchange.removeResponseItem(e.output.dropKeys[n]);return o.Application.award.accrueAwardImmediately(e.output.award),o.Application.model.guides.dispatchEvent(new a.GuidesModelEvent(a.GuidesModelEvent.VIRAL_RESOURCE_ACCEPTED)),[2]}})})},AcceptViralCommand}(n.CommandBase);e.AcceptViralCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function AcceptViralAction(t){var e=n.call(this)||this;return e.action="accept",e.controller="viralExchange",e.input=new i.ActionInput({responseId:t}),e.output=new o,e}return a(AcceptViralAction,n),AcceptViralAction}(n.Action);e.AcceptViralAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.dropKeys=t.data.dropKeys},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function ResponseViralPromise(t){var e=n.call(this)||this;return e.key=t,e}return a(ResponseViralPromise,n),ResponseViralPromise}(n.BasePromise);e.ResponseViralPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(946),n(0)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ResponseViralCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ResponseViralCommand,t),ResponseViralCommand.prototype.execute=function(i){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return[4,o.Application.server.send(new r.ResponseViralAction(i.key))];case 1:for(n in(e=t.sent()).output.dropKeys)o.Application.model.viralExchange.removeRequestItem(e.output.dropKeys[n]);return[2]}})})},ResponseViralCommand}(n.CommandBase);e.ResponseViralCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function ResponseViralAction(t){var e=n.call(this)||this;return e.action="response",e.controller="viralExchange",e.input=new i.ActionInput({requestId:t}),e.output=new o,e}return a(ResponseViralAction,n),ResponseViralAction}(n.Action);e.ResponseViralAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.dropKeys=t.data.dropKeys},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RequestViralAndInvitePromise(t,e){var n=i.call(this)||this;return n.resourceId=t,n.friendsList=e,n}return a(RequestViralAndInvitePromise,i),RequestViralAndInvitePromise}(n.BasePromise);e.RequestViralAndInvitePromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(392)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RequestViralAndInviteCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RequestViralAndInviteCommand,t),RequestViralAndInviteCommand.prototype.execute=function(i){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=r.Application.localization.localize("FRIEND_INVITE_NOTIFICATION_TEXT"),[4,r.Application.social.invite(i.friendsList,e)];case 1:return 0<(n=t.sent()).invited.length?[4,r.Application.server.send(new o.RequestViralAction(i.resourceId,n.invited))]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},RequestViralAndInviteCommand}(n.CommandBase);e.RequestViralAndInviteCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(950),n(952),n(953),n(955),n(959),n(961),n(964),n(967),n(968),n(983),n(1010),n(1027),n(1032),n(1034),n(1035),n(1038),n(1040),n(1042),n(1045),n(1048),n(1051),n(1057),n(1060),n(1063),n(1066),n(1069),n(1079),n(1080),n(1082),n(1084),n(1094),n(1102),n(1105),n(396),n(1114),n(1127),n(1128),n(1130),n(1132),n(1134),n(1141),n(1152),n(1154),n(1157),n(1159),n(1160),n(1164)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U,W,F,V,H,Y,Q,q,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var K=function(){function MainBodyStaticData(){}return MainBodyStaticData.parse=function(t){var e=new MainBodyStaticData;return e._parse(t),e},Object.defineProperty(MainBodyStaticData.prototype,"buildTime",{get:function(){return this._buildTime},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"resources",{get:function(){return this._resources},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"screens",{get:function(){return this._screens},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"userLevels",{get:function(){return this._userLevels},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"friends",{get:function(){return this._friends},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"boxes",{get:function(){return this._boxes},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"client",{get:function(){return this._client},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"npcs",{get:function(){return this._npcs},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"promos",{get:function(){return this._promos},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"shops",{get:function(){return this._shops},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"cashSegments",{get:function(){return this._cashSegments},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"clientShopsConfig",{get:function(){return this._clientShopsConfig},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"socialPromo",{get:function(){return this._socialPromo},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"wallposts",{get:function(){return this._wallposts},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"wallpostsAwards",{get:function(){return this._wallpostsAwards},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"bonuses",{get:function(){return this._bonuses},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"beauty",{get:function(){return this._beauty},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"generators",{get:function(){return this._generators},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"extraItems",{get:function(){return this._extraItems},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"extraItemsShops",{get:function(){return this._extraItemsShops},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"likes",{get:function(){return this._likes},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"toys",{get:function(){return this._toys},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"animals",{get:function(){return this._animals},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"mainLinks",{get:function(){return this._mainLinks},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"chests",{get:function(){return this._chests},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"mail",{get:function(){return this._mail},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"designObjects",{get:function(){return this._designObjects},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"quests",{get:function(){return this._quests},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"presents",{get:function(){return this._presents},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"achievements",{get:function(){return this._achievements},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"roulettes",{get:function(){return this._roulettes},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"workshop",{get:function(){return this._workshop},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"social",{get:function(){return this._social},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"notifications",{get:function(){return this._notifications},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"missions",{get:function(){return this._missions},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"appsMap",{get:function(){return this._appsMap},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"gladeDuels",{get:function(){return this._gladeDuels},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"farms",{get:function(){return this._farms},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"guides",{get:function(){return this._guides},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"viralExchange",{get:function(){return this._viralExchange},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"viralRefs",{get:function(){return this._viralRefs},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"happyNewYear",{get:function(){return this._happyNewYear},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"ratings",{get:function(){return this._ratings},enumerable:!0,configurable:!0}),Object.defineProperty(MainBodyStaticData.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),MainBodyStaticData.prototype._parse=function(t){this._buildTime=jQuery("> buildTime",t).first().text(),this._requirements=n.BaseRequirementsStaticData.parse(jQuery("> requirements",t).first()),this._prices=i.BasePricesStaticData.parse(jQuery("> prices",t).first()),this._awards=r.BaseAwardsStaticData.parse(jQuery("> awards",t).first()),this._resources=o.ResourcesStaticData.parse(jQuery("> resources",t).first()),this._screens=a.ScreenListStaticData.parse(jQuery("> screens",t).first()),this._objects=s.ObjectsStaticData.parse(jQuery("> objects",t).first()),this._userLevels=c.LevelsStaticData.parse(jQuery("> userLevels",t).first()),this._friends=u.FriendsStaticData.parse(jQuery("> friends",t).first()),this._boxes=p.BoxesBodyStaticData.parse(jQuery("> boxes",t).first()),this._client=l.ClientStaticData.parse(jQuery("> client",t).first()),this._npcs=d.NpcsTypeStaticData.parse(jQuery("> npcs",t).first()),this._promos=h.PromoListStaticData.parse(jQuery("> promos",t).first()),this._shops=_.ShopsListStaticData.parse(jQuery("> shops",t).first()),this._cashSegments=f.CashSegmentsStaticData.parse(jQuery("> cashSegments",t).first()),this._clientShopsConfig=y.ClientShopsConfigStaticData.parse(jQuery("> clientShopsConfig",t).first()),this._socialPromo=m.SocialPromoStaticData.parse(jQuery("> socialPromo",t).first()),this._wallposts=v.WallpostListStaticData.parse(jQuery("> wallposts",t).first()),this._wallpostsAwards=b.WallpostAwardsListStaticData.parse(jQuery("> wallpostsAwards",t).first()),this._bonuses=g.BonusesStaticData.parse(jQuery("> bonuses",t).first()),this._beauty=w.BeautyStaticData.parse(jQuery("> beauty",t).first()),this._generators=O.GeneratorsStaticData.parse(jQuery("> generators",t).first()),this._extraItems=S.ExtraItemsStaticData.parse(jQuery("> extraItems",t).first()),this._extraItemsShops=P.ExtraItemsShopsStaticData.parse(jQuery("> extraItemsShops",t).first()),this._likes=E.LikesStaticData.parse(jQuery("> likes",t).first()),this._toys=A.ToysStaticData.parse(jQuery("> toys",t).first()),this._animals=M.AnimalsStaticData.parse(jQuery("> animals",t).first()),this._mainLinks=D.HardCodeMainLinksStaticData.parse(jQuery("> mainLinks",t).first()),this._chests=I.ChestsStaticData.parse(jQuery("> chests",t).first()),this._mail=C.MailStaticData.parse(jQuery("> mail",t).first()),this._designObjects=T.DesignObjectsStaticData.parse(jQuery("> designObjects",t).first()),this._quests=j.QuestsStaticData.parse(jQuery("> quests",t).first()),this._presents=x.PresentsStaticData.parse(jQuery("> presents",t).first()),this._achievements=R.AchievementsStaticData.parse(jQuery("> achievements",t).first()),this._roulettes=N.RoulettesListStaticData.parse(jQuery("> roulettes",t).first()),this._workshop=L.WorkshopStaticData.parse(jQuery("> workshop",t).first()),this._social=k.SocialStaticData.parse(jQuery("> social",t).first()),this._notifications=B.NotificationsStaticData.parse(jQuery("> notifications",t).first()),this._missions=G.MissionsStaticData.parse(jQuery("> missions",t).first()),this._appsMap=U.AppsMapStaticData.parse(jQuery("> appsMap",t).first()),this._gladeDuels=W.GladeDuelStaticData.parse(jQuery("> gladeDuels",t).first()),this._farms=F.FarmListStaticData.parse(jQuery("> farms",t).first()),this._guides=V.GuidesStaticData.parse(jQuery("> guides",t).first()),this._viralExchange=H.ViralExchangeStaticData.parse(jQuery("> viralExchange",t).first()),this._viralRefs=Y.ViralRefsStaticData.parse(jQuery("> viralRefs",t).first()),this._happyNewYear=Q.HappyNewYearStaticData.parse(jQuery("> happyNewYear",t).first()),this._ratings=q.RatingsStaticData.parse(jQuery("> ratings",t).first()),this._events=z.EventsStaticData.parse(jQuery("> events",t).first())},MainBodyStaticData}();e.MainBodyStaticData=K}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(951),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BaseRequirementsStaticData(){}return BaseRequirementsStaticData.parse=function(t){var e=new BaseRequirementsStaticData;return e._parse(t),e},Object.defineProperty(BaseRequirementsStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),BaseRequirementsStaticData.prototype._parse=function(t){this._requirements=i.StaticDataCollection.parse(n.RequirementNamedListStaticData,t,"> requirements ")},BaseRequirementsStaticData}();e.BaseRequirementsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(24)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function RequirementNamedListStaticData(){return null!==e&&e.apply(this,arguments)||this}return a(RequirementNamedListStaticData,e),RequirementNamedListStaticData.parse=function(t){var e=new RequirementNamedListStaticData;return e._parse(t),e},Object.defineProperty(RequirementNamedListStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(RequirementNamedListStaticData.prototype,"id",{get:function(){return this._name},enumerable:!0,configurable:!0}),RequirementNamedListStaticData.prototype._parse=function(t){e.prototype._parse.call(this,t),this._name=jQuery(t).attr("name")},RequirementNamedListStaticData}(n.RequirementsTreeStaticData);e.RequirementNamedListStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(203),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BasePricesStaticData(){}return BasePricesStaticData.parse=function(t){var e=new BasePricesStaticData;return e._parse(t),e},Object.defineProperty(BasePricesStaticData.prototype,"price",{get:function(){return this._price},enumerable:!0,configurable:!0}),BasePricesStaticData.prototype._parse=function(t){this._price=i.StaticDataCollection.parse(n.NamedPriceStaticData,t,"> price ")},BasePricesStaticData}();e.BasePricesStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(954),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BaseAwardsStaticData(){}return BaseAwardsStaticData.parse=function(t){var e=new BaseAwardsStaticData;return e._parse(t),e},Object.defineProperty(BaseAwardsStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),BaseAwardsStaticData.prototype._parse=function(t){this._awards=i.StaticDataCollection.parse(n.AwardReferenceStaticData,t,"> awards ")},BaseAwardsStaticData}();e.BaseAwardsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(23)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AwardReferenceStaticData(){}return AwardReferenceStaticData.parse=function(t){var e=new AwardReferenceStaticData;return e._parse(t),e},Object.defineProperty(AwardReferenceStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AwardReferenceStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),AwardReferenceStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("name"),this._awards=n.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},AwardReferenceStaticData}();e.AwardReferenceStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(956),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ResourcesStaticData(){}return ResourcesStaticData.parse=function(t){var e=new ResourcesStaticData;return e._parse(t),e},Object.defineProperty(ResourcesStaticData.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),ResourcesStaticData.prototype._parse=function(t){this._resource=i.StaticDataCollection.parse(n.ResourceItemStaticData,t,"> resource ")},ResourcesStaticData}();e.ResourcesStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(393)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ResourceItemStaticData(){}return ResourceItemStaticData.parse=function(t){var e=new ResourceItemStaticData;return e._parse(t),e},Object.defineProperty(ResourceItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceItemStaticData.prototype,"statsName",{get:function(){return this._statsName},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceItemStaticData.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceItemStaticData.prototype,"offerId",{get:function(){return this._offerId},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceItemStaticData.prototype,"notification",{get:function(){return this._notification},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceItemStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),ResourceItemStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._statsName=jQuery(t).attr("statsName"),this._promoId=n.Utils.parseInt(jQuery(t).attr("promoId")),this._offerId=n.Utils.parseInt(jQuery(t).attr("offerId")),this._notification=jQuery(t).attr("notification"),this._view=i.ResourceViewTypeStaticData.parse(jQuery("> view",t).first())},ResourceItemStaticData}();e.ResourceItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function IconItemViewTypeStaticData(){}return IconItemViewTypeStaticData.parse=function(t){var e=new IconItemViewTypeStaticData;return e._parse(t),e},Object.defineProperty(IconItemViewTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(IconItemViewTypeStaticData.prototype,"resourceId",{get:function(){return this._resourceId},enumerable:!0,configurable:!0}),IconItemViewTypeStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._resourceId=jQuery(t).attr("resourceId")},IconItemViewTypeStaticData}();e.IconItemViewTypeStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function StringItemViewTypeStaticData(){}return StringItemViewTypeStaticData.parse=function(t){var e=new StringItemViewTypeStaticData;return e._parse(t),e},Object.defineProperty(StringItemViewTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(StringItemViewTypeStaticData.prototype,"keyId",{get:function(){return this._keyId},enumerable:!0,configurable:!0}),StringItemViewTypeStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._keyId=jQuery(t).attr("keyId")},StringItemViewTypeStaticData}();e.StringItemViewTypeStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(960),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ScreenListStaticData(){}return ScreenListStaticData.parse=function(t){var e=new ScreenListStaticData;return e._parse(t),e},Object.defineProperty(ScreenListStaticData.prototype,"startingScreen",{get:function(){return this._startingScreen},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenListStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),ScreenListStaticData.prototype._parse=function(t){this._startingScreen=jQuery("> startingScreen",t).first().text(),this._screen=i.StaticDataCollection.parse(n.ScreenStaticData,t,"> screen ")},ScreenListStaticData}();e.ScreenListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(23)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function ScreenStaticData(){}return ScreenStaticData.parse=function(t){var e=new ScreenStaticData;return e._parse(t),e},Object.defineProperty(ScreenStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenStaticData.prototype,"resourceId",{get:function(){return this._resourceId},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenStaticData.prototype,"workshopResourceId",{get:function(){return this._workshopResourceId},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenStaticData.prototype,"awardsNewUser",{get:function(){return this._awardsNewUser},enumerable:!0,configurable:!0}),Object.defineProperty(ScreenStaticData.prototype,"awardsOldUser",{get:function(){return this._awardsOldUser},enumerable:!0,configurable:!0}),ScreenStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._name=jQuery("> name",t).first().text(),this._resourceId=jQuery("> resourceId",t).first().text(),this._workshopResourceId=jQuery("> workshopResourceId",t).first().text(),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._awardsNewUser=r.AwardsTreeStaticData.parse(jQuery("> awardsNewUser",t).first()),this._awardsOldUser=r.AwardsTreeStaticData.parse(jQuery("> awardsOldUser",t).first())},ScreenStaticData}();e.ScreenStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(962),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ObjectsStaticData(){}return ObjectsStaticData.parse=function(t){var e=new ObjectsStaticData;return e._parse(t),e},Object.defineProperty(ObjectsStaticData.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),ObjectsStaticData.prototype._parse=function(t){this._object=i.StaticDataCollection.parse(n.ObjectItemStaticData,t,"> object ")},ObjectsStaticData}();e.ObjectsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(963),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function ObjectItemStaticData(){}return ObjectItemStaticData.parse=function(t){var e=new ObjectItemStaticData;return e._parse(t),e},Object.defineProperty(ObjectItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectItemStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectItemStaticData.prototype,"autoBuild",{get:function(){return this._autoBuild},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectItemStaticData.prototype,"hasSkins",{get:function(){return this._hasSkins},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectItemStaticData.prototype,"titleKey",{get:function(){return this._titleKey},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectItemStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),ObjectItemStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("name"),this._screen=n.Utils.parseInt(jQuery(t).attr("screen")),this._autoBuild=n.Utils.parseBool(jQuery(t).attr("autoBuild")),this._hasSkins=n.Utils.parseBool(jQuery(t).attr("hasSkins")),this._titleKey=jQuery("> titleKey",t).first().text(),this._stage=r.StaticDataCollection.parse(i.ObjectStageStaticData,t,"> stage ")},ObjectItemStaticData}();e.ObjectItemStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23),n(47),n(24)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function ObjectStageStaticData(){}return ObjectStageStaticData.parse=function(t){var e=new ObjectStageStaticData;return e._parse(t),e},Object.defineProperty(ObjectStageStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectStageStaticData.prototype,"exp",{get:function(){return this._exp},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectStageStaticData.prototype,"requiredBeautyStage",{get:function(){return this._requiredBeautyStage},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectStageStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectStageStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectStageStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectStageStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),ObjectStageStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._exp=jQuery(t).attr("exp"),this._requiredBeautyStage=n.Utils.parseInt(jQuery(t).attr("requiredBeautyStage")),this._wallpostId=n.Utils.parseInt(jQuery(t).attr("wallpostId")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first()),this._prices=r.PricesTreeStaticData.parse(jQuery("> prices",t).first()),this._requirements=o.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},ObjectStageStaticData}();e.ObjectStageStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(965)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function LevelsStaticData(){}return LevelsStaticData.parse=function(t){var e=new LevelsStaticData;return e._parse(t),e},Object.defineProperty(LevelsStaticData.prototype,"formula",{get:function(){return this._formula},enumerable:!0,configurable:!0}),Object.defineProperty(LevelsStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(LevelsStaticData.prototype,"levelUpWindowValue",{get:function(){return this._levelUpWindowValue},enumerable:!0,configurable:!0}),Object.defineProperty(LevelsStaticData.prototype,"dynamicAwards",{get:function(){return this._dynamicAwards},enumerable:!0,configurable:!0}),LevelsStaticData.prototype._parse=function(t){this._formula=jQuery("> formula",t).first().text(),this._wallpostId=n.Utils.parseInt(jQuery("> wallpostId",t).first().text()),this._levelUpWindowValue=n.Utils.parseInt(jQuery("> levelUpWindowValue",t).first().text()),this._dynamicAwards=i.DynamicAwardsDataStaticData.parse(jQuery("> dynamicAwards",t).first())},LevelsStaticData}();e.LevelsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(966)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DynamicAwardsDataStaticData(){}return DynamicAwardsDataStaticData.parse=function(t){var e=new DynamicAwardsDataStaticData;return e._parse(t),e},Object.defineProperty(DynamicAwardsDataStaticData.prototype,"dynamicAward",{get:function(){return this._dynamicAward},enumerable:!0,configurable:!0}),DynamicAwardsDataStaticData.prototype._parse=function(t){var n=this;this._dynamicAward=[],jQuery("> dynamicAward",t).each(function(t,e){n._dynamicAward.push(i.LevelAwardStaticData.parse(e))})},DynamicAwardsDataStaticData}();e.DynamicAwardsDataStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function LevelAwardStaticData(){}return LevelAwardStaticData.parse=function(t){var e=new LevelAwardStaticData;return e._parse(t),e},Object.defineProperty(LevelAwardStaticData.prototype,"even",{get:function(){return this._even},enumerable:!0,configurable:!0}),Object.defineProperty(LevelAwardStaticData.prototype,"notEven",{get:function(){return this._notEven},enumerable:!0,configurable:!0}),Object.defineProperty(LevelAwardStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),LevelAwardStaticData.prototype._parse=function(t){this._even=n.Utils.parseInt(jQuery(t).attr("even")),this._notEven=n.Utils.parseInt(jQuery(t).attr("notEven")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},LevelAwardStaticData}();e.LevelAwardStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function FriendsStaticData(){}return FriendsStaticData.parse=function(t){var e=new FriendsStaticData;return e._parse(t),e},Object.defineProperty(FriendsStaticData.prototype,"limit",{get:function(){return this._limit},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"inviteTimeout",{get:function(){return this._inviteTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"inviteLimit",{get:function(){return this._inviteLimit},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"likeListSize",{get:function(){return this._likeListSize},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"minFriends",{get:function(){return this._minFriends},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"neighbourMinLevel",{get:function(){return this._neighbourMinLevel},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"neighbourMaxFriends",{get:function(){return this._neighbourMaxFriends},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"neighbourSizeDay",{get:function(){return this._neighbourSizeDay},enumerable:!0,configurable:!0}),Object.defineProperty(FriendsStaticData.prototype,"neighbourDiffDays",{get:function(){return this._neighbourDiffDays},enumerable:!0,configurable:!0}),FriendsStaticData.prototype._parse=function(t){this._limit=n.Utils.parseInt(jQuery("> limit",t).first().text()),this._inviteTimeout=n.Utils.parseInt(jQuery("> inviteTimeout",t).first().text()),this._inviteLimit=n.Utils.parseInt(jQuery("> inviteLimit",t).first().text()),this._likeListSize=n.Utils.parseInt(jQuery("> likeListSize",t).first().text()),this._minFriends=n.Utils.parseInt(jQuery("> minFriends",t).first().text()),this._neighbourMinLevel=n.Utils.parseInt(jQuery("> neighbourMinLevel",t).first().text()),this._neighbourMaxFriends=n.Utils.parseInt(jQuery("> neighbourMaxFriends",t).first().text()),this._neighbourSizeDay=n.Utils.parseInt(jQuery("> neighbourSizeDay",t).first().text()),this._neighbourDiffDays=n.Utils.parseInt(jQuery("> neighbourDiffDays",t).first().text())},FriendsStaticData}();e.FriendsStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(969),n(980),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function BoxesBodyStaticData(){}return BoxesBodyStaticData.parse=function(t){var e=new BoxesBodyStaticData;return e._parse(t),e},Object.defineProperty(BoxesBodyStaticData.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(BoxesBodyStaticData.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),BoxesBodyStaticData.prototype._parse=function(t){this._config=n.BoxConfigStaticData.parse(jQuery("> config",t).first()),this._box=r.StaticDataCollection.parse(i.BoxStaticData,t,"> box ")},BoxesBodyStaticData}();e.BoxesBodyStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(970),n(972),n(974),n(977)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function BoxConfigStaticData(){}return BoxConfigStaticData.parse=function(t){var e=new BoxConfigStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigStaticData.prototype,"counters",{get:function(){return this._counters},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigStaticData.prototype,"formulas",{get:function(){return this._formulas},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigStaticData.prototype,"vars",{get:function(){return this._vars},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigStaticData.prototype,"history",{get:function(){return this._history},enumerable:!0,configurable:!0}),BoxConfigStaticData.prototype._parse=function(t){this._counters=n.BoxConfigCountersStaticData.parse(jQuery("> counters",t).first()),this._formulas=i.BoxConfigFormulasStaticData.parse(jQuery("> formulas",t).first()),this._vars=r.BoxConfigVarsStaticData.parse(jQuery("> vars",t).first()),this._history=o.HistoryConfigStaticData.parse(jQuery("> history",t).first())},BoxConfigStaticData}();e.BoxConfigStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(971)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BoxConfigCountersStaticData(){}return BoxConfigCountersStaticData.parse=function(t){var e=new BoxConfigCountersStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigCountersStaticData.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),BoxConfigCountersStaticData.prototype._parse=function(t){var n=this;this._item=[],jQuery("> item",t).each(function(t,e){n._item.push(i.BoxConfigCounterItemStaticData.parse(e))})},BoxConfigCountersStaticData}();e.BoxConfigCountersStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function BoxConfigCounterItemStaticData(){}return BoxConfigCounterItemStaticData.parse=function(t){var e=new BoxConfigCounterItemStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigCounterItemStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigCounterItemStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigCounterItemStaticData.prototype,"resourceId",{get:function(){return this._resourceId},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigCounterItemStaticData.prototype,"init",{get:function(){return this._init},enumerable:!0,configurable:!0}),BoxConfigCounterItemStaticData.prototype._parse=function(t){this._screenId=jQuery(t).attr("screenId"),this._type=jQuery(t).attr("type"),this._resourceId=jQuery(t).attr("resourceId"),this._init=n.Utils.parseInt(jQuery(t).attr("init"))},BoxConfigCounterItemStaticData}();e.BoxConfigCounterItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(973)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BoxConfigFormulasStaticData(){}return BoxConfigFormulasStaticData.parse=function(t){var e=new BoxConfigFormulasStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigFormulasStaticData.prototype,"formula",{get:function(){return this._formula},enumerable:!0,configurable:!0}),BoxConfigFormulasStaticData.prototype._parse=function(t){var n=this;this._formula=[],jQuery("> formula",t).each(function(t,e){n._formula.push(i.BoxConfigFormulaItemStaticData.parse(e))})},BoxConfigFormulasStaticData}();e.BoxConfigFormulasStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BoxConfigFormulaItemStaticData(){}return BoxConfigFormulaItemStaticData.parse=function(t){var e=new BoxConfigFormulaItemStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigFormulaItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigFormulaItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),BoxConfigFormulaItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._value=jQuery(t).attr("value")},BoxConfigFormulaItemStaticData}();e.BoxConfigFormulaItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(975)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function BoxConfigVarsStaticData(){}return BoxConfigVarsStaticData.parse=function(t){var e=new BoxConfigVarsStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigVarsStaticData.prototype,"K",{get:function(){return this._K},enumerable:!0,configurable:!0}),BoxConfigVarsStaticData.prototype._parse=function(t){this._K=n.BoxConfigVarKStaticData.parse(jQuery("> K",t).first())},BoxConfigVarsStaticData}();e.BoxConfigVarsStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(976)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BoxConfigVarKStaticData(){}return BoxConfigVarKStaticData.parse=function(t){var e=new BoxConfigVarKStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigVarKStaticData.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),BoxConfigVarKStaticData.prototype._parse=function(t){var n=this;this._item=[],jQuery("> item",t).each(function(t,e){n._item.push(i.BoxConfigVarKItemStaticData.parse(e))})},BoxConfigVarKStaticData}();e.BoxConfigVarKStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function BoxConfigVarKItemStaticData(){}return BoxConfigVarKItemStaticData.parse=function(t){var e=new BoxConfigVarKItemStaticData;return e._parse(t),e},Object.defineProperty(BoxConfigVarKItemStaticData.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigVarKItemStaticData.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(BoxConfigVarKItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),BoxConfigVarKItemStaticData.prototype._parse=function(t){this._min=jQuery(t).attr("min"),this._max=jQuery(t).attr("max"),this._value=n.Utils.parseInt(jQuery(t).attr("value"))},BoxConfigVarKItemStaticData}();e.BoxConfigVarKItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(978),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function HistoryConfigStaticData(){}return HistoryConfigStaticData.parse=function(t){var e=new HistoryConfigStaticData;return e._parse(t),e},Object.defineProperty(HistoryConfigStaticData.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),HistoryConfigStaticData.prototype._parse=function(t){this._box=i.StaticDataCollection.parse(n.HistoryBoxConfigStaticData,t,"> box ")},HistoryConfigStaticData}();e.HistoryConfigStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(979)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function HistoryBoxConfigStaticData(){}return HistoryBoxConfigStaticData.parse=function(t){var e=new HistoryBoxConfigStaticData;return e._parse(t),e},Object.defineProperty(HistoryBoxConfigStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(HistoryBoxConfigStaticData.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),HistoryBoxConfigStaticData.prototype._parse=function(t){var n=this;this._id=i.Utils.parseInt(jQuery(t).attr("id")),this._item=[],jQuery("> item",t).each(function(t,e){n._item.push(r.HistoryBoxitemConfigStaticData.parse(e))})},HistoryBoxConfigStaticData}();e.HistoryBoxConfigStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function HistoryBoxitemConfigStaticData(){}return HistoryBoxitemConfigStaticData.parse=function(t){var e=new HistoryBoxitemConfigStaticData;return e._parse(t),e},Object.defineProperty(HistoryBoxitemConfigStaticData.prototype,"resourceId",{get:function(){return this._resourceId},enumerable:!0,configurable:!0}),Object.defineProperty(HistoryBoxitemConfigStaticData.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(HistoryBoxitemConfigStaticData.prototype,"storeCount",{get:function(){return this._storeCount},enumerable:!0,configurable:!0}),HistoryBoxitemConfigStaticData.prototype._parse=function(t){this._resourceId=jQuery(t).attr("resourceId"),this._size=n.Utils.parseInt(jQuery(t).attr("size")),this._storeCount=n.Utils.parseBool(jQuery(t).attr("storeCount"))},HistoryBoxitemConfigStaticData}();e.HistoryBoxitemConfigStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(981),n(982),n(11)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function BoxStaticData(){}return BoxStaticData.parse=function(t){var e=new BoxStaticData;return e._parse(t),e},Object.defineProperty(BoxStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(BoxStaticData.prototype,"resourceId",{get:function(){return this._resourceId},enumerable:!0,configurable:!0}),Object.defineProperty(BoxStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(BoxStaticData.prototype,"rouletteWallpostId",{get:function(){return this._rouletteWallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(BoxStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(BoxStaticData.prototype,"stages",{get:function(){return this._stages},enumerable:!0,configurable:!0}),Object.defineProperty(BoxStaticData.prototype,"slots",{get:function(){return this._slots},enumerable:!0,configurable:!0}),BoxStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._resourceId=jQuery(t).attr("resourceId"),this._wallpostId=n.Utils.parseInt(jQuery(t).attr("wallpostId")),this._rouletteWallpostId=n.Utils.parseInt(jQuery(t).attr("rouletteWallpostId")),this._type=jQuery(t).attr("type"),this._stages=o.StaticDataCollection.parse(i.BoxStageStaticData,t,"> stages > stage"),this._slots=o.StaticDataCollection.parse(r.BoxSlotStaticData,t,"> slots > slot")},BoxStaticData}();e.BoxStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BoxStageStaticData(){}return BoxStageStaticData.parse=function(t){var e=new BoxStageStaticData;return e._parse(t),e},Object.defineProperty(BoxStageStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(BoxStageStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),BoxStageStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},BoxStageStaticData}();e.BoxStageStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BoxSlotStaticData(){}return BoxSlotStaticData.parse=function(t){var e=new BoxSlotStaticData;return e._parse(t),e},Object.defineProperty(BoxSlotStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(BoxSlotStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),BoxSlotStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},BoxSlotStaticData}();e.BoxSlotStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(984),n(986),n(988),n(998),n(1e3),n(1005),n(1007),n(11)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function ClientStaticData(){}return ClientStaticData.parse=function(t){var e=new ClientStaticData;return e._parse(t),e},Object.defineProperty(ClientStaticData.prototype,"renderers",{get:function(){return this._renderers},enumerable:!0,configurable:!0}),Object.defineProperty(ClientStaticData.prototype,"useEnergySpeed",{get:function(){return this._useEnergySpeed},enumerable:!0,configurable:!0}),Object.defineProperty(ClientStaticData.prototype,"skins",{get:function(){return this._skins},enumerable:!0,configurable:!0}),Object.defineProperty(ClientStaticData.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(ClientStaticData.prototype,"elka2019",{get:function(){return this._elka2019},enumerable:!0,configurable:!0}),Object.defineProperty(ClientStaticData.prototype,"minLevelParams",{get:function(){return this._minLevelParams},enumerable:!0,configurable:!0}),Object.defineProperty(ClientStaticData.prototype,"clientHelp",{get:function(){return this._clientHelp},enumerable:!0,configurable:!0}),ClientStaticData.prototype._parse=function(t){this._renderers=u.StaticDataCollection.parse(n.RenderersStaticData,t,"> renderers > renderers"),this._useEnergySpeed=i.UseEnergySpeedStaticData.parse(jQuery("> useEnergySpeed",t).first()),this._skins=r.SkinsStaticData.parse(jQuery("> skins",t).first()),this._params=o.ClientParamsListStaticData.parse(jQuery("> params",t).first()),this._elka2019=a.Elka2019ParamsStaticData.parse(jQuery("> elka2019",t).first()),this._minLevelParams=s.MinLevelParamsStaticData.parse(jQuery("> minLevelParams",t).first()),this._clientHelp=c.ClientHelpStaticData.parse(jQuery("> clientHelp",t).first())},ClientStaticData}();e.ClientStaticData=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(985),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RenderersStaticData(){}return RenderersStaticData.parse=function(t){var e=new RenderersStaticData;return e._parse(t),e},Object.defineProperty(RenderersStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(RenderersStaticData.prototype,"id",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(RenderersStaticData.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),RenderersStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type"),this._renderer=i.StaticDataCollection.parse(n.RendererItemStaticData,t,"> renderer ")},RenderersStaticData}();e.RenderersStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(393)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function RendererItemStaticData(){}return RendererItemStaticData.parse=function(t){var e=new RendererItemStaticData;return e._parse(t),e},Object.defineProperty(RendererItemStaticData.prototype,"itemId",{get:function(){return this._itemId},enumerable:!0,configurable:!0}),Object.defineProperty(RendererItemStaticData.prototype,"id",{get:function(){return this._itemId},enumerable:!0,configurable:!0}),Object.defineProperty(RendererItemStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),RendererItemStaticData.prototype._parse=function(t){this._itemId=jQuery(t).attr("itemId"),this._view=n.ResourceViewTypeStaticData.parse(jQuery("> view",t).first())},RendererItemStaticData}();e.RendererItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(987),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function UseEnergySpeedStaticData(){}return UseEnergySpeedStaticData.parse=function(t){var e=new UseEnergySpeedStaticData;return e._parse(t),e},Object.defineProperty(UseEnergySpeedStaticData.prototype,"interval",{get:function(){return this._interval},enumerable:!0,configurable:!0}),Object.defineProperty(UseEnergySpeedStaticData.prototype,"second",{get:function(){return this._second},enumerable:!0,configurable:!0}),UseEnergySpeedStaticData.prototype._parse=function(t){this._interval=n.Utils.parseInt(jQuery(t).attr("interval")),this._second=r.StaticDataCollection.parse(i.UseEnergySpeedSecondStaticData,t,"> second ")},UseEnergySpeedStaticData}();e.UseEnergySpeedStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function UseEnergySpeedSecondStaticData(){}return UseEnergySpeedSecondStaticData.parse=function(t){var e=new UseEnergySpeedSecondStaticData;return e._parse(t),e},Object.defineProperty(UseEnergySpeedSecondStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(UseEnergySpeedSecondStaticData.prototype,"wands",{get:function(){return this._wands},enumerable:!0,configurable:!0}),Object.defineProperty(UseEnergySpeedSecondStaticData.prototype,"stars",{get:function(){return this._stars},enumerable:!0,configurable:!0}),UseEnergySpeedSecondStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._wands=jQuery(t).attr("wands"),this._stars=n.Utils.parseFloat(jQuery(t).attr("stars"))},UseEnergySpeedSecondStaticData}();e.UseEnergySpeedSecondStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(989),n(994),n(996),n(11)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function SkinsStaticData(){}return SkinsStaticData.parse=function(t){var e=new SkinsStaticData;return e._parse(t),e},Object.defineProperty(SkinsStaticData.prototype,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),Object.defineProperty(SkinsStaticData.prototype,"spruceGarlands",{get:function(){return this._spruceGarlands},enumerable:!0,configurable:!0}),Object.defineProperty(SkinsStaticData.prototype,"spruceColors",{get:function(){return this._spruceColors},enumerable:!0,configurable:!0}),SkinsStaticData.prototype._parse=function(t){this._skin=o.StaticDataCollection.parse(n.SkinStaticData,t,"> skin "),this._spruceGarlands=i.SpruceGarlandsStaticData.parse(jQuery("> spruceGarlands",t).first()),this._spruceColors=r.SpruceColorsStaticData.parse(jQuery("> spruceColors",t).first())},SkinsStaticData}();e.SkinsStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(990),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function SkinStaticData(){}return SkinStaticData.parse=function(t){var e=new SkinStaticData;return e._parse(t),e},Object.defineProperty(SkinStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(SkinStaticData.prototype,"regexp",{get:function(){return this._regexp},enumerable:!0,configurable:!0}),Object.defineProperty(SkinStaticData.prototype,"skinPart",{get:function(){return this._skinPart},enumerable:!0,configurable:!0}),SkinStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._regexp=n.Utils.parseBool(jQuery(t).attr("regexp")),this._skinPart=r.StaticDataCollection.parse(i.SkinPartStaticData,t,"> skinPart ")},SkinStaticData}();e.SkinStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(991),n(992),n(11)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SkinPartStaticData(){}return SkinPartStaticData.parse=function(t){var e=new SkinPartStaticData;return e._parse(t),e},Object.defineProperty(SkinPartStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(SkinPartStaticData.prototype,"reset",{get:function(){return this._reset},enumerable:!0,configurable:!0}),Object.defineProperty(SkinPartStaticData.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),SkinPartStaticData.prototype._parse=function(t){var n=this;this._id=jQuery(t).attr("id"),this._reset=[],jQuery("> reset",t).each(function(t,e){n._reset.push(i.ResetPartItemStaticData.parse(e))}),this._item=o.StaticDataCollection.parse(r.SkinPartItemStaticData,t,"> item ")},SkinPartStaticData}();e.SkinPartStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(395)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResetPartItemStaticData(){}return ResetPartItemStaticData.parse=function(t){var e=new ResetPartItemStaticData;return e._parse(t),e},Object.defineProperty(ResetPartItemStaticData.prototype,"attachment",{get:function(){return this._attachment},enumerable:!0,configurable:!0}),ResetPartItemStaticData.prototype._parse=function(t){var n=this;this._attachment=[],jQuery("> attachment",t).each(function(t,e){n._attachment.push(i.SkinPartAttachmentItemStaticData.parse(e))})},ResetPartItemStaticData}();e.ResetPartItemStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(993),n(395)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SkinPartItemStaticData(){}return SkinPartItemStaticData.parse=function(t){var e=new SkinPartItemStaticData;return e._parse(t),e},Object.defineProperty(SkinPartItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(SkinPartItemStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(SkinPartItemStaticData.prototype,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),Object.defineProperty(SkinPartItemStaticData.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(SkinPartItemStaticData.prototype,"attachment",{get:function(){return this._attachment},enumerable:!0,configurable:!0}),SkinPartItemStaticData.prototype._parse=function(t){var n=this;this._id=i.Utils.parseInt(jQuery(t).attr("id")),this._type=jQuery(t).attr("type"),this._skin=jQuery("> skin",t).first().text(),this._animation=[],jQuery("> animation",t).each(function(t,e){n._animation.push(r.SkinPartAnimationItemStaticData.parse(e))}),this._attachment=[],jQuery("> attachment",t).each(function(t,e){n._attachment.push(o.SkinPartAttachmentItemStaticData.parse(e))})},SkinPartItemStaticData}();e.SkinPartItemStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SkinPartAnimationItemStaticData(){}return SkinPartAnimationItemStaticData.parse=function(t){var e=new SkinPartAnimationItemStaticData;return e._parse(t),e},Object.defineProperty(SkinPartAnimationItemStaticData.prototype,"n",{get:function(){return this._n},enumerable:!0,configurable:!0}),SkinPartAnimationItemStaticData.prototype._parse=function(t){this._n=jQuery(t).attr("n")},SkinPartAnimationItemStaticData}();e.SkinPartAnimationItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(995)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SpruceGarlandsStaticData(){}return SpruceGarlandsStaticData.parse=function(t){var e=new SpruceGarlandsStaticData;return e._parse(t),e},Object.defineProperty(SpruceGarlandsStaticData.prototype,"extraItemType",{get:function(){return this._extraItemType},enumerable:!0,configurable:!0}),Object.defineProperty(SpruceGarlandsStaticData.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),SpruceGarlandsStaticData.prototype._parse=function(t){var n=this;this._extraItemType=jQuery(t).attr("extraItemType"),this._item=[],jQuery("> item",t).each(function(t,e){n._item.push(i.SpruceGarlandsTypeStaticData.parse(e))})},SpruceGarlandsStaticData}();e.SpruceGarlandsStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function SpruceGarlandsTypeStaticData(){}return SpruceGarlandsTypeStaticData.parse=function(t){var e=new SpruceGarlandsTypeStaticData;return e._parse(t),e},Object.defineProperty(SpruceGarlandsTypeStaticData.prototype,"extraItemId",{get:function(){return this._extraItemId},enumerable:!0,configurable:!0}),Object.defineProperty(SpruceGarlandsTypeStaticData.prototype,"spine",{get:function(){return this._spine},enumerable:!0,configurable:!0}),SpruceGarlandsTypeStaticData.prototype._parse=function(t){this._extraItemId=n.Utils.parseInt(jQuery(t).attr("extraItemId")),this._spine=jQuery(t).attr("spine")},SpruceGarlandsTypeStaticData}();e.SpruceGarlandsTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(997),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function SpruceColorsStaticData(){}return SpruceColorsStaticData.parse=function(t){var e=new SpruceColorsStaticData;return e._parse(t),e},Object.defineProperty(SpruceColorsStaticData.prototype,"extraItemType",{get:function(){return this._extraItemType},enumerable:!0,configurable:!0}),Object.defineProperty(SpruceColorsStaticData.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),SpruceColorsStaticData.prototype._parse=function(t){this._extraItemType=jQuery(t).attr("extraItemType"),this._item=i.StaticDataCollection.parse(n.SpruceColorsTypeStaticData,t,"> item ")},SpruceColorsStaticData}();e.SpruceColorsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function SpruceColorsTypeStaticData(){}return SpruceColorsTypeStaticData.parse=function(t){var e=new SpruceColorsTypeStaticData;return e._parse(t),e},Object.defineProperty(SpruceColorsTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(SpruceColorsTypeStaticData.prototype,"extraItemId",{get:function(){return this._extraItemId},enumerable:!0,configurable:!0}),Object.defineProperty(SpruceColorsTypeStaticData.prototype,"red",{get:function(){return this._red},enumerable:!0,configurable:!0}),Object.defineProperty(SpruceColorsTypeStaticData.prototype,"green",{get:function(){return this._green},enumerable:!0,configurable:!0}),Object.defineProperty(SpruceColorsTypeStaticData.prototype,"blue",{get:function(){return this._blue},enumerable:!0,configurable:!0}),SpruceColorsTypeStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._extraItemId=n.Utils.parseInt(jQuery(t).attr("extraItemId")),this._red=jQuery("> red",t).first().text(),this._green=jQuery("> green",t).first().text(),this._blue=jQuery("> blue",t).first().text()},SpruceColorsTypeStaticData}();e.SpruceColorsTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(999),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ClientParamsListStaticData(){}return ClientParamsListStaticData.parse=function(t){var e=new ClientParamsListStaticData;return e._parse(t),e},Object.defineProperty(ClientParamsListStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),ClientParamsListStaticData.prototype._parse=function(t){this._param=i.StaticDataCollection.parse(n.ClientParamItemStaticData,t,"> param ")},ClientParamsListStaticData}();e.ClientParamsListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ClientParamItemStaticData(){}return ClientParamItemStaticData.parse=function(t){var e=new ClientParamItemStaticData;return e._parse(t),e},Object.defineProperty(ClientParamItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamItemStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamItemStaticData.prototype,"init",{get:function(){return this._init},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamItemStaticData.prototype,"minLength",{get:function(){return this._minLength},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamItemStaticData.prototype,"maxLength",{get:function(){return this._maxLength},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamItemStaticData.prototype,"regularExp",{get:function(){return this._regularExp},enumerable:!0,configurable:!0}),Object.defineProperty(ClientParamItemStaticData.prototype,"public",{get:function(){return this._public},enumerable:!0,configurable:!0}),ClientParamItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._type=jQuery(t).attr("type"),this._init=jQuery(t).attr("init"),this._minLength=jQuery(t).attr("minLength"),this._maxLength=jQuery(t).attr("maxLength"),this._regularExp=jQuery(t).attr("regularExp"),this._public=n.Utils.parseBool(jQuery(t).attr("public"))},ClientParamItemStaticData}();e.ClientParamItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1001),n(1003)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function Elka2019ParamsStaticData(){}return Elka2019ParamsStaticData.parse=function(t){var e=new Elka2019ParamsStaticData;return e._parse(t),e},Object.defineProperty(Elka2019ParamsStaticData.prototype,"presentIds",{get:function(){return this._presentIds},enumerable:!0,configurable:!0}),Object.defineProperty(Elka2019ParamsStaticData.prototype,"serverHosts",{get:function(){return this._serverHosts},enumerable:!0,configurable:!0}),Elka2019ParamsStaticData.prototype._parse=function(t){this._presentIds=n.PresentIdsStaticData.parse(jQuery("> presentIds",t).first()),this._serverHosts=i.ServerHostsStaticData.parse(jQuery("> serverHosts",t).first())},Elka2019ParamsStaticData}();e.Elka2019ParamsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1002),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function PresentIdsStaticData(){}return PresentIdsStaticData.parse=function(t){var e=new PresentIdsStaticData;return e._parse(t),e},Object.defineProperty(PresentIdsStaticData.prototype,"quest",{get:function(){return this._quest},enumerable:!0,configurable:!0}),PresentIdsStaticData.prototype._parse=function(t){this._quest=i.StaticDataCollection.parse(n.QuestPresentIdStaticData,t,"> quest ")},PresentIdsStaticData}();e.PresentIdsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function QuestPresentIdStaticData(){}return QuestPresentIdStaticData.parse=function(t){var e=new QuestPresentIdStaticData;return e._parse(t),e},Object.defineProperty(QuestPresentIdStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPresentIdStaticData.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),QuestPresentIdStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._body=jQuery(t).text()},QuestPresentIdStaticData}();e.QuestPresentIdStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1004),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ServerHostsStaticData(){}return ServerHostsStaticData.parse=function(t){var e=new ServerHostsStaticData;return e._parse(t),e},Object.defineProperty(ServerHostsStaticData.prototype,"serverHost",{get:function(){return this._serverHost},enumerable:!0,configurable:!0}),ServerHostsStaticData.prototype._parse=function(t){this._serverHost=i.StaticDataCollection.parse(n.ServerHostStaticData,t,"> serverHost ")},ServerHostsStaticData}();e.ServerHostsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ServerHostStaticData(){}return ServerHostStaticData.parse=function(t){var e=new ServerHostStaticData;return e._parse(t),e},Object.defineProperty(ServerHostStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ServerHostStaticData.prototype,"appUrl",{get:function(){return this._appUrl},enumerable:!0,configurable:!0}),Object.defineProperty(ServerHostStaticData.prototype,"serverUrl",{get:function(){return this._serverUrl},enumerable:!0,configurable:!0}),ServerHostStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._appUrl=jQuery("> appUrl",t).first().text(),this._serverUrl=jQuery("> serverUrl",t).first().text()},ServerHostStaticData}();e.ServerHostStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1006),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function MinLevelParamsStaticData(){}return MinLevelParamsStaticData.parse=function(t){var e=new MinLevelParamsStaticData;return e._parse(t),e},Object.defineProperty(MinLevelParamsStaticData.prototype,"minLevelParam",{get:function(){return this._minLevelParam},enumerable:!0,configurable:!0}),MinLevelParamsStaticData.prototype._parse=function(t){this._minLevelParam=i.StaticDataCollection.parse(n.MinLevelParamStaticData,t,"> minLevelParam ")},MinLevelParamsStaticData}();e.MinLevelParamsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(24)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function MinLevelParamStaticData(){}return MinLevelParamStaticData.parse=function(t){var e=new MinLevelParamStaticData;return e._parse(t),e},Object.defineProperty(MinLevelParamStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(MinLevelParamStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),MinLevelParamStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._requirements=n.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},MinLevelParamStaticData}();e.MinLevelParamStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1008),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ClientHelpStaticData(){}return ClientHelpStaticData.parse=function(t){var e=new ClientHelpStaticData;return e._parse(t),e},Object.defineProperty(ClientHelpStaticData.prototype,"help",{get:function(){return this._help},enumerable:!0,configurable:!0}),ClientHelpStaticData.prototype._parse=function(t){this._help=i.StaticDataCollection.parse(n.ClientHelpItemStaticData,t,"> help ")},ClientHelpStaticData}();e.ClientHelpStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1009)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ClientHelpItemStaticData(){}return ClientHelpItemStaticData.parse=function(t){var e=new ClientHelpItemStaticData;return e._parse(t),e},Object.defineProperty(ClientHelpItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ClientHelpItemStaticData.prototype,"windowId",{get:function(){return this._windowId},enumerable:!0,configurable:!0}),Object.defineProperty(ClientHelpItemStaticData.prototype,"clientParamId",{get:function(){return this._clientParamId},enumerable:!0,configurable:!0}),Object.defineProperty(ClientHelpItemStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(ClientHelpItemStaticData.prototype,"button",{get:function(){return this._button},enumerable:!0,configurable:!0}),Object.defineProperty(ClientHelpItemStaticData.prototype,"page",{get:function(){return this._page},enumerable:!0,configurable:!0}),ClientHelpItemStaticData.prototype._parse=function(t){var n=this;this._id=i.Utils.parseInt(jQuery(t).attr("id")),this._windowId=jQuery(t).attr("windowId"),this._clientParamId=i.Utils.parseInt(jQuery(t).attr("clientParamId")),this._title=jQuery("> title",t).first().text(),this._button=jQuery("> button",t).first().text(),this._page=[],jQuery("> page",t).each(function(t,e){n._page.push(r.ClientHelpPageStaticData.parse(e))})},ClientHelpItemStaticData}();e.ClientHelpItemStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ClientHelpPageStaticData(){}return ClientHelpPageStaticData.parse=function(t){var e=new ClientHelpPageStaticData;return e._parse(t),e},Object.defineProperty(ClientHelpPageStaticData.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(ClientHelpPageStaticData.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),ClientHelpPageStaticData.prototype._parse=function(t){this._image=jQuery(t).attr("image"),this._text=jQuery(t).attr("text")},ClientHelpPageStaticData}();e.ClientHelpPageStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1011),n(1015),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function NpcsTypeStaticData(){}return NpcsTypeStaticData.parse=function(t){var e=new NpcsTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcsTypeStaticData.prototype,"npc",{get:function(){return this._npc},enumerable:!0,configurable:!0}),Object.defineProperty(NpcsTypeStaticData.prototype,"screens",{get:function(){return this._screens},enumerable:!0,configurable:!0}),NpcsTypeStaticData.prototype._parse=function(t){this._npc=r.StaticDataCollection.parse(n.NpcTypeStaticData,t,"> npc "),this._screens=i.NpcScreensStaticData.parse(jQuery("> screens",t).first())},NpcsTypeStaticData}();e.NpcsTypeStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1012),n(1013)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function NpcTypeStaticData(){}return NpcTypeStaticData.parse=function(t){var e=new NpcTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(NpcTypeStaticData.prototype,"profile",{get:function(){return this._profile},enumerable:!0,configurable:!0}),Object.defineProperty(NpcTypeStaticData.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),NpcTypeStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._profile=n.NpcProfileTypeStaticData.parse(jQuery("> profile",t).first()),this._params=i.NpcParamsListTypeStaticData.parse(jQuery("> params",t).first())},NpcTypeStaticData}();e.NpcTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function NpcProfileTypeStaticData(){}return NpcProfileTypeStaticData.parse=function(t){var e=new NpcProfileTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcProfileTypeStaticData.prototype,"gender",{get:function(){return this._gender},enumerable:!0,configurable:!0}),Object.defineProperty(NpcProfileTypeStaticData.prototype,"firstName",{get:function(){return this._firstName},enumerable:!0,configurable:!0}),Object.defineProperty(NpcProfileTypeStaticData.prototype,"lastName",{get:function(){return this._lastName},enumerable:!0,configurable:!0}),Object.defineProperty(NpcProfileTypeStaticData.prototype,"photo_50",{get:function(){return this._photo_50},enumerable:!0,configurable:!0}),NpcProfileTypeStaticData.prototype._parse=function(t){this._gender=jQuery(t).attr("gender"),this._firstName=jQuery(t).attr("firstName"),this._lastName=jQuery(t).attr("lastName"),this._photo_50=jQuery(t).attr("photo_50")},NpcProfileTypeStaticData}();e.NpcProfileTypeStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1014)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function NpcParamsListTypeStaticData(){}return NpcParamsListTypeStaticData.parse=function(t){var e=new NpcParamsListTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcParamsListTypeStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),NpcParamsListTypeStaticData.prototype._parse=function(t){var n=this;this._param=[],jQuery("> param",t).each(function(t,e){n._param.push(i.NpcParamTypeStaticData.parse(e))})},NpcParamsListTypeStaticData}();e.NpcParamsListTypeStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NpcParamTypeStaticData(){}return NpcParamTypeStaticData.parse=function(t){var e=new NpcParamTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcParamTypeStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(NpcParamTypeStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),NpcParamTypeStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type"),this._value=n.Utils.parseFloat(jQuery(t).attr("value"))},NpcParamTypeStaticData}();e.NpcParamTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1016),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function NpcScreensStaticData(){}return NpcScreensStaticData.parse=function(t){var e=new NpcScreensStaticData;return e._parse(t),e},Object.defineProperty(NpcScreensStaticData.prototype,"npc",{get:function(){return this._npc},enumerable:!0,configurable:!0}),NpcScreensStaticData.prototype._parse=function(t){this._npc=i.StaticDataCollection.parse(n.NpcScreenNpcTypeStaticData,t,"> npc ")},NpcScreensStaticData}();e.NpcScreensStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1017),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function NpcScreenNpcTypeStaticData(){}return NpcScreenNpcTypeStaticData.parse=function(t){var e=new NpcScreenNpcTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcScreenNpcTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(NpcScreenNpcTypeStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),NpcScreenNpcTypeStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._screen=i.StaticDataCollection.parse(n.NpcScreenTypeStaticData,t,"> screen ")},NpcScreenNpcTypeStaticData}();e.NpcScreenNpcTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1018),n(1020),n(1021),n(1023),n(1025)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function NpcScreenTypeStaticData(){}return NpcScreenTypeStaticData.parse=function(t){var e=new NpcScreenTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcScreenTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(NpcScreenTypeStaticData.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),Object.defineProperty(NpcScreenTypeStaticData.prototype,"animal",{get:function(){return this._animal},enumerable:!0,configurable:!0}),Object.defineProperty(NpcScreenTypeStaticData.prototype,"extraItems",{get:function(){return this._extraItems},enumerable:!0,configurable:!0}),Object.defineProperty(NpcScreenTypeStaticData.prototype,"toys",{get:function(){return this._toys},enumerable:!0,configurable:!0}),Object.defineProperty(NpcScreenTypeStaticData.prototype,"designObjects",{get:function(){return this._designObjects},enumerable:!0,configurable:!0}),NpcScreenTypeStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._objects=i.NpcObjectsListTypeStaticData.parse(jQuery("> objects",t).first()),this._animal=r.NpcAnimalItemStaticData.parse(jQuery("> animal",t).first()),this._extraItems=o.NpcActiveExtraItemsListTypeStaticData.parse(jQuery("> extraItems",t).first()),this._toys=a.NpcToysListTypeStaticData.parse(jQuery("> toys",t).first()),this._designObjects=s.NpcDesignObjectsListTypeStaticData.parse(jQuery("> designObjects",t).first())},NpcScreenTypeStaticData}();e.NpcScreenTypeStaticData=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1019),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function NpcObjectsListTypeStaticData(){}return NpcObjectsListTypeStaticData.parse=function(t){var e=new NpcObjectsListTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcObjectsListTypeStaticData.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),NpcObjectsListTypeStaticData.prototype._parse=function(t){this._object=i.StaticDataCollection.parse(n.NpcObjectTypeStaticData,t,"> object ")},NpcObjectsListTypeStaticData}();e.NpcObjectsListTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NpcObjectTypeStaticData(){}return NpcObjectTypeStaticData.parse=function(t){var e=new NpcObjectTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcObjectTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(NpcObjectTypeStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),NpcObjectTypeStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._stage=n.Utils.parseInt(jQuery(t).attr("stage"))},NpcObjectTypeStaticData}();e.NpcObjectTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NpcAnimalItemStaticData(){}return NpcAnimalItemStaticData.parse=function(t){var e=new NpcAnimalItemStaticData;return e._parse(t),e},Object.defineProperty(NpcAnimalItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(NpcAnimalItemStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),NpcAnimalItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._stage=n.Utils.parseInt(jQuery(t).attr("stage"))},NpcAnimalItemStaticData}();e.NpcAnimalItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1022),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function NpcActiveExtraItemsListTypeStaticData(){}return NpcActiveExtraItemsListTypeStaticData.parse=function(t){var e=new NpcActiveExtraItemsListTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcActiveExtraItemsListTypeStaticData.prototype,"extraItem",{get:function(){return this._extraItem},enumerable:!0,configurable:!0}),NpcActiveExtraItemsListTypeStaticData.prototype._parse=function(t){this._extraItem=i.StaticDataCollection.parse(n.NpcActiveExtraItemTypeStaticData,t,"> extraItem ")},NpcActiveExtraItemsListTypeStaticData}();e.NpcActiveExtraItemsListTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NpcActiveExtraItemTypeStaticData(){}return NpcActiveExtraItemTypeStaticData.parse=function(t){var e=new NpcActiveExtraItemTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcActiveExtraItemTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(NpcActiveExtraItemTypeStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),NpcActiveExtraItemTypeStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._type=jQuery(t).attr("type")},NpcActiveExtraItemTypeStaticData}();e.NpcActiveExtraItemTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1024)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function NpcToysListTypeStaticData(){}return NpcToysListTypeStaticData.parse=function(t){var e=new NpcToysListTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcToysListTypeStaticData.prototype,"toy",{get:function(){return this._toy},enumerable:!0,configurable:!0}),NpcToysListTypeStaticData.prototype._parse=function(t){var n=this;this._toy=[],jQuery("> toy",t).each(function(t,e){n._toy.push(i.NpcToyItemTypeStaticData.parse(e))})},NpcToysListTypeStaticData}();e.NpcToysListTypeStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NpcToyItemTypeStaticData(){}return NpcToyItemTypeStaticData.parse=function(t){var e=new NpcToyItemTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcToyItemTypeStaticData.prototype,"toyId",{get:function(){return this._toyId},enumerable:!0,configurable:!0}),Object.defineProperty(NpcToyItemTypeStaticData.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(NpcToyItemTypeStaticData.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(NpcToyItemTypeStaticData.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),Object.defineProperty(NpcToyItemTypeStaticData.prototype,"zIndex",{get:function(){return this._zIndex},enumerable:!0,configurable:!0}),Object.defineProperty(NpcToyItemTypeStaticData.prototype,"flip",{get:function(){return this._flip},enumerable:!0,configurable:!0}),Object.defineProperty(NpcToyItemTypeStaticData.prototype,"scale",{get:function(){return this._scale},enumerable:!0,configurable:!0}),Object.defineProperty(NpcToyItemTypeStaticData.prototype,"rotation",{get:function(){return this._rotation},enumerable:!0,configurable:!0}),NpcToyItemTypeStaticData.prototype._parse=function(t){this._toyId=n.Utils.parseInt(jQuery(t).attr("toyId")),this._x=n.Utils.parseInt(jQuery(t).attr("x")),this._y=n.Utils.parseInt(jQuery(t).attr("y")),this._location=n.Utils.parseInt(jQuery(t).attr("location")),this._zIndex=n.Utils.parseInt(jQuery(t).attr("zIndex")),this._flip=n.Utils.parseInt(jQuery(t).attr("flip")),this._scale=n.Utils.parseInt(jQuery(t).attr("scale")),this._rotation=n.Utils.parseInt(jQuery(t).attr("rotation"))},NpcToyItemTypeStaticData}();e.NpcToyItemTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1026),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function NpcDesignObjectsListTypeStaticData(){}return NpcDesignObjectsListTypeStaticData.parse=function(t){var e=new NpcDesignObjectsListTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcDesignObjectsListTypeStaticData.prototype,"designObject",{get:function(){return this._designObject},enumerable:!0,configurable:!0}),NpcDesignObjectsListTypeStaticData.prototype._parse=function(t){this._designObject=i.StaticDataCollection.parse(n.NpcDesignObjectItemTypeStaticData,t,"> designObject ")},NpcDesignObjectsListTypeStaticData}();e.NpcDesignObjectsListTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NpcDesignObjectItemTypeStaticData(){}return NpcDesignObjectItemTypeStaticData.parse=function(t){var e=new NpcDesignObjectItemTypeStaticData;return e._parse(t),e},Object.defineProperty(NpcDesignObjectItemTypeStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(NpcDesignObjectItemTypeStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(NpcDesignObjectItemTypeStaticData.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),NpcDesignObjectItemTypeStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._stage=n.Utils.parseInt(jQuery(t).attr("stage")),this._options=jQuery(t).attr("options")},NpcDesignObjectItemTypeStaticData}();e.NpcDesignObjectItemTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1028),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function PromoListStaticData(){}return PromoListStaticData.parse=function(t){var e=new PromoListStaticData;return e._parse(t),e},Object.defineProperty(PromoListStaticData.prototype,"promo",{get:function(){return this._promo},enumerable:!0,configurable:!0}),PromoListStaticData.prototype._parse=function(t){this._promo=i.StaticDataCollection.parse(n.PromoItemStaticData,t,"> promo ")},PromoListStaticData}();e.PromoListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(1029),n(1031),n(11)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function PromoItemStaticData(){}return PromoItemStaticData.parse=function(t){var e=new PromoItemStaticData;return e._parse(t),e},Object.defineProperty(PromoItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"expire",{get:function(){return this._expire},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"excluded",{get:function(){return this._excluded},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"directPurchase",{get:function(){return this._directPurchase},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"multiOffer",{get:function(){return this._multiOffer},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"buyRequirements",{get:function(){return this._buyRequirements},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"offers",{get:function(){return this._offers},enumerable:!0,configurable:!0}),Object.defineProperty(PromoItemStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),PromoItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._duration=n.Utils.parseInt(jQuery(t).attr("duration")),this._expire=jQuery(t).attr("expire"),this._excluded=n.Utils.parseInt(jQuery(t).attr("excluded")),this._directPurchase=n.Utils.parseBool(jQuery("> directPurchase",t).first().text()),this._multiOffer=n.Utils.parseBool(jQuery("> multiOffer",t).first().text()),this._title=jQuery("> title",t).first().text(),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._buyRequirements=i.RequirementsTreeStaticData.parse(jQuery("> buyRequirements",t).first()),this._offers=a.StaticDataCollection.parse(r.PromoOfferStaticData,t,"> offers > offer"),this._view=o.PromoViewTypeStaticData.parse(jQuery("> view",t).first())},PromoItemStaticData}();e.PromoItemStaticData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(23),n(47),n(1030)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function PromoOfferStaticData(){}return PromoOfferStaticData.parse=function(t){var e=new PromoOfferStaticData;return e._parse(t),e},Object.defineProperty(PromoOfferStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferStaticData.prototype,"buyRequirements",{get:function(){return this._buyRequirements},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),PromoOfferStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._buyRequirements=i.RequirementsTreeStaticData.parse(jQuery("> buyRequirements",t).first()),this._awards=r.AwardsTreeStaticData.parse(jQuery("> awards",t).first()),this._prices=o.PricesTreeStaticData.parse(jQuery("> prices",t).first()),this._view=a.PromoOfferViewTypeStaticData.parse(jQuery("> view",t).first()),this._title=jQuery("> title",t).first().text()},PromoOfferStaticData}();e.PromoOfferStaticData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function PromoOfferViewTypeStaticData(){}return PromoOfferViewTypeStaticData.parse=function(t){var e=new PromoOfferViewTypeStaticData;return e._parse(t),e},Object.defineProperty(PromoOfferViewTypeStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferViewTypeStaticData.prototype,"baseValue",{get:function(){return this._baseValue},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferViewTypeStaticData.prototype,"bonusValue",{get:function(){return this._bonusValue},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferViewTypeStaticData.prototype,"bonus",{get:function(){return this._bonus},enumerable:!0,configurable:!0}),Object.defineProperty(PromoOfferViewTypeStaticData.prototype,"sale",{get:function(){return this._sale},enumerable:!0,configurable:!0}),PromoOfferViewTypeStaticData.prototype._parse=function(t){this._icon=jQuery("> icon",t).first().text(),this._baseValue=n.Utils.parseInt(jQuery("> baseValue",t).first().text()),this._bonusValue=n.Utils.parseInt(jQuery("> bonusValue",t).first().text()),this._bonus=n.Utils.parseInt(jQuery("> bonus",t).first().text()),this._sale=n.Utils.parseInt(jQuery("> sale",t).first().text())},PromoOfferViewTypeStaticData}();e.PromoOfferViewTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function PromoViewTypeStaticData(){}return PromoViewTypeStaticData.parse=function(t){var e=new PromoViewTypeStaticData;return e._parse(t),e},Object.defineProperty(PromoViewTypeStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(PromoViewTypeStaticData.prototype,"selfWindow",{get:function(){return this._selfWindow},enumerable:!0,configurable:!0}),Object.defineProperty(PromoViewTypeStaticData.prototype,"background",{get:function(){return this._background},enumerable:!0,configurable:!0}),Object.defineProperty(PromoViewTypeStaticData.prototype,"bundle",{get:function(){return this._bundle},enumerable:!0,configurable:!0}),Object.defineProperty(PromoViewTypeStaticData.prototype,"customTitle1",{get:function(){return this._customTitle1},enumerable:!0,configurable:!0}),Object.defineProperty(PromoViewTypeStaticData.prototype,"customTitle2",{get:function(){return this._customTitle2},enumerable:!0,configurable:!0}),Object.defineProperty(PromoViewTypeStaticData.prototype,"customTitle3",{get:function(){return this._customTitle3},enumerable:!0,configurable:!0}),Object.defineProperty(PromoViewTypeStaticData.prototype,"screens",{get:function(){return this._screens},enumerable:!0,configurable:!0}),PromoViewTypeStaticData.prototype._parse=function(t){this._icon=jQuery("> icon",t).first().text(),this._selfWindow=n.Utils.parseBool(jQuery("> selfWindow",t).first().text()),this._background=jQuery("> background",t).first().text(),this._bundle=n.Utils.parseBool(jQuery("> bundle",t).first().text()),this._customTitle1=jQuery("> customTitle1",t).first().text(),this._customTitle2=jQuery("> customTitle2",t).first().text(),this._customTitle3=jQuery("> customTitle3",t).first().text(),this._screens=jQuery("> screens",t).first().text()},PromoViewTypeStaticData}();e.PromoViewTypeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1033)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ShopsListStaticData(){}return ShopsListStaticData.parse=function(t){var e=new ShopsListStaticData;return e._parse(t),e},Object.defineProperty(ShopsListStaticData.prototype,"shop",{get:function(){return this._shop},enumerable:!0,configurable:!0}),ShopsListStaticData.prototype._parse=function(t){var n=this;this._shop=[],jQuery("> shop",t).each(function(t,e){n._shop.push(i.ShopsItemStaticData.parse(e))})},ShopsListStaticData}();e.ShopsListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ShopsItemStaticData(){}return ShopsItemStaticData.parse=function(t){var e=new ShopsItemStaticData;return e._parse(t),e},Object.defineProperty(ShopsItemStaticData.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),Object.defineProperty(ShopsItemStaticData.prototype,"shopType",{get:function(){return this._shopType},enumerable:!0,configurable:!0}),ShopsItemStaticData.prototype._parse=function(t){this._promoId=n.Utils.parseInt(jQuery(t).attr("promoId")),this._shopType=jQuery(t).attr("shopType")},ShopsItemStaticData}();e.ShopsItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function CashSegmentsStaticData(){}return CashSegmentsStaticData.parse=function(t){var e=new CashSegmentsStaticData;return e._parse(t),e},Object.defineProperty(CashSegmentsStaticData.prototype,"currentPaymentsCount",{get:function(){return this._currentPaymentsCount},enumerable:!0,configurable:!0}),Object.defineProperty(CashSegmentsStaticData.prototype,"prevPaymentsCount",{get:function(){return this._prevPaymentsCount},enumerable:!0,configurable:!0}),Object.defineProperty(CashSegmentsStaticData.prototype,"avgCheck",{get:function(){return this._avgCheck},enumerable:!0,configurable:!0}),CashSegmentsStaticData.prototype._parse=function(t){this._currentPaymentsCount=n.Utils.parseInt(jQuery("> currentPaymentsCount",t).first().text()),this._prevPaymentsCount=n.Utils.parseInt(jQuery("> prevPaymentsCount",t).first().text()),this._avgCheck=n.Utils.parseFloat(jQuery("> avgCheck",t).first().text())},CashSegmentsStaticData}();e.CashSegmentsStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1036),n(1037)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ClientShopsConfigStaticData(){}return ClientShopsConfigStaticData.parse=function(t){var e=new ClientShopsConfigStaticData;return e._parse(t),e},Object.defineProperty(ClientShopsConfigStaticData.prototype,"alphabetShop",{get:function(){return this._alphabetShop},enumerable:!0,configurable:!0}),Object.defineProperty(ClientShopsConfigStaticData.prototype,"decorShop",{get:function(){return this._decorShop},enumerable:!0,configurable:!0}),Object.defineProperty(ClientShopsConfigStaticData.prototype,"animalShop",{get:function(){return this._animalShop},enumerable:!0,configurable:!0}),ClientShopsConfigStaticData.prototype._parse=function(t){var n=this;this._alphabetShop=[],jQuery("> alphabetShop",t).each(function(t,e){n._alphabetShop.push(i.AlphabetShopsItemStaticData.parse(e))}),this._decorShop=[],jQuery("> decorShop",t).each(function(t,e){n._decorShop.push(r.DecorShopItemStaticData.parse(e))}),this._animalShop=[],jQuery("> animalShop",t).each(function(t,e){n._animalShop.push(r.DecorShopItemStaticData.parse(e))})},ClientShopsConfigStaticData}();e.ClientShopsConfigStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AlphabetShopsItemStaticData(){}return AlphabetShopsItemStaticData.parse=function(t){var e=new AlphabetShopsItemStaticData;return e._parse(t),e},Object.defineProperty(AlphabetShopsItemStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(AlphabetShopsItemStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(AlphabetShopsItemStaticData.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),AlphabetShopsItemStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type"),this._screenId=n.Utils.parseInt(jQuery(t).attr("screenId")),this._promoId=n.Utils.parseInt(jQuery(t).attr("promoId"))},AlphabetShopsItemStaticData}();e.AlphabetShopsItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function DecorShopItemStaticData(){}return DecorShopItemStaticData.parse=function(t){var e=new DecorShopItemStaticData;return e._parse(t),e},Object.defineProperty(DecorShopItemStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopItemStaticData.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),DecorShopItemStaticData.prototype._parse=function(t){this._screenId=n.Utils.parseInt(jQuery(t).attr("screenId")),this._promoId=n.Utils.parseInt(jQuery(t).attr("promoId"))},DecorShopItemStaticData}();e.DecorShopItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1039)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function SocialPromoStaticData(){}return SocialPromoStaticData.parse=function(t){var e=new SocialPromoStaticData;return e._parse(t),e},Object.defineProperty(SocialPromoStaticData.prototype,"blackFriday",{get:function(){return this._blackFriday},enumerable:!0,configurable:!0}),SocialPromoStaticData.prototype._parse=function(t){this._blackFriday=n.SocialPromoBlackFridayStaticData.parse(jQuery("> blackFriday",t).first())},SocialPromoStaticData}();e.SocialPromoStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(23)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function SocialPromoBlackFridayStaticData(){}return SocialPromoBlackFridayStaticData.parse=function(t){var e=new SocialPromoBlackFridayStaticData;return e._parse(t),e},Object.defineProperty(SocialPromoBlackFridayStaticData.prototype,"socialPromoId",{get:function(){return this._socialPromoId},enumerable:!0,configurable:!0}),Object.defineProperty(SocialPromoBlackFridayStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(SocialPromoBlackFridayStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),SocialPromoBlackFridayStaticData.prototype._parse=function(t){this._socialPromoId=n.Utils.parseInt(jQuery(t).attr("socialPromoId")),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._awards=r.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},SocialPromoBlackFridayStaticData}();e.SocialPromoBlackFridayStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1041),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function WallpostListStaticData(){}return WallpostListStaticData.parse=function(t){var e=new WallpostListStaticData;return e._parse(t),e},Object.defineProperty(WallpostListStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostListStaticData.prototype,"wallpost",{get:function(){return this._wallpost},enumerable:!0,configurable:!0}),WallpostListStaticData.prototype._parse=function(t){this._title=jQuery(t).attr("title"),this._wallpost=i.StaticDataCollection.parse(n.WallpostItemStaticData,t,"> wallpost ")},WallpostListStaticData}();e.WallpostListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function WallpostItemStaticData(){}return WallpostItemStaticData.parse=function(t){var e=new WallpostItemStaticData;return e._parse(t),e},Object.defineProperty(WallpostItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostItemStaticData.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostItemStaticData.prototype,"photo",{get:function(){return this._photo},enumerable:!0,configurable:!0}),WallpostItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._text=jQuery("> text",t).first().text(),this._photo=jQuery("> photo",t).first().text()},WallpostItemStaticData}();e.WallpostItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1043),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function WallpostAwardsListStaticData(){}return WallpostAwardsListStaticData.parse=function(t){var e=new WallpostAwardsListStaticData;return e._parse(t),e},Object.defineProperty(WallpostAwardsListStaticData.prototype,"wallpost",{get:function(){return this._wallpost},enumerable:!0,configurable:!0}),WallpostAwardsListStaticData.prototype._parse=function(t){this._wallpost=i.StaticDataCollection.parse(n.WallpostAwardItemStaticData,t,"> wallpost ")},WallpostAwardsListStaticData}();e.WallpostAwardsListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1044),n(23)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function WallpostAwardItemStaticData(){}return WallpostAwardItemStaticData.parse=function(t){var e=new WallpostAwardItemStaticData;return e._parse(t),e},Object.defineProperty(WallpostAwardItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostAwardItemStaticData.prototype,"limitPeriod",{get:function(){return this._limitPeriod},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostAwardItemStaticData.prototype,"limitAmount",{get:function(){return this._limitAmount},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostAwardItemStaticData.prototype,"event",{get:function(){return this._event},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostAwardItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),WallpostAwardItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._limitPeriod=n.Utils.parseInt(jQuery(t).attr("limitPeriod")),this._limitAmount=n.Utils.parseInt(jQuery(t).attr("limitAmount")),this._event=i.WallpostEventItemStaticData.parse(jQuery("> event",t).first()),this._awards=r.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},WallpostAwardItemStaticData}();e.WallpostAwardItemStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WallpostEventItemStaticData(){}return WallpostEventItemStaticData.parse=function(t){var e=new WallpostEventItemStaticData;return e._parse(t),e},Object.defineProperty(WallpostEventItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(WallpostEventItemStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),WallpostEventItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._param=jQuery(t).attr("param")},WallpostEventItemStaticData}();e.WallpostEventItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1046),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BonusesStaticData(){}return BonusesStaticData.parse=function(t){var e=new BonusesStaticData;return e._parse(t),e},Object.defineProperty(BonusesStaticData.prototype,"bonus",{get:function(){return this._bonus},enumerable:!0,configurable:!0}),BonusesStaticData.prototype._parse=function(t){this._bonus=i.StaticDataCollection.parse(n.BonusItemStaticData,t,"> bonus ")},BonusesStaticData}();e.BonusesStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1047)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BonusItemStaticData(){}return BonusItemStaticData.parse=function(t){var e=new BonusItemStaticData;return e._parse(t),e},Object.defineProperty(BonusItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(BonusItemStaticData.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(BonusItemStaticData.prototype,"description",{get:function(){return this._description},enumerable:!0,configurable:!0}),Object.defineProperty(BonusItemStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),BonusItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._current=jQuery(t).attr("current"),this._description=jQuery(t).attr("description"),this._stage=i.BonusStageStaticData.parse(jQuery("> stage",t).first())},BonusItemStaticData}();e.BonusItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(23)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function BonusStageStaticData(){}return BonusStageStaticData.parse=function(t){var e=new BonusStageStaticData;return e._parse(t),e},Object.defineProperty(BonusStageStaticData.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(BonusStageStaticData.prototype,"bonus",{get:function(){return this._bonus},enumerable:!0,configurable:!0}),Object.defineProperty(BonusStageStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),BonusStageStaticData.prototype._parse=function(t){this._target=jQuery(t).attr("target"),this._bonus=jQuery(t).attr("bonus"),this._awards=n.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},BonusStageStaticData}();e.BonusStageStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1049),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BeautyStaticData(){}return BeautyStaticData.parse=function(t){var e=new BeautyStaticData;return e._parse(t),e},Object.defineProperty(BeautyStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),BeautyStaticData.prototype._parse=function(t){this._screen=i.StaticDataCollection.parse(n.BeautyScreenStaticData,t,"> screen ")},BeautyStaticData}();e.BeautyStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1050),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function BeautyScreenStaticData(){}return BeautyScreenStaticData.parse=function(t){var e=new BeautyScreenStaticData;return e._parse(t),e},Object.defineProperty(BeautyScreenStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),BeautyScreenStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._stage=r.StaticDataCollection.parse(i.BeautyStageStaticData,t,"> stage ")},BeautyScreenStaticData}();e.BeautyScreenStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function BeautyStageStaticData(){}return BeautyStageStaticData.parse=function(t){var e=new BeautyStageStaticData;return e._parse(t),e},Object.defineProperty(BeautyStageStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyStageStaticData.prototype,"beauty",{get:function(){return this._beauty},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyStageStaticData.prototype,"bonus",{get:function(){return this._bonus},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyStageStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),BeautyStageStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._beauty=n.Utils.parseInt(jQuery(t).attr("beauty")),this._bonus=n.Utils.parseInt(jQuery(t).attr("bonus")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},BeautyStageStaticData}();e.BeautyStageStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1052),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function GeneratorsStaticData(){}return GeneratorsStaticData.parse=function(t){var e=new GeneratorsStaticData;return e._parse(t),e},Object.defineProperty(GeneratorsStaticData.prototype,"generator",{get:function(){return this._generator},enumerable:!0,configurable:!0}),GeneratorsStaticData.prototype._parse=function(t){this._generator=i.StaticDataCollection.parse(n.GeneratorStaticData,t,"> generator ")},GeneratorsStaticData}();e.GeneratorsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1053),n(1055),n(1056),n(11)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function GeneratorStaticData(){}return GeneratorStaticData.parse=function(t){var e=new GeneratorStaticData;return e._parse(t),e},Object.defineProperty(GeneratorStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"dynamic",{get:function(){return this._dynamic},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"gameEvent",{get:function(){return this._gameEvent},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"beautyBoostForScreen",{get:function(){return this._beautyBoostForScreen},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"farm",{get:function(){return this._farm},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"clientInit",{get:function(){return this._clientInit},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"designObject",{get:function(){return this._designObject},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"boosts",{get:function(){return this._boosts},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"init",{get:function(){return this._init},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"exchange",{get:function(){return this._exchange},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStaticData.prototype,"stages",{get:function(){return this._stages},enumerable:!0,configurable:!0}),GeneratorStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("name"),this._dynamic=n.Utils.parseInt(jQuery(t).attr("dynamic")),this._gameEvent=jQuery(t).attr("gameEvent"),this._beautyBoostForScreen=n.Utils.parseInt(jQuery(t).attr("beautyBoostForScreen")),this._farm=n.Utils.parseInt(jQuery(t).attr("farm")),this._title=jQuery(t).attr("title"),this._clientInit=n.Utils.parseBool(jQuery(t).attr("clientInit")),this._object=jQuery(t).attr("object"),this._designObject=n.Utils.parseInt(jQuery(t).attr("designObject")),this._boosts=i.GeneratorBoostListStaticData.parse(jQuery("> boosts",t).first()),this._init=n.Utils.parseInt(jQuery("> init",t).first().text()),this._exchange=r.GeneratorExchangeStaticData.parse(jQuery("> exchange",t).first()),this._stages=a.StaticDataCollection.parse(o.GeneratorStageStaticData,t,"> stages > stage")},GeneratorStaticData}();e.GeneratorStaticData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1054)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GeneratorBoostListStaticData(){}return GeneratorBoostListStaticData.parse=function(t){var e=new GeneratorBoostListStaticData;return e._parse(t),e},Object.defineProperty(GeneratorBoostListStaticData.prototype,"boost",{get:function(){return this._boost},enumerable:!0,configurable:!0}),GeneratorBoostListStaticData.prototype._parse=function(t){var n=this;this._boost=[],jQuery("> boost",t).each(function(t,e){n._boost.push(i.GeneratorBoostItemStaticData.parse(e))})},GeneratorBoostListStaticData}();e.GeneratorBoostListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GeneratorBoostItemStaticData(){}return GeneratorBoostItemStaticData.parse=function(t){var e=new GeneratorBoostItemStaticData;return e._parse(t),e},Object.defineProperty(GeneratorBoostItemStaticData.prototype,"extraItemType",{get:function(){return this._extraItemType},enumerable:!0,configurable:!0}),GeneratorBoostItemStaticData.prototype._parse=function(t){this._extraItemType=jQuery(t).attr("extraItemType")},GeneratorBoostItemStaticData}();e.GeneratorBoostItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function GeneratorExchangeStaticData(){}return GeneratorExchangeStaticData.parse=function(t){var e=new GeneratorExchangeStaticData;return e._parse(t),e},Object.defineProperty(GeneratorExchangeStaticData.prototype,"disabled",{get:function(){return this._disabled},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorExchangeStaticData.prototype,"customCount",{get:function(){return this._customCount},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorExchangeStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),GeneratorExchangeStaticData.prototype._parse=function(t){this._disabled=n.Utils.parseBool(jQuery(t).attr("disabled")),this._customCount=n.Utils.parseInt(jQuery(t).attr("customCount")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},GeneratorExchangeStaticData}();e.GeneratorExchangeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function GeneratorStageStaticData(){}return GeneratorStageStaticData.parse=function(t){var e=new GeneratorStageStaticData;return e._parse(t),e},Object.defineProperty(GeneratorStageStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStageStaticData.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStageStaticData.prototype,"cooldown",{get:function(){return this._cooldown},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorStageStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GeneratorStageStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._max=n.Utils.parseInt(jQuery(t).attr("max")),this._cooldown=n.Utils.parseInt(jQuery(t).attr("cooldown")),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},GeneratorStageStaticData}();e.GeneratorStageStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1058),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ExtraItemsStaticData(){}return ExtraItemsStaticData.parse=function(t){var e=new ExtraItemsStaticData;return e._parse(t),e},Object.defineProperty(ExtraItemsStaticData.prototype,"extraItem",{get:function(){return this._extraItem},enumerable:!0,configurable:!0}),ExtraItemsStaticData.prototype._parse=function(t){this._extraItem=i.StaticDataCollection.parse(n.ExtraItemStaticData,t,"> extraItem ")},ExtraItemsStaticData}();e.ExtraItemsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1059)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ExtraItemStaticData(){}return ExtraItemStaticData.parse=function(t){var e=new ExtraItemStaticData;return e._parse(t),e},Object.defineProperty(ExtraItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemStaticData.prototype,"boost",{get:function(){return this._boost},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemStaticData.prototype,"itemId",{get:function(){return this._itemId},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),ExtraItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._type=jQuery(t).attr("type"),this._boost=n.Utils.parseInt(jQuery(t).attr("boost")),this._itemId=jQuery(t).attr("itemId"),this._view=i.ExtraItemViewTypeStaticData.parse(jQuery("> view",t).first())},ExtraItemStaticData}();e.ExtraItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(225),n(394)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ExtraItemViewTypeStaticData(){}return ExtraItemViewTypeStaticData.parse=function(t){var e=new ExtraItemViewTypeStaticData;return e._parse(t),e},Object.defineProperty(ExtraItemViewTypeStaticData.prototype,"icons",{get:function(){return this._icons},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemViewTypeStaticData.prototype,"strings",{get:function(){return this._strings},enumerable:!0,configurable:!0}),ExtraItemViewTypeStaticData.prototype._parse=function(t){this._icons=n.IconsViewTypeStaticData.parse(jQuery("> icons",t).first()),this._strings=i.StringsViewTypeStaticData.parse(jQuery("> strings",t).first())},ExtraItemViewTypeStaticData}();e.ExtraItemViewTypeStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1061)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ExtraItemsShopsStaticData(){}return ExtraItemsShopsStaticData.parse=function(t){var e=new ExtraItemsShopsStaticData;return e._parse(t),e},Object.defineProperty(ExtraItemsShopsStaticData.prototype,"extraItemsShop",{get:function(){return this._extraItemsShop},enumerable:!0,configurable:!0}),ExtraItemsShopsStaticData.prototype._parse=function(t){var n=this;this._extraItemsShop=[],jQuery("> extraItemsShop",t).each(function(t,e){n._extraItemsShop.push(i.ExtraItemsShopStaticData.parse(e))})},ExtraItemsShopsStaticData}();e.ExtraItemsShopsStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1062)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ExtraItemsShopStaticData(){}return ExtraItemsShopStaticData.parse=function(t){var e=new ExtraItemsShopStaticData;return e._parse(t),e},Object.defineProperty(ExtraItemsShopStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemsShopStaticData.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemsShopStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemsShopStaticData.prototype,"category",{get:function(){return this._category},enumerable:!0,configurable:!0}),ExtraItemsShopStaticData.prototype._parse=function(t){var n=this;this._screenId=i.Utils.parseInt(jQuery(t).attr("screenId")),this._object=jQuery(t).attr("object"),this._icon=jQuery(t).attr("icon"),this._category=[],jQuery("> category",t).each(function(t,e){n._category.push(r.ExtraItemsShopCategoryStaticData.parse(e))})},ExtraItemsShopStaticData}();e.ExtraItemsShopStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ExtraItemsShopCategoryStaticData(){}return ExtraItemsShopCategoryStaticData.parse=function(t){var e=new ExtraItemsShopCategoryStaticData;return e._parse(t),e},Object.defineProperty(ExtraItemsShopCategoryStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemsShopCategoryStaticData.prototype,"extraItemType",{get:function(){return this._extraItemType},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemsShopCategoryStaticData.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),ExtraItemsShopCategoryStaticData.prototype._parse=function(t){this._icon=jQuery(t).attr("icon"),this._extraItemType=jQuery(t).attr("extraItemType"),this._promoId=n.Utils.parseInt(jQuery(t).attr("promoId"))},ExtraItemsShopCategoryStaticData}();e.ExtraItemsShopCategoryStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1064)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function LikesStaticData(){}return LikesStaticData.parse=function(t){var e=new LikesStaticData;return e._parse(t),e},Object.defineProperty(LikesStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(LikesStaticData.prototype,"recalculate",{get:function(){return this._recalculate},enumerable:!0,configurable:!0}),LikesStaticData.prototype._parse=function(t){var n=this;this._type=jQuery(t).attr("type"),this._recalculate=[],jQuery("> recalculate",t).each(function(t,e){n._recalculate.push(i.LikesRecalculateStaticData.parse(e))})},LikesStaticData}();e.LikesStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1065)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function LikesRecalculateStaticData(){}return LikesRecalculateStaticData.parse=function(t){var e=new LikesRecalculateStaticData;return e._parse(t),e},Object.defineProperty(LikesRecalculateStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(LikesRecalculateStaticData.prototype,"like",{get:function(){return this._like},enumerable:!0,configurable:!0}),LikesRecalculateStaticData.prototype._parse=function(t){var n=this;this._type=jQuery(t).attr("type"),this._like=[],jQuery("> like",t).each(function(t,e){n._like.push(i.LikesItemStaticData.parse(e))})},LikesRecalculateStaticData}();e.LikesRecalculateStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function LikesItemStaticData(){}return LikesItemStaticData.parse=function(t){var e=new LikesItemStaticData;return e._parse(t),e},Object.defineProperty(LikesItemStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(LikesItemStaticData.prototype,"period",{get:function(){return this._period},enumerable:!0,configurable:!0}),Object.defineProperty(LikesItemStaticData.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(LikesItemStaticData.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),LikesItemStaticData.prototype._parse=function(t){this._screenId=n.Utils.parseInt(jQuery(t).attr("screenId")),this._period=n.Utils.parseInt(jQuery(t).attr("period")),this._min=n.Utils.parseInt(jQuery(t).attr("min")),this._max=n.Utils.parseInt(jQuery(t).attr("max"))},LikesItemStaticData}();e.LikesItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1067),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ToysStaticData(){}return ToysStaticData.parse=function(t){var e=new ToysStaticData;return e._parse(t),e},Object.defineProperty(ToysStaticData.prototype,"toy",{get:function(){return this._toy},enumerable:!0,configurable:!0}),ToysStaticData.prototype._parse=function(t){this._toy=i.StaticDataCollection.parse(n.ToyStaticData,t,"> toy ")},ToysStaticData}();e.ToysStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1068)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ToyStaticData(){}return ToyStaticData.parse=function(t){var e=new ToyStaticData;return e._parse(t),e},Object.defineProperty(ToyStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ToyStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(ToyStaticData.prototype,"dynamicScreen",{get:function(){return this._dynamicScreen},enumerable:!0,configurable:!0}),Object.defineProperty(ToyStaticData.prototype,"trackBuyCount",{get:function(){return this._trackBuyCount},enumerable:!0,configurable:!0}),Object.defineProperty(ToyStaticData.prototype,"buyForFriend",{get:function(){return this._buyForFriend},enumerable:!0,configurable:!0}),Object.defineProperty(ToyStaticData.prototype,"beauty",{get:function(){return this._beauty},enumerable:!0,configurable:!0}),Object.defineProperty(ToyStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),ToyStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._screen=n.Utils.parseInt(jQuery(t).attr("screen")),this._dynamicScreen=n.Utils.parseBool(jQuery(t).attr("dynamicScreen")),this._trackBuyCount=n.Utils.parseBool(jQuery(t).attr("trackBuyCount")),this._buyForFriend=n.Utils.parseBool(jQuery(t).attr("buyForFriend")),this._beauty=n.Utils.parseInt(jQuery(t).attr("beauty")),this._view=i.ToyViewStaticData.parse(jQuery("> view",t).first())},ToyStaticData}();e.ToyStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ToyViewStaticData(){}return ToyViewStaticData.parse=function(t){var e=new ToyViewStaticData;return e._parse(t),e},Object.defineProperty(ToyViewStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(ToyViewStaticData.prototype,"spine",{get:function(){return this._spine},enumerable:!0,configurable:!0}),Object.defineProperty(ToyViewStaticData.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),ToyViewStaticData.prototype._parse=function(t){this._title=jQuery(t).attr("title"),this._spine=jQuery(t).attr("spine"),this._resource=jQuery(t).attr("resource")},ToyViewStaticData}();e.ToyViewStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1070),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function AnimalsStaticData(){}return AnimalsStaticData.parse=function(t){var e=new AnimalsStaticData;return e._parse(t),e},Object.defineProperty(AnimalsStaticData.prototype,"animal",{get:function(){return this._animal},enumerable:!0,configurable:!0}),AnimalsStaticData.prototype._parse=function(t){this._animal=i.StaticDataCollection.parse(n.AnimalStaticData,t,"> animal ")},AnimalsStaticData}();e.AnimalsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1071),n(1076),n(1078),n(11)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function AnimalStaticData(){}return AnimalStaticData.parse=function(t){var e=new AnimalStaticData;return e._parse(t),e},Object.defineProperty(AnimalStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStaticData.prototype,"actions",{get:function(){return this._actions},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStaticData.prototype,"stages",{get:function(){return this._stages},enumerable:!0,configurable:!0}),AnimalStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._screenId=n.Utils.parseInt(jQuery(t).attr("screenId")),this._name=jQuery(t).attr("name"),this._view=i.AnimalViewStaticData.parse(jQuery("> view",t).first()),this._actions=a.StaticDataCollection.parse(r.AnimalActionStaticData,t,"> actions > action"),this._stages=a.StaticDataCollection.parse(o.AnimalStageStaticData,t,"> stages > stage")},AnimalStaticData}();e.AnimalStaticData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1072)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AnimalViewStaticData(){}return AnimalViewStaticData.parse=function(t){var e=new AnimalViewStaticData;return e._parse(t),e},Object.defineProperty(AnimalViewStaticData.prototype,"defaultNameKey",{get:function(){return this._defaultNameKey},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalViewStaticData.prototype,"animalHouse",{get:function(){return this._animalHouse},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalViewStaticData.prototype,"animations",{get:function(){return this._animations},enumerable:!0,configurable:!0}),AnimalViewStaticData.prototype._parse=function(t){this._defaultNameKey=jQuery(t).attr("defaultNameKey"),this._animalHouse=jQuery(t).attr("animalHouse"),this._animations=n.AnimalAnimationsStaticData.parse(jQuery("> animations",t).first())},AnimalViewStaticData}();e.AnimalViewStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1073)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function AnimalAnimationsStaticData(){}return AnimalAnimationsStaticData.parse=function(t){var e=new AnimalAnimationsStaticData;return e._parse(t),e},Object.defineProperty(AnimalAnimationsStaticData.prototype,"walkAnimationName",{get:function(){return this._walkAnimationName},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalAnimationsStaticData.prototype,"walkAnimationSpeed",{get:function(){return this._walkAnimationSpeed},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalAnimationsStaticData.prototype,"states",{get:function(){return this._states},enumerable:!0,configurable:!0}),AnimalAnimationsStaticData.prototype._parse=function(t){this._walkAnimationName=jQuery(t).attr("walkAnimationName"),this._walkAnimationSpeed=n.Utils.parseFloat(jQuery(t).attr("walkAnimationSpeed")),this._states=i.AnimalStatesViewStaticData.parse(jQuery("> states",t).first())},AnimalAnimationsStaticData}();e.AnimalAnimationsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1074),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function AnimalStatesViewStaticData(){}return AnimalStatesViewStaticData.parse=function(t){var e=new AnimalStatesViewStaticData;return e._parse(t),e},Object.defineProperty(AnimalStatesViewStaticData.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),AnimalStatesViewStaticData.prototype._parse=function(t){this._state=i.StaticDataCollection.parse(n.AnimalStateViewStaticData,t,"> state ")},AnimalStatesViewStaticData}();e.AnimalStatesViewStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1075)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AnimalStateViewStaticData(){}return AnimalStateViewStaticData.parse=function(t){var e=new AnimalStateViewStaticData;return e._parse(t),e},Object.defineProperty(AnimalStateViewStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStateViewStaticData.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),AnimalStateViewStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._params=n.AnimalStateParamsViewStaticData.parse(jQuery("> params",t).first())},AnimalStateViewStaticData}();e.AnimalStateViewStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AnimalStateParamsViewStaticData(){}return AnimalStateParamsViewStaticData.parse=function(t){var e=new AnimalStateParamsViewStaticData;return e._parse(t),e},Object.defineProperty(AnimalStateParamsViewStaticData.prototype,"animName",{get:function(){return this._animName},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStateParamsViewStaticData.prototype,"looped",{get:function(){return this._looped},enumerable:!0,configurable:!0}),AnimalStateParamsViewStaticData.prototype._parse=function(t){this._animName=jQuery(t).attr("animName"),this._looped=n.Utils.parseBool(jQuery(t).attr("looped"))},AnimalStateParamsViewStaticData}();e.AnimalStateParamsViewStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23),n(47),n(1077)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function AnimalActionStaticData(){}return AnimalActionStaticData.parse=function(t){var e=new AnimalActionStaticData;return e._parse(t),e},Object.defineProperty(AnimalActionStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionStaticData.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionStaticData.prototype,"speedUpPrice",{get:function(){return this._speedUpPrice},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),AnimalActionStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._duration=n.Utils.parseInt(jQuery(t).attr("duration")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first()),this._prices=r.PricesTreeStaticData.parse(jQuery("> prices",t).first()),this._speedUpPrice=r.PricesTreeStaticData.parse(jQuery("> speedUpPrice",t).first()),this._view=o.AnimalActionViewStaticData.parse(jQuery("> view",t).first())},AnimalActionStaticData}();e.AnimalActionStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(225)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function AnimalActionViewStaticData(){}return AnimalActionViewStaticData.parse=function(t){var e=new AnimalActionViewStaticData;return e._parse(t),e},Object.defineProperty(AnimalActionViewStaticData.prototype,"actionName",{get:function(){return this._actionName},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalActionViewStaticData.prototype,"icons",{get:function(){return this._icons},enumerable:!0,configurable:!0}),AnimalActionViewStaticData.prototype._parse=function(t){this._actionName=jQuery("> actionName",t).first().text(),this._icons=n.IconsViewTypeStaticData.parse(jQuery("> icons",t).first())},AnimalActionViewStaticData}();e.AnimalActionViewStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(24),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function AnimalStageStaticData(){}return AnimalStageStaticData.parse=function(t){var e=new AnimalStageStaticData;return e._parse(t),e},Object.defineProperty(AnimalStageStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStageStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(AnimalStageStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),AnimalStageStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._requirements=n.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},AnimalStageStaticData}();e.AnimalStageStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(47)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function HardCodeMainLinksStaticData(){}return HardCodeMainLinksStaticData.parse=function(t){var e=new HardCodeMainLinksStaticData;return e._parse(t),e},Object.defineProperty(HardCodeMainLinksStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),HardCodeMainLinksStaticData.prototype._parse=function(t){this._prices=n.PricesTreeStaticData.parse(jQuery("> prices",t).first())},HardCodeMainLinksStaticData}();e.HardCodeMainLinksStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1081),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function ChestsStaticData(){}return ChestsStaticData.parse=function(t){var e=new ChestsStaticData;return e._parse(t),e},Object.defineProperty(ChestsStaticData.prototype,"friendsChestId",{get:function(){return this._friendsChestId},enumerable:!0,configurable:!0}),Object.defineProperty(ChestsStaticData.prototype,"chest",{get:function(){return this._chest},enumerable:!0,configurable:!0}),ChestsStaticData.prototype._parse=function(t){this._friendsChestId=n.Utils.parseInt(jQuery(t).attr("friendsChestId")),this._chest=r.StaticDataCollection.parse(i.ChestStaticData,t,"> chest ")},ChestsStaticData}();e.ChestsStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(47),n(23)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function ChestStaticData(){}return ChestStaticData.parse=function(t){var e=new ChestStaticData;return e._parse(t),e},Object.defineProperty(ChestStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ChestStaticData.prototype,"period",{get:function(){return this._period},enumerable:!0,configurable:!0}),Object.defineProperty(ChestStaticData.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(ChestStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(ChestStaticData.prototype,"fastPrice",{get:function(){return this._fastPrice},enumerable:!0,configurable:!0}),Object.defineProperty(ChestStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),ChestStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._period=n.Utils.parseInt(jQuery(t).attr("period")),this._userId=jQuery(t).attr("userId"),this._prices=i.PricesTreeStaticData.parse(jQuery("> prices",t).first()),this._fastPrice=i.PricesTreeStaticData.parse(jQuery("> fastPrice",t).first()),this._awards=r.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},ChestStaticData}();e.ChestStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1083),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function MailStaticData(){}return MailStaticData.parse=function(t){var e=new MailStaticData;return e._parse(t),e},Object.defineProperty(MailStaticData.prototype,"inbox",{get:function(){return this._inbox},enumerable:!0,configurable:!0}),MailStaticData.prototype._parse=function(t){this._inbox=i.StaticDataCollection.parse(n.MailInboxStaticData,t,"> inbox ")},MailStaticData}();e.MailStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function MailInboxStaticData(){}return MailInboxStaticData.parse=function(t){var e=new MailInboxStaticData;return e._parse(t),e},Object.defineProperty(MailInboxStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxStaticData.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxStaticData.prototype,"itemType",{get:function(){return this._itemType},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxStaticData.prototype,"onSend",{get:function(){return this._onSend},enumerable:!0,configurable:!0}),Object.defineProperty(MailInboxStaticData.prototype,"itemIds",{get:function(){return this._itemIds},enumerable:!0,configurable:!0}),MailInboxStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._size=n.Utils.parseInt(jQuery(t).attr("size")),this._itemType=jQuery(t).attr("itemType"),this._onSend=n.Utils.parseBool(jQuery(t).attr("onSend")),this._itemIds=jQuery(t).attr("itemIds")},MailInboxStaticData}();e.MailInboxStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1085),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function DesignObjectsStaticData(){}return DesignObjectsStaticData.parse=function(t){var e=new DesignObjectsStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectsStaticData.prototype,"designObject",{get:function(){return this._designObject},enumerable:!0,configurable:!0}),DesignObjectsStaticData.prototype._parse=function(t){this._designObject=i.StaticDataCollection.parse(n.DesignObjectStaticData,t,"> designObject ")},DesignObjectsStaticData}();e.DesignObjectsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(1086),n(1090)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function DesignObjectStaticData(){}return DesignObjectStaticData.parse=function(t){var e=new DesignObjectStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStaticData.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStaticData.prototype,"actions",{get:function(){return this._actions},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStaticData.prototype,"stages",{get:function(){return this._stages},enumerable:!0,configurable:!0}),DesignObjectStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._screenId=n.Utils.parseInt(jQuery(t).attr("screenId")),this._title=jQuery(t).attr("title"),this._resource=jQuery(t).attr("resource"),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._actions=r.DesignObjectActionsListStaticData.parse(jQuery("> actions",t).first()),this._stages=o.DesignObjectStagesListStaticData.parse(jQuery("> stages",t).first())},DesignObjectStaticData}();e.DesignObjectStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1087),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function DesignObjectActionsListStaticData(){}return DesignObjectActionsListStaticData.parse=function(t){var e=new DesignObjectActionsListStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectActionsListStaticData.prototype,"action",{get:function(){return this._action},enumerable:!0,configurable:!0}),DesignObjectActionsListStaticData.prototype._parse=function(t){this._action=i.StaticDataCollection.parse(n.DesignObjectActionItemStaticData,t,"> action ")},DesignObjectActionsListStaticData}();e.DesignObjectActionsListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1088),n(1089)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DesignObjectActionItemStaticData(){}return DesignObjectActionItemStaticData.parse=function(t){var e=new DesignObjectActionItemStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectActionItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectActionItemStaticData.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectActionItemStaticData.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectActionItemStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectActionItemStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectActionItemStaticData.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectActionItemStaticData.prototype,"boost",{get:function(){return this._boost},enumerable:!0,configurable:!0}),DesignObjectActionItemStaticData.prototype._parse=function(t){var n=this;this._id=i.Utils.parseInt(jQuery(t).attr("id")),this._duration=i.Utils.parseInt(jQuery(t).attr("duration")),this._point=i.Utils.parseInt(jQuery(t).attr("point")),this._icon=jQuery(t).attr("icon"),this._title=jQuery(t).attr("title"),this._start=[],jQuery("> start",t).each(function(t,e){n._start.push(r.DesignObjectActionStartStaticData.parse(e))}),this._boost=[],jQuery("> boost",t).each(function(t,e){n._boost.push(o.DesignObjectActionBoostStaticData.parse(e))})},DesignObjectActionItemStaticData}();e.DesignObjectActionItemStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(47)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DesignObjectActionStartStaticData(){}return DesignObjectActionStartStaticData.parse=function(t){var e=new DesignObjectActionStartStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectActionStartStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),DesignObjectActionStartStaticData.prototype._parse=function(t){var n=this;this._prices=[],jQuery("> prices",t).each(function(t,e){n._prices.push(i.PricesTreeStaticData.parse(e))})},DesignObjectActionStartStaticData}();e.DesignObjectActionStartStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(47)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DesignObjectActionBoostStaticData(){}return DesignObjectActionBoostStaticData.parse=function(t){var e=new DesignObjectActionBoostStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectActionBoostStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),DesignObjectActionBoostStaticData.prototype._parse=function(t){var n=this;this._prices=[],jQuery("> prices",t).each(function(t,e){n._prices.push(i.PricesTreeStaticData.parse(e))})},DesignObjectActionBoostStaticData}();e.DesignObjectActionBoostStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1091),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function DesignObjectStagesListStaticData(){}return DesignObjectStagesListStaticData.parse=function(t){var e=new DesignObjectStagesListStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectStagesListStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),DesignObjectStagesListStaticData.prototype._parse=function(t){this._stage=i.StaticDataCollection.parse(n.DesignObjectStageItemStaticData,t,"> stage ")},DesignObjectStagesListStaticData}();e.DesignObjectStagesListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1092),n(23),n(47)],void 0===(r=function(t,e,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DesignObjectStageItemStaticData(){}return DesignObjectStageItemStaticData.parse=function(t){var e=new DesignObjectStageItemStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectStageItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStageItemStaticData.prototype,"points",{get:function(){return this._points},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStageItemStaticData.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStageItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStageItemStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),DesignObjectStageItemStaticData.prototype._parse=function(t){var n=this;this._id=i.Utils.parseInt(jQuery(t).attr("id")),this._points=i.Utils.parseInt(jQuery(t).attr("points")),this._options=[],jQuery("> options",t).each(function(t,e){n._options.push(r.DesignObjectStageOptionsListStaticData.parse(e))}),this._awards=[],jQuery("> awards",t).each(function(t,e){n._awards.push(o.AwardsTreeStaticData.parse(e))}),this._prices=[],jQuery("> prices",t).each(function(t,e){n._prices.push(a.PricesTreeStaticData.parse(e))})},DesignObjectStageItemStaticData}();e.DesignObjectStageItemStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1093),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function DesignObjectStageOptionsListStaticData(){}return DesignObjectStageOptionsListStaticData.parse=function(t){var e=new DesignObjectStageOptionsListStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectStageOptionsListStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStageOptionsListStaticData.prototype,"option",{get:function(){return this._option},enumerable:!0,configurable:!0}),DesignObjectStageOptionsListStaticData.prototype._parse=function(t){this._title=jQuery(t).attr("title"),this._option=i.StaticDataCollection.parse(n.DesignObjectStageOptionItemStaticData,t,"> option ")},DesignObjectStageOptionsListStaticData}();e.DesignObjectStageOptionsListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function DesignObjectStageOptionItemStaticData(){}return DesignObjectStageOptionItemStaticData.parse=function(t){var e=new DesignObjectStageOptionItemStaticData;return e._parse(t),e},Object.defineProperty(DesignObjectStageOptionItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(DesignObjectStageOptionItemStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),DesignObjectStageOptionItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._title=jQuery(t).attr("title")},DesignObjectStageOptionItemStaticData}();e.DesignObjectStageOptionItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1095),n(1099),n(11)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function QuestsStaticData(){}return QuestsStaticData.parse=function(t){var e=new QuestsStaticData;return e._parse(t),e},Object.defineProperty(QuestsStaticData.prototype,"questLine",{get:function(){return this._questLine},enumerable:!0,configurable:!0}),Object.defineProperty(QuestsStaticData.prototype,"tasks",{get:function(){return this._tasks},enumerable:!0,configurable:!0}),QuestsStaticData.prototype._parse=function(t){var n=this;this._questLine=o.StaticDataCollection.parse(i.QuestLineStaticData,t,"> questLine "),this._tasks=[],jQuery("> tasks",t).each(function(t,e){n._tasks.push(r.QuestPoolStaticData.parse(e))})},QuestsStaticData}();e.QuestsStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(1096),n(11)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function QuestLineStaticData(){}return QuestLineStaticData.parse=function(t){var e=new QuestLineStaticData;return e._parse(t),e},Object.defineProperty(QuestLineStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"startableByClient",{get:function(){return this._startableByClient},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"disableAutostart",{get:function(){return this._disableAutostart},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"baseInterval",{get:function(){return this._baseInterval},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"indexCounterInterval",{get:function(){return this._indexCounterInterval},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"maxInterval",{get:function(){return this._maxInterval},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"poolId",{get:function(){return this._poolId},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"wallpost",{get:function(){return this._wallpost},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"noBeautyBonus",{get:function(){return this._noBeautyBonus},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"expireSeconds",{get:function(){return this._expireSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineStaticData.prototype,"quest",{get:function(){return this._quest},enumerable:!0,configurable:!0}),QuestLineStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._type=jQuery(t).attr("type"),this._screen=n.Utils.parseInt(jQuery(t).attr("screen")),this._startableByClient=n.Utils.parseBool(jQuery(t).attr("startableByClient")),this._disableAutostart=n.Utils.parseBool(jQuery(t).attr("disableAutostart")),this._baseInterval=n.Utils.parseInt(jQuery(t).attr("baseInterval")),this._indexCounterInterval=n.Utils.parseInt(jQuery(t).attr("indexCounterInterval")),this._maxInterval=n.Utils.parseInt(jQuery(t).attr("maxInterval")),this._poolId=n.Utils.parseInt(jQuery(t).attr("poolId")),this._wallpost=n.Utils.parseInt(jQuery(t).attr("wallpost")),this._noBeautyBonus=n.Utils.parseInt(jQuery(t).attr("noBeautyBonus")),this._expireSeconds=n.Utils.parseInt(jQuery(t).attr("expireSeconds")),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._quest=o.StaticDataCollection.parse(r.QuestItemStaticData,t,"> quest ")},QuestLineStaticData}();e.QuestLineStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1097),n(23)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function QuestItemStaticData(){}return QuestItemStaticData.parse=function(t){var e=new QuestItemStaticData;return e._parse(t),e},Object.defineProperty(QuestItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(QuestItemStaticData.prototype,"dynamicTimeEnd",{get:function(){return this._dynamicTimeEnd},enumerable:!0,configurable:!0}),Object.defineProperty(QuestItemStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(QuestItemStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(QuestItemStaticData.prototype,"finishedOnLastTask",{get:function(){return this._finishedOnLastTask},enumerable:!0,configurable:!0}),Object.defineProperty(QuestItemStaticData.prototype,"description",{get:function(){return this._description},enumerable:!0,configurable:!0}),Object.defineProperty(QuestItemStaticData.prototype,"tasks",{get:function(){return this._tasks},enumerable:!0,configurable:!0}),Object.defineProperty(QuestItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),QuestItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._dynamicTimeEnd=jQuery(t).attr("dynamicTimeEnd"),this._type=jQuery(t).attr("type"),this._screen=n.Utils.parseInt(jQuery(t).attr("screen")),this._finishedOnLastTask=n.Utils.parseBool(jQuery(t).attr("finishedOnLastTask")),this._description=jQuery("> description",t).first().text(),this._tasks=i.QuestTasksStaticData.parse(jQuery("> tasks",t).first()),this._awards=r.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},QuestItemStaticData}();e.QuestItemStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1098),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function QuestTasksStaticData(){}return QuestTasksStaticData.parse=function(t){var e=new QuestTasksStaticData;return e._parse(t),e},Object.defineProperty(QuestTasksStaticData.prototype,"minValue",{get:function(){return this._minValue},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTasksStaticData.prototype,"maxValue",{get:function(){return this._maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTasksStaticData.prototype,"poolId",{get:function(){return this._poolId},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTasksStaticData.prototype,"poolMode",{get:function(){return this._poolMode},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTasksStaticData.prototype,"task",{get:function(){return this._task},enumerable:!0,configurable:!0}),QuestTasksStaticData.prototype._parse=function(t){this._minValue=n.Utils.parseInt(jQuery(t).attr("minValue")),this._maxValue=n.Utils.parseInt(jQuery(t).attr("maxValue")),this._poolId=n.Utils.parseInt(jQuery(t).attr("poolId")),this._poolMode=jQuery(t).attr("poolMode"),this._task=r.StaticDataCollection.parse(i.QuestTaskStaticData,t,"> task ")},QuestTasksStaticData}();e.QuestTasksStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function QuestTaskStaticData(){}return QuestTaskStaticData.parse=function(t){var e=new QuestTaskStaticData;return e._parse(t),e},Object.defineProperty(QuestTaskStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskStaticData.prototype,"action",{get:function(){return this._action},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskStaticData.prototype,"extraParam",{get:function(){return this._extraParam},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskStaticData.prototype,"guideEvent",{get:function(){return this._guideEvent},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskStaticData.prototype,"userProgress",{get:function(){return this._userProgress},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskStaticData.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),QuestTaskStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._action=jQuery(t).attr("action"),this._param=jQuery(t).attr("param"),this._extraParam=jQuery(t).attr("extraParam"),this._value=n.Utils.parseInt(jQuery(t).attr("value")),this._guideEvent=jQuery(t).attr("guideEvent"),this._userProgress=n.Utils.parseBool(jQuery(t).attr("userProgress")),this._body=jQuery(t).text()},QuestTaskStaticData}();e.QuestTaskStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1100),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function QuestPoolStaticData(){}return QuestPoolStaticData.parse=function(t){var e=new QuestPoolStaticData;return e._parse(t),e},Object.defineProperty(QuestPoolStaticData.prototype,"poolId",{get:function(){return this._poolId},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolStaticData.prototype,"task",{get:function(){return this._task},enumerable:!0,configurable:!0}),QuestPoolStaticData.prototype._parse=function(t){this._poolId=n.Utils.parseInt(jQuery(t).attr("poolId")),this._task=r.StaticDataCollection.parse(i.QuestPoolTaskStaticData,t,"> task ")},QuestPoolStaticData}();e.QuestPoolStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(23),n(1101)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function QuestPoolTaskStaticData(){}return QuestPoolTaskStaticData.parse=function(t){var e=new QuestPoolTaskStaticData;return e._parse(t),e},Object.defineProperty(QuestPoolTaskStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"action",{get:function(){return this._action},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"extraParam",{get:function(){return this._extraParam},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"interval",{get:function(){return this._interval},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"minValue",{get:function(){return this._minValue},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"maxValue",{get:function(){return this._maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"skipPrice",{get:function(){return this._skipPrice},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"weight",{get:function(){return this._weight},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"isTutorial",{get:function(){return this._isTutorial},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"description",{get:function(){return this._description},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(QuestPoolTaskStaticData.prototype,"skip",{get:function(){return this._skip},enumerable:!0,configurable:!0}),QuestPoolTaskStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._action=jQuery(t).attr("action"),this._param=jQuery(t).attr("param"),this._extraParam=jQuery(t).attr("extraParam"),this._value=n.Utils.parseInt(jQuery(t).attr("value")),this._interval=n.Utils.parseInt(jQuery(t).attr("interval")),this._minValue=jQuery(t).attr("minValue"),this._maxValue=jQuery(t).attr("maxValue"),this._screen=n.Utils.parseInt(jQuery(t).attr("screen")),this._priority=n.Utils.parseInt(jQuery(t).attr("priority"))||n.Utils.parseInt("1"),this._skipPrice=n.Utils.parseInt(jQuery(t).attr("skipPrice")),this._weight=n.Utils.parseInt(jQuery(t).attr("weight"))||n.Utils.parseInt("1"),this._isTutorial=n.Utils.parseBool(jQuery(t).attr("isTutorial")),this._description=jQuery("> description",t).first().text(),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._awards=r.AwardsTreeStaticData.parse(jQuery("> awards",t).first()),this._skip=o.QuestPoolTaskSkipPriceStaticData.parse(jQuery("> skip",t).first())},QuestPoolTaskStaticData}();e.QuestPoolTaskStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(47)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function QuestPoolTaskSkipPriceStaticData(){}return QuestPoolTaskSkipPriceStaticData.parse=function(t){var e=new QuestPoolTaskSkipPriceStaticData;return e._parse(t),e},Object.defineProperty(QuestPoolTaskSkipPriceStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),QuestPoolTaskSkipPriceStaticData.prototype._parse=function(t){var n=this;this._prices=[],jQuery("> prices",t).each(function(t,e){n._prices.push(i.PricesTreeStaticData.parse(e))})},QuestPoolTaskSkipPriceStaticData}();e.QuestPoolTaskSkipPriceStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1103),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function PresentsStaticData(){}return PresentsStaticData.parse=function(t){var e=new PresentsStaticData;return e._parse(t),e},Object.defineProperty(PresentsStaticData.prototype,"present",{get:function(){return this._present},enumerable:!0,configurable:!0}),PresentsStaticData.prototype._parse=function(t){this._present=i.StaticDataCollection.parse(n.PresentStaticData,t,"> present ")},PresentsStaticData}();e.PresentsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1104),n(24),n(23)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function PresentStaticData(){}return PresentStaticData.parse=function(t){var e=new PresentStaticData;return e._parse(t),e},Object.defineProperty(PresentStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(PresentStaticData.prototype,"auto",{get:function(){return this._auto},enumerable:!0,configurable:!0}),Object.defineProperty(PresentStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(PresentStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(PresentStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(PresentStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),PresentStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._auto=n.Utils.parseBool(jQuery(t).attr("auto")),this._wallpostId=n.Utils.parseInt(jQuery(t).attr("wallpostId")),this._view=i.PresentViewStaticData.parse(jQuery("> view",t).first()),this._requirements=r.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._awards=o.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},PresentStaticData}();e.PresentStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function PresentViewStaticData(){}return PresentViewStaticData.parse=function(t){var e=new PresentViewStaticData;return e._parse(t),e},Object.defineProperty(PresentViewStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(PresentViewStaticData.prototype,"description",{get:function(){return this._description},enumerable:!0,configurable:!0}),PresentViewStaticData.prototype._parse=function(t){this._title=jQuery("> title",t).first().text(),this._description=jQuery("> description",t).first().text()},PresentViewStaticData}();e.PresentViewStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1106),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function AchievementsStaticData(){}return AchievementsStaticData.parse=function(t){var e=new AchievementsStaticData;return e._parse(t),e},Object.defineProperty(AchievementsStaticData.prototype,"achievement",{get:function(){return this._achievement},enumerable:!0,configurable:!0}),AchievementsStaticData.prototype._parse=function(t){this._achievement=i.StaticDataCollection.parse(n.AchievementStaticData,t,"> achievement ")},AchievementsStaticData}();e.AchievementsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(1107),n(11)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function AchievementStaticData(){}return AchievementStaticData.parse=function(t){var e=new AchievementStaticData;return e._parse(t),e},Object.defineProperty(AchievementStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"sortId",{get:function(){return this._sortId},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"extraParam",{get:function(){return this._extraParam},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"requirementRef",{get:function(){return this._requirementRef},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"disabled",{get:function(){return this._disabled},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),AchievementStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._type=jQuery(t).attr("type"),this._sortId=n.Utils.parseInt(jQuery(t).attr("sortId")),this._param=jQuery(t).attr("param"),this._screen=jQuery(t).attr("screen"),this._wallpostId=n.Utils.parseInt(jQuery(t).attr("wallpostId")),this._location=n.Utils.parseInt(jQuery(t).attr("location")),this._extraParam=jQuery(t).attr("extraParam"),this._requirementRef=jQuery(t).attr("requirementRef"),this._disabled=n.Utils.parseBool(jQuery(t).attr("disabled")),this._title=jQuery(t).attr("title"),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._stage=o.StaticDataCollection.parse(r.AchievementStageStaticData,t,"> stage ")},AchievementStaticData}();e.AchievementStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23),n(1108)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function AchievementStageStaticData(){}return AchievementStageStaticData.parse=function(t){var e=new AchievementStageStaticData;return e._parse(t),e},Object.defineProperty(AchievementStageStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStageStaticData.prototype,"task",{get:function(){return this._task},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStageStaticData.prototype,"missionId",{get:function(){return this._missionId},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStageStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(AchievementStageStaticData.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),AchievementStageStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._task=n.Utils.parseInt(jQuery(t).attr("task")),this._missionId=n.Utils.parseInt(jQuery(t).attr("missionId")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first()),this._view=r.AchievementViewStaticData.parse(jQuery("> view",t).first())},AchievementStageStaticData}();e.AchievementStageStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function AchievementViewStaticData(){}return AchievementViewStaticData.parse=function(t){var e=new AchievementViewStaticData;return e._parse(t),e},Object.defineProperty(AchievementViewStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),AchievementViewStaticData.prototype._parse=function(t){this._icon=jQuery(t).attr("icon")},AchievementViewStaticData}();e.AchievementViewStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1110)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function RoulettesVarListStaticData(){}return RoulettesVarListStaticData.parse=function(t){var e=new RoulettesVarListStaticData;return e._parse(t),e},Object.defineProperty(RoulettesVarListStaticData.prototype,"var",{get:function(){return this._var},enumerable:!0,configurable:!0}),RoulettesVarListStaticData.prototype._parse=function(t){var n=this;this._var=[],jQuery("> var",t).each(function(t,e){n._var.push(i.RoulettesVarItemStaticData.parse(e))})},RoulettesVarListStaticData}();e.RoulettesVarListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function RoulettesVarItemStaticData(){}return RoulettesVarItemStaticData.parse=function(t){var e=new RoulettesVarItemStaticData;return e._parse(t),e},Object.defineProperty(RoulettesVarItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(RoulettesVarItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),RoulettesVarItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._value=jQuery(t).attr("value")},RoulettesVarItemStaticData}();e.RoulettesVarItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5),n(1112)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RouletteNewItemStaticData(){}return RouletteNewItemStaticData.parse=function(t){var e=new RouletteNewItemStaticData;return e._parse(t),e},Object.defineProperty(RouletteNewItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteNewItemStaticData.prototype,"sectors",{get:function(){return this._sectors},enumerable:!0,configurable:!0}),RouletteNewItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._sectors=i.RouletteNewSectorListStaticData.parse(jQuery("> sectors",t).first())},RouletteNewItemStaticData}();e.RouletteNewItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1113),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RouletteNewSectorListStaticData(){}return RouletteNewSectorListStaticData.parse=function(t){var e=new RouletteNewSectorListStaticData;return e._parse(t),e},Object.defineProperty(RouletteNewSectorListStaticData.prototype,"sector",{get:function(){return this._sector},enumerable:!0,configurable:!0}),RouletteNewSectorListStaticData.prototype._parse=function(t){this._sector=i.StaticDataCollection.parse(n.RouletteNewSectorItemStaticData,t,"> sector ")},RouletteNewSectorListStaticData}();e.RouletteNewSectorListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RouletteNewSectorItemStaticData(){}return RouletteNewSectorItemStaticData.parse=function(t){var e=new RouletteNewSectorItemStaticData;return e._parse(t),e},Object.defineProperty(RouletteNewSectorItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteNewSectorItemStaticData.prototype,"weight",{get:function(){return this._weight},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteNewSectorItemStaticData.prototype,"final",{get:function(){return this._final},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteNewSectorItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),RouletteNewSectorItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._weight=jQuery(t).attr("weight"),this._final=jQuery(t).attr("final"),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},RouletteNewSectorItemStaticData}();e.RouletteNewSectorItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1115),n(1116),n(1118)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function WorkshopStaticData(){}return WorkshopStaticData.parse=function(t){var e=new WorkshopStaticData;return e._parse(t),e},Object.defineProperty(WorkshopStaticData.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopStaticData.prototype,"screens",{get:function(){return this._screens},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopStaticData.prototype,"collections",{get:function(){return this._collections},enumerable:!0,configurable:!0}),WorkshopStaticData.prototype._parse=function(t){this._config=n.WorkshopConfigStaticData.parse(jQuery("> config",t).first()),this._screens=i.WorkshopScreenListStaticData.parse(jQuery("> screens",t).first()),this._collections=r.WorkshopCollectionListStaticData.parse(jQuery("> collections",t).first())},WorkshopStaticData}();e.WorkshopStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function WorkshopConfigStaticData(){}return WorkshopConfigStaticData.parse=function(t){var e=new WorkshopConfigStaticData;return e._parse(t),e},Object.defineProperty(WorkshopConfigStaticData.prototype,"slotCooldown",{get:function(){return this._slotCooldown},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopConfigStaticData.prototype,"formula2",{get:function(){return this._formula2},enumerable:!0,configurable:!0}),WorkshopConfigStaticData.prototype._parse=function(t){this._slotCooldown=n.Utils.parseInt(jQuery("> slotCooldown",t).first().text()),this._formula2=jQuery("> formula2",t).first().text()},WorkshopConfigStaticData}();e.WorkshopConfigStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1117),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function WorkshopScreenListStaticData(){}return WorkshopScreenListStaticData.parse=function(t){var e=new WorkshopScreenListStaticData;return e._parse(t),e},Object.defineProperty(WorkshopScreenListStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),WorkshopScreenListStaticData.prototype._parse=function(t){this._screen=i.StaticDataCollection.parse(n.WorkshopScreenStaticData,t,"> screen ")},WorkshopScreenListStaticData}();e.WorkshopScreenListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(23)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function WorkshopScreenStaticData(){}return WorkshopScreenStaticData.parse=function(t){var e=new WorkshopScreenStaticData;return e._parse(t),e},Object.defineProperty(WorkshopScreenStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopScreenStaticData.prototype,"slot",{get:function(){return this._slot},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopScreenStaticData.prototype,"finalAward",{get:function(){return this._finalAward},enumerable:!0,configurable:!0}),WorkshopScreenStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._slot=i.RequirementsTreeStaticData.parse(jQuery("> slot",t).first()),this._finalAward=r.AwardsTreeStaticData.parse(jQuery("> finalAward",t).first())},WorkshopScreenStaticData}();e.WorkshopScreenStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1119),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function WorkshopCollectionListStaticData(){}return WorkshopCollectionListStaticData.parse=function(t){var e=new WorkshopCollectionListStaticData;return e._parse(t),e},Object.defineProperty(WorkshopCollectionListStaticData.prototype,"collection",{get:function(){return this._collection},enumerable:!0,configurable:!0}),WorkshopCollectionListStaticData.prototype._parse=function(t){this._collection=i.StaticDataCollection.parse(n.WorkshopCollectionStaticData,t,"> collection ")},WorkshopCollectionListStaticData}();e.WorkshopCollectionListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1120),n(1122),n(1123),n(1126),n(23)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function WorkshopCollectionStaticData(){}return WorkshopCollectionStaticData.parse=function(t){var e=new WorkshopCollectionStaticData;return e._parse(t),e},Object.defineProperty(WorkshopCollectionStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionStaticData.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionStaticData.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionStaticData.prototype,"buy",{get:function(){return this._buy},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionStaticData.prototype,"newElementChances",{get:function(){return this._newElementChances},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionStaticData.prototype,"collect",{get:function(){return this._collect},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionStaticData.prototype,"send",{get:function(){return this._send},enumerable:!0,configurable:!0}),WorkshopCollectionStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._screenId=n.Utils.parseInt(jQuery(t).attr("screenId")),this._wallpostId=n.Utils.parseInt(jQuery(t).attr("wallpostId")),this._elements=i.WorkshopElementsListStaticData.parse(jQuery("> elements",t).first()),this._buy=r.WorkshopBuyStaticData.parse(jQuery("> buy",t).first()),this._newElementChances=o.WorkshopChancesStaticData.parse(jQuery("> newElementChances",t).first()),this._collect=a.WorkshopCollectStaticData.parse(jQuery("> collect",t).first()),this._send=s.AwardsTreeStaticData.parse(jQuery("> send",t).first())},WorkshopCollectionStaticData}();e.WorkshopCollectionStaticData=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1121),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function WorkshopElementsListStaticData(){}return WorkshopElementsListStaticData.parse=function(t){var e=new WorkshopElementsListStaticData;return e._parse(t),e},Object.defineProperty(WorkshopElementsListStaticData.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),WorkshopElementsListStaticData.prototype._parse=function(t){this._element=i.StaticDataCollection.parse(n.WorkshopElementStaticData,t,"> element ")},WorkshopElementsListStaticData}();e.WorkshopElementsListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(23)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function WorkshopElementStaticData(){}return WorkshopElementStaticData.parse=function(t){var e=new WorkshopElementStaticData;return e._parse(t),e},Object.defineProperty(WorkshopElementStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopElementStaticData.prototype,"firstAwards",{get:function(){return this._firstAwards},enumerable:!0,configurable:!0}),WorkshopElementStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._firstAwards=n.AwardsTreeStaticData.parse(jQuery("> firstAwards",t).first())},WorkshopElementStaticData}();e.WorkshopElementStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(24),n(47)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function WorkshopBuyStaticData(){}return WorkshopBuyStaticData.parse=function(t){var e=new WorkshopBuyStaticData;return e._parse(t),e},Object.defineProperty(WorkshopBuyStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopBuyStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),WorkshopBuyStaticData.prototype._parse=function(t){this._requirements=n.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._prices=i.PricesTreeStaticData.parse(jQuery("> prices",t).first())},WorkshopBuyStaticData}();e.WorkshopBuyStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1124)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WorkshopChancesStaticData(){}return WorkshopChancesStaticData.parse=function(t){var e=new WorkshopChancesStaticData;return e._parse(t),e},Object.defineProperty(WorkshopChancesStaticData.prototype,"chance",{get:function(){return this._chance},enumerable:!0,configurable:!0}),WorkshopChancesStaticData.prototype._parse=function(t){var n=this;this._chance=[],jQuery("> chance",t).each(function(t,e){n._chance.push(i.WorkshopChanceStaticData.parse(e))})},WorkshopChancesStaticData}();e.WorkshopChancesStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1125)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WorkshopChanceStaticData(){}return WorkshopChanceStaticData.parse=function(t){var e=new WorkshopChanceStaticData;return e._parse(t),e},Object.defineProperty(WorkshopChanceStaticData.prototype,"elementCount",{get:function(){return this._elementCount},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopChanceStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),WorkshopChanceStaticData.prototype._parse=function(t){var n=this;this._elementCount=i.Utils.parseInt(jQuery(t).attr("elementCount")),this._value=[],jQuery("> value",t).each(function(t,e){n._value.push(r.WorkshopChanceValueStaticData.parse(e))})},WorkshopChanceStaticData}();e.WorkshopChanceStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function WorkshopChanceValueStaticData(){}return WorkshopChanceValueStaticData.parse=function(t){var e=new WorkshopChanceValueStaticData;return e._parse(t),e},Object.defineProperty(WorkshopChanceValueStaticData.prototype,"buyNumber",{get:function(){return this._buyNumber},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopChanceValueStaticData.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),WorkshopChanceValueStaticData.prototype._parse=function(t){this._buyNumber=n.Utils.parseInt(jQuery(t).attr("buyNumber")),this._body=n.Utils.parseInt(jQuery(t).text())},WorkshopChanceValueStaticData}();e.WorkshopChanceValueStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(47),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function WorkshopCollectStaticData(){}return WorkshopCollectStaticData.parse=function(t){var e=new WorkshopCollectStaticData;return e._parse(t),e},Object.defineProperty(WorkshopCollectStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),WorkshopCollectStaticData.prototype._parse=function(t){this._prices=n.PricesTreeStaticData.parse(jQuery("> prices",t).first()),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},WorkshopCollectStaticData}();e.WorkshopCollectStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SocialStaticData(){}return SocialStaticData.parse=function(t){var e=new SocialStaticData;return e._parse(t),e},Object.defineProperty(SocialStaticData.prototype,"groupId",{get:function(){return this._groupId},enumerable:!0,configurable:!0}),Object.defineProperty(SocialStaticData.prototype,"groupURL",{get:function(){return this._groupURL},enumerable:!0,configurable:!0}),Object.defineProperty(SocialStaticData.prototype,"findFriendsUrl",{get:function(){return this._findFriendsUrl},enumerable:!0,configurable:!0}),Object.defineProperty(SocialStaticData.prototype,"termsUrl",{get:function(){return this._termsUrl},enumerable:!0,configurable:!0}),SocialStaticData.prototype._parse=function(t){this._groupId=jQuery("> groupId",t).first().text(),this._groupURL=jQuery("> groupURL",t).first().text(),this._findFriendsUrl=jQuery("> findFriendsUrl",t).first().text(),this._termsUrl=jQuery("> termsUrl",t).first().text()},SocialStaticData}();e.SocialStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1129)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function NotificationsStaticData(){}return NotificationsStaticData.parse=function(t){var e=new NotificationsStaticData;return e._parse(t),e},Object.defineProperty(NotificationsStaticData.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),NotificationsStaticData.prototype._parse=function(t){var n=this;this._message=[],jQuery("> message",t).each(function(t,e){n._message.push(i.NotificationMessageStaticData.parse(e))})},NotificationsStaticData}();e.NotificationsStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function NotificationMessageStaticData(){}return NotificationMessageStaticData.parse=function(t){var e=new NotificationMessageStaticData;return e._parse(t),e},Object.defineProperty(NotificationMessageStaticData.prototype,"n",{get:function(){return this._n},enumerable:!0,configurable:!0}),Object.defineProperty(NotificationMessageStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(NotificationMessageStaticData.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),NotificationMessageStaticData.prototype._parse=function(t){this._n=n.Utils.parseInt(jQuery(t).attr("n")),this._type=jQuery(t).attr("type"),this._body=jQuery(t).text()},NotificationMessageStaticData}();e.NotificationMessageStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1131),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function MissionsStaticData(){}return MissionsStaticData.parse=function(t){var e=new MissionsStaticData;return e._parse(t),e},Object.defineProperty(MissionsStaticData.prototype,"mission",{get:function(){return this._mission},enumerable:!0,configurable:!0}),MissionsStaticData.prototype._parse=function(t){this._mission=i.StaticDataCollection.parse(n.MissionItemStaticData,t,"> mission ")},MissionsStaticData}();e.MissionsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function MissionItemStaticData(){}return MissionItemStaticData.parse=function(t){var e=new MissionItemStaticData;return e._parse(t),e},Object.defineProperty(MissionItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(MissionItemStaticData.prototype,"action",{get:function(){return this._action},enumerable:!0,configurable:!0}),Object.defineProperty(MissionItemStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(MissionItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),MissionItemStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._action=jQuery(t).attr("action"),this._param=jQuery(t).attr("param"),this._value=n.Utils.parseInt(jQuery(t).attr("value"))},MissionItemStaticData}();e.MissionItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1133),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function AppsMapStaticData(){}return AppsMapStaticData.parse=function(t){var e=new AppsMapStaticData;return e._parse(t),e},Object.defineProperty(AppsMapStaticData.prototype,"app",{get:function(){return this._app},enumerable:!0,configurable:!0}),AppsMapStaticData.prototype._parse=function(t){this._app=i.StaticDataCollection.parse(n.AppsMapItemStaticData,t,"> app ")},AppsMapStaticData}();e.AppsMapStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function AppsMapItemStaticData(){}return AppsMapItemStaticData.parse=function(t){var e=new AppsMapItemStaticData;return e._parse(t),e},Object.defineProperty(AppsMapItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(AppsMapItemStaticData.prototype,"targetAppId",{get:function(){return this._targetAppId},enumerable:!0,configurable:!0}),AppsMapItemStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._targetAppId=jQuery(t).attr("targetAppId")},AppsMapItemStaticData}();e.AppsMapItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1135),n(1137)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function GladeDuelStaticData(){}return GladeDuelStaticData.parse=function(t){var e=new GladeDuelStaticData;return e._parse(t),e},Object.defineProperty(GladeDuelStaticData.prototype,"configs",{get:function(){return this._configs},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelStaticData.prototype,"gladeDuel",{get:function(){return this._gladeDuel},enumerable:!0,configurable:!0}),GladeDuelStaticData.prototype._parse=function(t){this._configs=n.GladeDuelConfigListStaticData.parse(jQuery("> configs",t).first()),this._gladeDuel=i.GladeDuelItemStaticData.parse(jQuery("> gladeDuel",t).first())},GladeDuelStaticData}();e.GladeDuelStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1136)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GladeDuelConfigListStaticData(){}return GladeDuelConfigListStaticData.parse=function(t){var e=new GladeDuelConfigListStaticData;return e._parse(t),e},Object.defineProperty(GladeDuelConfigListStaticData.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),GladeDuelConfigListStaticData.prototype._parse=function(t){var n=this;this._config=[],jQuery("> config",t).each(function(t,e){n._config.push(i.GladeDuelConfigItemStaticData.parse(e))})},GladeDuelConfigListStaticData}();e.GladeDuelConfigListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GladeDuelConfigItemStaticData(){}return GladeDuelConfigItemStaticData.parse=function(t){var e=new GladeDuelConfigItemStaticData;return e._parse(t),e},Object.defineProperty(GladeDuelConfigItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelConfigItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),GladeDuelConfigItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._value=jQuery(t).attr("value")},GladeDuelConfigItemStaticData}();e.GladeDuelConfigItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5),n(1138),n(1140)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function GladeDuelItemStaticData(){}return GladeDuelItemStaticData.parse=function(t){var e=new GladeDuelItemStaticData;return e._parse(t),e},Object.defineProperty(GladeDuelItemStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelItemStaticData.prototype,"formulas",{get:function(){return this._formulas},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelItemStaticData.prototype,"token",{get:function(){return this._token},enumerable:!0,configurable:!0}),GladeDuelItemStaticData.prototype._parse=function(t){this._screen=n.Utils.parseInt(jQuery(t).attr("screen")),this._formulas=i.GladeDuelFormulaListStaticData.parse(jQuery("> formulas",t).first()),this._token=r.GladeDuelTokenStaticData.parse(jQuery("> token",t).first())},GladeDuelItemStaticData}();e.GladeDuelItemStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1139)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GladeDuelFormulaListStaticData(){}return GladeDuelFormulaListStaticData.parse=function(t){var e=new GladeDuelFormulaListStaticData;return e._parse(t),e},Object.defineProperty(GladeDuelFormulaListStaticData.prototype,"formula",{get:function(){return this._formula},enumerable:!0,configurable:!0}),GladeDuelFormulaListStaticData.prototype._parse=function(t){var n=this;this._formula=[],jQuery("> formula",t).each(function(t,e){n._formula.push(i.GladeDuelFormulaItemStaticData.parse(e))})},GladeDuelFormulaListStaticData}();e.GladeDuelFormulaListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GladeDuelFormulaItemStaticData(){}return GladeDuelFormulaItemStaticData.parse=function(t){var e=new GladeDuelFormulaItemStaticData;return e._parse(t),e},Object.defineProperty(GladeDuelFormulaItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelFormulaItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),GladeDuelFormulaItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._value=jQuery(t).attr("value")},GladeDuelFormulaItemStaticData}();e.GladeDuelFormulaItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5),n(23),n(47)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function GladeDuelTokenStaticData(){}return GladeDuelTokenStaticData.parse=function(t){var e=new GladeDuelTokenStaticData;return e._parse(t),e},Object.defineProperty(GladeDuelTokenStaticData.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelTokenStaticData.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelTokenStaticData.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelTokenStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelTokenStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),GladeDuelTokenStaticData.prototype._parse=function(t){this._current=jQuery(t).attr("current"),this._target=jQuery(t).attr("target"),this._time=n.Utils.parseInt(jQuery(t).attr("time")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first()),this._prices=r.PricesTreeStaticData.parse(jQuery("> prices",t).first())},GladeDuelTokenStaticData}();e.GladeDuelTokenStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1142),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function FarmListStaticData(){}return FarmListStaticData.parse=function(t){var e=new FarmListStaticData;return e._parse(t),e},Object.defineProperty(FarmListStaticData.prototype,"farm",{get:function(){return this._farm},enumerable:!0,configurable:!0}),FarmListStaticData.prototype._parse=function(t){this._farm=i.StaticDataCollection.parse(n.FarmItemStaticData,t,"> farm ")},FarmListStaticData}();e.FarmListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1143),n(23),n(1145),n(1147)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function FarmItemStaticData(){}return FarmItemStaticData.parse=function(t){var e=new FarmItemStaticData;return e._parse(t),e},Object.defineProperty(FarmItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(FarmItemStaticData.prototype,"settings",{get:function(){return this._settings},enumerable:!0,configurable:!0}),Object.defineProperty(FarmItemStaticData.prototype,"init",{get:function(){return this._init},enumerable:!0,configurable:!0}),Object.defineProperty(FarmItemStaticData.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(FarmItemStaticData.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),FarmItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._settings=i.FarmSettingListStaticData.parse(jQuery("> settings",t).first()),this._init=r.AwardsTreeStaticData.parse(jQuery("> init",t).first()),this._cells=o.FarmCellListStaticData.parse(jQuery("> cells",t).first()),this._objects=a.FarmObjectListStaticData.parse(jQuery("> objects",t).first())},FarmItemStaticData}();e.FarmItemStaticData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1144)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function FarmSettingListStaticData(){}return FarmSettingListStaticData.parse=function(t){var e=new FarmSettingListStaticData;return e._parse(t),e},Object.defineProperty(FarmSettingListStaticData.prototype,"setting",{get:function(){return this._setting},enumerable:!0,configurable:!0}),FarmSettingListStaticData.prototype._parse=function(t){var n=this;this._setting=[],jQuery("> setting",t).each(function(t,e){n._setting.push(i.FarmSettingItemStaticData.parse(e))})},FarmSettingListStaticData}();e.FarmSettingListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function FarmSettingItemStaticData(){}return FarmSettingItemStaticData.parse=function(t){var e=new FarmSettingItemStaticData;return e._parse(t),e},Object.defineProperty(FarmSettingItemStaticData.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(FarmSettingItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),FarmSettingItemStaticData.prototype._parse=function(t){this._param=jQuery(t).attr("param"),this._value=jQuery(t).attr("value")},FarmSettingItemStaticData}();e.FarmSettingItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1146),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function FarmCellListStaticData(){}return FarmCellListStaticData.parse=function(t){var e=new FarmCellListStaticData;return e._parse(t),e},Object.defineProperty(FarmCellListStaticData.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),FarmCellListStaticData.prototype._parse=function(t){this._cell=i.StaticDataCollection.parse(n.FarmCellItemStaticData,t,"> cell ")},FarmCellListStaticData}();e.FarmCellListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(47)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function FarmCellItemStaticData(){}return FarmCellItemStaticData.parse=function(t){var e=new FarmCellItemStaticData;return e._parse(t),e},Object.defineProperty(FarmCellItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellItemStaticData.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellItemStaticData.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellItemStaticData.prototype,"init",{get:function(){return this._init},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellItemStaticData.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellItemStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),FarmCellItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._x=n.Utils.parseInt(jQuery(t).attr("x")),this._y=n.Utils.parseInt(jQuery(t).attr("y")),this._init=n.Utils.parseBool(jQuery(t).attr("init")),this._object=jQuery(t).attr("object"),this._prices=i.PricesTreeStaticData.parse(jQuery("> prices",t).first())},FarmCellItemStaticData}();e.FarmCellItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1148),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function FarmObjectListStaticData(){}return FarmObjectListStaticData.parse=function(t){var e=new FarmObjectListStaticData;return e._parse(t),e},Object.defineProperty(FarmObjectListStaticData.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),FarmObjectListStaticData.prototype._parse=function(t){this._object=i.StaticDataCollection.parse(n.FarmObjectItemStaticData,t,"> object ")},FarmObjectListStaticData}();e.FarmObjectListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1149)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function FarmObjectItemStaticData(){}return FarmObjectItemStaticData.parse=function(t){var e=new FarmObjectItemStaticData;return e._parse(t),e},Object.defineProperty(FarmObjectItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectItemStaticData.prototype,"nameKey",{get:function(){return this._nameKey},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectItemStaticData.prototype,"stages",{get:function(){return this._stages},enumerable:!0,configurable:!0}),FarmObjectItemStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._nameKey=jQuery(t).attr("nameKey"),this._stages=n.FarmObjectStageListStaticData.parse(jQuery("> stages",t).first())},FarmObjectItemStaticData}();e.FarmObjectItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1150),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function FarmObjectStageListStaticData(){}return FarmObjectStageListStaticData.parse=function(t){var e=new FarmObjectStageListStaticData;return e._parse(t),e},Object.defineProperty(FarmObjectStageListStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),FarmObjectStageListStaticData.prototype._parse=function(t){this._stage=i.StaticDataCollection.parse(n.FarmObjectStageItemStaticData,t,"> stage ")},FarmObjectStageListStaticData}();e.FarmObjectStageListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(47),n(1151),n(23)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function FarmObjectStageItemStaticData(){}return FarmObjectStageItemStaticData.parse=function(t){var e=new FarmObjectStageItemStaticData;return e._parse(t),e},Object.defineProperty(FarmObjectStageItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageItemStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageItemStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageItemStaticData.prototype,"generator",{get:function(){return this._generator},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),FarmObjectStageItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._wallpostId=n.Utils.parseInt(jQuery(t).attr("wallpostId")),this._prices=i.PricesTreeStaticData.parse(jQuery("> prices",t).first()),this._generator=r.FarmObjectStageGeneratorStaticData.parse(jQuery("> generator",t).first()),this._awards=o.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},FarmObjectStageItemStaticData}();e.FarmObjectStageItemStaticData=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function FarmObjectStageGeneratorStaticData(){}return FarmObjectStageGeneratorStaticData.parse=function(t){var e=new FarmObjectStageGeneratorStaticData;return e._parse(t),e},Object.defineProperty(FarmObjectStageGeneratorStaticData.prototype,"cooldown",{get:function(){return this._cooldown},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageGeneratorStaticData.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageGeneratorStaticData.prototype,"factor",{get:function(){return this._factor},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageGeneratorStaticData.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(FarmObjectStageGeneratorStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),FarmObjectStageGeneratorStaticData.prototype._parse=function(t){this._cooldown=n.Utils.parseInt(jQuery(t).attr("cooldown")),this._max=n.Utils.parseInt(jQuery(t).attr("max")),this._factor=n.Utils.parseInt(jQuery(t).attr("factor")),this._icon=jQuery(t).attr("icon"),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},FarmObjectStageGeneratorStaticData}();e.FarmObjectStageGeneratorStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1153),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function GuidesStaticData(){}return GuidesStaticData.parse=function(t){var e=new GuidesStaticData;return e._parse(t),e},Object.defineProperty(GuidesStaticData.prototype,"guide",{get:function(){return this._guide},enumerable:!0,configurable:!0}),GuidesStaticData.prototype._parse=function(t){this._guide=i.StaticDataCollection.parse(n.GuideQueueStaticData,t,"> guide ")},GuidesStaticData}();e.GuidesStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(101),n(5),n(24)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideQueueStaticData(){}return GuideQueueStaticData.parse=function(t){var e=new GuideQueueStaticData;return e._parse(t),e},Object.defineProperty(GuideQueueStaticData.prototype,"guideSteps",{get:function(){return this._guideSteps},enumerable:!0,configurable:!0}),Object.defineProperty(GuideQueueStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GuideQueueStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideQueueStaticData.prototype._parse=function(t){var n=this;this._id=r.Utils.parseInt(jQuery(t).attr("id")),this._requirements=o.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._guideSteps=[],jQuery(t).children().not("requirements").each(function(t,e){n._guideSteps.push(new i.GuideStepStaticData(e))})},GuideQueueStaticData}();e.GuideQueueStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1155)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ViralExchangeStaticData(){}return ViralExchangeStaticData.parse=function(t){var e=new ViralExchangeStaticData;return e._parse(t),e},Object.defineProperty(ViralExchangeStaticData.prototype,"multiAcceptThreshold",{get:function(){return this._multiAcceptThreshold},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeStaticData.prototype,"multiResponseThreshold",{get:function(){return this._multiResponseThreshold},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeStaticData.prototype,"requestMaxCount",{get:function(){return this._requestMaxCount},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeStaticData.prototype,"responseMaxCount",{get:function(){return this._responseMaxCount},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeStaticData.prototype,"dailyLimit",{get:function(){return this._dailyLimit},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeStaticData.prototype,"guestExpire",{get:function(){return this._guestExpire},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeStaticData.prototype,"resourceList",{get:function(){return this._resourceList},enumerable:!0,configurable:!0}),ViralExchangeStaticData.prototype._parse=function(t){var n=this;this._multiAcceptThreshold=i.Utils.parseInt(jQuery("> multiAcceptThreshold",t).first().text()),this._multiResponseThreshold=i.Utils.parseInt(jQuery("> multiResponseThreshold",t).first().text()),this._requestMaxCount=i.Utils.parseInt(jQuery("> requestMaxCount",t).first().text()),this._responseMaxCount=i.Utils.parseInt(jQuery("> responseMaxCount",t).first().text()),this._dailyLimit=i.Utils.parseInt(jQuery("> dailyLimit",t).first().text()),this._guestExpire=i.Utils.parseInt(jQuery("> guestExpire",t).first().text()),this._resourceList=[],jQuery("> resourceList",t).each(function(t,e){n._resourceList.push(r.ViralExchangeResourceListStaticData.parse(e))})},ViralExchangeStaticData}();e.ViralExchangeStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1156),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function ViralExchangeResourceListStaticData(){}return ViralExchangeResourceListStaticData.parse=function(t){var e=new ViralExchangeResourceListStaticData;return e._parse(t),e},Object.defineProperty(ViralExchangeResourceListStaticData.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeResourceListStaticData.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),ViralExchangeResourceListStaticData.prototype._parse=function(t){this._screen=n.Utils.parseInt(jQuery(t).attr("screen")),this._item=r.StaticDataCollection.parse(i.ViralExchangeResourceItemStaticData,t,"> item ")},ViralExchangeResourceListStaticData}();e.ViralExchangeResourceListStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ViralExchangeResourceItemStaticData(){}return ViralExchangeResourceItemStaticData.parse=function(t){var e=new ViralExchangeResourceItemStaticData;return e._parse(t),e},Object.defineProperty(ViralExchangeResourceItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ViralExchangeResourceItemStaticData.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),ViralExchangeResourceItemStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._object=jQuery(t).attr("object")},ViralExchangeResourceItemStaticData}();e.ViralExchangeResourceItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1158)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ViralRefsStaticData(){}return ViralRefsStaticData.parse=function(t){var e=new ViralRefsStaticData;return e._parse(t),e},Object.defineProperty(ViralRefsStaticData.prototype,"viralRef",{get:function(){return this._viralRef},enumerable:!0,configurable:!0}),ViralRefsStaticData.prototype._parse=function(t){this._viralRef=n.ViralRefItemStaticData.parse(jQuery("> viralRef",t).first())},ViralRefsStaticData}();e.ViralRefsStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function ViralRefItemStaticData(){}return ViralRefItemStaticData.parse=function(t){var e=new ViralRefItemStaticData;return e._parse(t),e},Object.defineProperty(ViralRefItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(ViralRefItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),ViralRefItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},ViralRefItemStaticData}();e.ViralRefItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(24),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function HappyNewYearStaticData(){}return HappyNewYearStaticData.parse=function(t){var e=new HappyNewYearStaticData;return e._parse(t),e},Object.defineProperty(HappyNewYearStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(HappyNewYearStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),HappyNewYearStaticData.prototype._parse=function(t){this._requirements=n.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},HappyNewYearStaticData}();e.HappyNewYearStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1161),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RatingsStaticData(){}return RatingsStaticData.parse=function(t){var e=new RatingsStaticData;return e._parse(t),e},Object.defineProperty(RatingsStaticData.prototype,"rating",{get:function(){return this._rating},enumerable:!0,configurable:!0}),RatingsStaticData.prototype._parse=function(t){this._rating=i.StaticDataCollection.parse(n.RatingItemStaticData,t,"> rating ")},RatingsStaticData}();e.RatingsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1162)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RatingItemStaticData(){}return RatingItemStaticData.parse=function(t){var e=new RatingItemStaticData;return e._parse(t),e},Object.defineProperty(RatingItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"friend",{get:function(){return this._friend},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"cache",{get:function(){return this._cache},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"sort",{get:function(){return this._sort},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"datePattern",{get:function(){return this._datePattern},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"hidden",{get:function(){return this._hidden},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"cub",{get:function(){return this._cub},enumerable:!0,configurable:!0}),Object.defineProperty(RatingItemStaticData.prototype,"places",{get:function(){return this._places},enumerable:!0,configurable:!0}),RatingItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._type=jQuery(t).attr("type"),this._friend=n.Utils.parseBool(jQuery(t).attr("friend")),this._cache=n.Utils.parseBool(jQuery(t).attr("cache")),this._sort=n.Utils.parseInt(jQuery(t).attr("sort")),this._datePattern=jQuery(t).attr("datePattern"),this._hidden=n.Utils.parseBool(jQuery(t).attr("hidden")),this._cub=n.Utils.parseBool(jQuery(t).attr("cub")),this._places=i.RatingPlaceListStaticData.parse(jQuery("> places",t).first())},RatingItemStaticData}();e.RatingItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1163),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RatingPlaceListStaticData(){}return RatingPlaceListStaticData.parse=function(t){var e=new RatingPlaceListStaticData;return e._parse(t),e},Object.defineProperty(RatingPlaceListStaticData.prototype,"place",{get:function(){return this._place},enumerable:!0,configurable:!0}),RatingPlaceListStaticData.prototype._parse=function(t){this._place=i.StaticDataCollection.parse(n.RatingPlaceItemStaticData,t,"> place ")},RatingPlaceListStaticData}();e.RatingPlaceListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function RatingPlaceItemStaticData(){}return RatingPlaceItemStaticData.parse=function(t){var e=new RatingPlaceItemStaticData;return e._parse(t),e},Object.defineProperty(RatingPlaceItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(RatingPlaceItemStaticData.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(RatingPlaceItemStaticData.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),RatingPlaceItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._from=n.Utils.parseInt(jQuery(t).attr("from")),this._to=n.Utils.parseInt(jQuery(t).attr("to"))},RatingPlaceItemStaticData}();e.RatingPlaceItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1165),n(1190)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventsStaticData(){}return EventsStaticData.parse=function(t){var e=new EventsStaticData;return e._parse(t),e},Object.defineProperty(EventsStaticData.prototype,"newYear",{get:function(){return this._newYear},enumerable:!0,configurable:!0}),Object.defineProperty(EventsStaticData.prototype,"raffleMoney",{get:function(){return this._raffleMoney},enumerable:!0,configurable:!0}),EventsStaticData.prototype._parse=function(t){this._newYear=n.EventNewYearStaticData.parse(jQuery("> newYear",t).first()),this._raffleMoney=i.RaffleMoneyEventStaticData.parse(jQuery("> raffleMoney",t).first())},EventsStaticData}();e.EventsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(1166),n(1168),n(1169),n(1172),n(1179),n(1186)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function EventNewYearStaticData(){}return EventNewYearStaticData.parse=function(t){var e=new EventNewYearStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearStaticData.prototype,"enable",{get:function(){return this._enable},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"init",{get:function(){return this._init},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"general",{get:function(){return this._general},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"extra",{get:function(){return this._extra},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"vars",{get:function(){return this._vars},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"useEnergy",{get:function(){return this._useEnergy},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"firstDaily",{get:function(){return this._firstDaily},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"presents",{get:function(){return this._presents},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"ratings",{get:function(){return this._ratings},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearStaticData.prototype,"achievements",{get:function(){return this._achievements},enumerable:!0,configurable:!0}),EventNewYearStaticData.prototype._parse=function(t){this._enable=n.Utils.parseBool(jQuery(t).attr("enable")),this._init=i.RequirementsTreeStaticData.parse(jQuery("> init",t).first()),this._general=i.RequirementsTreeStaticData.parse(jQuery("> general",t).first()),this._extra=i.RequirementsTreeStaticData.parse(jQuery("> extra",t).first()),this._vars=r.EventNewYearVarsListStaticData.parse(jQuery("> vars",t).first()),this._useEnergy=o.EventNewYearUseEnergyStaticData.parse(jQuery("> useEnergy",t).first()),this._firstDaily=a.EventNewYearFirstDailyStaticData.parse(jQuery("> firstDaily",t).first()),this._presents=s.EventNewYearPresentsStaticData.parse(jQuery("> presents",t).first()),this._ratings=c.EventNewYearRatingsStaticData.parse(jQuery("> ratings",t).first()),this._achievements=u.EventNewYearAchievementsStaticData.parse(jQuery("> achievements",t).first())},EventNewYearStaticData}();e.EventNewYearStaticData=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1167)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearVarsListStaticData(){}return EventNewYearVarsListStaticData.parse=function(t){var e=new EventNewYearVarsListStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearVarsListStaticData.prototype,"var",{get:function(){return this._var},enumerable:!0,configurable:!0}),EventNewYearVarsListStaticData.prototype._parse=function(t){var n=this;this._var=[],jQuery("> var",t).each(function(t,e){n._var.push(i.EventNewYearVarItemStaticData.parse(e))})},EventNewYearVarsListStaticData}();e.EventNewYearVarsListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearVarItemStaticData(){}return EventNewYearVarItemStaticData.parse=function(t){var e=new EventNewYearVarItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearVarItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearVarItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),EventNewYearVarItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._value=jQuery(t).attr("value")},EventNewYearVarItemStaticData}();e.EventNewYearVarItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(23)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function EventNewYearUseEnergyStaticData(){}return EventNewYearUseEnergyStaticData.parse=function(t){var e=new EventNewYearUseEnergyStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearUseEnergyStaticData.prototype,"expGeneral",{get:function(){return this._expGeneral},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearUseEnergyStaticData.prototype,"expExtra",{get:function(){return this._expExtra},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearUseEnergyStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),EventNewYearUseEnergyStaticData.prototype._parse=function(t){this._expGeneral=jQuery(t).attr("expGeneral"),this._expExtra=jQuery(t).attr("expExtra"),this._awards=n.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},EventNewYearUseEnergyStaticData}();e.EventNewYearUseEnergyStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1170)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearFirstDailyStaticData(){}return EventNewYearFirstDailyStaticData.parse=function(t){var e=new EventNewYearFirstDailyStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearFirstDailyStaticData.prototype,"sets",{get:function(){return this._sets},enumerable:!0,configurable:!0}),EventNewYearFirstDailyStaticData.prototype._parse=function(t){var n=this;this._sets=[],jQuery("> sets",t).each(function(t,e){n._sets.push(i.EventNewYearFirstDailySetsListStaticData.parse(e))})},EventNewYearFirstDailyStaticData}();e.EventNewYearFirstDailyStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(24),n(1171),n(11)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function EventNewYearFirstDailySetsListStaticData(){}return EventNewYearFirstDailySetsListStaticData.parse=function(t){var e=new EventNewYearFirstDailySetsListStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearFirstDailySetsListStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearFirstDailySetsListStaticData.prototype,"set",{get:function(){return this._set},enumerable:!0,configurable:!0}),EventNewYearFirstDailySetsListStaticData.prototype._parse=function(t){this._requirements=n.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._set=r.StaticDataCollection.parse(i.EventNewYearFirstDailySetItemStaticData,t,"> set ")},EventNewYearFirstDailySetsListStaticData}();e.EventNewYearFirstDailySetsListStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(23)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function EventNewYearFirstDailySetItemStaticData(){}return EventNewYearFirstDailySetItemStaticData.parse=function(t){var e=new EventNewYearFirstDailySetItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearFirstDailySetItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearFirstDailySetItemStaticData.prototype,"npc",{get:function(){return this._npc},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearFirstDailySetItemStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearFirstDailySetItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),EventNewYearFirstDailySetItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._npc=jQuery(t).attr("npc"),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._awards=r.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},EventNewYearFirstDailySetItemStaticData}();e.EventNewYearFirstDailySetItemStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1173),n(1175)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearPresentsStaticData(){}return EventNewYearPresentsStaticData.parse=function(t){var e=new EventNewYearPresentsStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearPresentsStaticData.prototype,"settings",{get:function(){return this._settings},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearPresentsStaticData.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),EventNewYearPresentsStaticData.prototype._parse=function(t){this._settings=n.EventNewYearPresentSettingsListStaticData.parse(jQuery("> settings",t).first()),this._content=i.EventNewYearPresentContentStaticData.parse(jQuery("> content",t).first())},EventNewYearPresentsStaticData}();e.EventNewYearPresentsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1174)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearPresentSettingsListStaticData(){}return EventNewYearPresentSettingsListStaticData.parse=function(t){var e=new EventNewYearPresentSettingsListStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearPresentSettingsListStaticData.prototype,"setting",{get:function(){return this._setting},enumerable:!0,configurable:!0}),EventNewYearPresentSettingsListStaticData.prototype._parse=function(t){var n=this;this._setting=[],jQuery("> setting",t).each(function(t,e){n._setting.push(i.EventNewYearPresentSettingItemStaticData.parse(e))})},EventNewYearPresentSettingsListStaticData}();e.EventNewYearPresentSettingsListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearPresentSettingItemStaticData(){}return EventNewYearPresentSettingItemStaticData.parse=function(t){var e=new EventNewYearPresentSettingItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearPresentSettingItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearPresentSettingItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),EventNewYearPresentSettingItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._value=jQuery(t).attr("value")},EventNewYearPresentSettingItemStaticData}();e.EventNewYearPresentSettingItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1176),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearPresentContentStaticData(){}return EventNewYearPresentContentStaticData.parse=function(t){var e=new EventNewYearPresentContentStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearPresentContentStaticData.prototype,"present",{get:function(){return this._present},enumerable:!0,configurable:!0}),EventNewYearPresentContentStaticData.prototype._parse=function(t){this._present=i.StaticDataCollection.parse(n.EventNewYearPresentContentPresentStaticData,t,"> present ")},EventNewYearPresentContentStaticData}();e.EventNewYearPresentContentStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1177)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearPresentContentPresentStaticData(){}return EventNewYearPresentContentPresentStaticData.parse=function(t){var e=new EventNewYearPresentContentPresentStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearPresentContentPresentStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearPresentContentPresentStaticData.prototype,"wallpost",{get:function(){return this._wallpost},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearPresentContentPresentStaticData.prototype,"notificationKey",{get:function(){return this._notificationKey},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearPresentContentPresentStaticData.prototype,"slots",{get:function(){return this._slots},enumerable:!0,configurable:!0}),EventNewYearPresentContentPresentStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._wallpost=n.Utils.parseInt(jQuery("> wallpost",t).first().text()),this._notificationKey=jQuery("> notificationKey",t).first().text(),this._slots=i.EventNewYearPresentContentPresentSlotsListStaticData.parse(jQuery("> slots",t).first())},EventNewYearPresentContentPresentStaticData}();e.EventNewYearPresentContentPresentStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1178),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearPresentContentPresentSlotsListStaticData(){}return EventNewYearPresentContentPresentSlotsListStaticData.parse=function(t){var e=new EventNewYearPresentContentPresentSlotsListStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearPresentContentPresentSlotsListStaticData.prototype,"slot",{get:function(){return this._slot},enumerable:!0,configurable:!0}),EventNewYearPresentContentPresentSlotsListStaticData.prototype._parse=function(t){this._slot=i.StaticDataCollection.parse(n.EventNewYearPresentContentPresentSlotItemStaticData,t,"> slot ")},EventNewYearPresentContentPresentSlotsListStaticData}();e.EventNewYearPresentContentPresentSlotsListStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearPresentContentPresentSlotItemStaticData(){}return EventNewYearPresentContentPresentSlotItemStaticData.parse=function(t){var e=new EventNewYearPresentContentPresentSlotItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearPresentContentPresentSlotItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearPresentContentPresentSlotItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),EventNewYearPresentContentPresentSlotItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},EventNewYearPresentContentPresentSlotItemStaticData}();e.EventNewYearPresentContentPresentSlotItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1180),n(1182),n(1184)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function EventNewYearRatingsStaticData(){}return EventNewYearRatingsStaticData.parse=function(t){var e=new EventNewYearRatingsStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearRatingsStaticData.prototype,"settings",{get:function(){return this._settings},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingsStaticData.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingsStaticData.prototype,"places",{get:function(){return this._places},enumerable:!0,configurable:!0}),EventNewYearRatingsStaticData.prototype._parse=function(t){this._settings=n.EventNewYearRatingSettingsListStaticData.parse(jQuery("> settings",t).first()),this._groups=i.EventNewYearRatingGroupsStaticData.parse(jQuery("> groups",t).first()),this._places=r.EventNewYearRatingPlacesStaticData.parse(jQuery("> places",t).first())},EventNewYearRatingsStaticData}();e.EventNewYearRatingsStaticData=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1181)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearRatingSettingsListStaticData(){}return EventNewYearRatingSettingsListStaticData.parse=function(t){var e=new EventNewYearRatingSettingsListStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearRatingSettingsListStaticData.prototype,"setting",{get:function(){return this._setting},enumerable:!0,configurable:!0}),EventNewYearRatingSettingsListStaticData.prototype._parse=function(t){var n=this;this._setting=[],jQuery("> setting",t).each(function(t,e){n._setting.push(i.EventNewYearRatingSettingItemStaticData.parse(e))})},EventNewYearRatingSettingsListStaticData}();e.EventNewYearRatingSettingsListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearRatingSettingItemStaticData(){}return EventNewYearRatingSettingItemStaticData.parse=function(t){var e=new EventNewYearRatingSettingItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearRatingSettingItemStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingSettingItemStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),EventNewYearRatingSettingItemStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._value=jQuery(t).attr("value")},EventNewYearRatingSettingItemStaticData}();e.EventNewYearRatingSettingItemStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(1183)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function EventNewYearRatingGroupsStaticData(){}return EventNewYearRatingGroupsStaticData.parse=function(t){var e=new EventNewYearRatingGroupsStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearRatingGroupsStaticData.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),EventNewYearRatingGroupsStaticData.prototype._parse=function(t){var n=this;this._group=[],jQuery("> group",t).each(function(t,e){n._group.push(i.EventNewYearRatingGroupItemStaticData.parse(e))})},EventNewYearRatingGroupsStaticData}();e.EventNewYearRatingGroupsStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function EventNewYearRatingGroupItemStaticData(){}return EventNewYearRatingGroupItemStaticData.parse=function(t){var e=new EventNewYearRatingGroupItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearRatingGroupItemStaticData.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingGroupItemStaticData.prototype,"minLevel",{get:function(){return this._minLevel},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingGroupItemStaticData.prototype,"maxLevel",{get:function(){return this._maxLevel},enumerable:!0,configurable:!0}),EventNewYearRatingGroupItemStaticData.prototype._parse=function(t){this._count=n.Utils.parseInt(jQuery(t).attr("count")),this._minLevel=jQuery(t).attr("minLevel"),this._maxLevel=jQuery(t).attr("maxLevel")},EventNewYearRatingGroupItemStaticData}();e.EventNewYearRatingGroupItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1185),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearRatingPlacesStaticData(){}return EventNewYearRatingPlacesStaticData.parse=function(t){var e=new EventNewYearRatingPlacesStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearRatingPlacesStaticData.prototype,"place",{get:function(){return this._place},enumerable:!0,configurable:!0}),EventNewYearRatingPlacesStaticData.prototype._parse=function(t){this._place=i.StaticDataCollection.parse(n.EventNewYearRatingPlaceItemStaticData,t,"> place ")},EventNewYearRatingPlacesStaticData}();e.EventNewYearRatingPlacesStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(23)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function EventNewYearRatingPlaceItemStaticData(){}return EventNewYearRatingPlaceItemStaticData.parse=function(t){var e=new EventNewYearRatingPlaceItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearRatingPlaceItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingPlaceItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),EventNewYearRatingPlaceItemStaticData.prototype._parse=function(t){this._id=jQuery(t).attr("id"),this._awards=n.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},EventNewYearRatingPlaceItemStaticData}();e.EventNewYearRatingPlaceItemStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1187),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearAchievementsStaticData(){}return EventNewYearAchievementsStaticData.parse=function(t){var e=new EventNewYearAchievementsStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearAchievementsStaticData.prototype,"achievement",{get:function(){return this._achievement},enumerable:!0,configurable:!0}),EventNewYearAchievementsStaticData.prototype._parse=function(t){this._achievement=i.StaticDataCollection.parse(n.EventNewYearAchievementItemStaticData,t,"> achievement ")},EventNewYearAchievementsStaticData}();e.EventNewYearAchievementsStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(1188)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearAchievementItemStaticData(){}return EventNewYearAchievementItemStaticData.parse=function(t){var e=new EventNewYearAchievementItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearAchievementItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementItemStaticData.prototype,"stages",{get:function(){return this._stages},enumerable:!0,configurable:!0}),EventNewYearAchievementItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._stages=i.EventNewYearAchievementStagesStaticData.parse(jQuery("> stages",t).first())},EventNewYearAchievementItemStaticData}();e.EventNewYearAchievementItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1189),n(11)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearAchievementStagesStaticData(){}return EventNewYearAchievementStagesStaticData.parse=function(t){var e=new EventNewYearAchievementStagesStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearAchievementStagesStaticData.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),EventNewYearAchievementStagesStaticData.prototype._parse=function(t){this._stage=i.StaticDataCollection.parse(n.EventNewYearAchievementStageItemStaticData,t,"> stage ")},EventNewYearAchievementStagesStaticData}();e.EventNewYearAchievementStagesStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(23)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function EventNewYearAchievementStageItemStaticData(){}return EventNewYearAchievementStageItemStaticData.parse=function(t){var e=new EventNewYearAchievementStageItemStaticData;return e._parse(t),e},Object.defineProperty(EventNewYearAchievementStageItemStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementStageItemStaticData.prototype,"task",{get:function(){return this._task},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementStageItemStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementStageItemStaticData.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),EventNewYearAchievementStageItemStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id")),this._task=jQuery(t).attr("task"),this._wallpostId=jQuery(t).attr("wallpostId"),this._awards=i.AwardsTreeStaticData.parse(jQuery("> awards",t).first())},EventNewYearAchievementStageItemStaticData}();e.EventNewYearAchievementStageItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24),n(23),n(1191),n(396)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function RaffleMoneyEventStaticData(){}return RaffleMoneyEventStaticData.parse=function(t){var e=new RaffleMoneyEventStaticData;return e._parse(t),e},Object.defineProperty(RaffleMoneyEventStaticData.prototype,"wallpostId",{get:function(){return this._wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyEventStaticData.prototype,"init",{get:function(){return this._init},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyEventStaticData.prototype,"general",{get:function(){return this._general},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyEventStaticData.prototype,"extra",{get:function(){return this._extra},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyEventStaticData.prototype,"newLevel",{get:function(){return this._newLevel},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyEventStaticData.prototype,"spins",{get:function(){return this._spins},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyEventStaticData.prototype,"roulettes",{get:function(){return this._roulettes},enumerable:!0,configurable:!0}),RaffleMoneyEventStaticData.prototype._parse=function(t){this._wallpostId=n.Utils.parseInt(jQuery(t).attr("wallpostId")),this._init=i.RequirementsTreeStaticData.parse(jQuery("> init",t).first()),this._general=i.RequirementsTreeStaticData.parse(jQuery("> general",t).first()),this._extra=i.RequirementsTreeStaticData.parse(jQuery("> extra",t).first()),this._newLevel=r.AwardsTreeStaticData.parse(jQuery("> newLevel",t).first()),this._spins=o.RaffleMoneyEventSpinListStaticData.parse(jQuery("> spins",t).first()),this._roulettes=a.RoulettesListStaticData.parse(jQuery("> roulettes",t).first())},RaffleMoneyEventStaticData}();e.RaffleMoneyEventStaticData=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1192)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function RaffleMoneyEventSpinListStaticData(){}return RaffleMoneyEventSpinListStaticData.parse=function(t){var e=new RaffleMoneyEventSpinListStaticData;return e._parse(t),e},Object.defineProperty(RaffleMoneyEventSpinListStaticData.prototype,"spin",{get:function(){return this._spin},enumerable:!0,configurable:!0}),RaffleMoneyEventSpinListStaticData.prototype._parse=function(t){var n=this;this._spin=[],jQuery("> spin",t).each(function(t,e){n._spin.push(i.RaffleMoneyEventSpinItemStaticData.parse(e))})},RaffleMoneyEventSpinListStaticData}();e.RaffleMoneyEventSpinListStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(47)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function RaffleMoneyEventSpinItemStaticData(){}return RaffleMoneyEventSpinItemStaticData.parse=function(t){var e=new RaffleMoneyEventSpinItemStaticData;return e._parse(t),e},Object.defineProperty(RaffleMoneyEventSpinItemStaticData.prototype,"rouletteId",{get:function(){return this._rouletteId},enumerable:!0,configurable:!0}),Object.defineProperty(RaffleMoneyEventSpinItemStaticData.prototype,"prices",{get:function(){return this._prices},enumerable:!0,configurable:!0}),RaffleMoneyEventSpinItemStaticData.prototype._parse=function(t){this._rouletteId=n.Utils.parseInt(jQuery(t).attr("rouletteId")),this._prices=i.PricesTreeStaticData.parse(jQuery("> prices",t).first())},RaffleMoneyEventSpinItemStaticData}();e.RaffleMoneyEventSpinItemStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1194)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function DecoderV2(){this.MASTER_KEY="~cq@337{SRRESHk$?fcJ~@x%1kRpd2WS"}return DecoderV2.prototype.decode=function(t){var e=this.base64Decode(t),n=this.cryptXOR(e);return this.uncompress(n)},DecoderV2.prototype.cryptXOR=function(t){for(var e=t.split(""),n=this.MASTER_KEY.split(""),i=e.length,r=n.length,o=0;o<i;o++)e[o]=String.fromCharCode(e[o].charCodeAt(0)^n[o%r].charCodeAt(0));return e.join("")},DecoderV2.prototype.base64Decode=function(t){return window.atob(t)},DecoderV2.prototype.uncompress=function(t){return n.inflate(this.base64Decode(t),{to:"string"})},DecoderV2}();e.DecoderV2=i}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";var i={};(0,n(81).assign)(i,n(1195),n(1198),n(401)),t.exports=i},function(t,e,n){"use strict";var a=n(1196),s=n(81),c=n(399),r=n(226),o=n(400),u=Object.prototype.toString,p=0,l=-1,d=0,h=8;function Deflate(t){if(!(this instanceof Deflate))return new Deflate(t);this.options=s.assign({level:l,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==p)throw new Error(r[n]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?c.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=a.deflateSetDictionary(this.strm,i))!==p)throw new Error(r[n]);this._dict_set=!0}}function deflate(t,e){var n=new Deflate(e);if(n.push(t,!0),n.err)throw n.msg||r[n.err];return n.result}Deflate.prototype.push=function(t,e){var n,i,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?r.input=c.string2buf(t):"[object ArrayBuffer]"===u.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new s.Buf8(o),r.next_out=0,r.avail_out=o),1!==(n=a.deflate(r,i))&&n!==p)return this.onEnd(n),!(this.ended=!0);0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(c.buf2binstring(s.shrinkBuf(r.output,r.next_out))):this.onData(s.shrinkBuf(r.output,r.next_out)))}while((0<r.avail_in||0===r.avail_out)&&1!==n);return 4===i?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p):2!==i||(this.onEnd(p),!(r.avail_out=0))},Deflate.prototype.onData=function(t){this.chunks.push(t)},Deflate.prototype.onEnd=function(t){t===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=Deflate,e.deflate=deflate,e.deflateRaw=function deflateRaw(t,e){return(e=e||{}).raw=!0,deflate(t,e)},e.gzip=function gzip(t,e){return(e=e||{}).gzip=!0,deflate(t,e)}},function(t,e,n){"use strict";var c,d=n(81),u=n(1197),h=n(397),_=n(398),i=n(226),p=0,l=4,f=0,y=-2,m=-1,v=4,r=2,b=8,g=9,o=286,a=30,s=19,w=2*o+1,O=15,S=3,P=258,E=P+S+1,A=42,M=113,D=1,I=2,C=3,T=4;function err(t,e){return t.msg=i[e],e}function rank(t){return(t<<1)-(4<t?9:0)}function zero(t){for(var e=t.length;0<=--e;)t[e]=0}function flush_pending(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(d.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function flush_block_only(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,flush_pending(t.strm)}function put_byte(t,e){t.pending_buf[t.pending++]=e}function putShortMSB(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function longest_match(t,e){var n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-E?t.strstart-(t.w_size-E):0,u=t.window,p=t.w_mask,l=t.prev,d=t.strstart+P,h=u[o+a-1],_=u[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+a]===_&&u[n+a-1]===h&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(i=P-(d-o),o=d-P,a<i){if(t.match_start=e,s<=(a=i))break;h=u[o+a-1],_=u[o+a]}}}while((e=l[e&p])>c&&0!=--r);return a<=t.lookahead?a:t.lookahead}function fill_window(t){var e,n,i,r,o,a,s,c,u,p,l=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=l+(l-E)){for(d.arraySet(t.window,t.window,l,l,0),t.match_start-=l,t.strstart-=l,t.block_start-=l,e=n=t.hash_size;i=t.head[--e],t.head[e]=l<=i?i-l:0,--n;);for(e=n=l;i=t.prev[--e],t.prev[e]=l<=i?i-l:0,--n;);r+=l}if(0===t.strm.avail_in)break;if(a=t.strm,s=t.window,c=t.strstart+t.lookahead,u=r,p=void 0,p=a.avail_in,u<p&&(p=u),n=0===p?0:(a.avail_in-=p,d.arraySet(s,a.input,a.next_in,p,c),1===a.state.wrap?a.adler=h(a.adler,s,p,c):2===a.state.wrap&&(a.adler=_(a.adler,s,p,c)),a.next_in+=p,a.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=S)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+S-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<S)););}while(t.lookahead<E&&0!==t.strm.avail_in)}function deflate_fast(t,e){for(var n,i;;){if(t.lookahead<E){if(fill_window(t),t.lookahead<E&&e===p)return D;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-E&&(t.match_length=longest_match(t,n)),t.match_length>=S)if(i=u._tr_tally(t,t.strstart-t.match_start,t.match_length-S),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=S){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(flush_block_only(t,!1),0===t.strm.avail_out))return D}return t.insert=t.strstart<S-1?t.strstart:S-1,e===l?(flush_block_only(t,!0),0===t.strm.avail_out?C:T):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?D:I}function deflate_slow(t,e){for(var n,i,r;;){if(t.lookahead<E){if(fill_window(t),t.lookahead<E&&e===p)return D;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=S-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-E&&(t.match_length=longest_match(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===S&&4096<t.strstart-t.match_start)&&(t.match_length=S-1)),t.prev_length>=S&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-S,i=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-S),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=S-1,t.strstart++,i&&(flush_block_only(t,!1),0===t.strm.avail_out))return D}else if(t.match_available){if((i=u._tr_tally(t,0,t.window[t.strstart-1]))&&flush_block_only(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return D}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<S-1?t.strstart:S-1,e===l?(flush_block_only(t,!0),0===t.strm.avail_out?C:T):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?D:I}function Config(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*w),this.dyn_dtree=new d.Buf16(2*(2*a+1)),this.bl_tree=new d.Buf16(2*(2*s+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(O+1),this.heap=new d.Buf16(2*o+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*o+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=r,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?A:M,t.adler=2===e.wrap?0:1,e.last_flush=p,u._tr_init(e),f):err(t,y)}function deflateReset(t){var e=deflateResetKeep(t);return e===f&&function lm_init(t){t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=c[t.level].max_lazy,t.good_match=c[t.level].good_length,t.nice_match=c[t.level].nice_length,t.max_chain_length=c[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=S-1,t.match_available=0,t.ins_h=0}(t.state),e}function deflateInit2(t,e,n,i,r,o){if(!t)return y;var a=1;if(e===m&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),r<1||g<r||n!==b||i<8||15<i||e<0||9<e||o<0||v<o)return err(t,y);8===i&&(i=9);var s=new DeflateState;return(t.state=s).strm=t,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+S-1)/S),s.window=new d.Buf8(2*s.w_size),s.head=new d.Buf16(s.hash_size),s.prev=new d.Buf16(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new d.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=n,deflateReset(t)}c=[new Config(0,0,0,0,function deflate_stored(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(fill_window(t),0===t.lookahead&&e===p)return D;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,flush_block_only(t,!1),0===t.strm.avail_out))return D;if(t.strstart-t.block_start>=t.w_size-E&&(flush_block_only(t,!1),0===t.strm.avail_out))return D}return t.insert=0,e===l?(flush_block_only(t,!0),0===t.strm.avail_out?C:T):(t.strstart>t.block_start&&(flush_block_only(t,!1),t.strm.avail_out),D)}),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],e.deflateInit=function deflateInit(t,e){return deflateInit2(t,e,b,15,8,0)},e.deflateInit2=deflateInit2,e.deflateReset=deflateReset,e.deflateResetKeep=deflateResetKeep,e.deflateSetHeader=function deflateSetHeader(t,e){return t&&t.state?2!==t.state.wrap?y:(t.state.gzhead=e,f):y},e.deflate=function deflate(t,e){var n,i,r,o;if(!t||!t.state||5<e||e<0)return t?err(t,y):y;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==l)return err(t,0===t.avail_out?-5:y);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===A)if(2===i.wrap)t.adler=0,put_byte(i,31),put_byte(i,139),put_byte(i,8),i.gzhead?(put_byte(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),put_byte(i,255&i.gzhead.time),put_byte(i,i.gzhead.time>>8&255),put_byte(i,i.gzhead.time>>16&255),put_byte(i,i.gzhead.time>>24&255),put_byte(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),put_byte(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(put_byte(i,255&i.gzhead.extra.length),put_byte(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=_(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),put_byte(i,3),i.status=M);else{var a=b+(i.w_bits-8<<4)<<8;a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=M,putShortMSB(i,a),0!==i.strstart&&(putShortMSB(i,t.adler>>>16),putShortMSB(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=_(t.adler,i.pending_buf,i.pending-r,r)),flush_pending(t),r=i.pending,i.pending!==i.pending_buf_size));)put_byte(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=_(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=_(t.adler,i.pending_buf,i.pending-r,r)),flush_pending(t),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}put_byte(i,o=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(t.adler=_(t.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=_(t.adler,i.pending_buf,i.pending-r,r)),flush_pending(t),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}put_byte(i,o=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(t.adler=_(t.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&flush_pending(t),i.pending+2<=i.pending_buf_size&&(put_byte(i,255&t.adler),put_byte(i,t.adler>>8&255),t.adler=0,i.status=M)):i.status=M),0!==i.pending){if(flush_pending(t),0===t.avail_out)return i.last_flush=-1,f}else if(0===t.avail_in&&rank(e)<=rank(n)&&e!==l)return err(t,-5);if(666===i.status&&0!==t.avail_in)return err(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==p&&666!==i.status){var s=2===i.strategy?function deflate_huff(t,e){for(var n;;){if(0===t.lookahead&&(fill_window(t),0===t.lookahead)){if(e===p)return D;break}if(t.match_length=0,n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(flush_block_only(t,!1),0===t.strm.avail_out))return D}return t.insert=0,e===l?(flush_block_only(t,!0),0===t.strm.avail_out?C:T):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?D:I}(i,e):3===i.strategy?function deflate_rle(t,e){for(var n,i,r,o,a=t.window;;){if(t.lookahead<=P){if(fill_window(t),t.lookahead<=P&&e===p)return D;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=S&&0<t.strstart&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){o=t.strstart+P;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);t.match_length=P-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=S?(n=u._tr_tally(t,1,t.match_length-S),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(flush_block_only(t,!1),0===t.strm.avail_out))return D}return t.insert=0,e===l?(flush_block_only(t,!0),0===t.strm.avail_out?C:T):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?D:I}(i,e):c[i.level].func(i,e);if(s!==C&&s!==T||(i.status=666),s===D||s===C)return 0===t.avail_out&&(i.last_flush=-1),f;if(s===I&&(1===e?u._tr_align(i):5!==e&&(u._tr_stored_block(i,0,0,!1),3===e&&(zero(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),flush_pending(t),0===t.avail_out))return i.last_flush=-1,f}return e!==l?f:i.wrap<=0?1:(2===i.wrap?(put_byte(i,255&t.adler),put_byte(i,t.adler>>8&255),put_byte(i,t.adler>>16&255),put_byte(i,t.adler>>24&255),put_byte(i,255&t.total_in),put_byte(i,t.total_in>>8&255),put_byte(i,t.total_in>>16&255),put_byte(i,t.total_in>>24&255)):(putShortMSB(i,t.adler>>>16),putShortMSB(i,65535&t.adler)),flush_pending(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?f:1)},e.deflateEnd=function deflateEnd(t){var e;return t&&t.state?(e=t.state.status)!==A&&69!==e&&73!==e&&91!==e&&103!==e&&e!==M&&666!==e?err(t,y):(t.state=null,e===M?err(t,-3):f):y},e.deflateSetDictionary=function deflateSetDictionary(t,e){var n,i,r,o,a,s,c,u,p=e.length;if(!t||!t.state)return y;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==A||n.lookahead)return y;for(1===o&&(t.adler=h(t.adler,e,p,0)),n.wrap=0,p>=n.w_size&&(0===o&&(zero(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new d.Buf8(n.w_size),d.arraySet(u,e,p-n.w_size,n.w_size,0),e=u,p=n.w_size),a=t.avail_in,s=t.next_in,c=t.input,t.avail_in=p,t.next_in=0,t.input=e,fill_window(n);n.lookahead>=S;){for(i=n.strstart,r=n.lookahead-(S-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+S-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--r;);n.strstart=i,n.lookahead=S-1,fill_window(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=S-1,n.match_available=0,t.next_in=s,t.input=c,t.avail_in=a,n.wrap=o,f},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var r=n(81),s=0,c=1;function zero(t){for(var e=t.length;0<=--e;)t[e]=0}var o=0,a=29,u=256,p=u+1+a,l=30,d=19,y=2*p+1,m=15,i=16,h=7,_=256,f=16,v=17,b=18,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=new Array(2*(p+2));zero(P);var E=new Array(2*l);zero(E);var A=new Array(512);zero(A);var M=new Array(256);zero(M);var D=new Array(a);zero(D);var I,C,T,j=new Array(l);function StaticTreeDesc(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function TreeDesc(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function d_code(t){return t<256?A[t]:A[256+(t>>>7)]}function put_short(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function send_bits(t,e,n){t.bi_valid>i-n?(t.bi_buf|=e<<t.bi_valid&65535,put_short(t,t.bi_buf),t.bi_buf=e>>i-t.bi_valid,t.bi_valid+=n-i):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function send_code(t,e,n){send_bits(t,n[2*e],n[2*e+1])}function bi_reverse(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function gen_codes(t,e,n){var i,r,o=new Array(m+1),a=0;for(i=1;i<=m;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=bi_reverse(o[s]++,s))}}function init_block(t){var e;for(e=0;e<p;e++)t.dyn_ltree[2*e]=0;for(e=0;e<l;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*_]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function bi_windup(t){8<t.bi_valid?put_short(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function smaller(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function pqdownheap(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&smaller(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!smaller(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function compress_block(t,e,n){var i,r,o,a,s=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],r=t.pending_buf[t.l_buf+s],s++,0===i?send_code(t,r,e):(send_code(t,(o=M[r])+u+1,e),0!==(a=g[o])&&send_bits(t,r-=D[o],a),send_code(t,o=d_code(--i),n),0!==(a=w[o])&&send_bits(t,i-=j[o],a)),s<t.last_lit;);send_code(t,_,e)}function build_tree(t,e){var n,i,r,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,c=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=y,n=0;n<c;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=a[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)pqdownheap(t,o,n);for(r=c;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],pqdownheap(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,pqdownheap(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function gen_bitlen(t,e){var n,i,r,o,a,s,c=e.dyn_tree,u=e.max_code,p=e.stat_desc.static_tree,l=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,_=e.stat_desc.max_length,f=0;for(o=0;o<=m;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<y;n++)_<(o=c[2*c[2*(i=t.heap[n])+1]+1]+1)&&(o=_,f++),c[2*i+1]=o,u<i||(t.bl_count[o]++,a=0,h<=i&&(a=d[i-h]),s=c[2*i],t.opt_len+=s*(o+a),l&&(t.static_len+=s*(p[2*i+1]+a)));if(0!==f){do{for(o=_-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[_]--,f-=2}while(0<f);for(o=_;0!==o;o--)for(i=t.bl_count[o];0!==i;)u<(r=t.heap[--n])||(c[2*r+1]!==o&&(t.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}(t,e),gen_codes(o,u,t.bl_count)}function scan_tree(t,e,n){var i,r,o=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++s<c&&r===a||(s<u?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*f]++):s<=10?t.bl_tree[2*v]++:t.bl_tree[2*b]++,o=r,u=(s=0)===a?(c=138,3):r===a?(c=6,3):(c=7,4))}function send_tree(t,e,n){var i,r,o=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++s<c&&r===a)){if(s<u)for(;send_code(t,r,t.bl_tree),0!=--s;);else 0!==r?(r!==o&&(send_code(t,r,t.bl_tree),s--),send_code(t,f,t.bl_tree),send_bits(t,s-3,2)):s<=10?(send_code(t,v,t.bl_tree),send_bits(t,s-3,3)):(send_code(t,b,t.bl_tree),send_bits(t,s-11,7));o=r,u=(s=0)===a?(c=138,3):r===a?(c=6,3):(c=7,4)}}zero(j);var x=!1;function _tr_stored_block(t,e,n,i){send_bits(t,(o<<1)+(i?1:0),3),function copy_block(t,e,n,i){bi_windup(t),i&&(put_short(t,n),put_short(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function _tr_init(t){x||(function tr_static_init(){var t,e,n,i,r,o=new Array(m+1);for(i=n=0;i<a-1;i++)for(D[i]=n,t=0;t<1<<g[i];t++)M[n++]=i;for(M[n-1]=i,i=r=0;i<16;i++)for(j[i]=r,t=0;t<1<<w[i];t++)A[r++]=i;for(r>>=7;i<l;i++)for(j[i]=r<<7,t=0;t<1<<w[i]-7;t++)A[256+r++]=i;for(e=0;e<=m;e++)o[e]=0;for(t=0;t<=143;)P[2*t+1]=8,t++,o[8]++;for(;t<=255;)P[2*t+1]=9,t++,o[9]++;for(;t<=279;)P[2*t+1]=7,t++,o[7]++;for(;t<=287;)P[2*t+1]=8,t++,o[8]++;for(gen_codes(P,p+1,o),t=0;t<l;t++)E[2*t+1]=5,E[2*t]=bi_reverse(t,5);I=new StaticTreeDesc(P,g,u+1,p,m),C=new StaticTreeDesc(E,w,0,l,m),T=new StaticTreeDesc(new Array(0),O,0,d,h)}(),x=!0),t.l_desc=new TreeDesc(t.dyn_ltree,I),t.d_desc=new TreeDesc(t.dyn_dtree,C),t.bl_desc=new TreeDesc(t.bl_tree,T),t.bi_buf=0,t.bi_valid=0,init_block(t)},e._tr_stored_block=_tr_stored_block,e._tr_flush_block=function _tr_flush_block(t,e,n,i){var r,o,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function detect_data_type(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return c;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return c;return s}(t)),build_tree(t,t.l_desc),build_tree(t,t.d_desc),a=function build_bl_tree(t){var e;for(scan_tree(t,t.dyn_ltree,t.l_desc.max_code),scan_tree(t,t.dyn_dtree,t.d_desc.max_code),build_tree(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*S[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?_tr_stored_block(t,e,n,i):4===t.strategy||o===r?(send_bits(t,2+(i?1:0),3),compress_block(t,P,E)):(send_bits(t,4+(i?1:0),3),function send_all_trees(t,e,n,i){var r;for(send_bits(t,e-257,5),send_bits(t,n-1,5),send_bits(t,i-4,4),r=0;r<i;r++)send_bits(t,t.bl_tree[2*S[r]+1],3);send_tree(t,t.dyn_ltree,e-1),send_tree(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),compress_block(t,t.dyn_ltree,t.dyn_dtree)),init_block(t),i&&bi_windup(t)},e._tr_tally=function _tr_tally(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(M[n]+u+1)]++,t.dyn_dtree[2*d_code(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function _tr_align(t){send_bits(t,2,3),send_code(t,_,P),function bi_flush(t){16===t.bi_valid?(put_short(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var d=n(1199),h=n(81),_=n(399),f=n(401),i=n(226),r=n(400),o=n(1202),y=Object.prototype.toString;function Inflate(t){if(!(this instanceof Inflate))return new Inflate(t);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var n=d.inflateInit2(this.strm,e.windowBits);if(n!==f.Z_OK)throw new Error(i[n]);this.header=new o,d.inflateGetHeader(this.strm,this.header)}function inflate(t,e){var n=new Inflate(e);if(n.push(t,!0),n.err)throw n.msg||i[n.err];return n.result}Inflate.prototype.push=function(t,e){var n,i,r,o,a,s,c=this.strm,u=this.options.chunkSize,p=this.options.dictionary,l=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof t?c.input=_.binstring2buf(t):"[object ArrayBuffer]"===y.call(t)?c.input=new Uint8Array(t):c.input=t,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new h.Buf8(u),c.next_out=0,c.avail_out=u),(n=d.inflate(c,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&p&&(s="string"==typeof p?_.string2buf(p):"[object ArrayBuffer]"===y.call(p)?new Uint8Array(p):p,n=d.inflateSetDictionary(this.strm,s)),n===f.Z_BUF_ERROR&&!0===l&&(n=f.Z_OK,l=!1),n!==f.Z_STREAM_END&&n!==f.Z_OK)return this.onEnd(n),!(this.ended=!0);c.next_out&&(0!==c.avail_out&&n!==f.Z_STREAM_END&&(0!==c.avail_in||i!==f.Z_FINISH&&i!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(r=_.utf8border(c.output,c.next_out),o=c.next_out-r,a=_.buf2string(c.output,r),c.next_out=o,c.avail_out=u-o,o&&h.arraySet(c.output,c.output,r,o,0),this.onData(a)):this.onData(h.shrinkBuf(c.output,c.next_out)))),0===c.avail_in&&0===c.avail_out&&(l=!0)}while((0<c.avail_in||0===c.avail_out)&&n!==f.Z_STREAM_END);return n===f.Z_STREAM_END&&(i=f.Z_FINISH),i===f.Z_FINISH?(n=d.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f.Z_OK):i!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(c.avail_out=0))},Inflate.prototype.onData=function(t){this.chunks.push(t)},Inflate.prototype.onEnd=function(t){t===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=Inflate,e.inflate=inflate,e.inflateRaw=function inflateRaw(t,e){return(e=e||{}).raw=!0,inflate(t,e)},e.ungzip=inflate},function(t,e,n){"use strict";var I=n(81),C=n(397),T=n(398),j=n(1200),x=n(1201),R=1,N=2,L=0,k=-2,B=1,i=852,r=592;function zswap32(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=B,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new I.Buf32(i),e.distcode=e.distdyn=new I.Buf32(r),e.sane=1,e.back=-1,L):k}function inflateReset(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(t)):k}function inflateReset2(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?k:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,inflateReset(t))):k}function inflateInit2(t,e){var n,i;return t?(i=new InflateState,(t.state=i).window=null,(n=inflateReset2(t,e))!==L&&(t.state=null),n):k}var o,a,s=!0;function fixedtables(t){if(s){var e;for(o=new I.Buf32(512),a=new I.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(x(R,t.lens,0,288,o,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;x(N,t.lens,0,32,a,0,t.work,{bits:5}),s=!1}t.lencode=o,t.lenbits=9,t.distcode=a,t.distbits=5}function updatewindow(t,e,n,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new I.Buf8(o.wsize)),i>=o.wsize?(I.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(r=o.wsize-o.wnext)&&(r=i),I.arraySet(o.window,e,n-i,r,o.wnext),(i-=r)?(I.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}e.inflateReset=inflateReset,e.inflateReset2=inflateReset2,e.inflateResetKeep=inflateResetKeep,e.inflateInit=function inflateInit(t){return inflateInit2(t,15)},e.inflateInit2=inflateInit2,e.inflate=function inflate(t,e){var n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A=0,M=new I.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return k;12===(n=t.state).mode&&(n.mode=13),a=t.next_out,r=t.output,c=t.avail_out,o=t.next_in,i=t.input,s=t.avail_in,u=n.hold,p=n.bits,l=s,d=c,S=L;t:for(;;)switch(n.mode){case B:if(0===n.wrap){n.mode=13;break}for(;p<16;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(2&n.wrap&&35615===u){M[n.check=0]=255&u,M[1]=u>>>8&255,n.check=T(n.check,M,2,0),p=u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){t.msg="unknown compression method",n.mode=30;break}if(p-=4,O=8+(15&(u>>>=4)),0===n.wbits)n.wbits=O;else if(O>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<O,t.adler=n.check=1,n.mode=512&u?10:12,p=u=0;break;case 2:for(;p<16;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(n.flags=u,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,n.check=T(n.check,M,2,0)),p=u=0,n.mode=3;case 3:for(;p<32;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}n.head&&(n.head.time=u),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,M[2]=u>>>16&255,M[3]=u>>>24&255,n.check=T(n.check,M,4,0)),p=u=0,n.mode=4;case 4:for(;p<16;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,n.check=T(n.check,M,2,0)),p=u=0,n.mode=5;case 5:if(1024&n.flags){for(;p<16;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,n.check=T(n.check,M,2,0)),p=u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(s<(h=n.length)&&(h=s),h&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),I.arraySet(n.head.extra,i,o,h,O)),512&n.flags&&(n.check=T(n.check,i,h,o)),s-=h,o+=h,n.length-=h),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;for(h=0;O=i[o+h++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O)),O&&h<s;);if(512&n.flags&&(n.check=T(n.check,i,h,o)),s-=h,o+=h,O)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;for(h=0;O=i[o+h++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O)),O&&h<s;);if(512&n.flags&&(n.check=T(n.check,i,h,o)),s-=h,o+=h,O)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;p<16;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}p=u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;p<32;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}t.adler=n.check=zswap32(u),p=u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=p,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){u>>>=7&p,p-=7&p,n.mode=27;break}for(;p<3;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}switch(n.last=1&u,p-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(fixedtables(n),n.mode=20,6!==e)break;u>>>=2,p-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}u>>>=2,p-=2;break;case 14:for(u>>>=7&p,p-=7&p;p<32;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,p=u=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(h=n.length){if(s<h&&(h=s),c<h&&(h=c),0===h)break t;I.arraySet(r,i,o,h,a),s-=h,o+=h,c-=h,a+=h,n.length-=h;break}n.mode=12;break;case 17:for(;p<14;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(n.nlen=257+(31&u),u>>>=5,p-=5,n.ndist=1+(31&u),u>>>=5,p-=5,n.ncode=4+(15&u),u>>>=4,p-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;p<3;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}n.lens[D[n.have++]]=7&u,u>>>=3,p-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},S=x(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,S){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,v=65535&A,!((y=A>>>24)<=p);){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(v<16)u>>>=y,p-=y,n.lens[n.have++]=v;else{if(16===v){for(E=y+2;p<E;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(u>>>=y,p-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}O=n.lens[n.have-1],h=3+(3&u),u>>>=2,p-=2}else if(17===v){for(E=y+3;p<E;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}p-=y,O=0,h=3+(7&(u>>>=y)),u>>>=3,p-=3}else{for(E=y+7;p<E;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}p-=y,O=0,h=11+(127&(u>>>=y)),u>>>=7,p-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;h--;)n.lens[n.have++]=O}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},S=x(R,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,S){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},S=x(N,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,S){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=s&&258<=c){t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=p,j(t,d),a=t.next_out,r=t.output,c=t.avail_out,o=t.next_in,i=t.input,s=t.avail_in,u=n.hold,p=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;m=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,v=65535&A,!((y=A>>>24)<=p);){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(m&&0==(240&m)){for(b=y,g=m,w=v;m=(A=n.lencode[w+((u&(1<<b+g)-1)>>b)])>>>16&255,v=65535&A,!(b+(y=A>>>24)<=p);){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}u>>>=b,p-=b,n.back+=b}if(u>>>=y,p-=y,n.back+=y,n.length=v,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=12;break}if(64&m){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(E=n.extra;p<E;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,p-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(A=n.distcode[u&(1<<n.distbits)-1])>>>16&255,v=65535&A,!((y=A>>>24)<=p);){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(0==(240&m)){for(b=y,g=m,w=v;m=(A=n.distcode[w+((u&(1<<b+g)-1)>>b)])>>>16&255,v=65535&A,!(b+(y=A>>>24)<=p);){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}u>>>=b,p-=b,n.back+=b}if(u>>>=y,p-=y,n.back+=y,64&m){t.msg="invalid distance code",n.mode=30;break}n.offset=v,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(E=n.extra;p<E;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,p-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===c)break t;if(h=d-c,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}_=h>n.wnext?(h-=n.wnext,n.wsize-h):n.wnext-h,h>n.length&&(h=n.length),f=n.window}else f=r,_=a-n.offset,h=n.length;for(c<h&&(h=c),c-=h,n.length-=h;r[a++]=f[_++],--h;);0===n.length&&(n.mode=21);break;case 26:if(0===c)break t;r[a++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;p<32;){if(0===s)break t;s--,u|=i[o++]<<p,p+=8}if(d-=c,t.total_out+=d,n.total+=d,d&&(t.adler=n.check=n.flags?T(n.check,r,d,a-d):C(n.check,r,d,a-d)),d=c,(n.flags?u:zswap32(u))!==n.check){t.msg="incorrect data check",n.mode=30;break}p=u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;p<32;){if(0===s)break t;s--,u+=i[o++]<<p,p+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}p=u=0}n.mode=29;case 29:S=1;break t;case 30:S=-3;break t;case 31:return-4;case 32:default:return k}return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=p,(n.wsize||d!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&updatewindow(t,t.output,t.next_out,d-t.avail_out)?(n.mode=31,-4):(l-=t.avail_in,d-=t.avail_out,t.total_in+=l,t.total_out+=d,n.total+=d,n.wrap&&d&&(t.adler=n.check=n.flags?T(n.check,r,d,t.next_out-d):C(n.check,r,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===l&&0===d||4===e)&&S===L&&(S=-5),S)},e.inflateEnd=function inflateEnd(t){if(!t||!t.state)return k;var e=t.state;return e.window&&(e.window=null),t.state=null,L},e.inflateGetHeader=function inflateGetHeader(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?k:((n.head=e).done=!1,L):k},e.inflateSetDictionary=function inflateSetDictionary(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?k:11===n.mode&&C(1,e,i,0)!==n.check?-3:updatewindow(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,L):k},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function inflate_fast(t,e){var n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A;n=t.state,i=t.next_in,E=t.input,r=i+(t.avail_in-5),o=t.next_out,A=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),c=n.dmax,u=n.wsize,p=n.whave,l=n.wnext,d=n.window,h=n.hold,_=n.bits,f=n.lencode,y=n.distcode,m=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{_<15&&(h+=E[i++]<<_,_+=8,h+=E[i++]<<_,_+=8),b=f[h&m];e:for(;;){if(h>>>=g=b>>>24,_-=g,0===(g=b>>>16&255))A[o++]=65535&b;else{if(!(16&g)){if(0==(64&g)){b=f[(65535&b)+(h&(1<<g)-1)];continue e}if(32&g){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&b,(g&=15)&&(_<g&&(h+=E[i++]<<_,_+=8),w+=h&(1<<g)-1,h>>>=g,_-=g),_<15&&(h+=E[i++]<<_,_+=8,h+=E[i++]<<_,_+=8),b=y[h&v];n:for(;;){if(h>>>=g=b>>>24,_-=g,!(16&(g=b>>>16&255))){if(0==(64&g)){b=y[(65535&b)+(h&(1<<g)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(O=65535&b,_<(g&=15)&&(h+=E[i++]<<_,(_+=8)<g&&(h+=E[i++]<<_,_+=8)),c<(O+=h&(1<<g)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=g,_-=g,(g=o-a)<O){if(p<(g=O-g)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(P=d,(S=0)===l){if(S+=u-g,g<w){for(w-=g;A[o++]=d[S++],--g;);S=o-O,P=A}}else if(l<g){if(S+=u+l-g,(g-=l)<w){for(w-=g;A[o++]=d[S++],--g;);if(S=0,l<w){for(w-=g=l;A[o++]=d[S++],--g;);S=o-O,P=A}}}else if(S+=l-g,g<w){for(w-=g;A[o++]=d[S++],--g;);S=o-O,P=A}for(;2<w;)A[o++]=P[S++],A[o++]=P[S++],A[o++]=P[S++],w-=3;w&&(A[o++]=P[S++],1<w&&(A[o++]=P[S++]))}else{for(S=o-O;A[o++]=A[S++],A[o++]=A[S++],A[o++]=A[S++],2<(w-=3););w&&(A[o++]=A[S++],1<w&&(A[o++]=A[S++]))}break}}break}}while(i<r&&o<s);i-=w=_>>3,h&=(1<<(_-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=_}},function(t,e,n){"use strict";var R=n(81),N=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],L=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],B=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function inflate_table(t,e,n,i,r,o,a,s){var c,u,p,l,d,h,_,f,y,m=s.bits,v=0,b=0,g=0,w=0,O=0,S=0,P=0,E=0,A=0,M=0,D=null,I=0,C=new R.Buf16(16),T=new R.Buf16(16),j=null,x=0;for(v=0;v<=15;v++)C[v]=0;for(b=0;b<i;b++)C[e[n+b]]++;for(O=m,w=15;1<=w&&0===C[w];w--);if(w<O&&(O=w),0===w)return r[o++]=20971520,r[o++]=20971520,s.bits=1,0;for(g=1;g<w&&0===C[g];g++);for(O<g&&(O=g),v=E=1;v<=15;v++)if(E<<=1,(E-=C[v])<0)return-1;if(0<E&&(0===t||1!==w))return-1;for(T[1]=0,v=1;v<15;v++)T[v+1]=T[v]+C[v];for(b=0;b<i;b++)0!==e[n+b]&&(a[T[e[n+b]]++]=b);if(h=0===t?(D=j=a,19):1===t?(D=N,I-=257,j=L,x-=257,256):(D=k,j=B,-1),v=g,d=o,P=b=M=0,p=-1,l=(A=1<<(S=O))-1,1===t&&852<A||2===t&&592<A)return 1;for(;;){for(_=v-P,y=a[b]<h?(f=0,a[b]):a[b]>h?(f=j[x+a[b]],D[I+a[b]]):(f=96,0),c=1<<v-P,g=u=1<<S;r[d+(M>>P)+(u-=c)]=_<<24|f<<16|y|0,0!==u;);for(c=1<<v-1;M&c;)c>>=1;if(0!==c?(M&=c-1,M+=c):M=0,b++,0==--C[v]){if(v===w)break;v=e[n+a[b]]}if(O<v&&(M&l)!==p){for(0===P&&(P=O),d+=g,E=1<<(S=v-P);S+P<w&&!((E-=C[S+P])<=0);)S++,E<<=1;if(A+=1<<S,1===t&&852<A||2===t&&592<A)return 1;r[p=M&l]=O<<24|S<<16|d-o|0}}return 0!==M&&(r[d+M]=v-P<<24|64<<16|0),s.bits=O,0}},function(t,e,n){"use strict";t.exports=function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){var i,r,o,Y=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(0),n(2),n(26),n(1204),n(4),n(310),n(31),n(22),n(51),n(18),n(346),n(1205),n(117),n(1207),n(1209),n(152),n(1210),n(1211),n(1212),n(204),n(403),n(404),n(1213),n(46),n(173),n(312),n(32),n(1214),n(1215),n(17),n(1216),n(407),n(1217),n(1218),n(408),n(1219),n(409),n(1220),n(1221)],void 0===(r=function(t,e,n,a,i,r,o,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var F=uipixi.UIToggleButton,V=uipixi.UIButton,H=function(t){function MainModule(){return null!==t&&t.apply(this,arguments)||this}return Y(MainModule,t),MainModule.prototype.initialize=function(t){this._isMobile=s.ElkaCore.instance.config.mobile,a.Application.operation.addAllowingRule(new u.OccurrenceBeginningLineRule("*","screen/set")),a.Application.operation.addAllowingRule(new u.OccurrenceBeginningLineRule("/wallpost")),p.CommandMap.map(h.SetScreenPromise,_.SetScreenCommand),p.CommandMap.map(g.HoldNotEnoughPromise,w.HoldNotEnoughCommand),p.CommandMap.map(k.ShowFullscreenWindowOnStartPromise,L.ShowFullscreenWindowOnStartCommand),s.ElkaCore.instance.promiseManager.wait(f.GameInitServerPromise,this.onGameInit.bind(this)),s.ElkaCore.instance.promiseManager.ask(new d.RegisterModuleLoaderPromise(this)),s.ElkaCore.instance.promiseManager.ask(new l.RegisterSeasonLoaderPromise(this))},MainModule.prototype.getResourcesToLoad=function(t){return this._isMobile?[]:[this.config.introResourcePrefix+t]},MainModule.prototype.getResourcesToLazyLoad=function(t){return this._isMobile?[]:[this.config.musicResourcePrefix+t]},MainModule.prototype.onGameInit=function(t){this._gameInitServerTime=1e3*t.serverTime+t.serverMs},MainModule.prototype.onPreloadModule=function(t){a.Application.model.resources=new y.ResourcesModel(a.Application.static.data.resources,a.Application.dynamic.user.resources),a.Application.dataProvider.registerProvider("ui",new T.UIDataProvider),this.mapMediators(),this.initializeChatMetrics(),j.Services.dataProvider.registerProvider("viralExchange",new x.ViralExchangeDataProvider(a.Application.model.viralExchange)),j.Services.dataProvider.registerProvider("social",new B.SocialDataProvider),a.Application.price.eventTarget.addEventListener(O.PriceServiceEvent.HOLD_NOT_ENOUGH,this.onSpendNotEnough.bind(this))},MainModule.prototype.onStartModule=function(t){var e=a.Application.view.show(i.GUINames.ANIMATIONS,null,r.WindowLayer.ANIMATIONS).displayObject;a.Application.animation.addAnimationContainer(c.AnimationLayer.ANIMATION_LAYER,e),a.Application.push.connect({initTime:this._gameInitServerTime})},MainModule.prototype.onVisitSeason=function(t){this.showHomeUI();var e=this.config.musicResourcePrefix+t;this._introWasPlayed||a.Application.resources.isResourceLoaded(e)||(a.Application.resources.eventTarget.addEventListener(M.ResourcesServiceEvent.LOADING_COMPLETE,this.onResourceLoad.bind(this)),e=this.config.introResourcePrefix+t,this._introWasPlayed=!0),this.playMusic(e)},MainModule.prototype.onResourceLoad=function(t){var e=this.config.musicResourcePrefix+a.Application.dynamic.user.screen;t.pack.getResource(e)&&(a.Application.resources.eventTarget.removeEventListener(M.ResourcesServiceEvent.LOADING_COMPLETE,this.onResourceLoad.bind(this)),a.Application.sound.fadeAndStop(A.SoundGroup.SOUND_GROUP_MUSIC,2e3,this.onMusicFaded.bind(this,e)))},MainModule.prototype.onMusicFaded=function(t){this.playMusic(t)},MainModule.prototype.playMusic=function(t){a.Application.sound.isPlaying(t,A.SoundGroup.SOUND_GROUP_MUSIC)||(a.Application.sound.stop(A.SoundGroup.SOUND_GROUP_MUSIC),a.Application.sound.play(t,!0,A.SoundGroup.SOUND_GROUP_MUSIC))},MainModule.prototype.onLeaveSeason=function(){a.Application.resources.eventTarget.hasListener(M.ResourcesServiceEvent.LOADING_COMPLETE,this.onResourceLoad.bind(this))&&a.Application.resources.eventTarget.removeEventListener(M.ResourcesServiceEvent.LOADING_COMPLETE,this.onResourceLoad.bind(this)),this.hideHomeUI()},MainModule.prototype.hideHomeUI=function(){a.Application.view.hide(this._hudHandle),this._hudHandle=null},MainModule.prototype.showHomeUI=function(){this._hudHandle=a.Application.view.show(i.GUINames.HUD,null,r.WindowLayer.HUD)},MainModule.prototype.mapMediators=function(){a.Application.view.mapMediator("*.closeButton",o.CloseButtonMediator),a.Application.view.mapMediator("*.*.closeButton",o.CloseButtonMediator),a.Application.view.mapMediator("*.*.*.closeButton",o.CloseButtonMediator),a.Application.view.mapMediator("*.*.*.*.closeButton",o.CloseButtonMediator),this.mapResourceBarMediator("*.cashHUDBar","cash"),this.mapResourceBarMediator("*.*.cashHUDBar","cash"),this.mapResourceBarMediator("*.energyHUDBar","energy"),this.mapResourceBarMediator("*.*.energyHUDBar","energy"),this.mapResourceBarMediator("*.keysHUDBar","keys"),this.mapResourceBarMediator("*.*.keysHUDBar","keys"),this.mapResourceBarMediator("*.moneyHUDBar","money",!0),this.mapResourceBarMediator("*.*.moneyHUDBar","money",!0),this.mapResourceBarMediator("*.farmCoinHUDBar","farmCoin",!1,!1,!0,"FARM_COIN_TOOLTIP"),this.mapResourceBarMediator("*.*.farmCoinHUDBar","farmCoin",!1,!1,!0,"FARM_COIN_TOOLTIP"),this.mapResourceBarMediator("*.farmCrystalHUDBar","farmCrystal",!1,!1,!0,"FARM_CRYSTAL_TOOLTIP"),this.mapResourceBarMediator("*.*.farmCrystalHUDBar","farmCrystal",!1,!1,!0,"FARM_CRYSTAL_TOOLTIP"),this.mapResourceBarMediator("*.coinHUDBar","coin",!0,!1,!0,"COIN_TOOLTIP"),this.mapResourceBarMediator("*.*.coinHUDBar","coin",!0,!1,!0,"COIN_TOOLTIP"),this.mapResourceBarMediator("*.duelHUDBar","duel",!1,!1),this.mapResourceBarMediator("*.*.duelHUDBar","duel",!1,!1),a.Application.view.mapMediatorToClass(V,C.UIButtonMediator),a.Application.view.mapMediatorToClass(F,C.UIButtonMediator),a.Application.view.mapMediator(i.GUINames.HUD+".leftSideBar.sideBarContainer.questsIcon",m.QuestsIconMediator),a.Application.view.mapMediator(i.GUINames.HUD+".leftSideBar.sideBarContainer.questsIcon",U.QuestIconGuideArrowMediator,null,[W.IsQuestIconArrowGuideEnabledGuard]),a.Application.view.mapMediator(i.GUINames.HUD+".leftSideBar.sideBarContainer.questsIcon."+i.GUINames.GUIDE_ARROW,G.GuideArrowMediator),a.Application.view.mapMediator(i.GUINames.FULLSCREEN_WINDOW,N.FullscreenWindowMediator),a.Application.view.mapMediator(i.GUINames.AWARDS_WINDOW,v.AwardsWindowMediator),a.Application.view.mapMediator(i.GUINames.AWARDS_WINDOW+".awardsList.*",b.AwardsListItemMediator),a.Application.view.mapMediator(i.GUINames.USER_PROFILE_WINDOW,E.UserProfileWindowMediator),a.Application.view.mapMediator(i.GUINames.USER_PROFILE_WINDOW+".cupList.*",R.UserProfileCupMediator),a.Application.view.mapMediator(i.GUINames.USER_PROFILE_WINDOW+".profileWindow.awardsContainer.awardsList.*",P.UserProfileListItemMediator)},MainModule.prototype.mapResourceBarMediator=function(t,e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!1),void 0===o&&(o=null),a.Application.view.mapMediator(t,S.ResourceBarMediator,{resourcePrefix:e,seasonResource:n,purchaseAvailable:i,infoAvailable:r,tooltip:o})},MainModule.prototype.onSpendNotEnough=function(t){s.ElkaCore.instance.promiseManager.ask(new g.HoldNotEnoughPromise(t.holdPrice))},MainModule.prototype.initializeChatMetrics=function(){a.Application.push.webSocketSupport?(a.Application.push.target.addEventListener(D.PushServiceEvent.CONNECT,this.onPushServiceEvent.bind(this)),a.Application.push.target.addEventListener(D.PushServiceEvent.ERROR_ON_CONNECT,this.onPushServiceEvent.bind(this)),a.Application.push.target.addEventListener(D.PushServiceEvent.DISCONNECT_WITH_ERROR,this.onPushServiceEvent.bind(this))):a.Application.metrics.goalStarkEvent(I.StarkEventsName.CHAT_CONNECT_IMPOSSIBLE,{})},MainModule.prototype.onPushServiceEvent=function(t){var e,n=((e={})[D.PushServiceEvent.CONNECT]=I.StarkEventsName.CHAT_CONNECT,e[D.PushServiceEvent.ERROR_ON_CONNECT]=I.StarkEventsName.CHAT_CONNECT_ERROR,e[D.PushServiceEvent.DISCONNECT_WITH_ERROR]=I.StarkEventsName.CHAT_DISCONNECT_ERROR,e);a.Application.metrics.goalStarkEvent(n[t.type],{})},MainModule}(n.Module);e.MainModule=H}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(50)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function CloseButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(CloseButtonMediator,t),CloseButtonMediator.prototype.onButton=function(t){n.Application.view.hide(this.viewHandle.viewContext.node.root.handle)},CloseButtonMediator}(i.SimpleButtonMediator);e.CloseButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1206),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function SetScreenCommand(){return null!==t&&t.apply(this,arguments)||this}return a(SetScreenCommand,t),SetScreenCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=new i.SetScreenAction(n.screenId),[4,r.Application.server.send(e)];case 1:return t.sent(),[2]}})})},SetScreenCommand}(n.CommandBase);e.SetScreenCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function SetScreenAction(t){var e=n.call(this)||this;return e.action="set",e.controller="screen",e.input=new i.ActionInput({screenId:t,getToysCoords:0}),e.output=new o,e}return a(SetScreenAction,n),SetScreenAction}(n.Action);e.SetScreenAction=r;var o=function(){function SetScreenActionOutput(){}return SetScreenActionOutput.prototype.parse=function(t){var e=t.data.workshop;e&&(this.requiredSlotData=e.requiredSlot)},SetScreenActionOutput}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1208),n(37)],void 0===(r=function(t,e,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ResourcesModel(t,e){this._resources=new core.Map,this._dynamic=e;for(var n=0,i=t.resource.items;n<i.length;n++){var r=i[n],o=r.id,a=new s.ResourceModel(r,this._dynamic.getItem(o));this._resources.set(o,a)}this._dynamic.addEventListener(c.ItemCollectionEvent.ITEM_ADDED,this.onItemAdded.bind(this))}return ResourcesModel.prototype.onItemAdded=function(t){var e=t.item;this._resources.get(e.id).dynamic=e},ResourcesModel.prototype.get=function(t){return this._resources.get(t)},ResourcesModel}();e.ResourcesModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(42),n(13)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ResourceModel(t,e){var n=i.call(this)||this;return n.id=t.id,n._static=t,e&&n.setDynamic(e),n}return a(ResourceModel,i),Object.defineProperty(ResourceModel.prototype,"dynamic",{set:function(t){if(this._dynamic)throw new Error("ResourceModel dynamic already exists: "+this._dynamic.id);this.setDynamic(t),this.dispatchEvent(new n.ResourceModelEvent(n.ResourceModelEvent.COUNT_CHANGED))},enumerable:!0,configurable:!0}),ResourceModel.prototype.setDynamic=function(t){this._dynamic=t,this._dynamic.addEventListener(r.BaseDataEvent.CHANGED,this.onChanged.bind(this))},ResourceModel.prototype.onChanged=function(){this.dispatchEvent(new n.ResourceModelEvent(n.ResourceModelEvent.COUNT_CHANGED))},Object.defineProperty(ResourceModel.prototype,"count",{get:function(){return this._dynamic?this._dynamic.count:0},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceModel.prototype,"static",{get:function(){return this._static},enumerable:!0,configurable:!0}),Object.defineProperty(ResourceModel.prototype,"isExist",{get:function(){return!!this._dynamic},enumerable:!0,configurable:!0}),ResourceModel}(uipixi.BaseEventTarget);e.ResourceModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(2),n(1),n(151),n(124),n(402)],void 0===(r=function(t,e,c,n,i,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=uipixi.GestureEvent,r=function(s){function QuestsIconMediator(){return null!==s&&s.apply(this,arguments)||this}return a(QuestsIconMediator,s),QuestsIconMediator.prototype.initialize=function(t){s.prototype.initialize.call(this,t),this._markersContainer=this.child("markersContainer"),this._achievements=c.Application.model.achievements.getAll(),this._bonusesModel=c.Application.model.bonuses,this._questIconModel=(new l.QuestMarkersModel).initialize(),this.updateMarkers(),this.registerListener(this._questIconModel,l.QuestMarkersModel.UPDATE_MARKER_EVENT,this.updateMarkers.bind(this));for(var e=0,n=this._achievements;e<n.length;e++){var i=n[e];this.registerListener(i,u.AchievementModelEvent.MODEL_CHANGED,this.updateMarkers.bind(this))}for(var r=0,o=this._bonusesModel.bonuses;r<o.length;r++){var a=o[r];this.registerListener(a,p.BonusModelEvent.MODEL_CHANGED,this.updateMarkers.bind(this))}this.registerListener(this._container,d.POINTER_TAP,this.onButton.bind(this))},QuestsIconMediator.prototype.updateMarkers=function(){this._achievements.some(function(t){return t.canGetAward()})||this._bonusesModel.canGetAward()?this._markersContainer.currentState=l.QuestMarkersContainerState.DONE:this._markersContainer.currentState=this._questIconModel.getMarkerType()},QuestsIconMediator.prototype.onButton=function(){c.Application.view.show(n.GUINames.QUESTS_WINDOW)},QuestsIconMediator.prototype.destroy=function(){this._questIconModel.destroy(),s.prototype.destroy.call(this)},QuestsIconMediator}(i.DisplayObjectContainerMediator);e.QuestsIconMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(0),n(14),n(152)],void 0===(r=function(t,e,n,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(a){function AwardsListItemMediator(){var t=null!==a&&a.apply(this,arguments)||this;return t.typesForGold=[u.AwardType.TOY,u.AwardType.ROULETTE,u.AwardType.EXTRA_ITEM,u.AwardType.UNLOCKED_EXTRA_ITEM],t}return l(AwardsListItemMediator,a),AwardsListItemMediator.prototype.initialize=function(t){a.prototype.initialize.call(this,t);var e=this._showData.awardItem.type===u.AwardType.TOY,n=this.child("iconImageToy"),i=this.child("iconImage");if(i.visible=!e,n.visible=e,this._awardRenderer=(new s.AwardRenderer).initialize(this._showData.awardItem,this._container,{iconImage:e?n:i,iconId:64,fit:!0}),this._showData.isBonus||0<=this.typesForGold.indexOf(this._showData.awardItem.type)){this._container.currentState="bonus",this.child("bonusContainer").visible=this._showData.bonusType!==p.AwardBonusType.NONE,this.child("bonusBg1").visible=this._showData.isBonus&&this._showData.bonusType===p.AwardBonusType.BEAUTY,this.child("bonusBg2").visible=this._showData.isBonus&&this._showData.bonusType===p.AwardBonusType.OTHER;var r=this.child("bonusValue");this._showData.isBonus?(r.visible=!0,r.text=this._showData.bonusPercent+"\n%"):r.visible=!1}var o={delay:100*this._showData.itemIndex};this._animationProcess=c.Application.animation.animate(this._container,AwardsListItemMediator.ANIMATION_NAME,o)},AwardsListItemMediator.prototype.destroy=function(){this._animationProcess.stop(),this._awardRenderer.destroy(),a.prototype.destroy.call(this)},AwardsListItemMediator.ANIMATION_NAME="awardWindowItem",AwardsListItemMediator}(n.DisplayObjectContainerMediator);e.AwardsListItemMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function HoldNotEnoughPromise(t){var e=n.call(this)||this;return e.holdPrice=t,e}return a(HoldNotEnoughPromise,n),HoldNotEnoughPromise}(n.BasePromise);e.HoldNotEnoughPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(49),n(4),n(228),n(8),n(2)],void 0===(r=function(t,e,n,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function HoldNotEnoughCommand(){return null!==t&&t.apply(this,arguments)||this}return a(HoldNotEnoughCommand,t),HoldNotEnoughCommand.prototype.execute=function(c){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return f(this,function(t){if(e=u.Application.price.calculateNotEnough(c.holdPrice),n=e.getPriceFirst(p.PriceType.RESOURCE)){if((i=u.Application.model.promoBundles.active[0])&&i.offers.some(function(t){return!!t.getAward().getItemLike(n)}))return u.Application.view.show(i.window,new h.ViewContext(i)),[2];for(r=0,o=u.Application.model.promos.active;r<o.length;r++)if((a=o[r]).isSolo&&a.getAward().getItemLike(n))return u.Application.view.show(a.window,new h.ViewContext(a)),[2];if(s=u.Application.model.promos.active.filter(function(t){return!t.hasSelfWindow&&t.getAward().getItemLike(n)}).sort(function(t,e){return e.price.value-t.price.value})[0])return u.Application.view.show(_.GUINames.ONE_PROMO_WINDOW,new h.ViewContext(s)),[2];l.ElkaCore.instance.promiseManager.ask(new d.ShowShopPromise(n.itemId,n.value))}return[2]})})},HoldNotEnoughCommand}(n.CommandBase);e.HoldNotEnoughCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,y=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(40),n(33),n(4),n(404),n(21),n(2),n(405),n(406),n(407),n(16)],void 0===(r=function(t,e,n,r,i,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=uipixi.GestureEvent,f=function(e){function UserProfileWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return y(UserProfileWindowMediator,e),UserProfileWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.getChildren(),this.setParams()},UserProfileWindowMediator.prototype.getChildren=function(){this._levelLabel=this.child("levelLabel"),this._tooltipButton=this.child("tooltipButton"),this._idLabel=this.child("idLabel"),this._ipLabel=this.child("ipLabel"),this._myProfileContainer=this.child("myProfile"),this._okButton=this.child("okButton"),this._vkButton=this.child("vkButton"),this._userContainer=this.child("userContainer"),this._clanContainer=this.child("clanContainer"),this._awardsList=this.child("awardsList"),this._clanButton=this.child("clanButton"),this.registerListener(this.child("gotoRatingButton"),_.POINTER_TAP,this.onRating.bind(this))},UserProfileWindowMediator.prototype.setParams=function(){if(this._showData.sUserId===r.Application.dynamic.user.sUserId)this._myProfileContainer.visible=!0,this.changeButtonsVisible(!1,!1),r.Application.dynamic.user.clan.idPrerelease?(this._clanContainer.currentState="inClan",this.registerListener(this._clanButton,_.POINTER_TAP,this.onClanButton.bind(this)),this.child("unionName").text=r.Application.dynamic.user.clan.namePrerelease):this._clanContainer.currentState="notInClan",this._idLabel.text="#"+a.ElkaCore.instance.config.userIdPlatform+"#",this._ipLabel.text=a.ElkaCore.instance.config.userIP,this.setupCups(!1,r.Application.dynamic.user.cups),this.setupFrame(!1);else{this._myProfileContainer.visible=!1,this._clanContainer.currentState="notInClan";var t=r.Application.dynamic.friends.getItem(this._showData.sUserId);if(t&&t.isNPC)this.changeButtonsVisible(!1,!1);else switch(r.Application.social.platformType){case o.PlatformType.FB:case o.PlatformType.UNKNOWN:this.changeButtonsVisible(!1,!1);break;case o.PlatformType.OK:this.changeButtonsVisible(!0,!1);break;case o.PlatformType.VK:case o.PlatformType.VK_MOBILE:this.changeButtonsVisible(!1,!0)}this.setupCups(!0,r.Application.model.travel.currentFriend.userData.user.cups),this.setupFrame(!0)}this._levelLabel.text=this._showData.level;var e=r.Application.profiles.getProfile(this._showData.sUserId,!0);this._profileRenderer=(new i.ProfileRenderer).initialize(e,this._userContainer),this._awardsList.addItem(s.UserProfileItemState.DEFAULT);for(var n=1;n<5;n++)this._awardsList.addItem(s.UserProfileItemState.EMPTY);r.Application.tooltip.addTooltip(this._tooltipButton,c.TooltipAnchor.Bottom,u.GUINames.TEXT_TOOLTIP,{text:r.Application.localization.localize("USER_PROFILE_TOOLTIP")})},UserProfileWindowMediator.prototype.setupFrame=function(t){var e=this.child("frame"),n=r.Application.model.ratings.getBestPlace(this._showData.sUserId),i=r.Application.model.ratings.getFrameResource(100,n);this._frameLoadableImage=new h.LoadableImage(e,i)},UserProfileWindowMediator.prototype.setupCups=function(t,e){if(this._container.currentState=t?"friend":"my",e){var n=this.child("cupList");for(var i in e){var r=e[i];for(var o in r)0<r[o]&&n.addItem(new d.UserProfileCupMediatorVO(+i,+o,r[o]))}if(0<n.items.length)return}this.child("noCups").visible=!0},UserProfileWindowMediator.prototype.onRating=function(t){a.ElkaCore.instance.promiseManager.ask(new l.ShowRatingWindowPromise)},UserProfileWindowMediator.prototype.onGoToFriendSocial=function(t){window.open(r.Application.social.platform.getProfileUrl(this._showData.sUserId))},UserProfileWindowMediator.prototype.onClanButton=function(t){a.ElkaCore.instance.promiseManager.ask(new p.GetPrereleaseClanPromise)},UserProfileWindowMediator.prototype.changeButtonsVisible=function(t,e){this._okButton.visible=t,this._vkButton.visible=e,t&&this.registerListener(this._okButton,_.POINTER_TAP,this.onGoToFriendSocial.bind(this)),e&&this.registerListener(this._vkButton,_.POINTER_TAP,this.onGoToFriendSocial.bind(this))},UserProfileWindowMediator.prototype.destroy=function(){this._profileRenderer&&this._profileRenderer.destroy(),this._frameLoadableImage&&this._frameLoadableImage.destroy(),e.prototype.destroy.call(this)},UserProfileWindowMediator}(n.DisplayObjectContainerMediator);e.UserProfileWindowMediator=f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(46),n(43),n(1),n(38),n(14)],void 0===(r=function(t,e,r,o,a,n,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=uipixi.UIImage,p=function(e){function UIButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return l(UIButtonMediator,e),UIButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._button=t.displayObject,this._cashResources=[i.PriceAwardUtils.getIcon(s.AwardType.RESOURCE,"cash","48"),i.PriceAwardUtils.getIcon(s.AwardType.RESOURCE,"cash","64")],this.registerListener(this._container,c.POINTER_DOWN,this.onButton.bind(this))},UIButtonMediator.prototype.onButton=function(){for(var t=!1,e=0,n=this._button.allChildren;e<n.length;e++){var i=n[e];i instanceof u&&0<=this._cashResources.indexOf(i.resource)&&(t=!0)}r.Application.sound.play(t?a.SoundName.BUY_CRYSTAL:a.SoundName.CLICK,!1,o.SoundGroup.SOUND_GROUP_SOUND)},UIButtonMediator}(n.DisplayObjectContainerMediator);e.UIButtonMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function UIDataProvider(){}return UIDataProvider.prototype.getValue=function(t,e){var n=t.split("."),i=n[0];n[1];switch(i){case UIDataProvider.SHOWN:var r=e[0];if(1!==e.length&&"name"!==r.type&&1!==r.values.length)throw new Error("UIDataProvider: invalid filters");return o.Application.view.isShowed(r.values[0]);default:throw new Error("ObjectsDataProvider: unsupported type "+i)}},UIDataProvider.prototype.unwatch=function(t,e){},UIDataProvider.prototype.watch=function(t,e){},UIDataProvider.SHOWN="shown",UIDataProvider}();e.UIDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(150)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function ViralExchangeDataProvider(t){this._viralExchangeModel=t}return ViralExchangeDataProvider.prototype.getValue=function(t,e){var n=t.split("."),i=n[0],r=n[1];if(void 0!==n[2])throw new Error("ViralExchangeDataProvider: invalid path "+t);switch(i){case ViralExchangeDataProvider.TYPE_SENT_LIST:if(0<e.length){var o=e[0];switch(o.type){case"socialId":for(var a=0,s=0,c=o.values;s<c.length;s++){var u=c[s];a+=this._viralExchangeModel.getSentCountByUser(r,u)}return a}}return this._viralExchangeModel.getSentCount(r);default:throw new Error("ViralExchangeDataProvider: unsupported type "+i)}},ViralExchangeDataProvider.prototype.watch=function(t,e){this._viralExchangeModel.addEventListener(n.ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED,e)},ViralExchangeDataProvider.prototype.unwatch=function(t,e){this._viralExchangeModel.removeEventListener(n.ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED,e)},ViralExchangeDataProvider.TYPE_SENT_LIST="sentList",ViralExchangeDataProvider}();e.ViralExchangeDataProvider=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(32),n(16)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=function(n){function FullscreenWindowMediator(){return null!==n&&n.apply(this,arguments)||this}return c(FullscreenWindowMediator,n),FullscreenWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._checkBox=this.child("checkBox"),this._checkBox.selected=!1;var e=this.child("fairy");this._loadableImage=new o.LoadableImage(e,e.resource),this.registerListener(this.child("continueButton"),a.POINTER_TAP,this.onTap.bind(this))},FullscreenWindowMediator.prototype.onTap=function(){i.Application.view.hide(this.viewHandle),i.Application.view.ui.fullscreen.requestFullscreen(),i.Application.metrics.goalStarkEvent(r.StarkEventsName.FULLSCREEN,{})},FullscreenWindowMediator.prototype.destroy=function(){this._checkBox.selected&&i.Application.settings.setFullscreenWindowParam(),this._loadableImage.destroy(),n.prototype.destroy.call(this)},FullscreenWindowMediator}(n.DisplayObjectContainerMediator);e.FullscreenWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(2),n(33)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function ShowFullscreenWindowOnStartCommand(){return null!==t&&t.apply(this,arguments)||this}return s(ShowFullscreenWindowOnStartCommand,t),ShowFullscreenWindowOnStartCommand.prototype.execute=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return!n.Application.social.platformIs(o.PlatformType.VK)||n.Application.settings.isFullscreenWindowWasShowed()?[3,2]:[4,n.Application.view.show(r.GUINames.FULLSCREEN_WINDOW).onClose];case 1:return t.sent(),e.resolve({shown:!0}),[2];case 2:return e.resolve({shown:!1}),[2]}})})},ShowFullscreenWindowOnStartCommand}(i.CommandBase);e.ShowFullscreenWindowOnStartCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(33)],void 0===(r=function(t,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SocialDataProvider(){}return SocialDataProvider.prototype.getValue=function(t,e){var n=t.split("."),i=n[0];if(void 0!==n[1])throw Error("SocialDataProvider: invalid path "+t);switch(i){case SocialDataProvider.TYPE_VK_WEB:return r.Application.social.platformType===o.PlatformType.VK?1:0;default:throw Error("SocialDataProvider: unsupported type "+i)}},SocialDataProvider.prototype.watch=function(t,e){throw Error("SocialDataProvider: watch is not implemented")},SocialDataProvider.prototype.unwatch=function(t,e){throw Error("SocialDataProvider: unwatch is not implemented")},SocialDataProvider.TYPE_VK_WEB="vkWeb",SocialDataProvider}();e.SocialDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(48),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function QuestIconGuideArrowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t.QUESTS_WINDOW_GUIDE_ID=2,t}return c(QuestIconGuideArrowMediator,e),QuestIconGuideArrowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.isGuideCompletedOrSkipped()||(this.isAnyGuideActive()||this.addArrowHandle(),this.registerListener(i.Application.model.guides,r.GuidesModelEvent.ACTIVE_CHANGED,this.onGuideActiveChanged.bind(this)))},QuestIconGuideArrowMediator.prototype.onGuideActiveChanged=function(){this.isGuideCompletedOrSkipped()?this.unregisterListener(i.Application.model.guides,r.GuidesModelEvent.ACTIVE_CHANGED,this.onGuideActiveChanged.bind(this)):this.isAnyGuideActive()?this._arrowHandle&&(this._container.removeChild(this._arrowHandle.displayObject,!0),this._arrowHandle=void 0):this.addArrowHandle()},QuestIconGuideArrowMediator.prototype.addArrowHandle=function(){this._arrowHandle=i.Application.view.addChild(this._container,o.GUINames.GUIDE_ARROW,new a.ViewContext({angle:180})),this._arrowHandle.displayObject.outside="centerRight"},QuestIconGuideArrowMediator.prototype.isAnyGuideActive=function(){return!!i.Application.model.guides.getActiveGuide()},QuestIconGuideArrowMediator.prototype.isGuideCompletedOrSkipped=function(){return i.Application.model.guides.isGuideCompletedOrSkipped(this.QUESTS_WINDOW_GUIDE_ID)},QuestIconGuideArrowMediator}(n.DisplayObjectContainerMediator);e.QuestIconGuideArrowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function IsQuestIconArrowGuideEnabledGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsQuestIconArrowGuideEnabledGuard,t),IsQuestIconArrowGuideEnabledGuard.prototype.approve=function(){return i.Application.model.quests.getQuestLineById(1).questId<=1},IsQuestIconArrowGuideEnabledGuard}(n.Guard);e.IsQuestIconArrowGuideEnabledGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(305),n(307),n(4),n(306),n(0),n(91),n(66),n(172)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function LocalizationService(){return null!==t&&t.apply(this,arguments)||this}return l(LocalizationService,t),LocalizationService.prototype.setCustomLocaleMapping=function(){this._customLocaleMapping.set(i.LocaleLanguage.UK,i.LocaleLanguage.RU),this._customLocaleMapping.set(i.LocaleLanguage.BE,i.LocaleLanguage.RU)},LocalizationService.prototype.getResourceId=function(t){var e=r.ElkaCore.instance.config.getLocalePath(o.Locale.toShortString(t));if(!e)return null;e="//"+r.ElkaCore.instance.config.serverHost+e;var n="localization_"+o.Locale.toShortString(t);if(!a.Application.resources.currentTheme.getResource(n)){var i=new s.ResourceDescriptor(n,e,c.ResourceType.XML,0);a.Application.resources.currentTheme.addResource(new u.XMLResource(i))}return n},LocalizationService.prototype.parseResource=function(t){var r={};return jQuery(t.getRawData()).children("locale").children("strings").find("text").each(function(t,e){var n=e.parentElement||jQuery(e).parent().get(0);if(n){var i=$(e).attr("id");r["server"===n.tagName?n.tagName+"."+i:i]=e.textContent}}),r},LocalizationService}(n.LocalizationService);e.LocalizationService=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,S=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1224),n(1225),n(1228),n(1229),n(1230),n(1232),n(1234),n(1237),n(1238),n(31),n(0),n(4),n(114),n(154),n(1239),n(1240),n(1242),n(1243),n(1244),n(1245)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O=function(t){function AdminModule(){return null!==t&&t.apply(this,arguments)||this}return S(AdminModule,t),AdminModule.prototype.postInit=function(){var e=this;new i.UserTruncateCommand(this.adminFolder,"Очистить игрока"),new r.LevelUpCommand(this.adminFolder,"Поднять уровень"),new o.SetResourceCommand(this.adminFolder,"Установить ресурс"),new a.CustomActionCommand(this.adminFolder,"Произвольный запрос"),new c.FixPriceCommand(this.adminFolder,"fixPrice"),new p.PushServiceCommand(this.adminFolder,"Push Service"),new y.UseEnergyAdminCommand(this.adminFolder,"Трата палок"),new m.AddRouletteCommand(this.adminFolder,"Добавить колесо фортуны"),new b.CopyScreenCommand(this.adminFolder,"Копировать поляну"),new g.SkipGuideAdminCommand(this.adminFolder),new w.SkipRouletteAdminCommand(this.adminFolder),new s.SetParamAdminCommand(this.gui,"setParam"),h.ElkaCore.instance.config.mobile&&new v.SendLogCommand(this.gui),new u.FillCommand(this.gui),d.Application.operation.addAllowingRule(new l.OccurrenceBeginningLineRule("*","admin/setParam")),Object.keys(d.Application).forEach(function(t){return e._windowElka[t]=d.Application[t]}),this.addGotoShortcut()},AdminModule.prototype.addGotoShortcut=function(){this._windowElka.goto=function(t){var e=d.Application.dynamic.friends.getItem(t);e||(e=new _.FriendDynamicItem(t,{sUserId:t})),h.ElkaCore.instance.promiseManager.ask(new f.FromSeasonToFriendPromise(e))}},AdminModule}(n.AdminModule);e.AdminModule=O}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(28),n(86),n(17)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function AdminModule(){var t=null!==e&&e.apply(this,arguments)||this;return t.gui=null,t}return s(AdminModule,e),AdminModule.prototype.initialize=function(t){return c(this,void 0,void 0,function(){return u(this,function(t){return i.Core.instance.eventRouter.addEventListener(r.CoreEvent.READY,this.onCoreReadyHandler.bind(this)),[2]})})},AdminModule.prototype.onCoreReadyHandler=function(){var e=this;(i.Core.instance.eventRouter.removeEventListener(r.CoreEvent.READY,this.onCoreReadyHandler.bind(this)),o.Services.debug.addLog("BootModule.onCoreReadyHandler: CORE IS READY!"),i.Core.instance.config.isUserAdmin())&&(this.gui=new dat.GUI({closed:!0,autoPlace:!1}),this.gui.domElement.style.position="absolute",this.gui.domElement.style.right="0px",this.gui.domElement.style.top="0px",this.gui.domElement.style.zIndex="120",this.gui.domElement.style.visibility="visible",this.gui.close(),(document.body.children.namedItem("viewContent")||document.body).appendChild(this.gui.domElement),this.adminFolder=this.gui.addFolder("Админка"),this._windowElka=window.elka={},Object.keys(o.Services).forEach(function(t){return e._windowElka[t]=o.Services[t]}),this.postInit())},AdminModule}(n.Module);e.AdminModule=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1226),n(17),n(0),n(2),n(26),n(8),n(194),n(71),n(1227)],void 0===(r=function(t,e,n,r,o,a,s,c,u,i,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(i){function UserTruncateCommand(t,e){var n=i.call(this,t,e)||this;return n._folder.add(n,"Очистить"),n._folder.add(n,"Удалить"),n}return d(UserTruncateCommand,i),UserTruncateCommand.prototype["Очистить"]=function(){return h(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.call(new n.UserTruncateAction,"Данные юзера очищены.")];case 1:return t.sent(),[2]}})})},UserTruncateCommand.prototype["Удалить"]=function(){return h(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.call(new p.UserDropAction,"Юзер удалён")];case 1:return t.sent(),[2]}})})},UserTruncateCommand.prototype.call=function(e,n){return h(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,r.Services.server.send(e)];case 1:return t.sent(),o.Application.settings.clear(),this.alert(n),o.Application.debug.addLogToConsole("admin",n),[2]}})})},UserTruncateCommand.prototype.alert=function(t){o.Application.view.show(a.GUINames.ERROR_WINDOW,new c.ViewContext({title:"Готово",text:t,button:u.ErrorWindowButton.RELOAD}),s.WindowLayer.ADMIN)},UserTruncateCommand}(i.Command);e.UserTruncateCommand=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function UserTruncateAction(t,e){var n=i.call(this)||this;return n.action="truncateUser",n.controller="admin",n.input=new r.ActionInput({userId:t,sUserId:e}),n}return a(UserTruncateAction,i),UserTruncateAction}(n.Action);e.UserTruncateAction=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function UserDropAction(){var t=e.call(this)||this;return t.action="dropUser",t.controller="admin",t.input=new i.ActionInput,t}return a(UserDropAction,e),UserDropAction}(n.Action);e.UserDropAction=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(71),n(17),n(153),n(0)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function LevelUpCommand(t,e){var n=i.call(this,t,e)||this;return n.title="",n.params={"плюс":5},n._folder.add(n.params,"плюс").step(1),n._folder.add(n,"поднять"),n}return s(LevelUpCommand,i),LevelUpCommand.prototype.поднять=function(){return c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return e=a.Application.dynamic.user.level+this.params["плюс"],[4,r.Services.server.send(new o.SetParamAction("level",e))];case 1:return t.sent(),[2]}})})},LevelUpCommand}(n.Command);e.LevelUpCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(71),n(153),n(5),n(17),n(0)],void 0===(r=function(t,e,n,i,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(a){function SetResourceCommand(t,e){var n=a.call(this,t,e)||this;n.title="Установить параметр",n.params={value:"",key:""};var i={},r=s.Application.static.data.resources.resource.items.concat();r.sort(function(t,e){return t.id>e.id?1:-1});for(var o=0;o<r.length;o++){i[String(r[o].id)]="resource."+r[o].id}return n._folder.add(n.params,"value",0),n._folder.add(n.params,"key",i),n._folder.add(n,"set"),n}return c(SetResourceCommand,a),SetResourceCommand.prototype.set=function(){return u(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return this.params.key&&this.params.value?(e=new i.SetParamAction(this.params.key,r.Utils.parseInt(this.params.value)),[4,o.Services.server.send(e)]):[2];case 1:return t.sent(),[2]}})})},SetResourceCommand}(n.Command);e.SetResourceCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(71),n(1231),n(17)],void 0===(r=function(t,e,n,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(s){function CustomActionCommand(t,e){var n=s.call(this,t,e)||this;n.params={controller:"",action:""},n.list=[{controller:"admin",action:"setParam",params:[{name:"key",defaultValue:"",type:"string"},{name:"value",defaultValue:"",type:"object"}]},{controller:"admin",action:"platformSetLevel",params:[{name:"levels",defaultValue:'["123:2", "456:5"]',type:"object"}]},{controller:"admin",action:"addPendingAward",params:[{name:"entity",defaultValue:"elfUpgrade",type:"string"},{name:"itemId",defaultValue:"8",type:"string"},{name:"extraItemId",defaultValue:1,type:"number"},{name:"value",defaultValue:1,type:"number"}]},{controller:"admin",action:"cloneUser",params:[{name:"cloneUserId",defaultValue:1,type:"number"}]},{controller:"admin",action:"chestClear",params:[{name:"id",defaultValue:1,type:"number"}]},{controller:"admin",action:"ratingRecalculate",params:[]},{controller:"admin",action:"ratingRecalculateBeauty",params:[]},{controller:"admin",action:"ratingSet ",params:[{name:"ratingId",defaultValue:1,type:"number"},{name:"value",defaultValue:1,type:"number"}]},{controller:"admin",action:"recalculateNpcLevels",params:[]},{controller:"pendingAward",action:"getAward",params:[{name:"awardId",defaultValue:1,type:"number"}]},{controller:"object",action:"useEnergy",params:[{name:"objectName",defaultValue:"",type:"string"},{name:"count",defaultValue:1,type:"number"}]},{controller:"object",action:"stageUp",params:[{name:"objectName",defaultValue:"",type:"string"}]},{controller:"present",action:"get",params:[{name:"presentId",defaultValue:"1",type:"number"}]},{controller:"game",action:"init",params:[{name:"friendIds",defaultValue:"[]",type:"array"},{name:"socialData",defaultValue:"{}",type:"object"},{name:"starkReferrer",defaultValue:"",type:"string"},{name:"signedRequest",defaultValue:"",type:"string"},{name:"businessList",defaultValue:"",type:"string"}]},{controller:"generator",action:"init",params:[{name:"name",defaultValue:"",type:"string"}]},{controller:"generator",action:"exchange",params:[{name:"name",defaultValue:"",type:"string"}]},{controller:"beauty",action:"upgradeStage",params:[{name:"screenId",defaultValue:"1",type:"number"}]},{controller:"toy",action:"setXY",params:[{name:"screenId",defaultValue:"1",type:"number"},{name:"coords",defaultValue:"[[202,0,0,0,0,0,0,0]]",type:"array"}]},{controller:"extraItem",action:"set",params:[{name:"itemId",defaultValue:"",type:"number"}]},{controller:"extraItem",action:"unset",params:[{name:"itemId",defaultValue:"",type:"number"}]},{controller:"mail",action:"send",params:[{name:"friendsList",type:"array",defaultValue:'["-1"]'},{name:"sentListId",type:"number",defaultValue:"1"},{name:"resourceId",type:"string",defaultValue:"viralBalls2"}]},{controller:"mail",action:"get",params:[{name:"inboxId",type:"number",defaultValue:"1"}]},{controller:"roulette",action:"spin",params:[{name:"rouletteId",type:"number",defaultValue:"1"}]},{controller:"roulette",action:"getAward",params:[{name:"rouletteId",type:"number",defaultValue:"1"}]},{controller:"quest",action:"setProgress",params:[{name:"questLineId",type:"number",defaultValue:"100"},{name:"taskId",type:"number",defaultValue:"1"},{name:"progress",type:"number",defaultValue:"1"}]},{controller:"quest",action:"finish",params:[{name:"questLineId",type:"number",defaultValue:"100"}]},{controller:"quest",action:"start",params:[{name:"questLineId",type:"number",defaultValue:"100"}]},{controller:"friend",action:"get",params:[{name:"sFriendId",type:"string",defaultValue:"1"},{name:"screenId",type:"number",defaultValue:"1"},{name:"chestId",type:"number",defaultValue:"1"}]},{controller:"clan",action:"getPrerelease",params:[]},{controller:"guide",action:"setProgress",params:[{name:"queueId",type:"number",defaultValue:"1"},{name:"stepId",type:"number",defaultValue:"0"}]},{controller:"wallpost",action:"post",params:[{name:"id",type:"number",defaultValue:"1"}]},{controller:"workshop",action:"giveElement",params:[{name:"friendId",type:"string",defaultValue:""}]},{controller:"admin",action:"setGroupId",params:[{name:"groupId",type:"number",defaultValue:"1"}]},{controller:"admin",action:"farmDestroy",params:[]},{controller:"admin",action:"dropUser",params:[{name:"userId",defaultValue:0,type:"number"},{name:"sUserId",defaultValue:"",type:"string"}]},{controller:"admin",action:"truncateUser",params:[{name:"userId",defaultValue:0,type:"number"},{name:"sUserId",defaultValue:"",type:"string"}]},{controller:"admin",action:"buyVkNewYearGiftPromo",params:[{name:"receiverId",type:"string",defaultValue:""},{name:"presentId",type:"string",defaultValue:""}]}],n.paramControllers=[],n.buttonController=null,n.controllerList={};for(var i={},r=0,o=n.list;r<o.length;r++){var a=o[r];n.controllerList.hasOwnProperty(a.controller)||(n.controllerList[a.controller]=[],i[a.controller]=a.controller),n.controllerList[a.controller].push(a.action)}return n.controller=n._folder.add(n.params,"controller",i),n.controller.onChange(n.onControllerChange.bind(n)),n.action=null,n}return a(CustomActionCommand,s),CustomActionCommand.prototype.onControllerChange=function(t){null!==this.action&&this.folder.remove(this.action),this.clearParams();for(var e={},n=0,i=this.controllerList[t];n<i.length;n++){var r=i[n];e[r]=r}this.action=this._folder.add(this.params,"action",e),this.action.onChange(this.onActionChange.bind(this))},CustomActionCommand.prototype.onActionChange=function(t){var e=this.getCurrentCommand();if(e){this.clearParams();for(var n=0,i=e.params;n<i.length;n++){var r=i[n];this.params[r.name]=r.defaultValue,this.paramControllers.push(this._folder.add(this.params,r.name))}this.buttonController=this._folder.add(this,"send")}},CustomActionCommand.prototype.clearParams=function(){for(var t=0,e=this.paramControllers;t<e.length;t++){var n=e[t];this.folder.remove(n)}this.paramControllers=[],null!==this.buttonController&&this.folder.remove(this.buttonController),this.buttonController=null},CustomActionCommand.prototype.getCommand=function(t,e){for(var n=0,i=this.list;n<i.length;n++){var r=i[n];if(r.action===e&&r.controller===t)return r}return null},CustomActionCommand.prototype.getCurrentCommand=function(){return this.getCommand(this.params.controller,this.params.action)},CustomActionCommand.prototype.send=function(){return p(this,void 0,void 0,function(){var e,n,i,r,o,a;return l(this,function(t){switch(t.label){case 0:if(!(e=this.getCurrentCommand()))return[2];for(n={},i=0,r=e.params;i<r.length;i++)switch((o=r[i]).type){case"number":n[o.name]=parseInt(this.params[o.name]);break;case"array":case"object":n[o.name]=JSON.parse(this.params[o.name]);break;case"string":default:n[o.name]=this.params[o.name]}return a=new c.CustomRequestAction(e.controller,e.action,n),[4,u.Services.server.send(a)];case 1:return t.sent(),[2]}})})},CustomActionCommand}(n.Command);e.CustomActionCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function CustomRequestAction(t,e,n){var i=r.call(this)||this;return i.controller=t,i.action=e,i.input=new o.ActionInput(n),i.output=new a,i}return s(CustomRequestAction,r),CustomRequestAction}(n.Action);e.CustomRequestAction=i;var a=function(){function CustomRequestActionOutput(){}return CustomRequestActionOutput.prototype.parse=function(t){},CustomRequestActionOutput}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(71),n(0),n(153),n(1233)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SetParamAdminCommand(t,e){var n=i.call(this,t,e)||this;return n.params={key:"",value:"",unsafe:!1},n.folder.add(n.params,"key"),n.folder.add(n.params,"value"),n.folder.add(n.params,"unsafe"),n._folder.add(n,"set"),n}return s(SetParamAdminCommand,i),SetParamAdminCommand.prototype.set=function(){if(this.params.unsafe){var t=void 0;try{t=JSON.parse(this.params.value)}catch(t){return void r.Application.debug.addLog("admin","Невозможно сконвертировать value в объект. Передаваемое значение можно собрать и провериь здесь: https://www.freeformatter.com/json-formatter.html#ad-output")}r.Application.server.send(new a.SetParamUnsafeAction(this.params.key,t))}else{var e=parseInt(this.params.value);if(isNaN(e))return void r.Application.debug.addLog("adming","value должен быть числом, или включи unsafe");r.Application.server.send(new o.SetParamAction(this.params.key,e))}},SetParamAdminCommand}(n.Command);e.SetParamAdminCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function SetParamUnsafeAction(t,e){var n=i.call(this)||this;return n.action="setParamUnsafe",n.controller="admin",n.input=new r.ActionInput({key:t,value:e}),n.output=new o,n}return a(SetParamUnsafeAction,i),SetParamUnsafeAction}(n.Action);e.SetParamUnsafeAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(71),n(0),n(17),n(1235),n(1236)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function FixPriceCommand(t,e){var n=i.call(this,t,e)||this;return n.title="",n.params={},n._folder.add(n,"on"),n._folder.add(n,"off"),n}return c(FixPriceCommand,i),FixPriceCommand.prototype.on=function(){return u(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,o.Services.server.send(new a.AdminFixPriceOnAction)];case 1:return t.sent(),r.Application.price.fixPrice=!0,[2]}})})},FixPriceCommand.prototype.off=function(){return u(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,o.Services.server.send(new s.AdminFixPriceOffAction)];case 1:return t.sent(),r.Application.price.fixPrice=!1,[2]}})})},FixPriceCommand}(n.Command);e.FixPriceCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function AdminFixPriceOnAction(){var t=e.call(this)||this;return t.controller="admin",t.action="fixPriceOn",t.input=new i.ActionInput,t.output=new o,t}return a(AdminFixPriceOnAction,e),AdminFixPriceOnAction}(n.Action);e.AdminFixPriceOnAction=r;var o=function(){function FixPriceActionOutput(){}return FixPriceActionOutput.prototype.parse=function(t){},FixPriceActionOutput}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function AdminFixPriceOffAction(){var t=e.call(this)||this;return t.controller="admin",t.action="fixPriceOff",t.input=new i.ActionInput,t.output=new o,t}return a(AdminFixPriceOffAction,e),AdminFixPriceOffAction}(n.Action);e.AdminFixPriceOffAction=r;var o=function(){function FixPriceActionOutput(){}return FixPriceActionOutput.prototype.parse=function(t){},FixPriceActionOutput}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},a=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(153)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function FillCommand(t){t.add(this,"F3")}return FillCommand.prototype.F3=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=1e5,[4,n.Application.server.send(new i.SetParamAction("resource.cash",e))];case 1:return t.sent(),[4,n.Application.server.send(new i.SetParamAction("resource.energy",e))];case 2:return t.sent(),[4,n.Application.server.send(new i.SetParamAction("resource."+n.Application.static.data.screens.screen.getItem(n.Application.dynamic.user.screen).resourceId,e))];case 3:return t.sent(),[4,n.Application.server.send(new i.SetParamAction("resource.keys",e))];case 4:return t.sent(),[2]}})})},FillCommand}();e.FillCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(71),n(0)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function PushServiceCommand(t,e){var n=i.call(this,t,e)||this;return n._folder.add(n,"вкл"),n._folder.add(n,"выкл"),n}return a(PushServiceCommand,i),PushServiceCommand.prototype.вкл=function(){return s(this,void 0,void 0,function(){return c(this,function(t){return r.Application.push.connect({isReconnection:!0}),[2]})})},PushServiceCommand.prototype.выкл=function(){return s(this,void 0,void 0,function(){return c(this,function(t){return r.Application.push.disconnect(),[2]})})},PushServiceCommand}(n.Command);e.PushServiceCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(71),n(0)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function UseEnergyAdminCommand(t,e){var n=i.call(this,t,e)||this;return n.params={"turbo speed":!1},n._folder.add(n.params,"turbo speed").onChange(function(t){return n.changeTurboSpeed(t)}),n}return a(UseEnergyAdminCommand,i),UseEnergyAdminCommand.prototype.changeTurboSpeed=function(t){r.Application.model.objects.useEnergyTurboSpeed=t},UseEnergyAdminCommand}(n.Command);e.UseEnergyAdminCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(71),n(17),n(0),n(1241),n(72)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AddRouletteCommand(t,e){var n=i.call(this,t,e)||this;return n.rouletteIdKeyItems={"Обычное":s.RouletteId.COMMON,"Золотое":s.RouletteId.GOLD},n.params={rouletteId:0,spinNumber:"1"},n._folder.add(n.params,"rouletteId",n.rouletteIdKeyItems),n._folder.add(n.params,"spinNumber"),n._folder.add(n,"add"),n}return c(AddRouletteCommand,i),AddRouletteCommand.prototype.add=function(){var t=new a.AdminAddRouletteAction(this.params.rouletteId,parseInt(this.params.spinNumber));r.Services.server.send(t).then(function(t){o.Application.debug.addLogToConsole("admin"," Roulette added."),o.Application.award.accrueAwardImmediately({roulette:{1:1}})},function(t){o.Application.debug.addLogToConsole("admin"," Roulette adding error: "+t)})},AddRouletteCommand}(n.Command);e.AddRouletteCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function AdminAddRouletteAction(t,e){var n=i.call(this)||this;return n.action="addRoulette",n.controller="admin",n.input=new r.ActionInput({rouletteId:t,spinCount:e}),n.output=new o,n}return a(AdminAddRouletteAction,i),AdminAddRouletteAction}(n.Action);e.AdminAddRouletteAction=i;var o=function(){function AddRouletteActionOutput(){}return AddRouletteActionOutput.prototype.parse=function(t){this._data=t},Object.defineProperty(AddRouletteActionOutput.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),AddRouletteActionOutput}();e.AddRouletteActionOutput=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},s=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(35),n(36)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function SendLogCommand(t){t.add(this,"Отправить лог")}return SendLogCommand.prototype["Отправить лог"]=function(){return a(this,void 0,void 0,function(){return s(this,function(t){return n.Application.debug.sendLog("Просто лог","",i.LogFlag.CLIENT,r.LogLevel.Info),[2]})})},SendLogCommand}();e.SendLogCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},B=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(71),n(0),n(17),n(411),n(316),n(149),n(70),n(199)],void 0===(r=function(t,e,n,T,j,x,R,N,L,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function CopyScreenCommand(t,e){var n=i.call(this,t,e)||this;return n.title="",n.params={sFriendId:"",screenId:"1"},n._folder.add(n.params,"sFriendId",""),n._folder.add(n.params,"screenId","1"),n._folder.add(n,"copyScreen"),n}return a(CopyScreenCommand,i),CopyScreenCommand.prototype.copyScreen=function(){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C;return B(this,function(t){switch(t.label){case 0:return i=parseInt(this.params.screenId),""!==this.params.sFriendId?[3,1]:(e=T.Application.dynamic.user,n=T.Application.model.screensToys.getScreen(i),[3,3]);case 1:return r=new x.FriendGetAction(i,this.params.sFriendId),[4,j.Services.server.send(r)];case 2:t.sent(),o=r.output.data,e=new R.UserDynamicData(o.user),n=new N.ScreenToysModel(i,new k.ScreenToysDynamicData(i.toString(),o.toyXY[i])),t.label=3;case 3:for(a="",a+="<objects>\n",s=T.Application.static.data.objects.object.items,c=0,u=s;c<u.length;c++)(p=u[c]).screen.toString()===this.params.screenId&&(l=e.objects.getItem(p.id),a+="\t<object "+this.xmlAttrString("id",p.id)+this.xmlAttrString("stage",l?l.stage:0)+"/>\n");for(a+="</objects>\n",d=T.Application.static.data.animals.animal.items,h=0,_=d;h<_.length;h++)(f=_[h]).screenId.toString()===this.params.screenId&&(y=e.animals.getItem(f.id.toString()),a+="<animal "+this.xmlAttrString("id",f.id)+this.xmlAttrString("stage",y?y.stage:0)+"/>\n");for(a+="<extraItems>\n",m=new L.ExtraItemsModel(T.Application.static.data.extraItems,e.extraItem,e.activeExtraItem),v=m.getTypes(),b=0,g=v;b<g.length;b++)w=g[b],(O=m.getActiveItemByType(w))&&(a+="\t<extraItem "+this.xmlAttrString("id",O.id)+this.xmlAttrString("type",w)+"/>\n");for(a+="</extraItems>\n",a+="<toys>\n",S=0,P=n.toys;S<P.length;S++)E=P[S],a+="\t<toy "+this.xmlAttrString("toyId",E.toyId)+this.xmlAttrString("x",E.x)+this.xmlAttrString("y",E.y)+this.xmlAttrString("flip",E.isFlipped?1:0)+this.xmlAttrString("location",0)+this.xmlAttrString("rotation",E.rotation)+this.xmlAttrString("scale",Math.ceil(1e3*E.scale))+this.xmlAttrString("zIndex",E.zIndex)+"/>\n";for(a+="</toys>\n",a+="<designObjects>\n",A=e.designObject.items,M=0,D=A;M<D.length;M++)I=D[M],"",C=I.options.items.map(function(t){return t.id+":"+t.option}).join(","),a+="\t<designObject "+this.xmlAttrString("id",I.id)+this.xmlAttrString("stage",I.stage)+this.xmlAttrString("options",C)+"/>\n";return a+="</designObjects>\n",T.Application.debug.addLogToConsole("admin",a),[2]}})})},CopyScreenCommand.prototype.xmlAttrString=function(t,e){return t+'="'+e+'" '},CopyScreenCommand}(n.Command);e.CopyScreenCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},a=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(412)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function SkipGuideAdminCommand(t){t.add(this,"Скипнуть тутор")}return SkipGuideAdminCommand.prototype["Скипнуть тутор"]=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(t){return(e=n.Application.model.guides.getActiveGuide())&&new i.SkipGuideCommand(e.id,!0,-1).execute(),[2]})})},SkipGuideAdminCommand}();e.SkipGuideAdminCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(4),n(155),n(414),n(2)],void 0===(r=function(t,e,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function SkipRouletteAdminCommand(t){t.add(this,"Скипнуть рулетку")}return SkipRouletteAdminCommand.prototype["Скипнуть рулетку"]=function(){return c(this,void 0,void 0,function(){var e,n;return u(this,function(t){switch(t.label){case 0:e=i.Application.model.roulettes,t.label=1;case 1:if(!e.activeRoulette)return[3,9];if(!e.hasAvailableSpins)return[3,6];n=e.activeRoulette,t.label=2;case 2:return n.hasAvailableSpins?[4,i.Application.server.send(new a.RouletteSpinAction(n.id))]:[3,4];case 3:return t.sent(),[3,2];case 4:return[4,r.ElkaCore.instance.promiseManager.ask(new o.RouletteShowAwardWindowPromise(n))];case 5:return t.sent(),[3,8];case 6:return[4,r.ElkaCore.instance.promiseManager.ask(new o.RouletteShowAwardWindowPromise(e.activeRoulette))];case 7:t.sent(),t.label=8;case 8:return[3,1];case 9:return i.Application.view.hideByWindowName(s.GUINames.ROULETTE_WINDOW),[2]}})})},SkipRouletteAdminCommand}();e.SkipRouletteAdminCommand=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(0),n(4)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function MultiTabModule(){var t=null!==e&&e.apply(this,arguments)||this;return t._jobId=null,t}return a(MultiTabModule,e),MultiTabModule.prototype.initialize=function(t){i.Application.settings.isAvailable?(this._startTime=(new Date).getTime().toString(),this._path=r.ElkaCore.instance.config.platform+"_"+r.ElkaCore.instance.config.applicationId+"_"+r.ElkaCore.instance.config.userIdPlatform,i.Application.settings.setItem(this._path,this._startTime),i.Application.debug.addLog("settings","set "+this._path+" = "+this._startTime),this.startTimer()):i.Application.debug.addLog("settings","settings not available - don't start multitab checking")},MultiTabModule.prototype.startTimer=function(){this._jobId=i.Application.date.callProcessor.repeatCall(this.checkTimer.bind(this),MultiTabModule.CHECK_TIME)},MultiTabModule.prototype.checkTimer=function(){if(!i.Application.settings.isAvailable)return i.Application.debug.addLog("settings","settings not available - stop multitab checking"),void this.stopTimer();i.Application.settings.getItem(this._path)!=this._startTime&&(i.Application.debug.addLog("settings","multitab alarm!!!"),this.stopTimer(),i.Application.debug.showErrorWindow("MULTITAB_TEXT","MULTITAB_TITLE",!0))},MultiTabModule.prototype.stopTimer=function(){this._jobId&&(i.Application.date.callProcessor.deleteCall(this._jobId),this._jobId=null)},MultiTabModule.CHECK_TIME=1e4,MultiTabModule}(n.Module);e.MultiTabModule=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(4),n(28),n(93),n(17),n(94),n(108),n(25)],void 0===(r=function(t,e,i,o,a,s,c,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function AuthService(){return null!==t&&t.apply(this,arguments)||this}return p(AuthService,t),AuthService.prototype.initialize=function(t){return l(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){switch(t.label){case 0:if(""===this.config.authUrl)return[2];this.config.authUrl=this.config.authUrl.replace("{SERVER_HOST}",o.Core.instance.config.serverHost),(e=new a.Request).method="GET",e.url=this.getAuthUrl(),e.withCredentials=o.Core.instance.config.devMode,s.Services.debug.addLog(this.DEBUG_CHANNEL,"AuthService.initialize: "+e.url),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,s.Services.network.sendRequest(e)];case 2:return n=t.sent(),this.onLoadData(n),[3,4];case 3:return i=t.sent(),r="Auth network error",i instanceof c.NetworkError&&(r+=" "+i.type+": "+(i.text||"unknown")),this.onLoadDataError(r),[3,4];case 4:return[2]}})})},AuthService.prototype.onLoadData=function(t){var e=null,n=null,i=void 0;try{e=JSON.parse(t.data)}catch(t){e=null}e?e.hasOwnProperty("error")?"object"==typeof e.error?(n=e.error&&e.error.hasOwnProperty("text")?e.error.text:"Unknown error response.",e.error&&e.error.hasOwnProperty("code")&&(i=e.error.code)):n="Auth error: "+String(e.error):o.Core.instance.config.init(e)?s.Services.debug.addLogToConsole(this.DEBUG_CHANNEL,"parsing config success",o.Core.instance.config):n="Auth error: parsing config error.":n="Auth: Bad response format.",null!==n&&this.fatalError(n,i)},AuthService.prototype.onLoadDataError=function(t){s.Services.debug.addError(this.DEBUG_CHANNEL,t),this.fatalError(t)},AuthService.prototype.fatalError=function(t,e){o.Core.instance.fatalError(new n.BaseError(t,e))},AuthService.prototype.getAuthUrl=function(){if(window.hasOwnProperty("ELKA_AUTH_DATA")){var t=[];for(var e in window.ELKA_AUTH_DATA)t.push(e+"="+encodeURIComponent(window.ELKA_AUTH_DATA[e]));var n=i.ElkaCore.instance.initConfig.request;if(n)for(var e in n)t.push(e+"="+encodeURIComponent(n[e]));return this.config.authUrl+"?"+t.join("&")}return this.config.authUrl+window.location.search},AuthService}(r.Service);e.AuthService=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(0),n(2),n(26),n(51),n(18),n(1249),n(119)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.UIImage,d=function(e){function BackgroundModule(){var t=null!==e&&e.apply(this,arguments)||this;return t._blurredSeasonCache=new core.Map,t}return h(BackgroundModule,e),BackgroundModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new c.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new s.RegisterSeasonLoaderPromise(this))},BackgroundModule.prototype.onPreloadModule=function(t){r.Application.view.mapMediator(o.GUINames.WINDOW_DIVIDER,u.WindowDividerMediator,{textureCache:this._blurredSeasonCache})},BackgroundModule.prototype.onStartModule=function(t){r.Application.view.show(o.GUINames.FRONT_FRAME,null,a.WindowLayer.FRAME)},BackgroundModule.prototype.onVisitSeason=function(t){if(this._background&&r.Application.view.hide(this._background),!this._blurredSeasonCache.has(t)){var e=p.UIUtils.applyBlurFilter(new l("bg_"+t+"/bg"));this._blurredSeasonCache.set(t,e)}this._background=r.Application.view.showCustom("background_"+t,{name:o.GUINames.BACKGROUND,layer:a.WindowLayer.BACKGROUND})},BackgroundModule}(n.Module);e.BackgroundModule=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(34),n(26)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function WindowDividerMediator(){return null!==e&&e.apply(this,arguments)||this}return s(WindowDividerMediator,e),WindowDividerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.child("image").render.texture=this._mapData.textureCache.get(i.Application.dynamic.user.screen),this._animation=i.Application.animation.animate(this._container,"windowDivider"),this.registerListener(this._animation,r.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this))},WindowDividerMediator.prototype.onAnimationComplete=function(){i.Application.view.onGlade&&(i.Application.view.ui.windows.hideLayers(i.Application.view.gladeLayers),i.Application.view.onGlade=!1)},WindowDividerMediator.prototype.destroy=function(){i.Application.view.onGlade||0===i.Application.view.ui.windows.getQueueLength(o.WindowLayer.WINDOWS)&&(i.Application.view.ui.windows.showLayers(i.Application.view.gladeLayers),i.Application.view.onGlade=!0),this._animation.stop(),e.prototype.destroy.call(this)},WindowDividerMediator}(n.DisplayObjectContainerMediator);e.WindowDividerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,w=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(0),n(31),n(4),n(18),n(1251),n(2),n(1252),n(1253),n(1254),n(1255),n(146),n(1256),n(1257),n(1258),n(1259),n(1260),n(216)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=function(t){function UserModule(){return null!==t&&t.apply(this,arguments)||this}return w(UserModule,t),UserModule.prototype.initialize=function(t){o.ElkaCore.instance.promiseManager.ask(new a.RegisterModuleLoaderPromise(this)),i.Application.operation.addAllowingRule(new r.OccurrenceBeginningLineRule("/level")),i.Application.operation.addAllowingRule(new r.OccurrenceBeginningLineRule("/exp"))},UserModule.prototype.onPreloadModule=function(t){i.Application.model.user=this._model=new s.UserModel(i.Application.dynamic.user,i.Application.static.data.userLevels),this.mapExpBarContainerMediators(c.GUINames.USE_ENERGY_WINDOW+".expBarContainer",""),this.mapExpBarContainerMediators(c.GUINames.HUD+".userContainer",".tooltipContainer"),this.mapLevelAwardsMediators(c.GUINames.HUD+".userContainer.tooltipContainer.levelAwardsList",64),this.mapLevelAwardsMediators(c.GUINames.USE_ENERGY_WINDOW+".expBarContainer.levelAwardsList",64),i.Application.view.mapMediator(""+c.GUINames.USE_ENERGY_WINDOW,m.UseEnergyLevelUpAnimationMediator),i.Application.view.mapMediator(""+c.GUINames.GLADE_STARS_WINDOW,v.UseEnergyLevelUpGladeAnimationMediator,null,[b.IsWebGuard]),i.Application.view.mapMediator(c.GUINames.NEW_LEVEL_WINDOW,d.NewLevelWindowMediator),i.Application.view.mapMediator(c.GUINames.NEW_LEVEL_WINDOW+".awardsList.*",h.CommonAnimatedAwardListItemMediator),i.Application.view.mapMediator(c.GUINames.HUD+".userContainer",y.UserPanelMediator),i.Application.view.mapMediator(c.GUINames.USER_LEVEL_TOOLTIP,_.ExpBarTooltipMediator,this._model),this.mapLevelAwardsMediators(c.GUINames.USER_LEVEL_TOOLTIP+".levelAwardsList",48)},UserModule.prototype.mapExpBarContainerMediators=function(t,e){i.Application.view.mapMediator(t,l.UserExpBarContainerMediator,{user:this._model}),i.Application.view.mapMediator(t+e,f.UserExpBarTooltipContainerMediator)},UserModule.prototype.mapLevelAwardsMediators=function(t,e){i.Application.view.mapMediator(t,u.UserLevelAwardsListMediator,{user:this._model}),i.Application.view.mapMediator(t+".*",p.UserLevelAwardItemMediator,{iconId:e})},UserModule}(n.Module);e.UserModule=g}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(88),n(0)],void 0===(r=function(t,e,r,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function UserModel(t,e){var n=i.call(this)||this;return n._dynamic=t,n._levelsStaticData=e,n._exp=t.exp,n.socialId=t.sUserId,n.userId=t.id,n._dynamic.addEventListener(r.BaseDataEvent.CHILDREN_CHANGED,n.onChildrenChanged.bind(n)),n}return a(UserModel,i),UserModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("level")&&this.dispatchEvent(new n.UserModelEvent(n.UserModelEvent.LEVEL_UP))},Object.defineProperty(UserModel.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp!==t&&(this._exp=t,this.dispatchEvent(new n.UserModelEvent(n.UserModelEvent.EXP_CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(UserModel.prototype,"level",{get:function(){return this._dynamic.level},enumerable:!0,configurable:!0}),Object.defineProperty(UserModel.prototype,"expToNextLevel",{get:function(){return this.getExpToLevel(this.level+1)},enumerable:!0,configurable:!0}),Object.defineProperty(UserModel.prototype,"expToCurrentLevel",{get:function(){return this.getExpToLevel(this.level)},enumerable:!0,configurable:!0}),UserModel.prototype.getExpToLevel=function(t){return s.Application.calculator.calculate(this._levelsStaticData.formula,{level:t.toString()})},UserModel.prototype.getLevelAwards=function(t){for(var e,n=0,i=this._levelsStaticData.dynamicAwards.dynamicAward;n<i.length;n++){var r=i[n];if(r.even&&r.notEven){if(t%r.even==0&&t%r.notEven!=0){e=r.awards;break}}else if(r.even){if(t%r.even==0){e=r.awards;break}}else if(r.notEven&&t%r.notEven!=0){e=r.awards;break}}var o=s.Application.award.calculate(e);if(s.Application.model.okEvent){var a=s.Application.model.okEvent.getEventAward(t);a&&o.add(a)}return o},UserModel}(uipixi.BaseEventTarget);e.UserModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57),n(0),n(88),n(102)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function UserLevelAwardsListMediator(){return null!==e&&e.apply(this,arguments)||this}return s(UserLevelAwardsListMediator,e),UserLevelAwardsListMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._user=this._mapData.user,this._list=t.displayObject,this.setAwards(),this.registerListener(this._user,r.UserModelEvent.LEVEL_UP,this.setAwards.bind(this)),i.Application.model.okEvent&&this.registerListener(i.Application.model.okEvent,o.OkMoneyEventModelEvent.PHASE_CHANGED,this.setAwards.bind(this))},UserLevelAwardsListMediator.prototype.setAwards=function(){this._list.removeAllItems();var t=this._user.getLevelAwards(this._user.level+1);this._list.addItems(t.awards)},UserLevelAwardsListMediator}(n.DisplayObjectMediator);e.UserLevelAwardsListMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function UserLevelAwardItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(UserLevelAwardItemMediator,e),UserLevelAwardItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._renderer=(new i.AwardRenderer).initialize(this._showData,this._container,{iconId:this._mapData.iconId,fit:!0})},UserLevelAwardItemMediator.prototype.destroy=function(){this._renderer.destroy(),e.prototype.destroy.call(this)},UserLevelAwardItemMediator}(n.DisplayObjectContainerMediator);e.UserLevelAwardItemMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(88)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function UserExpBarContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(UserExpBarContainerMediator,e),UserExpBarContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._user=this._mapData.user,this.getChildren(),this.setLevel(),this.setExp(),this.registerListener(this._user,i.UserModelEvent.LEVEL_UP,this.onLevelUp.bind(this)),this.registerListener(this._user,i.UserModelEvent.EXP_CHANGED,this.setExp.bind(this))},UserExpBarContainerMediator.prototype.getChildren=function(){this._expBar=this.child("expBar"),this._levelLabel=this.child("levelLabel")},UserExpBarContainerMediator.prototype.setLevel=function(){this._levelLabel.text=this._user.level.toString()},UserExpBarContainerMediator.prototype.setExp=function(){var t=this._user.expToCurrentLevel;this._expBar.progress=(this._user.exp-t)/(this._user.expToNextLevel-t)},UserExpBarContainerMediator.prototype.onLevelUp=function(){this.setLevel(),this.setExp()},UserExpBarContainerMediator}(n.DisplayObjectContainerMediator);e.UserExpBarContainerMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(30)],void 0===(r=function(t,e,n,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,r=function(a){function NewLevelWindowMediator(){return null!==a&&a.apply(this,arguments)||this}return u(NewLevelWindowMediator,a),NewLevelWindowMediator.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this._levelValue=this.child("levelValue"),this._levelValue.text=this._showData.level.toString(),this._captionLabel=this.child("captionLabel"),this._captionLabel.text=s.Application.localization.localize("NEW_LEVEL_TITLE",{gender:s.Application.profiles.current.isMale});for(var e=this._showData.award.awards,n=this.child("awardsList"),i=0;i<e.length;i++){var r=e[i];n.addItem({award:r,index:i})}this._wallpostCheckBox=this.child("wallpostCheckBox"),this._wallpostCheckBox.selected=!1;var o=this.child("continueButton");this.registerListener(o,c.POINTER_TAP,this.onTap.bind(this)),this.setAnimation(e.length)},NewLevelWindowMediator.prototype.onTap=function(){return p(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return this._wallpostCheckBox.selected?[4,s.Application.social.post(s.Application.static.data.userLevels.wallpostId)]:[3,2];case 1:if(t.sent(),this._cancellationToken.requested)return[2];t.label=2;case 2:return s.Application.view.hide(this.viewHandle),[2]}})})},NewLevelWindowMediator.prototype.setAnimation=function(t){this._animation=i.AnimationUtils.awardWindow(this.child("captionLabel"),this.child("awardLabel"),this.child("starContainer"),this.child("continueButton"),this.child("wallpostCheckBox"),this.child("shineSpine"),.85,0,t),this.registerListener(s.Application.view.ui.stage,c.POINTER_DOWN,this.onStageTap.bind(this))},NewLevelWindowMediator.prototype.onStageTap=function(){this.registerListener(s.Application.view.ui.stage,c.POINTER_DOWN,this.onStageTap.bind(this)),this._animation.stop(!0)},NewLevelWindowMediator.prototype.destroy=function(){this._animation.stop(),a.prototype.destroy.call(this)},NewLevelWindowMediator}(n.DisplayObjectContainerMediator);e.NewLevelWindowMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(99)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ExpBarTooltipMediator(){return null!==t&&t.apply(this,arguments)||this}return a(ExpBarTooltipMediator,t),ExpBarTooltipMediator.prototype.onInitialize=function(){this.child("countLabel").text=(this._mapData.expToNextLevel-this._mapData.exp).toString()},ExpBarTooltipMediator}(n.TooltipMediator);e.ExpBarTooltipMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function UserExpBarTooltipContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return s(UserExpBarTooltipContainerMediator,e),UserExpBarTooltipContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),i.Application.tooltip.addTooltip(this._container,r.TooltipAnchor.Bottom,o.GUINames.USER_LEVEL_TOOLTIP,{})},UserExpBarTooltipContainerMediator}(n.DisplayObjectContainerMediator);e.UserExpBarTooltipContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(2),n(1),n(40),n(0),n(8)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function UserPanelMediator(){return null!==e&&e.apply(this,arguments)||this}return u(UserPanelMediator,e),UserPanelMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._data=t.viewContext.node.root.handle.viewContext.showData,this.initComponents(),this.setupComponents(),this._container.buttonMode=!0,this.registerListener(this._container,s.POINTER_TAP,this.onButton.bind(this))},UserPanelMediator.prototype.initComponents=function(){this._avatarImage=this.child("avatarImage")},UserPanelMediator.prototype.setupComponents=function(){this._profile=o.Application.profiles.getProfile(o.Application.dynamic.user.sUserId,!0),this._profileRenderer=new r.ProfileRenderer,this._profileRenderer.initialize(this._profile,this._container);var t=new PIXI.Graphics;t.beginFill(0);var e=this._avatarImage.width/this._avatarImage.scaleX;t.drawCircle(e/2,e/2,e/2),t.endFill(),t.interactive=t.interactiveChildren=!1,this._avatarImage.render.addChild(t),this._avatarImage.render.mask=t},UserPanelMediator.prototype.onButton=function(){o.Application.view.show(n.GUINames.USER_PROFILE_WINDOW,new a.ViewContext({sUserId:o.Application.dynamic.user.sUserId,level:o.Application.dynamic.user.level.toString()}))},UserPanelMediator.prototype.destroy=function(){this._profileRenderer.destroy(),e.prototype.destroy.call(this)},UserPanelMediator}(i.DisplayObjectContainerMediator);e.UserPanelMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(88),n(0),n(415)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function UseEnergyLevelUpAnimationMediator(){return null!==e&&e.apply(this,arguments)||this}return a(UseEnergyLevelUpAnimationMediator,e),UseEnergyLevelUpAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=i.Application.model.user,this.registerListener(this._model,n.UserModelEvent.LEVEL_UP,this.onLevelUp.bind(this))},UseEnergyLevelUpAnimationMediator.prototype.onLevelUp=function(){var t=this._model.level;if(t%i.Application.static.data.userLevels.levelUpWindowValue!=0){var e=this._model.getLevelAwards(t);this.throwAwards(e.awards)}},UseEnergyLevelUpAnimationMediator.prototype.getStartPointDisplayObject=function(){return this.child("levelAwardsList")},UseEnergyLevelUpAnimationMediator}(r.BaseThrowAwardLevelUpAnimationMediator);e.UseEnergyLevelUpAnimationMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(88),n(0),n(416)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function UseEnergyLevelUpGladeAnimationMediator(){return null!==e&&e.apply(this,arguments)||this}return a(UseEnergyLevelUpGladeAnimationMediator,e),UseEnergyLevelUpGladeAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerEndPoint("box1","giftsButton"),this.registerEndPoint("box2","giftsButton"),this.registerEndPoint("box3","giftsButton"),this.registerEndPoint("okEventRoulette1","okMoneyEventIcon"),this._model=i.Application.model.user,this.registerListener(this._model,n.UserModelEvent.LEVEL_UP,this.onLevelUp.bind(this))},UseEnergyLevelUpGladeAnimationMediator.prototype.onLevelUp=function(){var t=this._model.level;if(t%i.Application.static.data.userLevels.levelUpWindowValue!=0){var e=this._model.getLevelAwards(t);this.throwAwards(e.awards,1)}},UseEnergyLevelUpGladeAnimationMediator.prototype.getStartPointDisplayObject=function(t){return t.getChildByName("levelAwardsList")},UseEnergyLevelUpGladeAnimationMediator}(r.BaseThrowAwardLevelUpGladeAnimationMediator);e.UseEnergyLevelUpGladeAnimationMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,F=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(51),n(18),n(0),n(2),n(1262),n(1263),n(1264),n(1265),n(26),n(80),n(1266),n(1267),n(1268),n(8),n(1269),n(1270),n(229),n(1271),n(1272),n(1273),n(1274),n(1275),n(1276),n(1277),n(1278),n(1279),n(1280),n(418),n(22),n(1281),n(1283),n(419),n(1284),n(31),n(1285),n(62),n(122)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var W=function(t){function FriendsModule(){return null!==t&&t.apply(this,arguments)||this}return F(FriendsModule,t),FriendsModule.prototype.initialize=function(t){this._friendsModel=new B.FriendsModel,i.ElkaCore.instance.promiseManager.ask(new o.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new h.RegisterFriendLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new r.RegisterSeasonLoaderPromise(this)),a.Application.operation.addAllowingRule(new k.OccurrenceBeginningLineRule("/friendInvite"))},FriendsModule.prototype.onPreloadModule=function(t){return this.loadProfiles(),this.mapCommands(),this.mapFriendsWindowMediators(),this.mapFriendScreenMediator(),this.mapInviteFriendsMediators(),Promise.resolve()},FriendsModule.prototype.mapCommands=function(){j.CommandMap.map(T.ShowInviteFriendsWindowPromise,x.ShowInviteFriendsWindowCommand),j.CommandMap.map(N.SendFriendInvitePromise,L.SendFriendInviteCommand)},FriendsModule.prototype.mapInviteFriendsMediators=function(){a.Application.view.mapMediator(s.GUINames.INVITE_FRIENDS_AWARDS_WINDOW,I.InviteFriendsAwardWindowMediator),a.Application.view.mapMediator(s.GUINames.INVITE_FRIENDS_WINDOW,C.InviteFriendsWindowMediator),a.Application.view.mapMediator(s.GUINames.INVITE_FRIENDS_WINDOW,G.SimplePopupAnimationMediator),a.Application.view.mapMediator(s.GUINames.INVITE_FRIENDS_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",R.FriendListItemMediator),a.Application.view.mapMediator(s.GUINames.INVITE_FRIENDS_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",U.AlphaOptimizationListItemMediator),a.Application.view.mapMediator(""+s.GUINames.FRIEND_NOT_WORK_WINDOW,G.SimplePopupAnimationMediator)},FriendsModule.prototype.mapFriendsWindowMediators=function(){a.Application.view.mapMediator(s.GUINames.HUD+".bottomLeft.friendsButton",c.HUDFriendsButtonMediator),a.Application.view.mapMediator(""+s.GUINames.FRIENDS_WINDOW,M.FriendsWindowObjectsMediator,this._friendsModel),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".sendReceiveContainer",A.SendReceiveContainerMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel",u.HUDFriendsPanelMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel.inviteButton",l.InviteFriendButtonMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel.friendsPanelList.*",p.FriendsWindowListItemContainerMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel.friendsPanelList.*.friendPanelItem",g.FriendWindowListItemMediator,this._friendsModel),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel.friendsPanelList.*.friendPanelItem.resourceContainer",D.FriendsWindowItemsLayoutMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel.friendsPanelList.*.friendPanelItem.resourceContainer.*",O.ViralInboxListItemMediator,this._friendsModel,[P.ViralInboxListItemGuard]),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel.friendsPanelList.*.friendPanelItem.resourceContainer.*",S.ViralRequestListItemMediator,this._friendsModel,[E.ViralRequestListItemGuard]),a.Application.view.mapMediator(s.GUINames.FRIENDS_WINDOW+".friendsPanel.friendsPanelList.*.friendsPanelInviteButton",l.InviteFriendButtonMediator)},FriendsModule.prototype.mapFriendScreenMediator=function(){a.Application.view.mapMediator(""+s.GUINames.FRIENDS_PANEL,b.HUDFriendsScreenPanelMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_PANEL+".panelContainer.inviteButton",l.InviteFriendButtonMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_PANEL+".panelContainer.friendsPanelList.*",f.FriendsPanelListItemContainerMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_PANEL+".panelContainer.friendsPanelList.*.friendPanelItem",w.FriendPanelListItemMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_PANEL+".panelContainer.friendsPanelList.*.friendsPanelInviteButton",l.InviteFriendButtonMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_PANEL+".bottomLeft.goHomeButton",_.HUDCloseGoHomeButtonMediator),a.Application.view.mapMediator(s.GUINames.FRIENDS_HUD+".userContainer",y.FriendHUDUserPanelMediator),a.Application.view.mapMediator(s.GUINames.GUEST_FRIENDS_HUD+".userContainer",y.FriendHUDUserPanelMediator),a.Application.view.mapMediator(s.GUINames.GUEST_FRIENDS_HUD+".topRightContainer.leaveButton",v.HUDLeaveGuestFriendMediator)},FriendsModule.prototype.loadProfiles=function(){for(var t=[],e=0,n=a.Application.dynamic.friends.items;e<n.length;e++){var i=n[e];i.isNPC||t.push(i.sUserId)}0<t.length&&a.Application.profiles.getProfiles(t)},FriendsModule.prototype.onLeaveFriend=function(){this._friendHudHandle&&(a.Application.view.hide(this._friendHudHandle),this._friendHudHandle=null),this._friendPanelHandle&&(a.Application.view.hide(this._friendPanelHandle),this._friendPanelHandle=null)},FriendsModule.prototype.onVisitFriend=function(t){var e=new m.ViewContext(t.friendData);t.isGuest?this._friendHudHandle=a.Application.view.show(s.GUINames.GUEST_FRIENDS_HUD,e,d.WindowLayer.HUD):(this._friendHudHandle=a.Application.view.show(s.GUINames.FRIENDS_HUD,e,d.WindowLayer.HUD),this._friendPanelHandle=a.Application.view.show(s.GUINames.FRIENDS_PANEL,null,d.WindowLayer.HUD))},FriendsModule}(n.Module);e.FriendsModule=W}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0),n(2),n(150),n(39)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function HUDFriendsButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return c(HUDFriendsButtonMediator,e),HUDFriendsButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setup(),this.update()},HUDFriendsButtonMediator.prototype.setup=function(){this._marker=this._button.getChildByName("marker"),this.registerListener(i.Application.model.viralExchange,o.ViralExchangeModelEvent.RESPONSE_ITEMS_COUNT_CHANGED,this.update.bind(this)),this.registerListener(i.Application.model.viralExchange,o.ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED,this.update.bind(this));for(var t=0,e=i.Application.model.objects.getByScreen(i.Application.dynamic.user.screen);t<e.length;t++){var n=e[t];this.registerListener(n,a.ObjectModelEvent.STATE_CHANGED,this.update.bind(this))}},HUDFriendsButtonMediator.prototype.update=function(){this._marker.visible=0<i.Application.model.viralExchange.requestCount||0<i.Application.viralExchange.countOfCurrentScreenResponses()},HUDFriendsButtonMediator.prototype.onButton=function(t){i.Application.view.show(r.GUINames.FRIENDS_WINDOW)},HUDFriendsButtonMediator}(n.SimpleButtonMediator);e.HUDFriendsButtonMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(114),n(1)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.UIEvent,a=uipixi.GestureEvent,s=function(e){function HUDFriendsPanelMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t.CLOSE_BUTTON=134,t.PREV_NEXT_BUTTON=100,t.ITEM_WIDTH=100,t._getAvailableToAcceptResourceTypes=[],t}return c(HUDFriendsPanelMediator,e),HUDFriendsPanelMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._friendsPanelList=this.child("friendsPanelList"),this._prevButton=this.child("prevButton"),this._nextButton=this.child("nextButton"),this.registerListener(n.Application.view.ui.stage,o.STAGE_RESIZE,this.resize.bind(this)),this.init(),this.updateList(),this.currentIndex=0},HUDFriendsPanelMediator.prototype.init=function(){this.registerListener(this._prevButton,a.POINTER_TAP,this.onTapPrev.bind(this)),this.registerListener(this._nextButton,a.POINTER_TAP,this.onTapNext.bind(this)),this._friendsArray=n.Application.dynamic.friends.items.slice();var t=n.Application.model.user;this._currentUserDynamicData=new i.FriendDynamicItem("",{sUserId:t.socialId,userId:t.userId,level:t.level}),this._friendsArray.push(this._currentUserDynamicData),this.updateFriendsListItemsData()},HUDFriendsPanelMediator.prototype.updateFriendsListItemsData=function(){this._listItems=this._friendsArray.map(function(t){return{friendDynamicData:t,friendViralModel:n.Application.model.viralExchange.getUser(t.sUserId)}}),this._getAvailableToAcceptResourceTypes=n.Application.viralExchange.getAvailableToAcceptResourceTypes(),this._listItems.sort(this.friendsSort.bind(this))},HUDFriendsPanelMediator.prototype.onTapPrev=function(){this.currentIndex=this._currentIndex-this.getItemsCount()},HUDFriendsPanelMediator.prototype.onTapNext=function(){this.currentIndex=this._currentIndex+this.getItemsCount()},Object.defineProperty(HUDFriendsPanelMediator.prototype,"currentIndex",{set:function(t){this._currentIndex!==t&&(this._currentIndex=t,this.updateList())},enumerable:!0,configurable:!0}),HUDFriendsPanelMediator.prototype.friendsSort=function(t,e){return t.friendDynamicData.isNPC&&0<t.friendViralModel.getResponses(this._getAvailableToAcceptResourceTypes).length?e.friendDynamicData.isNPC&&0<e.friendViralModel.getResponses(this._getAvailableToAcceptResourceTypes).length?e.friendDynamicData.level-t.friendDynamicData.level:-1:e.friendDynamicData.isNPC&&0<e.friendViralModel.getResponses(this._getAvailableToAcceptResourceTypes).length?1:t.friendViralModel.getResponses(this._getAvailableToAcceptResourceTypes).length>e.friendViralModel.getResponses(this._getAvailableToAcceptResourceTypes).length?-1:t.friendViralModel.getResponses(this._getAvailableToAcceptResourceTypes).length===e.friendViralModel.getResponses(this._getAvailableToAcceptResourceTypes).length?t.friendViralModel.getRequests().length>e.friendViralModel.getRequests().length?-1:t.friendViralModel.getRequests().length===e.friendViralModel.getRequests().length?e.friendDynamicData.level-t.friendDynamicData.level:1:1},HUDFriendsPanelMediator.prototype.resize=function(){this._friendsPanelList.items.length!==this.getItemsCount()&&this.updateList()},HUDFriendsPanelMediator.prototype.updateList=function(){var t=this.getItemsCount();this._friendsPanelList.removeAllItems();for(var e=[],n=this._currentIndex;n<this._currentIndex+t;n++)e.push(n<this._listItems.length?this._listItems[n]:null);this._friendsPanelList.addItems(e),this.updateButtonsState(t)},HUDFriendsPanelMediator.prototype.updateButtonsState=function(t){this._prevButton.enabled=0<this._currentIndex,this._nextButton.enabled=this._currentIndex+t<this._listItems.length},HUDFriendsPanelMediator.prototype.getItemsCount=function(){var t=Math.min(n.Application.view.ui.stage.width,1920);return Math.floor((t-this.CLOSE_BUTTON-2*this.PREV_NEXT_BUTTON-this.ITEM_WIDTH)/this.ITEM_WIDTH)},HUDFriendsPanelMediator}(r.DisplayObjectContainerMediator);e.HUDFriendsPanelMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(8)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.UIFactory,a=function(e){function FriendsWindowListItemContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return s(FriendsWindowListItemContainerMediator,e),FriendsWindowListItemContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._showData?i.Application.view.addChild(this._container,"friendPanelItem",new r.ViewContext(this._showData)):this._container.addChild(o.instance.createUIElementByName("friendsPanelInviteButton"))},FriendsWindowListItemContainerMediator}(n.DisplayObjectContainerMediator);e.FriendsWindowListItemContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(2),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function InviteFriendButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(InviteFriendButtonMediator,t),InviteFriendButtonMediator.prototype.onButton=function(t){r.Application.view.show(i.GUINames.INVITE_FRIENDS_AWARDS_WINDOW)},InviteFriendButtonMediator}(n.SimpleButtonMediator);e.InviteFriendButtonMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(4),n(156),n(157),n(0)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function HUDCloseGoHomeButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return c(HUDCloseGoHomeButtonMediator,t),HUDCloseGoHomeButtonMediator.prototype.onButton=function(t){i.ElkaCore.instance.promiseManager.ask(new r.FromFriendToSeasonPromise(new o.GoToSeasonData(a.Application.dynamic.user.screen)))},HUDCloseGoHomeButtonMediator}(n.SimpleButtonMediator);e.HUDCloseGoHomeButtonMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(8)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.UIFactory,a=function(e){function FriendsPanelListItemContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return s(FriendsPanelListItemContainerMediator,e),FriendsPanelListItemContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._showData?i.Application.view.addChild(this._container,"friendPanelItem",new r.ViewContext(this._showData)):this._container.addChild(o.instance.createUIElementByName("friendsPanelInviteButton"))},FriendsPanelListItemContainerMediator}(n.DisplayObjectContainerMediator);e.FriendsPanelListItemContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(40),n(0),n(1),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function FriendHUDUserPanelMediator(){return null!==e&&e.apply(this,arguments)||this}return u(FriendHUDUserPanelMediator,e),FriendHUDUserPanelMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._data=t.viewContext.node.root.handle.viewContext.showData,this.initComponents(),this.setupComponents(),this._container.buttonMode=!0,this.registerListener(this._container,s.POINTER_TAP,this.onButton.bind(this))},FriendHUDUserPanelMediator.prototype.initComponents=function(){this._levelLabel=this.child("levelLabel"),this._avatarImage=this.child("avatarImage")},FriendHUDUserPanelMediator.prototype.setupComponents=function(){this._levelLabel.text=this._data.user.level.toString(),this._profile=i.Application.profiles.getProfile(this._data.user.sUserId,!0),this._profileRenderer=new n.ProfileRenderer,this._profileRenderer.initialize(this._profile,this._container);var t=new PIXI.Graphics;t.beginFill(0);var e=this._avatarImage.width/this._avatarImage.scaleX;t.drawCircle(e/2,e/2,e/2),t.endFill(),t.interactive=t.interactiveChildren=!1,this._avatarImage.render.addChild(t),this._avatarImage.render.mask=t},FriendHUDUserPanelMediator.prototype.onButton=function(){this._data.user.sUserId&&i.Application.view.show(o.GUINames.USER_PROFILE_WINDOW,new a.ViewContext({sUserId:this._data.user.sUserId,level:this._data.user.level.toString()}))},FriendHUDUserPanelMediator.prototype.destroy=function(){this._profileRenderer.destroy(),e.prototype.destroy.call(this)},FriendHUDUserPanelMediator}(r.DisplayObjectContainerMediator);e.FriendHUDUserPanelMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(4),n(156),n(0),n(157)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function HUDLeaveGuestFriendMediator(){return null!==t&&t.apply(this,arguments)||this}return c(HUDLeaveGuestFriendMediator,t),HUDLeaveGuestFriendMediator.prototype.onButton=function(t){i.ElkaCore.instance.promiseManager.ask(new r.FromFriendToSeasonPromise(new a.GoToSeasonData(o.Application.dynamic.user.screen)))},HUDLeaveGuestFriendMediator}(n.SimpleButtonMediator);e.HUDLeaveGuestFriendMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(114),n(1)],void 0===(r=function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.UIEvent,a=uipixi.GestureEvent,s=function(e){function HUDFriendsScreenPanelMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t.CLOSE_BUTTON=134,t.PREV_NEXT_BUTTON=100,t.ITEM_WIDTH=100,t}return c(HUDFriendsScreenPanelMediator,e),HUDFriendsScreenPanelMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._friendsPanelList=this.child("friendsPanelList"),this._prevButton=this.child("prevButton"),this._nextButton=this.child("nextButton"),this.registerListener(i.Application.view.ui.stage,o.STAGE_RESIZE,this.resize.bind(this)),this.init(),this.calculateIndex()},HUDFriendsScreenPanelMediator.prototype.init=function(){this.registerListener(this._prevButton,a.POINTER_TAP,this.onTapPrev.bind(this)),this.registerListener(this._nextButton,a.POINTER_TAP,this.onTapNext.bind(this)),this._friendsArray=i.Application.dynamic.friends.items.slice();var t=i.Application.model.user;this._currentUserDynamicData=new n.FriendDynamicItem("",{sUserId:t.socialId,userId:t.userId,level:t.level}),this._friendsArray.push(this._currentUserDynamicData),this._friendsArray.sort(this.friendsSort)},HUDFriendsScreenPanelMediator.prototype.calculateIndex=function(){for(var t=i.Application.model.travel,e=this.getItemsCount(),n=0;n<this._friendsArray.length;n++)if(t.currentFriend.userId===this._friendsArray[n].userId)return void(this.currentIndex=Math.floor(n/e)*e);this.currentIndex=0},HUDFriendsScreenPanelMediator.prototype.onTapPrev=function(){this.currentIndex=this._currentIndex-this.getItemsCount()},HUDFriendsScreenPanelMediator.prototype.onTapNext=function(){this.currentIndex=this._currentIndex+this.getItemsCount()},Object.defineProperty(HUDFriendsScreenPanelMediator.prototype,"currentIndex",{set:function(t){this._currentIndex!==t&&(this._currentIndex=t,this.updateList())},enumerable:!0,configurable:!0}),HUDFriendsScreenPanelMediator.prototype.friendsSort=function(t,e){return e.level-t.level},HUDFriendsScreenPanelMediator.prototype.resize=function(){this._friendsPanelList.items.length!==this.getItemsCount()&&this.updateList()},HUDFriendsScreenPanelMediator.prototype.updateList=function(){var t=this.getItemsCount();this._friendsPanelList.removeAllItems();for(var e=[],n=this._currentIndex;n<this._currentIndex+t;n++)e.push(n<this._friendsArray.length?this._friendsArray[n]:null);this._friendsPanelList.addItems(e),this.updateButtonsState(t)},HUDFriendsScreenPanelMediator.prototype.updateButtonsState=function(t){this._prevButton.enabled=0<this._currentIndex,this._nextButton.enabled=this._currentIndex+t<this._friendsArray.length},HUDFriendsScreenPanelMediator.prototype.getItemsCount=function(){var t=Math.min(i.Application.view.ui.stage.width,1920);return Math.floor((t-this.CLOSE_BUTTON-2*this.PREV_NEXT_BUTTON-this.ITEM_WIDTH)/this.ITEM_WIDTH)},HUDFriendsScreenPanelMediator}(r.DisplayObjectContainerMediator);e.HUDFriendsScreenPanelMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,y=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(40),n(0),n(4),n(156),n(157),n(230),n(417),n(126),n(21),n(2),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=uipixi.GestureEvent,f=function(n){function FriendPanelListItemMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t.SELECTED_ITEM_OFFSET_Y=-14,t}return y(FriendPanelListItemMediator,n),FriendPanelListItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._friendItem=this._showData,this._levelLabel=this._container.getChildByName("levelLabel"),this._levelLabel.text=this._friendItem.level.toString(),this._profile=r.Application.profiles.getProfile(this._friendItem.sUserId,!0),this._profileRenderer=(new i.ProfileRenderer).initialize(this._profile,this._container);var e=r.Application.model.travel;this.updateOffsetY(e.place===p.TravelPlaceType.FRIEND?e.currentFriend.userId:r.Application.model.user.userId),this.registerListener(this._container,_.POINTER_TAP,this.onTap.bind(this)),this.registerListener(e,u.TravelModelEvent.VISIT_FRIEND,this.onVisitFriend.bind(this)),o.ElkaCore.instance.config.mobile||this.setupTooltip(),this.setupFrame()},FriendPanelListItemMediator.prototype.setupFrame=function(){var t=this.child("frame"),e=r.Application.model.ratings.getBestPlace(this._friendItem.sUserId),n=r.Application.model.ratings.getFrameResource(100,e);this._frameLoadableImage=new h.LoadableImage(t,n)},FriendPanelListItemMediator.prototype.setupTooltip=function(){var t=this._profile.firstName+" "+this._profile.lastName;t=t.trim(),r.Application.tooltip.addTooltip(this.child("selfButton"),l.TooltipAnchor.Top,d.GUINames.TEXT_TOOLTIP,{text:t})},FriendPanelListItemMediator.prototype.onTap=function(){this._friendItem.userId===r.Application.model.user.userId?o.ElkaCore.instance.promiseManager.ask(new a.FromFriendToSeasonPromise(new s.GoToSeasonData(r.Application.dynamic.user.screen))):o.ElkaCore.instance.promiseManager.ask(new c.FromFriendToFriendPromise(this._friendItem))},FriendPanelListItemMediator.prototype.onVisitFriend=function(t){this.updateOffsetY(t.currentFriend.userId)},FriendPanelListItemMediator.prototype.updateOffsetY=function(t){this._container.offsetY=t===this._friendItem.userId?this.SELECTED_ITEM_OFFSET_Y:0},FriendPanelListItemMediator.prototype.destroy=function(){this._frameLoadableImage&&this._frameLoadableImage.destroy(),this._profileRenderer.destroy(),n.prototype.destroy.call(this)},FriendPanelListItemMediator}(n.DisplayObjectContainerMediator);e.FriendPanelListItemMediator=f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(16),n(38),n(224),n(34),n(158)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function ViralInboxListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return l(ViralInboxListItemMediator,e),ViralInboxListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._friendsModel=this._mapData,this.setupView(),this.setupLogic()},ViralInboxListItemMediator.prototype.setupView=function(){this._loadableImage=new r.LoadableImage(this.child("iconImage"),o.PriceAwardUtils.getResourceResourceId(this._showData.model.itemId,"64"))},ViralInboxListItemMediator.prototype.setupLogic=function(){this.registerListener(this._container,u.POINTER_TAP,this.onAcceptResource.bind(this)),this.registerListener(this._showData.model,a.ViralExchangeItemModelEvent.INBOX_ITEM_WILL_BE_DELETED,this.onItemWillBeDeleted.bind(this))},ViralInboxListItemMediator.prototype.onItemWillBeDeleted=function(){this.killView()},ViralInboxListItemMediator.prototype.startHideAnimation=function(){this._animation=i.Application.animation.animate(this.child("animationContainer"),"hideViralItem"),this.registerListener(this._animation,s.ProcessEvent.COMPLETE,this.killView.bind(this)),this._animation.start()},ViralInboxListItemMediator.prototype.killView=function(){this._container.parent.removeChild(this._container)},ViralInboxListItemMediator.prototype.onAcceptResource=function(){this.unregisterListener(this._container,u.POINTER_TAP,this.onAcceptResource.bind(this)),i.Application.viralExchange.accept(this._showData.model.key);var t=this._container.getGlobalPosition();t.x+=this._container.width/2,t.y+=this._container.height/2,this._friendsModel.dispatchEvent(new c.FriendsModelFlyViralEvent(c.FriendsModelFlyViralEvent.SHOW_FLY_ACCEPT_VIRAL_ANIMATION,{startPoint:t,resourceId:this._showData.model.itemId,sUserId:this._showData.model.socialId})),this.startHideAnimation()},ViralInboxListItemMediator.prototype.destroy=function(){this._animation&&this._animation.stop(),this._loadableImage.destroy(),e.prototype.destroy.call(this)},ViralInboxListItemMediator}(n.DisplayObjectContainerMediator);e.ViralInboxListItemMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(16),n(38),n(224),n(158),n(34)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function ViralRequestListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return l(ViralRequestListItemMediator,e),ViralRequestListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._friendsModel=this._mapData,this.setupView(),this.setupLogic()},ViralRequestListItemMediator.prototype.setupView=function(){this._loadableImage=new r.LoadableImage(this.child("iconImage"),o.PriceAwardUtils.getResourceResourceId(this._showData.model.itemId,"64"))},ViralRequestListItemMediator.prototype.setupLogic=function(){this.registerListener(this._container,u.POINTER_TAP,this.onSendResource.bind(this)),this.registerListener(this._showData.model,a.ViralExchangeItemModelEvent.INBOX_ITEM_WILL_BE_DELETED,this.onItemWillBeDeleted.bind(this))},ViralRequestListItemMediator.prototype.onItemWillBeDeleted=function(){this.killView()},ViralRequestListItemMediator.prototype.killView=function(){this._container.parent.removeChild(this._container)},ViralRequestListItemMediator.prototype.startHideAnimation=function(){this._animation=i.Application.animation.animate(this.child("animationContainer"),"hideViralItem"),this.registerListener(this._animation,c.ProcessEvent.COMPLETE,this.killView.bind(this)),this._animation.start()},ViralRequestListItemMediator.prototype.onSendResource=function(){this.unregisterListener(this._container,u.POINTER_TAP,this.onSendResource.bind(this)),i.Application.viralExchange.response(this._showData.model.key);var t=this._container.getGlobalPosition();t.x+=this._container.width/2,t.y+=this._container.height/2,this._friendsModel.dispatchEvent(new s.FriendsModelFlyViralEvent(s.FriendsModelFlyViralEvent.SHOW_FLY_RESPONSE_VIRAL_ANIMATION,{startPoint:t,resourceId:this._showData.model.itemId,sUserId:this._showData.model.socialId})),this.startHideAnimation()},ViralRequestListItemMediator.prototype.destroy=function(){this._animation&&this._animation.stop(),this._loadableImage.destroy(),e.prototype.destroy.call(this)},ViralRequestListItemMediator}(n.DisplayObjectContainerMediator);e.ViralRequestListItemMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(229)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function ViralInboxListItemGuard(){return null!==t&&t.apply(this,arguments)||this}return a(ViralInboxListItemGuard,t),ViralInboxListItemGuard.prototype.approve=function(){return this.viewHandle.viewContext.showData.type===i.ViralListItemType.response},ViralInboxListItemGuard}(n.Guard);e.ViralInboxListItemGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(229)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function ViralRequestListItemGuard(){return null!==t&&t.apply(this,arguments)||this}return a(ViralRequestListItemGuard,t),ViralRequestListItemGuard.prototype.approve=function(){return this.viewHandle.viewContext.showData.type===i.ViralListItemType.request},ViralRequestListItemGuard}(n.Guard);e.ViralRequestListItemGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(150)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,a=function(e){function SendReceiveContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return s(SendReceiveContainerMediator,e),SendReceiveContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.init(),this.setup()},SendReceiveContainerMediator.prototype.init=function(){this._sendAllButton=this.child("sendAllButton"),this._getAllButton=this.child("getAllButton")},SendReceiveContainerMediator.prototype.setup=function(){i.Application.model.viralExchange.requestCount>=i.Application.static.data.viralExchange.multiResponseThreshold?(this.registerListener(this._sendAllButton,o.POINTER_TAP,this.onTapSendAll.bind(this)),this.registerListener(i.Application.model.viralExchange,r.ViralExchangeModelEvent.REQUEST_ITEMS_COUNT_CHANGED,this.onRequestCountChanged.bind(this))):this._container.removeChild(this._sendAllButton),i.Application.viralExchange.countOfCurrentScreenResponses()>=i.Application.static.data.viralExchange.multiAcceptThreshold?(this.registerListener(this._getAllButton,o.POINTER_TAP,this.onTapGetAll.bind(this)),this.registerListener(i.Application.model.viralExchange,r.ViralExchangeModelEvent.RESPONSE_ITEMS_COUNT_CHANGED,this.onResponseCountChanged.bind(this))):this._container.removeChild(this._getAllButton)},SendReceiveContainerMediator.prototype.onTapSendAll=function(){i.Application.viralExchange.responseAllViral()},SendReceiveContainerMediator.prototype.onTapGetAll=function(){i.Application.viralExchange.acceptAllViral()},SendReceiveContainerMediator.prototype.onRequestCountChanged=function(t){0===i.Application.model.viralExchange.requestCount&&null!==this._sendAllButton&&(this._container.removeChild(this._sendAllButton),this._sendAllButton=null)},SendReceiveContainerMediator.prototype.onResponseCountChanged=function(t){0===i.Application.model.viralExchange.responseCount&&null!==this._getAllButton&&(this._container.removeChild(this._getAllButton),this._getAllButton=null)},SendReceiveContainerMediator}(n.DisplayObjectContainerMediator);e.SendReceiveContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(158)],void 0===(r=function(t,e,n,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.UIFactory,a=uipixi.UIImage,i=function(c){function FriendsWindowObjectsMediator(){var t=null!==c&&c.apply(this,arguments)||this;return t._animations=[],t}return s(FriendsWindowObjectsMediator,c),FriendsWindowObjectsMediator.prototype.initialize=function(t){c.prototype.initialize.call(this,t),this._model=this._mapData,this.registerListener(this._model,p.FriendsModelFlyViralEvent.SHOW_FLY_ACCEPT_VIRAL_ANIMATION,this.startAcceptAnimation.bind(this));var e=u.Application.dynamic.user.screen,n=l.instance.createUIElementByName("objects"+e);n.name="objectsContainer",this._container.addChild(n);var i=this.child("objectsContainerTemp");this._container.setChildIndex(n,this._container.getChildIndex(i));var r=l.instance.createUIElementByName("objectsMarkers"+e);r.name="objectsMarkers",this._container.addChild(r);var o=this.child("objectsMarkersTemp");this._container.setChildIndex(r,this._container.getChildIndex(o)),this._markersContainer=r;var a=l.instance.createUIElementByName("animalLayer"+e+"Window");a.name="animalLayerWindow",this._container.addChild(a);var s=this.child("animalTemp");this._container.setChildIndex(a,this._container.getChildIndex(s))},FriendsWindowObjectsMediator.prototype.startAcceptAnimation=function(t){var e=new a(u.Application.model.resources.get(t.flyData.resourceId).static.view.icons.icon.getItem("64").resourceId);e.anchor="topLeft",e.render.pivot.set(e.width/2,e.height/2);var n=u.Application.model.objects.getObjectNameByViralResource(t.flyData.resourceId),i=this._markersContainer.getChildByName(n),r=i.getGlobalPosition();r.x+=i.width/2,r.y+=32;var o=u.Application.animation.animate(e,"flyAcceptViralResource",{startX:t.flyData.startPoint.x,startY:t.flyData.startPoint.y,finalX:r.x,finalY:r.y,delay:100});this._animations.push(o)},FriendsWindowObjectsMediator.prototype.destroy=function(){for(var t=0,e=this._animations;t<e.length;t++){e[t].stop()}c.prototype.destroy.call(this)},FriendsWindowObjectsMediator}(n.DisplayObjectContainerMediator);e.FriendsWindowObjectsMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.UIEvent,r=function(e){function FriendsWindowItemsLayoutMediator(){return null!==e&&e.apply(this,arguments)||this}return a(FriendsWindowItemsLayoutMediator,e),FriendsWindowItemsLayoutMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerListener(this._container,i.CHILD_ADDED,this.onChildAddedOrRemoved.bind(this)),this.registerListener(this._container,i.CHILD_REMOVED,this.onChildAddedOrRemoved.bind(this)),this.layout()},FriendsWindowItemsLayoutMediator.prototype.onChildAddedOrRemoved=function(){this.layout()},FriendsWindowItemsLayoutMediator.prototype.layout=function(){var t=-100;if(3<this._container.children.length)for(var e=this._container.children.length-1;0<=e;e--)this._container.children[e].offsetY=t,t-=10,e===this._container.children.length-1?(this._container.children[e].getChildByName("arrowImage").visible=!0,this._container.children[e].interactive=!0):(this._container.children[e].getChildByName("arrowImage").visible=!1,this._container.children[e].interactive=!1);else for(e=this._container.children.length-1;0<=e;e--)this._container.children[e].getChildByName("arrowImage").visible=!0,this._container.children[e].interactive=!0,this._container.children[e].offsetY=t,t-=this._container.children[e].height},FriendsWindowItemsLayoutMediator}(n.DisplayObjectContainerMediator);e.FriendsWindowItemsLayoutMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(418),n(4),n(16)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(n){function InviteFriendsAwardWindowMediator(){return null!==n&&n.apply(this,arguments)||this}return u(InviteFriendsAwardWindowMediator,n),InviteFriendsAwardWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._giveButton=this.child("giveButton");var e=this.child("fairy");this._loadableImage=new a.LoadableImage(e,e.resource),this.registerListener(this._giveButton,s.POINTER_TAP,this.onTapGiveButton.bind(this))},InviteFriendsAwardWindowMediator.prototype.onTapGiveButton=function(){o.ElkaCore.instance.promiseManager.ask(new r.ShowInviteFriendsWindowPromise),i.Application.view.hide(this.viewHandle)},InviteFriendsAwardWindowMediator.prototype.destroy=function(){this._loadableImage.destroy(),n.prototype.destroy.call(this)},InviteFriendsAwardWindowMediator}(n.DisplayObjectContainerMediator);e.InviteFriendsAwardWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(121),n(0),n(21),n(2),n(231),n(419),n(4)],void 0===(r=function(t,e,n,r,i,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=uipixi.ToggleButtonEvent,l=uipixi.GestureEvent,d=function(e){function InviteFriendsWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return h(InviteFriendsWindowMediator,e),InviteFriendsWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._itemsData=this._showData.friends,this.initComponents(),this.setupComponents()},InviteFriendsWindowMediator.prototype.initComponents=function(){this._sendButton=this.child("sendButton"),this._searchContainer=this.child("searchContainer"),this._selectAllCheckBox=this.child("selectAllCheckBox"),this._requestsLabel=this.child("requestsLabel"),this._friendsList=this.child("friendsList")},InviteFriendsWindowMediator.prototype.setupComponents=function(){this.registerListener(this._sendButton,l.POINTER_TAP,this.onTapSendInvite.bind(this)),this.registerListener(this._selectAllCheckBox,p.SELECTED_CHANGED,this.onSelectAllChanged.bind(this));for(var t=this._itemsData,e=0,n=t;e<n.length;e++){var i=n[e];this.registerListener(i,s.FriendItemDataEvent.ITEM_SELECTED_CHANGED,this.selectedCountChanged.bind(this))}this._searchedItems=t,this._searchRenderer=new r.SearchRenderer(this._searchContainer,{dataItems:t,searchKey:"name"}),this.registerListener(this._searchRenderer,r.SearchRendererEvent.SEARCH,this.onSearch.bind(this)),this.selectMaxCount(),this.fillList(),this.updateButton(),this.updateRequestsLabel(),this.addTooltip()},InviteFriendsWindowMediator.prototype.updateRequestsLabel=function(){this._requestsLabel.text=this.countOfSelectedItems()+"/"+this._itemsData.length},InviteFriendsWindowMediator.prototype.updateButton=function(){this._sendButton.enabled=0<this.countOfSelectedItems()},InviteFriendsWindowMediator.prototype.onSearch=function(t){this.clearList(),this.unSelectAll(),this._searchedItems=t.data,this.selectedCountChanged(),this.fillList()},InviteFriendsWindowMediator.prototype.countOfSelectedItems=function(){for(var t=0,e=0,n=this.showedItems;e<n.length;e++){n[e].selected&&t++}return t},InviteFriendsWindowMediator.prototype.onSelectAllChanged=function(t){t.data.selected?this.selectMaxCount():this.unSelectAll()},InviteFriendsWindowMediator.prototype.selectedCountChanged=function(){var t=this.isMaxCountSelected()&&0<this.countOfSelectedItems();this._selectAllCheckBox.selected!==t&&(this.unregisterListener(this._selectAllCheckBox,p.SELECTED_CHANGED,this.onSelectAllChanged.bind(this)),this._selectAllCheckBox.selected=t,this.registerListener(this._selectAllCheckBox,p.SELECTED_CHANGED,this.onSelectAllChanged.bind(this))),this._selectAllCheckBox.enabled=0<this.showedItems.length,this.updateButton(),this.updateRequestsLabel()},Object.defineProperty(InviteFriendsWindowMediator.prototype,"showedItems",{get:function(){return this._searchedItems},enumerable:!0,configurable:!0}),InviteFriendsWindowMediator.prototype.isMaxCountSelected=function(){return this.countOfSelectedItems()===this.showedItems.length},InviteFriendsWindowMediator.prototype.selectMaxCount=function(){this.unSelectAll();for(var t=0,e=this.showedItems;t<e.length;t++){e[t].selected=!0}},InviteFriendsWindowMediator.prototype.unSelectAll=function(){for(var t=0,e=this.showedItems;t<e.length;t++){e[t].selected=!1}},InviteFriendsWindowMediator.prototype.clearList=function(){this._friendsList.removeAllItems()},InviteFriendsWindowMediator.prototype.fillList=function(){this.clearList(),this._friendsList.addItems(this.showedItems)},InviteFriendsWindowMediator.prototype.onTapSendInvite=function(){var t=this.showedItems.filter(function(t){return t.selected}).map(function(t){return t.friend.userId});u.ElkaCore.instance.promiseManager.ask(new c.SendFriendInvitePromise(t)),i.Application.view.hide(this.viewHandle)},InviteFriendsWindowMediator.prototype.addTooltip=function(){var t=this.child("helpButton");i.Application.tooltip.addTooltip(t,o.TooltipAnchor.Top,a.GUINames.TEXT_TOOLTIP,{text:"REQUEST_SELECT_FRIENDS_REQUESTS_HELP"})},InviteFriendsWindowMediator.prototype.destroy=function(){this._searchRenderer.destroy(),e.prototype.destroy.call(this)},InviteFriendsWindowMediator}(n.DisplayObjectContainerMediator);e.InviteFriendsWindowMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2),n(8),n(1282),n(33),n(89)],void 0===(r=function(t,e,n,s,c,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowInviteFriendsWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ShowInviteFriendsWindowCommand,t),ShowInviteFriendsWindowCommand.prototype.execute=function(t){return h(this,void 0,void 0,function(){var e,n,i,r,o,a;return _(this,function(t){switch(t.label){case 0:if(s.Application.social.platformType!==l.PlatformType.FB)return[3,5];e=0,n=s.Application.static.data.quests.questLine.getItem(d.StartQuestConfig.getQuestLineByScreen()).quest.getItem(1).tasks.task.items,t.label=1;case 1:return e<n.length?"share"!==(i=n[e]).action?[3,3]:(r=parseInt(i.param),[4,s.Application.social.post(r)]):[3,4];case 2:return t.sent(),[3,4];case 3:return e++,[3,1];case 4:return[2];case 5:return s.Application.social.platformType!==l.PlatformType.VK_MOBILE?[3,7]:[4,s.Application.social.platform.inviteFriends()];case 6:return t.sent(),[2];case 7:return[4,s.Application.profiles.getInvitableFriends()];case 8:return o=t.sent(),a=new u.ViewContext({friends:o.map(function(t){return new p.FriendItemData(t)})}),s.Application.view.show(c.GUINames.INVITE_FRIENDS_WINDOW,a),[2]}})})},ShowInviteFriendsWindowCommand}(n.CommandBase);e.ShowInviteFriendsWindowCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(231)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function FriendItemData(t){var e=n.call(this)||this;return e._friend=t,e._name=e._friend.firstName+" "+e._friend.lastName,e._selected=!1,e}return a(FriendItemData,n),Object.defineProperty(FriendItemData.prototype,"friend",{get:function(){return this._friend},enumerable:!0,configurable:!0}),Object.defineProperty(FriendItemData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(FriendItemData.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!==t&&(this._selected=t,this.dispatchEvent(new i.FriendItemDataEvent(i.FriendItemDataEvent.ITEM_SELECTED_CHANGED,this._selected)))},enumerable:!0,configurable:!0}),FriendItemData}(uipixi.BaseEventTarget);e.FriendItemData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(40),n(0),n(231),n(58)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.ToggleButtonEvent,c=function(e){function FriendListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return u(FriendListItemMediator,e),FriendListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._toggleButton=this._container,this._profile=r.Application.profiles.getProfile(this._showData.friend.userId,!0),this._profileRenderer=new i.ProfileRenderer,this._profileRenderer.initialize(this._profile,this._container,{cropedFullnameLength:18,cropedFullnameSuffix:a.StringUtils.DEFAULT_CROP_SUFFIX}),this._checkBoxBG=this.child("checkBoxBG"),this.registerListener(this._showData,o.FriendItemDataEvent.ITEM_SELECTED_CHANGED,this.selectChanged.bind(this)),this.registerListener(this._toggleButton,s.SELECTED_CHANGED,this.onTapButton.bind(this)),this.selectChanged(null)},FriendListItemMediator.prototype.onTapButton=function(){this._showData.selected=this._toggleButton.selected},FriendListItemMediator.prototype.selectChanged=function(t){this._toggleButton.select(this._showData.selected)},FriendListItemMediator.prototype.destroy=function(){this._profileRenderer.destroy(),e.prototype.destroy.call(this)},FriendListItemMediator}(n.DisplayObjectContainerMediator);e.FriendListItemMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function SendFriendInviteCommand(){return null!==t&&t.apply(this,arguments)||this}return a(SendFriendInviteCommand,t),SendFriendInviteCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=i.Application.localization.localize("FRIEND_INVITE_NOTIFICATION_TEXT"),[4,i.Application.social.invite(n.socialIds,e)];case 1:return t.sent(),[2]}})})},SendFriendInviteCommand}(n.CommandBase);e.SendFriendInviteCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function FriendsModel(){return t.call(this)||this}return o(FriendsModel,t),FriendsModel}(uipixi.BaseEventTarget);e.FriendsModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,M=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(0),n(2),n(1287),n(1288),n(1289),n(22),n(420),n(1290),n(1291),n(1292),n(1293),n(1294),n(80),n(423),n(1295),n(1296),n(1297),n(1298),n(232),n(1300),n(422)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var A=function(t){function ChestsModule(){return null!==t&&t.apply(this,arguments)||this}return M(ChestsModule,t),ChestsModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new m.RegisterFriendLoaderPromise(this))},ChestsModule.prototype.onPreloadModule=function(t){this._modelFactory=new O.ChestModelFactory(o.Application.static.data.chests,o.Application.dynamic.chest),this._selfModel=this._modelFactory.createSelf(),o.Application.view.mapMediator(a.GUINames.HUD+".rightSideBar.sideBarContainer.chestSaleIcon",s.ChestSaleIconMediator,this._selfModel);var e=a.GUINames.CHEST_AND_SALE_WINDOW+".contentContainer.selfChestContainer";o.Application.view.mapMediator(e,c.SelfChestContainerMediator,this._selfModel),o.Application.view.mapMediator(e,f.SelfChestOpenTimeMediator,this._selfModel),o.Application.view.mapMediator(e+".awardsList.*",u.SelfChestAwardListItemMediator),o.Application.view.mapMediator(a.GUINames.OPEN_CHEST_WINDOW,h.OpenChestWindowMediator),o.Application.view.mapMediator(a.GUINames.OPEN_CHEST_WINDOW,E.OpenChestAnimationWindowMediator),o.Application.view.mapMediator(a.GUINames.OPEN_CHEST_WINDOW+".awardsList.*",_.OpenChestAwardListItemMediator),o.Application.view.mapMediator(a.GUINames.FRIENDS_HUD+".chestContainer.container.openButton.pricesList.*",w.FriendChestPriceListItemMediator),p.CommandMap.map(l.OpenSelfChestPromise,d.OpenSelfChestCommand),p.CommandMap.map(v.OpenFriendChestPromise,b.OpenFriendChestCommand),p.CommandMap.map(S.PreloadOpenChestWindowPromise,P.PreloadOpenWindowCommand,{resourcesToLoad:this.config.openChestWindowResources})},ChestsModule.prototype.onVisitFriend=function(t){if(!t.isGuest&&(0<t.friendData.chest.items.length||t.friendItem.isNPC)){this._currentFriendModel=this._modelFactory.createFriend(t.friendItem,t.friendData);var e=a.GUINames.FRIENDS_HUD+".chestContainer";o.Application.view.mapMediator(e,y.FriendChestMediator,{chest:this._currentFriendModel,selfSocialId:o.Application.model.user.socialId}),o.Application.view.mapMediator(e+".container.openContainer",g.FriendChestOpenContainerMediator,this._currentFriendModel)}},ChestsModule.prototype.onLeaveFriend=function(){if(this._currentFriendModel){var t=a.GUINames.FRIENDS_HUD+".chestContainer";o.Application.view.unmapMediator(t,y.FriendChestMediator),o.Application.view.unmapMediator(t+".container.openContainer",g.FriendChestOpenContainerMediator),this._currentFriendModel.destroy(),this._currentFriendModel=void 0}},ChestsModule}(n.Module);e.ChestsModule=A}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(2),n(1),n(103),n(29)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function ChestSaleIconMediator(){return null!==e&&e.apply(this,arguments)||this}return u(ChestSaleIconMediator,e),ChestSaleIconMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._chest=this._mapData,this.registerListener(this._container,s.POINTER_TAP,this.onButton.bind(this)),this._markersContainer=this.child("markersContainer"),this._iconLabel=this.child("iconLabel"),this.updateButtonState(),this.registerListener(this._chest,o.ChestModelEvent.OPEN,this.updateButtonState.bind(this))},ChestSaleIconMediator.prototype.onButton=function(){n.Application.view.show(i.GUINames.CHEST_AND_SALE_WINDOW)},ChestSaleIconMediator.prototype.updateButtonState=function(){this._timerId&&this.clearTimer();var t=this._chest.readyToOpenTime-n.Application.date.currentTime,e=t<=0;this._iconLabel.text=e?n.Application.localization.localize("CHEST_ICON"):a.DateUtils.timeToString(t),this._markersContainer.currentState=e?"done":"off",e||this.setTimer()},ChestSaleIconMediator.prototype.setTimer=function(){this._timerId=n.Application.date.callProcessor.delayCall(this.updateButtonState.bind(this),1e3)},ChestSaleIconMediator.prototype.clearTimer=function(){n.Application.date.callProcessor.deleteCall(this._timerId),this._timerId=void 0},ChestSaleIconMediator.prototype.destroy=function(){this._timerId&&this.clearTimer(),e.prototype.destroy.call(this)},ChestSaleIconMediator}(r.DisplayObjectContainerMediator);e.ChestSaleIconMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(420),n(104),n(97),n(103)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function SelfChestContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return l(SelfChestContainerMediator,e),SelfChestContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._chest=this._mapData,this.child("awardsList").addItems(this.getAwardsRanges(this._chest.awards)),this._loadableSpine=new a.LoadableSpine(this.child("spineContainer"),"chest"),this._loadableSpine.isLoaded?this.onAnimationLoaded():this.registerListener(this._loadableSpine,s.LoadableEvent.LOADED,this.onAnimationLoaded.bind(this)),this._openButton=this.child("openButton"),this.registerListener(this._openButton,u.POINTER_TAP,this.onOpenButton.bind(this)),this.registerListener(this._chest,c.ChestModelEvent.OPEN,this.updateAnimation.bind(this)),this._showAnimation=i.Application.animation.animate(this._container,"showShopOrPromoItem",{delay:0})},SelfChestContainerMediator.prototype.onAnimationLoaded=function(){this._spine=this.child("chestSpine"),this.updateAnimation()},SelfChestContainerMediator.prototype.updateAnimation=function(){this._loadableSpine.isLoaded&&(this._chest.readyToOpenTime-i.Application.date.currentTime<=0?this._spine.setAnimation("02_chest_idle_02",!0):this._spine.setAnimation("01_chest_idle_01",!0))},SelfChestContainerMediator.prototype.getAwardsRanges=function(t){var e=this,n=[];return i.Application.requirements.check(t.requirements)&&(n=(n=n.concat(t.award.map(function(t){return e.getAwardRange(t)}))).concat.apply(n,t.awards.map(function(t){return e.getAwardsRanges(t)}))),n},SelfChestContainerMediator.prototype.getAwardRange=function(t){return{type:t.type,itemId:t.itemId,minValue:i.Application.calculator.calculate(t.minValue),maxValue:i.Application.calculator.calculate(t.maxValue)}},SelfChestContainerMediator.prototype.onOpenButton=function(){r.ElkaCore.instance.promiseManager.ask(new o.OpenSelfChestPromise(this._chest.id))},SelfChestContainerMediator.prototype.destroy=function(){this._showAnimation.stop(),this._loadableSpine.destroy(),e.prototype.destroy.call(this)},SelfChestContainerMediator}(n.DisplayObjectContainerMediator);e.SelfChestContainerMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(54),n(14),n(21)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(n){function SelfChestAwardListItemMediator(){return null!==n&&n.apply(this,arguments)||this}return c(SelfChestAwardListItemMediator,n),SelfChestAwardListItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=new r.CalculatedAwardItem(o.AwardType.fromString(this._showData.type),0,this._showData.itemId);this._awardRenderer=(new i.AwardRenderer).initialize(e,this._container,{iconId:48,countLabel:!1,tooltip:a.TooltipAnchor.Top}),this.child("countLabel").text=this._showData.minValue+"-"+this._showData.maxValue},SelfChestAwardListItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),n.prototype.destroy.call(this)},SelfChestAwardListItemMediator}(n.DisplayObjectContainerMediator);e.SelfChestAwardListItemMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(421),n(4),n(232),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function OpenSelfChestCommand(){return null!==t&&t.apply(this,arguments)||this}return p(OpenSelfChestCommand,t),OpenSelfChestCommand.prototype.execute=function(n){return l(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,o.ElkaCore.instance.promiseManager.ask(new a.PreloadOpenChestWindowPromise)];case 1:return t.sent(),[4,i.Application.server.send(new r.ChestOpenAction(n.chestId))];case 2:return e=t.sent(),i.Application.dynamic.chest.update(e.output.chest),i.Application.view.show(s.GUINames.OPEN_CHEST_WINDOW,new c.ViewContext({baseAward:i.Application.award.convertObjectToCalculated(e.output.baseAward),bonusAward:i.Application.award.convertObjectToCalculated(e.output.bonusAward),isSelf:!0})),i.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},OpenSelfChestCommand}(n.CommandBase);e.OpenSelfChestCommand=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function OpenChestWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return a(OpenChestWindowMediator,e),OpenChestWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setAwards(this._showData.baseAward,this._showData.bonusAward),this.setupInfo(i.Application.model.beauty.currentScreenBeauty.bonus)},OpenChestWindowMediator.prototype.setAwards=function(t,e){for(var n=this.child("awardsList"),i=t.awards,r=i.length,o=0;o<r;o++){var a=i[o];n.addItem({baseAward:a,bonusAward:e.getItemLike(a),index:o,count:r})}},OpenChestWindowMediator.prototype.setupInfo=function(t){(this.child("captionLabel").text=i.Application.localization.localize(this._showData.isSelf?"CHEST_SELF":"CHEST_FRIEND"),0<t)&&(this._container.currentState="bonus",this.child("beautyBonusLabel").text="+"+t+"%")},OpenChestWindowMediator}(n.DisplayObjectContainerMediator);e.OpenChestWindowMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(0),n(422),n(21)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function OpenChestAwardListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return u(OpenChestAwardListItemMediator,e),OpenChestAwardListItemMediator.prototype.initialize=function(t){(e.prototype.initialize.call(this,t),this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.baseAward,this._container,{iconId:64,tooltip:a.TooltipAnchor.Top}),this._showData.bonusAward)&&(this._container.currentState="bonus",this.child("bonusCountLabel").text="+"+this._showData.bonusAward.value);this.setAnimation()},OpenChestAwardListItemMediator.prototype.setAnimation=function(){this._animation=r.Application.animation.animate(this._container,"chestAwardItem",{itemDelay:this._showData.index*o.OpenChestAnimationWindowMediator.AWARD_ITEM_ANIMATION_STEP_DELAY,bonusLabel:this.child("bonusCountLabel"),bonusContainer:this.child("bonusContainer"),bonusDelay:this._showData.count*o.OpenChestAnimationWindowMediator.AWARD_ITEM_ANIMATION_STEP_DELAY}),this.registerListener(r.Application.view.ui.stage,s.POINTER_TAP,this.onStageTap.bind(this))},OpenChestAwardListItemMediator.prototype.onStageTap=function(){this.unregisterListener(r.Application.view.ui.stage,s.POINTER_TAP,this.onStageTap.bind(this)),this._animation.stop(!0)},OpenChestAwardListItemMediator.prototype.destroy=function(){this._animation.stop(),this._awardRenderer.destroy(),e.prototype.destroy.call(this)},OpenChestAwardListItemMediator}(n.DisplayObjectContainerMediator);e.OpenChestAwardListItemMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(103),n(0),n(29)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function SelfChestOpenTimeMediator(){return null!==e&&e.apply(this,arguments)||this}return s(SelfChestOpenTimeMediator,e),SelfChestOpenTimeMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._chest=this._mapData,this._button=this.child("openButton"),this._buttonLabel=this.child("buttonLabel"),this.updateButtonState(),this.registerListener(this._chest,i.ChestModelEvent.OPEN,this.updateButtonState.bind(this))},SelfChestOpenTimeMediator.prototype.updateButtonState=function(){this._timerId&&this.clearTimer();var t=this._chest.readyToOpenTime-r.Application.date.currentTime,e=t<=0;this._button.enabled=e,this._buttonLabel.text=e?r.Application.localization.localize("CHEST_OPEN_BUTTON"):o.DateUtils.timeToString(t),e||this.setTimer()},SelfChestOpenTimeMediator.prototype.setTimer=function(){this._timerId=r.Application.date.callProcessor.delayCall(this.updateButtonState.bind(this),1e3)},SelfChestOpenTimeMediator.prototype.clearTimer=function(){r.Application.date.callProcessor.deleteCall(this._timerId),this._timerId=void 0},SelfChestOpenTimeMediator.prototype.destroy=function(){this._timerId&&this.clearTimer(),e.prototype.destroy.call(this)},SelfChestOpenTimeMediator}(n.DisplayObjectContainerMediator);e.SelfChestOpenTimeMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(103),n(423),n(104),n(97)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function FriendChestMediator(){return null!==e&&e.apply(this,arguments)||this}return l(FriendChestMediator,e),FriendChestMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._chest=this._mapData.chest,this._openButton=this.child("openButton"),this._pricesList=this.child("pricesList"),this._realContainer=this.child("container"),this._loadableSpine=new s.LoadableSpine(this.child("spineContainer"),"chest"),this._loadableSpine.isLoaded?this.onAnimationLoaded():this.registerListener(this._loadableSpine,c.LoadableEvent.LOADED,this.onAnimationLoaded.bind(this)),this._container.visible=!0,this.updateState(),this.checkScreenSize(),this.registerListener(this._chest,o.ChestModelEvent.OPEN,this.updateState.bind(this)),this.registerListener(this._openButton,u.POINTER_TAP,this.onOpenButton.bind(this)),this._updateCallback=this.checkScreenSize.bind(this),i.Application.view.ui.fullscreen.addEventListener("fullscreenchange",this._updateCallback)},FriendChestMediator.prototype.onAnimationLoaded=function(){this._spine=this.child("chestSpine"),this.updateAnimation()},FriendChestMediator.prototype.updateAnimation=function(){if(this._loadableSpine.isLoaded){var t=this._chest.readyToOpenTime-i.Application.date.currentTime<=0;this._spine.setAnimation(t?"02_chest_idle_02":"01_chest_idle_01",!0)}},FriendChestMediator.prototype.updateState=function(){this._timerId&&this.clearTimer();var t=this._chest.readyToOpenTime-i.Application.date.currentTime,e=t<=0;this._isFastOpenState=!e&&this.isFastOpenEnabled(),this._realContainer.currentState=e?"ready":this._isFastOpenState?"fastOpen":"wait";var n=i.Application.price.calculate(this._isFastOpenState?this._chest.fastPrice:this._chest.prices);this._pricesList.removeAllItems(),this._pricesList.addItems(n.prices),e||this.setTimer(t),this.updateAnimation()},FriendChestMediator.prototype.checkScreenSize=function(){this._container.currentState=i.Application.view.ui.fullscreen.inFullscreen?"fullscreen":"default"},FriendChestMediator.prototype.isFastOpenEnabled=function(){return this._chest.openedBySocialId!==this._mapData.selfSocialId&&0<i.Application.price.calculate(this._chest.fastPrice).prices.length},FriendChestMediator.prototype.setTimer=function(t){this._timerId=i.Application.date.callProcessor.delayCall(this.updateState.bind(this),1e3*t)},FriendChestMediator.prototype.clearTimer=function(){i.Application.date.callProcessor.deleteCall(this._timerId),this._timerId=void 0},FriendChestMediator.prototype.onOpenButton=function(){r.ElkaCore.instance.promiseManager.ask(new a.OpenFriendChestPromise(this._chest,this._isFastOpenState))},FriendChestMediator.prototype.destroy=function(){this._timerId&&this.clearTimer(),this._loadableSpine.destroy(),i.Application.view.ui.fullscreen.removeEventListener("fullscreenchange",this._updateCallback),this._updateCallback=null,e.prototype.destroy.call(this)},FriendChestMediator}(n.DisplayObjectContainerMediator);e.FriendChestMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(421),n(2),n(61),n(56),n(4),n(232),n(8)],void 0===(r=function(t,e,n,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function OpenFriendChestCommand(){return null!==t&&t.apply(this,arguments)||this}return a(OpenFriendChestCommand,t),OpenFriendChestCommand.prototype.execute=function(s){return y(this,void 0,void 0,function(){var e,n,i,r,o,a;return m(this,function(t){switch(t.label){case 0:return e=s.chest,n=s.fastOpen?e.fastPrice:e.prices,(i=c.Application.price.hold(c.Application.price.calculate(n))).success?[4,h.ElkaCore.instance.promiseManager.ask(new _.PreloadOpenChestWindowPromise)]:[2];case 1:t.sent(),r=new u.ChestOpenAction(e.id,{socialId:e.friendSocialId,hash:e.friendHash,fastOpen:s.fastOpen}),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,c.Application.server.send(r)];case 3:return t.sent(),[3,5];case 4:if((o=t.sent())instanceof l.ServerError)return c.Application.price.rollback(i),o.code===d.ServerErrorCode.CODE_CHEST_ALREADY_OPENED?(o.stopPropagation(!1),a=o.data.chest,e.dynamic.update(a[e.id]),c.Application.view.show(p.GUINames.CHEST_ALREADY_OPENED_WINDOW)):o.code===d.ServerErrorCode.FRIEND_IS_NOT_AVAILABLE&&(o.stopPropagation(!1),c.Application.view.show(p.GUINames.FRIEND_NOT_WORK_WINDOW)),[2];throw o;case 5:return e.dynamic.update(r.output.chest[e.id]),c.Application.view.show(p.GUINames.OPEN_CHEST_WINDOW,new f.ViewContext({baseAward:c.Application.award.convertObjectToCalculated(r.output.baseAward),bonusAward:c.Application.award.convertObjectToCalculated(r.output.bonusAward),isSelf:!1})),c.Application.price.release(i),c.Application.award.accrueAwardImmediately(r.output.award),[2]}})})},OpenFriendChestCommand}(n.CommandBase);e.OpenFriendChestCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(40),n(0),n(29),n(103)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function FriendChestOpenContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return c(FriendChestOpenContainerMediator,e),FriendChestOpenContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._chest=this._mapData,this._profileRenderer=(new i.ProfileRenderer).initialize(null,this._container,{renderOnInit:!1}),this._timerLabel=this.child("timerLabel"),this.setProfile(),this.updateTimeLabel(),this._timerId=r.Application.date.callProcessor.repeatCall(this.updateTimeLabel.bind(this),1e3),this.registerListener(this._chest,a.ChestModelEvent.OPEN,this.onChestOpen.bind(this))},FriendChestOpenContainerMediator.prototype.updateTimeLabel=function(){var t=this._chest.readyToOpenTime-r.Application.date.currentTime;this._timerLabel.text=o.DateUtils.timeToString(t)},FriendChestOpenContainerMediator.prototype.setProfile=function(){var t=r.Application.profiles.getProfile(this._chest.openedBySocialId,!0);this._profileRenderer.update(t),t.isDefault&&this.loadProfile()},FriendChestOpenContainerMediator.prototype.onChestOpen=function(){this.setProfile(),this.updateTimeLabel()},FriendChestOpenContainerMediator.prototype.loadProfile=function(){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return[4,r.Application.profiles.getProfiles([this._chest.openedBySocialId])];case 1:return e=t.sent(),this._cancellationToken.requested?[2]:((n=e[0])&&this._profileRenderer.update(n),[2])}})})},FriendChestOpenContainerMediator.prototype.destroy=function(){r.Application.date.callProcessor.deleteCall(this._timerId),this._profileRenderer.destroy(),e.prototype.destroy.call(this)},FriendChestOpenContainerMediator}(n.DisplayObjectContainerMediator);e.FriendChestOpenContainerMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function FriendChestPriceListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(FriendChestPriceListItemMediator,e),FriendChestPriceListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._priceRenderer=(new i.AwardRenderer).initialize(this._showData,this._container,{iconId:64,fit:!0})},FriendChestPriceListItemMediator.prototype.destroy=function(){this._priceRenderer.destroy(),e.prototype.destroy.call(this)},FriendChestPriceListItemMediator}(n.DisplayObjectContainerMediator);e.FriendChestPriceListItemMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(424),n(1299)],void 0===(r=function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function ChestModelFactory(t,e){this._staticData=t,this._dynamicData=e}return ChestModelFactory.prototype.createSelf=function(){for(var t=0,e=this._staticData.chest.items;t<e.length;t++){var n=e[t];if("self"===n.userId)return new i.SelfChestModel(n,this._dynamicData.getItem(n.id.toString()))}},ChestModelFactory.prototype.createFriend=function(t,e){return t.isNPC?this.createNPC(t):this.createRealFriend(t,e)},ChestModelFactory.prototype.createRealFriend=function(t,e){var n=this._staticData.friendsChestId,i=e.chest.getItem(n.toString()),r=this._staticData.chest.getItem(n);return new a.FriendChestModel(r,i,t.sUserId,t.hash)},ChestModelFactory.prototype.createNPC=function(t){for(var e=0,n=this._staticData.chest.items;e<n.length;e++){var i=n[e];if(i.userId===t.sUserId){var r=i.id,o=this._dynamicData.getItem(r.toString());return new a.FriendChestModel(i,o,t.sUserId,t.hash)}}},ChestModelFactory}();e.ChestModelFactory=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(424)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function FriendChestModel(t,e,n,i){var r=o.call(this,t,e)||this;return r.prices=t.prices,r.fastPrice=t.fastPrice,r.friendSocialId=n,r.friendHash=i,r}return a(FriendChestModel,o),Object.defineProperty(FriendChestModel.prototype,"openedBySocialId",{get:function(){return this._dynamic.user},enumerable:!0,configurable:!0}),Object.defineProperty(FriendChestModel.prototype,"dynamic",{get:function(){return this._dynamic},enumerable:!0,configurable:!0}),FriendChestModel.prototype.destroy=function(){o.prototype.destroy.call(this)},FriendChestModel}(n.SelfChestModel);e.FriendChestModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function PreloadOpenWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return a(PreloadOpenWindowCommand,t),PreloadOpenWindowCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.resources.getResources(this._data.resourcesToLoad,!0)];case 1:return t.sent(),[2]}})})},PreloadOpenWindowCommand}(n.CommandBase);e.PreloadOpenWindowCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,C=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),T=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},j=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(1302),n(22),n(154),n(426),n(1303),n(1304),n(425),n(233),n(1305),n(156),n(1307),n(235),n(1308),n(80),n(1309),n(51),n(1310),n(230),n(1311),n(4),n(18),n(157),n(0),n(1312),n(234),n(1313)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var I=function(e){function TravelModule(){var t=null!==e&&e.apply(this,arguments)||this;return t._seasonLoaders=[],t._friendLoaders=[],t}return C(TravelModule,e),TravelModule.prototype.initialize=function(t){O.ElkaCore.instance.promiseManager.ask(new S.RegisterModuleLoaderPromise(this)),E.Application.model.travel=new A.TravelModel,this.mapSeasonCommands(),this.mapFriendsCommands(),this.mapTransitionCommands()},TravelModule.prototype.mapSeasonCommands=function(){r.CommandMap.map(a.VisitSeasonPromise,s.VisitSeasonCommand,this._seasonLoaders),r.CommandMap.map(u.LeaveSeasonPromise,c.LeaveSeasonCommand,this._seasonLoaders),r.CommandMap.map(v.RegisterSeasonLoaderPromise,b.RegisterSeasonLoaderCommand,{seasonLoaders:this._seasonLoaders}),r.CommandMap.map(M.GetFriendDataPromise,D.GetFriendDataCommand)},TravelModule.prototype.mapFriendsCommands=function(){r.CommandMap.map(p.VisitFriendPromise,l.VisitFriendCommand,this._friendLoaders),r.CommandMap.map(_.LeaveFriendPromise,f.LeaveFriendCommand,this._friendLoaders),r.CommandMap.map(y.RegisterFriendLoaderPromise,m.RegisterFriendLoaderCommand,{friendLoaders:this._friendLoaders})},TravelModule.prototype.mapTransitionCommands=function(){r.CommandMap.map(o.FromSeasonToFriendPromise,i.FromSeasonToFriendCommand),r.CommandMap.map(d.FromFriendToSeasonPromise,h.FromFriendToSeasonCommand),r.CommandMap.map(g.FromFriendToFriendPromise,w.FromFriendToFriendCommand)},TravelModule.prototype.onStartModule=function(e){return T(this,void 0,void 0,function(){return j(this,function(t){switch(t.label){case 0:return[4,O.ElkaCore.instance.promiseManager.ask(new a.VisitSeasonPromise(new P.GoToSeasonData(e)))];case 1:return t.sent(),[2]}})})},TravelModule}(n.Module);e.TravelModule=I}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(4),n(425),n(233),n(234),n(0),n(126)],void 0===(r=function(t,e,n,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FromSeasonToFriendCommand(){return null!==t&&t.apply(this,arguments)||this}return p(FromSeasonToFriendCommand,t),FromSeasonToFriendCommand.prototype.execute=function(i){return l(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return e=c.Application.dynamic.user.screen,[4,r.ElkaCore.instance.promiseManager.ask(new s.GetFriendDataPromise(i.friendItem.sUserId,e))];case 1:return n=t.sent(),[4,r.ElkaCore.instance.promiseManager.ask(new o.LeaveSeasonPromise)];case 2:return t.sent(),c.Application.model.travel.place=u.TravelPlaceType.FRIEND,[4,r.ElkaCore.instance.promiseManager.ask(new a.VisitFriendPromise(e,i.friendItem,n.receiveData,n.isGuest))];case 3:return t.sent(),c.Application.model.travel.completeTravel(),[2]}})})},FromSeasonToFriendCommand}(n.CommandBase);e.FromSeasonToFriendCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(5)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function VisitSeasonCommand(){return null!==t&&t.apply(this,arguments)||this}return a(VisitSeasonCommand,t),VisitSeasonCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e,n,i;return c(this,function(t){switch(t.label){case 0:e=0,n=this._data,t.label=1;case 1:return e<n.length?void 0===(i=n[e]).onVisitSeason?[3,3]:(r.Application.debug.addLog("TravelModule","Visit season "+o.Utils.getNameFromInstance(i)),[4,i.onVisitSeason(r.Application.dynamic.user.screen)]):[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},VisitSeasonCommand}(n.CommandBase);e.VisitSeasonCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(5),n(0)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function LeaveSeasonCommand(){return null!==t&&t.apply(this,arguments)||this}return a(LeaveSeasonCommand,t),LeaveSeasonCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e,n,i;return c(this,function(t){switch(t.label){case 0:e=0,n=this._data,t.label=1;case 1:return e<n.length?void 0===(i=n[e]).onLeaveSeason?[3,3]:(o.Application.debug.addLog("TravelModule","Leave season "+r.Utils.getNameFromInstance(i)),[4,i.onLeaveSeason()]):[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},LeaveSeasonCommand}(n.CommandBase);e.LeaveSeasonCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(5),n(0),n(1306)],void 0===(r=function(t,e,n,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function VisitFriendCommand(){return null!==t&&t.apply(this,arguments)||this}return u(VisitFriendCommand,t),VisitFriendCommand.prototype.execute=function(o){return p(this,void 0,void 0,function(){var e,n,i,r;return l(this,function(t){switch(t.label){case 0:s.Application.model.travel.currentFriend={userId:o.friendItem.userId,userData:o.friendData},e=new c.GoToFriendData(o.screenId,o.friendItem,o.friendData,o.isGuest),n=0,i=this._data,t.label=1;case 1:return n<i.length?void 0===(r=i[n]).onVisitFriend?[3,3]:(s.Application.debug.addLog("TravelModule","Visit friend "+a.Utils.getNameFromInstance(r)),[4,r.onVisitFriend(e)]):[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},VisitFriendCommand}(n.CommandBase);e.VisitFriendCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function GoToFriendData(t,e,n,i){this.screenId=t,this.friendItem=e,this.friendData=n,this.isGuest=i};e.GoToFriendData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(4),n(235),n(426),n(0),n(126)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function FromFriendToSeasonCommand(){return null!==t&&t.apply(this,arguments)||this}return u(FromFriendToSeasonCommand,t),FromFriendToSeasonCommand.prototype.execute=function(e){return p(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,i.ElkaCore.instance.promiseManager.ask(new r.LeaveFriendPromise)];case 1:return t.sent(),a.Application.model.travel.place=s.TravelPlaceType.SEASON,[4,i.ElkaCore.instance.promiseManager.ask(new o.VisitSeasonPromise(e.data))];case 2:return t.sent(),[2]}})})},FromFriendToSeasonCommand}(n.CommandBase);e.FromFriendToSeasonCommand=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(5),n(0)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function LeaveFriendCommand(){return null!==t&&t.apply(this,arguments)||this}return a(LeaveFriendCommand,t),LeaveFriendCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e,n,i;return c(this,function(t){switch(t.label){case 0:e=0,n=this._data,t.label=1;case 1:return e<n.length?void 0===(i=n[e]).onLeaveFriend?[3,3]:(o.Application.debug.addLog("TravelModule","Leave friend "+r.Utils.getNameFromInstance(i)),[4,i.onLeaveFriend()]):[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return o.Application.model.travel.currentFriend=null,[2]}})})},LeaveFriendCommand}(n.CommandBase);e.LeaveFriendCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RegisterFriendLoaderCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RegisterFriendLoaderCommand,t),RegisterFriendLoaderCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){return this._data.friendLoaders.push(e.friendLoader),[2]})})},RegisterFriendLoaderCommand}(n.CommandBase);e.RegisterFriendLoaderCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RegisterSeasonLoaderCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RegisterSeasonLoaderCommand,t),RegisterSeasonLoaderCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){return this._data.seasonLoaders.push(e.seasonLoader),[2]})})},RegisterSeasonLoaderCommand}(n.CommandBase);e.RegisterSeasonLoaderCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(4),n(235),n(233),n(234),n(0)],void 0===(r=function(t,e,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FromFriendToFriendCommand(){return null!==t&&t.apply(this,arguments)||this}return u(FromFriendToFriendCommand,t),FromFriendToFriendCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return e=c.Application.dynamic.user.screen,[4,r.ElkaCore.instance.promiseManager.ask(new s.GetFriendDataPromise(i.friendItem.sUserId,e))];case 1:return n=t.sent(),[4,r.ElkaCore.instance.promiseManager.ask(new o.LeaveFriendPromise)];case 2:return t.sent(),[4,r.ElkaCore.instance.promiseManager.ask(new a.VisitFriendPromise(e,i.friendItem,n.receiveData,n.isGuest))];case 3:return t.sent(),c.Application.model.travel.completeTravel(),[2]}})})},FromFriendToFriendCommand}(n.CommandBase);e.FromFriendToFriendCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(126),n(417)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function TravelModel(){var t=null!==e&&e.apply(this,arguments)||this;return t.place=n.TravelPlaceType.SEASON,t.currentFriend=null,t}return a(TravelModel,e),TravelModel.prototype.completeTravel=function(){this.place===n.TravelPlaceType.FRIEND&&this.dispatchEvent(new i.TravelModelEvent(i.TravelModelEvent.VISIT_FRIEND,this.currentFriend))},TravelModel}(uipixi.BaseEventTarget);e.TravelModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(411),n(1314),n(7),n(324),n(61),n(2),n(56)],void 0===(r=function(t,e,D,d,h,n,I,_,f,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GetFriendDataCommand(){return null!==t&&t.apply(this,arguments)||this}return a(GetFriendDataCommand,t),GetFriendDataCommand.prototype.execute=function(l){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p;return m(this,function(t){switch(t.label){case 0:return e=l.screen,n=l.socialId,i=D.Application.dynamic.friends.getItem(n),o=!(r=!i)&&i.isNPC,a=r||o?void 0:D.Application.static.data.chests.friendsChestId,o?(s=this.createNPCData(n,i,e),[3,6]):[3,1];case 1:c=void 0,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,D.Application.server.send(new d.FriendGetAction(e,n,a))];case 3:return c=t.sent(),[3,5];case 4:if(!((u=t.sent())instanceof _.ServerError))throw u;return u.code!==y.ServerErrorCode.FRIEND_IS_NOT_AVAILABLE?[2]:(u.stopPropagation(!1),D.Application.view.show(f.GUINames.FRIEND_NOT_WORK_WINDOW),s=this.getEmptyUser(),[3,5]);case 5:c&&(s=c.output.data),t.label=6;case 6:return[4,(p=new h.FriendReceiveDynamicData).initialize(null)];case 7:return t.sent(),p.setData(s),l.resolve({receiveData:p,isGuest:r}),[2]}})})},GetFriendDataCommand.prototype.createNPCData=function(t,e,n){var i={user:{level:e.level,_sUserId:t,_id:t,designObject:{1:{}}}},r=D.Application.static.data.npcs.screens.npc.getItem(t).screen.getItem(n);if(r){for(var o={},a=0,s=r.objects.object.items;a<s.length;a++){var c=s[a];o[c.id]={},o[c.id].stage=c.stage}i.user.objects=o;for(var u={1:{}},p=0,l=r.designObjects.designObject.items;p<l.length;p++){var d=l[p];u[d.id]={},u[d.id].stage=d.stage;var h=d.options.split(",");u[d.id].options={};for(var _=0,f=h;_<f.length;_++){var y=f[_].split(":");u[d.id].options[y[0]]=parseInt(y[1])}}i.user.designObject=u;for(var m={},v=0,b=r.extraItems.extraItem.items;v<b.length;v++){var g=b[v];m[g.type]=g.id}i.user.activeExtraItem=m;var w={};w[r.animal.id]={stage:r.animal.stage},i.user.animal=w;var O={};O[n.toString()]={};for(var S=0,P=0,E=r.toys.toy;P<E.length;P++){var A=E[P],M={};M[I.ToyKey.ID]=A.toyId.toString(),M[I.ToyKey.X]=A.x.toString(),M[I.ToyKey.Y]=A.y.toString(),M[I.ToyKey.LOCATION]=A.location.toString(),M[I.ToyKey.Z_INDEX]=A.zIndex.toString(),M[I.ToyKey.FLIP]=A.flip.toString(),M[I.ToyKey.SCALE]=A.scale.toString(),M[I.ToyKey.ROTATION]=A.rotation.toString(),O[n.toString()][S.toString()]=M,S++}i.toyXY=O}return i},GetFriendDataCommand.prototype.getEmptyUser=function(){return{user:{level:0}}},GetFriendDataCommand}(n.CommandBase);e.GetFriendDataCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(195)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FriendReceiveDynamicData(){return null!==t&&t.apply(this,arguments)||this}return a(FriendReceiveDynamicData,t),FriendReceiveDynamicData}(n.DynamicDataService);e.FriendReceiveDynamicData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,O=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(1316),n(0),n(2),n(1317),n(1318),n(1319),n(4),n(51),n(18),n(22),n(236),n(1322),n(428),n(1324),n(31),n(1326),n(1327),n(1328)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w=function(t){function BoxesModule(){return null!==t&&t.apply(this,arguments)||this}return O(BoxesModule,t),BoxesModule.prototype.initialize=function(t){u.ElkaCore.instance.promiseManager.ask(new p.RegisterSeasonLoaderPromise(this)),u.ElkaCore.instance.promiseManager.ask(new l.RegisterModuleLoaderPromise(this)),r.Application.operation.addAllowingRule(new m.OccurrenceBeginningLineRule("/box"))},BoxesModule.prototype.mapMediators=function(){r.Application.view.mapMediator(o.GUINames.HUD+".bottomPanel.giftsButton",i.HUDBoxesButton,this._boxModel),r.Application.view.mapMediator(o.GUINames.BOXES_WINDOW+".contentContainer.boxContainer1",a.BoxItemMediator,this._boxModel.get(1)),r.Application.view.mapMediator(o.GUINames.BOXES_WINDOW+".contentContainer.boxContainer2",a.BoxItemMediator,this._boxModel.get(2)),r.Application.view.mapMediator(o.GUINames.BOXES_WINDOW+".contentContainer.boxContainer3",a.BoxItemMediator,this._boxModel.get(3)),r.Application.view.mapMediator(o.GUINames.BOXES_WINDOW+".contentContainer.*.awardsListOne.*",s.BoxAwardItemMediator),r.Application.view.mapMediator(o.GUINames.BOXES_WINDOW+".contentContainer.*.awardsListTwo.*",s.BoxAwardItemMediator),r.Application.view.mapMediator(""+o.GUINames.BOX_AWARD_WINDOW,v.OpenBoxAwardWindowMediator,this._boxModel),r.Application.view.mapMediator(o.GUINames.BOX_AWARD_WINDOW+".awardsList.*",b.OpenBoxAwardItemMediator),r.Application.view.mapMediator(o.GUINames.BOX_TOOLTIP,g.BoxTooltipMediator)},BoxesModule.prototype.mapCommands=function(){d.CommandMap.map(h.OpenBoxPromise,_.OpenBoxCommand,{boxesModel:this._boxModel,awardWindowResources:this.config.awardWindowResources}),d.CommandMap.map(f.UpgradeBoxPromise,y.UpgradeBoxCommand)},BoxesModule.prototype.onPreloadModule=function(t){r.Application.model.boxes=this._boxModel=new c.BoxesModel(r.Application.static.data.boxes,r.Application.dynamic.user.boxes,r.Application.model.resources),this.mapMediators(),this.mapCommands()},BoxesModule.prototype.onVisitSeason=function(t){for(var e=0,n=this._boxModel.all;e<n.length;e++){n[e].updateGiftAwards()}},BoxesModule}(n.Module);e.BoxesModule=w}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0),n(2),n(42)],void 0===(r=function(t,e,n,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(r){function HUDBoxesButton(){return null!==r&&r.apply(this,arguments)||this}return s(HUDBoxesButton,r),HUDBoxesButton.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this._countLabel=this._button.getChildByName("countLabel"),this._countContainer=this._button.getChildByName("countContainer"),this.updateCount();for(var e=0,n=this._mapData.all;e<n.length;e++){var i=n[e];this.registerListener(i.resourceData,a.ResourceModelEvent.COUNT_CHANGED,this.updateCount.bind(this))}},HUDBoxesButton.prototype.updateCount=function(){for(var t=0,e=0,n=this._mapData.all;e<n.length;e++){t+=n[e].resourceData.count}0<t?(this._countContainer.visible=!0,this._countLabel.text=t.toString()):this._countContainer.visible=!1,this._countContainer.getChildByName("bg").width=0,this._countContainer.invalidate()},HUDBoxesButton.prototype.onButton=function(t){i.Application.view.show(o.GUINames.BOXES_WINDOW)},HUDBoxesButton}(n.SimpleButtonMediator);e.HUDBoxesButton=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,v=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(236),n(4),n(42),n(427),n(428),n(0),n(1),n(38),n(14),n(104),n(2),n(21),n(97),n(429)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=uipixi.GestureEvent,m=function(e){function BoxItemMediator(){return null!==e&&e.apply(this,arguments)||this}return v(BoxItemMediator,e),BoxItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.initComponents(),this.setupComponents()},BoxItemMediator.prototype.initComponents=function(){this._awardsListOne=this.child("awardsListOne"),this._awardsListTwo=this.child("awardsListTwo"),this._boxLevelLabel=this.child("boxLevelLabel"),this._nameLabel=this.child("nameLabel"),this._countLabel=this.child("countLabel"),this._progressBar=this.child("progressBar"),this._infoButton=this.child("infoButton"),this._openButton=this.child("openButton"),this._upgradeButton=this.child("upgradeButton")},BoxItemMediator.prototype.setupComponents=function(){this.setupData(),this.registerListener(this._openButton,y.POINTER_TAP,this.onTapOpen.bind(this)),this.registerListener(this._upgradeButton,y.POINTER_TAP,this.onTapUpgrade.bind(this)),this.registerListener(this._mapData.resourceData,r.ResourceModelEvent.COUNT_CHANGED,this.onResourceCountChanged.bind(this)),this.registerListener(this._mapData,o.BoxModelEvent.BOX_CHANGED,this.onBoxModelChanged.bind(this)),this.registerListener(this._mapData,o.BoxModelEvent.BOX_AWARD_CHANGED,this.onBoxAwardChanged.bind(this));var t=u.PriceAwardUtils.getString(p.AwardType.RESOURCE,this._mapData.resourceData.id,"name");this._nameLabel.text=s.Application.localization.localize(t),this._loadableSpine=new l.LoadableSpine(this.child("spineContainer"),"box"+this._mapData.id),this._loadableSpine.isLoaded?this.onAnimationLoaded():this.registerListener(this._loadableSpine,_.LoadableEvent.LOADED,this.onAnimationLoaded.bind(this)),s.Application.tooltip.addTooltip(this._infoButton,h.TooltipAnchor.Top,d.GUINames.BOX_TOOLTIP,{box:this._mapData})},BoxItemMediator.prototype.onAnimationLoaded=function(){this._boxSpine=this.child("boxSpine"),this.updateBoxAnimation()},BoxItemMediator.prototype.updateBoxAnimation=function(){this._loadableSpine.isLoaded&&(0<this._mapData.count?this._boxSpine.setAnimation(f.BoxAnimation.ready_to_open,!0):this._boxSpine.setAnimation(f.BoxAnimation.closed,!0))},BoxItemMediator.prototype.onBoxAwardChanged=function(){this.updateLists()},BoxItemMediator.prototype.onBoxModelChanged=function(){this.updateProgress(),this.updateButton()},BoxItemMediator.prototype.setupData=function(){this.updateProgress(),this.updateCount(),this.updateLists(),this.updateButton()},BoxItemMediator.prototype.onResourceCountChanged=function(){this.updateCount(),this.updateButton(),this.updateBoxAnimation()},BoxItemMediator.prototype.updateCount=function(){this._countLabel.text="x"+this._mapData.count},BoxItemMediator.prototype.updateProgress=function(){this._progressBar.progress=this._mapData.progress,this._boxLevelLabel.text=s.Application.localization.localize("BOX_LEVEL",{level:this._mapData.stage.toString()})},BoxItemMediator.prototype.updateButton=function(){this._mapData.canUpgradeBox?(this._openButton.visible=!1,this._upgradeButton.visible=!0):(this._openButton.visible=!0,this._upgradeButton.visible=!1,this._openButton.enabled=0<this._mapData.count)},BoxItemMediator.prototype.updateLists=function(){var t=this._mapData.awards.slice(0,3),e=this._mapData.awards.slice(3,this._mapData.awards.length);this._awardsListOne.removeAllItems(),this._awardsListTwo.removeAllItems(),this._awardsListOne.addItems(t),this._awardsListTwo.addItems(e)},BoxItemMediator.prototype.onTapOpen=function(t){i.ElkaCore.instance.promiseManager.ask(new n.OpenBoxPromise(this._mapData,null))},BoxItemMediator.prototype.onTapUpgrade=function(){i.ElkaCore.instance.promiseManager.ask(new a.UpgradeBoxPromise(this._mapData))},BoxItemMediator.prototype.destroy=function(){this._loadableSpine.destroy(),e.prototype.destroy.call(this)},BoxItemMediator}(c.DisplayObjectContainerMediator);e.BoxItemMediator=m}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(15),n(54),n(14),n(1),n(21)],void 0===(r=function(t,e,i,r,o,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(n){function BoxAwardItemMediator(){return null!==n&&n.apply(this,arguments)||this}return c(BoxAwardItemMediator,n),BoxAwardItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._countLabel=this.child("countLabel"),this.updateCount();var e=new r.CalculatedAwardItem(o.AwardType.fromString(this._showData.type),0,this._showData.itemId);this._awardRenderer=(new i.AwardRenderer).initialize(e,this._container,{iconId:48,countLabel:!1,tooltip:a.TooltipAnchor.Top})},BoxAwardItemMediator.prototype.updateCount=function(){this._showData.minValue===this._showData.maxValue?this._countLabel.text=""+this._showData.minValue:this._countLabel.text=this._showData.minValue+"-"+this._showData.maxValue},BoxAwardItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),n.prototype.destroy.call(this)},BoxAwardItemMediator}(n.DisplayObjectContainerMediator);e.BoxAwardItemMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1320)],void 0===(r=function(t,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(s){function BoxesModel(t,e,n){var i=s.call(this)||this;i._items=new core.Map,i._itemsArray=[];for(var r=0,o=t.box.items;r<o.length;r++){var a=o[r];i._items.set(a.id.toString(),new c.BoxItemModel(a,e.getItem(a.id.toString()),n.get(a.resourceId))),i._itemsArray.push(i._items.get(a.id.toString()))}return i}return a(BoxesModel,s),BoxesModel.prototype.get=function(t){return this._items.get(t.toString())},Object.defineProperty(BoxesModel.prototype,"all",{get:function(){return this._itemsArray},enumerable:!0,configurable:!0}),BoxesModel.prototype.getNextPossibleToOpenBox=function(){for(var t=this._itemsArray.length-1;0<=t;t--)if(0<this._itemsArray[t].count&&!this._itemsArray[t].canUpgradeBox)return this._itemsArray[t];return null},BoxesModel}(uipixi.BaseEventTarget);e.BoxesModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1321),n(13),n(427)],void 0===(r=function(t,e,u,a,o,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(r){function BoxItemModel(t,e,n){var i=r.call(this)||this;return i._staticData=t,i._dynamicData=e,i._resourceModel=n,i._awards=[],i._dynamicData.addEventListener(o.BaseDataEvent.CHANGED,i.onDataChanged.bind(i)),i}return s(BoxItemModel,r),BoxItemModel.prototype.onDataChanged=function(){this.dispatchEvent(new p.BoxModelEvent(p.BoxModelEvent.BOX_CHANGED))},Object.defineProperty(BoxItemModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(BoxItemModel.prototype,"staticData",{get:function(){return this._staticData},enumerable:!0,configurable:!0}),Object.defineProperty(BoxItemModel.prototype,"resourceData",{get:function(){return this._resourceModel},enumerable:!0,configurable:!0}),Object.defineProperty(BoxItemModel.prototype,"canUpgradeBox",{get:function(){var t=this._staticData.stages.getItem(this._dynamicData.stage+1);return t&&u.Application.requirements.check(t.requirements)},enumerable:!0,configurable:!0}),Object.defineProperty(BoxItemModel.prototype,"count",{get:function(){return this.resourceData.count},enumerable:!0,configurable:!0}),Object.defineProperty(BoxItemModel.prototype,"stage",{get:function(){return this._dynamicData.stage},enumerable:!0,configurable:!0}),Object.defineProperty(BoxItemModel.prototype,"progress",{get:function(){var t=0,e=this._dynamicData.stage,n=this._staticData.stages.getItem(e),i=this._staticData.stages.getItem(e+1);if(this.canUpgradeBox)t=1;else if(i){var r=this.getCountFromRequirement(i.requirements),o=this.getCountFromRequirement(n.requirements);t=(this._dynamicData.counter.open-o)/(r-o)}else t=0;return t},enumerable:!0,configurable:!0}),BoxItemModel.prototype.getCountFromRequirement=function(t){return 0<t.requirement.length?parseInt(t.requirement[0].minValue):0},Object.defineProperty(BoxItemModel.prototype,"awards",{get:function(){return this._awards},enumerable:!0,configurable:!0}),BoxItemModel.prototype.resetAwards=function(){this._awards=[]},BoxItemModel.prototype.getAwards=function(t){var e=this,n=[];return u.Application.requirements.check(t.requirements)&&(n=(n=n.concat(t.award.map(function(t){return t}))).concat.apply(n,t.awards.map(function(t){return e.getAwards(t)}))),n},BoxItemModel.prototype.updateGiftAwards=function(){this.resetAwards();for(var t=0,e=this._staticData.slots.items;t<e.length;t++)for(var n=e[t],i=0,r=this.getAwards(n.awards);i<r.length;i++){var o=r[i],a=this.getSimilarAward(o.type,o.itemId);if(o.minValue&&o.maxValue){var s=u.Application.calculator.calculate(o.minValue,null,!0),c=u.Application.calculator.calculate(o.maxValue,null,!0);a.updateValues(s,c)}}this.dispatchEvent(new p.BoxModelEvent(p.BoxModelEvent.BOX_AWARD_CHANGED))},BoxItemModel.prototype.getSimilarAward=function(t,e){for(var n=0,i=this._awards;n<i.length;n++){var r=i[n];if(r.type==t&&r.itemId==e)return r}var o=new a.BoxAwardItemModel(t,e);return this._awards.push(o),o},Object.defineProperty(BoxItemModel.prototype,"leftToUpgrade",{get:function(){var t=this._staticData.stages.getItem(this.stage+1);if(t)return Math.max(0,this.getCountFromRequirement(t.requirements)-this._dynamicData.counter.open)},enumerable:!0,configurable:!0}),BoxItemModel}(uipixi.BaseEventTarget);e.BoxItemModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(14)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function BoxAwardItemModel(t,e){this._type=t,this._itemId=e,this.reset()}return Object.defineProperty(BoxAwardItemModel.prototype,"type",{get:function(){return n.AwardType.fromString(this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(BoxAwardItemModel.prototype,"itemId",{get:function(){return this._itemId},enumerable:!0,configurable:!0}),Object.defineProperty(BoxAwardItemModel.prototype,"maxValue",{get:function(){return this._maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(BoxAwardItemModel.prototype,"minValue",{get:function(){return this._minValue},enumerable:!0,configurable:!0}),BoxAwardItemModel.prototype.reset=function(){this._minValue=Number.MAX_VALUE,this._maxValue=0},BoxAwardItemModel.prototype.updateValues=function(t,e){this._minValue>t&&(this._minValue=t),this._maxValue<e&&(this._maxValue=e)},BoxAwardItemModel}();e.BoxAwardItemModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},b=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1323),n(115),n(116),n(49),n(2),n(8),n(430),n(32),n(14),n(48)],void 0===(r=function(t,e,n,p,u,l,d,h,_,i,f,y,m,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function OpenBoxCommand(){return null!==t&&t.apply(this,arguments)||this}return a(OpenBoxCommand,t),OpenBoxCommand.prototype.execute=function(c){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return b(this,function(t){switch(t.label){case 0:return this._boxModel=c.boxModel,n=new d.CalculatedPriceItem(h.PriceType.RESOURCE,1,this._boxModel.staticData.resourceId),(i=p.Application.price.hold((new l.CalculatedPrice).add(n))).success?[4,p.Application.server.send(new u.OpenBoxAction(this._boxModel.id.toString()))]:[2];case 1:for(o in r=t.sent(),p.Application.price.release(i),this._awards=[],this._slotAwards=[],r.output.slotAwards)a=r.output.slotAwards[o],this._slotAwards.push(a),s=p.Application.award.convertObjectToCalculated(a),(e=this._awards).push.apply(e,s.awards);return this.sendEvent(),p.Application.view.isShowed(_.GUINames.BOX_AWARD_WINDOW)?[3,6]:[4,p.Application.resources.getResources(this._data.awardWindowResources,!0)];case 2:return t.sent(),this.hasRoulette()?[4,this.showAwardWindow().onClose]:[3,4];case 3:return t.sent(),this.accrueAward(),[3,5];case 4:this.accrueAward(),this.showAwardWindow(),t.label=5;case 5:return[3,9];case 6:return this._data.boxesModel.dispatchEvent(new f.BoxesModelEvent(f.BoxesModelEvent.OPENED,{award:this._awards,currentBox:this._boxModel})),this.hasRoulette()?[4,c.viewHandle.onClose]:[3,8];case 7:t.sent(),t.label=8;case 8:this.accrueAward(),t.label=9;case 9:return p.Application.model.guides.dispatchEvent(new v.GuidesModelEvent(v.GuidesModelEvent.BOX_OPENED)),[2]}})})},OpenBoxCommand.prototype.showAwardWindow=function(){return p.Application.view.show(_.GUINames.BOX_AWARD_WINDOW,new i.ViewContext({award:this._awards,currentBox:this._boxModel}))},OpenBoxCommand.prototype.sendEvent=function(){for(var t=0,e=0,n=0,i=0,r=0,o=0,a=p.Application.static.data.screens.screen.getItem(p.Application.dynamic.user.screen),s=0,c=this._awards;s<c.length;s++){var u=c[s];u.equalsBy(m.AwardType.RESOURCE,"farmCoin")&&(t+=u.value),u.type===m.AwardType.ROULETTE&&(e=1),u.equalsBy(m.AwardType.RESOURCE,"energy")&&(n+=u.value),u.equalsBy(m.AwardType.RESOURCE,"cash")&&(i+=u.value),u.equalsBy(m.AwardType.RESOURCE,a.resourceId)&&(r+=u.value),u.equalsBy(m.AwardType.RESOURCE,a.workshopResourceId)&&(o+=u.value)}p.Application.metrics.goalStarkEvent(y.StarkEventsName.CASE_OPEN,{ctype:this._boxModel.id,clev:this._boxModel.stage,fcreward:t,wheel:e,erew:n,rrew:i,mrew:r,crew:o})},OpenBoxCommand.prototype.accrueAward=function(){for(var t=0,e=this._slotAwards;t<e.length;t++){var n=e[t];p.Application.award.accrueAwardImmediately(n)}},OpenBoxCommand.prototype.hasRoulette=function(){return this._awards.some(function(t){return t.type===m.AwardType.ROULETTE||t.type===m.AwardType.ROULETTE_SPINS})},OpenBoxCommand}(n.CommandBase);e.OpenBoxCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function OpenBoxAction(t){var e=n.call(this)||this;return e.action="open",e.controller="box",e.input=new i.ActionInput({boxId:t}),e.output=new o,e}return a(OpenBoxAction,n),OpenBoxAction}(n.Action);e.OpenBoxAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.slotAwards=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1325),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function UpgradeBoxCommand(){return null!==t&&t.apply(this,arguments)||this}return a(UpgradeBoxCommand,t),UpgradeBoxCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,r.Application.server.send(new i.UpgradeBoxAction(e.boxModel.id.toString()))];case 1:return t.sent(),e.boxModel.updateGiftAwards(),[2]}})})},UpgradeBoxCommand}(n.CommandBase);e.UpgradeBoxCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function UpgradeBoxAction(t){var e=n.call(this)||this;return e.action="stageUp",e.controller="box",e.input=new i.ActionInput({boxId:t}),e.output=new o,e}return a(UpgradeBoxAction,n),UpgradeBoxAction}(n.Action);e.UpgradeBoxAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(4),n(430),n(0),n(236),n(15),n(54),n(14),n(1),n(429),n(48),n(43),n(46)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=uipixi.GestureEvent,f=uipixi.SpineDisplayObjectEvent,y=function(e){function OpenBoxAwardWindowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._continueAnimation=null,t.SHINE_REVEAL_ANIMATION="01_reveal",t.SHINE_IDLE_ANIMATION="02_idle",t._nextBoxAnimation=null,t}return m(OpenBoxAwardWindowMediator,e),OpenBoxAwardWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.viewHandle.onShown.capture(),this._awards=this._showData.award,this._currentBox=this._showData.currentBox,this.initComponents(),this.setupComponents()},OpenBoxAwardWindowMediator.prototype.initComponents=function(){this._continueButton=this.child("continueButton"),this._awardsList=this.child("awardsList"),this._nextBoxContainer=this.child("nextBoxContainer"),this._nextBoxImage=this._nextBoxContainer.getChildByName("nextBoxImage"),this._nextBoxImageContainer=this._nextBoxContainer.getChildByName("nextBoxImageContainer"),this._nextBoxButton=this._nextBoxContainer.getChildByName("nextBoxButton"),this._nextBoxButtonContainer=this._nextBoxContainer.getChildByName("nextBoxButtonContainer"),this._shineContainer=this._nextBoxContainer.getChildByName("shineContainer"),this._continueButtonContainer=this.child("continueButtonContainer"),this._shineSpine=this.child("shineSpine")},OpenBoxAwardWindowMediator.prototype.setupComponents=function(){this._nextBoxRenderer=(new a.AwardRenderer).initialize(null,this._container,{iconImage:this._nextBoxImage,iconId:64,renderOnInit:!1}),this.registerListener(this._continueButton,_.POINTER_TAP,this.onClickContinue.bind(this)),this.registerListener(this._nextBoxButton,_.POINTER_TAP,this.openNextBox.bind(this)),this.registerListener(this._mapData,i.BoxesModelEvent.OPENED,this.onBoxOpened.bind(this)),this.setupSpineAnimation(!0)},OpenBoxAwardWindowMediator.prototype.setupSpineAnimation=function(t){void 0===t&&(t=!1),t?(this.hideAwards(),this.updateBox(),this._spineAnimation.setAnimation(p.BoxAnimation.opening,!1),this._currentAnimation=p.BoxAnimation.opening,this._continueButtonContainer.visible=!1,this._nextBoxContainer.visible=!1,this.registerListener(this._spineAnimation,f.ANIMATION_COMPLETE,this.turnNextAnimation.bind(this)),this.registerListener(r.Application.view.ui.stage,_.POINTER_TAP,this.onTap.bind(this)),r.Application.sound.play(d.SoundName.BOX_OPEN,!1,h.SoundGroup.SOUND_GROUP_BOX_OPEN),this.startShine()):(this.updateNextBox(),this.showAwards())},OpenBoxAwardWindowMediator.prototype.startShine=function(){this._shineSpine.setAnimation(this.SHINE_REVEAL_ANIMATION,!1),this._shineSpine.hasListener(f.ANIMATION_COMPLETE,this.startShineIdle.bind(this))||this._shineSpine.addEventListener(f.ANIMATION_COMPLETE,this.startShineIdle.bind(this))},OpenBoxAwardWindowMediator.prototype.startShineIdle=function(){this._shineSpine.setAnimation(this.SHINE_IDLE_ANIMATION,!0),this._shineSpine.hasListener(f.ANIMATION_COMPLETE,this.startShineIdle.bind(this))&&this._shineSpine.removeEventListener(f.ANIMATION_COMPLETE,this.startShineIdle.bind(this))},OpenBoxAwardWindowMediator.prototype.turnNextAnimation=function(){this._currentAnimation===p.BoxAnimation.closed?(this._spineAnimation.setAnimation(p.BoxAnimation.opening,!1),this._currentAnimation=p.BoxAnimation.opening):this._currentAnimation===p.BoxAnimation.opening&&this.setOpenedState()},OpenBoxAwardWindowMediator.prototype.onTap=function(){this.unregisterListener(r.Application.view.ui.stage,_.POINTER_TAP,this.onTap.bind(this)),r.Application.sound.stop(h.SoundGroup.SOUND_GROUP_BOX_OPEN),this._currentAnimation!==p.BoxAnimation.opened&&this.setOpenedState()},OpenBoxAwardWindowMediator.prototype.setOpenedState=function(){this._spineAnimation.setAnimation(p.BoxAnimation.opened,!0),this._currentAnimation=p.BoxAnimation.opened,this.updateNextBox(),this.showContinueButton(),this.showAwards(),this.viewHandle.onShown.shown||this.viewHandle.onShown.complete()},OpenBoxAwardWindowMediator.prototype.updateNextBox=function(){0<this._currentBox.count&&!this._currentBox.canUpgradeBox?this._nextBox=this._currentBox:this._nextBox=r.Application.model.boxes.getNextPossibleToOpenBox(),this._nextBox&&!this.hasRouletteAward()?(this._nextBoxContainer.visible=!0,this._nextBoxRenderer.updateAward(new s.CalculatedAwardItem(c.AwardType.RESOURCE,1,this._nextBox.staticData.resourceId)),this._nextBoxAnimation&&this._nextBoxAnimation.stop(),this._nextBoxAnimation=r.Application.animation.animate(this._nextBoxContainer,"showNextBox",{button:this._nextBoxButtonContainer,image:this._nextBoxImageContainer,shine:this._shineContainer,onShown:function(){return r.Application.model.guides.dispatchEvent(new l.GuidesModelEvent(l.GuidesModelEvent.NEXT_BOX_BUTTON_ANIMATION_COMPLETE))}})):this._nextBoxContainer.visible=!1},OpenBoxAwardWindowMediator.prototype.showContinueButton=function(){this._continueAnimation&&this._continueAnimation.stop(),this._continueAnimation=r.Application.animation.animate(this._continueButtonContainer,"showBoxContinue")},OpenBoxAwardWindowMediator.prototype.openNextBox=function(){n.ElkaCore.instance.promiseManager.ask(new o.OpenBoxPromise(this._nextBox,this.viewHandle))},OpenBoxAwardWindowMediator.prototype.updateBox=function(){this._spineAnimation&&this.unregisterListener(this._spineAnimation,f.ANIMATION_COMPLETE,this.turnNextAnimation.bind(this)),this._container.currentState=this._currentBox.id.toString(),this._spineAnimation=this.child("boxSpine")},OpenBoxAwardWindowMediator.prototype.onClickContinue=function(){r.Application.view.hide(this.viewHandle)},OpenBoxAwardWindowMediator.prototype.hasRouletteAward=function(){for(var t=0,e=this._awards;t<e.length;t++){var n=e[t];if(n.type===c.AwardType.ROULETTE||n.type===c.AwardType.ROULETTE_SPINS)return!0}return!1},OpenBoxAwardWindowMediator.prototype.onBoxOpened=function(t){this._awards=t.data.award;var e=this._currentBox!=t.data.currentBox;this._currentBox=t.data.currentBox,this.setupSpineAnimation(e)},OpenBoxAwardWindowMediator.prototype.hideAwards=function(){this._awardsList.removeAllItems()},OpenBoxAwardWindowMediator.prototype.showAwards=function(){this._awardsList.removeAllItems(),this._awardsList.addItems(this._awards.map(function(t,e){return{award:t,index:e}}))},OpenBoxAwardWindowMediator.prototype.destroy=function(){this._nextBoxAnimation&&this._nextBoxAnimation.stop(),this._continueAnimation&&this._continueAnimation.stop(),this._shineSpine.removeEventListener(f.ANIMATION_COMPLETE,this.startShineIdle.bind(this)),this._nextBoxRenderer.destroy(),e.prototype.destroy.call(this)},OpenBoxAwardWindowMediator}(u.DisplayObjectContainerMediator);e.OpenBoxAwardWindowMediator=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(15),n(1),n(21),n(0)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function OpenBoxAwardItemMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animation=null,t}return s(OpenBoxAwardItemMediator,e),OpenBoxAwardItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new n.AwardRenderer).initialize(this._showData.award,this._container,{iconId:64,tooltip:r.TooltipAnchor.Bottom}),this.initAnimation()},OpenBoxAwardItemMediator.prototype.initAnimation=function(){this._animation=o.Application.animation.animate(this._container,"showBoxAwardItem",{animDelay:200*this._showData.index})},OpenBoxAwardItemMediator.prototype.destroy=function(){this._animation&&this._animation.stop(),this._awardRenderer.destroy(),e.prototype.destroy.call(this)},OpenBoxAwardItemMediator}(i.DisplayObjectContainerMediator);e.OpenBoxAwardItemMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(99),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function BoxTooltipMediator(){return null!==t&&t.apply(this,arguments)||this}return a(BoxTooltipMediator,t),BoxTooltipMediator.prototype.onInitialize=function(){var t=this.child("textLabel");this._showData.box.leftToUpgrade?t.text=this._showData.box.leftToUpgrade.toString():(this.child("label").text=i.Application.localization.localize("BOX_INFO_TOOLTIP_MAX_STAGE"),t.text="")},BoxTooltipMediator}(n.TooltipMediator);e.BoxTooltipMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,E=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(2),n(4),n(51),n(18),n(80),n(20),n(0),n(1330),n(1331),n(22),n(431),n(1332),n(31),n(1335),n(1336),n(1337),n(1338),n(1339),n(1340),n(434),n(62),n(122)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var P=function(t){function LikesModule(){return null!==t&&t.apply(this,arguments)||this}return E(LikesModule,t),LikesModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new o.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new r.RegisterSeasonLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new a.RegisterFriendLoaderPromise(this)),c.Application.operation.addAllowingRule(new _.OccurrenceBeginningLineRule("/likes"))},LikesModule.prototype.onPreloadModule=function(t){c.Application.model.likes=this._userLikesModel=new b.LikesModel,l.CommandMap.map(d.LikeFriendPromise,h.LikeFriendCommand,this._userLikesModel),c.Application.view.mapMediator(n.GUINames.HUD+".settingsContainer.likesButton",u.LikesButtonMediator,this._userLikesModel),c.Application.view.mapMediator(n.GUINames.FRIENDS_LIKES_WINDOW,y.FriendsLikesWindowMediator,this._userLikesModel),c.Application.view.mapMediator(n.GUINames.FRIENDS_LIKES_WINDOW,O.SimplePopupAnimationMediator),c.Application.view.mapMediator(n.GUINames.FRIENDS_LIKES_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",m.FriendsLikesListItemMediator,this._userLikesModel),c.Application.view.mapMediator(n.GUINames.FRIENDS_LIKES_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",S.AlphaOptimizationListItemMediator)},LikesModule.prototype.onVisitFriend=function(t){if(0!==t.friendData.user.likes.items.length){var e=t.friendData.user;switch(this._friendLikesModel=new v.FriendsLikesModel(e.id,e.sUserId,e,t.isGuest,t.friendItem.isNPC),this._friendLikesModel.visitorState){case w.VisitorState.GUEST:c.Application.view.mapMediator(n.GUINames.GUEST_FRIENDS_HUD+".topRightContainer",f.GuestsLikesContainerMediator,this._friendLikesModel);break;case w.VisitorState.NPC:c.Application.view.mapMediator(n.GUINames.FRIENDS_HUD+".settingsContainer.likesContainer",g.NPCLikesContainerMediator);break;case w.VisitorState.FRIEND:c.Application.view.mapMediator(n.GUINames.FRIENDS_HUD+".settingsContainer.likesContainer",p.FriendLikesContainerMediator,{friendLikesModel:this._friendLikesModel,userLikesModel:this._userLikesModel})}}},LikesModule.prototype.onLeaveFriend=function(){c.Application.view.unmapMediator(n.GUINames.FRIENDS_HUD+".settingsContainer.likesContainer",p.FriendLikesContainerMediator),c.Application.view.unmapMediator(n.GUINames.FRIENDS_HUD+".settingsContainer.likesContainer",g.NPCLikesContainerMediator),c.Application.view.unmapMediator(n.GUINames.GUEST_FRIENDS_HUD+".topRightContainer",f.GuestsLikesContainerMediator),this._friendLikesModel&&(this._friendLikesModel.destroy(),this._friendLikesModel=void 0)},LikesModule}(s.Module);e.LikesModule=P}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(88),n(73)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function LikesButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return u(LikesButtonMediator,e),LikesButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._marker=this.child("marker"),this._model=i.Application.model.gladeDuel,this.child("likesCountLabel").text=this._mapData.getCount().toString(),this.registerListener(this._container,s.POINTER_TAP,this.onTap.bind(this)),i.Application.dynamic.user.level<LikesButtonMediator.MARKER_MIN_LEVEL&&this.registerListener(i.Application.model.user,o.UserModelEvent.LEVEL_UP,this.onLevelUp.bind(this)),this.registerListener(this._model,a.GladeDuelModelEvent.GAME_READY,this.updateMarker.bind(this)),this.registerListener(this._model,a.GladeDuelModelEvent.SPEED_UP,this.updateMarker.bind(this)),this.registerListener(this._model,a.GladeDuelModelEvent.GAME_FINISHED,this.updateMarker.bind(this)),this.updateMarker()},LikesButtonMediator.prototype.onLevelUp=function(){i.Application.dynamic.user.level>=LikesButtonMediator.MARKER_MIN_LEVEL&&this.unregisterListener(i.Application.model.user,o.UserModelEvent.LEVEL_UP,this.onLevelUp.bind(this)),this.updateMarker()},LikesButtonMediator.prototype.onTap=function(){i.Application.view.show(r.GUINames.GLADE_DUEL_START_WINDOW)},LikesButtonMediator.prototype.updateMarker=function(){this._marker.visible=!this._model.waiting&&i.Application.dynamic.user.level>=LikesButtonMediator.MARKER_MIN_LEVEL},LikesButtonMediator.MARKER_MIN_LEVEL=60,LikesButtonMediator}(n.DisplayObjectContainerMediator);e.LikesButtonMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(431),n(432)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function FriendLikesContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return u(FriendLikesContainerMediator,e),FriendLikesContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._friendModel=this._mapData.friendLikesModel,this._hasLike=this._mapData.userLikesModel.hasMyLike(this._friendModel.userId),this._likesCountLabel=this.child("likesCountLabel"),this._likeLabel=this.child("likeLabel"),this._likeButton=this.child("likeButton"),this._container.visible=!0,this.registerListener(this._likeButton,s.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._friendModel,a.LikesModelEvent.COUNT_CHANGED,this.onCountChanged.bind(this)),this.update()},FriendLikesContainerMediator.prototype.onCountChanged=function(){this._hasLike=!this._hasLike,this.update()},FriendLikesContainerMediator.prototype.update=function(){this._likesCountLabel.text=this._friendModel.count.toString(),this._likeButton.selected=!this._hasLike,this._likeLabel.text=i.Application.localization.localize(this._hasLike?"LIKE_PICK_UP_TITLE":"LIKE_TITLE")},FriendLikesContainerMediator.prototype.onTap=function(){r.ElkaCore.instance.promiseManager.ask(new o.LikeFriendPromise(this._friendModel)),this.update()},FriendLikesContainerMediator}(n.DisplayObjectContainerMediator);e.FriendLikesContainerMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},y=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1333),n(1334),n(61),n(2),n(56)],void 0===(r=function(t,e,n,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function LikeFriendCommand(){return null!==t&&t.apply(this,arguments)||this}return a(LikeFriendCommand,t),LikeFriendCommand.prototype.execute=function(u){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c;return y(this,function(t){switch(t.label){case 0:e=u.friendLikesModel,n=e.sUserId,i=p.Application.dynamic.friends.getItem(n),r=i.userId+":"+n+":"+i.hash,o=p.Application.dynamic.user.screen,a=this._data.hasMyLike(e.userId),s=a?new d.UnlikeFriendAction(o,r):new l.LikeFriendAction(o,r),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,p.Application.server.send(s)];case 2:return t.sent(),[3,4];case 3:if((c=t.sent())instanceof h.ServerError)return c.code===f.ServerErrorCode.FRIEND_IS_NOT_AVAILABLE&&(c.stopPropagation(!1),p.Application.view.show(_.GUINames.FRIEND_NOT_WORK_WINDOW)),[2];throw c;case 4:return e.dynamic.update({count:e.dynamic.count+(a?-1:1)}),[2]}})})},LikeFriendCommand}(n.CommandBase);e.LikeFriendCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(433)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function LikeFriendAction(t,e){var n=i.call(this,t,e)||this;return n.action="like",n}return a(LikeFriendAction,i),LikeFriendAction}(n.LikeBaseFriendAction);e.LikeFriendAction=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(433)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function UnlikeFriendAction(t,e){var n=i.call(this,t,e)||this;return n.action="unlike",n}return a(UnlikeFriendAction,i),UnlikeFriendAction}(n.LikeBaseFriendAction);e.UnlikeFriendAction=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function GuestsLikesContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(GuestsLikesContainerMediator,e),GuestsLikesContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.child("likesCountLabel").text=this._mapData.count.toString()},GuestsLikesContainerMediator}(n.DisplayObjectContainerMediator);e.GuestsLikesContainerMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function FriendsLikesWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return a(FriendsLikesWindowMediator,e),FriendsLikesWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.getChildren(),this.setParams()},FriendsLikesWindowMediator.prototype.getChildren=function(){this._heartLabel=this.child("heartLabel"),this._allLikesLabel=this.child("allLikesLabel"),this._gameLikesLabel=this.child("gameLikesLabel"),this._friendsLikesLabel=this.child("friendsLikesLabel"),this._noLikesLabel=this.child("noLikesLabel"),this._list=this.child("friendsList")},FriendsLikesWindowMediator.prototype.setParams=function(){this._heartLabel.text=o.Application.model.gladeDuel.currentScreenRating+"%",this._allLikesLabel.text=this._mapData.getCount().toString(),this._gameLikesLabel.text=this._mapData.getDuelLikes().toString(),this._friendsLikesLabel.text=this._mapData.getFriendsLikes().toString();for(var t=o.Application.dynamic.friends,e=0,n=this._mapData.getFriendList().items;e<n.length;e++){var i=n[e],r=t.getItem(i.sUserId.toString());r&&this._list.addItem(r)}this._noLikesLabel.visible=0===this._list.items.length},FriendsLikesWindowMediator}(n.DisplayObjectContainerMediator);e.FriendsLikesWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(40),n(16)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function FriendsLikesListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return s(FriendsLikesListItemMediator,e),FriendsLikesListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setParams(),this.setupFrame()},FriendsLikesListItemMediator.prototype.setParams=function(){var t=i.Application.profiles.getProfile(this._showData.sUserId,!0);this._profileRenderer=(new r.ProfileRenderer).initialize(t,this._container),this._container.currentState=this._mapData.hasMyLike(this._showData.userId)?"mutual":"no_like"},FriendsLikesListItemMediator.prototype.setupFrame=function(){var t=this.child("frame"),e=i.Application.model.ratings.getBestPlace(this._showData.sUserId),n=i.Application.model.ratings.getFrameResource(64,e);this._frameLoadableImage=new o.LoadableImage(t,n)},FriendsLikesListItemMediator.prototype.destroy=function(){this._frameLoadableImage&&this._frameLoadableImage.destroy(),this._profileRenderer.destroy(),e.prototype.destroy.call(this)},FriendsLikesListItemMediator}(n.DisplayObjectContainerMediator);e.FriendsLikesListItemMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(13),n(432),n(434)],void 0===(r=function(t,e,n,s,i,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(a){function FriendsLikesModel(t,e,n,i,r){var o=a.call(this)||this;return o.userId=t,o.sUserId=e,o.visitorState=i?c.VisitorState.GUEST:r?c.VisitorState.NPC:c.VisitorState.FRIEND,o.dynamic=o.getDynamic(n),o.dynamic&&o.dynamic.addEventListener(s.BaseDataEvent.CHILDREN_CHANGED,o.onChildrenChanged.bind(o)),o}return u(FriendsLikesModel,a),FriendsLikesModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("count")&&this.dispatchEvent(new i.LikesModelEvent(i.LikesModelEvent.COUNT_CHANGED))},Object.defineProperty(FriendsLikesModel.prototype,"count",{get:function(){return this.dynamic?this.dynamic.count:0},enumerable:!0,configurable:!0}),FriendsLikesModel.prototype.getDynamic=function(t){if(t)return t.likes.getItem(n.Application.dynamic.user.screen.toString())},FriendsLikesModel.prototype.destroy=function(){this.dynamic&&this.dynamic.removeEventListener(s.BaseDataEvent.CHILDREN_CHANGED,this.onChildrenChanged.bind(this))},FriendsLikesModel}(uipixi.BaseEventTarget);e.FriendsLikesModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function LikesModel(){var t=e.call(this)||this;return t._dynamicData=n.Application.dynamic.user.likes,t}return a(LikesModel,e),LikesModel.prototype.getCount=function(t){return this.getDynamic(t).count},LikesModel.prototype.getFriendsLikes=function(t){var e=this.getLikeDynamicItem("friend",t);return e?e.count:0},LikesModel.prototype.getDynamic=function(t){return void 0===t&&(t=n.Application.dynamic.user.screen),this._dynamicData.getItem(t.toString())},LikesModel.prototype.getDuelLikes=function(t){var e=this.getLikeDynamicItem("gladeDuel",t);return e?e.count:0},LikesModel.prototype.getFriendList=function(t){var e=this.getLikeDynamicItem("friend",t);return e?e.list:null},LikesModel.prototype.getLikeDynamicItem=function(t,e){return this.getDynamic(e).likesByType.getItem(t)},LikesModel.prototype.hasMyLike=function(t,e){return this.getDynamic(e).likesUsersList.hasItem(t)},Object.defineProperty(LikesModel.prototype,"totalCount",{get:function(){return this._dynamicData.items.reduce(function(t,e){return t+e.count},0)},enumerable:!0,configurable:!0}),LikesModel}(uipixi.BaseEventTarget);e.LikesModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function NPCLikesContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(NPCLikesContainerMediator,e),NPCLikesContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container.visible=!1},NPCLikesContainerMediator}(n.DisplayObjectContainerMediator);e.NPCLikesContainerMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,b=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(4),n(20),n(51),n(18),n(31),n(1342),n(22),n(237),n(1344),n(2),n(1346),n(1347),n(1348),n(1349),n(1350)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var v=function(t){function GeneratorsModule(){return null!==t&&t.apply(this,arguments)||this}return b(GeneratorsModule,t),GeneratorsModule.prototype.initialize=function(t){this._config=t,i.ElkaCore.instance.promiseManager.ask(new o.RegisterSeasonLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new a.RegisterModuleLoaderPromise(this)),n.Application.operation.addAllowingRule(new s.OccurrenceBeginningLineRule("/generators"))},GeneratorsModule.prototype.mapMediators=function(){n.Application.view.mapMediator(d.GUINames.HUD+".bottomPanel.generatorsButton",h.HUDGeneratorsButtonMediator),n.Application.view.mapMediator(d.GUINames.GENERATORS_WINDOW,_.GeneratorsWindowMediator),n.Application.view.mapMediator(d.GUINames.GENERATORS_WINDOW+".objectList.*",f.GeneratorObjectMediator),n.Application.view.mapMediator(d.GUINames.GENERATORS_WINDOW+".farmList.*",y.GeneratorFarmMediator),n.Application.view.mapMediator(d.GUINames.GENERATORS_WINDOW+".buttonList.*",m.GeneratorsMenuButtonMediator)},GeneratorsModule.prototype.mapCommands=function(){u.CommandMap.map(p.GeneratorsExchangePromise,l.GeneratorsExchangeCommand)},GeneratorsModule.prototype.onPreloadModule=function(t){n.Application.model.generators=new c.GeneratorsModel(this._config),this.mapMediators(),this.mapCommands()},GeneratorsModule}(r.Module);e.GeneratorsModule=v}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1343),n(127)],void 0===(r=function(t,e,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(a){function GeneratorsModel(t){var e=a.call(this)||this;e._idGeneratorMap=new core.Map,e._generators=[],e._config=t;for(var n=0,i=s.Application.static.data.generators.generator.items;n<i.length;n++){var r=i[n],o=new c.GeneratorModel(r);e._idGeneratorMap.set(o.id,o),e._generators.push(o),o.addEventListener(u.GeneratorEvent.CHANGED,e.onGeneratorChanged.bind(e))}return e}return p(GeneratorsModel,a),GeneratorsModel.prototype.getTypes=function(){var t=["object"];return this.hasActiveGenerator("farm")&&t.push("farm"),t},GeneratorsModel.prototype.hasActiveGenerator=function(t){return this.getGeneratorsByType(t).some(function(t){return t.isActive})},GeneratorsModel.prototype.getGeneratorsByType=function(e){return this._generators.filter(function(t){return t.type===e})},Object.defineProperty(GeneratorsModel.prototype,"generators",{get:function(){return this._generators},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorsModel.prototype,"notificationAllowed",{get:function(){return!!this._generators.some(function(t){return 0<t.numResources})&&(!!this._generators.some(function(t){return t.numResources===t.maxResources})||this._generators.reduce(function(t,e){return e.timer>t?e.timer:t},0)+this._config.markerDelay<s.Application.date.currentTime)},enumerable:!0,configurable:!0}),GeneratorsModel.prototype.getById=function(t){return this._idGeneratorMap.get(t)},GeneratorsModel.prototype.onGeneratorChanged=function(t){this.dispatchEvent(new u.GeneratorEvent(u.GeneratorEvent.CHANGED,t.generator))},GeneratorsModel}(uipixi.BaseEventTarget);e.GeneratorsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(37),n(13),n(14),n(127),n(77)],void 0===(r=function(t,e,l,d,h,_,n,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(p){function GeneratorModel(t){var e,n=p.call(this)||this;n._extraItems=[],n._boost=0,n._staticData=t,n._type=n.resolveType();for(var i=l.Application.model.extraItems,r=0,o=n._staticData.boosts.boost;r<o.length;r++){var a=o[r];(e=n._extraItems).push.apply(e,i.getItemsByType(a.extraItemType))}for(var s=0,c=n._extraItems;s<c.length;s++){var u=c[s];u.hasItem()?n._boost+=u.boost:u.addEventListener(f.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,n.onExtraItemActivated.bind(n))}return n._title=l.Application.localization.localize(n._staticData.title),n._award=l.Application.award.calculate(n._staticData.exchange.awards).getByType(_.AwardType.RESOURCE),n._resource=l.Application.model.resources.get(n._award.itemId),n._dynamicData=l.Application.dynamic.user.generators.getItem(n._staticData.id),n._dynamicData?n._dynamicData.addEventListener(h.BaseDataEvent.CHANGED,n.onGeneratorChanged.bind(n)):l.Application.dynamic.user.generators.addEventListener(d.ItemCollectionEvent.ITEM_ADDED,n.onGeneratorAdded.bind(n)),n}return a(GeneratorModel,p),GeneratorModel.prototype.onExtraItemActivated=function(t){t.extraItem.removeEventListener(f.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,this.onExtraItemActivated.bind(this)),this._boost+=t.extraItem.boost},GeneratorModel.prototype.resolveType=function(){return this._staticData.farm?"farm":"object"},GeneratorModel.prototype.onGeneratorAdded=function(t){t.item.id===this._staticData.id&&(l.Application.dynamic.user.generators.removeEventListener(d.ItemCollectionEvent.ITEM_ADDED,this.onGeneratorAdded.bind(this)),this._dynamicData=t.item,this._dynamicData.addEventListener(h.BaseDataEvent.CHANGED,this.onGeneratorChanged.bind(this)),this.onGeneratorChanged())},GeneratorModel.prototype.onGeneratorChanged=function(t){this.dispatchEvent(new n.GeneratorEvent(n.GeneratorEvent.CHANGED,this))},Object.defineProperty(GeneratorModel.prototype,"isActive",{get:function(){return!!this.stageStaticData},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"numResources",{get:function(){if(!this.stageStaticData||!this._dynamicData)return 0;var t=Math.floor((l.Application.date.currentTime-this._dynamicData.timer)/this.cooldown),e=this.stageStaticData.max;return e&&e<t&&(t=e),t},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"bonus",{get:function(){return l.Application.model.beauty.getScreenBeautyById(this._staticData.beautyBoostForScreen).bonus},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"numBonusResources",{get:function(){return Math.floor(this.numResources*this.bonus*.01)},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"stageStaticData",{get:function(){return this.getStageStaticData(this.stage)},enumerable:!0,configurable:!0}),GeneratorModel.prototype.getStageStaticData=function(t){return this._staticData.stages.getItem(t)},Object.defineProperty(GeneratorModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"stage",{get:function(){return this._dynamicData?this._dynamicData.stage:0},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"award",{get:function(){return this._award},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"timer",{get:function(){return this._dynamicData?this._dynamicData.timer:0},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"maxResources",{get:function(){var t=this.stageStaticData;return t?t.max:0},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"cooldown",{get:function(){var t=this.stageStaticData;return t?t.cooldown-this._boost:0},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"nextStageCooldown",{get:function(){var t=this.getStageStaticData(this.stage+1);return t?t.cooldown-this._boost:this.cooldown},enumerable:!0,configurable:!0}),Object.defineProperty(GeneratorModel.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),GeneratorModel}(uipixi.BaseEventTarget);e.GeneratorModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1345)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function GeneratorsExchangeCommand(){return null!==t&&t.apply(this,arguments)||this}return a(GeneratorsExchangeCommand,t),GeneratorsExchangeCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=new r.GeneratorsExchangeAction(n.name),[4,i.Application.server.send(e)];case 1:return t.sent(),i.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},GeneratorsExchangeCommand}(n.CommandBase);e.GeneratorsExchangeCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function GeneratorsExchangeAction(t){var e=n.call(this)||this;return e.controller="generator",e.action="exchange",e.input=new i.ActionInput({name:t}),e.output=new o,e}return a(GeneratorsExchangeAction,n),GeneratorsExchangeAction}(n.Action);e.GeneratorsExchangeAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){t=t.data,this.award=t.award,this.awardBase=t.awardBase,this.bonusAward=t.bonusAward},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0),n(45),n(2),n(127),n(8)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=r.TIME.MS_IN_MINUTE,u=function(e){function HUDGeneratorsButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return p(HUDGeneratorsButtonMediator,e),HUDGeneratorsButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._marker=this._button.getChildByName("markerImage"),this._intervalId=i.Application.date.callProcessor.repeatCall(this.checkTimer.bind(this),c),this.checkTimer(),this.registerListener(i.Application.model.generators,a.GeneratorEvent.CHANGED,this.checkTimer.bind(this))},HUDGeneratorsButtonMediator.prototype.checkTimer=function(t){this._marker.visible=i.Application.model.generators.notificationAllowed},HUDGeneratorsButtonMediator.prototype.onButton=function(t){i.Application.view.show(o.GUINames.GENERATORS_WINDOW,new s.ViewContext("object"))},HUDGeneratorsButtonMediator.prototype.destroy=function(){i.Application.date.callProcessor.deleteCall(this._intervalId),e.prototype.destroy.call(this)},HUDGeneratorsButtonMediator}(n.SimpleButtonMediator);e.HUDGeneratorsButtonMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2)],void 0===(r=function(t,e,n,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=uipixi.ToggleButtonEvent,i=function(c){function GeneratorsWindowMediator(){return null!==c&&c.apply(this,arguments)||this}return a(GeneratorsWindowMediator,c),GeneratorsWindowMediator.prototype.initialize=function(t){c.prototype.initialize.call(this,t);var e=u.Application.model.generators;this.child("objectList").addItems(e.getGeneratorsByType("object")),this.child("farmList").addItems(e.getGeneratorsByType("farm"));var n=e.getTypes();if(1<n.length){var i=this.child("buttonList");i.addItems(n);for(var r=0,o=i.items;r<o.length;r++){var a=o[r],s=a.displayObject;a.data===this._showData&&s.select(),this.registerListener(s,d.SELECTED,this.onMenuItemSelected.bind(this,a.data))}}this._container.currentState=this._showData,u.Application.tooltip.addTooltip(this.child("tooltipButton"),p.TooltipAnchor.Bottom,l.GUINames.TEXT_TOOLTIP,{text:"GENERATOR_HELP"})},GeneratorsWindowMediator.prototype.onMenuItemSelected=function(t){this._container.currentState=t},GeneratorsWindowMediator}(n.DisplayObjectContainerMediator);e.GeneratorsWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(15),n(4),n(237),n(0),n(29),n(38),n(127),n(30)],void 0===(r=function(t,e,n,i,s,c,u,r,o,a,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,d=function(e){function GeneratorObjectMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return h(GeneratorObjectMediator,e),GeneratorObjectMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.child("generatorName").text=this._showData.title,this._exchangeButton=this.child("exchangeButton"),this._speedLabel=this.child("countLabelSpeed"),this._totalLabel=this.child("countLabelTotal"),this._bonusLabel=this.child("countLabelBonus"),this._countLabel=this.child("countLabel"),this._oneLabel=this.child("oneLabel"),this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.award,this._container,{iconId:64}),this.setupIcons(),this.child("infoContainer").buttonMode=!0,this.registerListener(this._exchangeButton,l.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this.child("infoButton"),l.POINTER_TAP,this.onInfo.bind(this,"info")),this.registerListener(this.child("infoContainer"),l.POINTER_TAP,this.onInfo.bind(this,"main")),this.registerListener(this._showData,a.GeneratorEvent.CHANGED,this.onGeneratorChanged.bind(this)),this.onGeneratorChanged(),this._updateIntervalId=u.Application.date.callProcessor.repeatCall(this.onGeneratorChanged.bind(this),GeneratorObjectMediator.UPDATE_INTERVAL)},GeneratorObjectMediator.prototype.setupIcons=function(){var t=o.PriceAwardUtils.getResourceResourceId(this._showData.award.itemId,"48");this.child("iconImageSpeed").resource=t,this.child("iconImageTotal").resource=t,this.child("iconImageBonus").resource=t},GeneratorObjectMediator.prototype.onGeneratorChanged=function(t){var e=this._showData.numResources,n=this._showData.bonus,i=this._showData.numBonusResources;this._oneLabel.text=this._showData.isActive?"1":"0",this._countLabel.text=e+i+"",this._exchangeButton.enabled=0<e,this._speedLabel.text=u.Application.localization.localize("GENERATOR_SPEED",{time:r.DateUtils.timeToString(this._showData.cooldown)}),this._totalLabel.text=e+"/"+this._showData.maxResources,this._bonusLabel.text=i+" ("+n+"%)"},GeneratorObjectMediator.prototype.onInfo=function(t,e){var n=u.Application.animation.animate(this._container,"generatorItemFlip",{state:t});this._animations.push(n)},GeneratorObjectMediator.prototype.onTap=function(t){return _(this,void 0,void 0,function(){var e,n,i,r,o,a;return f(this,function(t){switch(t.label){case 0:return[4,s.ElkaCore.instance.promiseManager.ask(new c.GeneratorsExchangePromise(this._showData.id))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(n=this.viewHandle.viewContext.node.root.handle.displayObject,i=this.child("startPoint"),r=this.child("middleOffset"),o=p.AnimationUtils.flyResourceToHud(this._showData.resource.id,n,i,r),(e=this._animations).push.apply(e,o),(a=u.Application.animation.animate(this._container,"generatorItemTap")).start(),this._animations.push(a),[2])}})})},GeneratorObjectMediator.prototype.destroy=function(){u.Application.date.callProcessor.deleteCall(this._updateIntervalId),this._awardRenderer.destroy(),this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},GeneratorObjectMediator.UPDATE_INTERVAL=1e3,GeneratorObjectMediator}(n.DisplayObjectContainerMediator);e.GeneratorObjectMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(15),n(4),n(237),n(0),n(127),n(30)],void 0===(r=function(t,e,n,i,a,s,r,o,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function GeneratorFarmMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return l(GeneratorFarmMediator,e),GeneratorFarmMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.child("generatorName").text=this._showData.title,this._exchangeButton=this.child("exchangeButton"),this._countLabel=this.child("countLabel"),this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.award,this._container,{iconId:64}),this.registerListener(this._exchangeButton,u.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._showData,o.GeneratorEvent.CHANGED,this.onGeneratorChanged.bind(this)),this.onGeneratorChanged(),this._updateIntervalId=r.Application.date.callProcessor.repeatCall(this.onGeneratorChanged.bind(this),GeneratorFarmMediator.UPDATE_INTERVAL)},GeneratorFarmMediator.prototype.onGeneratorChanged=function(t){var e=this._showData.numResources;this._countLabel.text=e.toString(),this._exchangeButton.enabled=0<e},GeneratorFarmMediator.prototype.onTap=function(t){return d(this,void 0,void 0,function(){var e,n,i,r,o;return h(this,function(t){switch(t.label){case 0:return[4,a.ElkaCore.instance.promiseManager.ask(new s.GeneratorsExchangePromise(this._showData.id))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(n=this.viewHandle.viewContext.node.root.handle.displayObject,i=this.child("startPoint"),r=this.child("middleOffset"),o=c.AnimationUtils.flyResourceToHud(this._showData.resource.id,n,i,r),(e=this._animations).push.apply(e,o),[2])}})})},GeneratorFarmMediator.prototype.destroy=function(){r.Application.date.callProcessor.deleteCall(this._updateIntervalId),this._awardRenderer.destroy(),this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},GeneratorFarmMediator.UPDATE_INTERVAL=1e3,GeneratorFarmMediator}(n.DisplayObjectContainerMediator);e.GeneratorFarmMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,l){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0});var o=function(p){function GeneratorsMenuButtonMediator(){return null!==p&&p.apply(this,arguments)||this}return a(GeneratorsMenuButtonMediator,p),GeneratorsMenuButtonMediator.prototype.initialize=function(t){p.prototype.initialize.call(this,t);for(var e=0,n=this.children("label");e<n.length;e++){var i=n[e],r=GeneratorsMenuButtonMediator.typeKeyMap[this._showData];i.text=l.Application.localization.localize(r)}for(var o=l.Application.dynamic.user.screen.toString(),a=0,s=this.children("iconImage");a<s.length;a++){var c=s[a],u=GeneratorsMenuButtonMediator.imageTypeKeyMap[this._showData];c.resource=u+("farm"===this._showData?"":o)}},GeneratorsMenuButtonMediator.typeKeyMap=((i={}).object="GENERATOR_MENU_BUTTON_SCREEN_1",i.farm="GENERATOR_MENU_BUTTON_FARM",i),GeneratorsMenuButtonMediator.imageTypeKeyMap=((r={}).object="icons_reward/icon_reward_season_",r.farm="uikit/icon_farm",r),GeneratorsMenuButtonMediator}(n.DisplayObjectContainerMediator);e.GeneratorsMenuButtonMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,S=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(0),n(1352),n(2),n(1353),n(22),n(4),n(18),n(1354),n(1356),n(435),n(1357),n(1359),n(31),n(1360),n(1362),n(436),n(1363),n(146),n(62)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O=function(t){function BeautyModule(){return null!==t&&t.apply(this,arguments)||this}return S(BeautyModule,t),BeautyModule.prototype.initialize=function(t){c.ElkaCore.instance.promiseManager.ask(new u.RegisterModuleLoaderPromise(this)),i.Application.operation.addAllowingRule(new f.OccurrenceBeginningLineRule("/beauty"))},BeautyModule.prototype.mapCommands=function(){s.CommandMap.map(d.BeautyStageUpPromise,h.BeautyStageUpCommand,{awardWindowResources:this.config.awardWindowResources}),s.CommandMap.map(v.ShowBeautyOnStartPromise,b.ShowBeautyOnStartCommand)},BeautyModule.prototype.mapSelfMediators=function(){i.Application.view.mapMediator("*.beautyHUDBar",a.HUDBeautyPanel),i.Application.view.mapMediator("*.*.beautyHUDBar",a.HUDBeautyPanel),i.Application.view.mapMediator(""+o.GUINames.BEAUTY_WINDOW,r.BeautyWindowMediator),i.Application.view.mapMediator(o.GUINames.BEAUTY_WINDOW+".hasNextStageContainer.awardsList.*",l.BeautyAwardItemMediator),i.Application.view.mapMediator(""+o.GUINames.BEAUTY_AWARD_WINDOW,_.BeautyAwardWindowMediator),i.Application.view.mapMediator(o.GUINames.BEAUTY_AWARD_WINDOW+".awardsList.*",g.CommonAnimatedAwardListItemMediator),i.Application.view.mapMediator(""+o.GUINames.BEAUTY_INFO_WINDOW,y.BeautyInfoWindowMediator),i.Application.view.mapMediator(o.GUINames.BEAUTY_INFO_WINDOW+".list.*",m.BeautyInfoItemMediator),i.Application.view.mapMediator(""+o.GUINames.BEAUTY_INFO_WINDOW,w.SimplePopupAnimationMediator)},BeautyModule.prototype.onPreloadModule=function(t){this.mapSelfMediators(),this.mapCommands(),i.Application.model.beauty=new p.BeautyModel(i.Application.dynamic.user.beauty,i.Application.static.data.beauty,i.Application.dynamic.user)},BeautyModule}(n.Module);e.BeautyModule=O}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(238),n(435),n(4),n(2),n(8),n(1),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=uipixi.GestureEvent,l=function(e){function BeautyWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return d(BeautyWindowMediator,e),BeautyWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._beautyItem=n.Application.model.beauty.currentScreenBeauty,this.initComponents(),this.setupComponents()},BeautyWindowMediator.prototype.initComponents=function(){this._stageLabel=this.child("stageLabel"),this._progressLabel=this.child("progressLabel"),this._bonusLabel=this.child("bonusLabel"),this._nextStageLabel=this.child("nextStageLabel"),this._awardsList=this.child("awardsList"),this._beautyBar=this.child("beautyBar"),this._hasNextStageContainer=this.child("hasNextStageContainer"),this._maxStageBeautyLabel=this.child("maxStageBeautyLabel"),this._getButton=this.child("getButton"),this._infoButton=this.child("infoButton")},BeautyWindowMediator.prototype.setupComponents=function(){this.registerListener(this._getButton,p.POINTER_TAP,this.onTapGetAward.bind(this)),this.registerListener(this._infoButton,p.POINTER_TAP,this.onClickInfo.bind(this)),this.registerListener(this._beautyItem,i.BeautyModelEvent.CHANGED,this.onBeautyChanged.bind(this)),this.registerListener(this._beautyItem,i.BeautyModelEvent.STAGE_UP,this.onBeautyStageUp.bind(this)),this.setupData(),this.setupHeaderImages()},BeautyWindowMediator.prototype.setupHeaderImages=function(){var t=this.child("headerImage"),e=this.child("headerCrownImage");this._loadableImages=[new u.LoadableImage(t,t.resource),new u.LoadableImage(e,e.resource,!1)]},BeautyWindowMediator.prototype.onClickInfo=function(){n.Application.view.show(a.GUINames.BEAUTY_INFO_WINDOW,new s.ViewContext(this._beautyItem))},BeautyWindowMediator.prototype.onBeautyChanged=function(){this.updateProgress()},BeautyWindowMediator.prototype.onBeautyStageUp=function(){this.updateLabels(),this.updateProgress(),this.updateHasNextStageContainer()},BeautyWindowMediator.prototype.onTapGetAward=function(){o.ElkaCore.instance.promiseManager.ask(new r.BeautyStageUpPromise(this._beautyItem))},BeautyWindowMediator.prototype.updateLabels=function(){this._stageLabel.text=this._beautyItem.stage.toString(),this._bonusLabel.text=this._beautyItem.bonus+"\n%"},BeautyWindowMediator.prototype.updateProgress=function(){if(this._beautyBar.progress=this._beautyItem.progress,this._beautyItem.hasNextStage){this._nextStageLabel.text=(this._beautyItem.stage+1).toString();var t=this._beautyItem.nextStageStaticData.beauty-this._beautyItem.total;this._progressLabel.text=Math.max(0,t).toString()}else this._nextStageLabel.text=this._beautyItem.stage.toString(),this._progressLabel.text=n.Application.localization.localize("BEAUTY_WINDOW_BAR_MAX_STAGE_TITLE")},BeautyWindowMediator.prototype.updateHasNextStageContainer=function(){this._beautyItem.hasNextStage?(this._hasNextStageContainer.visible=!0,this._maxStageBeautyLabel.visible=!1,this.updateAwardList()):(this._hasNextStageContainer.visible=!1,this._maxStageBeautyLabel.visible=!0),this._getButton.enabled=this._beautyItem.canStageUp},BeautyWindowMediator.prototype.setupData=function(){this.updateLabels(),this.updateProgress(),this.updateHasNextStageContainer()},BeautyWindowMediator.prototype.updateAwardList=function(){this._awardsList.removeAllItems(),this._awardsList.addItems(this._beautyItem.nextStageAwards)},BeautyWindowMediator.prototype.destroy=function(){this._loadableImages.forEach(function(t){return t.destroy()}),e.prototype.destroy.call(this)},BeautyWindowMediator}(c.DisplayObjectContainerMediator);e.BeautyWindowMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(238),n(1),n(2)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=function(e){function HUDBeautyPanel(){return null!==e&&e.apply(this,arguments)||this}return c(HUDBeautyPanel,e),HUDBeautyPanel.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._currentBeautyModel=n.Application.model.beauty.currentScreenBeauty,this.initComponents(),this.setupComponents()},HUDBeautyPanel.prototype.initComponents=function(){this._progressBar=this.child("progressBar"),this._valueLabel=this.child("valueLabel"),this._markerImage=this.child("markerImage")},HUDBeautyPanel.prototype.setupComponents=function(){this._container.buttonMode=!0,this.registerListener(this._currentBeautyModel,i.BeautyModelEvent.STAGE_UP,this.onStageUp.bind(this)),this.registerListener(this._currentBeautyModel,i.BeautyModelEvent.PROGRESS,this.onProgress.bind(this)),this.registerListener(this._container,a.POINTER_TAP,this.onTap.bind(this)),this.updateAll()},HUDBeautyPanel.prototype.onStageUp=function(){this.stopBarAnimation(),this.updateAll()},HUDBeautyPanel.prototype.updateAll=function(){this._progressBar.progress=this._currentBeautyModel.progress,this._valueLabel.text=this._currentBeautyModel.stage.toString(),this.updateMarker()},HUDBeautyPanel.prototype.updateMarker=function(){this._markerImage.visible=this._currentBeautyModel.canStageUp},HUDBeautyPanel.prototype.onProgress=function(){var t=this;this.stopBarAnimation(),this._progressBar.progress!==this._currentBeautyModel.progress&&(this._animation=n.Application.animation.animate(this._progressBar,"beautyProgressBar",{progress:this._currentBeautyModel.progress,onComplete:function(){return t.updateMarker()}}))},HUDBeautyPanel.prototype.onTap=function(){n.Application.view.show(o.GUINames.BEAUTY_WINDOW)},HUDBeautyPanel.prototype.stopBarAnimation=function(){this._animation&&(this._animation.stop(),this._animation=void 0)},HUDBeautyPanel.prototype.destroy=function(){this.stopBarAnimation(),e.prototype.destroy.call(this)},HUDBeautyPanel}(r.DisplayObjectContainerMediator);e.HUDBeautyPanel=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1355)],void 0===(r=function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BeautyModel(t,e,n){this._screens=new core.Map,this._all=[],this._user=n;for(var i=0,r=e.screen.items;i<r.length;i++){var o=r[i],a=new s.BeautyScreenModel(t.getItem(o.id.toString()),o);this._screens.set(o.id,a),this._all.push(a)}}return Object.defineProperty(BeautyModel.prototype,"all",{get:function(){return this._all},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyModel.prototype,"screens",{get:function(){return this._screens},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyModel.prototype,"currentScreenBeauty",{get:function(){return this._screens.get(this._user.screen)},enumerable:!0,configurable:!0}),BeautyModel.prototype.getScreenBeautyById=function(t){return this._screens.get(t)},BeautyModel}();e.BeautyModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(54),n(14),n(13),n(238),n(370),n(0)],void 0===(r=function(t,e,n,r,o,a,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function BeautyScreenModel(t,e){var n=i.call(this)||this;return n._fakeBeauty=0,n._dynamicData=t,n._staticData=e,n._dynamicData.addEventListener(o.BaseDataEvent.CHANGED,n.onDynamicDataUpdated.bind(n)),n}return s(BeautyScreenModel,i),BeautyScreenModel.prototype.onDynamicDataUpdated=function(){this.dispatchEvent(new a.BeautyModelEvent(a.BeautyModelEvent.CHANGED))},Object.defineProperty(BeautyScreenModel.prototype,"screen",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),BeautyScreenModel.prototype.getSource=function(t){var e=this._dynamicData.source.getItem(t);return e?e.value:0},Object.defineProperty(BeautyScreenModel.prototype,"total",{get:function(){var t=this._dynamicData.total;return t+=this._fakeBeauty},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"fakeBeauty",{get:function(){return this._fakeBeauty},set:function(t){this._fakeBeauty!==t&&(this._fakeBeauty=t,this.dispatchEvent(new a.BeautyModelEvent(a.BeautyModelEvent.CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"stage",{get:function(){return this._dynamicData.stage?this._dynamicData.stage:0},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"bonus",{get:function(){return this._staticData.stage.getItem(this.stage).bonus},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"progress",{get:function(){if(this.total<this.stageStaticData.beauty)return 0;if(!this.nextStageStaticData)return 1;var t=this.nextStageStaticData.beauty-this.stageStaticData.beauty,e=this.total-this.stageStaticData.beauty;return t<e?1:e/t},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"hasNextStage",{get:function(){return!!this.nextStageStaticData},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"stageStaticData",{get:function(){return this._staticData.stage.getItem(this.stage)},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"nextStageStaticData",{get:function(){return this._staticData.stage.getItem(this.stage+1)},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"prevStageStaticData",{get:function(){return this._staticData.stage.getItem(this.stage-1)},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"nextStageAwards",{get:function(){for(var t=this.getAwards(this.nextStageStaticData.awards),e=[],n=0,i=t=t.filter(function(t){return!t.ref});n<i.length;n++){for(var r=i[n],o=!1,a=0,s=e;a<s.length;a++){if((c=s[a]).type===r.type&&c.itemId===r.itemId){c.minMaxFromValue(p.Application.calculator.calculate(r.value,null,!0)),o=!0;break}}if(!o){var c=new u.ObjectStageAward(r.type,r.itemId,p.Application.calculator.calculate(r.value,null,!0));e.push(c)}}return e.push(new u.ObjectStageAward(this.nextStageBonusAward.type,this.nextStageBonusAward.itemId,p.Application.calculator.calculate(this.nextStageBonusAward.value.toString(),null,!0))),e},enumerable:!0,configurable:!0}),BeautyScreenModel.prototype.getAwards=function(t){var e=this,n=[];return p.Application.requirements.check(t.requirements)&&(n=(n=n.concat(t.award.map(function(t){return t}))).concat.apply(n,t.awards.map(function(t){return e.getAwards(t)}))),n},Object.defineProperty(BeautyScreenModel.prototype,"nextStageBonusAward",{get:function(){return new n.CalculatedAwardItem(r.AwardType.BEAUTY_BONUS,this.nextStageStaticData.bonus-this.stageStaticData.bonus)},enumerable:!0,configurable:!0}),Object.defineProperty(BeautyScreenModel.prototype,"canStageUp",{get:function(){return!!this.nextStageStaticData&&this.total>=this.nextStageStaticData.beauty},enumerable:!0,configurable:!0}),BeautyScreenModel.prototype.updateBeautyProgress=function(){this.dispatchEvent(new a.BeautyModelEvent(a.BeautyModelEvent.PROGRESS))},BeautyScreenModel.prototype.updateStage=function(){this.dispatchEvent(new a.BeautyModelEvent(a.BeautyModelEvent.STAGE_UP))},BeautyScreenModel}(uipixi.BaseEventTarget);e.BeautyScreenModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(15),n(1),n(21)],void 0===(r=function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function BeautyAwardItemMediator(){return null!==n&&n.apply(this,arguments)||this}return a(BeautyAwardItemMediator,n),BeautyAwardItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this.child("countLabel");this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.toCalculated(),this._container,{iconId:64,tooltip:r.TooltipAnchor.Top,countLabel:!this._showData.hasMinMax()&&e}),void 0===this._showData.value&&(e.text=this._showData.minValue+"-"+this._showData.maxValue)},BeautyAwardItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),n.prototype.destroy.call(this)},BeautyAwardItemMediator}(n.DisplayObjectContainerMediator);e.BeautyAwardItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,_=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),f=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},y=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1358),n(0),n(2),n(8),n(32),n(14),n(43),n(46)],void 0===(r=function(t,e,n,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BeautyStageUpCommand(){return null!==t&&t.apply(this,arguments)||this}return _(BeautyStageUpCommand,t),BeautyStageUpCommand.prototype.execute=function(o){return f(this,void 0,void 0,function(){var e,n,i,r;return y(this,function(t){switch(t.label){case 0:return[4,s.Application.server.send(new a.BeautyStageUpAction(o.beautyItem.screen))];case 1:return e=t.sent(),s.Application.award.accrueAwardImmediately(e.output.award),[4,s.Application.resources.getResources(this._data.awardWindowResources,!0)];case 2:return t.sent(),n=o.beautyItem.stage,(i=s.Application.award.convertObjectToCalculated(e.output.award)).add(o.beautyItem.nextStageBonusAward),s.Application.view.show(c.GUINames.BEAUTY_AWARD_WINDOW,new u.ViewContext({award:i,stage:n})),s.Application.sound.play(d.SoundName.MAP_UPGRADE_JINGLE,!1,h.SoundGroup.SOUND_GROUP_SOUND),o.beautyItem.updateStage(),s.Application.view.hideByWindowName(c.GUINames.BEAUTY_WINDOW),r=i.getAwardTypeItemId(l.AwardType.RESOURCE,"farmCrystal"),s.Application.metrics.goalStarkEvent(p.StarkEventsName.BEAUTY_UP,{lev:n,fcreward:r?r.value:0}),[2]}})})},BeautyStageUpCommand}(n.CommandBase);e.BeautyStageUpCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function BeautyStageUpAction(t){var e=n.call(this)||this;return e.action="stageUp",e.controller="beauty",e.input=new i.ActionInput({screenId:t}),e.output=new o,e}return a(BeautyStageUpAction,n),BeautyStageUpAction}(n.Action);e.BeautyStageUpAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(30),n(0),n(34)],void 0===(r=function(t,e,n,i,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,o=function(o){function BeautyAwardWindowMediator(){return null!==o&&o.apply(this,arguments)||this}return c(BeautyAwardWindowMediator,o),BeautyAwardWindowMediator.prototype.initialize=function(t){o.prototype.initialize.call(this,t),this.viewHandle.onShown.capture(),this.child("stageLabel").text=this._showData.stage.toString();for(var e=this._showData.award.awards,n=this.child("awardsList"),i=0;i<e.length;i++){var r=e[i];n.addItem({award:r,index:i})}this.setAnimation(e.length)},BeautyAwardWindowMediator.prototype.setAnimation=function(t){this._animation=i.AnimationUtils.awardWindow(this.child("captionLabel"),this.child("awardLabel"),this.child("crownContainer"),this.child("closeButton"),null,this.child("shineSpine"),.85,0,t),this.registerListener(this._animation,a.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this.registerListener(r.Application.view.ui.stage,s.POINTER_DOWN,this.onStageTap.bind(this))},BeautyAwardWindowMediator.prototype.onStageTap=function(){this.unregisterListener(r.Application.view.ui.stage,s.POINTER_DOWN,this.onStageTap.bind(this)),this._animation.stop(!0)},BeautyAwardWindowMediator.prototype.onAnimationComplete=function(){this.viewHandle.onShown.complete()},BeautyAwardWindowMediator.prototype.destroy=function(){this._animation.stop(),o.prototype.destroy.call(this)},BeautyAwardWindowMediator}(n.DisplayObjectContainerMediator);e.BeautyAwardWindowMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1361),n(0),n(1)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function BeautyInfoWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return a(BeautyInfoWindowMediator,e),BeautyInfoWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._list=this.child("list"),this.updateList()},BeautyInfoWindowMediator.prototype.updateList=function(){var t=[];t.push({name:"BEAUTY_INFO_WINDOW_ITEM_1",value:this._showData.getSource(n.BeautySourceType.EXTRA_ITEMS)+this._showData.getSource(n.BeautySourceType.TOYS),tooltip:"BEAUTY_INFO_WINDOW_ITEM_1_TOOLTIP"}),t.push({name:"BEAUTY_INFO_WINDOW_ITEM_2",value:this._showData.getSource(n.BeautySourceType.OBJECTS),tooltip:"BEAUTY_INFO_WINDOW_ITEM_2_TOOLTIP"});var e=i.Application.dynamic.user.screen;t.push({name:"BEAUTY_INFO_WINDOW_ITEM_3_"+e,value:this._showData.getSource(n.BeautySourceType.DESIGN_OBJECT),tooltip:"BEAUTY_INFO_WINDOW_ITEM_3_"+e+"_TOOLTIP"}),t.push({name:"BEAUTY_INFO_WINDOW_ITEM_4",value:this._showData.getSource(n.BeautySourceType.LIKES),tooltip:"BEAUTY_INFO_WINDOW_ITEM_4_TOOLTIP"}),t.push({name:"BEAUTY_INFO_WINDOW_ITEM_5",value:this._showData.getSource(n.BeautySourceType.CLAN),tooltip:"BEAUTY_INFO_WINDOW_ITEM_5_TOOLTIP",disabled:!0}),this._list.addItems(t)},BeautyInfoWindowMediator}(r.DisplayObjectContainerMediator);e.BeautyInfoWindowMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.BeautySourceType||(e.BeautySourceType={})).OBJECTS="objects",n.DESIGN_OBJECT="designObject",n.TOYS="toy",n.LIKES="like",n.EXTRA_ITEMS="extraItem",n.CLAN="clan"}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(2),n(21)],void 0===(r=function(t,e,o,n,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function BeautyInfoItemMediator(){return null!==r&&r.apply(this,arguments)||this}return c(BeautyInfoItemMediator,r),BeautyInfoItemMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t);var e=this.child("itemTitle"),n=this.child("itemValue");e.text=o.Application.localization.localize(this._showData.name),n.text=this._showData.value.toString();var i=this.child("infoButton");(o.Application.tooltip.addTooltip(i,s.TooltipAnchor.Left,a.GUINames.TEXT_TOOLTIP,{text:this._showData.tooltip}),this._showData.disabled)&&(e.alpha=.5,n.alpha=.5,this.child("bg").alpha=.5)},BeautyInfoItemMediator}(n.DisplayObjectContainerMediator);e.BeautyInfoItemMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function ShowBeautyOnStartCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ShowBeautyOnStartCommand,t),ShowBeautyOnStartCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return i.Application.model.beauty.currentScreenBeauty.canStageUp?[4,i.Application.view.show(r.GUINames.BEAUTY_WINDOW).onClose]:[3,2];case 1:return t.sent(),e.resolve({shown:!0}),[2];case 2:return e.resolve({shown:!1}),[2]}})})},ShowBeautyOnStartCommand}(n.CommandBase);e.ShowBeautyOnStartCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(0),n(2),n(1365),n(1366),n(1367),n(1368),n(1370),n(22),n(228)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=function(t){function ShopsModule(){return null!==t&&t.apply(this,arguments)||this}return f(ShopsModule,t),ShopsModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this))},ShopsModule.prototype.onPreloadModule=function(t){this._model=new p.ShopsModel(o.Application.static.data.shops.shop,o.Application.static.data.promos.promo),o.Application.view.mapMediator(a.GUINames.SHOP_WINDOW,s.ShopWindowMediator,this._model),o.Application.view.mapMediator(a.GUINames.SHOP_WINDOW+".shop.shopItemList.*",c.ShopListItemMediator),o.Application.view.mapMediator(a.GUINames.SHOP_WINDOW+".buttonList.*",u.ShopTabButtonMediator,this._model),d.CommandMap.map(h.ShowShopPromise,l.ShowShopCommand,this._model)},ShopsModule}(n.Module);e.ShopsModule=_}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(239)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function ShopWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ShopWindowMediator,e),ShopWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._shopsData=this._mapData,this.getChildren(),this.createShops(),this.setShop(),this.registerListener(this._shopsData,r.ShopsModelEvent.CURRENT_SHOP_CHANGED,this.setShop.bind(this))},ShopWindowMediator.prototype.getChildren=function(){this._shopTitle=this.child("shopTitle"),this._list=this.child("shopItemList"),this._buttonList=this.child("buttonList")},ShopWindowMediator.prototype.createShops=function(){this._buttonList.addItems(this._shopsData.shops)},ShopWindowMediator.prototype.setShop=function(){this._shopTitle.text=i.Application.localization.localize(this._shopsData.selectedShop.promoStaticData.title),this.setOffers()},ShopWindowMediator.prototype.setOffers=function(){this._list.removeAllItems();for(var t=this._shopsData.selectedShop,e=0,n=t.offers;e<n.length;e++){var i=n[e];this._list.addItem({shopModel:t,offer:i})}},ShopWindowMediator}(n.DisplayObjectContainerMediator);e.ShopWindowMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,y=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),m=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},v=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(15),n(0),n(14),n(16),n(437),n(30),n(68),n(49),n(2),n(75)],void 0===(r=function(t,e,n,i,r,c,u,o,a,s,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=uipixi.GestureEvent,_=uipixi.WindowsManagerEvent,f=function(n){function ShopListItemMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._awardRenderer=new i.AwardRenderer,t._priceRenderer=new i.AwardRenderer,t._animations=[],t}return y(ShopListItemMediator,n),ShopListItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=r.Application.award.calculate(this._showData.offer.awards);this._prices=r.Application.price.calculate(this._showData.offer.prices),this._backgroundContainer=this.child("backgroundContainer"),this.setParams(e),this.setBestOffer(),this.setAward(e),this.setPrice(),this._itemId=e.getByType(c.AwardType.RESOURCE).itemId,this._container.buttonMode=!0,this.registerListener(this._container,h.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._showData.shopModel,o.ShopModelEvent.BEST_OFFER_CHANGED,this.setBestOffer.bind(this)),this._showAnimation=r.Application.animation.animate(this._container,"showShopOrPromoItem",{delay:Math.floor(1.2*(this._container.parent.getChildIndex(this._container)+1)*d.AnimationService.FPS)})},ShopListItemMediator.prototype.setParams=function(t){var e=t.hasType(c.AwardType.ROULETTE);if(this._container.currentState=e?"roulette":0<this._showData.offer.view.bonus?"bonus":"default","roulette"===this._container.currentState){var n=this.child("rouletteCountLabel"),i=this.child("rouletteImage"),r=t.getByType(c.AwardType.ROULETTE);n.text="x"+r.value,this._rouletteLoadableImage=new u.LoadableImage(i,i.resource,!1)}var o=this._showData.offer.view;if("bonus"===this._container.currentState){var a=this.child("bonusCountLabel"),s=this.child("bonusItemLabel");a.text=o.bonus+"%",s.text="+"+o.bonusValue}this.child("itemCountLabel").text=o.baseValue.toString(),this._loadableImage=new u.LoadableImage(this.child("itemImage"),o.icon)},ShopListItemMediator.prototype.setAward=function(t){var e=t.getByType(c.AwardType.RESOURCE);this._awardRenderer.initialize(e,this._container,{iconId:64,iconImage:this.child("resourceImage"),titleLabel:!1,countLabel:!1,fit:!0})},ShopListItemMediator.prototype.setPrice=function(){this._priceRenderer.initialize(this._prices.prices[0],this.child("shopPriceItemRenderer"),{iconId:64,fit:!0})},ShopListItemMediator.prototype.onTap=function(){return m(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return this._prices.hasPriceTypeItemId(p.PriceType.RESOURCE,"cash")?[4,r.Application.confirm.show(s.ConfirmType.Buy,{prices:this._prices})]:[3,2];case 1:if(e=t.sent(),this._cancellationToken.requested||!e)return[2];t.label=2;case 2:return[4,r.Application.payment.directBuy(this._showData.shopModel.promoStaticData.id,this._showData.offer.id)];case 3:return n=t.sent(),this._cancellationToken.requested||!n.success||n.asyncPayment?[2]:(this.isResourcesReadyToFly()?this.flyResources():this.registerListener(r.Application.view.ui.windows,_.WINDOW_HIDED,this.onWindowHided.bind(this)),[2])}})})},ShopListItemMediator.prototype.flyResources=function(){var t,e=this.viewHandle.viewContext.node.root.handle.displayObject,n=this.child("startPoint"),i=this.child("middleOffset"),r=a.AnimationUtils.flyResourceToHud(this._itemId,e,n,i);(t=this._animations).push.apply(t,r)},ShopListItemMediator.prototype.onWindowHided=function(){this.isResourcesReadyToFly()&&(this.unregisterListener(r.Application.view.ui.windows,_.WINDOW_HIDED,this.onWindowHided.bind(this)),this.flyResources())},ShopListItemMediator.prototype.isResourcesReadyToFly=function(){return![l.GUINames.ANY_ROULETTE_WINDOW,l.GUINames.AWARDS_WINDOW].some(function(t){return r.Application.view.isShowed(t)})},ShopListItemMediator.prototype.setBestOffer=function(){this._backgroundContainer.currentState=this._showData.shopModel.bestOffer===this._showData.offer?"goodChoice":"default"},ShopListItemMediator.prototype.destroy=function(){this._showAnimation.stop(),this._awardRenderer.destroy(),this._priceRenderer.destroy(),this._loadableImage.destroy(),this._rouletteLoadableImage&&this._rouletteLoadableImage.destroy(),this._animations.forEach(function(t){return t.stop()}),n.prototype.destroy.call(this)},ShopListItemMediator}(n.DisplayObjectContainerMediator);e.ShopListItemMediator=f}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(38),n(0),n(239)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.ToggleButtonEvent,s=function(e){function ShopTabButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return c(ShopTabButtonMediator,e),ShopTabButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._toggleButton=this._container,this._shopModel=this._showData,this._shopsModel=this._mapData,this.setParams(),this.registerListener(this._toggleButton,a.SELECTED,this.onTabChanged.bind(this)),this.registerListener(this._shopsModel,o.ShopsModelEvent.CURRENT_SHOP_CHANGED,this.onShopChanged.bind(this))},ShopTabButtonMediator.prototype.setParams=function(){var t=i.PriceAwardUtils.getResourceString(this._shopModel.resourceId,"name");t=r.Application.localization.localize(t);var e=i.PriceAwardUtils.getResourceResourceId(this._shopModel.resourceId,"64");this.child("label").text=t,this.child("iconImage").resource=e,this.child("labelSelected").text=t,this.child("iconImageSelected").resource=e,this.isCurrentShopSelected()&&this._toggleButton.select(!0)},ShopTabButtonMediator.prototype.isCurrentShopSelected=function(){return this._shopModel===this._shopsModel.selectedShop},ShopTabButtonMediator.prototype.onTabChanged=function(){this._shopsModel.selectedShop=this._shopModel},ShopTabButtonMediator.prototype.onShopChanged=function(){!this._toggleButton.selected&&this.isCurrentShopSelected()&&this._toggleButton.select(!0)},ShopTabButtonMediator}(n.DisplayObjectContainerMediator);e.ShopTabButtonMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1369),n(239)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function ShopsModel(t,e){var n=i.call(this)||this;return n._shopsStaticData=t,n._promosStaticData=e,n.init(),n}return a(ShopsModel,i),ShopsModel.prototype.init=function(){var e=this;this._shops=[],this._shopsStaticData.forEach(function(t){return e.addShops(t)})},ShopsModel.prototype.addShops=function(t){var e=this._promosStaticData.getItem(t.promoId),n=new r.ShopModel(e,t.shopType);this._shops.push(n)},Object.defineProperty(ShopsModel.prototype,"shops",{get:function(){return this._shops},enumerable:!0,configurable:!0}),Object.defineProperty(ShopsModel.prototype,"selectedShop",{get:function(){return this._selectedShop},set:function(t){t!==this._selectedShop&&(this._selectedShop=t,this.dispatchEvent(new n.ShopsModelEvent(n.ShopsModelEvent.CURRENT_SHOP_CHANGED)))},enumerable:!0,configurable:!0}),ShopsModel.prototype.setFirstPage=function(t,e){this.selectedShop=this.findShopByResourceId(t),e&&this.selectedShop.setBestOffer(e)},ShopsModel.prototype.findShopByResourceId=function(t){for(var e=0,n=this._shops;e<n.length;e++){var i=n[e];if(i.resourceId===t)return i}},ShopsModel}(uipixi.BaseEventTarget);e.ShopsModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(14),n(437)],void 0===(r=function(t,e,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(i){function ShopModel(t,e){var n=i.call(this)||this;return n._promoStaticData=t,n._resourceId=e,n.init(),n}return a(ShopModel,i),ShopModel.prototype.init=function(){this._offers=this._promoStaticData.offers.items.filter(function(t){return u.Application.requirements.check(t.buyRequirements)})},ShopModel.prototype.setBestOffer=function(t){for(var e=void 0,n=0,i=0,r=this._offers;i<r.length;i++)for(var o=r[i],a=0,s=u.Application.award.calculate(o.awards).awards;a<s.length;a++){var c=s[a];c.equalsBy(p.AwardType.RESOURCE,this._resourceId)&&c.value>=t&&(!e||n>c.value)&&(e=o,n=c.value)}e!==this._bestOffer&&(this._bestOffer=e,this.dispatchEvent(new l.ShopModelEvent(l.ShopModelEvent.BEST_OFFER_CHANGED)))},Object.defineProperty(ShopModel.prototype,"resourceId",{get:function(){return this._resourceId},enumerable:!0,configurable:!0}),Object.defineProperty(ShopModel.prototype,"bestOffer",{get:function(){return this._bestOffer},enumerable:!0,configurable:!0}),Object.defineProperty(ShopModel.prototype,"promoStaticData",{get:function(){return this._promoStaticData},enumerable:!0,configurable:!0}),Object.defineProperty(ShopModel.prototype,"offers",{get:function(){return this._offers},enumerable:!0,configurable:!0}),ShopModel}(uipixi.BaseEventTarget);e.ShopModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function ShowShopCommand(){return null!==t&&t.apply(this,arguments)||this}return s(ShowShopCommand,t),ShowShopCommand.prototype.execute=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return this._data.setFirstPage(e.resourceId,e.notEnough),i.Application.view.isShowed(r.GUINames.SHOP_WINDOW)||i.Application.view.show(r.GUINames.SHOP_WINDOW,new o.ViewContext({resourceId:e.resourceId})),[2]})})},ShowShopCommand}(n.CommandBase);e.ShowShopCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,E=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(4),n(20),n(18),n(31),n(2),n(1372),n(1373),n(440),n(22),n(1377),n(240),n(442),n(1379),n(1381),n(1382),n(438),n(1384),n(443),n(1386),n(1388),n(1389)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var P=function(t){function QuestsModule(){return null!==t&&t.apply(this,arguments)||this}return E(QuestsModule,t),QuestsModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new o.RegisterModuleLoaderPromise(this)),n.Application.operation.addAllowingRule(new a.OccurrenceBeginningLineRule("/quest"))},QuestsModule.prototype.mapMediators=function(){n.Application.view.mapMediator(s.GUINames.QUESTS_WINDOW+".buttons.questsButton",O.QuestsButtonMediator),n.Application.view.mapMediator(s.GUINames.QUESTS_WINDOW+".containerGroup.questContainer",c.QuestsContainerMediator,this._questsModel),n.Application.view.mapMediator(s.GUINames.QUESTS_WINDOW+".containerGroup.questContainer.questItemList.*",u.QuestItemRendererMediator)},QuestsModule.prototype.mapCommands=function(){l.CommandMap.map(h.QuestFinishPromise,d.QuestFinishCommand),l.CommandMap.map(v.QuestSkipPromise,b.QuestSkipCommand),l.CommandMap.map(_.QuestStartPromise,f.QuestStartCommand),l.CommandMap.map(y.QuestStartManyPromise,m.QuestStartManyCommand),l.CommandMap.map(g.QuestSetProgressPromise,w.QuestSetProgressCommand)},QuestsModule.prototype.onPreloadModule=function(t){n.Application.model.quests=this._questsModel=new p.QuestsModel(n.Application.dynamic.user.quests,n.Application.static.data.quests),n.Application.dataProvider.registerProvider("quests",new S.QuestsDataProvider),this.mapMediators(),this.mapCommands()},QuestsModule}(r.Module);e.QuestsModule=P}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(16),n(89)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function QuestsContainerMediator(){return null!==r&&r.apply(this,arguments)||this}return c(QuestsContainerMediator,r),QuestsContainerMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t);var e=s.StartQuestConfig.getQuestLineByScreen(),n=this._mapData.getQuestsByScreen(o.Application.dynamic.user.screen).filter(function(t){return t.id!==e}).sort(function(t,e){return t.id-e.id});this.child("questItemList").addItems(n);var i=this.child("fairy");this._loadableImage=new a.LoadableImage(i,i.resource)},QuestsContainerMediator.prototype.destroy=function(){this._loadableImage.destroy(),r.prototype.destroy.call(this)},QuestsContainerMediator}(n.DisplayObjectContainerMediator);e.QuestsContainerMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,S=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(240),n(438),n(125),n(29),n(159),n(128),n(439),n(227),n(15),n(241),n(124),n(48)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m,v,b,g,w=uipixi.GestureEvent;(v=m||(m={})).BONUS="bonus",v.NO_BONUS="noBonus",(g=b||(b={})).CHAR_READY="charReady",g.CHAR_PROGRESS="charProgress",g.CHAR_COMPLETE="charComplete",g.RANDOM_READY="randomReady",g.RANDOM_PROGRESS="randomProgress",g.WAIT="wait";var O=function(n){function QuestItemRendererMediator(){return null!==n&&n.apply(this,arguments)||this}return S(QuestItemRendererMediator,n),QuestItemRendererMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.getElements(),this._questLineModel=this._showData,this.registerListener(this._questLineModel,s.QuestLineModelEvent.TASK_CHANGED,this.updateQuestLineTask.bind(this)),this.registerListener(this._questLineModel,s.QuestLineModelEvent.STATE_CHANGED,this.setQuestTaskState.bind(this)),this.registerListener(this._questLineModel,s.QuestLineModelEvent.TIMEOUT_CHANGED,this.updateQuestLineTimeout.bind(this)),this.registerListener(this._questLineModel,s.QuestLineModelEvent.WAS_SHOWN_CHANGED,this.updateNewMark.bind(this)),this._bonusModel=i.Application.model.bonuses.getBonus(_.BonusType.QUEST),this.registerListener(this._bonusModel,f.BonusModelEvent.STAGE_CHANGED,this.setBonusState.bind(this));var e=this._questLineModel.type===l.QuestLineType.LINEAR;this._readyTaskState=e?b.CHAR_READY:b.RANDOM_READY,this._progressTaskState=e?b.CHAR_PROGRESS:b.RANDOM_PROGRESS,this._awardRenderer=new h.AwardRenderer,this._awardRenderer.initialize(null,this._container,{countLabel:this.child("awardCountLabel"),iconImage:this.child("awardCountIcon"),renderOnInit:!1,iconId:64}),this.updateQuestLineTask(),this.updateQuestLineTimeout(),this.setBonusState(),this.updateButtonListener()},QuestItemRendererMediator.prototype.updateButtonListener=function(){this._questLineModel.state===d.QuestLineState.IN_PROGRESS?(this._questTaskModel.state===p.TaskState.COMPLETED||this._questTaskModel.skipPrice||this._questTaskModel.guideEvent)&&(this.registerListener(this._container,w.POINTER_TAP,this.onContainerTap.bind(this)),this._container.buttonMode=!0):(this.unregisterListener(this._container,w.POINTER_TAP,this.onContainerTap.bind(this)),this._container.buttonMode=!1),this._showButton.visible=this._questLineModel.type===l.QuestLineType.LINEAR&&this._questLineModel.state===d.QuestLineState.IN_PROGRESS&&this._questTaskModel.state===p.TaskState.IN_PROGRESS&&!!this._questTaskModel.guideEvent},QuestItemRendererMediator.prototype.onContainerTap=function(){this._questTaskModel.state===p.TaskState.COMPLETED?r.ElkaCore.instance.promiseManager.ask(new o.QuestFinishPromise(this._questLineModel.id,this._questLineModel.currentTask.id)):this._questTaskModel.skipPrice?r.ElkaCore.instance.promiseManager.ask(new a.QuestSkipPromise(this._questLineModel.id,this._questTaskModel.id,i.Application.price.calculate(this._questTaskModel.skipPrice))):this._questTaskModel.guideEvent&&(i.Application.view.hide(this.windowHandle),i.Application.model.quests.guideObject=this._questTaskModel.param,i.Application.model.guides.dispatchEvent(new y.GuidesModelEvent(y.GuidesModelEvent.fromTriggerEventName(this._questTaskModel.guideEvent))))},QuestItemRendererMediator.prototype.getElements=function(){this._questContentContainer=this.child("questContentContainer"),this._waitTimeLabel=this.child("waitTimeLabel"),this._questBonusLabel=this.child("questBonusLabel"),this._questDescription=this.child("questDescription"),this._questDescriptionProgress=this.child("questDescriptionProgress"),this._questProgressLabel=this.child("questProgressLabel"),this._questProgressBar=this.child("questProgressBar"),this._attentionMark=this.child("attentionMark"),this._showButton=this.child("showButton")},QuestItemRendererMediator.prototype.setAward=function(){this._awardItem=i.Application.award.calculate(this._questLineModel.currentTask.awards,{target:this._questLineModel.currentTask.maxCount.toString()}).awards[0],this._awardRenderer.updateAward(this._awardItem)},QuestItemRendererMediator.prototype.setBonusState=function(){if(this._questLineModel.state===d.QuestLineState.IN_PROGRESS){var t=this._bonusModel.currentBonus;if(0<t){this._container.currentState=m.BONUS;var e=Math.ceil(this._awardItem.value*t);this._questBonusLabel.text="+"+e}else this._container.currentState=m.NO_BONUS}},QuestItemRendererMediator.prototype.setQuestTaskState=function(){this._questLineModel.completed?(this._questContentContainer.currentState=b.CHAR_COMPLETE,this._questDescription.text=i.Application.localization.localize("QUEST_ALL_DONE_TITLE"),this._questDescriptionProgress.text=i.Application.localization.localize("QUEST_ALL_DONE_TITLE"),this._container.currentState=m.NO_BONUS):this._questLineModel.state===d.QuestLineState.AWAITING?this._container.currentState=b.WAIT:(this.setBonusState(),this.updateNewMark(),this._questContentContainer.currentState=this._questTaskModel.state===p.TaskState.COMPLETED?this._readyTaskState:this._progressTaskState),this.updateButtonListener()},QuestItemRendererMediator.prototype.updateTaskProgress=function(){this._questProgressBar.progress=this._questTaskModel.progress;var t=this._questTaskModel.currentCount,e=this._questTaskModel.maxCount;this._questProgressLabel.text=e<=t?i.Application.localization.localize("QUEST_TASK_COMPLETE"):t+"/"+e},QuestItemRendererMediator.prototype.updateQuestLineTimeout=function(){this._waitTimeLabel.text=c.DateUtils.timeToString(this._questLineModel.timeout)},QuestItemRendererMediator.prototype.updateQuestLineTask=function(){this.removeTaskListeners(),this._questTaskModel=this._questLineModel.currentTask,this._questTaskModel&&(this.registerListener(this._questTaskModel,u.QuestTaskModelEvent.CURRENT_COUNT_CHANGED,this.updateTaskProgress.bind(this)),this.registerListener(this._questTaskModel,u.QuestTaskModelEvent.STATE_CHANGED,this.setQuestTaskState.bind(this)),this._questDescription.text=i.Application.localization.localize(this._questTaskModel.description,this._questTaskModel.maxCount),this._questDescriptionProgress.text=i.Application.localization.localize(this._questTaskModel.description,this._questTaskModel.maxCount),this.setAward(),this.updateTaskProgress()),this.setQuestTaskState()},QuestItemRendererMediator.prototype.removeTaskListeners=function(){this._questTaskModel&&(this.unregisterListener(this._questTaskModel,u.QuestTaskModelEvent.CURRENT_COUNT_CHANGED,this.updateTaskProgress.bind(this)),this.unregisterListener(this._questTaskModel,u.QuestTaskModelEvent.STATE_CHANGED,this.setQuestTaskState.bind(this)))},QuestItemRendererMediator.prototype.updateNewMark=function(){},QuestItemRendererMediator.prototype.destroy=function(){this._awardRenderer&&this._awardRenderer.destroy(),n.prototype.destroy.call(this)},QuestItemRendererMediator}(n.DisplayObjectContainerMediator);e.QuestItemRendererMediator=O}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(13),n(160),n(124),n(54),n(14)],void 0===(r=function(t,e,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function BonusModel(t){var e=n.call(this)||this;return e._staticData=t,e.init(),e}return u(BonusModel,n),BonusModel.prototype.init=function(){this._dynamicData=i.Application.dynamic.user.bonuses.getItem(this._staticData.id.toString()),this._dynamicData.addEventListener(r.BaseDataEvent.CHILDREN_CHANGED,this.onChildrenChanged.bind(this))},BonusModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("stage")&&this.dispatchEvent(new a.BonusModelEvent(a.BonusModelEvent.STAGE_CHANGED)),-1!==t.children.indexOf("value")&&this.dispatchEvent(new a.BonusModelEvent(a.BonusModelEvent.PROGRESS_CHANGED)),this.dispatchEvent(new a.BonusModelEvent(a.BonusModelEvent.MODEL_CHANGED))},Object.defineProperty(BonusModel.prototype,"staticData",{get:function(){return this._staticData},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"dynamicData",{get:function(){return this._dynamicData},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"stage",{get:function(){return this._dynamicData.stage},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"title",{get:function(){return this._staticData.description},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"nextStageValue",{get:function(){return i.Application.calculator.calculate(this._staticData.stage.target,{stageId:(this.stage+1).toString()})},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"progress",{get:function(){return i.Application.calculator.calculate(this._staticData.current,null,!0)},enumerable:!0,configurable:!0}),BonusModel.prototype.canGetAward=function(){return this.progress>=this.nextStageValue},Object.defineProperty(BonusModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"state",{get:function(){return this.canGetAward()?o.AchieveState.GET_AWARD:o.AchieveState.DEFAULT},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"bgState",{get:function(){return this.canGetAward()?o.AchieveBackState.GET_AWARD:o.AchieveBackState.DEFAULT},enumerable:!0,configurable:!0}),Object.defineProperty(BonusModel.prototype,"currentBonus",{get:function(){return this.calculateBonus(this.stage)},enumerable:!0,configurable:!0}),BonusModel.prototype.calculateBonus=function(t){return i.Application.calculator.calculate(this._staticData.stage.bonus,{stageId:t.toString()})},Object.defineProperty(BonusModel.prototype,"awards",{get:function(){var t=i.Application.award.calculate(this._staticData.stage.awards,{stageId:(this.stage+1).toString()}),e=Math.ceil(100*(this.calculateBonus(this.stage+1)-this.currentBonus));return t.add(new s.CalculatedAwardItem(c.AwardType.ACHIEVE_BONUS,e)),t},enumerable:!0,configurable:!0}),BonusModel}(uipixi.BaseEventTarget);e.BonusModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(125),n(13),n(1376),n(440),n(37),n(159),n(128),n(439),n(227)],void 0===(r=function(t,e,o,h,a,_,f,s,y,n,m,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function QuestLineModel(t,e,n){var i=r.call(this)||this;return i._intervalId=-1,i._timeout=0,i._id=t,i._dateService=o.Application.date,i._questLineStaticData=n,i._type=m.QuestLineType[i._questLineStaticData.type.toUpperCase()],i._questLineDynamicData=e,i._questLineDynamicData.addEventListener(a.BaseDataEvent.CHANGED,i.onQuestLineDynamicDataChanged.bind(i)),i._questId=i._questLineDynamicData.quest,i._questItemStaticData=i._questLineStaticData.quest.getItem(i._questId),i._progressDynamicData=i._questLineDynamicData.progress,i._progressDynamicData.addEventListener(s.ItemCollectionEvent.ITEM_ADDED,i.onProgressItemAdded.bind(i)),i._tasksDynamicData=i._questLineDynamicData.tasks,i._tasksDynamicData.addEventListener(s.ItemCollectionEvent.ITEM_ADDED,i.onTaskItemAdded.bind(i)),i._tasksDynamicData.addEventListener(a.BaseDataEvent.CHANGED,i.onTasksDynamicDataChanged.bind(i)),i.setupTasks(),i._type===m.QuestLineType.RANDOM&&(i._nextQuestAt=i._questLineDynamicData.nextQuestAt,i._timeout=Math.max(0,i._nextQuestAt-i._dateService.currentTime)),i._state=i.getState(),0<i._timeout&&(i._intervalId=o.Application.date.callProcessor.repeatCall(i.onInterval.bind(i))),i._state===c.QuestLineState.IN_PROGRESS?i._wasShown="true"===o.Application.settings.getItem("QuestModule.quest_"+i._id.toString()):i._wasShown=!0,i}return u(QuestLineModel,r),QuestLineModel.prototype.setupTasks=function(){if(this._tasks)for(var t=0,e=this._tasks;t<e.length;t++){(d=e[t]).destroy()}if(this._tasks=[],this._idToTask=new core.Map,!this.completed){if(this._type===m.QuestLineType.LINEAR)for(var n=0,i=this._questItemStaticData.tasks.task.items;n<i.length;n++){var r=i[n],o=new _.QuestTaskModel(r.id,this._questItemStaticData.description,r.value,this._questItemStaticData.awards,null,r.guideEvent,r.param);this._tasks.push(o),this._idToTask.set(r.id,o)}else{this._poolStaticData=f.QuestsModel.getPoolStaticDataById(this._questLineStaticData.quest.getItem(1).tasks.poolId);for(var a=0,s=this._questLineDynamicData.tasks.items;a<s.length;a++){var c=s[a],u=this._poolStaticData.task.getItem(parseInt(c.id));o=new _.QuestTaskModel(u.id,u.description,c.target,u.awards,u.skip.prices[0],null);this._tasks.push(o),this._idToTask.set(parseInt(c.id),o)}}for(var p=0,l=this._tasks;p<l.length;p++){var d;(d=l[p]).setProgressDynamicItem(this._progressDynamicData.getById(d.id.toString())),d.addEventListener(y.QuestTaskModelEvent.STATE_CHANGED,this.onTaskStateChanged.bind(this))}this._currentTasksCompleted=this.getCurrentTasksCompleted(),this.dispatchEvent(new h.QuestLineModelEvent(h.QuestLineModelEvent.TASK_CHANGED,this))}},QuestLineModel.prototype.setWasShown=function(t){t!==this._wasShown&&(this._wasShown=t,o.Application.settings.setItem("QuestModule.quest_"+this._id.toString(),t?"true":"false"),this.dispatchEvent(new h.QuestLineModelEvent(h.QuestLineModelEvent.WAS_SHOWN_CHANGED,this)))},QuestLineModel.prototype.getState=function(){return this.completed?c.QuestLineState.COMPLETED:0<this._timeout?c.QuestLineState.AWAITING:c.QuestLineState.IN_PROGRESS},QuestLineModel.prototype.setState=function(t){t!==this._state&&(this._state=t,this._state!==c.QuestLineState.IN_PROGRESS&&this._state!==c.QuestLineState.AWAITING||(o.Application.settings.setItem("QuestModule.quest_"+this._id.toString(),"false"),this.setWasShown(!1)),this.dispatchEvent(new h.QuestLineModelEvent(h.QuestLineModelEvent.STATE_CHANGED,this)))},QuestLineModel.prototype.setCurrentTasksCompleted=function(t){t!==this._currentTasksCompleted&&(this._currentTasksCompleted=t,this.dispatchEvent(new h.QuestLineModelEvent(h.QuestLineModelEvent.CURRENT_TASKS_COMPLETED_CHANGED,this)))},QuestLineModel.prototype.onTaskItemAdded=function(){this.setupTasks()},QuestLineModel.prototype.onTasksDynamicDataChanged=function(){this.setupTasks()},QuestLineModel.prototype.setQuestId=function(t){t!==this._questId&&(this._questId=t,this._questItemStaticData=this._questLineStaticData.quest.getItem(this._questId),this.setupTasks())},QuestLineModel.prototype.onTaskStateChanged=function(){this.setCurrentTasksCompleted(this.getCurrentTasksCompleted())},QuestLineModel.prototype.getCurrentTasksCompleted=function(){if(!this._tasks||0===this._tasks.length)return!1;for(var t=0,e=this._tasks;t<e.length;t++){if(e[t].state!==n.TaskState.COMPLETED)return!1}return!0},QuestLineModel.prototype.getTaskById=function(t){return this._idToTask.get(t)},QuestLineModel.prototype.onProgressItemAdded=function(t){var e=t.item;this.getTaskById(parseInt(e.id)).setProgressDynamicItem(e)},QuestLineModel.prototype.onQuestLineDynamicDataChanged=function(){if(this._questLineDynamicData.quest)return this.setQuestId(this._questLineDynamicData.quest),void(this._type===m.QuestLineType.RANDOM&&this.setNextQuestAt(this._questLineDynamicData.nextQuestAt));this.setState(this.getState())},QuestLineModel.prototype.setNextQuestAt=function(t){t!==this._nextQuestAt&&(this._nextQuestAt=t,this.setupTimer())},QuestLineModel.prototype.setupTimer=function(){-1!==this._intervalId&&(o.Application.date.callProcessor.deleteCall(this._intervalId),this._intervalId=-1);var t=this._dateService.currentTime;if(this._nextQuestAt-t<=0)return this.setTimeout(0),void this.setState(this.getState());this._intervalId=o.Application.date.callProcessor.repeatCall(this.onInterval.bind(this)),this.onInterval(),this.setState(this.getState())},QuestLineModel.prototype.onInterval=function(){var t=this._nextQuestAt-this._dateService.currentTime;if(t<=0)return t=0,o.Application.date.callProcessor.deleteCall(this._intervalId),this._intervalId=-1,this.setTimeout(t),void this.setState(this.getState());this.setTimeout(t)},QuestLineModel.prototype.setTimeout=function(t){t!==this._timeout&&(this._timeout=t,this.dispatchEvent(new h.QuestLineModelEvent(h.QuestLineModelEvent.TIMEOUT_CHANGED,this)))},Object.defineProperty(QuestLineModel.prototype,"tasks",{get:function(){return this._tasks},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"currentTasksCompleted",{get:function(){return this._currentTasksCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"timeout",{get:function(){return this._timeout},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"currentTask",{get:function(){return this._tasks&&0<this._tasks.length?this._tasks[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"completed",{get:function(){return this._questLineDynamicData.finished},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"wasShown",{get:function(){return this._wasShown},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"staticData",{get:function(){return this._questLineStaticData},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"dynamicData",{get:function(){return this._questLineDynamicData},enumerable:!0,configurable:!0}),Object.defineProperty(QuestLineModel.prototype,"questId",{get:function(){return this._questId},enumerable:!0,configurable:!0}),QuestLineModel}(uipixi.BaseEventTarget);e.QuestLineModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(159),n(128)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(c){function QuestTaskModel(t,e,n,i,r,o,a){var s=c.call(this)||this;return s.id=t,s.description=e,s.maxCount=n,s.awards=i,s.skipPrice=r,s.guideEvent=o,s.param=a,s._currentCount=0,s}return a(QuestTaskModel,c),QuestTaskModel.prototype.setProgressDynamicItem=function(t){t!==this._progressItemDynamicData&&(this._progressItemDynamicData&&this._progressItemDynamicData.removeEventListener(n.BaseDataEvent.CHANGED,this.onProgressChanged.bind(this)),this._progressItemDynamicData=t,this._progressItemDynamicData&&this._progressItemDynamicData.addEventListener(n.BaseDataEvent.CHANGED,this.onProgressChanged.bind(this)),this.onProgressChanged())},QuestTaskModel.prototype.onProgressChanged=function(){this.setCurrentCount(this._progressItemDynamicData?this._progressItemDynamicData.progress:0),this.setState(this.getState())},QuestTaskModel.prototype.setCurrentCount=function(t){t!==this._currentCount&&(this._currentCount=t,this.dispatchEvent(new i.QuestTaskModelEvent(i.QuestTaskModelEvent.CURRENT_COUNT_CHANGED,this)))},Object.defineProperty(QuestTaskModel.prototype,"progress",{get:function(){return this.currentCount/this.maxCount},enumerable:!0,configurable:!0}),Object.defineProperty(QuestTaskModel.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),QuestTaskModel.prototype.setState=function(t){t!==this._state&&(this._state=t,this.dispatchEvent(new i.QuestTaskModelEvent(i.QuestTaskModelEvent.STATE_CHANGED,this)))},QuestTaskModel.prototype.getState=function(){return this._currentCount>=this.maxCount?r.TaskState.COMPLETED:r.TaskState.IN_PROGRESS},Object.defineProperty(QuestTaskModel.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),QuestTaskModel.prototype.destroy=function(){this._progressItemDynamicData&&this._progressItemDynamicData.removeEventListener(n.BaseDataEvent.CHANGED,this.onProgressChanged.bind(this))},QuestTaskModel}(uipixi.BaseEventTarget);e.QuestTaskModel=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1378),n(0),n(7),n(2),n(8),n(152),n(241),n(32)],void 0===(r=function(t,e,s,c,n,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function QuestFinishCommand(){return null!==t&&t.apply(this,arguments)||this}return a(QuestFinishCommand,t),QuestFinishCommand.prototype.execute=function(a){return _(this,void 0,void 0,function(){var e,n,i,r,o;return f(this,function(t){switch(t.label){case 0:return e=c.Application.model.bonuses.getCurrentBonus(d.BonusType.QUEST),[4,c.Application.server.send(new s.QuestFinishAction(a.questLineId))];case 1:return n=t.sent(),i=c.Application.award.convertObjectToCalculated(n.output.baseAward),r=c.Application.award.convertObjectToCalculated(n.output.bonusAward),o=new p.ViewContext({title:c.Application.localization.localize("QUEST_AWARD_TITLE"),description:c.Application.localization.localize("QUEST_AWARD_TEXT"),baseAward:i,bonusAward:r,bonusPercent:Math.floor(100*e),bonusType:l.AwardBonusType.OTHER}),c.Application.metrics.goalStarkEvent(h.StarkEventsName.QUEST_COMPLETE,{qline:a.questLineId,qid:a.questId}),[4,c.Application.view.show(u.GUINames.AWARDS_WINDOW,o).onClose];case 2:return t.sent(),c.Application.award.accrueAwardImmediately(n.output.award),[2]}})})},QuestFinishCommand}(n.CommandBase);e.QuestFinishCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function QuestFinishAction(t){var e=n.call(this)||this;return e.action="Finish",e.controller="Quest",e.input=new i.ActionInput({questLineId:t}),e.output=new o,e}return a(QuestFinishAction,n),QuestFinishAction}(n.Action);e.QuestFinishAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.baseAward=t.data.baseAward,this.bonusAward=t.data.bonusAward},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(1380)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function QuestStartCommand(){return null!==t&&t.apply(this,arguments)||this}return a(QuestStartCommand,t),QuestStartCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,n.Application.server.send(new r.QuestStartAction(e.questLineId))];case 1:return t.sent(),[2]}})})},QuestStartCommand}(i.CommandBase);e.QuestStartCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function QuestStartAction(t){var e=n.call(this)||this;return e.action="Start",e.controller="Quest",e.input=new i.ActionInput({questLineId:t}),e.output=new o,e}return a(QuestStartAction,n),QuestStartAction}(n.Action);e.QuestStartAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function QuestStartManyPromise(t){var e=n.call(this)||this;return e.questLineIds=t,e}return a(QuestStartManyPromise,n),QuestStartManyPromise}(n.BasePromise);e.QuestStartManyPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(1383)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function QuestStartManyCommand(){return null!==t&&t.apply(this,arguments)||this}return a(QuestStartManyCommand,t),QuestStartManyCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,n.Application.server.send(new r.QuestStartManyAction(e.questLineIds))];case 1:return t.sent(),[2]}})})},QuestStartManyCommand}(i.CommandBase);e.QuestStartManyCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function QuestStartManyAction(t){var e=n.call(this)||this;return e.action="StartMany",e.controller="Quest",e.input=new i.ActionInput({questLineIds:t}),e.output=new o,e}return a(QuestStartManyAction,n),QuestStartManyAction}(n.Action);e.QuestStartManyAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(1385),n(7),n(68)],void 0===(r=function(t,e,r,o,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function QuestSkipCommand(){return null!==t&&t.apply(this,arguments)||this}return s(QuestSkipCommand,t),QuestSkipCommand.prototype.execute=function(i){return c(this,void 0,void 0,function(){var e,n;return u(this,function(t){switch(t.label){case 0:return e=i.price,[4,r.Application.confirm.show(a.ConfirmType.Buy,{prices:e,title:r.Application.localization.localize("QUEST_SKIP_TITLE"),description:r.Application.localization.localize("QUEST_SKIP_DESCRIPTION")})];case 1:return t.sent()?(n=r.Application.price.hold(e)).success?[4,r.Application.server.send(new o.QuestSkipAction(i.questLineId,i.questTaskId))]:[2]:[3,3];case 2:t.sent(),r.Application.price.release(n),t.label=3;case 3:return[2]}})})},QuestSkipCommand}(n.CommandBase);e.QuestSkipCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function QuestSkipAction(t,e){var n=i.call(this)||this;return n.action="SkipTask",n.controller="Quest",n.input=new r.ActionInput({questLineId:t,taskId:e,iWantToFinishItNow:1}),n.output=new o,n}return a(QuestSkipAction,i),QuestSkipAction}(n.Action);e.QuestSkipAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(1387)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function QuestSetProgressCommand(){return null!==t&&t.apply(this,arguments)||this}return a(QuestSetProgressCommand,t),QuestSetProgressCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,n.Application.server.send(new r.QuestSetProgressAction(e.questLineId,e.questTaskId,e.progress))];case 1:return t.sent(),[2]}})})},QuestSetProgressCommand}(i.CommandBase);e.QuestSetProgressCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function QuestSetProgressAction(t,e,n){var i=r.call(this)||this;return i.action="SetProgress",i.controller="Quest",i.input=new o.ActionInput({questLineId:t,taskId:e,progress:n}),i.output=new a,i}return s(QuestSetProgressAction,r),QuestSetProgressAction}(n.Action);e.QuestSetProgressAction=i;var a=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(402)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.ToggleButtonEvent,a=function(e){function QuestsButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return s(QuestsButtonMediator,e),QuestsButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._questsButton=this._container,this.registerListener(this._questsButton,o.SELECTED_CHANGED,this.onQuestsSelectedChanged.bind(this)),this._markersContainer=this.child("markersContainer"),this._questLineModels=i.Application.model.quests.getQuestsByScreen(i.Application.dynamic.user.screen),this._questIconModel=(new r.QuestMarkersModel).initialize(),this.registerListener(this._questIconModel,r.QuestMarkersModel.UPDATE_MARKER_EVENT,this.updateMarkers.bind(this)),this.updateMarkers()},QuestsButtonMediator.prototype.onQuestsSelectedChanged=function(){this._questsButton.selected||this._questLineModels.forEach(function(t){return t.setWasShown(!0)}),this.updateMarkers()},QuestsButtonMediator.prototype.updateMarkers=function(){this._markersContainer.currentState=this._questsButton.selected?r.QuestMarkersContainerState.OFF:this._questIconModel.getMarkerType()},QuestsButtonMediator.prototype.destroy=function(){this._questIconModel.destroy(),this._questsButton.selected&&this._questLineModels.forEach(function(t){return t.setWasShown(!0)}),e.prototype.destroy.call(this)},QuestsButtonMediator}(n.DisplayObjectContainerMediator);e.QuestsButtonMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function QuestsDataProvider(){}return QuestsDataProvider.prototype.getValue=function(t,e){var n=t.split("."),i=n[0];if(void 0!==n[1])throw new Error("QuestsDataProvider: invalid path "+t);switch(i){case QuestsDataProvider.GUIDE_OBJECT:return o.Application.model.quests.guideObject;case QuestsDataProvider.TASK_COMPLETED:if(0<e.length&&"questLineId"===e[0].type){var r=o.Application.model.quests.getQuestLineById(parseInt(e[0].values[0]));return r&&!r.completed&&r.currentTasksCompleted?1:0}throw new Error("QuestsDataProvider: unsupported filter "+i);default:throw new Error("QuestsDataProvider: unsupported type "+i)}},QuestsDataProvider.prototype.watch=function(t,e){},QuestsDataProvider.prototype.unwatch=function(t,e){},QuestsDataProvider.GUIDE_OBJECT="guideObject",QuestsDataProvider.TASK_COMPLETED="taskCompleted",QuestsDataProvider}();e.QuestsDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(22),n(1391),n(1392),n(4),n(18)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function StartPopupsModule(){return null!==t&&t.apply(this,arguments)||this}return u(StartPopupsModule,t),StartPopupsModule.prototype.initialize=function(t){a.ElkaCore.instance.promiseManager.ask(new s.RegisterModuleLoaderPromise(this)),i.CommandMap.map(r.StartPopupsPromise,o.StartPopupsCommand,{maxPopupsCount:this.config.maxPopupsCount})},StartPopupsModule.prototype.onStartModule=function(t){a.ElkaCore.instance.promiseManager.ask(new r.StartPopupsPromise)},StartPopupsModule}(n.Module);e.StartPopupsModule=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartPopupsPromise(){return t.call(this)||this}return a(StartPopupsPromise,t),StartPopupsPromise}(n.BasePromise);e.StartPopupsPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,b=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),g=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},w=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(4),n(7),n(436),n(444),n(445),n(446),n(242),n(0),n(354),n(447),n(408),n(35),n(36),n(5),n(448),n(449)],void 0===(r=function(t,e,s,n,i,r,o,a,c,u,p,l,d,h,_,f,y,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var v=function(t){function StartPopupsCommand(){return null!==t&&t.apply(this,arguments)||this}return b(StartPopupsCommand,t),StartPopupsCommand.prototype.execute=function(t){return g(this,void 0,void 0,function(){var e,n,i,r,o,a;return w(this,function(t){switch(t.label){case 0:if(0!==u.Application.model.guides.active)return[2];e=this.getPopupPromisesList(),n=0,i=this._data.maxPopupsCount,r=0,o=e,t.label=1;case 1:return r<o.length?(a=o[r],u.Application.debug.addLog("StartPopupsModule",f.Utils.getNameFromInstance(a)),[4,s.ElkaCore.instance.promiseManager.ask(a)]):[3,4];case 2:if(t.sent().shown&&n++,n===i)return[3,4];t.label=3;case 3:return r++,[3,1];case 4:return this.checkActiveRoulette(),[2]}})})},StartPopupsCommand.prototype.checkActiveRoulette=function(){null!==u.Application.model.roulettes.activeRoulette&&u.Application.debug.sendLog("Недокрученная рулетка на старте","",h.LogFlag.CLIENT,_.LogLevel.Error)},StartPopupsCommand.prototype.getPopupPromisesList=function(){return[new d.ShowFullscreenWindowOnStartPromise,new r.RouletteShowOnStartPromise,new p.ShowPaymentOnStartPromise,new m.ShowNewsPresentsOnStartPromise,new a.ShowPendingAwardPromise(c.PendingAwardType.ROULETTE),new a.ShowPendingAwardPromise(c.PendingAwardType.VK_NEW_YEAR_GIFT_PROMO),new a.ShowPendingAwardPromise(c.PendingAwardType.VIRAL),new a.ShowPendingAwardPromise(c.PendingAwardType.ADMIN),new a.ShowPendingAwardPromise(c.PendingAwardType.BONUS_LINK),new i.ShowBeautyOnStartPromise,new l.ShowRatingOnStartPromise,new o.ShowPromoOnStartPromise,new a.ShowPendingAwardPromise(c.PendingAwardType.HAPPY_NEW_YEAR),new y.EventNewYearCheckNewPromise]},StartPopupsCommand}(n.CommandBase);e.StartPopupsCommand=v}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,j=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(0),n(18),n(2),n(22),n(450),n(1394),n(1395),n(1396),n(82),n(1397),n(244),n(1399),n(1401),n(1403),n(452),n(1405),n(1407),n(451),n(1408),n(454),n(1410),n(1411),n(453),n(1413),n(1414),n(62),n(122)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var T=function(t){function DecorModule(){return null!==t&&t.apply(this,arguments)||this}return j(DecorModule,t),DecorModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new o.RegisterModuleLoaderPromise(this))},DecorModule.prototype.onPreloadModule=function(t){r.Application.model.decorShops=this._decorShopsModel=new l.DecorShopsModel,this.mapMediators(),this.mapCommands()},DecorModule.prototype.onStartModule=function(t){this._decorShopsModel.registerShop(new b.DecorShopGiftModel),this._decorShopsModel.registerShop(new E.DecorShopWorkshopModel),this._decorShopsModel.registerShop(new v.DecorShopDecorModel),this._decorShopsModel.registerShop(new _.DecorShopAlphabetModel),this._decorShopsModel.registerShop(new f.DecorShopAnimalModel),this._decorShopsModel.registerShop(new m.DecorShopOtherModel)},DecorModule.prototype.mapCommands=function(){s.CommandMap.map(c.DecorWindowBuyToyPromise,u.DecorWindowBuyToyCommand),s.CommandMap.map(w.DecorWindowBuyFriendPromise,O.DecorWindowBuyFriendCommand),s.CommandMap.map(A.DecorWindowWorkshopCollectPromise,M.DecorWindowWorkshopCollectCommand)},DecorModule.prototype.mapMediators=function(){r.Application.view.mapMediator(a.GUINames.EDIT_TOYS_WINDOW+".shopButton",D.DecorButtonMarkersMediator),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".containerGroup.giftToysContainer",h.DecorTabContainerMediator,{shopId:d.DecorShopType.GIFT,help:"DECOR_WINDOW_GIFT_HELP"}),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".containerGroup.workshopToysContainer",h.DecorTabContainerMediator,{shopId:d.DecorShopType.WORKSHOP,help:"DECOR_WINDOW_WORKSHOP_HELP"}),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".containerGroup.decorToysContainer",h.DecorTabContainerMediator,{shopId:d.DecorShopType.DECOR,help:"DECOR_WINDOW_DECOR_HELP"}),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".containerGroup.alphabetToysContainer",h.DecorTabContainerMediator,{shopId:d.DecorShopType.ALPHABET,help:"DECOR_WINDOW_ALPHABET_HELP"}),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".containerGroup.animalToysContainer",h.DecorTabContainerMediator,{shopId:d.DecorShopType.ANIMAL,help:"DECOR_WINDOW_ANIMAL_HELP"}),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".containerGroup.otherToysContainer",h.DecorTabContainerMediator,{shopId:d.DecorShopType.OTHER,help:"DECOR_WINDOW_OTHER_HELP"}),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".containerGroup.*.toysItemList.*",y.DecorListItemMediator),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".buttons.giftToysButton",p.DecorTabButtonMediator,d.DecorShopType.GIFT),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".buttons.workshopToysButton",p.DecorTabButtonMediator,d.DecorShopType.WORKSHOP),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".buttons.decorToysButton",p.DecorTabButtonMediator,d.DecorShopType.DECOR),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".buttons.alphabetToysButton",p.DecorTabButtonMediator,d.DecorShopType.ALPHABET),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".buttons.animalToysButton",p.DecorTabButtonMediator,d.DecorShopType.ANIMAL),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW+".buttons.otherToysButton",p.DecorTabButtonMediator,d.DecorShopType.OTHER),r.Application.view.mapMediator(a.GUINames.DECOR_WINDOW,g.DecorWindowMediator),r.Application.view.mapMediator(a.GUINames.DECOR_SELECT_FRIEND_WINDOW,S.DecorSelectFriendWindowMediator),r.Application.view.mapMediator(a.GUINames.DECOR_SELECT_FRIEND_WINDOW,I.SimplePopupAnimationMediator),r.Application.view.mapMediator(a.GUINames.DECOR_SELECT_FRIEND_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",P.DecorSelectFriendItemMediator),r.Application.view.mapMediator(a.GUINames.DECOR_SELECT_FRIEND_WINDOW+".usersContainer.friendsScrollContainer.friendsList.*",C.AlphaOptimizationListItemMediator)},DecorModule}(n.Module);e.DecorModule=T}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(68),n(32)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function DecorWindowBuyToyCommand(){return null!==t&&t.apply(this,arguments)||this}return s(DecorWindowBuyToyCommand,t),DecorWindowBuyToyCommand.prototype.execute=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,i.Application.confirm.show(r.ConfirmType.Buy,{prices:i.Application.price.calculate(e.itemModel.promoOfferStaticData.prices)})];case 1:return t.sent()&&(i.Application.payment.directBuy(e.itemModel.promoId,e.itemModel.promoOfferStaticData.id),i.Application.metrics.goalStarkEvent(o.StarkEventsName.TOY_PURCHASE,{tid:e.itemModel.toyId,gift:0})),[2]}})})},DecorWindowBuyToyCommand}(n.CommandBase);e.DecorWindowBuyToyCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(129),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.ToggleButtonEvent,a=function(e){function DecorTabButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return s(DecorTabButtonMediator,e),DecorTabButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._button=this._container,this._doneMarkerImage=this.child("doneMarkerImage"),this._attentionMarkerImage=this.child("attentionMarkerImage"),this._shopId=this._mapData,this._shopModel=r.Application.model.decorShops.getShop(this._shopId),this.registerListener(this._button,o.SELECTED_CHANGED,this.onSelected.bind(this)),this.registerListener(this._shopModel,i.DecorShopModelEvent.STATE_CHANGED,this.onStateChanged.bind(this)),r.Application.model.decorShops.selectedModel===this._shopModel&&this._button.select(!0),this.onStateChanged()},DecorTabButtonMediator.prototype.onSelected=function(){this._button.selected&&this._shopModel.dispatchEvent(new i.DecorShopModelEvent(i.DecorShopModelEvent.SELECTED)),this.onStateChanged()},DecorTabButtonMediator.prototype.onStateChanged=function(){this._doneMarkerImage.visible=!this._button.selected&&this._shopModel.markerDone,this._attentionMarkerImage.visible=!this._button.selected&&this._shopModel.markerAttention},DecorTabButtonMediator}(n.DisplayObjectContainerMediator);e.DecorTabButtonMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(223),n(129)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function DecorShopsModel(){var t=e.call(this)||this;return t._shops=[],t}return a(DecorShopsModel,e),DecorShopsModel.prototype.registerShop=function(t){this._shops.push(t),t.addEventListener(n.DecorShopModelEvent.STATE_CHANGED,this.onStateChanged.bind(this)),this.onStateChanged()},DecorShopsModel.prototype.getShop=function(e){return this._shops.filter(function(t){return t.shopType===e})[0]},DecorShopsModel.prototype.getShops=function(){var e=[];return this._shops.forEach(function(t){return e.push(t)}),e},DecorShopsModel.prototype.onStateChanged=function(){this._markerAttention=!1,this._markerDone=!1;for(var t=0,e=this._shops;t<e.length;t++){var n=e[t];this._markerAttention||(this._markerAttention=n.markerAttention),this._markerDone||(this._markerDone=n.markerDone)}this._markerAttention=this._markerAttention&&!this._markerDone,this.dispatchEvent(new i.DecorShopsModelEvent(i.DecorShopsModelEvent.STATE_CHANGED))},Object.defineProperty(DecorShopsModel.prototype,"markerAttention",{get:function(){return this._markerAttention},enumerable:!0,configurable:!0}),Object.defineProperty(DecorShopsModel.prototype,"markerDone",{get:function(){return this._markerDone},enumerable:!0,configurable:!0}),DecorShopsModel}(uipixi.BaseEventTarget);e.DecorShopsModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2),n(123),n(129)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(n){function DecorTabContainerMediator(){return null!==n&&n.apply(this,arguments)||this}return u(DecorTabContainerMediator,n),DecorTabContainerMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._shopId=this._mapData.shopId,this._shopModel=i.Application.model.decorShops.getShop(this._shopId),this.updateItems();var e=this.child("toysItemList");this._renderer=new a.NavigatorRenderer,this._renderer.initialize({items:this._items,list:e,pageSize:DecorTabContainerMediator.PAGE_SIZE},this._container),this.setTitleHelp(this._mapData.help),this.registerListener(this._shopModel,s.DecorShopModelEvent.SELECTED,this.onTabSelected.bind(this))},DecorTabContainerMediator.prototype.updateItems=function(){for(this._shopModel.sortItems(),this._items=this._shopModel.items.concat();0===this._items.length||this._items.length%DecorTabContainerMediator.PAGE_SIZE!=0;)this._items.push(null)},DecorTabContainerMediator.prototype.onTabSelected=function(t){this.updateItems(),this._renderer.updateItems(this._items)},DecorTabContainerMediator.prototype.setTitleHelp=function(t){var e=this.child("tooltipButton");i.Application.tooltip.addTooltip(e,r.TooltipAnchor.Bottom,o.GUINames.TEXT_TOOLTIP,{text:t})},DecorTabContainerMediator.prototype.destroy=function(){this._renderer.destroy(),n.prototype.destroy.call(this)},DecorTabContainerMediator.PAGE_SIZE=4,DecorTabContainerMediator}(n.DisplayObjectContainerMediator);e.DecorTabContainerMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(65),n(98)],void 0===(r=function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(o){function DecorShopItemAlphabetModel(t,e,n,i){var r=o.call(this)||this;return r._promoId=t,r._toyType=n,r._promoOfferStaticData=e,r._inboxModel=i,r.parseOfferData(),r.init(),r._inboxModel.addEventListener(a.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED,r.updateState.bind(r)),r}return s(DecorShopItemAlphabetModel,o),Object.defineProperty(DecorShopItemAlphabetModel.prototype,"toyType",{get:function(){return this._toyType},enumerable:!0,configurable:!0}),DecorShopItemAlphabetModel.prototype.updateState=function(){var e=this,t=this._inboxModel.getInboxItemsByItemId(this._toyId);if(0<t.length){this._friendSUserId=t[0].socialId;var n=t.filter(function(t){return t.socialId===e._friendSUserId});return this._count=n.length,void this.setStateForced(i.DecorShopItemState.TAKE)}o.prototype.updateState.call(this),0<this._count?this.setState(i.DecorShopItemState.PLACE):this.setState(i.DecorShopItemState.BUY)},DecorShopItemAlphabetModel.prototype.destroy=function(){this._inboxModel.removeEventListener(a.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED,this.updateState.bind(this)),o.prototype.destroy.call(this)},DecorShopItemAlphabetModel}(i.DecorShopItemModel);e.DecorShopItemAlphabetModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(105),n(0),n(1400),n(65),n(82)],void 0===(r=function(t,e,n,c,u,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function DecorShopAnimalModel(){return t.call(this,r.DecorShopType.ANIMAL)||this}return a(DecorShopAnimalModel,t),DecorShopAnimalModel.prototype.createItems=function(){for(var t,e=0,n=c.Application.static.data.clientShopsConfig.animalShop;e<n.length;e++){var i=n[e];i.screenId===c.Application.dynamic.user.screen&&(t=i.promoId)}for(var r=c.Application.static.data.promos.promo.getItem(t),o=0,a=r.offers.items;o<a.length;o++){var s=a[o];this._items.push(new u.DecorShopItemAnimalModel(r.id,s))}},DecorShopAnimalModel.prototype.sortItems=function(){var o=[i.DecorShopItemState.PLACE,i.DecorShopItemState.BUY,i.DecorShopItemState.LOCK,i.DecorShopItemState.PLACED];this._items.sort(function(t,e){for(var n=0,i=o;n<i.length;n++){var r=i[n];if(t.state===r&&e.state!==r)return-1;if(t.state!==r&&e.state===r)return 1;if(t.state===r&&e.state===r)return t.toyModel.static.beauty-e.toyModel.static.beauty}})},DecorShopAnimalModel}(n.DecorShopModel);e.DecorShopAnimalModel=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(65),n(0),n(42)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function DecorShopItemAnimalModel(t,e){var n=i.call(this)||this;return n._cashResource=r.Application.model.resources.get("cash"),n._promoId=t,n._promoOfferStaticData=e,n.parseOfferData(),n.init(),n._cashResource.addEventListener(o.ResourceModelEvent.COUNT_CHANGED,n.updateMarkers.bind(n)),n}return a(DecorShopItemAnimalModel,i),DecorShopItemAnimalModel.prototype.updateState=function(){i.prototype.updateState.call(this),0<this._count?this.setState(n.DecorShopItemState.PLACE):0<this._toyModel.count?this.setState(n.DecorShopItemState.PLACED):r.Application.requirements.check(this._promoOfferStaticData.buyRequirements)?this.setState(n.DecorShopItemState.BUY):this.setState(n.DecorShopItemState.LOCK)},DecorShopItemAnimalModel.prototype.destroy=function(){this._cashResource.removeEventListener(o.ResourceModelEvent.COUNT_CHANGED,this.updateMarkers.bind(this)),i.prototype.destroy.call(this)},DecorShopItemAnimalModel}(n.DecorShopItemModel);e.DecorShopItemAnimalModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,g=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),w=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},O=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(15),n(14),n(4),n(450),n(65),n(161),n(451),n(2),n(40),n(452),n(453)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f,y,m=uipixi.GestureEvent,v=PIXI.filters.AlphaFilter;(y=f=e.DecorToySlotState||(e.DecorToySlotState={})).EMPTY="empty",y.WORKSHOP_COLLECT="workshopCollect",y.WORKSHOP_LOCK="workshopLock",y.BUY="buy",y.LOCK="lock",y.PLACE="place",y.PLACED="placed",y.TAKE="take";var b=function(e){function DecorListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return g(DecorListItemMediator,e),DecorListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._showData?(this.getElements(),this._countPrefixLabel.text="x",this._titleLabel.text=i.Application.localization.localize(this._showData.title),this._showData.lockText&&(this._lockLabel.text=this._showData.lockText),this._awardRenderer=new r.AwardRenderer,this._awardRenderer.initialize(this._showData.awardToyItem,this._container,{iconImage:this._iconImage,preferToySpine:!0,iconId:96,beautyLabel:this._beautyLabel,beautyContainer:this._beautyContainer}),this._showData.promoOfferStaticData&&(this._priceRenderer=new r.AwardRenderer,this._priceRenderer.initialize(i.Application.price.calculate(this._showData.promoOfferStaticData.prices).prices[0],this._priceContainer,{iconId:64,fit:!0,iconImage:"priceIconImage",countLabel:"priceCountLabel"})),this._profileRenderer=new d.ProfileRenderer,this._profileRenderer.initialize(null,this._container,{renderOnInit:!1,avatarImage:this.child("avaImage"),nameLabel:this.child("friendNameLabel"),cropedFullnameLength:13,cropedFullnameSuffix:".."}),this.registerListener(this._container,m.POINTER_TAP,this.onSlotTap.bind(this)),this.registerListener(this._container,m.POINTER_DOWN,this.onSlotDown.bind(this)),this.registerListener(this._showData,u.DecorShopItemModelEvent.STATE_CHANGED,this.updateState.bind(this)),this.registerListener(this._showData,u.DecorShopItemModelEvent.COUNT_CHANGED,this.updateCount.bind(this)),this.updateState()):this._container.currentState=f.EMPTY},DecorListItemMediator.prototype.getElements=function(){this._titleLabel=this.child("titleLabel"),this._countPrefixLabel=this.child("countPrefixLabel"),this._countLabel=this.child("toysCountLabel"),this._lockLabel=this.child("lockLabel"),this._iconImage=this.child("iconImage"),this._buyButton=this.child("buyButton"),this._priceContainer=this._buyButton.getChildByName("priceContainer"),this._countContainer=this.child("countContainer"),this._beautyContainer=this.child("beautyContainer"),this._beautyLabel=this.child("beautyLabel"),this._rouletteContainer=this.child("rouletteContainer"),this._rouletteLabel=this.child("rouletteLabel"),this._doneMarkerImage=this.child("doneMarkerImage"),this._attentionMarkerImage=this.child("attentionMarkerImage")},DecorListItemMediator.prototype.updateCount=function(){this._countLabel.text=this._showData.count.toString(),this._countContainer.visible=1<this._showData.count},DecorListItemMediator.prototype.updateState=function(){switch(this._showData.state){case c.DecorShopItemState.PLACE:this._container.currentState=f.PLACE,this.updateCount(),this._container.buttonMode=!0;break;case c.DecorShopItemState.TAKE:this._container.currentState=f.TAKE,this._container.buttonMode=!0,this.updateCount(),this._friendUserEntity&&this._friendUserEntity.userId===this._showData.friendSUserId?this.setProfile():this.loadProfile();break;case c.DecorShopItemState.BUY:case c.DecorShopItemState.BUY_FRIEND:this._container.currentState=f.BUY,this._countContainer.visible=!1,this._container.buttonMode=!0;break;case c.DecorShopItemState.PLACED:this._container.currentState=f.PLACED,this._container.buttonMode=!1;break;case c.DecorShopItemState.WORKSHOP_COLLECT:this._container.currentState=f.WORKSHOP_COLLECT,this._countContainer.visible=!1,this._container.buttonMode=!0;break;case c.DecorShopItemState.WORKSHOP_LOCK:this._container.currentState=f.WORKSHOP_LOCK,this._container.buttonMode=!1;break;case c.DecorShopItemState.LOCK:this._container.currentState=f.LOCK,this._container.buttonMode=!1}if(this._awardRenderer.applySpineFilters([]),this._iconImage.alpha<1){var t=new v(this._iconImage.alpha);this._awardRenderer.applySpineFilters([t])}this._doneMarkerImage.visible=this._showData.markerDone,this._attentionMarkerImage.visible=this._showData.markerAttention,this.setRouletteAward()},DecorListItemMediator.prototype.setProfile=function(){this._profileRenderer.update(this._friendUserEntity)},DecorListItemMediator.prototype.loadProfile=function(){return w(this,void 0,void 0,function(){var e;return O(this,function(t){switch(t.label){case 0:return[4,i.Application.profiles.getProfiles([this._showData.friendSUserId])];case 1:return e=t.sent(),this._cancellationToken.requested?[2]:(this._friendUserEntity=e[0],this._friendUserEntity&&this.setProfile(),[2])}})})},DecorListItemMediator.prototype.onSlotTap=function(){switch(this._showData.state){case c.DecorShopItemState.BUY:a.ElkaCore.instance.promiseManager.ask(new s.DecorWindowBuyToyPromise(this._showData));break;case c.DecorShopItemState.BUY_FRIEND:a.ElkaCore.instance.promiseManager.ask(new p.DecorWindowBuyFriendPromise(this._showData));break;case c.DecorShopItemState.WORKSHOP_COLLECT:a.ElkaCore.instance.promiseManager.ask(new _.DecorWindowWorkshopCollectPromise(this._showData));break;case c.DecorShopItemState.TAKE:i.Application.mail.acceptToys(h.DecorShopDecorModel.DECOR_INBOX_ID,this._showData.toyId,this._showData.friendSUserId)}},DecorListItemMediator.prototype.onSlotDown=function(t){this._showData.state===c.DecorShopItemState.PLACE&&(i.Application.view.hideByWindowName(l.GUINames.DECOR_WINDOW),i.Application.model.screensToys.getScreen(i.Application.dynamic.user.screen).addToy(this._showData.toyId,t))},DecorListItemMediator.prototype.setRouletteAward=function(){if(this._showData.calculatedAward){var t=this._showData.calculatedAward.getByType(o.AwardType.ROULETTE);t&&(this._rouletteLabel.text=t.value.toString()),this._rouletteContainer.visible=t&&(this._showData.state===c.DecorShopItemState.LOCK||this._showData.state===c.DecorShopItemState.BUY)}},DecorListItemMediator.prototype.destroy=function(){this._awardRenderer&&this._awardRenderer.destroy(),this._priceRenderer&&this._priceRenderer.destroy(),this._profileRenderer&&this._profileRenderer.destroy(),e.prototype.destroy.call(this)},DecorListItemMediator}(n.DisplayObjectContainerMediator);e.DecorListItemMediator=b}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(65),n(0),n(98)],void 0===(r=function(t,e,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(r){function DecorShopItemDecorModel(t,e,n){var i=r.call(this)||this;return i._promoId=t,i._promoOfferStaticData=e,i._inboxModel=n,i.parseOfferData(),i.init(),i._inboxModel.addEventListener(a.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED,i.updateState.bind(i)),i}return s(DecorShopItemDecorModel,r),DecorShopItemDecorModel.prototype.updateState=function(){var e=this,t=this._inboxModel.getInboxItemsByItemId(this._toyId);if(0<t.length){this._friendSUserId=t[0].socialId;var n=t.filter(function(t){return t.socialId===e._friendSUserId});return this._count=n.length,void this.setStateForced(i.DecorShopItemState.TAKE)}r.prototype.updateState.call(this),0<this._count?this.setState(i.DecorShopItemState.PLACE):o.Application.requirements.check(this._promoOfferStaticData.buyRequirements)?this.setState(i.DecorShopItemState.BUY):this.setState(i.DecorShopItemState.LOCK)},DecorShopItemDecorModel.prototype.destroy=function(){this._inboxModel.removeEventListener(a.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED,this.updateState.bind(this)),r.prototype.destroy.call(this)},DecorShopItemDecorModel}(i.DecorShopItemModel);e.DecorShopItemDecorModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(105),n(0),n(14),n(1404),n(244),n(37),n(65),n(82)],void 0===(r=function(t,e,n,l,d,r,h,i,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function DecorShopOtherModel(){return t.call(this,o.DecorShopType.OTHER)||this}return c(DecorShopOtherModel,t),DecorShopOtherModel.prototype.init=function(){this.createExcludeIds(),t.prototype.init.call(this),l.Application.dynamic.user.toy.addEventListener(i.ItemCollectionEvent.ITEM_ADDED,this.onItemsChanged.bind(this)),l.Application.dynamic.user.toy.addEventListener(i.ItemCollectionEvent.ITEM_REMOVED,this.onItemsChanged.bind(this))},DecorShopOtherModel.prototype.onItemsChanged=function(){this.clearItems(),t.prototype.init.call(this)},DecorShopOtherModel.prototype.createExcludeIds=function(){var r=this;this._excludeToyIds=[];for(var t=0,e=l.Application.static.data.clientShopsConfig.animalShop;t<e.length;t++){if((s=e[t]).screenId===l.Application.dynamic.user.screen)l.Application.static.data.promos.promo.getItem(s.promoId).offers.items.forEach(function(t){var e=l.Application.award.calculate(t.awards).getByType(d.AwardType.TOY);r._excludeToyIds.push(e.itemId)})}var n=[h.AlphabetToyType.EN,h.AlphabetToyType.NUM,h.AlphabetToyType.SIGN,h.AlphabetToyType.RU],o=l.Application.dynamic.user.screen;n.forEach(function(t){for(var e=0,n=l.Application.static.data.clientShopsConfig.alphabetShop;e<n.length;e++){var i=n[e];if(i.screenId===o&&i.type===t)l.Application.static.data.promos.promo.getItem(i.promoId).offers.items.forEach(function(t){var e=l.Application.award.calculate(t.awards).getByType(d.AwardType.TOY);r._excludeToyIds.push(e.itemId)})}});for(var i=0,a=l.Application.static.data.clientShopsConfig.decorShop;i<a.length;i++){var s;if((s=a[i]).screenId===l.Application.dynamic.user.screen)l.Application.static.data.promos.promo.getItem(s.promoId).offers.items.forEach(function(t){var e=l.Application.award.calculate(t.awards).getByType(d.AwardType.TOY);r._excludeToyIds.push(e.itemId)})}for(var c=0,u=l.Application.model.workshops.getCurrentWorkshop().collections;c<u.length;c++){var p=u[c];this._excludeToyIds.push(p.toyStaticData.id.toString())}},DecorShopOtherModel.prototype.createItems=function(){for(var t=0,e=l.Application.dynamic.user.toy.items;t<e.length;t++){var n=e[t];if(-1==this._excludeToyIds.indexOf(n.id)){var i=l.Application.static.data.toys.toy.getItem(parseInt(n.id));i&&i.screen===l.Application.dynamic.user.screen&&this._items.push(new r.DecorShopItemOtherModel(n.id))}}},DecorShopOtherModel.prototype.sortItems=function(){var o=[a.DecorShopItemState.PLACE,a.DecorShopItemState.PLACED];this._items.sort(function(t,e){for(var n=0,i=o;n<i.length;n++){var r=i[n];if(t.state===r&&e.state!==r)return-1;if(t.state!==r&&e.state===r)return 1;if(t.state===r&&e.state===r)return t.toyModel.static.beauty-e.toyModel.static.beauty}})},DecorShopOtherModel.prototype.destroy=function(){l.Application.dynamic.user.toy.removeEventListener(i.ItemCollectionEvent.ITEM_ADDED,this.onItemsChanged.bind(this)),l.Application.dynamic.user.toy.removeEventListener(i.ItemCollectionEvent.ITEM_REMOVED,this.onItemsChanged.bind(this)),t.prototype.destroy.call(this)},DecorShopOtherModel}(n.DecorShopModel);e.DecorShopOtherModel=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(65),n(54),n(14)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function DecorShopItemOtherModel(t){var e=n.call(this)||this;return e._toyId=t,e._awardToyItem=new r.CalculatedAwardItem(o.AwardType.TOY,1,e._toyId),e.init(),e._title=e._toyModel.static.view.title,e}return a(DecorShopItemOtherModel,n),DecorShopItemOtherModel.prototype.updateState=function(){n.prototype.updateState.call(this),0<this._count?this.setState(i.DecorShopItemState.PLACE):this.setState(i.DecorShopItemState.PLACED)},DecorShopItemOtherModel}(i.DecorShopItemModel);e.DecorShopItemOtherModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(105),n(0),n(33),n(244),n(1406),n(82)],void 0===(r=function(t,e,n,b,g,w,O,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function DecorShopGiftModel(){return t.call(this,i.DecorShopType.GIFT)||this}return a(DecorShopGiftModel,t),DecorShopGiftModel.prototype.createItems=function(){},DecorShopGiftModel.prototype.sortItems=function(){var t;this._items=[];for(var e=b.Application.dynamic.user.screen,n=0,i=b.Application.static.data.clientShopsConfig.decorShop;n<i.length;n++){var r=i[n];r.screenId===e&&(t=r.promoId)}for(var o=b.Application.static.data.promos.promo.getItem(t),a=0,s=o.offers.items;a<s.length;a++){var c=s[a];b.Application.requirements.check(c.buyRequirements)&&this._items.push(new O.DecorShopItemGiftModel(o.id,c))}for(var u=0,p=b.Application.social.platformType===g.PlatformType.FB?[w.AlphabetToyType.EN,w.AlphabetToyType.NUM,w.AlphabetToyType.SIGN,w.AlphabetToyType.RU]:[w.AlphabetToyType.RU,w.AlphabetToyType.NUM,w.AlphabetToyType.SIGN,w.AlphabetToyType.EN];u<p.length;u++)for(var l=p[u],d=0,h=b.Application.static.data.clientShopsConfig.alphabetShop;d<h.length;d++){var _=h[d];if(_.screenId===e&&_.type===l)for(var f=b.Application.static.data.promos.promo.getItem(_.promoId),y=0,m=f.offers.items;y<m.length;y++){var v=m[y];this._items.push(new O.DecorShopItemGiftModel(f.id,v))}}},DecorShopGiftModel}(n.DecorShopModel);e.DecorShopGiftModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(65)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function DecorShopItemGiftModel(t,e){var n=i.call(this)||this;return n._promoId=t,n._promoOfferStaticData=e,n.parseOfferData(),n.init(),n}return a(DecorShopItemGiftModel,i),DecorShopItemGiftModel.prototype.updateState=function(){this.setState(n.DecorShopItemState.BUY_FRIEND)},DecorShopItemGiftModel}(n.DecorShopItemModel);e.DecorShopItemGiftModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(82)],void 0===(r=function(t,e,n,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(a){function DecorWindowMediator(){return null!==a&&a.apply(this,arguments)||this}return u(DecorWindowMediator,a),DecorWindowMediator.prototype.initialize=function(t){a.prototype.initialize.call(this,t);for(var e=s.Application.model.decorShops.getShops(),n=s.Application.model.decorShops.getShop(c.DecorShopType.DECOR),i=0,r=e;i<r.length;i++){var o=r[i];if(o.markerAttention&&(n=o),o.markerDone){n=o;break}}s.Application.model.decorShops.selectedModel=n},DecorWindowMediator}(n.DisplayObjectContainerMediator);e.DecorWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2),n(8),n(32)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DecorWindowBuyFriendCommand(){return null!==t&&t.apply(this,arguments)||this}return c(DecorWindowBuyFriendCommand,t),DecorWindowBuyFriendCommand.prototype.execute=function(i){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return e={selectedFriend:null},(n=new a.ViewContext).showData=e,[4,r.Application.view.show(o.GUINames.DECOR_SELECT_FRIEND_WINDOW,n).onClose];case 1:return t.sent(),e.selectedFriend?[4,r.Application.payment.directBuy(i.itemModel.promoId,i.itemModel.promoOfferStaticData.id,{friendData:{socialId:e.selectedFriend.sUserId,hash:e.selectedFriend.hash}})]:[3,3];case 2:t.sent().success&&r.Application.social.notify([e.selectedFriend.sUserId],r.Application.localization.localize("DECOR_GIFT_NOTIFICATION",{gender:r.Application.profiles.current.isMale})),r.Application.metrics.goalStarkEvent(s.StarkEventsName.TOY_PURCHASE,{tid:i.itemModel.toyId,gift:1}),t.label=3;case 3:return[2]}})})},DecorWindowBuyFriendCommand}(n.CommandBase);e.DecorWindowBuyFriendCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function DecorSelectFriendItemData(t,e,n){this._friend=t,this._name=e,this._eventTarget=n}return Object.defineProperty(DecorSelectFriendItemData.prototype,"friend",{get:function(){return this._friend},enumerable:!0,configurable:!0}),Object.defineProperty(DecorSelectFriendItemData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(DecorSelectFriendItemData.prototype,"eventTarget",{get:function(){return this._eventTarget},enumerable:!0,configurable:!0}),DecorSelectFriendItemData}();e.DecorSelectFriendItemData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(40),n(0),n(454),n(16)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function DecorSelectFriendItemMediator(){return null!==e&&e.apply(this,arguments)||this}return u(DecorSelectFriendItemMediator,e),DecorSelectFriendItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._button=this._container,this._profile=r.Application.profiles.getProfile(this._showData.friend.sUserId,!0),this._profileRenderer=new i.ProfileRenderer,this._profileRenderer.initialize(this._profile,this._container),this.registerListener(this._button,s.POINTER_TAP,this.onTapButton.bind(this)),this.setupFrame()},DecorSelectFriendItemMediator.prototype.setupFrame=function(){var t=this.child("frame"),e=r.Application.model.ratings.getBestPlace(this._profile.userId),n=r.Application.model.ratings.getFrameResource(64,e);this._frameLoadableImage=new a.LoadableImage(t,n)},DecorSelectFriendItemMediator.prototype.onTapButton=function(){this._showData.eventTarget.dispatchEvent(new o.DecorSelectFriendEvent(o.DecorSelectFriendEvent.SELECTED,this._showData.friend))},DecorSelectFriendItemMediator.prototype.destroy=function(){this._frameLoadableImage&&this._frameLoadableImage.destroy(),this._profileRenderer.destroy(),e.prototype.destroy.call(this)},DecorSelectFriendItemMediator}(n.DisplayObjectContainerMediator);e.DecorSelectFriendItemMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(105),n(0),n(1412),n(245),n(129),n(82)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function DecorShopWorkshopModel(){return t.call(this,s.DecorShopType.WORKSHOP)||this}return u(DecorShopWorkshopModel,t),DecorShopWorkshopModel.prototype.init=function(){this._workshopModel=i.Application.model.workshops.getCurrentWorkshop(),this._workshopMarkersModel=i.Application.model.workshopMarkers,this._workshopMarkersModel.addEventListener(o.WorkshopMarkersModel.UPDATE_MARKER_EVENT,this.updateMarkers.bind(this)),t.prototype.init.call(this)},DecorShopWorkshopModel.prototype.createItems=function(){for(var t=0,e=this._workshopModel.collections;t<e.length;t++){var n=e[t];this._items.push(new r.DecorShopItemWorkshopModel(n))}},DecorShopWorkshopModel.prototype.sortItems=function(){this._items.sort(function(t,e){return t.toyModel.static.beauty-e.toyModel.static.beauty})},DecorShopWorkshopModel.prototype.updateMarkers=function(){this._markerAttention=!1;for(var t=this._markerDone=!1,e=0,n=this._items;e<n.length;e++){if(n[e].markerAttention){t=!0;break}}if(t)this._markerAttention=!0;else switch(this._workshopMarkersModel.getMarkerType()){case o.WorkshopMarkersContainerState.ATTENTION:this._markerAttention=!0;break;case o.WorkshopMarkersContainerState.DONE:this._markerDone=!0}this.dispatchEvent(new a.DecorShopModelEvent(a.DecorShopModelEvent.STATE_CHANGED))},DecorShopWorkshopModel.prototype.destroy=function(){this._workshopMarkersModel.removeEventListener(o.WorkshopMarkersModel.UPDATE_MARKER_EVENT,this.updateMarkers.bind(this)),t.prototype.destroy.call(this)},DecorShopWorkshopModel}(n.DecorShopModel);e.DecorShopWorkshopModel=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(65),n(54),n(14),n(161),n(0),n(245),n(37)],void 0===(r=function(t,e,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function DecorShopItemWorkshopModel(t){var e=n.call(this)||this;return e._collectionModel=t,e._toyId=e._collectionModel.toyStaticData.id.toString(),e._awardToyItem=new r.CalculatedAwardItem(o.AwardType.TOY,1,e._toyId),e._workshopMarkersModel=s.Application.model.workshopMarkers,e._workshopMarkersModel.addEventListener(c.WorkshopMarkersModel.UPDATE_MARKER_EVENT,e.updateMarkers.bind(e)),s.Application.dynamic.user.toy.addEventListener(u.ItemCollectionEvent.ITEM_ADDED,e.updateState.bind(e)),e.init(),e._title=e._toyModel.static.view.title,e}return p(DecorShopItemWorkshopModel,n),DecorShopItemWorkshopModel.prototype.updateState=function(){n.prototype.updateState.call(this),0<this._count?this.setState(i.DecorShopItemState.PLACE):this._collectionModel.available?this.setState(i.DecorShopItemState.WORKSHOP_COLLECT):this.setState(i.DecorShopItemState.WORKSHOP_LOCK)},DecorShopItemWorkshopModel.prototype.updateMarkers=function(){if(this._markerAttention=!1,this._markerDone=!1,0<this._toyModel.static.beauty&&this._state===i.DecorShopItemState.PLACE)this._markerAttention=!0;else switch(this._workshopMarkersModel.getMarkerTypeForCollection(this._collectionModel.id)){case c.WorkshopMarkersContainerState.ATTENTION:this._markerAttention=!0;break;case c.WorkshopMarkersContainerState.DONE:this._markerDone=!0}this.dispatchEvent(new a.DecorShopItemModelEvent(a.DecorShopItemModelEvent.STATE_CHANGED))},Object.defineProperty(DecorShopItemWorkshopModel.prototype,"collectionModel",{get:function(){return this._collectionModel},enumerable:!0,configurable:!0}),DecorShopItemWorkshopModel.prototype.destroy=function(){s.Application.dynamic.user.toy.removeEventListener(u.ItemCollectionEvent.ITEM_ADDED,this.updateState.bind(this)),this._workshopMarkersModel.removeEventListener(c.WorkshopMarkersModel.UPDATE_MARKER_EVENT,this.updateMarkers.bind(this)),n.prototype.destroy.call(this)},DecorShopItemWorkshopModel}(i.DecorShopItemModel);e.DecorShopItemWorkshopModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(455),n(4),n(2),n(8)],void 0===(r=function(t,e,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function DecorWindowWorkshopCollectCommand(){return null!==t&&t.apply(this,arguments)||this}return u(DecorWindowWorkshopCollectCommand,t),DecorWindowWorkshopCollectCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return e=r.Application.model.workshops.getCurrentWorkshop().collections,n=e.indexOf(i.itemModel.collectionModel),[4,a.ElkaCore.instance.promiseManager.ask(new o.WorkshopGetSlotPromise)];case 1:return t.sent(),r.Application.view.show(s.GUINames.WORKSHOP_WINDOW,new c.ViewContext({collectionId:n})),[2]}})})},DecorWindowWorkshopCollectCommand}(n.CommandBase);e.DecorWindowWorkshopCollectCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(223),n(1)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function DecorButtonMarkersMediator(){return null!==e&&e.apply(this,arguments)||this}return a(DecorButtonMarkersMediator,e),DecorButtonMarkersMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._doneMarkerImage=this.child("doneMarkerImage"),this._attentionMarkerImage=this.child("attentionMarkerImage"),this._shopsModel=n.Application.model.decorShops,this.registerListener(this._shopsModel,i.DecorShopsModelEvent.STATE_CHANGED,this.updateMarkers.bind(this)),this.updateMarkers()},DecorButtonMarkersMediator.prototype.updateMarkers=function(){this._doneMarkerImage.visible=this._shopsModel.markerDone,this._attentionMarkerImage.visible=this._shopsModel.markerAttention},DecorButtonMarkersMediator}(r.DisplayObjectContainerMediator);e.DecorButtonMarkersMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,I=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(0),n(1416),n(2),n(70),n(1417),n(1418),n(1419),n(22),n(4),n(18),n(1420),n(1421),n(1422),n(456),n(1423),n(1424),n(1425),n(1426),n(144),n(1428),n(1432),n(457),n(1434),n(1435),n(1436)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var D=function(t){function ExtraItemsModule(){return null!==t&&t.apply(this,arguments)||this}return I(ExtraItemsModule,t),ExtraItemsModule.prototype.initialize=function(t){l.ElkaCore.instance.promiseManager.ask(new d.RegisterModuleLoaderPromise(this))},ExtraItemsModule.prototype.onPreloadModule=function(t){this.initModel(),this.mapCommands(),this.mapMediators()},ExtraItemsModule.prototype.mapCommands=function(){p.CommandMap.map(w.SetExtraItemPromise,g.SetExtraItemCommand,this._extraItemsModel),p.CommandMap.map(P.UnsetExtraItemPromise,S.UnsetExtraItemCommand,this._extraItemsModel),p.CommandMap.map(y.BuyExtraItemPromise,f.BuyExtraItemCommand,this._extraItemsModel)},ExtraItemsModule.prototype.mapMediators=function(){i.Application.view.mapMediator(o.GUINames.EXTRA_ITEMS_WINDOW+".previewContainerWrapper.previewContainer.awardsList.*",E.ExtraItemAwardListItemMediator),i.Application.view.mapMediator(o.GUINames.EXTRA_ITEMS_WINDOW+".nameLabel",A.ExtraItemsShopObjectLabelMediator,this._shopModel),i.Application.view.mapMediator(o.GUINames.EXTRA_ITEMS_WINDOW+".previewContainerWrapper.previewContainer",b.ExtraItemsShopPreviewPanelMediator,this._shopModel),i.Application.view.mapMediator(o.GUINames.EXTRA_ITEMS_WINDOW+".itemsCategoryContainer.itemsCategory",u.ExtraItemsCategoryMediator,this._shopModel),i.Application.view.mapMediator(o.GUINames.EXTRA_ITEMS_WINDOW+".itemsCategoryContainer.itemsCategory.tabsContainer.*",h.ExtraItemsCategoryToggleButtonMediator,this._shopModel);var t=o.GUINames.EXTRA_ITEMS_WINDOW+".itemsCategoryContainer.itemsCategory.scrollContainer.listWrapper.extraItemList.*";i.Application.view.mapMediator(""+t,_.ExtraItemListItemMediator,this._shopModel),i.Application.view.mapMediator(t+".lockedExtraItemContainer",m.LockedExtraItemMediator,this._shopModel),i.Application.view.mapMediator(t+".simpleExtraItemContainer",v.UnlockedExtraItemMediator,this._shopModel),i.Application.view.mapMediator(t+".selectedExtraItemContainer",v.UnlockedExtraItemMediator,this._shopModel),i.Application.view.mapMediator(t+".selectedExtraItemContainer",M.ExtraItemBeautyAnimationMediator),i.Application.view.mapMediator(o.GUINames.EXTRA_ITEMS_WINDOW+".shopsCategories.*",c.ShopCategoryToggleButtonMediator,this._shopModel),i.Application.view.mapMediator(""+o.GUINames.EXTRA_ITEMS_WINDOW,s.ExtraItemsShopMediator,this._shopModel),i.Application.view.mapMediator(o.GUINames.HUD+".bottomPanel.clothesButtonContainer",r.HUDExtraItemsButtonMediator,this._shopModel)},ExtraItemsModule.prototype.initModel=function(){i.Application.model.extraItems=this._extraItemsModel=new a.ExtraItemsModel(i.Application.static.data.extraItems,i.Application.dynamic.user.extraItem,i.Application.dynamic.user.activeExtraItem),this._shopModel=new O.ExtraItemShopsModel(this._extraItemsModel,i.Application.static.data.extraItemsShops,i.Application.static.data.promos)},ExtraItemsModule.prototype.onLeaveFriend=function(){},ExtraItemsModule.prototype.onVisitFriend=function(t){},ExtraItemsModule}(n.Module);e.ExtraItemsModule=D}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(55),n(0),n(1),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIFactory,c=uipixi.GestureEvent,u=function(e){function HUDExtraItemsButtonMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._isWaitUsing=!1,t.BUTTON_NAME="clothesButton",t}return p(HUDExtraItemsButtonMediator,e),HUDExtraItemsButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._requirements=i.Application.static.data.client.minLevelParams.minLevelParam.getItem(this.BUTTON_NAME).requirements,i.Application.requirements.check(this._requirements)?this.addButton():(this._isWaitUsing=!0,i.Application.requirements.wait(this._requirements,this.addButton.bind(this)))},HUDExtraItemsButtonMediator.prototype.addButton=function(){this._isWaitUsing&&(i.Application.requirements.unwait(this._requirements,this.addButton.bind(this)),this._isWaitUsing=!1);var t=s.instance.createUIElementByName(this.BUTTON_NAME);this._container.addChild(t),this.registerListener(this._container,c.POINTER_TAP,this.onButton.bind(this)),this._marker=this.child("markerImage"),this.registerListener(this._mapData,n.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED,this.updateMarker.bind(this)),this.updateMarker()},HUDExtraItemsButtonMediator.prototype.updateMarker=function(){this._marker.visible=this._mapData.canBuyAnyItem},HUDExtraItemsButtonMediator.prototype.onButton=function(t){var e=this._mapData.getShopsByScreen(i.Application.dynamic.user.screen);i.Application.view.show(o.GUINames.EXTRA_ITEMS_WINDOW,new a.ViewContext(e))},HUDExtraItemsButtonMediator.prototype.destroy=function(){this._isWaitUsing&&i.Application.requirements.unwait(this._requirements,this.addButton.bind(this)),e.prototype.destroy.call(this)},HUDExtraItemsButtonMediator}(r.DisplayObjectContainerMediator);e.HUDExtraItemsButtonMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8),n(55)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=uipixi.UIFactory,c=function(e){function ExtraItemsShopMediator(){return null!==e&&e.apply(this,arguments)||this}return u(ExtraItemsShopMediator,e),ExtraItemsShopMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._mapData,this._model.turnOnPreviewMode(),this.initComponents(),this.setupComponents()},ExtraItemsShopMediator.prototype.initComponents=function(){this._itemsCategoryContainer=this.child("itemsCategoryContainer"),this._shopsCategories=this.child("shopsCategories")},ExtraItemsShopMediator.prototype.setupComponents=function(){for(var t=0,e=this._showData;t<e.length;t++){var n=e[t];r.Application.view.addChild(this._shopsCategories,o.GUINames.SHOP_CATEGORY_TOGGLE_BUTTON,new a.ViewContext(n))}var i=this._showData[0];this.setupItemsCategory(i),r.Application.view.addChild(this.child("previewContainerWrapper"),o.GUINames.EXTRA_ITEMS_SHOP_PREVIEW_CONTAINER,new a.ViewContext(i)),this.registerListener(this._model,s.ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED,this.onCategoryChanged.bind(this))},ExtraItemsShopMediator.prototype.onCategoryChanged=function(t){this.setupItemsCategory(t.data)},ExtraItemsShopMediator.prototype.setupItemsCategory=function(t){this._itemsCategory&&this._itemsCategoryContainer.removeChild(this._itemsCategory),this._itemsCategory=i.instance.createUIElementByName(o.GUINames.EXTRA_ITEMS_CATEGORY),r.Application.view.addChild(this._itemsCategoryContainer,this._itemsCategory,new a.ViewContext(t))},ExtraItemsShopMediator.prototype.destroy=function(){this._model.turnOnNormalMode(),e.prototype.destroy.call(this)},ExtraItemsShopMediator}(n.DisplayObjectContainerMediator);e.ExtraItemsShopMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(55),n(16)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.ToggleButtonEvent,a=function(e){function ShopCategoryToggleButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return s(ShopCategoryToggleButtonMediator,e),ShopCategoryToggleButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._mapData,this._categoryData=this._showData,this._toggle=this._container,this._iconImage=this.child("iconImage"),this._loadableImage=new r.LoadableImage(this._iconImage,this._categoryData.icon),this._marker=this.child("markerImage"),this.registerListener(this._toggle,o.SELECTED,this.onCategorySelected.bind(this)),this.registerListener(this._categoryData,i.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED,this.updateMarker.bind(this)),this.updateMarker()},ShopCategoryToggleButtonMediator.prototype.updateMarker=function(){this._marker.visible=this._categoryData.canBuyAnyItem},ShopCategoryToggleButtonMediator.prototype.onCategorySelected=function(t){this._model.dispatchEvent(new i.ExtraItemShopsModelEvent(i.ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED,this._categoryData))},ShopCategoryToggleButtonMediator.prototype.destroy=function(){this._loadableImage.destroy(),e.prototype.destroy.call(this)},ShopCategoryToggleButtonMediator}(n.DisplayObjectContainerMediator);e.ShopCategoryToggleButtonMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(8),n(2),n(55)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.UIFactory,i=function(e){function ExtraItemsCategoryMediator(){return null!==e&&e.apply(this,arguments)||this}return u(ExtraItemsCategoryMediator,e),ExtraItemsCategoryMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._category=this._showData,this._tabsContainer=this.child("tabsContainer"),this._extraItemList=this.child("extraItemList"),this._model=this._mapData,this.setupTabs()},ExtraItemsCategoryMediator.prototype.setupTabs=function(){for(;0<this._tabsContainer.children.length;)this._tabsContainer.removeChild(this._tabsContainer.children[this._tabsContainer.children.length-1]);for(var t=0,e=this._category.categories;t<e.length;t++){var n=e[t],i=c.instance.createUIElementByName(a.GUINames.EXTRA_ITEM_CATEGORY_TOGGLE_BUTTON);i.visible=1<this._category.categories.length,r.Application.view.addChild(this._tabsContainer,i,new o.ViewContext(n))}this._scrollContainer=this.child("scrollContainer"),this.setupList(this._category.categories[0]),this.registerListener(this._model,s.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_CATEGORY_SELECTED,this.onExtraItemCategorySelected.bind(this))},ExtraItemsCategoryMediator.prototype.onExtraItemCategorySelected=function(t){this.setupList(t.data)},ExtraItemsCategoryMediator.prototype.setupList=function(t){this._extraItemList.removeAllItems(),this._scrollContainer.scroll=0,this._extraItemList.addItems(t.sortedSlots)},ExtraItemsCategoryMediator}(n.DisplayObjectContainerMediator);e.ExtraItemsCategoryMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(55),n(16)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.ToggleButtonEvent,a=function(e){function ExtraItemsCategoryToggleButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return s(ExtraItemsCategoryToggleButtonMediator,e),ExtraItemsCategoryToggleButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._mapData,this._category=this._showData,this._toggle=this._container,this._iconImage=this.child("iconImage"),this._loadableImage=new r.LoadableImage(this._iconImage,this._category.icon),this._marker=this.child("markerImage"),this.registerListener(this._toggle,o.SELECTED,this.onSelectCategory.bind(this)),this.registerListener(this._category,i.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED,this.updateMarker.bind(this)),this.updateMarker()},ExtraItemsCategoryToggleButtonMediator.prototype.updateMarker=function(){this._marker.visible=this._category.canBuyAnyItem},ExtraItemsCategoryToggleButtonMediator.prototype.onSelectCategory=function(t){this._model.dispatchEvent(new i.ExtraItemShopsModelEvent(i.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_CATEGORY_SELECTED,this._category))},ExtraItemsCategoryToggleButtonMediator.prototype.destroy=function(){this._loadableImage.destroy(),e.prototype.destroy.call(this)},ExtraItemsCategoryToggleButtonMediator}(n.DisplayObjectContainerMediator);e.ExtraItemsCategoryToggleButtonMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8),n(55)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=uipixi.UIFactory,u=function(e){function ExtraItemListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return p(ExtraItemListItemMediator,e),ExtraItemListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._mapData,this._extraItemSlot=this._showData,this.setup()},ExtraItemListItemMediator.prototype.setup=function(){this._itemModel=this._extraItemSlot.extraItem,this._itemModel.hasItem()||!this._extraItemSlot.locked?(this._child=c.instance.createUIElementByName(r.GUINames.SIMPLE_EXTRA_ITEM_CONTAINER),i.Application.view.addChild(this._container,this._child,new o.ViewContext(this._extraItemSlot)),this.registerListener(this._container,s.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._model,a.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,this.onSelectedItem.bind(this))):i.Application.view.addChild(this._container,r.GUINames.LOCKED_EXTRA_ITEM_CONTAINER,new o.ViewContext(this._extraItemSlot)),this._selected=!1},ExtraItemListItemMediator.prototype.onSelectedItem=function(t){if(t.data&&t.data.extraItem.id===this._itemModel.id){if(this._selected)return;this._selected=!0,this._container.removeChild(this._child),this._child=c.instance.createUIElementByName(r.GUINames.SELECTED_EXTRA_ITEM_CONTAINER),i.Application.view.addChild(this._container,this._child,new o.ViewContext(this._extraItemSlot))}else{if(!this._selected)return;this._selected=!1,this._container.removeChild(this._child),this._child=c.instance.createUIElementByName(r.GUINames.SIMPLE_EXTRA_ITEM_CONTAINER),i.Application.view.addChild(this._container,this._child,new o.ViewContext(this._extraItemSlot))}},ExtraItemListItemMediator.prototype.onTap=function(){this._selected||(this.unregisterListener(this._model,a.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,this.onSelectedItem.bind(this)),this._selected=!0,this._container.removeChild(this._child),this._child=c.instance.createUIElementByName(r.GUINames.SELECTED_EXTRA_ITEM_CONTAINER),i.Application.view.addChild(this._container,this._child,new o.ViewContext(this._extraItemSlot)),this._model.dispatchEvent(new a.ExtraItemShopsModelEvent(a.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,this._extraItemSlot)),this.registerListener(this._model,a.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,this.onSelectedItem.bind(this)))},ExtraItemListItemMediator}(n.DisplayObjectContainerMediator);e.ExtraItemListItemMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(144),n(4),n(68),n(8),n(2)],void 0===(r=function(t,e,n,s,c,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function BuyExtraItemCommand(){return null!==t&&t.apply(this,arguments)||this}return a(BuyExtraItemCommand,t),BuyExtraItemCommand.prototype.execute=function(a){return h(this,void 0,void 0,function(){var e,n,i,r,o;return _(this,function(t){switch(t.label){case 0:return e=s.Application.price.calculate(a.model.offer.prices),[4,s.Application.confirm.show(p.ConfirmType.Buy,{prices:e,description:s.Application.localization.localize("EXTRA_ITEM_BUY_CONFIRM_DESCRIPTION")})];case 1:return t.sent()?[4,s.Application.payment.directBuy(a.model.promoId,a.model.offer.id,{accrueAwardImmediate:!1})]:[3,5];case 2:return(n=t.sent()).success?(i=s.Application.award.convertObjectToCalculated(n.awardObject),(r=a.model.boostAward)&&i.add(r),o=new l.ViewContext({baseAward:i,title:s.Application.localization.localize("PAYMENT_AWARD_TITLE"),description:s.Application.localization.localize("PAYMENT_AWARD_DESCRIPTION")}),[4,s.Application.view.show(d.GUINames.AWARDS_WINDOW,o).onClose]):[3,5];case 3:return t.sent(),s.Application.award.accrueAwardImmediately(n.awardObject),[4,u.ElkaCore.instance.promiseManager.ask(new c.SetExtraItemPromise(a.model.extraItem.id))];case 4:return t.sent(),a.model.completeBuy(),a.resolve({success:!0}),[2];case 5:return a.resolve({success:!1}),[2]}})})},BuyExtraItemCommand}(n.CommandBase);e.BuyExtraItemCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(16)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function LockedExtraItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(LockedExtraItemMediator,e),LockedExtraItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._extraItemSlot=this._showData,this._model=this._mapData,this.initComponents(),this.setupComponents()},LockedExtraItemMediator.prototype.initComponents=function(){this._nameLabel=this.child("nameLabel"),this._iconImage=this.child("iconImage"),this._requirementLabel=this.child("requirementLabel")},LockedExtraItemMediator.prototype.setupComponents=function(){this._nameLabel.text=i.Application.localization.localize(this._showData.offer.title),this._loadableImage=new r.LoadableImage(this._iconImage,this._extraItemSlot.extraItem.resource);var t=this._extraItemSlot.offer.buyRequirements.requirement[0].minValue.toString();this._requirementLabel.text=i.Application.localization.localize(this._extraItemSlot.offer.buyRequirements.view.textKey,{stage:t})},LockedExtraItemMediator.prototype.destroy=function(){this._loadableImage.destroy(),e.prototype.destroy.call(this)},LockedExtraItemMediator}(n.DisplayObjectContainerMediator);e.LockedExtraItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(15),n(77),n(70),n(14),n(55),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u){"use strict";var p,l;Object.defineProperty(e,"__esModule",{value:!0}),(l=p||(p={})).ownPutOn="ownPutOn",l.ownPutOff="ownPutOff",l.notOwnedCanBuy="notOwnedCanBuy";var d=function(e){function UnlockedExtraItemMediator(){return null!==e&&e.apply(this,arguments)||this}return h(UnlockedExtraItemMediator,e),UnlockedExtraItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._mapData,this._extraItemSlot=this._showData,this.initComponents(),this.setupComponents()},UnlockedExtraItemMediator.prototype.initComponents=function(){this._nameLabel=this.child("nameLabel"),this._iconImage=this.child("iconImage"),this._priceContainer=this.child("priceContainer"),this._rouletteContainer=this.child("rouletteContainer"),this._beautyContainer=this.child("beautyContainer"),this._marker=this.child("markerImage")},UnlockedExtraItemMediator.prototype.setupComponents=function(){if(this.registerListener(this._extraItemSlot.extraItem,o.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE,this.onStateChanged.bind(this)),this.registerListener(this._extraItemSlot.extraItem,o.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,this.onStateChanged.bind(this)),this.registerListener(this._extraItemSlot,c.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED,this.updateMarker.bind(this)),this._nameLabel.text=i.Application.localization.localize(this._extraItemSlot.offer.title),this._loadableImage=new u.LoadableImage(this._iconImage,this._extraItemSlot.extraItem.resource),!this._extraItemSlot.extraItem.hasItem()){var t=this._extraItemSlot.calculatedAward.getByType(s.AwardType.ROULETTE);t?this._rouletteRenderer=(new r.AwardRenderer).initialize(t,this._rouletteContainer,{iconId:48}):this._rouletteContainer.visible=!1;var e=this._extraItemSlot.calculatedAward.getByType(s.AwardType.BEAUTY);this._beautyRenderer=(new r.AwardRenderer).initialize(e,this._beautyContainer,{iconId:48});var n=i.Application.price.calculate(this._extraItemSlot.offer.prices);this._priceRenderer=(new r.AwardRenderer).initialize(n.prices[0],this._priceContainer,{iconId:64,fit:!0})}this.updateState(),this.updateMarker()},UnlockedExtraItemMediator.prototype.updateMarker=function(){this._marker.visible=this._extraItemSlot.canBuy},UnlockedExtraItemMediator.prototype.onStateChanged=function(){this.updateState()},UnlockedExtraItemMediator.prototype.updateState=function(){this._extraItemSlot.extraItem.isActive(a.ExtraItemsModelMode.NORMAL)?this._container.currentState=p.ownPutOn:this._extraItemSlot.extraItem.hasItem()?this._container.currentState=p.ownPutOff:this._container.currentState=p.notOwnedCanBuy},UnlockedExtraItemMediator.prototype.destroy=function(){this._priceRenderer&&this._priceRenderer.destroy(),this._beautyRenderer&&this._beautyRenderer.destroy(),this._rouletteRenderer&&this._rouletteRenderer.destroy(),this._loadableImage.destroy(),e.prototype.destroy.call(this)},UnlockedExtraItemMediator}(n.DisplayObjectContainerMediator);e.UnlockedExtraItemMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,v=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(55),n(456),n(4),n(77),n(144),n(457),n(15),n(70),n(14)],void 0===(r=function(t,e,n,c,i,r,o,a,s,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h,_,f=uipixi.GestureEvent,y=uipixi.UIContainer;(_=h||(h={})).default="default",_.canBuy="canBuy",_.activated="activated",_.notActivated="notActivated";var m=function(e){function ExtraItemsShopPreviewPanelMediator(){return null!==e&&e.apply(this,arguments)||this}return v(ExtraItemsShopPreviewPanelMediator,e),ExtraItemsShopPreviewPanelMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=this._mapData,this.initComponents(),this.setupComponents(),this.setCategoryData(this._showData)},ExtraItemsShopPreviewPanelMediator.prototype.initComponents=function(){this._putOn=this.child("putOn"),this._itemsCollectedLabel=this.child("itemsCollectedLabel"),this._canBuy=this.child("canBuy"),this._awardsList=this.child("awardsList"),this._putOff=this.child("putOff"),this._objectContainer=this.child("objectContainer")},ExtraItemsShopPreviewPanelMediator.prototype.setupComponents=function(){this.registerListener(this._putOn,f.POINTER_TAP,this.onPutOnTap.bind(this)),this.registerListener(this._canBuy,f.POINTER_TAP,this.onCanBuyTap.bind(this)),this.registerListener(this._putOff,f.POINTER_TAP,this.onPutOffTap.bind(this)),this.registerListener(this._model,i.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,this.onExtraItemSelected.bind(this)),this.registerListener(this._model,i.ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED,this.onShopCategorySelected.bind(this)),this.registerListener(this._model,i.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_CATEGORY_SELECTED,this.onExtraItemCategoryChanged.bind(this))},ExtraItemsShopPreviewPanelMediator.prototype.updateState=function(){this._selectedExtraItemSlot?this._selectedExtraItemSlot.extraItem.hasItem()?this._selectedExtraItemSlot.extraItem.isActive(l.ExtraItemsModelMode.NORMAL)?(this.updateItemsCollectedLabel(),this._container.currentState=h.activated):(this.updateItemsCollectedLabel(),this._container.currentState=h.notActivated):(this.updateAwardListAndButton(),this._container.currentState=h.canBuy):(this.updateItemsCollectedLabel(),this._container.currentState=h.default)},ExtraItemsShopPreviewPanelMediator.prototype.onExtraItemCategoryChanged=function(t){this.updateSelectedSlot(null),this.updateState()},ExtraItemsShopPreviewPanelMediator.prototype.onShopCategorySelected=function(t){this._selectedCategory=t.data,this.updateObject(this._selectedCategory),this.updateSelectedSlot(null),this.updateState()},ExtraItemsShopPreviewPanelMediator.prototype.updateObject=function(t){for(;0<this._objectContainer.children.length;)this._objectContainer.removeChild(this._objectContainer.children[0]);var e=new y(t.object);e.anchor="topLeft",e.outside="topLeft",this._objectContainer.addChild(e)},ExtraItemsShopPreviewPanelMediator.prototype.onExtraItemSelected=function(t){this.updateSelectedSlot(t.data?t.data:null),this.updateState()},ExtraItemsShopPreviewPanelMediator.prototype.setCategoryData=function(t){this._selectedCategory=t,this.updateState(),this.updateObject(this._selectedCategory)},ExtraItemsShopPreviewPanelMediator.prototype.updateAwardListAndButton=function(){var t=c.Application.price.calculate(this._selectedExtraItemSlot.offer.prices);this._priceRenderer=(new p.AwardRenderer).initialize(t.prices[0],this._canBuy,{iconId:64,fit:!0});var e=[this._selectedExtraItemSlot.calculatedAward.getByType(d.AwardType.BEAUTY)],n=this._selectedExtraItemSlot.boostAward;n&&e.push(n);var i=this._selectedExtraItemSlot.calculatedAward.getByType(d.AwardType.ROULETTE);i&&e.push(i),this._awardsList.removeAllItems(),this._awardsList.addItems(e)},ExtraItemsShopPreviewPanelMediator.prototype.updateSelectedSlot=function(t){this._selectedExtraItemSlot&&(this.unregisterListener(this._selectedExtraItemSlot.extraItem,a.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE,this.onStateChanged.bind(this)),this.unregisterListener(this._selectedExtraItemSlot.extraItem,a.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,this.onStateChanged.bind(this))),this._selectedExtraItemSlot=t,this._selectedExtraItemSlot&&(this.registerListener(this._selectedExtraItemSlot.extraItem,a.ExtraItemModelEvent.EXTRA_ITEM_ACTIVATE_CHANGE,this.onStateChanged.bind(this)),this.registerListener(this._selectedExtraItemSlot.extraItem,a.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,this.onStateChanged.bind(this)))},ExtraItemsShopPreviewPanelMediator.prototype.onStateChanged=function(){this.updateState()},ExtraItemsShopPreviewPanelMediator.prototype.updateItemsCollectedLabel=function(){for(var t=[],e=0,n=this._selectedCategory.categories;e<n.length;e++){var i=n[e];t=t.concat(c.Application.model.extraItems.getItemsByType(i.extraItemType))}for(var r=t.length,o=0,a=0,s=t;a<s.length;a++){s[a].hasItem()&&(o+=1)}this._itemsCollectedLabel.text=c.Application.localization.localize("EXTRA_ITEMS_SHOP_ITEMS_COLLECTED",{current:o.toString(),all:r.toString()})},ExtraItemsShopPreviewPanelMediator.prototype.onPutOnTap=function(){o.ElkaCore.instance.promiseManager.ask(new s.SetExtraItemPromise(this._selectedExtraItemSlot.extraItem.id))},ExtraItemsShopPreviewPanelMediator.prototype.onCanBuyTap=function(){o.ElkaCore.instance.promiseManager.ask(new r.BuyExtraItemPromise(this._selectedExtraItemSlot))},ExtraItemsShopPreviewPanelMediator.prototype.onPutOffTap=function(){o.ElkaCore.instance.promiseManager.ask(new u.UnsetExtraItemPromise(this._selectedExtraItemSlot)),this._model.dispatchEvent(new i.ExtraItemShopsModelEvent(i.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,null))},ExtraItemsShopPreviewPanelMediator.prototype.destroy=function(){this._priceRenderer&&this._priceRenderer.destroy(),e.prototype.destroy.call(this)},ExtraItemsShopPreviewPanelMediator}(n.DisplayObjectContainerMediator);e.ExtraItemsShopPreviewPanelMediator=m}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1427)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function SetExtraItemCommand(){return null!==t&&t.apply(this,arguments)||this}return a(SetExtraItemCommand,t),SetExtraItemCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.ExtraItemSetAction([e.extraItemId]))];case 1:return t.sent().output.success&&this._data.updateActive(e.extraItemId,!0),[2]}})})},SetExtraItemCommand}(n.CommandBase);e.SetExtraItemCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function ExtraItemSetAction(t){var e=n.call(this)||this;return e.action="set",e.controller="extraItem",e.input=new i.ActionInput({itemIds:t}),e.output=new o,e}return a(ExtraItemSetAction,n),ExtraItemSetAction}(n.Action);e.ExtraItemSetAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.success=t.data&&1===t.data.success},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(70),n(1429),n(55)],void 0===(r=function(t,e,n,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(c){function ExtraItemShopsModel(t,e,n){var i=c.call(this)||this;i._canBuyAnyItem=!1,i._extraItemsModel=t,i._shopsMap=new core.Map,i._shops=[];for(var r=0,o=e.extraItemsShop;r<o.length;r++){var a=o[r];i._shopsMap.has(a.screenId)||i._shopsMap.set(a.screenId,[]);var s=new u.ExtraItemShopModel(t,a,n);i._shopsMap.get(a.screenId).push(s),i._shops.push(s),s.addEventListener(p.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED,i.onAvailableStatusChanged.bind(i))}return i.onAvailableStatusChanged(),i}return a(ExtraItemShopsModel,c),ExtraItemShopsModel.prototype.onAvailableStatusChanged=function(){for(var t=!1,e=0,n=this._shops;e<n.length;e++){if(n[e].canBuyAnyItem){t=!0;break}}!0===t!=(!0===this._canBuyAnyItem)&&(this._canBuyAnyItem=t,this.dispatchEvent(new p.ExtraItemShopsModelEvent(p.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED)))},Object.defineProperty(ExtraItemShopsModel.prototype,"canBuyAnyItem",{get:function(){return this._canBuyAnyItem},enumerable:!0,configurable:!0}),ExtraItemShopsModel.prototype.getShopsByScreen=function(t){return this._shopsMap.get(t)},ExtraItemShopsModel.prototype.onSelectedItem=function(t){this._extraItemsModel.setPreviewItem(t.data?t.data.extraItem:null)},ExtraItemShopsModel.prototype.clearSelected=function(){this._extraItemsModel.setPreviewItem(null)},ExtraItemShopsModel.prototype.turnOnPreviewMode=function(){this.addEventListener(p.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,this.onSelectedItem.bind(this)),this.addEventListener(p.ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED,this.clearSelected.bind(this)),this.addEventListener(p.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_CATEGORY_SELECTED,this.clearSelected.bind(this)),this._extraItemsModel.mode=n.ExtraItemsModelMode.PREVIEW},ExtraItemShopsModel.prototype.turnOnNormalMode=function(){this.removeEventListener(p.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_SELECTED,this.onSelectedItem.bind(this)),this.removeEventListener(p.ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED,this.clearSelected.bind(this)),this.removeEventListener(p.ExtraItemShopsModelEvent.ON_EXTRA_ITEM_CATEGORY_SELECTED,this.clearSelected.bind(this)),this._extraItemsModel.mode=n.ExtraItemsModelMode.NORMAL},ExtraItemShopsModel}(uipixi.BaseEventTarget);e.ExtraItemShopsModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1430),n(55)],void 0===(r=function(t,e,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(c){function ExtraItemShopModel(t,e,n){var i=c.call(this)||this;i._canBuyAnyItem=!1,i._categories=[],i._screenId=e.screenId,i._icon=e.icon,i._object=e.object;for(var r=0,o=e.category;r<o.length;r++){var a=o[r],s=new u.ExtraItemCategoryModel(a,n.promo.getItem(a.promoId),t);i._categories.push(s),s.addEventListener(p.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED,i.onAvailableStatusChanged.bind(i))}return i.onAvailableStatusChanged(),i}return a(ExtraItemShopModel,c),ExtraItemShopModel.prototype.onAvailableStatusChanged=function(){for(var t=!1,e=0,n=this._categories;e<n.length;e++){if(n[e].canBuyAnyItem){t=!0;break}}!0===t!=(!0===this._canBuyAnyItem)&&(this._canBuyAnyItem=t,this.dispatchEvent(new p.ExtraItemShopsModelEvent(p.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED)))},Object.defineProperty(ExtraItemShopModel.prototype,"canBuyAnyItem",{get:function(){return this._canBuyAnyItem},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemShopModel.prototype,"screenId",{get:function(){return this._screenId},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemShopModel.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemShopModel.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemShopModel.prototype,"categories",{get:function(){return this._categories},enumerable:!0,configurable:!0}),ExtraItemShopModel}(uipixi.BaseEventTarget);e.ExtraItemShopModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1431),n(55)],void 0===(r=function(t,e,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(c){function ExtraItemCategoryModel(t,e,n){var i=c.call(this)||this;i._canBuyAnyItem=!1,i._icon=t.icon,i._extraItemType=t.extraItemType,i._promoId=t.promoId,i._slots=[];for(var r=0,o=e.offers.items;r<o.length;r++){var a=o[r],s=new u.ExtraItemSlotModel(i._promoId,a,n);i._slots.push(s),s.extraItem.hasItem()||s.addEventListener(p.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED,i.onAvailableStatusChanged.bind(i))}return i.onAvailableStatusChanged(),i}return a(ExtraItemCategoryModel,c),ExtraItemCategoryModel.prototype.onAvailableStatusChanged=function(){for(var t=!1,e=0,n=this._slots;e<n.length;e++){if(n[e].canBuy){t=!0;break}}!0===t!=(!0===this._canBuyAnyItem)&&(this._canBuyAnyItem=t,this.dispatchEvent(new p.ExtraItemShopsModelEvent(p.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED)))},Object.defineProperty(ExtraItemCategoryModel.prototype,"canBuyAnyItem",{get:function(){return this._canBuyAnyItem},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemCategoryModel.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemCategoryModel.prototype,"extraItemType",{get:function(){return this._extraItemType},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemCategoryModel.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemCategoryModel.prototype,"slots",{get:function(){return this._slots},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemCategoryModel.prototype,"sortedSlots",{get:function(){return this._slots.sort(function(t,e){if(t.isActive)return-1;if(e.isActive)return 1;if(t.readyToBuy())return e.readyToBuy()?t.sortWeight1()-e.sortWeight1():-1;if(t.hasItem)return e.readyToBuy()?1:e.locked?-1:t.sortWeight1()-e.sortWeight1();if(t.locked){if(!e.locked)return 1;if(e.locked)return t.sortWeight2()-e.sortWeight2()}return 0})},enumerable:!0,configurable:!0}),ExtraItemCategoryModel}(uipixi.BaseEventTarget);e.ExtraItemCategoryModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(14),n(55),n(77),n(42),n(54)],void 0===(r=function(t,e,a,s,n,c,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(o){function ExtraItemSlotModel(t,e,n){var i=o.call(this)||this;i._lockWaitId=null,i._canBuy=!1,i._promoId=t,i._offer=e,i._calculatedAward=a.Application.award.calculate(i._offer.awards),i._calculatedPrice=a.Application.price.calculate(i._offer.prices);var r=parseInt(i._calculatedAward.getByType(s.AwardType.EXTRA_ITEM).itemId);return i._extraItem=n.getItem(r),i.locked?i._lockWaitId=a.Application.requirements.wait(i._offer.buyRequirements,i.onExtraItemUnlocked.bind(i)):i.addPriceResourceCountListener(),i._extraItem.hasItem()||i._extraItem.addEventListener(c.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,i.onExtraItemIsOwn.bind(i)),i.updateMarker(),i}return u(ExtraItemSlotModel,o),ExtraItemSlotModel.prototype.addPriceResourceCountListener=function(){var t=this._calculatedPrice.prices[0].itemId;a.Application.model.resources.get(t).addEventListener(i.ResourceModelEvent.COUNT_CHANGED,this.onPriceResourceCountChange.bind(this))},ExtraItemSlotModel.prototype.removePriceResourceCountListener=function(){var t=this._calculatedPrice.prices[0].itemId;a.Application.model.resources.get(t).removeEventListener(i.ResourceModelEvent.COUNT_CHANGED,this.onPriceResourceCountChange.bind(this))},ExtraItemSlotModel.prototype.onPriceResourceCountChange=function(){this.updateMarker()},ExtraItemSlotModel.prototype.onExtraItemUnlocked=function(){a.Application.requirements.unwaitById(this._lockWaitId),this._lockWaitId=null,this._extraItem.hasItem()||this.addPriceResourceCountListener(),this.updateMarker()},ExtraItemSlotModel.prototype.onExtraItemIsOwn=function(t){this._extraItem.removeEventListener(c.ExtraItemModelEvent.EXTRA_ITEM_IS_OWN,this.onExtraItemIsOwn.bind(this)),this.removePriceResourceCountListener(),this._lockWaitId&&a.Application.requirements.unwaitById(this._lockWaitId),this.updateMarker()},ExtraItemSlotModel.prototype.updateMarker=function(){if(this.locked||this._extraItem.hasItem())!0===this._canBuy&&(this._canBuy=!1,this.dispatchEvent(new n.ExtraItemShopsModelEvent(n.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED)));else{var t=a.Application.price.canSpend(this._offer.prices);!1===t!=(!1===this._canBuy)&&(this._canBuy=t,this.dispatchEvent(new n.ExtraItemShopsModelEvent(n.ExtraItemShopsModelEvent.AVAILABLE_STATUS_CHANGED)))}},ExtraItemSlotModel.prototype.sortWeight1=function(){return parseInt(this.offer.prices.price[0].value)},ExtraItemSlotModel.prototype.sortWeight2=function(){return 0===this.offer.requirements.requirement.length?1:parseInt(this.offer.requirements.requirement[0].minValue)},ExtraItemSlotModel.prototype.readyToBuy=function(){return!this.locked&&!this.hasItem},Object.defineProperty(ExtraItemSlotModel.prototype,"isActive",{get:function(){return this._extraItem.isActive()},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"hasItem",{get:function(){return this._extraItem.hasItem()},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"canBuy",{get:function(){return this._canBuy},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"locked",{get:function(){return!a.Application.requirements.check(this._offer.buyRequirements)},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"promoId",{get:function(){return this._promoId},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"offer",{get:function(){return this._offer},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"extraItem",{get:function(){return this._extraItem},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"calculatedAward",{get:function(){return this._calculatedAward},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"calculatedPriceItem",{get:function(){return this._calculatedPrice.prices[0]},enumerable:!0,configurable:!0}),Object.defineProperty(ExtraItemSlotModel.prototype,"boostAward",{get:function(){if(0<this.extraItem.boost)return new r.CalculatedAwardItem(s.AwardType.GENERATOR_BOOST,this.extraItem.boost,this.extraItem.itemId)},enumerable:!0,configurable:!0}),ExtraItemSlotModel.prototype.completeBuy=function(){this.dispatchEvent(new n.ExtraItemShopsModelEvent(n.ExtraItemShopsModelEvent.BOUGHT))},ExtraItemSlotModel}(uipixi.BaseEventTarget);e.ExtraItemSlotModel=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1433),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function UnsetExtraItemCommand(){return null!==t&&t.apply(this,arguments)||this}return a(UnsetExtraItemCommand,t),UnsetExtraItemCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,r.Application.server.send(new i.ExtraItemUnsetAction([e.model.extraItem.id]))];case 1:return t.sent().output.success&&this._data.updateActive(e.model.extraItem.id,!1),[2]}})})},UnsetExtraItemCommand}(n.CommandBase);e.UnsetExtraItemCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function ExtraItemUnsetAction(t){var e=n.call(this)||this;return e.action="unset",e.controller="extraItem",e.input=new i.ActionInput({itemIds:t}),e.output=new o,e}return a(ExtraItemUnsetAction,n),ExtraItemUnsetAction}(n.Action);e.ExtraItemUnsetAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.success=t.data&&1===t.data.success},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(21)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function ExtraItemAwardListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ExtraItemAwardListItemMediator,e),ExtraItemAwardListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new i.AwardRenderer).initialize(this._showData,this._container,{iconId:"48",tooltip:r.TooltipAnchor.Top})},ExtraItemAwardListItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},ExtraItemAwardListItemMediator}(n.DisplayObjectContainerMediator);e.ExtraItemAwardListItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57),n(55),n(0)],void 0===(r=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ExtraItemsShopObjectLabelMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ExtraItemsShopObjectLabelMediator,e),ExtraItemsShopObjectLabelMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._label=t.displayObject,this._shopModel=this._mapData,this.registerListener(this._shopModel,i.ExtraItemShopsModelEvent.ON_SHOP_CATEGORY_SELECTED,this.onObjectChange.bind(this)),this.updateLabel(this._shopModel.getShopsByScreen(o.Application.dynamic.user.screen)[0].object)},ExtraItemsShopObjectLabelMediator.prototype.onObjectChange=function(t){this.updateLabel(t.data.object)},ExtraItemsShopObjectLabelMediator.prototype.updateLabel=function(t){var e=o.Application.model.objects.getObject(t);if(e)this._label.text=e.title;else for(var n=0,i=o.Application.static.data.animals.animal.items;n<i.length;n++){var r=i[n];if(r.name===t){this._label.text=o.Application.localization.localize(r.view.defaultNameKey);break}}},ExtraItemsShopObjectLabelMediator}(n.DisplayObjectMediator);e.ExtraItemsShopObjectLabelMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(30),n(2),n(55)],void 0===(r=function(t,e,n,i,s,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.Point,a=uipixi.WindowsManagerEvent,u=function(e){function ExtraItemBeautyAnimationMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return p(ExtraItemBeautyAnimationMediator,e),ExtraItemBeautyAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerListener(this._showData,o.ExtraItemShopsModelEvent.BOUGHT,this.onBought.bind(this))},ExtraItemBeautyAnimationMediator.prototype.onBought=function(){this.isBeautyReadyToFly()?this.flyResources():this.registerListener(i.Application.view.ui.windows,a.WINDOW_HIDED,this.onWindowHided.bind(this))},ExtraItemBeautyAnimationMediator.prototype.onWindowHided=function(){this.isBeautyReadyToFly()&&(this.unregisterListener(i.Application.view.ui.windows,a.WINDOW_HIDED,this.onWindowHided.bind(this)),this.flyResources())},ExtraItemBeautyAnimationMediator.prototype.flyResources=function(){var t,e=this.window.getChildByName("beautyHUDBar").getGlobalPosition().add(new c(60,18)),n=this.child("startPoint"),i=n.getGlobalPosition().add(new c(.5*n.width,.5*n.height)),r=this.child("middlePoint"),o=r.getGlobalPosition().add(new c(.5*r.width,.5*r.height)),a=s.AnimationUtils.flyBeautyCrowns(64,6,i,o,e,new c(r.width,r.height));(t=this._animations).push.apply(t,a)},ExtraItemBeautyAnimationMediator.prototype.isBeautyReadyToFly=function(){return![r.GUINames.ANY_ROULETTE_WINDOW,r.GUINames.AWARDS_WINDOW].some(function(t){return i.Application.view.isShowed(t)})},ExtraItemBeautyAnimationMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},ExtraItemBeautyAnimationMediator}(n.DisplayObjectContainerMediator);e.ExtraItemBeautyAnimationMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(25),n(0),n(284),n(173),n(365),n(2),n(8),n(1438),n(26)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function LongRequestService(){return null!==t&&t.apply(this,arguments)||this}return d(LongRequestService,t),LongRequestService.prototype.initialize=function(t){this._activeLongRequestItems=[],i.Application.view.mapMediator(s.GUINames.LONG_REQUEST_WINDOW,u.LongRequestWindowMediator,{delay:this.config.longRequestDelay}),i.Application.server.eventTarget.addEventListener(r.ServerServiceEvent.REQUEST_START,this.onServerRequestStart.bind(this)),i.Application.server.eventTarget.addEventListener(r.ServerServiceEvent.REQUEST_COMPLETE,this.onServerRequestComplete.bind(this)),i.Application.resources.eventTarget.addEventListener(o.ResourcesServiceEvent.LOADING_START,this.onResourceLoadingStart.bind(this)),i.Application.resources.eventTarget.addEventListener(o.ResourcesServiceEvent.LOADING_COMPLETE,this.onResourceLoadingComplete.bind(this))},LongRequestService.prototype.longRequestStartItem=function(t,e){this._activeLongRequestItems.push(t),this._longRequestHandle||(this._longRequestHandle=i.Application.view.show(s.GUINames.LONG_REQUEST_WINDOW,new c.ViewContext({soft:e}),p.WindowLayer.LONG_REQUEST))},LongRequestService.prototype.longRequestCompleteItem=function(t){var e=this._activeLongRequestItems.indexOf(t);-1!==e&&(this._activeLongRequestItems.splice(e,1),0===this._activeLongRequestItems.length&&(i.Application.view.hide(this._longRequestHandle),this._longRequestHandle=void 0))},LongRequestService.prototype.onServerRequestStart=function(t){if(t.action.customData!==a.ActionCustomData.DisableLongRequestWindow){var e=t.action.customData===a.ActionCustomData.SoftLongRequestWindow;this.longRequestStartItem(t.action,e)}},LongRequestService.prototype.onServerRequestComplete=function(t){t.action.customData!==a.ActionCustomData.DisableLongRequestWindow&&this.longRequestCompleteItem(t.action)},LongRequestService.prototype.onResourceLoadingStart=function(t){t.pack.showLoading&&this.longRequestStartItem(t.pack,!1)},LongRequestService.prototype.onResourceLoadingComplete=function(t){this.longRequestCompleteItem(t.pack)},LongRequestService}(n.Service);e.LongRequestService=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=uipixi.GestureEvent,o=function(e){function LongRequestWindowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return a(LongRequestWindowMediator,e),LongRequestWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container.alpha=0,this._showData.soft||(this._timer=i.Application.date.callProcessor.delayCall(this.onShown.bind(this),this._mapData.delay)),this.registerListener(i.Application.view.ui.stage,r.POINTER_DOWN,this.onTap.bind(this))},LongRequestWindowMediator.prototype.onTap=function(){i.Application.date.callProcessor.deleteCall(this._timer),this.onShown()},LongRequestWindowMediator.prototype.onShown=function(){this.unregisterListener(i.Application.view.ui.stage,r.POINTER_DOWN,this.onTap.bind(this)),this._timer=void 0,this._animations.push(i.Application.animation.animate(this._container,"longRequestWindow"),i.Application.animation.animate(this.child("progressContainer"),"loading"))},LongRequestWindowMediator.prototype.destroy=function(){void 0!==this._timer&&i.Application.date.callProcessor.deleteCall(this._timer),this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},LongRequestWindowMediator}(n.DisplayObjectContainerMediator);e.LongRequestWindowMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,E=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(0),n(2),n(1440),n(1441),n(1442),n(31),n(1443),n(1444),n(1445),n(458),n(1446),n(22),n(1448),n(1449),n(241),n(459),n(1450),n(1452),n(1453)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var P=function(t){function AchievementsModule(){return null!==t&&t.apply(this,arguments)||this}return E(AchievementsModule,t),AchievementsModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),o.Application.operation.addAllowingRule(new p.OccurrenceBeginningLineRule("/achievement")),o.Application.operation.addAllowingRule(new p.OccurrenceBeginningLineRule("/bonus"))},AchievementsModule.prototype.onPreloadModule=function(t){o.Application.model.achievements=this._achievementsModel=new l.AchievementsModel(o.Application.static.data.achievements.achievement.items),o.Application.model.bonuses=this._bonusesModel=new b.BonusesModel(o.Application.static.data.bonuses.bonus.items),o.Application.view.mapMediator(a.GUINames.QUESTS_WINDOW,s.AchievementsWindowMediator,{achieveData:this._achievementsModel,bonusData:this._bonusesModel}),o.Application.view.mapMediator(a.GUINames.QUESTS_WINDOW+".buttons.buttonsList.*",d.AchievementsTabButtonListItemMediator,this._achievementsModel);var e=a.GUINames.QUESTS_WINDOW+".containerGroup.achieveContainer";o.Application.view.mapMediator(""+e,c.AchievementsContainerMediator,this._achievementsModel),o.Application.view.mapMediator(e+".navigationList.*",h.AchievementsListItemMediator,null,[S.AchievementsListItemGuard]),o.Application.view.mapMediator(e+".navigationList.*.awardsContainer.awardsList.*",u.AchievementsAwardsListItemMediator),o.Application.view.mapMediator(""+e,O.AchievementsNavigationTabMediator,this._achievementsModel);var n=a.GUINames.QUESTS_WINDOW+".containerGroup.bonusAchieveContainer";o.Application.view.mapMediator(""+n,m.BonusContainerMediator,this._bonusesModel),o.Application.view.mapMediator(n+".achieveItemList.*",v.BonusListItemMediator),o.Application.view.mapMediator(n+".achieveItemList.*.achieveItemRenderer.awardsContainer.awardsList.*",u.AchievementsAwardsListItemMediator),y.CommandMap.map(_.GetAchievementAwardPromise,f.GetAchievementAwardCommand),y.CommandMap.map(g.UpgradeBonusPromise,w.UpgradeBonusCommand)},AchievementsModule}(n.Module);e.AchievementsModule=P}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(163),n(124)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.ToggleButtonEvent,i=function(r){function AchievementsWindowMediator(){return null!==r&&r.apply(this,arguments)||this}return u(AchievementsWindowMediator,r),AchievementsWindowMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this.addTabButtons(),this._mapData.achieveData.selectedScreen=null,this._achieveContainer=this.child("achieveContainer"),this._achieveContainer.visible=!1,this._bonusButton=this.child("bonusAchieveButton"),this._bonusButtonMarker=this._bonusButton.getChildByName("markersContainer"),this.registerListener(this._mapData.achieveData,a.AchievementsModelEvent.CURRENT_TAB_CHANGED,this.setAchieveWindow.bind(this)),this.registerListener(this.child("questsButton"),c.SELECTED,this.onTap.bind(this)),this.registerListener(this._bonusButton,c.SELECTED_CHANGED,this.onBonusButtonTap.bind(this));for(var e=0,n=this._mapData.bonusData.bonuses;e<n.length;e++){var i=n[e];this.registerListener(i,s.BonusModelEvent.MODEL_CHANGED,this.onMarkerChanged.bind(this))}this.onMarkerChanged()},AchievementsWindowMediator.prototype.addTabButtons=function(){var t=this.child("buttonsList");t.addItem({screen:"*"});for(var e=0,n=o.Application.static.data.screens.screen.items;e<n.length;e++){var i=n[e];t.addItem({screen:i.id.toString()})}},AchievementsWindowMediator.prototype.setAchieveWindow=function(){this._achieveContainer.visible=!0},AchievementsWindowMediator.prototype.onTap=function(){this._achieveContainer.visible=!1,this._mapData.achieveData.selectedScreen=null},AchievementsWindowMediator.prototype.onBonusButtonTap=function(){this._bonusButton.selected?(this._achieveContainer.visible=!1,this._mapData.achieveData.selectedScreen=null,this._bonusButtonMarker.currentState="off"):this.onMarkerChanged()},AchievementsWindowMediator.prototype.onMarkerChanged=function(){this._bonusButton.selected||(this._bonusButtonMarker.currentState=this._mapData.bonusData.canGetAward()?"done":"off")},AchievementsWindowMediator}(n.DisplayObjectContainerMediator);e.AchievementsWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(163)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function AchievementsContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(AchievementsContainerMediator,e),AchievementsContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._label=this.child("achieveTitle"),this.registerListener(this._mapData,r.AchievementsModelEvent.CURRENT_TAB_CHANGED,this.setAchieveWindow.bind(this))},AchievementsContainerMediator.prototype.setAchieveWindow=function(t){"*"===this._mapData.selectedScreen?this._label.text=i.Application.localization.localize("ACHIEVE_TITLE_SCREEN_ALL"):this._label.text=i.Application.localization.localize("ACHIEVE_TITLE_SCREEN_"+this._mapData.selectedScreen)},AchievementsContainerMediator}(n.DisplayObjectContainerMediator);e.AchievementsContainerMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(21)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function AchievementsAwardsListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(AchievementsAwardsListItemMediator,e),AchievementsAwardsListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.award,this._container,{iconId:64,tooltip:r.TooltipAnchor.Top}),this.child("blueBg").visible=!this._showData.isGreenBg,this.child("greenBg").visible=this._showData.isGreenBg},AchievementsAwardsListItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},AchievementsAwardsListItemMediator}(n.DisplayObjectContainerMediator);e.AchievementsAwardsListItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(160),n(163),n(0)],void 0===(r=function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function AchievementsModel(t){var e=n.call(this)||this;return e._achievementsStaticData=t,e.init(),e}return a(AchievementsModel,n),AchievementsModel.prototype.init=function(){var e=this;this._achievements=[],this._achievementsStaticData.forEach(function(t){return e.addAchieve(t)})},AchievementsModel.prototype.addAchieve=function(t){if(!t.disabled){var e=new i.AchievementModel(t),n=e.screen;this._achievements[n]||(this._achievements[n]=[]),this._achievements[n].push(e)}},AchievementsModel.prototype.getCurrentAchievements=function(){return this._achievements[this._selectedScreen?this._selectedScreen:o.Application.dynamic.user.screen.toString()]},AchievementsModel.prototype.getAchievementsByScreen=function(t){return this._achievements[t]},AchievementsModel.prototype.isScreenWithAward=function(t){return this._achievements[t].some(function(t){return t.canGetAward()})},Object.defineProperty(AchievementsModel.prototype,"selectedScreen",{get:function(){return this._selectedScreen},set:function(t){this._selectedScreen!==t&&(this._selectedScreen=t,this._selectedScreen&&this.dispatchEvent(new r.AchievementsModelEvent(r.AchievementsModelEvent.CURRENT_TAB_CHANGED)))},enumerable:!0,configurable:!0}),AchievementsModel.prototype.getAll=function(){var t=[];for(var e in this._achievements)t.push.apply(t,this._achievements[e]);return t},AchievementsModel}(uipixi.BaseEventTarget);e.AchievementsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(151)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.ToggleButtonEvent,i=function(r){function AchievementsTabButtonListItemMediator(){var t=null!==r&&r.apply(this,arguments)||this;return t.IMAGE_PATH="icons_reward/icon_reward_season_",t.IMAGE_PATH_ALL="uikit/common_achievment_icon",t}return s(AchievementsTabButtonListItemMediator,r),AchievementsTabButtonListItemMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this._toggleButton=this._container,this._marker=this.child("markersContainer"),this.setParams(),this.registerListener(this._toggleButton,a.SELECTED_CHANGED,this.onTabChanged.bind(this));for(var e=0,n=this._mapData.getAchievementsByScreen(this._showData.screen);e<n.length;e++){var i=n[e];this.registerListener(i,o.AchievementModelEvent.MODEL_CHANGED,this.onMarkerChanged.bind(this))}this.onMarkerChanged()},AchievementsTabButtonListItemMediator.prototype.setParams=function(){"*"!==this._showData.screen?(this.child("iconImage").resource=this.IMAGE_PATH+this._showData.screen,this.child("iconImageSelected").resource=this.IMAGE_PATH+this._showData.screen):(this.child("iconImage").resource=this.IMAGE_PATH_ALL,this.child("iconImageSelected").resource=this.IMAGE_PATH_ALL)},AchievementsTabButtonListItemMediator.prototype.onTabChanged=function(){this._toggleButton.selected?(this._mapData.selectedScreen=this._showData.screen,this._marker.currentState="off"):this.onMarkerChanged()},AchievementsTabButtonListItemMediator.prototype.onMarkerChanged=function(){this._toggleButton.selected||(this._marker.currentState=this._mapData.isScreenWithAward(this._showData.screen)?"done":"off")},AchievementsTabButtonListItemMediator}(n.DisplayObjectContainerMediator);e.AchievementsTabButtonListItemMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(160),n(0),n(458),n(4),n(151),n(16)],void 0===(r=function(t,e,n,o,a,i,r,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function AchievementsListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return l(AchievementsListItemMediator,e),AchievementsListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._bgContainer=this.child("bgContainer"),this.setStates(),this.getChildren(),this.setParams(),this.registerListener(this._openButton,u.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._showData,s.AchievementModelEvent.STAGE_CHANGED,this.update.bind(this))},AchievementsListItemMediator.prototype.update=function(){this._loadableImage.destroy(),this.setStates(),this.setParams()},AchievementsListItemMediator.prototype.getChildren=function(){this._starImage=this.child("starImage"),this._levelLabel=this.child("levelLabel"),this._levelBigLabel=this.child("levelBigLabel"),this._nameLabel=this.child("nameLabel"),this._progressBar=this.child("progressBar"),this._progressLabel=this.child("progressLabel"),this._openButton=this.child("openButton"),this._awardsList=this.child("awardsList"),this._markerImage=this.child("markerImage")},AchievementsListItemMediator.prototype.onTap=function(){r.ElkaCore.instance.promiseManager.ask(new i.GetAchievementAwardPromise(this._showData))},AchievementsListItemMediator.prototype.setStates=function(){this._bgContainer.currentState=this._showData.bgState,this._container.currentState=this._showData.state},AchievementsListItemMediator.prototype.setParams=function(){var t=this._showData.achievementStageStaticData,e=this._showData.stage;if(this._levelLabel.text=e+"/"+this._showData.stageCount,this._nameLabel.text=a.Application.localization.localize(this._showData.title,t.task),this._loadableImage=new c.LoadableImage(this._starImage,this._showData.starResource),0===e?(this._starImage.tint=12632256,this._levelBigLabel.visible=!1):(this._starImage.tint=16777215,this._levelBigLabel.visible=!0,this._levelBigLabel.text=e.toString()),this._showData.state===o.AchieveState.DEFAULT&&(this._progressBar.progress=this._showData.progress/t.task,this._progressLabel.text=this._showData.progress+"/"+t.task),this._markerImage.visible=!1,this._showData.state===o.AchieveState.GET_AWARD&&(this._openButton.enabled=!0,this._markerImage.visible=!0),this._showData.state!==o.AchieveState.DONE){this._awardsList.removeAllItems();for(var n=0,i=a.Application.award.calculate(this._showData.awards).awards;n<i.length;n++){var r=i[n];this._awardsList.addItem({award:r,isGreenBg:this._showData.state===o.AchieveState.GET_AWARD})}}},AchievementsListItemMediator.prototype.destroy=function(){this._loadableImage.destroy(),e.prototype.destroy.call(this)},AchievementsListItemMediator}(n.DisplayObjectContainerMediator);e.AchievementsListItemMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2),n(8),n(1447),n(32)],void 0===(r=function(t,e,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GetAchievementAwardCommand(){return null!==t&&t.apply(this,arguments)||this}return u(GetAchievementAwardCommand,t),GetAchievementAwardCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return[4,r.Application.server.send(new s.GetAchievementAwardAction(i.achievement.id.toString()))];case 1:return e=t.sent(),r.Application.metrics.goalStarkEvent(c.StarkEventsName.ACHIEVEMENT,{aid:i.achievement.id,sid:i.achievement.stage}),r.Application.award.accrueAwardImmediately(e.output.award),n=r.Application.award.convertObjectToCalculated(e.output.award),[4,r.Application.view.show(o.GUINames.AWARDS_WINDOW,new a.ViewContext({baseAward:n})).onClose];case 2:return t.sent(),[2]}})})},GetAchievementAwardCommand}(n.CommandBase);e.GetAchievementAwardCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function GetAchievementAwardAction(t){var e=n.call(this)||this;return e.action="getAward",e.controller="achievement",e.input=new i.ActionInput({id:t}),e.output=new o,e}return a(GetAchievementAwardAction,n),GetAchievementAwardAction}(n.Action);e.GetAchievementAwardAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(21),n(2),n(0)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(n){function BonusContainerMediator(){return null!==n&&n.apply(this,arguments)||this}return s(BonusContainerMediator,n),BonusContainerMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.child("achieveItemList").addItems(this._mapData.bonuses);var e=this.child("tooltipButton");o.Application.tooltip.addTooltip(e,i.TooltipAnchor.Bottom,r.GUINames.TEXT_TOOLTIP,{text:"BONUS_ACHIEVE_WINDOW_TOOLTIP"})},BonusContainerMediator}(n.DisplayObjectContainerMediator);e.BonusContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(160),n(0),n(4),n(459),n(124)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(e){function BonusListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return p(BonusListItemMediator,e),BonusListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._bgContainer=this.child("bgContainer"),this._stateContainer=this.child("achieveItemRenderer"),this.setStates(),this.getChildren(),this.setParams(),this.registerListener(this._openButton,c.POINTER_TAP,this.onTap.bind(this)),this.registerListener(this._showData,s.BonusModelEvent.STAGE_CHANGED,this.update.bind(this)),this.registerListener(this._showData,s.BonusModelEvent.PROGRESS_CHANGED,this.update.bind(this))},BonusListItemMediator.prototype.update=function(){this.setStates(),this.setParams()},BonusListItemMediator.prototype.getChildren=function(){this._bonusImage=this.child("bonusImage"),this._bonusLabel=this.child("bonusLabel"),this._nameLabel=this.child("nameLabel"),this._progressBar=this.child("progressBar"),this._progressLabel=this.child("progressLabel"),this._openButton=this.child("openButton"),this._awardsList=this.child("awardsList"),this._markerImage=this.child("markerImage")},BonusListItemMediator.prototype.onTap=function(){o.ElkaCore.instance.promiseManager.ask(new a.UpgradeBonusPromise(this._showData))},BonusListItemMediator.prototype.setStates=function(){this._stateContainer.currentState=this._showData.state,this._bgContainer.currentState=this._showData.bgState},BonusListItemMediator.prototype.setParams=function(){this._nameLabel.text=r.Application.localization.localize(this._showData.title,this._showData.nextStageValue),0===this._showData.stage?(this._bonusImage.tint=12632256,this._bonusLabel.alpha=.5):(this._bonusImage.tint=16777215,this._bonusLabel.alpha=1),this._bonusLabel.text=Math.round(100*this._showData.currentBonus)+"%",this._showData.state===i.AchieveState.DEFAULT&&(this._progressBar.progress=this._showData.progress/this._showData.nextStageValue,this._progressLabel.text=this._showData.progress+"/"+this._showData.nextStageValue),this._markerImage.visible=!1,this._showData.state===i.AchieveState.GET_AWARD&&(this._openButton.enabled=!0,this._markerImage.visible=!0),this._awardsList.removeAllItems();for(var t=0,e=this._showData.awards.awards;t<e.length;t++){var n=e[t];this._awardsList.addItem({award:n,isGreenBg:this._showData.state===i.AchieveState.GET_AWARD})}},BonusListItemMediator}(n.DisplayObjectContainerMediator);e.BonusListItemMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1451),n(2),n(8),n(14)],void 0===(r=function(t,e,n,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function UpgradeBonusCommand(){return null!==t&&t.apply(this,arguments)||this}return p(UpgradeBonusCommand,t),UpgradeBonusCommand.prototype.execute=function(r){return l(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:return e=r.bonus.awards,[4,o.Application.server.send(new a.UpgradeBonusAction(r.bonus.id.toString()))];case 1:return n=t.sent(),(i=o.Application.award.convertObjectToCalculated(n.output.award)).add(e.getByType(u.AwardType.ACHIEVE_BONUS)),[4,o.Application.view.show(s.GUINames.AWARDS_WINDOW,new c.ViewContext({baseAward:i})).onClose];case 2:return t.sent(),o.Application.award.accrueAwardImmediately(n.output.award),[2]}})})},UpgradeBonusCommand}(n.CommandBase);e.UpgradeBonusCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function UpgradeBonusAction(t){var e=n.call(this)||this;return e.action="stageUp",e.controller="bonus",e.input=new i.ActionInput({bonusId:t}),e.output=new o,e}return a(UpgradeBonusAction,n),UpgradeBonusAction}(n.Action);e.UpgradeBonusAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(163),n(123),n(1)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function AchievementsNavigationTabMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t.ACHIEVEMENTS_AMOUNT_ON_SCREEN=4,t._renderer=new i.NavigatorRenderer,t}return a(AchievementsNavigationTabMediator,e),AchievementsNavigationTabMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._items=this._mapData.getCurrentAchievements().slice(),this.sortItems(),"*"!==this._mapData.selectedScreen&&(this._renderer.initialize({items:this._items,pageSize:this.ACHIEVEMENTS_AMOUNT_ON_SCREEN},this._container),this.registerListener(this._mapData,n.AchievementsModelEvent.CURRENT_TAB_CHANGED,this.setNewAchieveWindow.bind(this)))},AchievementsNavigationTabMediator.prototype.sortItems=function(){this._items.sort(function(t,e){var n=t.getSortWeight(),i=e.getSortWeight();return n===i?t.getSubSortWeight()-e.getSubSortWeight():n-i}),"*"!==this._mapData.selectedScreen&&this.addEmptyAchieves()},AchievementsNavigationTabMediator.prototype.addEmptyAchieves=function(){var t=this.ACHIEVEMENTS_AMOUNT_ON_SCREEN,e=t-this._items.length%t;if(e<t)for(var n=0;n<e;n++)this._items.push(null)},AchievementsNavigationTabMediator.prototype.setNewAchieveWindow=function(t){this._items=this._mapData.getCurrentAchievements().slice(),this.sortItems(),this._renderer.updateItems(this._items)},AchievementsNavigationTabMediator.prototype.destroy=function(){this._renderer.destroy(),e.prototype.destroy.call(this)},AchievementsNavigationTabMediator}(r.DisplayObjectContainerMediator);e.AchievementsNavigationTabMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function AchievementsListItemGuard(){return null!==t&&t.apply(this,arguments)||this}return a(AchievementsListItemGuard,t),AchievementsListItemGuard.prototype.approve=function(){return null!==this.viewHandle.viewContext.showData},AchievementsListItemGuard}(n.Guard);e.AchievementsListItemGuard=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,D=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(4),n(20),n(51),n(18),n(31),n(22),n(460),n(1455),n(461),n(1457),n(462),n(1459),n(1461),n(2),n(1467),n(1468),n(1469),n(1470),n(1471),n(1472),n(1473),n(1474),n(1475),n(1476)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var M=function(t){function FarmModule(){return null!==t&&t.apply(this,arguments)||this}return D(FarmModule,t),FarmModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new o.RegisterSeasonLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new a.RegisterModuleLoaderPromise(this)),n.Application.operation.addAllowingRule(new s.OccurrenceBeginningLineRule("/farm"))},FarmModule.prototype.mapMediators=function(){n.Application.view.mapMediator(y.GUINames.HUD+".bottomPanel.farmButton",v.HUDFarmButtonMediator),n.Application.view.mapMediator(y.GUINames.FARM_CELL_WINDOW,O.FarmCellWindowMediator),n.Application.view.mapMediator(y.GUINames.FARM_CELL_WINDOW+".progressList.*",S.FarmCellProgressMediator),n.Application.view.mapMediator(y.GUINames.FARM_WINDOW,m.FarmWindowMediator),n.Application.view.mapMediator(y.GUINames.FARM_WINDOW+".cellList.*",b.FarmCellMediator),n.Application.view.mapMediator(y.GUINames.FARM_WINDOW+".sellList.*",g.FarmShopMediator),n.Application.view.mapMediator(y.GUINames.FARM_WINDOW+".upgradeList.*",w.FarmUpgradeMediator),n.Application.view.mapMediator(y.GUINames.FARM_GENERATOR_WINDOW,P.FarmGeneratorWindowMediator),n.Application.view.mapMediator(y.GUINames.FARM_GENERATOR_WINDOW+".cellList.*",E.FarmGeneratorCellMediator)},FarmModule.prototype.mapCommands=function(){c.CommandMap.map(u.FarmExchangePromise,p.FarmExchangeCommand),c.CommandMap.map(l.FarmStageUpPromise,d.FarmStageUpCommand),c.CommandMap.map(h.FarmBuyPromise,_.FarmBuyCommand)},FarmModule.prototype.onPreloadModule=function(t){n.Application.model.farms=new f.FarmContainerModel(this.config),n.Application.dataProvider.registerProvider("farm",new A.FarmDataProvider),this.mapMediators(),this.mapCommands()},FarmModule.prototype.onVisitSeason=function(t){},FarmModule}(r.Module);e.FarmModule=M}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1456)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function FarmExchangeCommand(){return null!==t&&t.apply(this,arguments)||this}return a(FarmExchangeCommand,t),FarmExchangeCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=new r.FarmExchangeAction(n.generator.farm.id,n.generator.id),[4,i.Application.server.send(e)];case 1:return t.sent(),i.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},FarmExchangeCommand}(n.CommandBase);e.FarmExchangeCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function FarmExchangeAction(t,e){var n=i.call(this)||this;return n.controller="farm",n.action="exchange",n.input=new r.ActionInput({farmId:t,objectId:e}),n.output=new o,n}return a(FarmExchangeAction,i),FarmExchangeAction}(n.Action);e.FarmExchangeAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1458),n(32)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FarmStageUpCommand(){return null!==t&&t.apply(this,arguments)||this}return c(FarmStageUpCommand,t),FarmStageUpCommand.prototype.execute=function(r){return u(this,void 0,void 0,function(){var e,n,i;return p(this,function(t){switch(t.label){case 0:return e=r.generator.calculateUpgradePrice(),(n=o.Application.price.hold(e)).success?(i=new a.FarmStageUpAction(r.generator.farm.id,r.generator.id),[4,o.Application.server.send(i)]):[2];case 1:return t.sent(),o.Application.price.release(n),o.Application.metrics.goalStarkEvent(s.StarkEventsName.FARM_UPGRADE,{lev:r.generator.stage,oid:r.generator.id}),[2]}})})},FarmStageUpCommand}(n.CommandBase);e.FarmStageUpCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function FarmStageUpAction(t,e){var n=i.call(this)||this;return n.controller="farm",n.action="stageUp",n.input=new r.ActionInput({farmId:t,objectId:e}),n.output=new o,n}return a(FarmStageUpAction,i),FarmStageUpAction}(n.Action);e.FarmStageUpAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1460),n(32)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function FarmBuyCommand(){return null!==t&&t.apply(this,arguments)||this}return c(FarmBuyCommand,t),FarmBuyCommand.prototype.execute=function(r){return u(this,void 0,void 0,function(){var e,n,i;return p(this,function(t){switch(t.label){case 0:return e=r.cell.calculateUnlockPrice(),(n=o.Application.price.hold(e)).success?(i=new a.FarmBuyAction(r.cell.farm.id,r.cell.id),[4,o.Application.server.send(i)]):[2];case 1:return t.sent(),o.Application.price.release(n),o.Application.metrics.goalStarkEvent(s.StarkEventsName.FARM_CELL,{cid:r.cell.id,oid:r.cell.generator.id,price:e.prices[0].value}),[2]}})})},FarmBuyCommand}(n.CommandBase);e.FarmBuyCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function FarmBuyAction(t,e){var n=i.call(this)||this;return n.controller="farm",n.action="buy",n.input=new r.ActionInput({farmId:t,cellId:e}),n.output=new o,n}return a(FarmBuyAction,i),FarmBuyAction}(n.Action);e.FarmBuyAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1462),n(0),n(37),n(1466)],void 0===(r=function(t,e,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function FarmContainerModel(t){var e=n.call(this)||this;return e.config=t,e._farms=[],e._idFarmMap=new core.Map,e._farmItemCollection=r.Application.dynamic.user.farms,e._farmItemCollection.items.forEach(function(t){return e.addFarm(t)}),e._farmItemCollection.addEventListener(o.ItemCollectionEvent.ITEM_ADDED,e.onFarmAdded.bind(e)),e}return s(FarmContainerModel,n),FarmContainerModel.prototype.onFarmAdded=function(t){var e=this.addFarm(t.item);e&&this.dispatchEvent(new a.FarmContainerEvent(a.FarmContainerEvent.FARM_ADDED,e))},FarmContainerModel.prototype.addFarm=function(t){if(this._idFarmMap.has(+t.id))return null;var e=new i.FarmModel(this,t);return this._farms.push(e),this._idFarmMap.set(e.id,e),e},FarmContainerModel.prototype.getCurrentFarm=function(){return this._farms[this._farms.length-1]},FarmContainerModel}(uipixi.BaseEventTarget);e.FarmContainerModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1463),n(164),n(1464),n(1465),n(13),n(165),n(58),n(45),n(107)],void 0===(r=function(t,e,g,w,O,S,P,E,n,A,i,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=uipixi.BaseEventTarget,D=i.TIME.MS_IN_SECOND,o=function(b){function FarmModel(t,e){var n=b.call(this)||this;n.farmContainer=t,n._farmDynamicItem=e,n._field=[],n._generators=[],n._idGeneratorMap=new core.Map,n._shops=[],n._idShopMap=new core.Map,n._showTimeKey="Farm_{id}.showTime",n._inactiveTimeoutId=-1,n._userInactive=!0,n._fieldBlocked=!1,n._farmStaticData=g.Application.static.data.farms.farm.getItem(parseInt(e.id)),n._automated=n.getAutomated();for(var i=0,r=n._farmStaticData.objects.object.items;i<r.length;i++){var o=r[i],a=new S.FarmGeneratorModel(n,o);n._idGeneratorMap.set(a.id,a),n._generators.push(a),a.addEventListener(M.FarmGeneratorEvent.COMPLETE_CHANGED,n.onGeneratorComplete.bind(n)),a.addEventListener(M.FarmGeneratorEvent.CAN_UPGRADE_CHANGED,n.onGeneratorCanUpgrade.bind(n))}for(var s=0;s<FarmModel.FIELD_HEIGHT;s++)n._field[s]=[];for(var c=0,u=n._farmStaticData.cells.cell.items;c<u.length;c++){var p=u[c];(h=new w.FarmCellModel(n,p,e.cells.getItem(p.id.toString()))).purchased?h.setState("purchased"):(h.addEventListener(O.FarmCellEvent.PURCHASED,n.onCellPurchased.bind(n)),h.addEventListener(O.FarmCellEvent.CAN_BUY_CHANGED,n.onCellCanBuy.bind(n))),n._field[h.y-1][h.x-1]=h}n._cells=[].concat.apply([],n._field);for(var l=0,d=n._cells;l<d.length;l++){var h;(h=d[l]).purchased||h.setState(n.cellHasPurchasedSibling(h)||h.init?"availableForPurchase":"empty")}if(n._automated)return n;for(var _=0,f=n._generators;_<f.length;_++){a=f[_];var y=new P.FarmShopModel(n,a);n._idShopMap.set(a.id,y),n._shops.push(y)}if(n._inactiveTime=parseInt(n.getSetting("inactiveTime")),n._showTimeKey=A.StringUtils.format(n._showTimeKey,{id:n.id}),n._showTime=n.getShowTime(),0<n._showTime){var m=g.Application.date.currentTime-n._showTime;if(m<n._inactiveTime){var v=(n._inactiveTime-m)*D;n._inactiveTimeoutId=g.Application.date.callProcessor.delayCall(n.onInactiveTimeout.bind(n),v),n._userInactive=!1}}return n._canBuyCell=n.getCanBuyCell(),n._hasCompletedGenerator=n.getHasCompletedGenerator(),n._canUpgradeGenerator=n.getCanUpgradeGenerator(),e.addEventListener(E.BaseDataEvent.CHANGED,n.onChanged.bind(n)),n}return a(FarmModel,b),FarmModel.prototype.getAutomated=function(){if(1===this._farmDynamicItem.status)return!1;for(var t=0,e=this._farmDynamicItem.generators.items;t<e.length;t++){var n=e[t],i=this._farmStaticData.objects.object.getItem(n.id).stages.stage.items;if(n.stage!==i[i.length-1].id)return!1}for(var r=0,o=this._farmDynamicItem.cells.items;r<o.length;r++){if(!o[r].purchased)return!1}return!0},FarmModel.prototype.onChanged=function(t){this.setAutomated(this.getAutomated())},FarmModel.prototype.onGeneratorComplete=function(t){this.setHasCompletedGenerator(t.generator.complete||this.getHasCompletedGenerator())},FarmModel.prototype.onGeneratorCanUpgrade=function(t){this.setCanUpgradeGenerator(t.generator.canUpgrade||this.getCanUpgradeGenerator())},FarmModel.prototype.onCellCanBuy=function(t){this.setCanBuyCell(t.cell.canBuy||this.getCanBuyCell())},FarmModel.prototype.onInactiveTimeout=function(){this._inactiveTimeoutId=-1,this.setUserInactive(!0)},FarmModel.prototype.onCellPurchased=function(t){t.cell.setState("purchased");for(var e=0,n=FarmModel.PATTERN_CROSS;e<n.length;e++){var i=n[e],r=this.getCell(t.cell.x+i[0],t.cell.y+i[1]);r&&"empty"===r.state&&r.setState("availableForPurchase")}},FarmModel.prototype.cellHasPurchasedSibling=function(t){for(var e=0,n=FarmModel.PATTERN_CROSS;e<n.length;e++){var i=n[e],r=this.getCell(t.x+i[0],t.y+i[1]);if(r&&"purchased"===r.state)return!0}return!1},FarmModel.prototype.setHasCompletedGenerator=function(t){t!==this._hasCompletedGenerator&&(this._hasCompletedGenerator=t,this.dispatchEvent(new n.FarmEvent(n.FarmEvent.HAS_COMPLETED_GENERATOR_CHANGED,this)))},FarmModel.prototype.setCanUpgradeGenerator=function(t){t!==this._canUpgradeGenerator&&(this._canUpgradeGenerator=t,this.dispatchEvent(new n.FarmEvent(n.FarmEvent.CAN_UPGRADE_GENERATOR_CHANGED,this)))},FarmModel.prototype.setCanBuyCell=function(t){t!==this._canBuyCell&&(this._canBuyCell=t,this.dispatchEvent(new n.FarmEvent(n.FarmEvent.CAN_BUY_CELL_CHANGED,this)))},FarmModel.prototype.getShowTime=function(){return parseInt(g.Application.settings.getItem(this._showTimeKey))||0},FarmModel.prototype.getHasCompletedGenerator=function(){return this._generators.some(function(t){return t.complete})},FarmModel.prototype.getCanUpgradeGenerator=function(){return this._generators.some(function(t){return t.canUpgrade})},FarmModel.prototype.setUserInactive=function(t){t!==this._userInactive&&(this._userInactive=t,this.dispatchEvent(new n.FarmEvent(n.FarmEvent.INACTIVE_CHANGED,this)))},FarmModel.prototype.setAutomated=function(t){t!==this._automated&&(this._automated=t,this.dispatchEvent(new n.FarmEvent(n.FarmEvent.AUTOMATED_CHANGED,this)))},FarmModel.prototype.getCanBuyCell=function(){for(var t=0,e=this._cells;t<e.length;t++){if(e[t].canBuy)return!0}return!1},FarmModel.prototype.getSetting=function(t){for(var e=0,n=this._farmStaticData.settings.setting;e<n.length;e++){var i=n[e];if(i.param===t)return i.value}return null},FarmModel.prototype.show=function(){-1!==this._inactiveTimeoutId&&g.Application.date.callProcessor.deleteCall(this._inactiveTimeoutId),this._showTime=g.Application.date.currentTime,this._inactiveTimeoutId=g.Application.date.callProcessor.delayCall(this.onInactiveTimeout.bind(this),1e3*this._inactiveTime),g.Application.settings.setItem(this._showTimeKey,this._showTime.toString()),this.setUserInactive(!1)},FarmModel.prototype.getGeneratorById=function(t){return this._idGeneratorMap.get(t)},FarmModel.prototype.getCell=function(t,e){return t<1||e<1||FarmModel.FIELD_WIDTH<t||FarmModel.FIELD_HEIGHT<e?null:this._field[e-1][t-1]},FarmModel.prototype.getShopById=function(t){return this._idShopMap.get(t)},Object.defineProperty(FarmModel.prototype,"fieldBlocked",{get:function(){return this._fieldBlocked},set:function(t){t!==this._fieldBlocked&&(this._fieldBlocked=t,this.dispatchEvent(new n.FarmEvent(n.FarmEvent.FIELD_BLOCKED_CHANGED,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"id",{get:function(){return this._farmStaticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"generators",{get:function(){return this._generators},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"farmDynamicItem",{get:function(){return this._farmDynamicItem},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"shops",{get:function(){return this._shops},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"automated",{get:function(){return this._automated},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"userInactive",{get:function(){return this._userInactive},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"canBuyCell",{get:function(){return this._canBuyCell},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"hasCompletedGenerator",{get:function(){return this._hasCompletedGenerator},enumerable:!0,configurable:!0}),Object.defineProperty(FarmModel.prototype,"canUpgradeGenerator",{get:function(){return this._canUpgradeGenerator},enumerable:!0,configurable:!0}),FarmModel.PATTERN_CROSS=[[-1,0],[0,-1],[1,0],[0,1]],FarmModel.FIELD_WIDTH=5,FarmModel.FIELD_HEIGHT=5,FarmModel}(r);e.FarmModel=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(164),n(13),n(0),n(42)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function FarmCellModel(t,e,n){var i=r.call(this)||this;return i.farm=t,i._cellStaticData=e,i._cellDynamicItem=n,i._canBuy=!1,i._generator=i.farm.getGeneratorById(e.object),t.automated||(i._purchased=i.getPurchased(),i._purchased||(n.addEventListener(o.BaseDataEvent.CHANGED,i.onDynamicDataChanged.bind(i)),i._resource=a.Application.model.resources.get(e.prices.price[0].itemId),i._resource.addEventListener(s.ResourceModelEvent.COUNT_CHANGED,i.onResourceCountChanged.bind(i)))),i}return c(FarmCellModel,r),FarmCellModel.prototype.onResourceCountChanged=function(t){this.setCanBuy(this.getCanBuy())},FarmCellModel.prototype.getCanBuy=function(){return"availableForPurchase"===this._state&&a.Application.price.canSpend(this._cellStaticData.prices)},FarmCellModel.prototype.setCanBuy=function(t){t!==this._canBuy&&(this._canBuy=t,this.dispatchEvent(new n.FarmCellEvent(n.FarmCellEvent.CAN_BUY_CHANGED,this)))},FarmCellModel.prototype.getPurchased=function(){return 1===this._cellDynamicItem.purchased},FarmCellModel.prototype.markAsPurchased=function(){this._purchased||(this._purchased=!0,this.dispatchEvent(new n.FarmCellEvent(n.FarmCellEvent.PURCHASED,this)),this._resource.removeEventListener(s.ResourceModelEvent.COUNT_CHANGED,this.onResourceCountChanged.bind(this)),this.setCanBuy(!1))},FarmCellModel.prototype.onDynamicDataChanged=function(t){this.markAsPurchased()},Object.defineProperty(FarmCellModel.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),FarmCellModel.prototype.setState=function(t,e){void 0===e&&(e=!0),t!==this._state&&(this._state=t,e&&(this.dispatchEvent(new n.FarmCellEvent(n.FarmCellEvent.STATE_CHANGED,this)),this.setCanBuy(this.getCanBuy())))},FarmCellModel.prototype.calculateUnlockPrice=function(){return a.Application.price.calculate(this._cellStaticData.prices)},Object.defineProperty(FarmCellModel.prototype,"canBuy",{get:function(){return this._canBuy},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellModel.prototype,"purchased",{get:function(){return this._purchased},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellModel.prototype,"id",{get:function(){return this._cellStaticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellModel.prototype,"x",{get:function(){return this._cellStaticData.x},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellModel.prototype,"y",{get:function(){return this._cellStaticData.y},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellModel.prototype,"generator",{get:function(){return this._generator},enumerable:!0,configurable:!0}),Object.defineProperty(FarmCellModel.prototype,"init",{get:function(){return this._cellStaticData.init},enumerable:!0,configurable:!0}),FarmCellModel}(uipixi.BaseEventTarget);e.FarmCellModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(37),n(13),n(0),n(107),n(45),n(29),n(58),n(42)],void 0===(r=function(t,e,s,n,c,i,r,o,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.BaseEventTarget,l=r.TIME.MS_IN_SECOND,d=function(a){function FarmGeneratorModel(t,e){var n=a.call(this)||this;n.farm=t,n._generatorStaticData=e,n._timerId=-1,n._startTime=0,n._cooldown=0,n._numResources=0,n._maxResources=0,n._stage=0,n._exchangeRate=0,n._resourceTimeLeft=0,n._resourceTimeLeftString="",n._resourceProgress=0,n._totalTimeLeft=0,n._totalTimeLeftString="",n._totalProgress=0,n._complete=!1,n._canUpgrade=!1;var i=e.stages.stage.items,r=i[i.length-1];if(t.automated)return n._generatorIcon=r.generator.icon,n;n._maxStage=i.length,n._dateService=c.Application.date,n._generatorDynamicItem=t.farmDynamicItem.generators.getItem(n.id),n._name=c.Application.localization.localize(e.nameKey);var o=FarmGeneratorModel.NAME_PATTERN.exec(r.generator.icon)[1];return n._idResourceIcon={32:n.resolveResourceIcon(32,o),48:n.resolveResourceIcon(48,o)},n._shopIcon=n.resolveShopIcon(o),n._awardResource=n.getAwardResource(),n._awardIcon=n.getAwardIcon(),n._generatorDynamicItem?n.init():(t.farmDynamicItem.generators.addEventListener(s.ItemCollectionEvent.ITEM_ADDED,n.onGeneratorAdded.bind(n)),n._state="locked",n._generatorIcon=i[0].generator.icon),n._upgradeResource=c.Application.model.resources.get(r.prices.price[0].itemId),n._upgradeResource.addEventListener(p.ResourceModelEvent.COUNT_CHANGED,n.onUpgradeResourceChanged.bind(n)),n}return h(FarmGeneratorModel,a),FarmGeneratorModel.prototype.onUpgradeResourceChanged=function(t){this.setCanUpgrade(this.getCanUpgrade())},FarmGeneratorModel.prototype.getCanUpgrade=function(){return"regular"===this._state&&c.Application.price.canSpend(this._nextStageStaticData.prices)},FarmGeneratorModel.prototype.setCanUpgrade=function(t){t!==this._canUpgrade&&(this._canUpgrade=t,this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.CAN_UPGRADE_CHANGED,this)))},FarmGeneratorModel.prototype.getAwardIcon=function(){return this._awardResource.static.view.icons.icon.getItem("48").resourceId},FarmGeneratorModel.prototype.getAwardResource=function(){var t=this._generatorStaticData.stages.stage.items[0].generator.awards.award[0].itemId;return c.Application.model.resources.get(t)},FarmGeneratorModel.prototype.onGeneratorAdded=function(t){t.item.id===this.id&&(this.farm.farmDynamicItem.generators.removeEventListener(s.ItemCollectionEvent.ITEM_ADDED,this.onGeneratorAdded.bind(this)),this._generatorDynamicItem=t.item,this.init())},FarmGeneratorModel.prototype.init=function(){this._generatorDynamicItem.addEventListener(n.BaseDataEvent.CHANGED,this.onGeneratorChanged.bind(this)),this.onGeneratorChanged()},FarmGeneratorModel.prototype.resolveShopIcon=function(t){return u.StringUtils.format(this.farm.farmContainer.config.shopIconPattern,{farmId:this.farm.id,itemName:t})},FarmGeneratorModel.prototype.resolveResourceIcon=function(t,e){return u.StringUtils.format(this.farm.farmContainer.config.resourceIconPattern,{farmId:this.farm.id,iconId:t,itemName:e})},FarmGeneratorModel.prototype.onGeneratorChanged=function(t){this._startTime=this._generatorDynamicItem.time*l,this.setStage(this._generatorDynamicItem.stage),this.update(),this.startGenerator()},FarmGeneratorModel.prototype.update=function(){switch(this._state){case"regular":this.updateRegular();break;case"automated":this.updateAuto()}},FarmGeneratorModel.prototype.updateRegular=function(){var t=this._cooldown*this._maxResources,e=this._startTime+t,n=Math.min(this._dateService.currentTimeMS,e),i=Math.max(n-this._startTime,0),r=i/t;if(this.setTotalProgress(r),this.setTotalTimeLeft(Math.floor(e-n)),this.setNumResources(Math.floor(i/this._cooldown)),this.setComplete(this._maxResources&&this._numResources===this._maxResources),r<1){var o=i%this._cooldown;this.setResourceProgress(o/this._cooldown),this.setResourceTimeLeft(Math.floor(this._cooldown-o))}else this.setResourceProgress(1),this.setResourceTimeLeft(0)},FarmGeneratorModel.prototype.updateAuto=function(){var t=Math.max(this._dateService.currentTimeMS-this._startTime,0);this.setTotalProgress(1),this.setTotalTimeLeft(0),this.setNumResources(Math.floor(t/this._cooldown));var e=t%this._cooldown;this.setResourceProgress(e/this._cooldown),this.setResourceTimeLeft(Math.floor(this._cooldown-e))},FarmGeneratorModel.prototype.setStage=function(t){t!==this._stage&&(this._stage=t,this._stageStaticData=this._generatorStaticData.stages.stage.getItem(this._stage),this._nextStageStaticData=this._generatorStaticData.stages.stage.getItem(this._stage+1),this._cooldown=this._stageStaticData.generator.cooldown*l,this._exchangeRate=this._stageStaticData.generator.factor,this._maxResources=this._stageStaticData.generator.max||0,this._generatorIcon=this._stageStaticData.generator.icon,this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.STAGE_CHANGED,this)),this.setState(this.getState()),this.setCanUpgrade(this.getCanUpgrade()))},FarmGeneratorModel.prototype.startGenerator=function(){-1===this._timerId&&(this._maxResources&&this._numResources===this._maxResources||(this._timerId=this._dateService.callProcessor.repeatCall(this.onTimer.bind(this),FarmGeneratorModel.UPDATE_INTERVAL)))},FarmGeneratorModel.prototype.stopGenerator=function(){-1!==this._timerId&&(this._dateService.callProcessor.deleteCall(this._timerId),this._timerId=-1)},FarmGeneratorModel.prototype.onTimer=function(){this.update(),0!==this.maxResources&&this._numResources===this.maxResources&&this.stopGenerator()},FarmGeneratorModel.prototype.setNumResources=function(t){t!==this._numResources&&(this._numResources=t,this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.NUN_RESOURCES_CHANGED,this)))},FarmGeneratorModel.prototype.setComplete=function(t){t!==this._complete&&(this._complete=t,this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.COMPLETE_CHANGED,this)))},FarmGeneratorModel.prototype.setResourceTimeLeft=function(t){t!==this._resourceTimeLeft&&(this._resourceTimeLeft=t,this._resourceTimeLeftString=this.convertTimeToString(t),this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.RESOURCE_TIME_LEFT_CHANGED,this)))},FarmGeneratorModel.prototype.setTotalTimeLeft=function(t){t!==this._totalTimeLeft&&(this._totalTimeLeft=t,this._totalTimeLeftString=this.convertTimeToString(t),this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.TOTAL_TIME_LEFT_CHANGED,this)))},FarmGeneratorModel.prototype.convertTimeToString=function(t){return 0===t?"":o.DateUtils.timeToString(Math.ceil(.001*t))},FarmGeneratorModel.prototype.setTotalProgress=function(t){t!==this._totalProgress&&(this._totalProgress=t,this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.TOTAL_PROGRESS_CHANGED,this)))},FarmGeneratorModel.prototype.setResourceProgress=function(t){t!==this._resourceProgress&&(this._resourceProgress=t,this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.RESOURCE_PROGRESS_CHANGED,this)))},FarmGeneratorModel.prototype.getState=function(){return 0===this._stage?"locked":this._stage===this._maxStage?"automated":"regular"},FarmGeneratorModel.prototype.setState=function(t){t!==this._state&&(this._state=t,this.dispatchEvent(new i.FarmGeneratorEvent(i.FarmGeneratorEvent.STATE_CHANGED,this)))},FarmGeneratorModel.prototype.getResourceIcon=function(){switch(this._state){case"regular":return this._idResourceIcon[48];case"automated":return this._awardIcon}return null},FarmGeneratorModel.prototype.getShopIcon=function(){switch(this._state){case"locked":case"regular":return this._idResourceIcon[48];case"automated":return this._shopIcon}return null},FarmGeneratorModel.prototype.calculateAward=function(){return this._stageStaticData?c.Application.award.calculate(this._stageStaticData.generator.awards):null},FarmGeneratorModel.prototype.calculateUpgradePrice=function(){return this._nextStageStaticData?c.Application.price.calculate(this._nextStageStaticData.prices):null},Object.defineProperty(FarmGeneratorModel.prototype,"awardIcon",{get:function(){return this._awardIcon},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"resourceTimeLeftString",{get:function(){return this._resourceTimeLeftString},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"resourceProgress",{get:function(){return this._resourceProgress},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"totalProgress",{get:function(){return this._totalProgress},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"totalTimeLeftString",{get:function(){return this._totalTimeLeftString},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"running",{get:function(){return-1!==this._timerId},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"exchangeRate",{get:function(){return this._exchangeRate},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"maxResources",{get:function(){return this._maxResources},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"numResources",{get:function(){return this._numResources},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"id",{get:function(){return this._generatorStaticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"icon",{get:function(){return this._generatorIcon},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"cooldown",{get:function(){return this._cooldown},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"complete",{get:function(){return this._complete},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"canUpgrade",{get:function(){return this._canUpgrade},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"awardResource",{get:function(){return this._awardResource},enumerable:!0,configurable:!0}),Object.defineProperty(FarmGeneratorModel.prototype,"upgradeResource",{get:function(){return this._upgradeResource},enumerable:!0,configurable:!0}),FarmGeneratorModel.UPDATE_INTERVAL=33,FarmGeneratorModel.NAME_PATTERN=/^.+\/(.+)_\d$/,FarmGeneratorModel}(a);e.FarmGeneratorModel=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(164),n(463)],void 0===(r=function(t,e,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(a){function FarmShopModel(t,e){var n=a.call(this)||this;n.farm=t,n.generator=e;for(var i=n._multiplier=0,r=t.cells.filter(function(t){return t.generator===e});i<r.length;i++){var o=r[i];o.purchased?n._multiplier++:o.addEventListener(s.FarmCellEvent.PURCHASED,n.onCellPurchased.bind(n))}return n}return c(FarmShopModel,a),FarmShopModel.prototype.onCellPurchased=function(t){this._multiplier++,this.dispatchEvent(new n.FarmShopEvent(n.FarmShopEvent.MULTIPLIER_CHANGED,this))},Object.defineProperty(FarmShopModel.prototype,"numResources",{get:function(){return"locked"===this.generator.state?-1:this.generator.numResources*this._multiplier},enumerable:!0,configurable:!0}),Object.defineProperty(FarmShopModel.prototype,"numAwards",{get:function(){var t=this.numResources;return-1===t?0:Math.floor(t/this.generator.exchangeRate)},enumerable:!0,configurable:!0}),Object.defineProperty(FarmShopModel.prototype,"maxResources",{get:function(){return"locked"===this.generator.state?-1:this.generator.maxResources*this._multiplier},enumerable:!0,configurable:!0}),Object.defineProperty(FarmShopModel.prototype,"progress",{get:function(){return 0===this._multiplier?0:this.generator.totalProgress},enumerable:!0,configurable:!0}),Object.defineProperty(FarmShopModel.prototype,"multiplier",{get:function(){return this._multiplier},enumerable:!0,configurable:!0}),FarmShopModel}(uipixi.BaseEventTarget);e.FarmShopModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function FarmContainerEvent(t,e){return n.call(this,t,e)||this}return o(FarmContainerEvent,n),Object.defineProperty(FarmContainerEvent.prototype,"farm",{get:function(){return this.data},enumerable:!0,configurable:!0}),FarmContainerEvent.FARM_ADDED="farmAdded",FarmContainerEvent}(uipixi.BaseEvent);e.FarmContainerEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(165),n(2),n(107),n(30)],void 0===(r=function(t,e,n,m,v,d,b,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=uipixi.ToggleButtonEvent,_=uipixi.Point,w=uipixi.WindowsManagerEvent,i=function(y){function FarmWindowMediator(){var t=null!==y&&y.apply(this,arguments)||this;return t._generatorStartMap=new core.Map,t._generatorFinishMap=new core.Map,t._animations=[],t}return a(FarmWindowMediator,y),FarmWindowMediator.prototype.initialize=function(t){y.prototype.initialize.call(this,t),this._farm=m.Application.model.farms.getCurrentFarm(),this._yellowMarker=this.child("yellowMarker"),this._redMarker=this.child("redMarker"),this._animationContainer=this.child("animationContainer");var e=this.child("cellList");e.addItems(this._farm.cells);var n=this.child("sellList");n.addItems(this._farm.shops),this.child("upgradeList").addItems(this._farm.shops),this.registerListener(this.child("sellButton"),g.SELECTED,this.onSellTap.bind(this)),this.registerListener(this.child("upgradeButton"),g.SELECTED,this.onUpgradeTap.bind(this)),this.registerListener(this._farm,v.FarmEvent.AUTOMATED_CHANGED,this.onAutomated.bind(this)),this.registerListener(this._farm,v.FarmEvent.HAS_COMPLETED_GENERATOR_CHANGED,this.onCompletedGenerator.bind(this)),this.registerListener(this._farm,v.FarmEvent.CAN_UPGRADE_GENERATOR_CHANGED,this.onCanUpgradeGenerator.bind(this)),this.registerListener(m.Application.view.ui.windows,w.WINDOW_SHOWED,this.onWindowShowed.bind(this));for(var i=0,r=this._farm.generators;i<r.length;i++){var o=r[i];this.registerListener(o,b.FarmGeneratorEvent.NUN_RESOURCES_CHANGED,this.onNumResources.bind(this))}this._farm.show(),this.onCanUpgradeGenerator(),this.onCompletedGenerator();for(var a=0,s=e.items;a<s.length;a++){var c=s[a],u=(o=c.data.generator,this._generatorStartMap.get(o));u||(u=[],this._generatorStartMap.set(o,u));var p=c.displayObject.getChildByName("generatorResource"),l=c.data;u.push({image:p,cell:l})}for(var d=0,h=n.items;d<h.length;d++){var _=h[d],f=(o=_.data.generator,_.displayObject.getChildByName("progressBar"));this._generatorFinishMap.set(o,f)}},FarmWindowMediator.prototype.onNumResources=function(t){if(!m.Application.view.isShowed(d.GUINames.FARM_CELL_WINDOW)&&"upgrade"!==this._container.currentState&&0!==t.generator.numResources){var e=this._animationContainer.getGlobalPosition();this._animations=this._animations.filter(function(t){return t.running});for(var n=this._generatorFinishMap.get(t.generator),i=n.getGlobalPosition().add(new _(.5*n.width,.5*n.height)).add(new _(-e.x,-e.y)),r=this._generatorStartMap.get(t.generator).filter(function(t){return"purchased"===t.cell.state}),o=t.generator.getResourceIcon(),a=0;a<r.length;a++){var s=r[a].image,c=s.getGlobalPosition().add(new _(.5*s.width,.5*s.height)).add(new _(-e.x,-e.y)),u=new _(60,60),p=c.add(new _(-50,-50)),l=h.AnimationUtils.flyResource(o,a,c,p,i,u,-60,null,this._animationContainer,null);this._animations.push(l)}}},FarmWindowMediator.prototype.onWindowShowed=function(t){t.windowName===d.GUINames.FARM_CELL_WINDOW&&(this._animations.forEach(function(t){return t.stop()}),this._animations=[])},FarmWindowMediator.prototype.onCanUpgradeGenerator=function(t){this._yellowMarker.visible=this._farm.canUpgradeGenerator},FarmWindowMediator.prototype.onCompletedGenerator=function(t){this._redMarker.visible=this._farm.hasCompletedGenerator},FarmWindowMediator.prototype.onAutomated=function(t){m.Application.view.hide(this.viewHandle),m.Application.view.show(d.GUINames.FARM_GENERATOR_WINDOW)},FarmWindowMediator.prototype.onUpgradeTap=function(t){this._container.currentState="upgrade"},FarmWindowMediator.prototype.onSellTap=function(t){this._container.currentState="sell"},FarmWindowMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),y.prototype.destroy.call(this)},FarmWindowMediator}(n.DisplayObjectContainerMediator);e.FarmWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0),n(2),n(165)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function HUDFarmButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return s(HUDFarmButtonMediator,e),HUDFarmButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._farm=i.Application.model.farms.getCurrentFarm(),this._exclamationMark=this._button.getChildByName("exclamationMark"),this._exclamationRedMark=this._button.getChildByName("exclamationRedMark"),this.registerListener(this._farm,o.FarmEvent.AUTOMATED_CHANGED,this.update.bind(this)),this.registerListener(this._farm,o.FarmEvent.INACTIVE_CHANGED,this.update.bind(this)),this.registerListener(this._farm,o.FarmEvent.CAN_BUY_CELL_CHANGED,this.update.bind(this)),this.registerListener(this._farm,o.FarmEvent.HAS_COMPLETED_GENERATOR_CHANGED,this.update.bind(this)),this.registerListener(this._farm,o.FarmEvent.CAN_UPGRADE_GENERATOR_CHANGED,this.update.bind(this)),this.update()},HUDFarmButtonMediator.prototype.update=function(t){this._exclamationMark.visible=!1,this._exclamationRedMark.visible=!1,this._farm.automated||(this._farm.hasCompletedGenerator?this._exclamationRedMark.visible=!0:(this._farm.userInactive||this._farm.canBuyCell||this._farm.canUpgradeGenerator)&&(this._exclamationMark.visible=!0))},HUDFarmButtonMediator.prototype.onButton=function(t){i.Application.view.show(this._farm.automated?r.GUINames.FARM_GENERATOR_WINDOW:r.GUINames.FARM_WINDOW)},HUDFarmButtonMediator}(n.SimpleButtonMediator);e.HUDFarmButtonMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,v=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),b=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},g=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(164),n(4),n(462),n(107),n(15),n(0),n(2),n(8),n(30),n(308),n(34),n(165),n(43)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=uipixi.GestureEvent,m=function(e){function FarmCellMediator(){return null!==e&&e.apply(this,arguments)||this}return v(FarmCellMediator,e),FarmCellMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._generator=this._showData.generator,this._farm=this._generator.farm,this._buyButton=this.child("buyButton"),this._progressBar=this.child("progressBar"),this._progressLabel=this.child("progressLabel"),this._generatorIcon=this.child("generatorIcon"),this._resourceIcon=this.child("generatorResource"),this._middle=this.child("middlePoint"),this.registerListener(this._showData,i.FarmCellEvent.STATE_CHANGED,this.onCellState.bind(this)),this.registerListener(this._farm,_.FarmEvent.FIELD_BLOCKED_CHANGED,this.onFieldBlocked.bind(this)),this.onCellState()},FarmCellMediator.prototype.onFieldBlocked=function(t){this._buyButton.enabled=!this._farm.fieldBlocked&&this._showData.canBuy},FarmCellMediator.prototype.onCellState=function(t){switch(this._container.currentState=this._showData.state,this._showData.state){case"availableForPurchase":this._awardRenderer=(new s.AwardRenderer).initialize(this._showData.calculateUnlockPrice().prices[0],this.child("priceContainer"),{iconId:64}),this.registerListener(this._buyButton,y.POINTER_TAP,this.onBuy.bind(this)),this.registerListener(this._showData,i.FarmCellEvent.CAN_BUY_CHANGED,this.onCanBuy.bind(this)),this.registerListener(this._generator,a.FarmGeneratorEvent.STAGE_CHANGED,this.onStage.bind(this)),this.setupGeneratorIcon(),this.onCanBuy(),this.onStage();break;case"purchased":this._container.buttonMode=!0,this.registerListener(this._generator,a.FarmGeneratorEvent.RESOURCE_PROGRESS_CHANGED,this.onProgress.bind(this)),this.registerListener(this._generator,a.FarmGeneratorEvent.RESOURCE_TIME_LEFT_CHANGED,this.onTimeLeft.bind(this)),this.registerListener(this._generator,a.FarmGeneratorEvent.STAGE_CHANGED,this.onStage.bind(this)),this.registerListener(this._generator,a.FarmGeneratorEvent.STATE_CHANGED,this.onGeneratorState.bind(this)),this.registerListener(this._container,y.POINTER_TAP,this.onHint.bind(this)),this.onProgress(),this.onTimeLeft(),this.onStage(),this.onGeneratorState()}},FarmCellMediator.prototype.onHint=function(t){this._farm.fieldBlocked||this.showHint(!1)},FarmCellMediator.prototype.showHint=function(t){c.Application.view.show(u.GUINames.FARM_CELL_WINDOW,new p.ViewContext({animate:t,shop:this._showData.farm.getShopById(this._generator.id)}))},FarmCellMediator.prototype.onCanBuy=function(t){this._buyButton.enabled=!this._farm.fieldBlocked&&this._showData.canBuy},FarmCellMediator.prototype.onGeneratorState=function(t){this._resourceIcon.resource=this._generator.getResourceIcon()},FarmCellMediator.prototype.onStage=function(t){this.setupGeneratorIcon()},FarmCellMediator.prototype.setupGeneratorIcon=function(){this._generatorIcon.resource=this._generator.icon},FarmCellMediator.prototype.onTimeLeft=function(t){this._progressLabel.text=this._generator.resourceTimeLeftString},FarmCellMediator.prototype.onProgress=function(t){this._progressBar.progress=this._generator.resourceProgress},FarmCellMediator.prototype.onBuy=function(t){return b(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return this._farm.fieldBlocked=!0,[4,r.ElkaCore.instance.promiseManager.ask(new o.FarmBuyPromise(this._showData))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(e=l.AnimationUtils.flyResourceFromHud(this._showData.calculateUnlockPrice().prices[0].itemId,this.window,this._container,this._middle,{soundName:f.SoundName.SHOVEL}),this._animations=new d.ParallelProcess(e),this.registerListener(this._animations,h.ProcessEvent.COMPLETE,this.onAnimationsComplete.bind(this)),this._animations.start(),[2])}})})},FarmCellMediator.prototype.onAnimationsComplete=function(t){this.showHint(!0),this._animations=null,this._farm.fieldBlocked=!1},FarmCellMediator.prototype.destroy=function(){this._awardRenderer&&this._awardRenderer.destroy(),this._animations&&(this._animations.stop(),this._farm.fieldBlocked=!1),e.prototype.destroy.call(this)},FarmCellMediator}(n.DisplayObjectContainerMediator);e.FarmCellMediator=m}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(4),n(463),n(107),n(460),n(0),n(30),n(34),n(48)],void 0===(r=function(t,e,n,r,i,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,d=function(e){function FarmShopMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return h(FarmShopMediator,e),FarmShopMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._timeLeftText=s.Application.localization.localize("FARM_GENERATOR_TIME_LEFT"),this._exchangeButton=this.child("sellButton"),this._multiplierLabel=this.child("multiplierLabel"),this._progressBar=this.child("progressBar"),this._progressLabel=this.child("progressLabel"),this._generatorIcon=this.child("generatorIcon"),this._progressContainer=this.child("progressContainer"),this._timeLeftLabel=this.child("timeLeft"),this._numAwards=this.child("awardCountLabel"),this._middlePoint=this.child("middlePoint"),this._animationContainer=this.window.getChildByName("animationContainer"),this._awardIconImage=this.child("awardIconImage"),this._awardIconImage.resource=this._showData.generator.awardIcon,this.registerListener(this._exchangeButton,l.POINTER_TAP,this.onExchange.bind(this)),this.registerListener(this._showData,i.FarmShopEvent.MULTIPLIER_CHANGED,this.onMultiplier.bind(this)),this.registerListener(this._showData.generator,o.FarmGeneratorEvent.STATE_CHANGED,this.onState.bind(this)),this.registerListener(this._showData.generator,o.FarmGeneratorEvent.STAGE_CHANGED,this.onStage.bind(this)),this.registerListener(this._showData.generator,o.FarmGeneratorEvent.NUN_RESOURCES_CHANGED,this.onNumResources.bind(this)),this.registerListener(this._showData.generator,o.FarmGeneratorEvent.TOTAL_PROGRESS_CHANGED,this.onProgress.bind(this)),this.registerListener(this._showData.generator,o.FarmGeneratorEvent.TOTAL_TIME_LEFT_CHANGED,this.onTimeLeft.bind(this)),this.onState(),this.onMultiplier(),this.onNumResources(),this.onProgress(),this.onTimeLeft()},FarmShopMediator.prototype.updateAward=function(){var t=this._showData.numAwards;this._numAwards.text=t.toString(),this._exchangeButton.enabled=0<t},FarmShopMediator.prototype.onStage=function(t){this.updateAward()},FarmShopMediator.prototype.onMultiplier=function(t){this._multiplierLabel.text=this._showData.multiplier.toString(),this.onNumResources(),this.onProgress()},FarmShopMediator.prototype.onNumResources=function(t){this._progressLabel.text=this._showData.numResources+"/"+this._showData.maxResources,this.updateAward()},FarmShopMediator.prototype.onState=function(t){this._container.currentState=this._showData.generator.state,this._generatorIcon.resource=this._showData.generator.getShopIcon()},FarmShopMediator.prototype.onTimeLeft=function(t){this._timeLeftLabel.text=this._timeLeftText+" "+this._showData.generator.totalTimeLeftString},FarmShopMediator.prototype.onProgress=function(t){var e=this._showData.progress;1===e?this._progressContainer.currentState="complete":(this._progressContainer.currentState="inProgress",this._progressBar.progress=e)},FarmShopMediator.prototype.onExchange=function(t){return _(this,void 0,void 0,function(){var e,n,i;return f(this,function(t){switch(t.label){case 0:return n=this._showData.numAwards,[4,r.ElkaCore.instance.promiseManager.ask(new a.FarmExchangePromise(this._showData.generator))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(i=c.AnimationUtils.flyResourceToHud(this._showData.generator.awardResource.id,this.window,this._awardIconImage,this._middlePoint,{count:Math.min(n,8)}),(e=this._animations).push.apply(e,i),this.registerListener(i[i.length-1],u.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),[2])}})})},FarmShopMediator.prototype.onAnimationComplete=function(){s.Application.model.guides.dispatchEvent(new p.GuidesModelEvent(p.GuidesModelEvent.FARM_EXCHANGE_ANIMATION_COMPLETE))},FarmShopMediator.prototype.destroy=function(){this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},FarmShopMediator}(n.DisplayObjectContainerMediator);e.FarmShopMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(4),n(107),n(15),n(461),n(30),n(43),n(0),n(48)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,d=function(e){function FarmUpgradeMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._animations=[],t}return h(FarmUpgradeMediator,e),FarmUpgradeMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._generator=this._showData.generator,this._upgradeButton=this.child("sellButton"),this._generatorIcon=this.child("generatorIcon"),this._resourceCount=this.child("resourceCountLabel"),this._finish=this.child("finishPoint"),this._middle=this.child("middlePoint"),this._priceRenderer=(new o.AwardRenderer).initialize(null,this.child("priceContainer"),{iconId:64,renderOnInit:!1}),this._awardRenderer=(new o.AwardRenderer).initialize(null,this.child("awardContainer"),{iconId:64,renderOnInit:!1}),this.registerListener(this._upgradeButton,l.POINTER_TAP,this.onUpgrade.bind(this)),this.registerListener(this._generator,r.FarmGeneratorEvent.STATE_CHANGED,this.onState.bind(this)),this.registerListener(this._generator,r.FarmGeneratorEvent.STAGE_CHANGED,this.onStage.bind(this)),this.registerListener(this._generator,r.FarmGeneratorEvent.CAN_UPGRADE_CHANGED,this.onCanUpgrade.bind(this)),this.onState(),this.onStage()},FarmUpgradeMediator.prototype.onCanUpgrade=function(t){this._upgradeButton.enabled=this._generator.canUpgrade},FarmUpgradeMediator.prototype.onStage=function(t){var e=this._generator.calculateUpgradePrice(),n=this._generator.calculateAward();e&&n&&(this._resourceCount.text=this._generator.exchangeRate.toString(),this._priceRenderer.updateAward(e.prices[0]),this._awardRenderer.updateAward(n.awards[0]),this._upgradeButton.enabled=this._generator.canUpgrade)},FarmUpgradeMediator.prototype.onState=function(t){"regular"===this._generator.state&&(this.child("resourceIconImage").resource=this._generator.getResourceIcon()),this._container.currentState=this._generator.state,this._generatorIcon.resource=this._generator.getShopIcon()},FarmUpgradeMediator.prototype.onUpgrade=function(t){return _(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return[4,i.ElkaCore.instance.promiseManager.ask(new a.FarmStageUpPromise(this._showData.generator))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(n=s.AnimationUtils.flyResourceFromHud(this._showData.generator.upgradeResource.id,this.window,this._finish,this._middle,{soundName:c.SoundName.COINS,lastOnComplete:function(){return u.Application.model.guides.dispatchEvent(new p.GuidesModelEvent(p.GuidesModelEvent.FARM_UPGRADE_ANIMATION_COMPLETE))}}),(e=this._animations).push.apply(e,n),[2])}})})},FarmUpgradeMediator.prototype.destroy=function(){this._awardRenderer.destroy(),this._priceRenderer.destroy(),this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},FarmUpgradeMediator}(n.DisplayObjectContainerMediator);e.FarmUpgradeMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(75),n(34)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function FarmCellWindowMediator(){return null!==r&&r.apply(this,arguments)||this}return c(FarmCellWindowMediator,r),FarmCellWindowMediator.prototype.initialize=function(t){var e=this;r.prototype.initialize.call(this,t),this.child("titleLabel").text=this._showData.shop.generator.name;for(var n=[],i=1;i<=5;i++)n.push({shopModel:this._showData.shop,animate:this._showData.animate,currentMultiplier:i});this.child("progressList").addItems(n),this._showData.animate?(this.viewHandle.onShown.capture(),this._timer=o.Application.date.callProcessor.delayCall(function(){return e.viewHandle.onShown.complete()},(25+(1<this._showData.shop.multiplier?30:0))*a.AnimationService.FPS)):(this.viewHandle.onShown.capture(),this._animation=o.Application.animation.animate(this._container,"popupShowAnimation"),this.registerListener(this._animation,s.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)))},FarmCellWindowMediator.prototype.onAnimationComplete=function(){this.viewHandle.onShown.complete(),this._animation=null},FarmCellWindowMediator.prototype.destroy=function(){this._animation&&this._animation.stop(),-1!==this._timer&&o.Application.date.callProcessor.deleteCall(this._timer),r.prototype.destroy.call(this)},FarmCellWindowMediator}(n.DisplayObjectContainerMediator);e.FarmCellWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(29),n(0)],void 0===(r=function(t,e,n,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(a){function FarmCellProgressMediator(){return null!==a&&a.apply(this,arguments)||this}return u(FarmCellProgressMediator,a),FarmCellProgressMediator.prototype.initialize=function(t){a.prototype.initialize.call(this,t);var e=this._showData.shopModel.generator,n=this._showData.currentMultiplier.toString();this.child("multiplierLabel").text=n,this.child("resourceCountLabel").text=n;var i=e.maxResources*this._showData.currentMultiplier;0<i?(this.child("maxResourcesLabel").text=i.toString(),this.child("infinity").visible=!1):this.child("maxResourcesLabel").visible=!1,this.child("cooldownLabel").text=s.DateUtils.timeToString(Math.floor(.001*e.cooldown)),this.child("generatorIcon").resource=e.getShopIcon(),this.child("resourceIconImage").resource=e.getResourceIcon();var r=this.getState();if(this._container.currentState=r,this._showData.animate){var o=this._showData.shopModel.multiplier;"prev"===r?this._showData.currentMultiplier===o-1?(this._animation=c.Application.animation.create("farmProgressItem_toPrev",{container:this._container,bg:this.child("greenBG")}),this._animation.start()):this._container.alpha=.5:"current"===r&&(this._animation=c.Application.animation.create("farmProgressItem_toCurrent",{delay:1===o?0:500,container:this._container,bg:this.child("greenBG"),check:this.child("check")}),this._animation.start())}else"prev"===r&&(this._container.alpha=.5)},FarmCellProgressMediator.prototype.getState=function(){var t=this._showData.shopModel.multiplier;return this._showData.currentMultiplier<t?"prev":this._showData.currentMultiplier===t?"current":"next"},FarmCellProgressMediator.prototype.destroy=function(){this._animation&&this._animation.stop(),a.prototype.destroy.call(this)},FarmCellProgressMediator}(n.DisplayObjectContainerMediator);e.FarmCellProgressMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=function(n){function FarmGeneratorWindowMediator(){return null!==n&&n.apply(this,arguments)||this}return c(FarmGeneratorWindowMediator,n),FarmGeneratorWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=i.Application.model.farms.getCurrentFarm();this.child("cellList").addItems(e.cells),this.registerListener(this.child("goButton"),a.POINTER_TAP,this.onGo.bind(this))},FarmGeneratorWindowMediator.prototype.onGo=function(t){i.Application.view.hide(this.viewHandle),i.Application.view.show(r.GUINames.GENERATORS_WINDOW,new o.ViewContext("farm"))},FarmGeneratorWindowMediator}(n.DisplayObjectContainerMediator);e.FarmGeneratorWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function FarmGeneratorCellMediator(){return null!==e&&e.apply(this,arguments)||this}return a(FarmGeneratorCellMediator,e),FarmGeneratorCellMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.child("generatorIcon").resource=this._showData.generator.icon},FarmGeneratorCellMediator}(n.DisplayObjectContainerMediator);e.FarmGeneratorCellMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function FarmDataProvider(){}return FarmDataProvider.prototype.getValue=function(t,e){var n,i=t.split("."),r=i[0];i[1];switch(r){case FarmDataProvider.EXCHANGE_ENABLE:if(n=e[0],1!==e.length||"generator"!==n.type||1!==n.values.length)throw Error("FarmDataProvider incorrect filter");return 0<a.Application.model.farms.getCurrentFarm().getShopById(n.values[0]).numAwards?1:0;case FarmDataProvider.UPGRADE_ENABLE:if(n=e[0],1!==e.length||"generator"!==n.type||1!==n.values.length)throw Error("FarmDataProvider incorrect filter");return a.Application.model.farms.getCurrentFarm().getShopById(n.values[0]).generator.canUpgrade?1:0;case FarmDataProvider.EXCHANGE_AND_UPGRADE_ENABLE:if(n=e[0],1!==e.length||"generator"!==n.type||1!==n.values.length)throw Error("FarmDataProvider incorrect filter");var o=a.Application.model.farms.getCurrentFarm().getShopById(n.values[0]);return 0<o.numAwards&&o.generator.canUpgrade?1:0;default:throw new Error("FarmDataProvider: unsupported type "+r)}},FarmDataProvider.prototype.watch=function(t,e){},FarmDataProvider.prototype.unwatch=function(t,e){},FarmDataProvider.EXCHANGE_ENABLE="exchangeEnable",FarmDataProvider.UPGRADE_ENABLE="upgradeEnable",FarmDataProvider.EXCHANGE_AND_UPGRADE_ENABLE="exchangeAndUpgradeEnable",FarmDataProvider}();e.FarmDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,V=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(2),n(1478),n(18),n(0),n(1479),n(1480),n(1481),n(1482),n(1483),n(22),n(1487),n(466),n(467),n(1489),n(31),n(1491),n(1492),n(469),n(1493),n(1495),n(1496),n(470),n(1497),n(464),n(1499),n(249),n(1501),n(1503),n(465),n(1505),n(455),n(468),n(1507),n(51),n(245),n(140),n(1509),n(62)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G,U,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var F=function(t){function WorkshopModule(){return null!==t&&t.apply(this,arguments)||this}return V(WorkshopModule,t),WorkshopModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new a.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new k.RegisterSeasonLoaderPromise(this))},WorkshopModule.prototype.onPreloadModule=function(t){s.Application.model.workshops=new d.WorkshopsModel,s.Application.model.workshopMarkers=new B.WorkshopMarkersModel,s.Application.dataProvider.registerProvider("workshop",new U.WorkshopDataProvider),s.Application.view.mapMediator(""+r.GUINames.WORKSHOP_WINDOW,o.WorkshopWindowMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_WINDOW+".magicShopContainer",l.WorkshopContainerMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_WINDOW+".magicShopContainer.itemsList.*",u.WorkshopListItemMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_WINDOW+".requestsContainer",c.WorkshopRequestsContainerMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_WINDOW+".giftsContainer",p.WorkshopGiftsContainerMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_WINDOW+".workshopRequestWindow",b.WorkshopRequestWindowMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_WINDOW+".workshopRequestWindow.itemsList.*",g.WorkshopRequestListItemMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_GIFTS_WINDOW,P.WorkshopGiftsWindowMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_GIFTS_WINDOW,W.SimplePopupAnimationMediator),s.Application.view.mapMediator(r.GUINames.WORKSHOP_GIFTS_WINDOW+".giftsContainer.friendsScrollContainer.giftsList.*",S.WorkshopGiftsListItemMediator),s.Application.view.mapMediator(""+r.GUINames.WORKSHOP_GIFTS_ERROR_WINDOW,W.SimplePopupAnimationMediator),h.CommandMap.map(f.WorkshopBuyPromise,_.WorkshopBuyCommand),h.CommandMap.map(y.WorkshopCollectPromise,m.WorkshopCollectCommand),h.CommandMap.map(w.WorkshopSetSlotPromise,O.WorkshopSetSlotCommand),h.CommandMap.map(E.WorkshopSendPromise,A.WorkshopSendCommand),h.CommandMap.map(M.WorkshopClearSlotPromise,D.WorkshopClearSlotCommand),h.CommandMap.map(j.WorkshopAcceptSlotPromise,T.WorkshopAcceptSlotCommand),h.CommandMap.map(R.WorkshopGetSlotPromise,x.WorkshopGetSlotCommand),h.CommandMap.map(I.WorkshopGetFriendSlotsPromise,C.WorkshopGetFriendSlotsCommand),h.CommandMap.map(N.WorkshopGetFinalAwardPromise,L.WorkshopGetFinalAwardCommand),s.Application.operation.addAllowingRule(new v.OccurrenceBeginningLineRule("/collections")),s.Application.operation.addAllowingRule(new v.OccurrenceBeginningLineRule("/workshop")),s.Application.push.target.addEventListener(G.PushMessageEvent.TYPE_MESSAGE,this.onPushEvent.bind(this))},WorkshopModule.prototype.onVisitSeason=function(t){s.Application.model.workshopMarkers.initialize()},WorkshopModule.prototype.onLeaveSeason=function(){s.Application.model.workshopMarkers.destroy()},WorkshopModule.prototype.onPushEvent=function(t){"wait"===s.Application.model.workshops.getCurrentWorkshop().slot.state&&"wrks:s"===t.messageType&&(s.Application.debug.addLog(this.DEBUG_CHANNEL,t),s.Application.model.workshops.getCurrentWorkshop().slot.dynamicData.update({elementId:t.data.data.element,sFriendId:t.data.data.sFriendId,status:2}))},WorkshopModule}(n.Module);e.WorkshopModule=F}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(123),n(221)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=function(e){function WorkshopWindowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderer=new r.NavigatorRenderer,t}return c(WorkshopWindowMediator,e),WorkshopWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._workshop=i.Application.model.workshops.getCurrentWorkshop(),this._workshop.setCurrentCollection(this._showData.collectionId),this._renderer.initialize({items:this._workshop.collections,pageSize:1,startPage:this._showData.collectionId},this._container),this._requirements=i.Application.static.data.client.minLevelParams.minLevelParam.getItem("workshop").requirements,i.Application.requirements.check(this._requirements)?this.child("blockLevelContainer").visible=!1:(this.child("blockLevelContainer").visible=!0,this.child("blockLevelLabel").text=i.Application.localization.localize("WORKSHOP_LEVEL_BLOCK_LABEL",{level:this._requirements.requirement[0].minValue})),this._blockContainer=this.child("blockContainer"),this._blockContainer.visible=!this._workshop.currentCollection.available,this.registerListener(this._renderer,o.NavigatorRendererEvent.PAGE_CHANGED,this.onPageChanged.bind(this)),this.registerListener(this.child("backButton"),a.POINTER_TAP,this.onBackButton.bind(this))},WorkshopWindowMediator.prototype.onPageChanged=function(t){this._workshop.setCurrentCollection(t.data),this._blockContainer.visible=!this._workshop.currentCollection.available},WorkshopWindowMediator.prototype.onBackButton=function(){i.Application.view.hide(this.viewHandle),this._workshop.setCurrentCollection(0)},WorkshopWindowMediator.prototype.destroy=function(){this._renderer.destroy(),e.prototype.destroy.call(this)},WorkshopWindowMediator}(n.DisplayObjectContainerMediator);e.WorkshopWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,v=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2),n(40),n(4),n(464),n(246),n(58),n(465),n(29),n(8),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=uipixi.GestureEvent,y=uipixi.UIFactory,m=function(e){function WorkshopRequestsContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return v(WorkshopRequestsContainerMediator,e),WorkshopRequestsContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._slotData=i.Application.model.workshops.getCurrentWorkshop().slot,this.getChildren(),this._profileRenderer=(new a.ProfileRenderer).initialize(null,this._userContainer,{renderOnInit:!1,cropedFullnameLength:12,cropedFullnameSuffix:p.StringUtils.DEFAULT_CROP_SUFFIX}),this.setParams(),i.Application.tooltip.addTooltip(this._tooltip,r.TooltipAnchor.Top,o.GUINames.TEXT_TOOLTIP,{text:i.Application.localization.localize("MAGIC_SHOP_REQUESTS_TOOLTIP_1")}),this.registerListener(this._slotData,u.WorkshopSlotModelEvent.CHANGED,this.setParams.bind(this)),this.registerListener(this._slotData,u.WorkshopSlotModelEvent.TIMEOUT_CHANGED,this.setParams.bind(this)),this.registerListener(this._acceptButton,f.POINTER_TAP,this.onAcceptButton.bind(this)),this.registerListener(this._requestButton,f.POINTER_TAP,this.onRequestButton.bind(this)),this.registerListener(this._cancelButton,f.POINTER_TAP,this.onCancelButton.bind(this))},WorkshopRequestsContainerMediator.prototype.getChildren=function(){this._acceptButton=this.child("acceptButton"),this._requestButton=this.child("requestButton"),this._cancelButton=this.child("cancelButton"),this._timerContainer=this.child("requestTimerContainer"),this._userContainer=this.child("userContainer"),this._timerLabel=this.child("requestTimerLabel"),this._requestImage=this.child("requestImage"),this._requestName=this.child("requestName"),this._requestLabel=this.child("requestLabel"),this._tooltip=this.child("tooltipButton"),this._label=this.child("friendContainerLabel")},WorkshopRequestsContainerMediator.prototype.setParams=function(){switch(this._container.currentState=this._slotData.state,this._container.currentState){case"wait":this._requestLabel.text=i.Application.localization.localize("MAGIC_SHOP_REQUESTS_TITLE_2"),this._requestName.text=i.Application.localization.localize(this._slotData.elementName),this._loadableImage&&this._loadableImage.destroy(),this._loadableImage=new _.LoadableImage(this._requestImage,this._slotData.elementIcon);break;case"doRequest":this._requestLabel.text=i.Application.localization.localize("MAGIC_SHOP_REQUESTS_TITLE_1");break;case"timer":this._requestLabel.text=i.Application.localization.localize("MAGIC_SHOP_REQUESTS_TITLE_1"),this._timerLabel.text=d.DateUtils.timeToString(this._slotData.timeout);break;case"accept":this._loadableImage&&this._loadableImage.destroy(),this._loadableImage=new _.LoadableImage(this._requestImage,this._slotData.elementIcon),this._requestName.text=i.Application.localization.localize(this._slotData.elementName);var t=i.Application.profiles.getProfile(this._slotData.dynamicData.sFriendId,!0);this._label.text=i.Application.localization.localize("MAGIC_SHOP_REQUESTS_TITLE_3",{gender:t.isMale}),this._profileRenderer.update(t)}},WorkshopRequestsContainerMediator.prototype.onAcceptButton=function(){s.ElkaCore.instance.promiseManager.ask(new l.WorkshopAcceptSlotPromise)},WorkshopRequestsContainerMediator.prototype.onRequestButton=function(){var t=y.instance.createUIElementByName("workshopRequestWindow");i.Application.view.addChild(this._container.parent,t,new h.ViewContext({}))},WorkshopRequestsContainerMediator.prototype.onCancelButton=function(){s.ElkaCore.instance.promiseManager.ask(new c.WorkshopClearSlotPromise)},WorkshopRequestsContainerMediator.prototype.destroy=function(){this._profileRenderer&&this._profileRenderer.destroy(),this._loadableImage&&this._loadableImage.destroy(),e.prototype.destroy.call(this)},WorkshopRequestsContainerMediator}(n.DisplayObjectContainerMediator);e.WorkshopRequestsContainerMediator=m}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(247),n(0),n(248),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(e){function WorkshopListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return u(WorkshopListItemMediator,e),WorkshopListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.getChildren(),this.setParams(),this.registerListener(this._showData,a.WorkshopCollectionElementModelEvent.COUNT_CHANGED,this.setParams.bind(this))},WorkshopListItemMediator.prototype.getChildren=function(){this._itemNameLabel=this.child("itemNameLabel"),this._itemCountLabel=this.child("itemCountLabel"),this._resourceImage=this.child("resourceImage"),this._awardContainer=this.child("magicShopPriceItemRenderer")},WorkshopListItemMediator.prototype.setParams=function(){switch(this._container.currentState=this._showData.state,this._itemNameLabel.text=o.Application.localization.localize(this._showData.name),this._loadableImage&&this._loadableImage.destroy(),this._loadableImage=new s.LoadableImage(this._resourceImage,this._showData.icon),this._showData.state){case r.CollectionElementState.DARK:if(!this._showData.collected){this._awardRenderer&&this._awardRenderer.destroy();var t=o.Application.award.calculate(this._showData.firstBuyAward);this._awardRenderer=(new i.AwardRenderer).initialize(t.awards[0],this._awardContainer,{iconId:64,fit:!0})}break;case r.CollectionElementState.DEFAULT:this._itemCountLabel.text=this._showData.count.toString()}},WorkshopListItemMediator.prototype.destroy=function(){this._awardRenderer&&this._awardRenderer.destroy(),this._loadableImage.destroy(),e.prototype.destroy.call(this)},WorkshopListItemMediator}(n.DisplayObjectContainerMediator);e.WorkshopListItemMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(21),n(2),n(4),n(249)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(e){function WorkshopGiftsContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return p(WorkshopGiftsContainerMediator,e),WorkshopGiftsContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),i.Application.tooltip.addTooltip(this.child("giftsTooltipButton"),r.TooltipAnchor.Top,o.GUINames.TEXT_TOOLTIP,{text:"MAGIC_SHOP_GIFTS_TOOLTIP"}),this.registerListener(this.child("helpButton"),c.POINTER_TAP,this.onHelpButton.bind(this))},WorkshopGiftsContainerMediator.prototype.onHelpButton=function(){return l(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,a.ElkaCore.instance.promiseManager.ask(new s.WorkshopGetFriendSlotsPromise)];case 1:return t.sent(),this._cancellationToken.requested?[2]:(i.Application.view.show(o.GUINames.WORKSHOP_GIFTS_WINDOW),[2])}})})},WorkshopGiftsContainerMediator}(n.DisplayObjectContainerMediator);e.WorkshopGiftsContainerMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(15),n(38),n(0),n(4),n(466),n(467),n(106),n(162),n(468),n(222)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=uipixi.GestureEvent,_=function(e){function WorkshopContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return f(WorkshopContainerMediator,e),WorkshopContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._workshop=o.Application.model.workshops.getCurrentWorkshop(),this._collection=this._workshop.currentCollection,this.getChildren(),this._toyRenderer=(new i.AwardRenderer).initialize(null,this._container,{iconImage:this.child("toyImage"),preferToySpine:!0,iconId:96,titleLabel:this.child("toyTitle"),countLabel:!1,renderOnInit:!1}),this.setParams(),this.setNewCollection(),this.registerListener(this._workshop,u.WorkshopModelEvent.COLLECTION_CHANGED,this.onCollectionChanged.bind(this)),this.registerListener(this._collection,p.WorkshopCollectionModelEvent.CAN_COLLECT,this.setParams.bind(this)),this.registerListener(this._collection,p.WorkshopCollectionModelEvent.COLLECTED_FIRST_TIME,this.setParams.bind(this)),this.registerListener(this._workshop,u.WorkshopModelEvent.UPDATE_FINAL_AWARD_STATE,this.setParams.bind(this)),this.registerListener(this._workshop,u.WorkshopModelEvent.COLLECT_FINAL_AWARD,this.onCollectFinalAward.bind(this)),this.registerListener(this._collection,p.WorkshopCollectionModelEvent.CURRENCY_CHANGED,this.setParams.bind(this)),this.registerListener(this._buyButton,h.POINTER_TAP,this.onBuyButton.bind(this)),this.registerListener(this._createButton,h.POINTER_TAP,this.onCreateButton.bind(this)),this.registerListener(this._getFinalAwardButton,h.POINTER_TAP,this.onGetAwardButton.bind(this)),this.registerListener(this._collection.toyModel,d.ToyModelEvent.COUNT_CHANGED,this.setParams.bind(this))},WorkshopContainerMediator.prototype.getChildren=function(){this._toyPresent=this.child("toyPresent"),this._presentContainer=this.child("presentContainer"),this._beautyCountLabel=this.child("beautyCountLabel"),this._createButton=this.child("createButton"),this._buyButton=this.child("buyButton"),this._itemsList=this.child("itemsList"),this._finalAwardContainer=this.child("finalAwardContainer"),this._getFinalAwardButton=this.child("getFinalAwardButton")},WorkshopContainerMediator.prototype.onCollectFinalAward=function(){this.setParams(),this.setNewCollection()},WorkshopContainerMediator.prototype.setParams=function(){if(this._workshop.canGetFinalAward){this._finalAwardContainer.visible=!0;var t=o.Application.award.calculate(this._workshop.finalAward);this._awardRenderer=(new i.AwardRenderer).initialize(t.awards[0],this.child("awardContainer"),{iconId:64}),this._presentContainer.visible=!1}else this._finalAwardContainer.visible=!1,this._collection.collected?this._presentContainer.visible=!1:(this._presentContainer.visible=!0,this._toyPresent.resource=r.PriceAwardUtils.getResourceResourceId(this._collection.firstAward.award[0].itemId,"64")),this._createButton.enabled=this._collection.canCollect,this._buyButton.enabled=this._collection.canBuy},WorkshopContainerMediator.prototype.setNewCollection=function(){if(!this._workshop.canGetFinalAward){this._toyRenderer.updateAward(this._collection.awardToyItem),this._beautyCountLabel.text=this._collection.toyStaticData.beauty.toString();var t=o.Application.price.calculate(this._collection.elementPrice);this._priceRenderer&&this._priceRenderer.destroy(),this._priceRenderer=(new i.AwardRenderer).initialize(t.prices[0],this.child("magicShopButtonBuyItemRenderer"),{iconId:64,fit:!0}),this._itemsList.removeAllItems(),this._itemsList.addItems(this._collection.elements)}},WorkshopContainerMediator.prototype.onCollectionChanged=function(){this.unregisterListener(this._collection,p.WorkshopCollectionModelEvent.CAN_COLLECT,this.setParams.bind(this)),this.unregisterListener(this._collection,p.WorkshopCollectionModelEvent.CURRENCY_CHANGED,this.setParams.bind(this)),this.unregisterListener(this._collection.toyModel,d.ToyModelEvent.COUNT_CHANGED,this.setParams.bind(this)),this._collection=this._workshop.currentCollection,this.registerListener(this._collection,p.WorkshopCollectionModelEvent.CAN_COLLECT,this.setParams.bind(this)),this.registerListener(this._collection,p.WorkshopCollectionModelEvent.CURRENCY_CHANGED,this.setParams.bind(this)),this.registerListener(this._collection.toyModel,d.ToyModelEvent.COUNT_CHANGED,this.setParams.bind(this)),this.setParams(),this.setNewCollection()},WorkshopContainerMediator.prototype.onCreateButton=function(){return y(this,void 0,void 0,function(){return m(this,function(t){return a.ElkaCore.instance.promiseManager.ask(new c.WorkshopCollectPromise(this._collection)),[2]})})},WorkshopContainerMediator.prototype.onGetAwardButton=function(){return y(this,void 0,void 0,function(){return m(this,function(t){return a.ElkaCore.instance.promiseManager.ask(new l.WorkshopGetFinalAwardPromise),[2]})})},WorkshopContainerMediator.prototype.onBuyButton=function(){return y(this,void 0,void 0,function(){return m(this,function(t){return a.ElkaCore.instance.promiseManager.ask(new s.WorkshopBuyPromise(this._collection)),[2]})})},WorkshopContainerMediator.prototype.destroy=function(){this._priceRenderer&&this._priceRenderer.destroy(),this._awardRenderer&&this._awardRenderer.destroy(),this._toyRenderer&&this._toyRenderer.destroy(),e.prototype.destroy.call(this)},WorkshopContainerMediator}(n.DisplayObjectContainerMediator);e.WorkshopContainerMediator=_}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(1484),n(1486)],void 0===(r=function(t,e,o,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WorkshopsModel(){this._screenToWorkshopMap=new core.Map,this._collections=[],this.addCollections();for(var t=0,e=o.Application.static.data.screens.screen.items;t<e.length;t++){var n=e[t];this._screenToWorkshopMap.set(n.id,new i.WorkshopModel(o.Application.static.data.workshop,o.Application.dynamic.workshop,this._collections[n.id]))}}return WorkshopsModel.prototype.addCollections=function(){for(var t=0,e=o.Application.static.data.workshop.collections.collection.items;t<e.length;t++){var n=e[t],i=new a.WorkshopCollectionModel(n),r=n.screenId;this._collections[r]||(this._collections[r]=[]),this._collections[r].push(i)}},WorkshopsModel.prototype.getWorkshopByScreenId=function(t){return this._screenToWorkshopMap.get(t)},WorkshopsModel.prototype.getCurrentWorkshop=function(){return this.getWorkshopByScreenId(o.Application.dynamic.user.screen)},WorkshopsModel}();e.WorkshopsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(106),n(1485),n(0),n(13),n(37),n(162)],void 0===(r=function(t,e,n,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function WorkshopModel(t,e,n){var i=r.call(this)||this;return i._staticData=t,i._dynamicData=e,i._collections=n,i._canGetFinalAward=!1,i._isAwardGet=!1,i._awardDynamicData=a.Application.dynamic.user.workshop.getItem(a.Application.dynamic.user.screen.toString()),i._awardDynamicData?i._awardDynamicData.addEventListener(s.BaseDataEvent.CHANGED,i.checkFinalAward.bind(i)):a.Application.dynamic.user.workshop.addEventListener(c.ItemCollectionEvent.ITEM_ADDED,i.onAwardAdded.bind(i)),i._currentCollection=i._collections[0],i._friendRequests=i._dynamicData.list,i._slot=new o.WorkshopSlotModel(i,i._dynamicData.requiredSlot),i.checkFinalAward(),i._collections[i._collections.length-1].addEventListener(u.WorkshopCollectionModelEvent.COLLECTED_FIRST_TIME,i.checkFinalAward.bind(i)),i}return p(WorkshopModel,r),WorkshopModel.prototype.checkFinalAward=function(){this._isAwardGet=!!this._awardDynamicData&&0!==this._awardDynamicData.award,this._canGetFinalAward=this._collections[this._collections.length-1].collected&&!this._isAwardGet,this.dispatchEvent(new n.WorkshopModelEvent(n.WorkshopModelEvent.UPDATE_FINAL_AWARD_STATE))},WorkshopModel.prototype.onAwardAdded=function(t){t.item.id==a.Application.dynamic.user.screen.toString()&&(a.Application.dynamic.user.workshop.removeEventListener(c.ItemCollectionEvent.ITEM_ADDED,this.onAwardAdded.bind(this)),this._awardDynamicData=t.item,this._awardDynamicData.addEventListener(s.BaseDataEvent.CHANGED,this.checkFinalAward.bind(this)),this.checkFinalAward())},Object.defineProperty(WorkshopModel.prototype,"collections",{get:function(){return this._collections},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopModel.prototype,"currentCollection",{get:function(){return this._currentCollection},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopModel.prototype,"isAwardGet",{get:function(){return this._isAwardGet},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopModel.prototype,"canGetFinalAward",{get:function(){return this._canGetFinalAward},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopModel.prototype,"slot",{get:function(){return this._slot},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopModel.prototype,"friendRequests",{get:function(){return this._friendRequests},set:function(t){this._friendRequests=t,this.dispatchEvent(new n.WorkshopModelEvent(n.WorkshopModelEvent.FRIEND_REQUESTS_CHANGED))},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopModel.prototype,"finalAward",{get:function(){return this._staticData.screens.screen.getItem(a.Application.dynamic.user.screen).finalAward.awards[0]},enumerable:!0,configurable:!0}),WorkshopModel.prototype.setCurrentCollection=function(t){this._currentCollection!==this._collections[t]&&(this._currentCollection=this._collections[t],this.dispatchEvent(new n.WorkshopModelEvent(n.WorkshopModelEvent.COLLECTION_CHANGED)))},WorkshopModel.prototype.getCollectionByElementId=function(t){for(var e=0,n=this._collections;e<n.length;e++)for(var i=n[e],r=0,o=i.elements;r<o.length;r++){if(o[r].id===t)return i}},WorkshopModel}(uipixi.BaseEventTarget);e.WorkshopModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(13),n(246),n(106)],void 0===(r=function(t,e,r,o,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function WorkshopSlotModel(t,e){var n=i.call(this)||this;return n._workshopData=t,n._dynamicData=e,n._timeout=0,n._intervalId=-1,n._availableAt=0,n._dateService=r.Application.date,n.updateState(),n._availableAt=n._dynamicData.cooldown,n.updateTimer(),n._dynamicData.addEventListener(o.BaseDataEvent.CHANGED,n.onChanged.bind(n)),n._workshopData.addEventListener(a.WorkshopModelEvent.UPDATE_FINAL_AWARD_STATE,n.onChanged.bind(n)),n}return s(WorkshopSlotModel,i),WorkshopSlotModel.prototype.onChanged=function(){this.updateState(),this.setAvailableAt(this._dynamicData.cooldown),this.dispatchEvent(new n.WorkshopSlotModelEvent(n.WorkshopSlotModelEvent.CHANGED))},WorkshopSlotModel.prototype.updateState=function(){this._workshopData.canGetFinalAward||this._workshopData.isAwardGet?this._state="finalAward":1===this._dynamicData.status?this._state="wait":2===this._dynamicData.status?this._state="accept":this._dynamicData.cooldown>r.Application.date.currentTime?this._state="timer":this._state="doRequest"},Object.defineProperty(WorkshopSlotModel.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopSlotModel.prototype,"elementName",{get:function(){if(!this.elementStaticData)return null;var t=this.elementStaticData.view.strings.string.getItem("name");return t?t.keyId:""},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopSlotModel.prototype,"elementIcon",{get:function(){return this.elementStaticData?this.elementStaticData.view.icons.icon.getItem("64").resourceId:null},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopSlotModel.prototype,"elementStaticData",{get:function(){return r.Application.static.data.resources.resource.getItem(this._dynamicData.elementId)},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopSlotModel.prototype,"dynamicData",{get:function(){return this._dynamicData},enumerable:!0,configurable:!0}),WorkshopSlotModel.prototype.setAvailableAt=function(t){t!==this._availableAt&&(this._availableAt=t,this.updateTimer())},WorkshopSlotModel.prototype.setTimeout=function(t){t!==this._timeout&&(this._timeout=t,this.dispatchEvent(new n.WorkshopSlotModelEvent(n.WorkshopSlotModelEvent.TIMEOUT_CHANGED)))},WorkshopSlotModel.prototype.updateTimer=function(){this._availableAt>r.Application.date.currentTime?this.startTimer():this.stopTimer()},WorkshopSlotModel.prototype.startTimer=function(){-1===this._intervalId&&(this._intervalId=r.Application.date.callProcessor.repeatCall(this.onInterval.bind(this)),this.onInterval())},WorkshopSlotModel.prototype.stopTimer=function(){-1!==this._intervalId&&(r.Application.date.callProcessor.deleteCall(this._intervalId),this._intervalId=-1)},WorkshopSlotModel.prototype.onInterval=function(){var t=this._availableAt-this._dateService.currentTime;if(t<=0)return this.stopTimer(),this.setTimeout(0),this.updateState(),void this.dispatchEvent(new n.WorkshopSlotModelEvent(n.WorkshopSlotModelEvent.CHANGED));this.setTimeout(t)},Object.defineProperty(WorkshopSlotModel.prototype,"timeout",{get:function(){return this._timeout},enumerable:!0,configurable:!0}),WorkshopSlotModel}(uipixi.BaseEventTarget);e.WorkshopSlotModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(247),n(0),n(248),n(162),n(37),n(42),n(14)],void 0===(r=function(t,e,r,o,a,n,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function WorkshopCollectionModel(t){var e=i.call(this)||this;e._staticData=t,e._elements=[],e._collected=!1,e.addElements(),e._elementPrice=e._staticData.buy.prices,e._collectPrice=e._staticData.collect.prices,e._sendAward=e._staticData.send.awards[0],e._toyModel=o.Application.model.toys.get(e._staticData.collect.awards.award[0].itemId),e._toyStaticData=e._toyModel.static,e._firstAwardStaticData=e._staticData.collect.awards.awards[0];var n=o.Application.award.calculate(e._staticData.collect.awards);return e._awardToyItem=n.getByType(u.AwardType.TOY),e._collected=e._toyModel.isExist,e._collected||o.Application.dynamic.user.toy.addEventListener(s.ItemCollectionEvent.ITEM_ADDED,e.onResourceAdded.bind(e)),e._buyRequirements=e._staticData.buy.requirements,e.checkCurrency(),e}return p(WorkshopCollectionModel,i),WorkshopCollectionModel.prototype.addElements=function(){for(var t=0,e=this._staticData.elements.element.items;t<e.length;t++){var n=e[t],i=new r.WorkshopCollectionElementModel(n);this._elements.push(i),i.addEventListener(a.WorkshopCollectionElementModelEvent.COUNT_CHANGED,this.onElementAdded.bind(this))}},WorkshopCollectionModel.prototype.checkCurrency=function(){var t=o.Application.static.data.screens.screen.getItem(o.Application.dynamic.user.screen).workshopResourceId;this._currencyModel=o.Application.model.resources.get(t),this._currencyModel.addEventListener(c.ResourceModelEvent.COUNT_CHANGED,this.onCurrencyChanged.bind(this))},WorkshopCollectionModel.prototype.onCurrencyChanged=function(){this.dispatchEvent(new n.WorkshopCollectionModelEvent(n.WorkshopCollectionModelEvent.CURRENCY_CHANGED))},WorkshopCollectionModel.prototype.onResourceAdded=function(t){t.item.id===this._toyModel.id&&(this._collected=!0,o.Application.dynamic.user.toy.removeEventListener(s.ItemCollectionEvent.ITEM_ADDED,this.onResourceAdded.bind(this)),this.dispatchEvent(new n.WorkshopCollectionModelEvent(n.WorkshopCollectionModelEvent.COLLECTED_FIRST_TIME)))},WorkshopCollectionModel.prototype.onElementAdded=function(){this.canCollect&&this.dispatchEvent(new n.WorkshopCollectionModelEvent(n.WorkshopCollectionModelEvent.CAN_COLLECT))},Object.defineProperty(WorkshopCollectionModel.prototype,"canCollect",{get:function(){if(!this.available)return!1;for(var t=0,e=this._elements;t<e.length;t++){if(0===e[t].count)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"canBuy",{get:function(){return!(this.canCollect||!this.available)&&o.Application.price.canSpend(this.elementPrice)},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"collected",{get:function(){return this._collected},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"wallpostId",{get:function(){return this._staticData.wallpostId},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"available",{get:function(){return!this._buyRequirements||o.Application.requirements.check(this._buyRequirements)},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"elementPrice",{get:function(){return this._elementPrice},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"sendAward",{get:function(){return this._sendAward},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"collectPrice",{get:function(){return this._collectPrice},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"toyStaticData",{get:function(){return this._toyStaticData},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"firstAward",{get:function(){return this._firstAwardStaticData},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"id",{get:function(){return this._staticData.id},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"toyModel",{get:function(){return this._toyModel},enumerable:!0,configurable:!0}),Object.defineProperty(WorkshopCollectionModel.prototype,"awardToyItem",{get:function(){return this._awardToyItem},enumerable:!0,configurable:!0}),WorkshopCollectionModel.prototype.destroy=function(){for(var t=0,e=this._elements;t<e.length;t++){e[t].removeEventListener(a.WorkshopCollectionElementModelEvent.COUNT_CHANGED,this.onElementAdded.bind(this))}this._currencyModel.removeEventListener(c.ResourceModelEvent.COUNT_CHANGED,this.onCurrencyChanged.bind(this));var n=o.Application.dynamic.user;n.toy.hasListener(s.ItemCollectionEvent.ITEM_ADDED,this.onResourceAdded.bind(this))&&n.toy.removeEventListener(s.ItemCollectionEvent.ITEM_ADDED,this.onResourceAdded.bind(this))},WorkshopCollectionModel}(uipixi.BaseEventTarget);e.WorkshopCollectionModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1488),n(2),n(8),n(32),n(14)],void 0===(r=function(t,e,n,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopBuyCommand(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopBuyCommand,t),WorkshopBuyCommand.prototype.execute=function(c){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return f(this,function(t){switch(t.label){case 0:return e=c.collection,n=u.Application.price.calculate(e.elementPrice),(i=u.Application.price.hold(n)).success?[4,u.Application.server.send(new p.WorkshopBuyAction(e.id))]:[2];case 1:return r=t.sent(),o=u.Application.award.convertObjectToCalculated(r.output.award),a=null,r.output.firstAward&&(a=u.Application.award.convertObjectToCalculated(r.output.firstAward)),[4,u.Application.view.show(l.GUINames.AWARDS_WINDOW,new d.ViewContext({baseAward:o,bonusAward:a,title:u.Application.localization.localize("WORKSHOP_AWARD_WINDOW"),description:u.Application.localization.localize("WORKSHOP_AWARD_WINDOW_ELEMENT")})).onClose];case 2:return t.sent(),a&&u.Application.award.accrueAwardImmediately(r.output.firstAward),u.Application.award.accrueAwardImmediately(r.output.award),u.Application.price.release(i),s=o.getByType(_.AwardType.RESOURCE).itemId,u.Application.metrics.goalStarkEvent(h.StarkEventsName.FACTORY_ELEMENT,{cid:u.Application.model.workshops.getCurrentWorkshop().getCollectionByElementId(s).id,eid:s,type:1}),[2]}})})},WorkshopBuyCommand}(n.CommandBase);e.WorkshopBuyCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function WorkshopBuyAction(t){var e=n.call(this)||this;return e.action="buy",e.controller="workshop",e.input=new i.ActionInput({collectionId:t}),e.output=new o,e}return a(WorkshopBuyAction,n),WorkshopBuyAction}(n.Action);e.WorkshopBuyAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){t=t.data,this.award=t.award,this.firstAward=t.firstAward},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1490),n(0),n(7),n(2),n(8),n(14),n(32)],void 0===(r=function(t,e,s,c,n,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopCollectCommand(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopCollectCommand,t),WorkshopCollectCommand.prototype.execute=function(a){return h(this,void 0,void 0,function(){var e,n,i,r,o;return _(this,function(t){switch(t.label){case 0:return e=a.collection,n=c.Application.price.calculate(e.collectPrice),(i=c.Application.price.hold(n)).success?[4,c.Application.server.send(new s.WorkshopCollectAction(e.id))]:[2];case 1:return r=t.sent(),o=c.Application.award.convertObjectToCalculated(r.output.award),c.Application.view.show(u.GUINames.AWARDS_WINDOW,new p.ViewContext({baseAward:o.getByType(l.AwardType.TOY),bonusAward:o.getByType(l.AwardType.RESOURCE),title:c.Application.localization.localize("WORKSHOP_AWARD_WINDOW"),description:c.Application.localization.localize("WORKSHOP_AWARD_WINDOW_TOY"),wallpostId:a.collection.wallpostId})),c.Application.award.accrueAwardImmediately(r.output.award),c.Application.price.release(i),c.Application.metrics.goalStarkEvent(d.StarkEventsName.FACTORY_COLLECTION,{cid:a.collection.id}),[2]}})})},WorkshopCollectCommand}(n.CommandBase);e.WorkshopCollectCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function WorkshopCollectAction(t){var e=n.call(this)||this;return e.action="collect",e.controller="workshop",e.input=new i.ActionInput({collectionId:t}),e.output=new o,e}return a(WorkshopCollectAction,n),WorkshopCollectAction}(n.Action);e.WorkshopCollectAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(48)],void 0===(r=function(t,e,n,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,i=function(a){function WorkshopRequestWindowMediator(){return null!==a&&a.apply(this,arguments)||this}return p(WorkshopRequestWindowMediator,a),WorkshopRequestWindowMediator.prototype.initialize=function(t){a.prototype.initialize.call(this,t);var e=s.Application.model.workshops.getCurrentWorkshop(),n=this.child("itemsList");n.removeAllItems();for(var i=0,r=e.currentCollection.elements;i<r.length;i++){var o=r[i];n.addItem({element:o,collectionId:e.currentCollection.id})}this.child("label").text=s.Application.localization.localize(e.currentCollection.canCollect?"WORKSHOP_REQUESTS_COLLECT_WINDOW_TITLE":"WORKSHOP_REQUESTS_WINDOW_TITLE"),this.registerListener(this.child("backButton"),u.POINTER_TAP,this.onBackButton.bind(this)),this.registerListener(this.child("itemsList"),u.POINTER_TAP,this.onBackButton.bind(this)),s.Application.model.guides.dispatchEvent(new c.GuidesModelEvent(c.GuidesModelEvent.WORKSHOP_REQUEST_WINDOW_SHOW))},WorkshopRequestWindowMediator.prototype.onBackButton=function(){this._container.parent.removeChild(this._container)},WorkshopRequestWindowMediator}(n.DisplayObjectContainerMediator);e.WorkshopRequestWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(15),n(0),n(4),n(247),n(469),n(48)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function WorkshopRequestListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return l(WorkshopRequestListItemMediator,e),WorkshopRequestListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.getChildren(),this.setParams(),this.registerListener(this._container,u.POINTER_TAP,this.onButton.bind(this))},WorkshopRequestListItemMediator.prototype.getChildren=function(){this._itemNameLabel=this.child("itemNameLabel"),this._itemCountLabel=this.child("itemCountLabel"),this._resourceImage=this.child("resourceImage"),this._awardContainer=this.child("magicShopPriceItemRenderer")},WorkshopRequestListItemMediator.prototype.setParams=function(){if(this._container.visible=0===this._showData.element.count,this._container.visible)if(this._container.buttonMode=!0,this._container.currentState=a.CollectionElementState.GOLD,this._itemNameLabel.text=r.Application.localization.localize(this._showData.element.name),this._resourceImage.resource=this._showData.element.icon,this._itemCountLabel.text=this._showData.element.count.toString(),this._showData.element.collected)this._awardContainer.visible=!1;else{this._awardContainer.visible=!0,this._awardRenderer&&this._awardRenderer.destroy();var t=r.Application.award.calculate(this._showData.element.firstBuyAward);this._awardRenderer=(new i.AwardRenderer).initialize(t.awards[0],this._awardContainer,{iconId:64,fit:!0})}},WorkshopRequestListItemMediator.prototype.onButton=function(){return d(this,void 0,void 0,function(){return h(this,function(t){return r.Application.model.guides.dispatchEvent(new c.GuidesModelEvent(c.GuidesModelEvent.WORKSHOP_ITEM_REQUESTED)),o.ElkaCore.instance.promiseManager.ask(new s.WorkshopSetSlotPromise(this._showData.collectionId,this._showData.element.id)),[2]})})},WorkshopRequestListItemMediator.prototype.destroy=function(){this._awardRenderer&&this._awardRenderer.destroy(),e.prototype.destroy.call(this)},WorkshopRequestListItemMediator}(n.DisplayObjectContainerMediator);e.WorkshopRequestListItemMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1494),n(0),n(7)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function WorkshopSetSlotCommand(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopSetSlotCommand,t),WorkshopSetSlotCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new n.WorkshopSetSlotAction(e.collectionId,e.elementId))];case 1:return t.sent(),i.Application.model.workshops.getCurrentWorkshop().slot.dynamicData.update({status:1,elementId:e.elementId,cooldown:0}),[2]}})})},WorkshopSetSlotCommand}(r.CommandBase);e.WorkshopSetSlotCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function WorkshopSetSlotAction(t,e){var n=i.call(this)||this;return n.action="setSlot",n.controller="workshop",n.input=new r.ActionInput({collectionId:t,elementId:e}),n.output=new o,n}return a(WorkshopSetSlotAction,i),WorkshopSetSlotAction}(n.Action);e.WorkshopSetSlotAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.success=Boolean(t.data.success)},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(4),n(40),n(470),n(16)],void 0===(r=function(t,e,n,a,i,s,r,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,u=function(e){function WorkshopGiftsListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return p(WorkshopGiftsListItemMediator,e),WorkshopGiftsListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.getChildren(),this.setParams(),this.registerListener(this._sendButton,o.POINTER_TAP,this.onButton.bind(this))},WorkshopGiftsListItemMediator.prototype.getChildren=function(){this._itemNameLabel=this.child("itemNameLabel"),this._iconImage=this.child("iconImage"),this._sendButton=this.child("sendButton"),this._userContainer=this.child("userContainer")},WorkshopGiftsListItemMediator.prototype.setParams=function(){var t=a.Application.static.data.resources.resource.getItem(this._showData.elementId),e=t.view.strings.string.getItem("name").keyId,n=t.view.icons.icon.getItem("64").resourceId;this._itemNameLabel.text=a.Application.localization.localize(e),this._iconImage.resource=n;var i=a.Application.profiles.getProfile(this._showData.sUserId,!0);this._profileRenderer=(new s.ProfileRenderer).initialize(i,this._userContainer);var r=a.Application.model.ratings.getBestPlace(this._showData.sUserId),o=a.Application.model.ratings.getFrameResource(64,r);this._loadableFrame=new c.LoadableImage(this.child("frame"),o)},WorkshopGiftsListItemMediator.prototype.onButton=function(){return l(this,void 0,void 0,function(){return d(this,function(t){return i.ElkaCore.instance.promiseManager.ask(new r.WorkshopSendPromise(this._showData)),[2]})})},WorkshopGiftsListItemMediator.prototype.destroy=function(){this._profileRenderer&&this._profileRenderer.destroy(),this._loadableFrame&&this._loadableFrame.destroy(),e.prototype.destroy.call(this)},WorkshopGiftsListItemMediator}(n.DisplayObjectContainerMediator);e.WorkshopGiftsListItemMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(106),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function WorkshopGiftsWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return a(WorkshopGiftsWindowMediator,e),WorkshopGiftsWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._workshop=r.Application.model.workshops.getCurrentWorkshop(),this._itemsList=this.child("giftsList"),this._label=this.child("noRequests"),this.setParams(),this.registerListener(this._workshop,i.WorkshopModelEvent.FRIEND_REQUESTS_CHANGED,this.setParams.bind(this))},WorkshopGiftsWindowMediator.prototype.setParams=function(){this._itemsList.removeAllItems();var t=this._workshop.friendRequests;t.length?(this._itemsList.addItems(t),this._label.visible=!1):this._label.visible=!0},WorkshopGiftsWindowMediator}(n.DisplayObjectContainerMediator);e.WorkshopGiftsWindowMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(61),n(56),n(1498),n(2),n(68),n(4),n(249)],void 0===(r=function(t,e,c,n,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopSendCommand(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopSendCommand,t),WorkshopSendCommand.prototype.execute=function(s){return y(this,void 0,void 0,function(){var e,n,i,r,o,a;return m(this,function(t){switch(t.label){case 0:return n=c.Application.price.convertObjectToCalculated({resource:(e={},e[s.requestData.elementId]=1,e)}),i=c.Application.award.calculate(c.Application.model.workshops.getCurrentWorkshop().getCollectionByElementId(s.requestData.elementId).sendAward),[4,c.Application.confirm.show(h.ConfirmType.Buy,{title:c.Application.localization.localize("WORKSHOP_GIFTS_CONFIRM_WINDOW_TITLE"),description:c.Application.localization.localize("WORKSHOP_GIFTS_CONFIRM_WINDOW_LABEL"),award:i})];case 1:if(!t.sent())return[3,6];if(!(r=c.Application.price.hold(n)).success)return[2];o=new l.WorkshopSendAction(s.requestData.userId),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,c.Application.server.send(o)];case 3:return t.sent(),[3,5];case 4:if((a=t.sent())instanceof u.ServerError)return c.Application.price.rollback(r),a.code!==p.ServerErrorCode.CODE_COLLECTIONS_SLOT_IS_EMPTY&&a.code!==p.ServerErrorCode.CODE_COLLECTIONS_ALLREADY_GEVED||(a.stopPropagation(!1),c.Application.view.show(d.GUINames.WORKSHOP_GIFTS_ERROR_WINDOW)),[2];throw a;case 5:c.Application.price.release(r),c.Application.award.accrueAwardImmediately(o.output.award),t.label=6;case 6:return _.ElkaCore.instance.promiseManager.ask(new f.WorkshopGetFriendSlotsPromise),[2]}})})},WorkshopSendCommand}(n.CommandBase);e.WorkshopSendCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function WorkshopSendAction(t){var e=n.call(this)||this;return e.action="send",e.controller="workshop",e.input=new i.ActionInput({friendId:t}),e.output=new o,e}return a(WorkshopSendAction,n),WorkshopSendAction}(n.Action);e.WorkshopSendAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){t=t.data,this.award=t.award,this.price=t.price,this.success=Boolean(t.success)},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(1500),n(7),n(61),n(56)],void 0===(r=function(t,e,i,r,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function WorkshopClearSlotCommand(){return null!==t&&t.apply(this,arguments)||this}return c(WorkshopClearSlotCommand,t),WorkshopClearSlotCommand.prototype.execute=function(t){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:this._workshopData=i.Application.model.workshops.getCurrentWorkshop(),e=new r.WorkshopClearSlotAction,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i.Application.server.send(e)];case 2:return t.sent(),[3,4];case 3:if((n=t.sent())instanceof o.ServerError)return n.code===a.ServerErrorCode.CODE_SLOT_IS_NOT_IN_WAIT_MODE&&(n.stopPropagation(!1),n.data&&this._workshopData.slot.dynamicData.update(n.data)),[2];throw n;case 4:return this._workshopData.slot.dynamicData.update({status:0,cooldown:0,elementId:void 0}),[2]}})})},WorkshopClearSlotCommand}(n.CommandBase);e.WorkshopClearSlotCommand=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function WorkshopClearSlotAction(){var t=e.call(this)||this;return t.action="clearSlot",t.controller="workshop",t.input=new n.ActionInput,t.output=new o,t}return a(WorkshopClearSlotAction,e),WorkshopClearSlotAction}(i.Action);e.WorkshopClearSlotAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.success=Boolean(t.data.success)},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(1502)],void 0===(r=function(t,e,o,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function WorkshopGetFriendSlotsCommand(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopGetFriendSlotsCommand,t),WorkshopGetFriendSlotsCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=this.getFriendsData(),[4,o.Application.server.send(new i.WorkshopGetFriendSlotsAction(e))];case 1:return n=t.sent(),o.Application.model.workshops.getCurrentWorkshop().friendRequests=n.output.list,[2]}})})},WorkshopGetFriendSlotsCommand.prototype.getFriendsData=function(){for(var t=[],e=0,n=0,i=o.Application.dynamic.friends.items;n<i.length;n++){var r=i[n];if(!r.isNPC&&(t.push(r.userId+":"+r.sUserId+":"+r.hash),500==++e))break}return t},WorkshopGetFriendSlotsCommand}(n.CommandBase);e.WorkshopGetFriendSlotsCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function WorkshopGetFriendSlotsAction(t){var e=n.call(this)||this;return e.action="getFriendSlots",e.controller="workshop",e.input=new i.ActionInput({friendsData:t}),e.output=new o,e}return a(WorkshopGetFriendSlotsAction,n),WorkshopGetFriendSlotsAction}(n.Action);e.WorkshopGetFriendSlotsAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this._list=[];var e=t.data.list;for(var n in e){var i=e[n];this._list.push(i)}},Object.defineProperty(Output.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(1504),n(7),n(2),n(8),n(32),n(14)],void 0===(r=function(t,e,o,a,n,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function WorkshopAcceptSlotCommand(){return null!==t&&t.apply(this,arguments)||this}return l(WorkshopAcceptSlotCommand,t),WorkshopAcceptSlotCommand.prototype.execute=function(t){return d(this,void 0,void 0,function(){var e,n,i,r;return h(this,function(t){switch(t.label){case 0:return[4,o.Application.server.send(new a.WorkshopAcceptSlotAction)];case 1:return e=t.sent(),n=o.Application.award.convertObjectToCalculated(e.output.award),i=null,e.output.firstAward&&(i=o.Application.award.convertObjectToCalculated(e.output.firstAward)),o.Application.view.show(s.GUINames.AWARDS_WINDOW,new c.ViewContext({baseAward:n,bonusAward:i,title:o.Application.localization.localize("WORKSHOP_AWARD_WINDOW"),description:o.Application.localization.localize("WORKSHOP_AWARD_WINDOW_ELEMENT")})),i&&o.Application.award.accrueAwardImmediately(e.output.firstAward),o.Application.award.accrueAwardImmediately(e.output.award),o.Application.model.workshops.getCurrentWorkshop().slot.dynamicData.update({status:0,cooldown:e.output.cooldown,elementId:void 0}),r=n.getByType(p.AwardType.RESOURCE).itemId,o.Application.metrics.goalStarkEvent(u.StarkEventsName.FACTORY_ELEMENT,{cid:o.Application.model.workshops.getCurrentWorkshop().getCollectionByElementId(r).id,eid:r,type:2}),[2]}})})},WorkshopAcceptSlotCommand}(n.CommandBase);e.WorkshopAcceptSlotCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function WorkshopAcceptSlotAction(){var t=e.call(this)||this;return t.action="acceptSlot",t.controller="workshop",t.input=new n.ActionInput,t.output=new o,t}return a(WorkshopAcceptSlotAction,e),WorkshopAcceptSlotAction}(i.Action);e.WorkshopAcceptSlotAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.firstAward=t.data.firstAward,this.success=t.data.success,this.cooldown=t.data.cooldown},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(1506)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function WorkshopGetSlotCommand(){return null!==t&&t.apply(this,arguments)||this}return a(WorkshopGetSlotCommand,t),WorkshopGetSlotCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,n.Application.server.send(new r.WorkshopGetSlotAction)];case 1:return e=t.sent(),n.Application.model.workshops.getCurrentWorkshop().slot.dynamicData.update(e.output.slot),[2]}})})},WorkshopGetSlotCommand}(i.CommandBase);e.WorkshopGetSlotCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function WorkshopGetSlotAction(){var t=e.call(this)||this;return t.action="getSlot",t.controller="workshop",t.input=new n.ActionInput,t.output=new o,t}return a(WorkshopGetSlotAction,e),WorkshopGetSlotAction}(i.Action);e.WorkshopGetSlotAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.slot=t.data},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(2),n(8),n(1508),n(106)],void 0===(r=function(t,e,i,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function WorkshopGetFinalAwardCommand(){return null!==t&&t.apply(this,arguments)||this}return u(WorkshopGetFinalAwardCommand,t),WorkshopGetFinalAwardCommand.prototype.execute=function(t){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new a.WorkshopGetFinalAwardAction)];case 1:return e=t.sent(),n=i.Application.award.convertObjectToCalculated(e.output.award),i.Application.view.show(r.GUINames.AWARDS_WINDOW,new o.ViewContext({baseAward:n,title:i.Application.localization.localize("WORKSHOP_AWARD_WINDOW"),description:i.Application.localization.localize("WORKSHOP_FINAL_AWARD_WINDOW_LABEL")})),i.Application.award.accrueAwardImmediately(e.output.award),i.Application.model.workshops.getCurrentWorkshop().dispatchEvent(new s.WorkshopModelEvent(s.WorkshopModelEvent.COLLECT_FINAL_AWARD)),[2]}})})},WorkshopGetFinalAwardCommand}(n.CommandBase);e.WorkshopGetFinalAwardCommand=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function WorkshopGetFinalAwardAction(){var t=e.call(this)||this;return t.action="getFinalAward",t.controller="workshop",t.input=new n.ActionInput,t.output=new o,t}return a(WorkshopGetFinalAwardAction,e),WorkshopGetFinalAwardAction}(i.Action);e.WorkshopGetFinalAwardAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}();e.Output=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function WorkshopDataProvider(){}return WorkshopDataProvider.prototype.getValue=function(t,e){var n=t.split("."),i=n[0];n[1];switch(i){case WorkshopDataProvider.CAN_BUY_RESOURCE:return o.Application.model.workshops.getCurrentWorkshop().currentCollection.canBuy?1:0;case WorkshopDataProvider.SLOT_EMPTY:return"doRequest"===o.Application.model.workshops.getCurrentWorkshop().slot.state?1:0;case WorkshopDataProvider.UNLOCKED:var r=o.Application.static.data.client.minLevelParams.minLevelParam.getItem("workshop").requirements;return o.Application.requirements.check(r);default:throw new Error("WorkshopDataProvider: unsupported type "+i)}},WorkshopDataProvider.prototype.watch=function(t,e){},WorkshopDataProvider.prototype.unwatch=function(t,e){},WorkshopDataProvider.CAN_BUY_RESOURCE="canBuyResource",WorkshopDataProvider.SLOT_EMPTY="slotEmpty",WorkshopDataProvider.UNLOCKED="unlocked",WorkshopDataProvider}();e.WorkshopDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,U=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(1511),n(471),n(4),n(18),n(1512),n(1515),n(0),n(1516),n(74),n(2),n(1517),n(1518),n(1519),n(31),n(1520),n(1521),n(1522),n(1523),n(1524),n(1525),n(1526),n(1527),n(1528),n(1529),n(1530),n(1531),n(1532),n(22),n(445),n(1533),n(1534),n(1535),n(1536),n(1537),n(1538),n(1539)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var G=function(t){function PromoModule(){return null!==t&&t.apply(this,arguments)||this}return U(PromoModule,t),PromoModule.prototype.initialize=function(t){o.ElkaCore.instance.promiseManager.ask(new a.RegisterModuleLoaderPromise(this)),u.Application.operation.addAllowingRule(new y.OccurrenceBeginningLineRule("/boughtForCash")),this._readyService=new i.PromoReadyService,this._serverService=new s.PromoServerService,this._model=new c.PromosModel,u.Application.dataProvider.registerProvider("promo",new p.PromoDataProvider(this._model))},PromoModule.prototype.onPreloadModule=function(t){u.Application.model.promos=this._model;var e=u.Application.model.promoBundles=new E.PromoBundlesModel;this._model.addEventListener(l.PromoModelEvent.DEACTIVATED,this.onDeactivated.bind(this)),this._model.initialize(),e.initialize(),this._readyService.addEventListener(r.PromoReadyServiceEvent.READY_TO_START,this.onReadyToStart.bind(this)),this._readyService.start(),this.mapCommands(),this.mapMediators()},PromoModule.prototype.mapCommands=function(){C.CommandMap.map(T.ShowPromoOnStartPromise,j.ShowPromoOnStartCommand)},PromoModule.prototype.mapMediators=function(){this.mapSideBarMediators(),this.mapChestWindowMediators(),this.mapBundlesMediators(),this.mapSoloMediators()},PromoModule.prototype.mapSideBarMediators=function(){u.Application.view.mapMediator(d.GUINames.HUD+".rightSideBar.sideBarContainer",w.PromoIconsMediator),u.Application.view.mapMediator(d.GUINames.HUD+".rightSideBar.sideBarContainer.promoIcon",A.PromoIconMediator,null,[M.IsSinglePromoGuard]),u.Application.view.mapMediator(d.GUINames.HUD+".rightSideBar.sideBarContainer.promoIcon",I.PromoBundleIconMediator,null,[D.IsBundleGuard])},PromoModule.prototype.mapChestWindowMediators=function(){var e=this;u.Application.view.mapMediator(this.getPromoContainerPath(d.GUINames.CHEST_AND_SALE_WINDOW),h.PromosContainerMediator),u.Application.view.mapMediator(d.GUINames.ONE_PROMO_WINDOW,B.OnePromoWindowMediator),[d.GUINames.RED_PROMO_CONTAINER,d.GUINames.GREEN_PROMO_CONTAINER,d.GUINames.SPECIAL_PROMO_CONTAINER,d.GUINames.CHEST_PROMO_CONTAINER,d.GUINames.BLUE_2_PROMO_CONTAINER,d.GUINames.RED_3_PROMO_CONTAINER].forEach(function(t){return e.mapDefaultPromoContainerMediators(t)}),[d.GUINames.TOY_GREEN_PROMO_CONTAINER].forEach(function(t){return e.mapToyPromoContainerMediators(t)}),[d.GUINames.CHEST_PROMO_CONTAINER].forEach(function(t){return e.mapChestPromoContainerMediators(t)})},PromoModule.prototype.getPromoContainerPath=function(t){return t+".contentContainer.promosContainer"},PromoModule.prototype.mapDefaultPromoContainerMediators=function(t){this.mapPromoContainerMediator(""+t,_.DefaultPromoCommonMediator),this.mapPromoContainerMediator(""+t,b.DefaultPromoAwardsMediator),this.mapPromoContainerMediator(""+t,g.DefaultPromoContainerIconMediator),this.mapPromoContainerMediator(t+".awardsList.*",f.DefaultPromoAwardListItemMediator,{iconId:48})},PromoModule.prototype.mapToyPromoContainerMediators=function(t){this.mapPromoContainerMediator(""+t,_.DefaultPromoCommonMediator),this.mapPromoContainerMediator(""+t,m.ToyPromoContainerMediator),this.mapPromoContainerMediator(t+".awardsList.*",v.ToyPromoAwardListItemMediator)},PromoModule.prototype.mapChestPromoContainerMediators=function(t){this.mapPromoContainerMediator(""+t,x.ChestPromoContainerSpineMediator)},PromoModule.prototype.mapPromoContainerMediator=function(t,e,n,i){void 0===i&&(i=[]),u.Application.view.mapMediator(this.getPromoContainerPath(d.GUINames.CHEST_AND_SALE_WINDOW)+"."+t,e,n,i),u.Application.view.mapMediator(this.getPromoContainerPath(d.GUINames.ONE_PROMO_WINDOW)+"."+t,e,n,i)},PromoModule.prototype.mapBundlesMediators=function(){var e=this;[d.GUINames.START_BUNDLE_WINDOW,d.GUINames.PROMO_REGULAR_SALE_3_WINDOW,d.GUINames.PROMO_SPECIAL_OK_SALE_3_WINDOW,d.GUINames.PROMO_SPECIAL_VK_SALE_3_WINDOW,d.GUINames.PROMO_SALE_DAY_SPECIAL_OK_SALE_3_WINDOW,d.GUINames.PROMO_SALE_DAY_SPECIAL_VK_SALE_3_WINDOW,d.GUINames.PROMO_BLACK_FRIDAY_OK_WINDOW,d.GUINames.PROMO_BLACK_FRIDAY_VK_WINDOW,d.GUINames.PROMO_NEW_YEAR_SALE_OK_WINDOW,d.GUINames.PROMO_NEW_YEAR_SALE_VK_WINDOW].forEach(function(t){return e.mapDefaultBundleMediators(t)}),[d.GUINames.PROMO_BLACK_FRIDAY_VK_WINDOW,d.GUINames.PROMO_BLACK_FRIDAY_OK_WINDOW].forEach(function(t){return e.mapBlackFridayMediators(t)})},PromoModule.prototype.mapDefaultBundleMediators=function(t){u.Application.view.mapMediator(""+t,O.PromoBundleWindowMediator),u.Application.view.mapMediator(""+t,L.DefaultPromoCustomTitlesMediator),u.Application.view.mapMediator(""+t,R.LoadableImageMediator,{imageName:"headerImage",showLoading:!0}),u.Application.view.mapMediator(t+".offersList.*",S.PromoBundleItemMediator),u.Application.view.mapMediator(t+".offersList.*.contentContainer.awardsList.*",P.PromoBundleAwardMediator)},PromoModule.prototype.mapBlackFridayMediators=function(t){u.Application.view.mapMediator(""+t,R.LoadableImageMediator,{imageName:"bg",showLoading:!0})},PromoModule.prototype.mapSoloMediators=function(){var e=this;[d.GUINames.PROMO_GAME_SALE_OK_WINDOW,d.GUINames.PROMO_GAME_SALE_VK_WINDOW,d.GUINames.PROMO_SALE_DAY_GAME_SALE_OK_WINDOW,d.GUINames.PROMO_SALE_DAY_GAME_SALE_VK_WINDOW].forEach(function(t){return e.mapDefaultSoloPromoMediators(t)})},PromoModule.prototype.mapDefaultSoloPromoMediators=function(t){u.Application.view.mapMediator(""+t,_.DefaultPromoCommonMediator),u.Application.view.mapMediator(""+t,b.DefaultPromoAwardsMediator),u.Application.view.mapMediator(""+t,L.DefaultPromoCustomTitlesMediator),u.Application.view.mapMediator(""+t,k.PromoSoloWindowDeactivationMediator),u.Application.view.mapMediator(t+".awardsList.*",f.DefaultPromoAwardListItemMediator,{iconId:64}),u.Application.view.mapMediator(t+".awardsList.*",N.PromoSoloAwardListItemBigIconMediator),u.Application.view.mapMediator(""+t,R.LoadableImageMediator,{imageName:"bg",showLoading:!0}),u.Application.view.mapMediator(""+t,R.LoadableImageMediator,{imageName:"headerImage",showLoading:!0})},PromoModule.prototype.onReadyToStart=function(t){this._serverService.start(t.promo)},PromoModule.prototype.onDeactivated=function(t){this._serverService.end(t.model.dynamicData)},PromoModule}(n.Module);e.PromoModule=G}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(250),n(471)],void 0===(r=function(t,e,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function PromoReadyService(){return t.call(this)||this}return c(PromoReadyService,t),PromoReadyService.prototype.start=function(){for(var t=0,e=o.Application.static.data.promos.promo.items;t<e.length;t++){var n=e[t];if(!n.directPurchase){var i=new a.Requirements(n.requirements,n.buyRequirements),r=o.Application.requirements.check(i);r&&this.dispatchEvent(new s.PromoReadyServiceEvent(s.PromoReadyServiceEvent.READY_TO_START,n)),o.Application.requirements.wait(i,this.onStartRequirementsWaited.bind(this,n,i,r))}}},PromoReadyService.prototype.onStartRequirementsWaited=function(t,e,n){o.Application.requirements.unwait(e,this.onStartRequirementsWaited.bind(this));var i=!n;i&&this.dispatchEvent(new s.PromoReadyServiceEvent(s.PromoReadyServiceEvent.READY_TO_START,t)),o.Application.requirements.wait(e,this.onStartRequirementsWaited.bind(this,t,e,i))},PromoReadyService}(uipixi.BaseEventTarget);e.PromoReadyService=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},v=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(250),n(61),n(56),n(35),n(36),n(1513),n(1514)],void 0===(r=function(t,e,h,_,f,y,i,r,m,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function PromoServerService(){this._debugId=0,this._current=Promise.resolve(),this._queue=[],this._failedPromoIds=[]}return PromoServerService.prototype.start=function(t){var e=this,n=this._debugId++;if(h.Application.debug.addLog("promo","на запуск",n,t.id),-1!==this._failedPromoIds.indexOf(t.id))return h.Application.debug.addWarning("promo","промо в игнор-листе",n,t.id),void(this._secondFail||(this._secondFail=!0,h.Application.debug.sendLog("Failed promo second start","",i.LogFlag.CLIENT,r.LogLevel.Error)));this._queue.push({action:"start",promo:t,debugId:n}),this._current=this._current.then(function(){return e.checkQueue()})},PromoServerService.prototype.end=function(t){var e=this,n=this._debugId++;h.Application.debug.addLog("promo","на выключение",n,t.id),this._queue.push({action:"end",promo:t,debugId:n}),t.expireTime=h.Application.date.currentTime,this._current=this._current.then(function(){return e.checkQueue()})},PromoServerService.prototype.startInternal=function(l,d){return a(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c,u,p;return v(this,function(t){switch(t.label){case 0:h.Application.debug.addLog("promo","готово к запуску",d,l.id),n=!0,t.label=1;case 1:if(!h.Application.requirements.check(new _.Requirements(l.requirements,l.buyRequirements)))return[3,6];for(n=!1,i=void 0,r=0,o=l.offers.items;r<o.length;r++)if(a=o[r],h.Application.requirements.check(new _.Requirements(a.requirements,a.buyRequirements))){i=a;break}if(!i)return h.Application.debug.addError("promo","нет ни одного доступного оффера",d,l.id),[3,6];s=void 0,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,h.Application.server.send(new m.StartPromoAction((e={},e[l.id]=i.id,e)))];case 3:return s=t.sent(),[3,5];case 4:if((c=t.sent())instanceof f.ServerError)return c.code===y.ServerErrorCode.CODE_CANT_START_PROMO&&(h.Application.debug.addLog("promo","Ошибка при запуске промо",d,l.id,i.id),this._failedPromoIds.push(l.id),c.stopPropagation()),[2];throw c;case 5:for(u in s.output.promoList)p=s.output.promoList[u],h.Application.dynamic.promo.addPromo(u,p);return[3,1];case 6:return n&&h.Application.debug.addLog("promo","реквайменты на запуск больше не выполняются",d,l.id),h.Application.debug.addLog("promo","запуск завершен",d,l.id),[2]}})})},PromoServerService.prototype.endInternal=function(n,i){return a(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return h.Application.debug.addLog("promo","готово к завершению",i,n.id),[4,h.Application.server.send(new o.EndPromoAction(n.id))];case 1:return e=t.sent(),n.expireTime=e.output.expireTime,h.Application.debug.addLog("promo","завершено",i,n.id),[2]}})})},PromoServerService.prototype.checkQueue=function(){if(0!==this._queue.length){var t=this._queue.shift();return"start"===t.action?this.startInternal(t.promo,t.debugId):this.endInternal(t.promo,t.debugId)}},PromoServerService}();e.PromoServerService=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function StartPromoAction(t){var e=n.call(this)||this;return e.action="start",e.controller="promo",e.input=new i.ActionInput({promoIds:t}),e.output=new o,e}return a(StartPromoAction,n),StartPromoAction}(n.Action);e.StartPromoAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.promoList=t.data.promo},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function EndPromoAction(t){var e=n.call(this)||this;return e.action="end",e.controller="promo",e.output=new o,e.input=new i.ActionInput({promoIds:[t]}),e}return a(EndPromoAction,n),EndPromoAction}(n.Action);e.EndPromoAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.expireTime=t.data.expireTime},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(74),n(472),n(37),n(49),n(32)],void 0===(r=function(t,e,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function PromosModel(){var t=e.call(this)||this;return t._items=[],t}return p(PromosModel,e),PromosModel.prototype.initialize=function(){this._dynamicData=r.Application.dynamic.promo,this._staticData=r.Application.static.data.promos,this._dynamicData.addEventListener(s.ItemCollectionEvent.ITEM_ADDED,this.onItemAdded.bind(this)),r.Application.dynamic.payment.addEventListener(s.ItemCollectionEvent.ITEM_ADDED,this.onPaymentAdded.bind(this));for(var t=r.Application.date.currentTime,e=0,n=this._dynamicData.items;e<n.length;e++){var i=n[e];this.add(i,i.expireTime<=t)}},PromosModel.prototype.onItemAdded=function(t){this.add(t.item,!1),this.sentStarkEvent(t.item)},PromosModel.prototype.sentStarkEvent=function(t){var e=r.Application.price.convertObjectToCalculated(t.price),n=e.getPriceFirst(c.PriceType.REAL),i="real";n||(i=(n=e.getPriceFirst(c.PriceType.RESOURCE))?n.itemId:"unknown"),r.Application.metrics.goalStarkEvent(u.StarkEventsName.PROMO_START,{pid:t.promoId,oid:t.offerId,ptype:i,price:n?n.value:0})},PromosModel.prototype.add=function(t,e){var n=this._staticData.promo.getItem(t.promoId),i=new a.PromoModel(t,n);this._items.push(i),e||(this.dispatchEvent(new o.PromoModelEvent(o.PromoModelEvent.ACTIVATED,i)),i.addEventListener(o.PromoModelEvent.DEACTIVATED,this.onItemDeactivated.bind(this))),i.initialize()},PromosModel.prototype.onItemDeactivated=function(t){this.dispatchEvent(t)},Object.defineProperty(PromosModel.prototype,"active",{get:function(){return this._items.filter(function(t){return t.active})},enumerable:!0,configurable:!0}),Object.defineProperty(PromosModel.prototype,"all",{get:function(){return this._items},enumerable:!0,configurable:!0}),PromosModel.prototype.getById=function(e){return this._items.filter(function(t){return t.id===e})[0]},PromosModel.prototype.onPaymentAdded=function(t){var e=t.item,n=r.Application.static.data.promos.promo.getItem(e.item_id);r.Application.metrics.goalStarkEvent(u.StarkEventsName.INAPP,{type:n.directPurchase?"cash":"promo",oid:e.item_extra_id,pid:e.item_id,price:e.price,status:e.award_status})},PromosModel}(uipixi.BaseEventTarget);e.PromosModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(13),n(74)],void 0===(r=function(t,e,s,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function PromoDataProvider(t){this._model=t}return PromoDataProvider.prototype.getValue=function(t,r){var e,n=t.split("."),i=n[0],o=n[1];switch(i){case PromoDataProvider.TYPE_STARTED:e=s.Application.dynamic.promo.items.slice();break;case PromoDataProvider.TYPE_ACTIVE:e=this._model.active.map(function(t){return t.dynamicData});break;default:throw new Error("PromoDataProvider: unsupported type "+i)}switch(e.sort(function(t,e){return parseInt(e.id)-parseInt(t.id)}),o){case PromoDataProvider.EXTRATYPE_BOUGHT:return e=this.applyFilters(e,r),this.getBoughtCount(e);case PromoDataProvider.EXTRATYPE_BOUGHT_PERCENT:e=this.applyFilters(e,r);var a=this.getBoughtCount(e);return 0===e.length?0:100*a/e.length;case void 0:break;default:throw new Error("PromoDataProvider: unsupported extraType "+o)}return e=e.filter(function(t){for(var e=0,n=r;e<n.length;e++){var i=n[e];switch(i.type){case"id":if(-1===i.values.indexOf(t.promoId.toString()))return!1;break;case"offerId":if(-1===i.values.indexOf(t.offerId.toString()))return!1;break;default:throw new Error("PromoDataProvider: unsupported filter "+i.type)}}return!0})},PromoDataProvider.prototype.watch=function(t,e){var n=t.split("."),i=n[0],r=n[1];switch(i){case PromoDataProvider.TYPE_STARTED:s.Application.dynamic.promo.addEventListener(o.BaseDataEvent.CHANGED,e),r===PromoDataProvider.EXTRATYPE_BOUGHT_PERCENT&&s.Application.dynamic.payment.addEventListener(o.BaseDataEvent.CHANGED,e);break;case PromoDataProvider.TYPE_ACTIVE:this._model.addEventListener(a.PromoModelEvent.ACTIVATED,e),this._model.addEventListener(a.PromoModelEvent.DEACTIVATED,e)}},PromoDataProvider.prototype.unwatch=function(t,e){var n=t.split("."),i=n[0],r=n[1];switch(i){case PromoDataProvider.TYPE_STARTED:s.Application.dynamic.promo.removeEventListener(o.BaseDataEvent.CHANGED,e),r===PromoDataProvider.EXTRATYPE_BOUGHT_PERCENT&&s.Application.dynamic.payment.removeEventListener(o.BaseDataEvent.CHANGED,e);break;case PromoDataProvider.TYPE_ACTIVE:this._model.removeEventListener(a.PromoModelEvent.ACTIVATED,e),this._model.removeEventListener(a.PromoModelEvent.DEACTIVATED,e)}},PromoDataProvider.prototype.applyFilters=function(t,e){for(var n=void 0,i=0,r=e;i<r.length;i++){var o=r[i];if("itemCount"===o.type){n=parseInt(o.values[0]);break}}if(void 0===n)throw new Error("PromoDataProvider: invalid itemCount filter");return t.slice(0,n)},PromoDataProvider.prototype.getBoughtCount=function(t){for(var e=0,n=0,i=t;n<i.length;n++)for(var r=i[n],o=0,a=s.Application.dynamic.payment.items;o<a.length;o++){a[o].promo_start_id===parseInt(r.id)&&e++}return e},PromoDataProvider.TYPE_STARTED="started",PromoDataProvider.TYPE_ACTIVE="active",PromoDataProvider.EXTRATYPE_BOUGHT_PERCENT="boughtPercent",PromoDataProvider.EXTRATYPE_BOUGHT="bought",PromoDataProvider}();e.PromoDataProvider=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(8),n(74)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(n){function PromosContainerMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._items=new core.Map,t}return s(PromosContainerMediator,n),PromosContainerMediator.prototype.initialize=function(t){var e=this;n.prototype.initialize.call(this,t),this._model=i.Application.model.promos,this._model.active.filter(function(t){return!t.hasSelfWindow}).forEach(function(t){return e.addChildItem(t)}),this.registerListener(this._model,o.PromoModelEvent.ACTIVATED,this.onActivated.bind(this)),this.registerListener(this._model,o.PromoModelEvent.DEACTIVATED,this.onDeactivated.bind(this))},PromosContainerMediator.prototype.addChildItem=function(t){var e=i.Application.view.addChild(this._container,t.background,new r.ViewContext(t));this._items.set(t,e.displayObject)},PromosContainerMediator.prototype.onActivated=function(t){t.model.hasSelfWindow||this.addChildItem(t.model)},PromosContainerMediator.prototype.onDeactivated=function(t){var e=this._items.get(t.model);e&&(this._items.delete(t.model),this._container.removeChild(e))},PromosContainerMediator}(n.DisplayObjectContainerMediator);e.PromosContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(15),n(29),n(45),n(75)],void 0===(r=function(t,e,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,i=function(i){function DefaultPromoCommonMediator(){var t=null!==i&&i.apply(this,arguments)||this;return t._priceRenderer=new o.AwardRenderer,t}return p(DefaultPromoCommonMediator,i),DefaultPromoCommonMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._promo=this._showData;var e=this.child("titleLabel");e&&(e.text=r.Application.localization.localize(this._promo.title)),this._priceRenderer.initialize(this._promo.price,this.child("priceContainer"),{iconId:64,fit:!0}),this._timerLabel=this.child("timerLabel"),this.updateTime(),this._timer=r.Application.date.callProcessor.repeatCall(this.updateTime.bind(this));var n=this.child("buyButton");this.registerListener(n,u.POINTER_TAP,this.onBuyTap.bind(this)),this._showAnimation=r.Application.animation.animate(this._container,"showShopOrPromoItem",{delay:Math.floor(2.3*this._container.parent.getChildIndex(this._container)*c.AnimationService.FPS)})},DefaultPromoCommonMediator.prototype.onBuyTap=function(){r.Application.payment.buy(this._promo)},DefaultPromoCommonMediator.prototype.updateTime=function(){var t=this._promo.expireTime-r.Application.date.currentTime;this._timerLabel.text=a.DateUtils.timeToString(t),this._timerLabel.fill=t>s.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000"},DefaultPromoCommonMediator.prototype.destroy=function(){r.Application.date.callProcessor.deleteCall(this._timer),this._showAnimation.stop(),this._priceRenderer.destroy(),i.prototype.destroy.call(this)},DefaultPromoCommonMediator}(n.DisplayObjectContainerMediator);e.DefaultPromoCommonMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(15),n(1)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function DefaultPromoAwardListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(DefaultPromoAwardListItemMediator,e),DefaultPromoAwardListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new n.AwardRenderer).initialize(this._showData,this._container,{iconId:this._mapData.iconId})},DefaultPromoAwardListItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},DefaultPromoAwardListItemMediator}(i.DisplayObjectContainerMediator);e.DefaultPromoAwardListItemMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(14),n(104)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function ToyPromoContainerMediator(){return null!==r&&r.apply(this,arguments)||this}return c(ToyPromoContainerMediator,r),ToyPromoContainerMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t);var e=this._showData.getAward(),n=e.getByType(a.AwardType.TOY),i=e.awards.filter(function(t){return t.type!==a.AwardType.TOY});this._loadableSpine=new s.LoadableSpine(this.child("shineContainer"),"promoShine",!1),this._toyRenderer=(new o.AwardRenderer).initialize(n,this._container,{countLabel:!1,iconId:"",iconImage:"toyIcon",titleLabel:!1}),this.child("awardsList").addItems(i)},ToyPromoContainerMediator.prototype.destroy=function(){this._toyRenderer.destroy(),this._loadableSpine.destroy(),r.prototype.destroy.call(this)},ToyPromoContainerMediator}(n.DisplayObjectContainerMediator);e.ToyPromoContainerMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(15),n(1),n(21)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function ToyPromoAwardListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ToyPromoAwardListItemMediator,e),ToyPromoAwardListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new n.AwardRenderer).initialize(this._showData,this._container,{iconId:48,tooltip:r.TooltipAnchor.Top})},ToyPromoAwardListItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},ToyPromoAwardListItemMediator}(i.DisplayObjectContainerMediator);e.ToyPromoAwardListItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function DefaultPromoAwardsMediator(){return null!==n&&n.apply(this,arguments)||this}return a(DefaultPromoAwardsMediator,n),DefaultPromoAwardsMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this._showData;this.child("awardsList").addItems(e.getAward().awards)},DefaultPromoAwardsMediator}(n.DisplayObjectContainerMediator);e.DefaultPromoAwardsMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(16),n(104)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function DefaultPromoContainerIconMediator(){return null!==n&&n.apply(this,arguments)||this}return a(DefaultPromoContainerIconMediator,n),DefaultPromoContainerIconMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._loadableSpine=new r.LoadableSpine(this.child("shineContainer"),"promoShine",!1);var e=this.child("promoIconImage");e&&(this._loadableImage=new i.LoadableImage(e,this._showData.icon))},DefaultPromoContainerIconMediator.prototype.destroy=function(){this._loadableImage&&this._loadableImage.destroy(),this._loadableSpine.destroy(),n.prototype.destroy.call(this)},DefaultPromoContainerIconMediator}(n.DisplayObjectContainerMediator);e.DefaultPromoContainerIconMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(74),n(8),n(2),n(166)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(n){function PromoIconsMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._items=new core.Map,t}return u(PromoIconsMediator,n),PromoIconsMediator.prototype.initialize=function(t){var e=this;n.prototype.initialize.call(this,t),this._model=i.Application.model.promos,this._bundles=i.Application.model.promoBundles,this._model.active.filter(function(t){return t.isSolo}).forEach(function(t){return e.addChildItem(t)}),this._bundles.active.forEach(function(t){return e.addChildItem(t)}),this.registerListener(this._model,r.PromoModelEvent.ACTIVATED,this.onPromoActivated.bind(this)),this.registerListener(this._model,r.PromoModelEvent.DEACTIVATED,this.onDeactivated.bind(this)),this.registerListener(this._bundles,s.PromoBundleModelEvent.ACTIVATED,this.onBundleActivated.bind(this)),this.registerListener(this._bundles,s.PromoBundleModelEvent.DEACTIVATED,this.onDeactivated.bind(this))},PromoIconsMediator.prototype.addChildItem=function(t){var e=i.Application.view.addChild(this._container,a.GUINames.PROMO_ICON,new o.ViewContext(t));this._items.set(t,e.displayObject)},PromoIconsMediator.prototype.onPromoActivated=function(t){var e=t.model;e.isSolo&&this.addChildItem(e)},PromoIconsMediator.prototype.onDeactivated=function(t){var e=this._items.get(t.model);e&&(this._items.delete(t.model),this._container.removeChild(e))},PromoIconsMediator.prototype.onBundleActivated=function(t){this.addChildItem(t.model)},PromoIconsMediator}(n.DisplayObjectContainerMediator);e.PromoIconsMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(29),n(45),n(166)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function PromoBundleWindowMediator(){return null!==i&&i.apply(this,arguments)||this}return c(PromoBundleWindowMediator,i),PromoBundleWindowMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._bundle=this._showData;var e=this.child("titleLabel");e&&(e.text=r.Application.localization.localize(this._bundle.title));var n=this.child("offersList");this._bundle.offers.forEach(function(t,e){return n.addItem({model:t,index:e})}),this._timerLabel=this.child("timerLabel"),this.updateTime(),this._timer=r.Application.date.callProcessor.repeatCall(this.updateTime.bind(this)),this.registerListener(this._bundle,s.PromoBundleModelEvent.DEACTIVATED,this.onDeactivated.bind(this))},PromoBundleWindowMediator.prototype.updateTime=function(){var t=this._bundle.expireTime-r.Application.date.currentTime;this._timerLabel.text=o.DateUtils.timeToString(t),this._timerLabel.fill=t>a.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000"},PromoBundleWindowMediator.prototype.onDeactivated=function(){r.Application.view.hide(this.viewHandle)},PromoBundleWindowMediator.prototype.destroy=function(){r.Application.date.callProcessor.deleteCall(this._timer),i.prototype.destroy.call(this)},PromoBundleWindowMediator}(n.DisplayObjectContainerMediator);e.PromoBundleWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(15),n(74),n(16)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,i=function(i){function PromoBundleItemMediator(){var t=null!==i&&i.apply(this,arguments)||this;return t._priceRenderer=new o.AwardRenderer,t._loadableImages=[],t}return u(PromoBundleItemMediator,i),PromoBundleItemMediator.prototype.initialize=function(t){var n=this;i.prototype.initialize.call(this,t),this._promo=this._showData.model,this._priceRenderer.initialize(this._promo.price,this.child("priceContainer"),{iconId:64,fit:!0});var e=this.child("buyButton");this.registerListener(e,c.POINTER_TAP,this.onBuyTap.bind(this)),this.child("awardsList").addItems(this._promo.getAward().awards.map(function(t){return{calculatedAwardItem:t,index:n._showData.index}})),this._container.currentState=this._promo.active?"default":"bought",this.registerListener(this._promo,a.PromoModelEvent.DEACTIVATED,this.onDeactivated.bind(this)),this.setOfferContainerState("offerStatesContainer"),this.setOfferContainerState("backgroundOfferStatesContainer"),["offerIcon1","offerIcon2"].forEach(function(t){var e=n.child(t);e&&n._loadableImages.push(new s.LoadableImage(e,e.resource))})},PromoBundleItemMediator.prototype.setOfferContainerState=function(t){var e=this.child(t);e&&(e.currentState=(this._showData.index+1).toString())},PromoBundleItemMediator.prototype.onBuyTap=function(){r.Application.payment.buy(this._promo)},PromoBundleItemMediator.prototype.onDeactivated=function(){this._container.currentState="bought"},PromoBundleItemMediator.prototype.destroy=function(){this._priceRenderer.destroy(),this._loadableImages.forEach(function(t){return t.destroy()}),i.prototype.destroy.call(this)},PromoBundleItemMediator}(n.DisplayObjectContainerMediator);e.PromoBundleItemMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(15),n(1)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function PromoBundleAwardMediator(){return null!==e&&e.apply(this,arguments)||this}return a(PromoBundleAwardMediator,e),PromoBundleAwardMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new n.AwardRenderer).initialize(this._showData.calculatedAwardItem,this._container,{iconId:48}),this._container.states&&(this._container.currentState=(this._showData.index+1).toString())},PromoBundleAwardMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},PromoBundleAwardMediator}(i.DisplayObjectContainerMediator);e.PromoBundleAwardMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(473),n(0),n(166)],void 0===(r=function(t,e,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function PromoBundlesModel(){var t=e.call(this)||this;return t._items=[],t}return s(PromoBundlesModel,e),PromoBundlesModel.prototype.initialize=function(){for(var t=0,e=o.Application.static.data.promos.promo.items;t<e.length;t++){var n=e[t];if(n.view.bundle){var i=new r.PromoBundleModel(n);i.addEventListener(a.PromoBundleModelEvent.ACTIVATED,this.onBundleActivated.bind(this)),i.addEventListener(a.PromoBundleModelEvent.DEACTIVATED,this.onBundleDeactivated.bind(this)),this._items.push(i)}}},PromoBundlesModel.prototype.onBundleActivated=function(t){this.dispatchEvent(t)},PromoBundlesModel.prototype.onBundleDeactivated=function(t){this.dispatchEvent(t)},Object.defineProperty(PromoBundlesModel.prototype,"active",{get:function(){return this._items.filter(function(t){return t.active})},enumerable:!0,configurable:!0}),PromoBundlesModel}(uipixi.BaseEventTarget);e.PromoBundlesModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(29),n(45),n(16),n(8)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(e){function PromoIconMediator(){return null!==e&&e.apply(this,arguments)||this}return p(PromoIconMediator,e),PromoIconMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._promo=this._showData,this._timerLabel=this.child("iconLabel"),this.updateTime(),this._timer=i.Application.date.callProcessor.repeatCall(this.updateTime.bind(this)),this._loadableImage=new a.LoadableImage(this.child("iconImage"),this._promo.icon),this.registerListener(this._container,c.POINTER_TAP,this.onTap.bind(this))},PromoIconMediator.prototype.onTap=function(){i.Application.view.show(this._promo.window,new s.ViewContext(this._promo))},PromoIconMediator.prototype.updateTime=function(){var t=this._promo.expireTime-i.Application.date.currentTime;this._timerLabel.text=r.DateUtils.timeToString(t),this._timerLabel.fill=t>o.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000"},PromoIconMediator.prototype.destroy=function(){i.Application.date.callProcessor.deleteCall(this._timer),this._loadableImage.destroy(),e.prototype.destroy.call(this)},PromoIconMediator}(n.DisplayObjectContainerMediator);e.PromoIconMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(472)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function IsSinglePromoGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsSinglePromoGuard,t),IsSinglePromoGuard.prototype.approve=function(){return this.viewHandle.viewContext.showData instanceof i.PromoModel},IsSinglePromoGuard}(n.Guard);e.IsSinglePromoGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(52),n(473)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function IsBundleGuard(){return null!==t&&t.apply(this,arguments)||this}return a(IsBundleGuard,t),IsBundleGuard.prototype.approve=function(){return this.viewHandle.viewContext.showData instanceof i.PromoBundleModel},IsBundleGuard}(n.Guard);e.IsBundleGuard=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(29),n(45),n(16),n(8)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(e){function PromoBundleIconMediator(){return null!==e&&e.apply(this,arguments)||this}return p(PromoBundleIconMediator,e),PromoBundleIconMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._bundle=this._showData,this._timerLabel=this.child("iconLabel"),this.updateTime(),this._timer=i.Application.date.callProcessor.repeatCall(this.updateTime.bind(this)),this._loadableImage=new a.LoadableImage(this.child("iconImage"),this._bundle.icon),this.registerListener(this._container,c.POINTER_TAP,this.onTap.bind(this))},PromoBundleIconMediator.prototype.onTap=function(){i.Application.view.show(this._bundle.window,new s.ViewContext(this._bundle))},PromoBundleIconMediator.prototype.updateTime=function(){var t=this._bundle.expireTime-i.Application.date.currentTime;this._timerLabel.text=r.DateUtils.timeToString(t),this._timerLabel.fill=t>o.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000"},PromoBundleIconMediator.prototype.destroy=function(){i.Application.date.callProcessor.deleteCall(this._timer),this._loadableImage.destroy(),e.prototype.destroy.call(this)},PromoBundleIconMediator}(n.DisplayObjectContainerMediator);e.PromoBundleIconMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(8)],void 0===(r=function(t,e,n,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowPromoOnStartCommand(){return null!==t&&t.apply(this,arguments)||this}return c(ShowPromoOnStartCommand,t),ShowPromoOnStartCommand.prototype.execute=function(o){return u(this,void 0,void 0,function(){var e,n,i,r;return p(this,function(t){switch(t.label){case 0:return(e=a.Application.model.promoBundles.active[0])?[4,a.Application.view.show(e.window,new s.ViewContext(e)).onClose]:[3,2];case 1:return t.sent(),o.resolve({shown:!0}),[2];case 2:n=0,i=a.Application.model.promos.active,t.label=3;case 3:return n<i.length?(r=i[n]).isSolo?[4,a.Application.view.show(r.window,new s.ViewContext(r)).onClose]:[3,5]:[3,6];case 4:return t.sent(),o.resolve({shown:!0}),[2];case 5:return n++,[3,3];case 6:return o.resolve({shown:!1}),[2]}})})},ShowPromoOnStartCommand}(n.CommandBase);e.ShowPromoOnStartCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(104)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function ChestPromoContainerSpineMediator(){return null!==e&&e.apply(this,arguments)||this}return a(ChestPromoContainerSpineMediator,e),ChestPromoContainerSpineMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._loadableSpine=new i.LoadableSpine(this.child("spineContainer"),"gold_chest")},ChestPromoContainerSpineMediator.prototype.destroy=function(){this._loadableSpine.destroy(),e.prototype.destroy.call(this)},ChestPromoContainerSpineMediator}(n.DisplayObjectContainerMediator);e.ChestPromoContainerSpineMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(16)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function LoadableImageMediator(){return null!==n&&n.apply(this,arguments)||this}return a(LoadableImageMediator,n),LoadableImageMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this.child(this._mapData.imageName);e&&(this._loadableImage=new i.LoadableImage(e,e.resource,this._mapData.showLoading))},LoadableImageMediator.prototype.destroy=function(){this._loadableImage&&this._loadableImage.destroy(),n.prototype.destroy.call(this)},LoadableImageMediator}(n.DisplayObjectContainerMediator);e.LoadableImageMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(14),n(16)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function PromoSoloAwardListItemBigIconMediator(){return null!==n&&n.apply(this,arguments)||this}return a(PromoSoloAwardListItemBigIconMediator,n),PromoSoloAwardListItemBigIconMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._container.states&&(this._container.currentState=this._showData.type===i.AwardType.RESOURCE?this._showData.itemId:this._showData.type);var e=this.child("bigIcon");e&&(this._loadableImage=new r.LoadableImage(e,e.resource,!0))},PromoSoloAwardListItemBigIconMediator.prototype.destroy=function(){this._loadableImage&&this._loadableImage.destroy(),n.prototype.destroy.call(this)},PromoSoloAwardListItemBigIconMediator}(n.DisplayObjectContainerMediator);e.PromoSoloAwardListItemBigIconMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function DefaultPromoCustomTitlesMediator(){return null!==e&&e.apply(this,arguments)||this}return a(DefaultPromoCustomTitlesMediator,e),DefaultPromoCustomTitlesMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setCustomTitle(this._showData.customTitle1,"customTitle1"),this.setCustomTitle(this._showData.customTitle2,"customTitle2"),this.setCustomTitle(this._showData.customTitle3,"customTitle3")},DefaultPromoCustomTitlesMediator.prototype.setCustomTitle=function(t,e){var n=this.child(e);n&&(n.text=i.Application.localization.localize(t))},DefaultPromoCustomTitlesMediator}(n.DisplayObjectContainerMediator);e.DefaultPromoCustomTitlesMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(74),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function PromoSoloWindowDeactivationMediator(){return null!==e&&e.apply(this,arguments)||this}return a(PromoSoloWindowDeactivationMediator,e),PromoSoloWindowDeactivationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerListener(this._showData,i.PromoModelEvent.DEACTIVATED,this.onDeactivated.bind(this))},PromoSoloWindowDeactivationMediator.prototype.onDeactivated=function(){r.Application.view.hide(this.viewHandle)},PromoSoloWindowDeactivationMediator}(n.DisplayObjectContainerMediator);e.PromoSoloWindowDeactivationMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(8),n(74),n(37)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function OnePromoWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return c(OnePromoWindowMediator,e),OnePromoWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._promo=this._showData,i.Application.view.addChild(this.child("promosContainer"),this._promo.background,new r.ViewContext(this._promo)),this.registerListener(this._promo,o.PromoModelEvent.DEACTIVATED,this.onDeactivated.bind(this)),this.registerListener(i.Application.dynamic.payment,a.ItemCollectionEvent.ITEM_ADDED,this.onPaymentAdded.bind(this))},OnePromoWindowMediator.prototype.onDeactivated=function(){i.Application.view.hide(this.windowHandle)},OnePromoWindowMediator.prototype.onPaymentAdded=function(t){var e=t.item;this._promo.id===e.promo_start_id&&i.Application.view.hide(this.windowHandle)},OnePromoWindowMediator}(n.DisplayObjectContainerMediator);e.OnePromoWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,W=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),F=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},V=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(4),n(0),n(1541),n(442),n(22),n(1542),n(1543),n(1544),n(1545),n(1546),n(1547),n(1548),n(1549),n(1550),n(1551),n(1552),n(1553),n(1554),n(1555),n(1556),n(1557),n(1558),n(1559),n(1560),n(1561),n(1562),n(1563),n(1564),n(1565),n(1566),n(18),n(51),n(2),n(89),n(1567),n(1568),n(1569)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x,R,N,L,k,B,G){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var U=function(e){function StartQuestModule(){var t=null!==e&&e.apply(this,arguments)||this;return t._actionsMap=new core.Map,t}return W(StartQuestModule,e),StartQuestModule.prototype.initialize=function(t){return F(this,void 0,void 0,function(){return V(this,function(t){return i.ElkaCore.instance.promiseManager.ask(new x.RegisterModuleLoaderPromise(this)),[2]})})},StartQuestModule.prototype.onPreloadModule=function(t){return s.CommandMap.map(c.StartQuestJoinGroupCheckPromise,u.StartQuestJoinGroupCheckCommand),s.CommandMap.map(d.StartQuestJoinGroupActionPromise,l.StartQuestJoinGroupActionCommand),s.CommandMap.map(h.StartQuestShareCheckPromise,y.StartQuestShareCheckCommand),s.CommandMap.map(_.StartQuestShareActionPromise,f.StartQuestShareActionCommand),s.CommandMap.map(b.StartQuestBookmarkCheckPromise,v.StartQuestBookmarkCheckCommand),s.CommandMap.map(m.StartQuestBookmarkActionPromise,g.StartQuestBookmarkActionCommand),s.CommandMap.map(w.StartQuestSpamCheckPromise,P.StartQuestSpamCheckCommand),s.CommandMap.map(S.StartQuestSpamActionPromise,O.StartQuestSpamActionCommand),s.CommandMap.map(E.StartQuestSetStatusCheckPromise,M.StartQuestSetStatusCheckCommand),s.CommandMap.map(A.StartQuestSetStatusActionPromise,D.StartQuestSetStatusActionCommand),s.CommandMap.map(j.StartQuestActiveFriendsCheckPromise,T.StartQuestActiveFriendsCheckCommand),s.CommandMap.map(C.StartQuestActiveFriendsActionPromise,I.StartQuestActiveFriendsActionCommand),this.mapMediator(N.GUINames.START_QUEST_WINDOW,"",o.StartQuestWindowMediator),this.mapMediator(N.GUINames.START_QUEST_WINDOW,".taskList.*",p.StartQuestListElementMediator),this.mapMediator(N.GUINames.START_QUEST_WINDOW,".awardList.*",k.StartQuestWindowAwardItemMediator),r.Application.view.mapMediator(N.GUINames.HUD+".leftSideBar.sideBarContainer",G.StartQuestIconContainerMediator),r.Application.view.mapMediator(N.GUINames.HUD+".leftSideBar.sideBarContainer."+N.GUINames.START_QUEST_ICON,B.StartQuestIconMediator),this.mapAction("joinGroup",{checkPromise:c.StartQuestJoinGroupCheckPromise,actionPromise:d.StartQuestJoinGroupActionPromise}),this.mapAction("activeFriends",{checkPromise:j.StartQuestActiveFriendsCheckPromise,actionPromise:C.StartQuestActiveFriendsActionPromise}),this.mapAction("share",{checkPromise:h.StartQuestShareCheckPromise,actionPromise:_.StartQuestShareActionPromise}),this.mapAction("bookmark",{checkPromise:b.StartQuestBookmarkCheckPromise,actionPromise:m.StartQuestBookmarkActionPromise}),this.mapAction("spamPermission",{checkPromise:w.StartQuestSpamCheckPromise,actionPromise:S.StartQuestSpamActionPromise}),this.mapAction("setStatus",{checkPromise:E.StartQuestSetStatusCheckPromise,actionPromise:A.StartQuestSetStatusActionPromise}),i.ElkaCore.instance.promiseManager.ask(new R.RegisterSeasonLoaderPromise(this)),Promise.resolve()},StartQuestModule.prototype.onVisitSeason=function(t){return this._questLineStaticData&&r.Application.requirements.unwait(this._questLineStaticData.requirements,this.onRequirementsChanged.bind(this)),this.checkCurrentScreenStartQuest(t),Promise.resolve()},StartQuestModule.prototype.checkCurrentScreenStartQuest=function(t){var e=L.StartQuestConfig.getQuestLineByScreen();this._questLineStaticData=r.Application.static.data.quests.questLine.getItem(e),null!==this._questLineStaticData&&(this._questDynamicItem=r.Application.dynamic.user.quests.getItem(e.toString()),this._questDynamicItem||(r.Application.requirements.check(this._questLineStaticData.requirements)?this.startQuestLine():r.Application.requirements.wait(this._questLineStaticData.requirements,this.onRequirementsChanged.bind(this))))},StartQuestModule.prototype.onRequirementsChanged=function(){r.Application.requirements.check(this._questLineStaticData.requirements)&&(r.Application.requirements.unwait(this._questLineStaticData.requirements,this.onRequirementsChanged.bind(this)),this.startQuestLine())},StartQuestModule.prototype.startQuestLine=function(){i.ElkaCore.instance.promiseManager.ask(new a.QuestStartPromise(this._questLineStaticData.id))},StartQuestModule.prototype.mapMediator=function(t,e,n,i){r.Application.view.mapMediator(t+e,n,i||{actionsMap:this._actionsMap})},StartQuestModule.prototype.mapAction=function(t,e){this._actionsMap.set(t,e)},StartQuestModule}(n.Module);e.StartQuestModule=U}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,_=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),f=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},y=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(240),n(0),n(13),n(4),n(29),n(2),n(89),n(1),n(128),n(16)],void 0===(r=function(t,e,n,u,p,i,r,o,l,a,s,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=uipixi.GestureEvent,c=function(c){function StartQuestWindowMediator(){var t=null!==c&&c.apply(this,arguments)||this;return t._jobId=-1,t}return _(StartQuestWindowMediator,c),StartQuestWindowMediator.prototype.initialize=function(t){c.prototype.initialize.call(this,t);var e=l.StartQuestConfig.getQuestLineByScreen();this._questLine=u.Application.model.quests.getQuestLineById(e),this._questDynamicItem=u.Application.dynamic.user.quests.getItem(e.toString()),this.registerListener(this._questDynamicItem,p.BaseDataEvent.CHANGED,this.onTaskChanged.bind(this)),this._timerLabel=this.child("timerLabel"),this._jobId=u.Application.date.callProcessor.repeatCall(this.updateTimer.bind(this)),this.updateTimer();var n=this._questLine.staticData,i=n.quest.getItem(1).tasks,r=u.Application.award.calculate(n.quest.getItem(1).awards),o=i.task.items.length,a=this.child("taskList");o<4&&a.addItem(null),a.addItems(i.task.items),this.child("awardList").addItems(r.awards),this._getAwardButton=this._container.getChildByName("getAwardButton"),this.registerListener(this._getAwardButton,h.POINTER_TAP,this.onGetAward.bind(this));var s=this.child("fairy");this._loadableImage=new d.LoadableImage(s,s.resource),this.checkAllCompleted()},StartQuestWindowMediator.prototype.updateTimer=function(){var t=this._questDynamicItem.timeEnd-u.Application.date.currentTime;0<=t?this._timerLabel.text=r.DateUtils.timeToString(t):-1!==this._jobId&&(u.Application.date.callProcessor.deleteCall(this._jobId),this._jobId=-1,u.Application.view.hideByWindowName(o.GUINames.START_QUEST_WINDOW))},StartQuestWindowMediator.prototype.checkAllCompleted=function(){this._getAwardButton.enabled=!0;for(var t=0,e=this._questLine.tasks;t<e.length;t++){if(e[t].state!==s.TaskState.COMPLETED)return void(this._getAwardButton.enabled=!1)}this.registerListener(this._questDynamicItem,p.BaseDataEvent.CHANGED,this.onTaskChanged.bind(this))},StartQuestWindowMediator.prototype.onTaskChanged=function(t){this.checkAllCompleted()},StartQuestWindowMediator.prototype.onGetAward=function(t){return f(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.unregisterListener(this._questDynamicItem,p.BaseDataEvent.CHANGED,this.onTaskChanged.bind(this)),[4,i.ElkaCore.instance.promiseManager.ask(new n.QuestFinishPromise(this._questLine.id,this._questLine.currentTask.id))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(u.Application.view.hideByWindowName(o.GUINames.START_QUEST_WINDOW),[2])}})})},StartQuestWindowMediator.prototype.destroy=function(){-1!==this._jobId&&u.Application.date.callProcessor.deleteCall(this._jobId),this._loadableImage.destroy(),c.prototype.destroy.call(this)},StartQuestWindowMediator}(a.DisplayObjectContainerMediator);e.StartQuestWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestJoinGroupCheckPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestJoinGroupCheckPromise,t),StartQuestJoinGroupCheckPromise}(n.StartQuestBasePromise);e.StartQuestJoinGroupCheckPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(134),n(64)],void 0===(r=function(t,e,r,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestJoinGroupCheckCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestJoinGroupCheckCommand,t),StartQuestJoinGroupCheckCommand.prototype.execute=function(i){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=r.Application.static.data.social.groupId,[4,r.Application.social.platform.isGroupMember(r.Application.profiles.current.userId,e)];case 1:return(n=t.sent()).success&&n.status===o.SOCIAL_GROUP_STATUS.MEMBER?[4,this.setProgressComplete(i)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},StartQuestJoinGroupCheckCommand}(n.StartQuestBaseCheckCommand);e.StartQuestJoinGroupCheckCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(125),n(159),n(4),n(128),n(1),n(89)],void 0===(r=function(t,e,o,a,s,n,i,r,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(r){function StartQuestListElementMediator(){var t=null!==r&&r.apply(this,arguments)||this;return t._taskDone=!1,t}return l(StartQuestListElementMediator,r),StartQuestListElementMediator.prototype.initialize=function(t){if(r.prototype.initialize.call(this,t),this._questTaskStaticData=this._showData,this._questTaskStaticData){this._actionsMap=this._mapData.actionsMap,this._questLineData=o.Application.model.quests.getQuestLineById(c.StartQuestConfig.getQuestLineByScreen()),this._showButton=this.child("showButton"),this._task=this._questLineData.getTaskById(this._questTaskStaticData.id);var e=this._questTaskStaticData.body.split("|"),n=e[0],i=e[1];this.child("taskLabel").text=o.Application.localization.localize(n,parseInt(this._task.param)),this.child("buttonLabel").text=o.Application.localization.localize(i),this.registerListener(this._questLineData,a.QuestLineModelEvent.TASK_CHANGED,this.onTaskChanged.bind(this)),this.registerListener(this._task,s.QuestTaskModelEvent.STATE_CHANGED,this.updateState.bind(this)),this.registerListener(this._task,s.QuestTaskModelEvent.CURRENT_COUNT_CHANGED,this.updateState.bind(this)),this.onTaskChanged(),this._promises=this._actionsMap.get(this._questTaskStaticData.action),void 0!==this._promises&&(this.registerListener(this._showButton,u.POINTER_TAP,this.onTap.bind(this)),this._taskDone||this.doCheckPromise())}else this._container.currentState="complete"},StartQuestListElementMediator.prototype.onTap=function(t){n.ElkaCore.instance.promiseManager.ask(new this._promises.actionPromise(this._questLineData,this._task))},StartQuestListElementMediator.prototype.doCheckPromise=function(){return d(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,n.ElkaCore.instance.promiseManager.ask(new this._promises.checkPromise(this._questLineData,this._task))];case 1:return t.sent(),this._cancellationToken.requested||this.onTaskChanged(),[2]}})})},StartQuestListElementMediator.prototype.onTaskChanged=function(t){this.updateState()},StartQuestListElementMediator.prototype.updateState=function(t){switch(this._task.state){case i.TaskState.IN_PROGRESS:this._container.currentState="inProgress";break;case i.TaskState.COMPLETED:this._container.currentState="complete"}},StartQuestListElementMediator}(r.DisplayObjectContainerMediator);e.StartQuestListElementMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(64),n(33),n(2)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function StartQuestJoinGroupActionCommand(){return null!==t&&t.apply(this,arguments)||this}return s(StartQuestJoinGroupActionCommand,t),StartQuestJoinGroupActionCommand.prototype.execute=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return window.open(n.Application.static.data.social.groupURL,"_blank"),n.Application.social.platformType!==r.PlatformType.FB?[3,2]:[4,this.setProgressComplete(e)];case 1:return t.sent(),[2];case 2:return n.Application.view.hideByWindowName(o.GUINames.START_QUEST_WINDOW),[2]}})})},StartQuestJoinGroupActionCommand}(i.StartQuestBaseCheckCommand);e.StartQuestJoinGroupActionCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestJoinGroupActionPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestJoinGroupActionPromise,t),StartQuestJoinGroupActionPromise}(n.StartQuestBasePromise);e.StartQuestJoinGroupActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestShareCheckPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestShareCheckPromise,t),StartQuestShareCheckPromise}(n.StartQuestBasePromise);e.StartQuestShareCheckPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestShareActionPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestShareActionPromise,t),StartQuestShareActionPromise}(n.StartQuestBasePromise);e.StartQuestShareActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(64)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function StartQuestShareActionCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestShareActionCommand,t),StartQuestShareActionCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=parseInt(n.questTaskData.param),[4,i.Application.social.post(e)];case 1:return t.sent().success?[4,this.setProgressComplete(n)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},StartQuestShareActionCommand}(n.StartQuestBaseCheckCommand);e.StartQuestShareActionCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(64)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestShareCheckCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestShareCheckCommand,t),StartQuestShareCheckCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){return c(this,function(t){return[2]})})},StartQuestShareCheckCommand}(n.StartQuestBaseCheckCommand);e.StartQuestShareCheckCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestBookmarkActionPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestBookmarkActionPromise,t),StartQuestBookmarkActionPromise}(n.StartQuestBasePromise);e.StartQuestBookmarkActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(64),n(0),n(79)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function StartQuestBookmarkCheckCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestBookmarkCheckCommand,t),StartQuestBookmarkCheckCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.social.platform.hasPermission(i.Application.profiles.current.userId,r.PlatformPermission.QUICK_MENU)];case 1:return t.sent()?[4,this.setProgressComplete(e)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},StartQuestBookmarkCheckCommand}(n.StartQuestBaseCheckCommand);e.StartQuestBookmarkCheckCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestBookmarkCheckPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestBookmarkCheckPromise,t),StartQuestBookmarkCheckPromise}(n.StartQuestBasePromise);e.StartQuestBookmarkCheckPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(64)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function StartQuestBookmarkActionCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestBookmarkActionCommand,t),StartQuestBookmarkActionCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,n.Application.social.platform.addToQuickMenu()];case 1:return t.sent().success?[4,this.setProgressComplete(e)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},StartQuestBookmarkActionCommand}(i.StartQuestBaseCheckCommand);e.StartQuestBookmarkActionCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestSpamCheckPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestSpamCheckPromise,t),StartQuestSpamCheckPromise}(n.StartQuestBasePromise);e.StartQuestSpamCheckPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(64)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function StartQuestSpamActionCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestSpamActionCommand,t),StartQuestSpamActionCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=i.Application.static.data.social.groupId,[4,i.Application.social.platform.showAllowMessagesFromCommunityBox(e)];case 1:return t.sent().success?[4,this.setProgressComplete(n)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},StartQuestSpamActionCommand}(n.StartQuestBaseCheckCommand);e.StartQuestSpamActionCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestSpamActionPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestSpamActionPromise,t),StartQuestSpamActionPromise}(n.StartQuestBasePromise);e.StartQuestSpamActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(64)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestSpamCheckCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestSpamCheckCommand,t),StartQuestSpamCheckCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){return c(this,function(t){return[2]})})},StartQuestSpamCheckCommand}(n.StartQuestBaseCheckCommand);e.StartQuestSpamCheckCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestSetStatusCheckPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestSetStatusCheckPromise,t),StartQuestSetStatusCheckPromise}(n.StartQuestBasePromise);e.StartQuestSetStatusCheckPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestSetStatusActionPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestSetStatusActionPromise,t),StartQuestSetStatusActionPromise}(n.StartQuestBasePromise);e.StartQuestSetStatusActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(64),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function StartQuestSetStatusCheckCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestSetStatusCheckCommand,t),StartQuestSetStatusCheckCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return null===(e=i.Application.profiles.current.currentStatus)||-1===e.indexOf(i.Application.social.getAppUrl(!1))&&-1===e.indexOf(i.Application.localization.localize("OK_WALLPOST_BOTTOM_TEXT"))?[3,2]:[4,this.setProgressComplete(n)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},StartQuestSetStatusCheckCommand}(n.StartQuestBaseCheckCommand);e.StartQuestSetStatusCheckCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(64),n(79)],void 0===(r=function(t,e,o,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestSetStatusActionCommand(){return null!==t&&t.apply(this,arguments)||this}return s(StartQuestSetStatusActionCommand,t),StartQuestSetStatusActionCommand.prototype.execute=function(r){return c(this,void 0,void 0,function(){var e,n,i;return u(this,function(t){switch(t.label){case 0:return[4,o.Application.social.platform.hasPermission(o.Application.profiles.current.userId,a.PlatformPermission.SET_STATUS)];case 1:return e=t.sent(),n=!0,e?[3,3]:[4,o.Application.social.platform.requestPermissions([a.PlatformPermission.SET_STATUS])];case 2:t.sent().success||(n=!1),t.label=3;case 3:return n?(i=parseInt(r.questTaskData.param),[4,o.Application.social.post(i,{gameUrl:o.Application.social.getAppUrl()})]):[3,6];case 4:return t.sent().success?[4,this.setProgressComplete(r)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}})})},StartQuestSetStatusActionCommand}(n.StartQuestBaseCheckCommand);e.StartQuestSetStatusActionCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(64)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function StartQuestActiveFriendsActionCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestActiveFriendsActionCommand,t),StartQuestActiveFriendsActionCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(t){return e=n.Application.static.data.social.findFriendsUrl,window.open(e,"_blank"),[2]})})},StartQuestActiveFriendsActionCommand}(i.StartQuestBaseCheckCommand);e.StartQuestActiveFriendsActionCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestActiveFriendsActionPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestActiveFriendsActionPromise,t),StartQuestActiveFriendsActionPromise}(n.StartQuestBasePromise);e.StartQuestActiveFriendsActionPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(64)],void 0===(r=function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestActiveFriendsCheckCommand(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestActiveFriendsCheckCommand,t),StartQuestActiveFriendsCheckCommand.prototype.execute=function(i){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=parseInt(i.questTaskData.param),n=r.Application.dynamic.friends.items.length,e<=n?[4,this.setProgressComplete(i)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},StartQuestActiveFriendsCheckCommand}(n.StartQuestBaseCheckCommand);e.StartQuestActiveFriendsCheckCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(63)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function StartQuestActiveFriendsCheckPromise(){return null!==t&&t.apply(this,arguments)||this}return a(StartQuestActiveFriendsCheckPromise,t),StartQuestActiveFriendsCheckPromise}(n.StartQuestBasePromise);e.StartQuestActiveFriendsCheckPromise=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(15),n(1),n(21)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function StartQuestWindowAwardItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(StartQuestWindowAwardItemMediator,e),StartQuestWindowAwardItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new n.AwardRenderer).initialize(this._showData,this._container,{iconId:64,tooltip:r.TooltipAnchor.Top})},StartQuestWindowAwardItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},StartQuestWindowAwardItemMediator}(i.DisplayObjectContainerMediator);e.StartQuestWindowAwardItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(2),n(89),n(29),n(45),n(125)],void 0===(r=function(t,e,i,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(n){function StartQuestIconMediator(){return null!==n&&n.apply(this,arguments)||this}return l(StartQuestIconMediator,n),StartQuestIconMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._markers=this.child("markersContainer");var e=o.StartQuestConfig.getQuestLineByScreen();this._questLine=i.Application.model.quests.getQuestLineById(e),this._questDynamicItem=i.Application.dynamic.user.quests.getItem(e.toString()),0<this._questDynamicItem.timeEnd&&(this._timerLabel=this.child("iconLabel"),this.updateTime(),this._timer=i.Application.date.callProcessor.repeatCall(this.updateTime.bind(this))),this.registerListener(this._questLine,c.QuestLineModelEvent.CURRENT_TASKS_COMPLETED_CHANGED,this.onTaskCompletedChanged.bind(this)),this.registerListener(this._container,u.POINTER_TAP,this.onButton.bind(this)),this.registerListener(this._questLine,c.QuestLineModelEvent.TASK_CHANGED,this.onTaskChanged.bind(this)),this.updateMarkers()},StartQuestIconMediator.prototype.updateTime=function(){var t=this._questDynamicItem.timeEnd-i.Application.date.currentTime;0<t?(this._timerLabel.text=a.DateUtils.timeToString(t),this._timerLabel.fill=t>s.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000"):(i.Application.date.callProcessor.deleteCall(this._timer),this._timer=-1)},StartQuestIconMediator.prototype.onTaskChanged=function(t){this.updateMarkers()},StartQuestIconMediator.prototype.onTaskCompletedChanged=function(t){this.updateMarkers()},StartQuestIconMediator.prototype.updateMarkers=function(){this._markers.currentState=this._questLine.currentTasksCompleted?"done":"off"},StartQuestIconMediator.prototype.onButton=function(){i.Application.view.show(r.GUINames.START_QUEST_WINDOW)},StartQuestIconMediator.prototype.destroy=function(){i.Application.date.callProcessor.deleteCall(this._timer),n.prototype.destroy.call(this)},StartQuestIconMediator}(n.DisplayObjectContainerMediator);e.StartQuestIconMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(89),n(0),n(441),n(2),n(13),n(45)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.UIFactory,p=c.TIME.MS_IN_SECOND,l=function(e){function StartQuestIconContainerMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._timeoutId=-1,t}return d(StartQuestIconContainerMediator,e),StartQuestIconContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._questLineId=i.StartQuestConfig.getQuestLineByScreen(),this._questLine=r.Application.model.quests.getQuestLineById(this._questLineId),this._questLine?this._questLine.completed||this.addIcon():this.registerListener(r.Application.model.quests,o.QuestsModelEvent.QUEST_ADDED,this.onQuestAdded.bind(this))},StartQuestIconContainerMediator.prototype.onQuestAdded=function(t){this._questLine=r.Application.model.quests.getQuestLineById(this._questLineId),this._questLine&&(this.unregisterListener(r.Application.model.quests,o.QuestsModelEvent.QUEST_ADDED,this.onQuestAdded.bind(this)),this.addIcon())},StartQuestIconContainerMediator.prototype.addIcon=function(){var t=this._questLine.dynamicData.timeEnd-r.Application.date.currentTime;t<=0||(this._timeoutId=r.Application.date.callProcessor.delayCall(this.onTimeout.bind(this),t*p),this.registerListener(this._questLine.dynamicData,s.BaseDataEvent.CHANGED,this.onChanged.bind(this)),this._icon=u.instance.createUIElementByName(a.GUINames.START_QUEST_ICON),this._container.addChild(this._icon))},StartQuestIconContainerMediator.prototype.onTimeout=function(){this.removeIcon(),this.unregisterListener(this._questLine.dynamicData,s.BaseDataEvent.CHANGED,this.onChanged.bind(this)),this._timeoutId=-1},StartQuestIconContainerMediator.prototype.removeIcon=function(){this.unregisterListener(this._questLine.dynamicData,s.BaseDataEvent.CHANGED,this.onChanged.bind(this)),this._container.removeChild(this._icon)},StartQuestIconContainerMediator.prototype.onChanged=function(t){this._questLine.dynamicData.finished&&(this.removeIcon(),this.unregisterListener(this._questLine.dynamicData,s.BaseDataEvent.CHANGED,this.onChanged.bind(this)),-1!==this._timeoutId&&(r.Application.date.callProcessor.deleteCall(this._timeoutId),this._timeoutId=-1))},StartQuestIconContainerMediator}(n.DisplayObjectContainerMediator);e.StartQuestIconContainerMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,N=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),L=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},k=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(4),n(18),n(0),n(31),n(22),n(474),n(1571),n(2),n(1572),n(1573),n(1574),n(1575),n(476),n(1576),n(444),n(480),n(1577),n(1578),n(477),n(155),n(1579),n(481),n(1581),n(1582),n(478),n(1583),n(1584),n(1586),n(482),n(479),n(1588)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var R=function(t){function RouletteModule(){return null!==t&&t.apply(this,arguments)||this}return N(RouletteModule,t),RouletteModule.prototype.initialize=function(t){return L(this,void 0,void 0,function(){return k(this,function(t){return i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),this._awardSlotsModel=new I.RouletteAwardSlotsModel,[2]})})},RouletteModule.prototype.onPreloadModule=function(t){o.Application.model.roulettes=this._roulettesModel=new C.RoulettesModel(o.Application.dynamic.user.roulette.roulettes),this.mapMediators(),this.mapCommands(),o.Application.operation.addAllowingRule(new a.OccurrenceBeginningLineRule("/roulette"))},RouletteModule.prototype.onStartModule=function(t){this._roulettesModel.addEventListener(T.RoulettesModelEvent.AWARD_ACCRUED,this.tryShowRouletteWindow.bind(this))},RouletteModule.prototype.mapMediators=function(){o.Application.view.mapMediator(p.GUINames.ROULETTE_WINDOW,d.RouletteWindowMediator),o.Application.view.mapMediator(p.GUINames.ROULETTE_WINDOW+".rightPanel",l.RouletteWindowRightPanelMediator,this._awardSlotsModel),o.Application.view.mapMediator(p.GUINames.ROULETTE_WINDOW+".rouletteSpinAwardContainer",A.RouletteSpinAwardContainerMediator,this._awardSlotsModel),o.Application.view.mapMediator(p.GUINames.ROULETTE_WINDOW+".сontentWrapper.*.wheelContent.wheelContainer.sectorsContainer.*",h.RouletteWindowSectorMediator)},RouletteModule.prototype.mapCommands=function(){s.CommandMap.map(m.RouletteShowOnStartPromise,y.RouletteShowOnStartCommand),s.CommandMap.map(c.RouletteShowWindowPromise,u.RouletteShowWindowCommand),s.CommandMap.map(f.RouletteAnimationShowPromise,_.RouletteAnimationShowCommand),s.CommandMap.map(M.RouletteAnimationHidePromise,D.RouletteAnimationHideCommand),s.CommandMap.map(v.RouletteAnimationSpinPromise,b.RouletteAnimationSpinCommand),s.CommandMap.map(w.RouletteSpinPromise,g.RouletteSpinCommand),s.CommandMap.map(O.RouletteShowAwardWindowPromise,S.RouletteShowAwardWindowCommand),s.CommandMap.map(P.RouletteShowSpinAwardPromise,E.RouletteShowSpinAwardCommand),s.CommandMap.map(j.RouletteShowActiveRoulettesPromise,x.RouletteShowActiveRoulettesCommand)},RouletteModule.prototype.tryShowRouletteWindow=function(){return L(this,void 0,void 0,function(){return k(this,function(t){switch(t.label){case 0:return[4,i.ElkaCore.instance.promiseManager.ask(new j.RouletteShowActiveRoulettesPromise)];case 1:return t.sent(),[2]}})})},RouletteModule}(n.Module);e.RouletteModule=R}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(26),n(2),n(43),n(8)],void 0===(r=function(t,e,r,n,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteShowWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return u(RouletteShowWindowCommand,t),RouletteShowWindowCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return[4,r.Application.resources.getResources(["shine","rouletteAnim","roulette",s.SoundName.WHEEL_ROTATE,s.SoundName.FORTUNE_WHEEL_WIN_JINGLE],!0)];case 1:return t.sent(),e=new c.ViewContext(i.rouletteModel),n=r.Application.view.show(a.GUINames.ROULETTE_WINDOW,e,o.WindowLayer.WINDOWS).onClose,i.resolve({closePromise:n}),[2]}})})},RouletteShowWindowCommand}(n.CommandBase);e.RouletteShowWindowCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(14),n(1),n(475),n(72)],void 0===(r=function(t,e,r,o,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function RouletteWindowRightPanelMediator(){return null!==e&&e.apply(this,arguments)||this}return c(RouletteWindowRightPanelMediator,e),RouletteWindowRightPanelMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardSlotsModel=this._mapData,this._activeRoulette=this.windowHandle.viewContext.showData,this.initChildren(),this.initGotAwards(),this.registerListener(this._activeRoulette,i.RouletteModelEvent.SPIN,this.onSpin.bind(this)),this.registerListener(this._activeRoulette,i.RouletteModelEvent.SPINS_UPDATED,this.updateSpinCount.bind(this)),this.updateSpinCount()},RouletteWindowRightPanelMediator.prototype.initChildren=function(){this._awardSlotsModel.addSlot(this.child("awardContainer1")),this._awardSlotsModel.addSlot(this.child("awardContainer2")),this._awardSlotsModel.addSlot(this.child("awardContainer3")),this._awardSlotsModel.addSlot(this.child("awardContainer4")),this._awardSlotsModel.addSlot(this.child("awardContainer5")),this._awardSlotsModel.addSlot(this.child("awardContainer6")),this._awardSlotsModel.spinsCountContainer=this.child("spinCounterLabel"),this._spinCounterLabel=this.child("spinCounterLabel")},RouletteWindowRightPanelMediator.prototype.initGotAwards=function(){var t;this._activeRoulette.award&&(t=r.Application.award.convertObjectToCalculated(this._activeRoulette.award));for(var e=0,n=t.awards;e<n.length;e++){var i=n[e];i.type===o.AwardType.ROULETTE_SPINS&&this._activeRoulette.id===a.RouletteId.GOLD||this._awardSlotsModel.addAward(i)}},RouletteWindowRightPanelMediator.prototype.onSpin=function(){this._spinCounterLabel.text=this._activeRoulette.spinsLeft.toString(),this._animationProcess=r.Application.animation.create(RouletteWindowRightPanelMediator.SPIN_COUNTER_ANIMATION,{target:this._spinCounterLabel}),this._animationProcess.start()},RouletteWindowRightPanelMediator.prototype.updateSpinCount=function(){this._spinCounterLabel.text=(this._activeRoulette.spinsLeft+1).toString()},RouletteWindowRightPanelMediator.prototype.destroy=function(){this._animationProcess&&this._animationProcess.stop(),this._awardSlotsModel.clear(),e.prototype.destroy.call(this)},RouletteWindowRightPanelMediator.SPIN_COUNTER_ANIMATION="rouletteSpinCounter",RouletteWindowRightPanelMediator}(n.DisplayObjectContainerMediator);e.RouletteWindowRightPanelMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(72),n(1),n(4),n(476),n(477),n(478),n(6)],void 0===(r=function(t,e,i,r,n,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=uipixi.UIFactory,l=uipixi.GestureEvent,d=function(e){function RouletteWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return h(RouletteWindowMediator,e),RouletteWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._activeRoulette=this._showData,this.initChildren(),this._spinButton=this._rouletteContentWrapper.getChildByName("spinButton"),this.registerListener(this._spinButton,l.POINTER_TAP,this.onSpinButtonTap.bind(this)),this.prepareAnimationData(),o.ElkaCore.instance.promiseManager.ask(new a.RouletteAnimationShowPromise(this._activeRoulette,this._animationData))},RouletteWindowMediator.prototype.onSpinButtonTap=function(){return _(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return this._animationData.spinAnimation.stopAndReset(),this._animationData.spinAnimation.visible=!1,this._spinButton.enabled=!1,this._activeRoulette.spin(),[4,o.ElkaCore.instance.promiseManager.ask(new s.RouletteSpinPromise(this._activeRoulette,this._animationData))];case 1:return e=t.sent(),this._cancellationToken.requested?[2]:e?(n=new u.BasePromise,o.ElkaCore.instance.promiseManager.ask(new c.RouletteAnimationHidePromise(this._activeRoulette,this._animationData,n)),[4,n]):[3,3];case 2:return t.sent(),this._cancellationToken.requested?[2]:(i.Application.view.hide(this.viewHandle),[3,4]);case 3:this._spinButton.enabled=!0,t.label=4;case 4:return[2]}})})},RouletteWindowMediator.prototype.prepareAnimationData=function(){this._animationData={container:this._container,wheelContainer:this._rouletteContentWrapper,wheelContentContainer:this._wheelContentContainer,panelContainer:this.child("rightPanel"),spinAnimation:this.child("spinAnimation"),sectorsContainer:this.child("sectorsContainer")}},RouletteWindowMediator.prototype.initChildren=function(){var t=new core.Map([[r.RouletteId.COMMON,"rouletteRegularContentWrapper"],[r.RouletteId.GOLD,"rouletteGoldContentWrapper"]]),e=this.child("сontentWrapper"),n=t.get(this._activeRoulette.id);this._rouletteContentWrapper=p.instance.createUIElementByName(n),e.addChild(this._rouletteContentWrapper),this._wheelContentContainer=this._rouletteContentWrapper.getChildByName("wheelContainer")},RouletteWindowMediator}(n.DisplayObjectContainerMediator);e.RouletteWindowMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(14),n(15)],void 0===(r=function(t,e,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function RouletteWindowSectorMediator(){return null!==r&&r.apply(this,arguments)||this}return s(RouletteWindowSectorMediator,r),RouletteWindowSectorMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this._activeRoulette=this.windowHandle.viewContext.showData;var e=this._container.name.split("_")[1],n=this._activeRoulette.getSectorAward(e),i=n.type===o.AwardType.TOY;this._awardRenderer=new a.AwardRenderer,this._awardRenderer.initialize(n,this._container,{iconId:64,fit:!0,iconImage:"awardImage",countLabel:!i&&"valueLabel",titleLabel:!1,beautyLabel:"beautyLabel",beautyContainer:"beautyContainer"}),i&&(this.child("valueLabel").visible=!1)},RouletteWindowSectorMediator.prototype.destroy=function(){this._awardRenderer.destroy(),r.prototype.destroy.call(this)},RouletteWindowSectorMediator}(n.DisplayObjectContainerMediator);e.RouletteWindowSectorMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(34),n(72)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function RouletteAnimationShowCommand(){return null!==t&&t.apply(this,arguments)||this}return s(RouletteAnimationShowCommand,t),RouletteAnimationShowCommand.prototype.execute=function(n){return c(this,void 0,void 0,function(){var e;return u(this,function(t){return this._promise=n,this._spinAnimation=n.data.spinAnimation,e={wheel:n.data.wheelContainer,panel:n.data.panelContainer,pauseAfterShow:n.rouletteModel.id===o.RouletteId.GOLD?2500:100,onShowSpinAnimation:this.showSpinAnimation.bind(this)},this._animationProcess=i.Application.animation.create(RouletteAnimationShowCommand.ANIMATION_SHOW,e),this._animationProcess.addEventListener(r.ProcessEvent.COMPLETE,this.hideSpineAnimation.bind(this)),this._animationProcess.start(),[2]})})},RouletteAnimationShowCommand.prototype.showSpinAnimation=function(){this._promise.rouletteModel.id===o.RouletteId.GOLD&&(this._spinAnimation.visible=!0,this._spinAnimation.setAnimation("start",!1))},RouletteAnimationShowCommand.prototype.hideSpineAnimation=function(){this._spinAnimation.stopAndReset(),this._spinAnimation.visible=!1,this._animationProcess.removeEventListener(r.ProcessEvent.COMPLETE,this.hideSpineAnimation.bind(this)),this._promise.completePromise&&this._promise.completePromise.resolve(null)},RouletteAnimationShowCommand.ANIMATION_SHOW="rouletteShow",RouletteAnimationShowCommand}(n.CommandBase);e.RouletteAnimationShowCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(4),n(479)],void 0===(r=function(t,e,n,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteShowOnStartCommand(){return null!==t&&t.apply(this,arguments)||this}return s(RouletteShowOnStartCommand,t),RouletteShowOnStartCommand.prototype.execute=function(i){return c(this,void 0,void 0,function(){var e,n;return u(this,function(t){switch(t.label){case 0:return e=r.Application.model.roulettes,n=null!==e.activeRoulette,[4,o.ElkaCore.instance.promiseManager.ask(new a.RouletteShowActiveRoulettesPromise)];case 1:return t.sent(),i.resolve({shown:n}),[2]}})})},RouletteShowOnStartCommand}(n.CommandBase);e.RouletteShowOnStartCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(34),n(120),n(35),n(72),n(36)],void 0===(r=function(t,e,n,s,c,u,i,p,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function RouletteAnimationSpinCommand(){var t=null!==e&&e.apply(this,arguments)||this;return t.TIME_PER_CIRCLE=1.5,t.BONUS_ANGLE=1800,t.MAX_ROULETTE_ANIMATION_WAIT_TIME=12e3,t}return a(RouletteAnimationSpinCommand,e),RouletteAnimationSpinCommand.prototype.execute=function(a){return l(this,void 0,void 0,function(){var e,n,i,r,o;return d(this,function(t){for(this._promise=a,this._lastAngle=0,this.sectorAngles=[],e=0;e<360;e+=RouletteAnimationSpinCommand.SECTOR_ANGLE)this.sectorAngles.push([e,e+RouletteAnimationSpinCommand.SECTOR_ANGLE]);return this._spineAnimation=this._promise.data.spinAnimation,this._spineAnimation.visible=!1,n=this.sectorAngles[a.rouletteModel.lastSpinSectorNum-1],i=u.MathUtils.getRandom(n[0]+3,n[1]-3),r=(i+this.BONUS_ANGLE)*this.TIME_PER_CIRCLE/360*1e3,this._finalRouletteAngle=u.MathUtils.degreesToRadians(0-i+this.BONUS_ANGLE),s.Application.debug.addLog("roulette","duration:",r,"rotation:",this._finalRouletteAngle),o={wheelContainer:this._promise.data.wheelContentContainer,duration:r,lastAngle:u.MathUtils.degreesToRadians(this._lastAngle),rotation:this._finalRouletteAngle,sectorsContainer:this._promise.data.sectorsContainer,borderRotationAnimation:this.playBorderRotationAnimation.bind(this),winAnimation:this.showWinAnimation.bind(this),pauseAfterWin:this._promise.rouletteModel.id===p.RouletteId.GOLD?1e3:100},this._lastAngle=i,this._animationProcess=s.Application.animation.create(RouletteAnimationSpinCommand.ANIMATION_SPIN,o),this._animationProcess.addEventListener(c.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this._animationProcess.start(),this._animationTimeout=s.Application.date.callProcessor.delayCall(this.forceStopAnimation.bind(this),this.MAX_ROULETTE_ANIMATION_WAIT_TIME),[2]})})},RouletteAnimationSpinCommand.prototype.forceStopAnimation=function(){s.Application.debug.addLog("roulette","forceStopAnimation"),s.Application.debug.sendLog("Infinite roulette","",i.LogFlag.CLIENT,r.LogLevel.Debug),this.showWinAnimation(),this._animationProcess.stop(!0)},RouletteAnimationSpinCommand.prototype.playBorderRotationAnimation=function(){this._promise.rouletteModel.id===p.RouletteId.GOLD&&(this._spineAnimation.setAnimation(RouletteAnimationSpinCommand.ANIMATION_LAMPS_CYCLE,!0),this._spineAnimation.visible=!0)},RouletteAnimationSpinCommand.prototype.showWinAnimation=function(){this._animationTimeout&&(s.Application.date.callProcessor.deleteCall(this._animationTimeout),this._animationTimeout=-1),this._promise.rouletteModel.id===p.RouletteId.GOLD&&(this.hideSpineAnimation(),this._spineAnimation.setAnimation(RouletteAnimationSpinCommand.ANIMATION_PRESENT,!1),this._spineAnimation.visible=!0)},RouletteAnimationSpinCommand.prototype.onAnimationComplete=function(){this._animationProcess.removeEventListener(c.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this.hideSpineAnimation(),this._promise.completePromise&&this._promise.completePromise.resolve(null)},RouletteAnimationSpinCommand.prototype.hideSpineAnimation=function(){this._spineAnimation.stopAndReset(),this._spineAnimation.visible=!1},RouletteAnimationSpinCommand.ANIMATION_SPIN="rouletteSpin",RouletteAnimationSpinCommand.ANIMATION_LAMPS_CYCLE="cycle",RouletteAnimationSpinCommand.ANIMATION_PRESENT="present",RouletteAnimationSpinCommand.SECTOR_ANGLE=30,RouletteAnimationSpinCommand}(n.CommandBase);e.RouletteAnimationSpinCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,y=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),m=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},v=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(414),n(4),n(480),n(155),n(6),n(481),n(14),n(32),n(72)],void 0===(r=function(t,e,a,n,s,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RouletteSpinCommand(){return null!==t&&t.apply(this,arguments)||this}return y(RouletteSpinCommand,t),RouletteSpinCommand.prototype.execute=function(o){return m(this,void 0,void 0,function(){var e,n,i,r;return v(this,function(t){switch(t.label){case 0:return[4,a.Application.server.send(new s.RouletteSpinAction(o.rouletteModel.id))];case 1:return t.sent(),e=new l.BasePromise,c.ElkaCore.instance.promiseManager.ask(new u.RouletteAnimationSpinPromise(o.rouletteModel,o.animationData,e)),[4,e];case 2:return t.sent(),o.rouletteModel.hasAvailableSpins?(c.ElkaCore.instance.promiseManager.ask(new d.RouletteShowSpinAwardPromise(o.rouletteModel,o.animationData)),o.resolve(!1),[3,5]):[3,3];case 3:return[4,c.ElkaCore.instance.promiseManager.ask(new p.RouletteShowAwardWindowPromise(o.rouletteModel))];case 4:t.sent(),o.resolve(!0),t.label=5;case 5:return n=a.Application.award.convertObjectToCalculated(o.rouletteModel.lastSpinAward).awards[0],i={snum:o.rouletteModel.currentSpin,rtype:n.type===h.AwardType.RESOURCE?n.itemId:n.type,ramount:n.value},r=_.StarkEventsName.WHEEL,o.rouletteModel.id===f.RouletteId.GOLD&&(r=_.StarkEventsName.WHEEL_GOLD,i.ws=o.rouletteModel.rouletteDynamicItem.meta.wheelSource),a.Application.metrics.goalStarkEvent(r,i),[2]}})})},RouletteSpinCommand}(n.CommandBase);e.RouletteSpinCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(2),n(8),n(14),n(1580),n(72),n(43),n(46)],void 0===(r=function(t,e,o,n,a,s,c,u,p,l,d){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function RouletteShowAwardWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return h(RouletteShowAwardWindowCommand,t),RouletteShowAwardWindowCommand.prototype.execute=function(r){return _(this,void 0,void 0,function(){var e,n,i;return f(this,function(t){switch(t.label){case 0:if(e=o.Application.award.convertObjectToCalculated(r.rouletteModel.award),r.rouletteModel.id===p.RouletteId.GOLD)for(n=0;n<e.awards.length;n++)if(e.awards[n].type===c.AwardType.ROULETTE_SPINS){e.awards.splice(n,1);break}return i=new s.ViewContext({title:o.Application.localization.localize("ROULETTE_AWARD_TITLE"),description:o.Application.localization.localize("ROULETTE_AWARD_TEXT"),baseAward:e,wallpostId:RouletteShowAwardWindowCommand._rouletteIdWallpostMap[r.rouletteModel.id],noSound:!0}),o.Application.sound.play(l.SoundName.FORTUNE_WHEEL_WIN_JINGLE,!1,d.SoundGroup.SOUND_GROUP_SOUND),[4,o.Application.view.show(a.GUINames.AWARDS_WINDOW,i).onClose];case 1:return t.sent(),[4,o.Application.server.send(new u.RouletteGetAwardAction(r.rouletteModel.id))];case 2:return t.sent(),o.Application.award.accrueAwardImmediately(r.rouletteModel.award),r.resolve(null),[2]}})})},RouletteShowAwardWindowCommand._rouletteIdWallpostMap=((i={})[p.RouletteId.COMMON]=63,i[p.RouletteId.GOLD]=74,i),RouletteShowAwardWindowCommand}(n.CommandBase);e.RouletteShowAwardWindowCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function RouletteGetAwardAction(t){var e=n.call(this)||this;return e.action="getAward",e.controller="roulette",e.input=new i.ActionInput({rouletteId:t}),e.output=new o,e}return a(RouletteGetAwardAction,n),RouletteGetAwardAction}(n.Action);e.RouletteGetAwardAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(8),n(0)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.UIFactory,i=function IRouletteAnimationSpinAwardData(){};e.IRouletteAnimationSpinAwardData=i;var s=function(t){function RouletteShowSpinAwardCommand(){return null!==t&&t.apply(this,arguments)||this}return c(RouletteShowSpinAwardCommand,t),RouletteShowSpinAwardCommand.prototype.execute=function(i){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){return e=a.instance.createUIElementByName("rouletteSpinAwardContainer"),n=new r.ViewContext({rouletteModel:i.rouletteModel,awardItem:o.Application.award.convertObjectToCalculated(i.rouletteModel.lastSpinAward).awards[0]}),o.Application.view.addChild(i.animationData.container,e,n),[2]})})},RouletteShowSpinAwardCommand}(n.CommandBase);e.RouletteShowSpinAwardCommand=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(14),n(15),n(0),n(34),n(72)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=uipixi.Point,p=function(e){function RouletteSpinAwardContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return l(RouletteSpinAwardContainerMediator,e),RouletteSpinAwardContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._isToy=this._showData.awardItem.type===i.AwardType.TOY,this._awardRenderer=new r.AwardRenderer,this._awardRenderer.initialize(this._showData.awardItem,this._container,{iconId:64,iconImage:"awardImage",countLabel:!this._isToy&&"valueLabel",titleLabel:"titleLabel",beautyLabel:"beautyValueLabel",beautyContainer:"beautyAwardContainer"}),this._isToy&&(this._container.getChildByName("valueLabel").visible=!1),this._isGoldSpins=this._showData.rouletteModel.id===s.RouletteId.GOLD&&this._showData.awardItem.type===i.AwardType.ROULETTE_SPINS,this._shineSpine=this.child("shineSpine"),this._shineSpine.setAnimation(RouletteSpinAwardContainerMediator.SHINE_REVEAL_ANIMATION,!1),this._shineSpine.addAnimation(RouletteSpinAwardContainerMediator.SHINE_IDLE_ANIMATION,!0),this._continueButton=this.child("continueButton"),this.registerListener(this._continueButton,c.POINTER_TAP,this.onContinueButtonTap.bind(this)),this._animParams={title:this.child("titleLabel"),award:this.child("awardImageContainer"),glowAnimation:this.child("shineSpine"),awardCount:this._showData.awardItem.type===i.AwardType.TOY?this.child("beautyAwardContainer"):this.child("valueLabel"),button:this._continueButton},this.playShowAnimation()},RouletteSpinAwardContainerMediator.prototype.playShowAnimation=function(){this._animationProcess=o.Application.animation.animate(null,RouletteSpinAwardContainerMediator.ANIMATION_AWARD_SHOW,this._animParams)},RouletteSpinAwardContainerMediator.prototype.onContinueButtonTap=function(){var t;this._animationProcess&&this._animationProcess.stop(),this._continueButton.enabled=!1;var e=(t=this._isGoldSpins?this._mapData.spinsCountContainer:this._mapData.getSlotContainerByAward(this._showData.awardItem)).getGlobalPosition();e.x+=.5*t.width;var n=this.child("awardImageContainer").getGlobalPosition(),i=new u(e.x-n.x,e.y-n.y);this._animParams.offsetX=i.x,this._animParams.offsetY=i.y,this._animParams.scale=this._isToy?.3:.5,this._animationProcess=o.Application.animation.create(RouletteSpinAwardContainerMediator.ANIMATION_AWARD_HIDE,this._animParams),this._animationProcess.addEventListener(a.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this._animationProcess.start()},RouletteSpinAwardContainerMediator.prototype.onAnimationComplete=function(){this._animationProcess.removeEventListener(a.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this._isGoldSpins||this._mapData.addAward(this._showData.awardItem),this._showData.rouletteModel.spinUpdated(),this._container.parent.removeChild(this._container)},RouletteSpinAwardContainerMediator.prototype.destroy=function(){this._animationProcess&&(this._animationProcess.stop(),this._animationProcess.removeEventListener(a.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this))),this._awardRenderer.destroy(),e.prototype.destroy.call(this)},RouletteSpinAwardContainerMediator.ANIMATION_AWARD_SHOW="rouletteAwardShow",RouletteSpinAwardContainerMediator.ANIMATION_AWARD_HIDE="rouletteAwardHide",RouletteSpinAwardContainerMediator.SHINE_REVEAL_ANIMATION="01_reveal",RouletteSpinAwardContainerMediator.SHINE_IDLE_ANIMATION="02_idle",RouletteSpinAwardContainerMediator}(n.DisplayObjectContainerMediator);e.RouletteSpinAwardContainerMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(34)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function RouletteAnimationHideCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RouletteAnimationHideCommand,t),RouletteAnimationHideCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){return this._promise=n,e={wheel:n.data.wheelContainer,panel:n.data.panelContainer},this._animationProcess=i.Application.animation.create(RouletteAnimationHideCommand.ANIMATION_HIDE,e),this._animationProcess.addEventListener(r.ProcessEvent.COMPLETE,this.hideSpineAnimation.bind(this)),this._animationProcess.start(),[2]})})},RouletteAnimationHideCommand.prototype.hideSpineAnimation=function(){this._animationProcess.removeEventListener(r.ProcessEvent.COMPLETE,this.hideSpineAnimation.bind(this)),this._promise.completePromise&&this._promise.completePromise.resolve(null)},RouletteAnimationHideCommand.ANIMATION_HIDE="rouletteHide",RouletteAnimationHideCommand}(n.CommandBase);e.RouletteAnimationHideCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1585)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function RouletteAwardSlotsModel(){this._items=[]}return RouletteAwardSlotsModel.prototype.addSlot=function(t){this._items.push(new n.RouletteAwardSlotModel(t))},RouletteAwardSlotsModel.prototype.addAward=function(t){this.getAwardContainer(t).addAward(t)},RouletteAwardSlotsModel.prototype.getSlotContainerByAward=function(t){return this.getAwardContainer(t).container},RouletteAwardSlotsModel.prototype.getAwardContainer=function(t){for(var e,n=0;n<this._items.length&&(e=this._items[n]).calculatedAwardItem&&!e.calculatedAwardItem.equalsLike(t);n++);return e},RouletteAwardSlotsModel.prototype.clear=function(){this._items.forEach(function(t){return t.destroy()}),this._items=[]},RouletteAwardSlotsModel}();e.RouletteAwardSlotsModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(15)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function RouletteAwardSlotModel(t){this._container=t,this._awardRenderer=new n.AwardRenderer,this._awardRenderer.initialize(null,this._container,{renderOnInit:!1,iconImage:"awardIcon",iconId:64,countLabel:"countLabel",showSingleToyCount:!0,fit:!0})}return RouletteAwardSlotModel.prototype.addAward=function(t){this._calculatedAwardItem?this._calculatedAwardItem.value+=t.value:this._calculatedAwardItem=t.clone(),this._container.visible=!0,this._awardRenderer.updateAward(this._calculatedAwardItem)},Object.defineProperty(RouletteAwardSlotModel.prototype,"calculatedAwardItem",{get:function(){return this._calculatedAwardItem},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteAwardSlotModel.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),RouletteAwardSlotModel.prototype.destroy=function(){this._awardRenderer.destroy(),this._container.visible=!1},RouletteAwardSlotModel}();e.RouletteAwardSlotModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(37),n(1587),n(482),n(72)],void 0===(r=function(t,e,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function RoulettesModel(t){var e=n.call(this)||this;return e._roulettesDynamicData=t,e._roulettes=[],e.init(),e}return s(RoulettesModel,n),RoulettesModel.prototype.init=function(){this._roulettesDynamicData.addEventListener(i.ItemCollectionEvent.ITEM_ADDED,this.onItemAdded.bind(this)),this._roulettesDynamicData.addEventListener(i.ItemCollectionEvent.ITEM_REMOVED,this.onItemRemoved.bind(this));for(var t=0,e=this._roulettesDynamicData.items;t<e.length;t++){var n=e[t];this._roulettes.push(new r.RouletteModel(n))}},RoulettesModel.prototype.onItemAdded=function(t){this._roulettes.push(new r.RouletteModel(t.item))},RoulettesModel.prototype.onItemRemoved=function(t){var e=this.getRoulette(t.item.id);this._roulettes.splice(this._roulettes.indexOf(e),1)},RoulettesModel.prototype.getRoulette=function(t){for(var e=0,n=this._roulettes;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},Object.defineProperty(RoulettesModel.prototype,"activeRoulette",{get:function(){return this.getRoulette(a.RouletteId.GOLD)||this.getRoulette(a.RouletteId.COMMON)||null},enumerable:!0,configurable:!0}),Object.defineProperty(RoulettesModel.prototype,"hasAvailableSpins",{get:function(){return this._roulettes.some(function(t){return t.hasAvailableSpins})},enumerable:!0,configurable:!0}),RoulettesModel.prototype.awardAccrued=function(){this.dispatchEvent(new o.RoulettesModelEvent(o.RoulettesModelEvent.AWARD_ACCRUED))},RoulettesModel}(uipixi.BaseEventTarget);e.RoulettesModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(475)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function RouletteModel(t){var e=n.call(this)||this;return e._rouletteDynamicItem=t,e}return a(RouletteModel,n),Object.defineProperty(RouletteModel.prototype,"id",{get:function(){return this._rouletteDynamicItem.id},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteModel.prototype,"hasAvailableSpins",{get:function(){return this._rouletteDynamicItem.spin.currentSpin<=this._rouletteDynamicItem.spin.spinCount},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteModel.prototype,"lastSpinAward",{get:function(){return this._rouletteDynamicItem.spin.awards.items[this._rouletteDynamicItem.spin.awards.items.length-1].award},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteModel.prototype,"rouletteDynamicItem",{get:function(){return this._rouletteDynamicItem},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteModel.prototype,"lastSpinSectorNum",{get:function(){return 0<this._rouletteDynamicItem.spin.awards.items.length?this._rouletteDynamicItem.spin.awards.items[this._rouletteDynamicItem.spin.awards.items.length-1].sector:-1},enumerable:!0,configurable:!0}),RouletteModel.prototype.getSectorAward=function(t){var e=this._rouletteDynamicItem.sectors.getItem(t);return i.Application.award.convertObjectToCalculated(e.award).awards[0]},Object.defineProperty(RouletteModel.prototype,"spinsLeft",{get:function(){return this._rouletteDynamicItem.spin.spinCount-this._rouletteDynamicItem.spin.currentSpin},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteModel.prototype,"award",{get:function(){return this._rouletteDynamicItem.spin.award},enumerable:!0,configurable:!0}),Object.defineProperty(RouletteModel.prototype,"currentSpin",{get:function(){return this._rouletteDynamicItem.spin.currentSpin},enumerable:!0,configurable:!0}),RouletteModel.prototype.spin=function(){this.dispatchEvent(new r.RouletteModelEvent(r.RouletteModelEvent.SPIN))},RouletteModel.prototype.spinUpdated=function(){this.dispatchEvent(new r.RouletteModelEvent(r.RouletteModelEvent.SPINS_UPDATED))},RouletteModel}(uipixi.BaseEventTarget);e.RouletteModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2),n(26),n(474),n(4),n(155),n(72)],void 0===(r=function(t,e,n,c,u,p,i,r,o,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function RouletteShowActiveRoulettesCommand(){return null!==t&&t.apply(this,arguments)||this}return s(RouletteShowActiveRoulettesCommand,t),RouletteShowActiveRoulettesCommand.prototype.execute=function(t){return d(this,void 0,void 0,function(){var e,n,i,r,o,a,s;return h(this,function(t){switch(t.label){case 0:if(e=c.Application.model.roulettes,c.Application.view.isShowed(u.GUINames.ANY_ROULETTE_WINDOW)||!e.activeRoulette)return[2];if(n=c.Application.view.show(u.GUINames.ANY_ROULETTE_WINDOW,null,p.WindowLayer.DEV),c.Application.view.isShowed(u.GUINames.ROULETTE_WINDOW))return[3,6];i=[l.RouletteId.COMMON,l.RouletteId.GOLD],r=0,o=i,t.label=1;case 1:return r<o.length?(a=o[r],(s=e.getRoulette(a))&&1<s.currentSpin?[4,this.showRoulette(s)]:[3,3]):[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return e.activeRoulette?(s=e.activeRoulette,[4,this.showRoulette(s)]):[3,6];case 5:return t.sent(),[3,4];case 6:return c.Application.view.hide(n),[2]}})})},RouletteShowActiveRoulettesCommand.prototype.showRoulette=function(e){return d(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return e.hasAvailableSpins?[4,r.ElkaCore.instance.promiseManager.ask(new i.RouletteShowWindowPromise(e))]:[3,3];case 1:return[4,t.sent().closePromise];case 2:return t.sent(),[3,5];case 3:return[4,r.ElkaCore.instance.promiseManager.ask(new o.RouletteShowAwardWindowPromise(e))];case 4:t.sent(),t.label=5;case 5:return[2]}})})},RouletteShowActiveRoulettesCommand}(n.CommandBase);e.RouletteShowActiveRoulettesCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,N=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(51),n(0),n(2),n(1590),n(1591),n(22),n(483),n(1592),n(31),n(1595),n(1598),n(484),n(1599),n(252),n(1601),n(1603),n(1604),n(1605),n(253),n(1606),n(254),n(1607),n(1608),n(485),n(1609),n(1611),n(1612),n(1613),n(1614)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C,T,j,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var R=function(t){function GladeDuelModule(){return null!==t&&t.apply(this,arguments)||this}return N(GladeDuelModule,t),GladeDuelModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),i.ElkaCore.instance.promiseManager.ask(new o.RegisterSeasonLoaderPromise(this)),a.Application.operation.addAllowingRule(new h.OccurrenceBeginningLineRule("/gladeDuel"))},GladeDuelModule.prototype.onPreloadModule=function(t){this._modelFactory=new w.GladeDuelModelFactory,a.Application.model.gladeDuel=new _.GladeDuelModel,p.CommandMap.map(l.GladeDuelStartPromise,d.GladeDuelStartCommand),p.CommandMap.map(y.GladeDuelVotePromise,m.GladeDuelVoteCommand),p.CommandMap.map(v.GladeDuelFinishPromise,b.GladeDuelFinishCommand),p.CommandMap.map(S.GladeDuelPrepareGladesPromise,P.GladeDuelPrepareGladesCommand,this._modelFactory),p.CommandMap.map(E.GladeDuelRemoveGladesPromise,A.GladeDuelRemoveGladesCommand),p.CommandMap.map(D.GladeDuelSkipPromise,I.GladeDuelSkipCommand),a.Application.view.mapMediator(""+s.GUINames.GLADE_DUEL_START_WINDOW,u.GladeDuelStartWindowMediator),a.Application.view.mapMediator(""+s.GUINames.GLADE_DUEL_START_WINDOW,C.GladeDuelSpeedUpButtonMediator),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_START_WINDOW+".meInfoContainer",c.GladeDuelMeInfoContainerMediator),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_START_WINDOW+".buttonsContainer.timerContainer",M.GladeDuelTimerContainerMediator),a.Application.view.mapMediator(""+s.GUINames.GLADE_DUEL_WINDOW,O.GladeDuelScrollMediator),a.Application.view.mapMediator(""+s.GUINames.GLADE_DUEL_WINDOW,T.GladeDuelWindowMediator),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_WINDOW+".infoContainer",f.GladeDuelInfoContainerMediator),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_WINDOW+".leftGlade.selectButton",j.GladeDuelSelectButtonMediator,"left"),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_WINDOW+".rightGlade.selectButton",j.GladeDuelSelectButtonMediator,"right"),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_WINDOW+".leftGlade",x.GladeDuelGladeMediator,"left"),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_WINDOW+".rightGlade",x.GladeDuelGladeMediator,"right"),a.Application.view.mapMediator(s.GUINames.GLADE_DUEL_WINDOW+".completeContainer",g.GladeDuelCompleteContainerMediator),a.Application.toys.mapGladeMediators(s.GUINames.GLADE_DUEL_WINDOW+".leftGlade."+s.GUINames.GLADE_DUEL_GLADE_CONTAINER+"."+s.GUINames.TOYS_WINDOW,!1),a.Application.toys.mapGladeMediators(s.GUINames.GLADE_DUEL_WINDOW+".rightGlade."+s.GUINames.GLADE_DUEL_GLADE_CONTAINER+"."+s.GUINames.TOYS_WINDOW,!1)},GladeDuelModule}(n.Module);e.GladeDuelModule=R}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,a=function(n){function GladeDuelMeInfoContainerMediator(){return null!==n&&n.apply(this,arguments)||this}return s(GladeDuelMeInfoContainerMediator,n),GladeDuelMeInfoContainerMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.child("ratingLabel").text=i.Application.model.gladeDuel.currentScreenRating+"%";var e=this.child("infoButton");this.registerListener(e,o.POINTER_TAP,this.onInfoButton.bind(this))},GladeDuelMeInfoContainerMediator.prototype.onInfoButton=function(){i.Application.view.show(r.GUINames.FRIENDS_LIKES_WINDOW)},GladeDuelMeInfoContainerMediator}(n.DisplayObjectContainerMediator);e.GladeDuelMeInfoContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2),n(4),n(483),n(73),n(252),n(16)],void 0===(r=function(t,e,n,u,p,l,i,r,d,o,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=uipixi.GestureEvent,a=function(c){function GladeDuelStartWindowMediator(){return null!==c&&c.apply(this,arguments)||this}return s(GladeDuelStartWindowMediator,c),GladeDuelStartWindowMediator.prototype.initialize=function(t){c.prototype.initialize.call(this,t),this._model=u.Application.model.gladeDuel,this._buttonsContainer=this.child("buttonsContainer");var e=this.child("tooltipButton");u.Application.tooltip.addTooltip(e,p.TooltipAnchor.Bottom,l.GUINames.TEXT_TOOLTIP,{text:"GLADE_DUEL_HELP_TOOLTIP"});var n=this.child("speedUpInfoButton");u.Application.tooltip.addTooltip(n,p.TooltipAnchor.Top,l.GUINames.TEXT_TOOLTIP,{text:"GLADE_DUEL_SPEED_UP_HELP_TOOLTIP"});var i=this.child("playButton");this.registerListener(i,_.POINTER_TAP,this.onPlayButton.bind(this)),this.setGameState(),this.registerListener(this._model,d.GladeDuelModelEvent.GAME_READY,this.setGameState.bind(this));var r=u.Application.model.likes.totalCount,o=this._model.getCurrentTokenTarget(),a=this._model.getPrevTokenTarget();this.child("progressLabel").text=r+"/"+o,this.child("progressBar").progress=(r-a)/(o-a);var s=this.child("logo1");this._loadableImages=[new h.LoadableImage(s,s.resource,!0)],s=this.child("logo2"),this._loadableImages.push(new h.LoadableImage(s,s.resource,!1)),s=this.child("logo3"),this._loadableImages.push(new h.LoadableImage(s,s.resource,!1))},GladeDuelStartWindowMediator.prototype.setGameState=function(){this._buttonsContainer.currentState=this._model.waiting?"wait":"play"},GladeDuelStartWindowMediator.prototype.onPlayButton=function(){u.Application.view.hide(this.viewHandle),this._model.readyToFinish?i.ElkaCore.instance.promiseManager.ask(new o.GladeDuelFinishPromise):i.ElkaCore.instance.promiseManager.ask(new r.GladeDuelStartPromise)},GladeDuelStartWindowMediator.prototype.destroy=function(){this._loadableImages.forEach(function(t){return t.destroy()}),c.prototype.destroy.call(this)},GladeDuelStartWindowMediator}(n.DisplayObjectContainerMediator);e.GladeDuelStartWindowMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1593),n(2),n(1594),n(4),n(253)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function GladeDuelStartCommand(){return null!==t&&t.apply(this,arguments)||this}return p(GladeDuelStartCommand,t),GladeDuelStartCommand.prototype.execute=function(t){return l(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return(e=i.Application.model.gladeDuel).started?[3,2]:[4,i.Application.server.send(new r.GladeDuelStartAction)];case 1:t.sent(),e.initRound(),t.label=2;case 2:return[4,i.Application.server.send(new a.GladeDuelGetInfoAction)];case 3:return n=t.sent(),e.currentGameUsersData=n.output.usersData,[4,s.ElkaCore.instance.promiseManager.ask(new c.GladeDuelPrepareGladesPromise)];case 4:return t.sent(),i.Application.view.show(o.GUINames.GLADE_DUEL_WINDOW),[2]}})})},GladeDuelStartCommand}(n.CommandBase);e.GladeDuelStartCommand=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function GladeDuelStartAction(){var t=e.call(this)||this;return t.action="start",t.controller="gladeDuel",t.input=new i.ActionInput,t.output=new o,t}return a(GladeDuelStartAction,e),GladeDuelStartAction}(n.Action);e.GladeDuelStartAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function GladeDuelGetInfoAction(){var t=e.call(this)||this;return t.action="getInfo",t.controller="gladeDuel",t.input=new i.ActionInput,t.output=new o,t}return a(GladeDuelGetInfoAction,e),GladeDuelGetInfoAction}(n.Action);e.GladeDuelGetInfoAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.usersData=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(13),n(73),n(1596)],void 0===(r=function(t,e,r,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function GladeDuelModel(){var t=e.call(this)||this;return t._waitTimer=-1,t._dynamicData=r.Application.dynamic.user.gladeDuel,t._staticData=r.Application.static.data.gladeDuels,t.speedUpPrice=r.Application.price.calculate(t._staticData.gladeDuel.token.prices),t.started&&t.initRound(),t.setWaitStateIfNeed(),t._dynamicData.game.addEventListener(n.BaseDataEvent.CHILDREN_CHANGED,t.onGameChildrenChanged.bind(t)),t}return s(GladeDuelModel,e),GladeDuelModel.prototype.initRound=function(){var t=this._dynamicData.game.pairs.getItem(this._dynamicData.game.offset.toString());this._currentRound=t?new o.GladeDuelRoundModel(t):void 0},GladeDuelModel.prototype.onGameChildrenChanged=function(t){if(-1!==t.children.indexOf("award")&&this.dispatchEvent(new i.GladeDuelModelEvent(i.GladeDuelModelEvent.AWARD_COUNT_CHANGED)),-1!==t.children.indexOf("timeout")){var e=this.clearWaitStateIfNeed();e&&this.dispatchEvent(new i.GladeDuelModelEvent(i.GladeDuelModelEvent.SPEED_UP));var n=this.setWaitStateIfNeed();e&&!n&&this.dispatchEvent(new i.GladeDuelModelEvent(i.GladeDuelModelEvent.GAME_READY))}-1!==t.children.indexOf("offset")&&(this.started||(this.setWaitStateIfNeed(),this.dispatchEvent(new i.GladeDuelModelEvent(i.GladeDuelModelEvent.GAME_FINISHED))))},GladeDuelModel.prototype.setWaitStateIfNeed=function(){if(this.waiting){var t=this.timeout-r.Application.date.currentTime+1;return this._waitTimer=r.Application.date.callProcessor.delayCall(this.onWaitCompleted.bind(this),1e3*t),!0}return!1},GladeDuelModel.prototype.clearWaitStateIfNeed=function(){return-1!==this._waitTimer&&(r.Application.date.callProcessor.deleteCall(this._waitTimer),this._waitTimer=-1,!0)},GladeDuelModel.prototype.onWaitCompleted=function(){this._waitTimer=-1,this.dispatchEvent(new i.GladeDuelModelEvent(i.GladeDuelModelEvent.GAME_READY))},Object.defineProperty(GladeDuelModel.prototype,"started",{get:function(){return null!==this._dynamicData.game.offset},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"currentScreenRating",{get:function(){var t=r.Application.dynamic.user.screen,e=this._dynamicData.rating.getItem(t.toString());if(!e)return 0;var n=e.games.items.length;if(0===n)return 0;var i=e.games.items.reduce(function(t,e){return t+e.value},0);return Math.round(100*i/n)},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"currentPair",{get:function(){return this._dynamicData.game.offset+1},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"pairsCount",{get:function(){return parseInt(this._staticData.configs.config.filter(function(t){return"countPairs"===t.name})[0].value)},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"awardEnergyCount",{get:function(){return this._dynamicData.game.award||0},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"currentRound",{get:function(){return this._currentRound},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"timeout",{get:function(){return this._dynamicData.game.timeout},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"waiting",{get:function(){return!this.started&&this.timeout>r.Application.date.currentTime},enumerable:!0,configurable:!0}),GladeDuelModel.prototype.completeRound=function(t,e){var n=this._currentRound;n.complete(t,e),this.initRound(),this.dispatchEvent(new i.GladeDuelModelEvent(i.GladeDuelModelEvent.ROUND_COMPLETE,n))},Object.defineProperty(GladeDuelModel.prototype,"screenId",{get:function(){return this._dynamicData.game.screenId},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelModel.prototype,"tokenResourceId",{get:function(){return"duel"},enumerable:!0,configurable:!0}),GladeDuelModel.prototype.getCurrentTokenTarget=function(){return this.getTokenTarget(this._dynamicData.token.stage)},GladeDuelModel.prototype.getPrevTokenTarget=function(){return this.getTokenTarget(this._dynamicData.token.stage-1)},GladeDuelModel.prototype.getTokenTarget=function(t){return r.Application.calculator.calculate(this._staticData.gladeDuel.token.target,{stageId:t.toString()})},GladeDuelModel.prototype.onGladesSetup=function(){this.dispatchEvent(new i.GladeDuelModelEvent(i.GladeDuelModelEvent.NEXT_ROUND_READY))},Object.defineProperty(GladeDuelModel.prototype,"readyToFinish",{get:function(){return-1===this._dynamicData.game.offset},enumerable:!0,configurable:!0}),GladeDuelModel}(uipixi.BaseEventTarget);e.GladeDuelModel=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(1597),n(43),n(46)],void 0===(r=function(t,e,i,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function GladeDuelRoundModel(t){this._dynamicData=t;var e=.5<Math.random()?[0,1]:[1,0];this._leftGlade=new n.GladeDuelGladeModel(this.getUserId(e[0]),"left"),this._rightGlade=new n.GladeDuelGladeModel(this.getUserId(e[1]),"right"),i.Application.debug.addLogToConsole("gladeDuel","играют:"),i.Application.debug.addLogToConsole("gladeDuel","слева [",this.leftGlade.userId,"]"),i.Application.debug.addLogToConsole("gladeDuel","справа [",this.rightGlade.userId,"]")}return GladeDuelRoundModel.prototype.getUserId=function(t){return this._dynamicData.users.getItem(t.toString()).userId},GladeDuelRoundModel.prototype.complete=function(t,e){if(this._awardEnergyCount=t,this.leftGlade.winRate=e[this.leftGlade.userId],this.rightGlade.winRate=e[this.rightGlade.userId],this.leftGlade.winRate===this.rightGlade.winRate)this._win=!0;else{var n=this.leftGlade.winRate>this.rightGlade.winRate;this._win=this.selected.isLeft===n}i.Application.sound.play(this._win?r.SoundName.RIGHT_SIDE_JINGLE:r.SoundName.WRONG_SIDE_JINGLE,!1,o.SoundGroup.SOUND_GROUP_SOUND),i.Application.debug.addLogToConsole("gladeDuel","результаты:"),i.Application.debug.addLogToConsole("gladeDuel","левый",this.leftGlade.winRate,"%"),i.Application.debug.addLogToConsole("gladeDuel","правый",this.rightGlade.winRate,"%"),i.Application.debug.addLogToConsole("gladeDuel",this.leftGlade.winRate===this.rightGlade.winRate?"ничья":this.leftGlade.winRate>this.rightGlade.winRate?"победил левый":"победли правый"),i.Application.debug.addLogToConsole("gladeDuel","игрок выбрал",this.selected.isLeft?"левого":"правого","[",this.selected.userId,"]"),i.Application.debug.addLogToConsole("gladeDuel","игрок",this.win?"угадал":"не угадал"),i.Application.debug.addLogToConsole("gladeDuel","----------")},Object.defineProperty(GladeDuelRoundModel.prototype,"win",{get:function(){return this._win},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelRoundModel.prototype,"selectedUserId",{get:function(){return this._dynamicData.vote.userId},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelRoundModel.prototype,"awardEnergyCount",{get:function(){return this._awardEnergyCount},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelRoundModel.prototype,"selected",{get:function(){return this.selectedUserId===this.leftGlade.userId?this.leftGlade:this.rightGlade},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelRoundModel.prototype,"ready",{get:function(){return this.leftGlade.ready&&this.rightGlade.ready},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelRoundModel.prototype,"leftGlade",{get:function(){return this._leftGlade},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelRoundModel.prototype,"rightGlade",{get:function(){return this._rightGlade},enumerable:!0,configurable:!0}),GladeDuelRoundModel}();e.GladeDuelRoundModel=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GladeDuelGladeModel(t,e){this.userId=t,this.type=e}return GladeDuelGladeModel.prototype.setup=function(t){this._data=t},Object.defineProperty(GladeDuelGladeModel.prototype,"ready",{get:function(){return!!this._data},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGladeModel.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(GladeDuelGladeModel.prototype,"isLeft",{get:function(){return"left"===this.type},enumerable:!0,configurable:!0}),GladeDuelGladeModel}();e.GladeDuelGladeModel=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(73),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function GladeDuelInfoContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(GladeDuelInfoContainerMediator,e),GladeDuelInfoContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=r.Application.model.gladeDuel,this._pairLabel=this.child("pairLabel"),this._awardCountLabel=this.child("awardCountLabel"),this.setPair(),this.setAwardCount(),this.registerListener(this._model,i.GladeDuelModelEvent.ROUND_STARTED,this.setPair.bind(this)),this.registerListener(this._model,i.GladeDuelModelEvent.AWARD_COUNT_CHANGED,this.setAwardCount.bind(this))},GladeDuelInfoContainerMediator.prototype.setPair=function(){this._pairLabel.text=this._model.currentPair+"/"+this._model.pairsCount},GladeDuelInfoContainerMediator.prototype.setAwardCount=function(){this._awardCountLabel.text=this._model.awardEnergyCount.toString()},GladeDuelInfoContainerMediator}(n.DisplayObjectContainerMediator);e.GladeDuelInfoContainerMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1600),n(4),n(253),n(254)],void 0===(r=function(t,e,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelVoteCommand(){return null!==t&&t.apply(this,arguments)||this}return u(GladeDuelVoteCommand,t),GladeDuelVoteCommand.prototype.execute=function(i){return p(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:return e=r.Application.model.gladeDuel,[4,r.Application.server.send(new o.GladeDuelVoteAction(i.userId))];case 1:return n=t.sent(),[4,a.ElkaCore.instance.promiseManager.ask(new c.GladeDuelRemoveGladesPromise)];case 2:return t.sent(),e.completeRound(n.output.award,n.output.proportion),e.currentRound?[4,a.ElkaCore.instance.promiseManager.ask(new s.GladeDuelPrepareGladesPromise)]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},GladeDuelVoteCommand}(n.CommandBase);e.GladeDuelVoteCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function GladeDuelVoteAction(t){var e=n.call(this)||this;return e.action="vote",e.controller="gladeDuel",e.input=new i.ActionInput({userId:t}),e.output=new o,e}return a(GladeDuelVoteAction,n),GladeDuelVoteAction}(n.Action);e.GladeDuelVoteAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.proportion=t.data.proportion},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1602),n(8),n(152),n(2)],void 0===(r=function(t,e,n,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelFinishCommand(){return null!==t&&t.apply(this,arguments)||this}return p(GladeDuelFinishCommand,t),GladeDuelFinishCommand.prototype.execute=function(t){return l(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){switch(t.label){case 0:return[4,o.Application.server.send(new a.GladeDuelFinishAction)];case 1:return e=t.sent(),o.Application.model.gladeDuel.currentGameUsersData=null,n=o.Application.award.convertObjectToCalculated(e.output.baseAward),i=o.Application.award.convertObjectToCalculated(e.output.bonusAward),r=new s.ViewContext({title:o.Application.localization.localize("GLADE_DUEL_AWARD_TITLE"),description:o.Application.localization.localize("GLADE_DUEL_AWARD_TEXT"),baseAward:n,bonusAward:i,bonusPercent:o.Application.model.beauty.currentScreenBeauty.bonus,bonusType:c.AwardBonusType.BEAUTY}),[4,o.Application.view.show(u.GUINames.AWARDS_WINDOW,r).onClose];case 2:return t.sent(),o.Application.award.accrueAwardImmediately(e.output.award),o.Application.view.hideByWindowName(u.GUINames.GLADE_DUEL_WINDOW),[2]}})})},GladeDuelFinishCommand}(n.CommandBase);e.GladeDuelFinishCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function GladeDuelFinishAction(){var t=e.call(this)||this;return t.action="finish",t.controller="gladeDuel",t.input=new i.ActionInput,t.output=new o,t}return a(GladeDuelFinishAction,e),GladeDuelFinishAction}(n.Action);e.GladeDuelFinishAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award,this.baseAward=t.data.baseAward,this.bonusAward=t.data.bonusAward},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(73),n(30),n(34)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIEvent,c=function(e){function GladeDuelCompleteContainerMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._timer=-1,t}return u(GladeDuelCompleteContainerMediator,e),GladeDuelCompleteContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=i.Application.model.gladeDuel,this._winRateLabel=this.child("winRateLabel"),this._container.visible=!1,this.registerListener(this._model,r.GladeDuelModelEvent.ROUND_COMPLETE,this.onRoundComplete.bind(this)),this.registerListener(this._model,r.GladeDuelModelEvent.ROUND_STARTED,this.onRoundStarted.bind(this)),this.updateRelativeSize(),this.registerListener(i.Application.view.ui.stage,s.STAGE_RESIZE,this.updateRelativeSize.bind(this))},GladeDuelCompleteContainerMediator.prototype.updateRelativeSize=function(){this._container.width=.5*this._container.parent.width,this._container.height=this._container.parent.height},GladeDuelCompleteContainerMediator.prototype.onRoundComplete=function(t){var e=t.roundModel;this._container.visible=!0,this._container.anchor=e.selected.isLeft?"topRight":"topLeft",this._container.currentState=e.win?"win":"lose",this._winRateLabel.text=e.selected.winRate+"%",(this.child("awardCount1Label")||this.child("awardCount2Label")).text=e.awardEnergyCount.toString();var n=this.child("startPoint"),i=this.child("middleOffset");i.offsetX=e.selected.isLeft?-100:100;var r=this._container.parent.getChildByName("finishPoint").getGlobalPosition();this._animations=o.AnimationUtils.flyResourceToHud("energy",null,n,i,{count:e.win?10:3,customFinish:r}),this.registerListener(this._animations[this._animations.length-1],a.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this))},GladeDuelCompleteContainerMediator.prototype.onAnimationComplete=function(t){this.unregisterListener(t.process,t.type,this.onAnimationComplete.bind(this)),this._timer=i.Application.date.callProcessor.delayCall(this.onDelayed.bind(this),100),this._animations.length=0},GladeDuelCompleteContainerMediator.prototype.onDelayed=function(){this._model.dispatchEvent(new r.GladeDuelModelEvent(r.GladeDuelModelEvent.VOTE_ANIMATION_COMPLETED)),this._timer=-1},GladeDuelCompleteContainerMediator.prototype.onRoundStarted=function(){this._container.visible=!1},GladeDuelCompleteContainerMediator.prototype.destroy=function(){-1!==this._timer&&i.Application.date.callProcessor.deleteCall(this._timer),this._animations&&this._animations.forEach(function(t){return t.stop()}),e.prototype.destroy.call(this)},GladeDuelCompleteContainerMediator}(n.DisplayObjectContainerMediator);e.GladeDuelCompleteContainerMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(215),n(70),n(197),n(198),n(19),n(196),n(377),n(320),n(149),n(199),n(321)],void 0===(r=function(t,e,p,l,n,i,r,o,a,s,c,u,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=function(){function GladeDuelModelFactory(){}return GladeDuelModelFactory.prototype.createObjects=function(t,e){for(var n=[],i=0,r=p.Application.static.data.objects.object.items;i<r.length;i++){var o=r[i];if(o.screen===e){var a=o.id,s=t[a],c=s?s.stage:1,u=new l.FriendObjectModel(a,o,c,p.Application.static.data.client.skins.skin.getItem(a));n.push(u)}}return n},GladeDuelModelFactory.prototype.createExtraItems=function(t){return new n.ExtraItemsModel(p.Application.static.data.extraItems,new i.ExtraItemsCollection(a.ExtraItemDynamicItem,{}),new o.ItemCollection(r.ActiveExtraItemDynamicItem,t))},GladeDuelModelFactory.prototype.createAnimal=function(t,e){var n=p.Application.static.data.animals.animal.getItem(e);return new s.AnimalModel(n,new c.AnimalDynamicItem(e.toString(),t[e]||{}),p.Application.static.data.client.skins.skin.getItem(n.name))},GladeDuelModelFactory.prototype.createToys=function(t,e){return new u.ScreenToysModel(e,new d.ScreenToysDynamicData(e.toString(),t[e]))},GladeDuelModelFactory.prototype.createDesignObject=function(t,e){return new h.DesignObjectDynamicItem(e.toString(),t[e]||{})},GladeDuelModelFactory.prototype.createGlade=function(t,e){return{objects:this.createObjects(t.user.objects||{},e),extraItems:this.createExtraItems(t.user.activeExtraItem),animal:this.createAnimal(t.user.animal||{},e),toys:this.createToys(t.toyXY,e),designObject:this.createDesignObject(t.user.designObject||{},e)}},GladeDuelModelFactory}();e.GladeDuelModelFactory=_}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(73),n(48)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.UIRectangle,s=uipixi.UVPointEvent,c=uipixi.DragEvent,u=uipixi.UIEvent,p=function(e){function GladeDuelScrollMediator(){return null!==e&&e.apply(this,arguments)||this}return l(GladeDuelScrollMediator,e),GladeDuelScrollMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),i.Application.view.ui.stage.update(),this._scrollBar=this.child("scrollBar"),this._scrollLineImage=this.child("scrollLineImage"),this._selectButtons=this.children("selectButton"),this.updateRelativeSize(),this.registerListener(i.Application.view.ui.stage,u.STAGE_RESIZE,this.updateRelativeSize.bind(this)),this._leftMask=this.setupMask(this.child("leftGlade")),this._rightMask=this.setupMask(this.child("rightGlade")),this.updateMasksSize(),this.registerListener(this._scrollBar,s.POINT,this.updateMasksSize.bind(this)),this.registerListener(this._scrollBar,c.DRAG_START,this.onStartDrag.bind(this)),this.registerListener(this._scrollBar,c.DRAG_STOP,this.onStopDrag.bind(this)),this.registerListener(i.Application.model.gladeDuel,r.GladeDuelModelEvent.ROUND_COMPLETE,this.onRoundCompleted.bind(this)),this.registerListener(i.Application.model.gladeDuel,r.GladeDuelModelEvent.ROUND_STARTED,this.onRoundStarted.bind(this))},GladeDuelScrollMediator.prototype.updateRelativeSize=function(){i.Application.view.ui.stage.update(),this.clearFadeAnimation(),this._scrollBar.dragArea.width=this._container.width,this._scrollBar.height=this._container.height,this._scrollLineImage.height=this._scrollBar.height,this._scrollBar.offsetX=.5*this._container.width},GladeDuelScrollMediator.prototype.setupMask=function(t){var e=new a(0);return e.width=.5*this._container.width,e.height=this._container.height,e.offsetX=0,e.offsetY=0,e.anchor="topLeft",e.outside="topLeft",e.interactive=e.interactiveChildren=!1,t.addChild(e),t.render.mask=e.render,e},GladeDuelScrollMediator.prototype.updateMasksSize=function(){this._leftMask.width=this._scrollBar.offsetX,this._rightMask.offsetX=this._scrollBar.offsetX,this._rightMask.width=this._container.width-this._rightMask.offsetX},GladeDuelScrollMediator.prototype.onStartDrag=function(){this.clearFadeAnimation(),this._selectButtons.forEach(function(t){return t.enabled=!1}),i.Application.model.guides.dispatchEvent(new o.GuidesModelEvent(o.GuidesModelEvent.DRAG_BORDER_START))},GladeDuelScrollMediator.prototype.clearFadeAnimation=function(){this._fadeAnimation&&this._fadeAnimation.stop()},GladeDuelScrollMediator.prototype.onStopDrag=function(){this._fadeAnimation=i.Application.animation.animate(this._scrollBar,"gladeDuelScrollFade",{centerX:.5*this._container.width,onUpdate:this.updateMasksSize.bind(this)}),this._selectButtons.forEach(function(t){return t.enabled=!0}),i.Application.model.guides.dispatchEvent(new o.GuidesModelEvent(o.GuidesModelEvent.DRAG_BORDER_STOP))},GladeDuelScrollMediator.prototype.onRoundStarted=function(){this._scrollBar.enabled=!0},GladeDuelScrollMediator.prototype.onRoundCompleted=function(){this._scrollBar.enabled=!1},GladeDuelScrollMediator.prototype.destroy=function(){this.clearFadeAnimation(),e.prototype.destroy.call(this)},GladeDuelScrollMediator}(n.DisplayObjectContainerMediator);e.GladeDuelScrollMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(2),n(0),n(4),n(385)],void 0===(r=function(t,e,n,l,d,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelPrepareGladesCommand(){return null!==t&&t.apply(this,arguments)||this}return s(GladeDuelPrepareGladesCommand,t),GladeDuelPrepareGladesCommand.prototype.execute=function(t){return c(this,void 0,void 0,function(){var e,n,i,r,o;return u(this,function(t){switch(t.label){case 0:return e=d.Application.model.gladeDuel,n=e.currentRound.leftGlade,i=e.currentRound.rightGlade,[4,this.prepareGlade(e.currentGameUsersData[n.userId],e.screenId,"left")];case 1:return r=t.sent(),[4,this.prepareGlade(e.currentGameUsersData[i.userId],e.screenId,"right")];case 2:return o=t.sent(),n.setup(r),i.setup(o),e.onGladesSetup(),[2]}})})},GladeDuelPrepareGladesCommand.prototype.prepareGlade=function(n,i,r){return c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return e=this._data.createGlade(n,i),this.mapMediators(e,r),[4,d.Application.objects.loadObjectsResources(e.objects,i,e.extraItems)];case 1:return t.sent(),[4,d.Application.toys.loadToysOnScreen(e.toys)];case 2:return t.sent(),[4,o.ElkaCore.instance.promiseManager.ask(new a.DesignObjectLoadDecorPromise(e.designObject))];case 3:return t.sent(),[2,e]}})})},GladeDuelPrepareGladesCommand.prototype.mapMediators=function(e,t){for(var n=l.GUINames.GLADE_DUEL_WINDOW+"."+t+"Glade."+l.GUINames.GLADE_DUEL_GLADE_CONTAINER,i=0,r=e.objects;i<r.length;i++){var o=r[i],a=n+".objects."+o.id;d.Application.objects.mapObjectViewMediators(a,o,e.extraItems)}var s=e.objects.filter(function(t){return t.id===e.animal.staticData.view.animalHouse})[0],c=n+".animal."+e.animal.name;d.Application.animal.mapGladeViewMediators(c,e.animal,e.extraItems,s);var u=n+"."+l.GUINames.DESIGN_OBJECT_DECOR_BACK+e.designObject.id,p=n+"."+l.GUINames.DESIGN_OBJECT_DECOR_FRONT+e.designObject.id;d.Application.designObject.mapFriendGladeMediators(u,p,e.designObject)},GladeDuelPrepareGladesCommand}(n.CommandBase);e.GladeDuelPrepareGladesCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(2),n(0)],void 0===(r=function(t,e,n,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function GladeDuelRemoveGladesCommand(){return null!==t&&t.apply(this,arguments)||this}return a(GladeDuelRemoveGladesCommand,t),GladeDuelRemoveGladesCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(t){return(e=p.Application.model.gladeDuel).currentRound&&(this.unmapMediators(e.currentRound.leftGlade.data,"left"),this.unmapMediators(e.currentRound.rightGlade.data,"right")),[2]})})},GladeDuelRemoveGladesCommand.prototype.unmapMediators=function(t,e){for(var n=u.GUINames.GLADE_DUEL_WINDOW+"."+e+"Glade."+u.GUINames.GLADE_DUEL_GLADE_CONTAINER,i=0,r=t.objects;i<r.length;i++){var o=n+".objects."+r[i].id;p.Application.objects.unmapObjectViewMediators(o)}var a=n+".animal."+t.animal.name;p.Application.animal.unmapGladeViewMediators(a,t.animal);var s=n+"."+u.GUINames.DESIGN_OBJECT_DECOR_BACK+t.designObject.id,c=n+"."+u.GUINames.DESIGN_OBJECT_DECOR_FRONT+t.designObject.id;p.Application.designObject.unmapFriendGladeMediators(s,c,t.designObject)},GladeDuelRemoveGladesCommand}(n.CommandBase);e.GladeDuelRemoveGladesCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(29),n(0),n(73)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function GladeDuelTimerContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return s(GladeDuelTimerContainerMediator,e),GladeDuelTimerContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._timerLabel=this.child("timerLabel"),this.updateLabel(),this._timer=r.Application.date.callProcessor.repeatCall(this.updateLabel.bind(this)),this.registerListener(r.Application.model.gladeDuel,o.GladeDuelModelEvent.SPEED_UP,this.updateLabel.bind(this))},GladeDuelTimerContainerMediator.prototype.updateLabel=function(){this._timerLabel.text=i.DateUtils.timeToString(r.Application.model.gladeDuel.timeout-r.Application.date.currentTime)},GladeDuelTimerContainerMediator.prototype.destroy=function(){r.Application.date.callProcessor.deleteCall(this._timer),e.prototype.destroy.call(this)},GladeDuelTimerContainerMediator}(n.DisplayObjectContainerMediator);e.GladeDuelTimerContainerMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1610),n(32)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function GladeDuelSkipCommand(){return null!==t&&t.apply(this,arguments)||this}return s(GladeDuelSkipCommand,t),GladeDuelSkipCommand.prototype.execute=function(t){return c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return e=i.Application.price.hold(i.Application.model.gladeDuel.speedUpPrice),[4,i.Application.server.send(new r.GladeDuelSkipAction)];case 1:return t.sent(),i.Application.price.release(e),i.Application.metrics.goalStarkEvent(o.StarkEventsName.GLADES_SPEEDUP,{samount:i.Application.model.resources.get(i.Application.model.gladeDuel.tokenResourceId).count+1}),[2]}})})},GladeDuelSkipCommand}(n.CommandBase);e.GladeDuelSkipCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function GladeDuelSkipAction(){var t=e.call(this)||this;return t.action="skip",t.controller="gladeDuel",t.input=new i.ActionInput,t.output=new o,t}return a(GladeDuelSkipAction,e),GladeDuelSkipAction}(n.Action);e.GladeDuelSkipAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2),n(4),n(485),n(42)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function GladeDuelSpeedUpButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return l(GladeDuelSpeedUpButtonMediator,e),GladeDuelSpeedUpButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._resource=i.Application.model.resources.get(i.Application.model.gladeDuel.tokenResourceId),this._speedUpButton=this.child("speedUpButton"),this._speedUpLockedContainer=this.child("speedUpLockedContainer"),this.updateSpeedUpButtonLock(),i.Application.tooltip.addTooltip(this._speedUpLockedContainer,r.TooltipAnchor.Top,o.GUINames.TEXT_TOOLTIP,{text:"GLADE_DUEL_NO_TOKENS_TOOLTIP"}),this.registerListener(this._resource,c.ResourceModelEvent.COUNT_CHANGED,this.updateSpeedUpButtonLock.bind(this)),this.registerListener(this._speedUpButton,u.POINTER_TAP,this.onSpeedUpButton.bind(this))},GladeDuelSpeedUpButtonMediator.prototype.updateSpeedUpButtonLock=function(){this._speedUpLockedContainer.interactive=0===this._resource.count,this._speedUpLockedContainer.interactiveChildren=0===this._resource.count},GladeDuelSpeedUpButtonMediator.prototype.onSpeedUpButton=function(){a.ElkaCore.instance.promiseManager.ask(new s.GladeDuelSkipPromise)},GladeDuelSpeedUpButtonMediator}(n.DisplayObjectContainerMediator);e.GladeDuelSpeedUpButtonMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(254),n(73),n(252)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.UIFactory,u=uipixi.GestureEvent,p=function(n){function GladeDuelWindowMediator(){return null!==n&&n.apply(this,arguments)||this}return l(GladeDuelWindowMediator,n),GladeDuelWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._model=i.Application.model.gladeDuel,this.initBackground();var e=this.child("backButton");this.registerListener(e,u.POINTER_TAP,this.onBackTap.bind(this)),this.registerListener(this._model,a.GladeDuelModelEvent.VOTE_ANIMATION_COMPLETED,this.onAnimationCompleted.bind(this))},GladeDuelWindowMediator.prototype.initBackground=function(){var t=c.instance.createUIElementByName("background_"+i.Application.dynamic.user.screen);this._container.addChild(t),this._container.setChildIndex(t,0)},GladeDuelWindowMediator.prototype.onBackTap=function(){r.ElkaCore.instance.promiseManager.ask(new o.GladeDuelRemoveGladesPromise),i.Application.view.hide(this.viewHandle)},GladeDuelWindowMediator.prototype.onAnimationCompleted=function(){this._model.currentRound?this._model.currentRound.ready?this._model.dispatchEvent(new a.GladeDuelModelEvent(a.GladeDuelModelEvent.ROUND_STARTED)):this.registerListener(this._model,a.GladeDuelModelEvent.NEXT_ROUND_READY,this.setNewRound.bind(this)):r.ElkaCore.instance.promiseManager.ask(new s.GladeDuelFinishPromise)},GladeDuelWindowMediator.prototype.setNewRound=function(){this.unregisterListener(this._model,a.GladeDuelModelEvent.NEXT_ROUND_READY,this.setNewRound.bind(this)),this._model.dispatchEvent(new a.GladeDuelModelEvent(a.GladeDuelModelEvent.ROUND_STARTED))},GladeDuelWindowMediator}(n.DisplayObjectContainerMediator);e.GladeDuelWindowMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(484),n(73),n(48)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=uipixi.UIEvent,p=uipixi.ButtonState,l=function(e){function GladeDuelSelectButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return d(GladeDuelSelectButtonMediator,e),GladeDuelSelectButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=i.Application.model.gladeDuel,this._container.anchor=this.isLeft?"topRight":"topLeft",this.updateRelativeSize(),this.registerListener(i.Application.view.ui.stage,u.STAGE_RESIZE,this.updateRelativeSize.bind(this)),this.registerListener(this._container,c.POINTER_TAP,this.onSelect.bind(this)),this.registerListener(this._model,a.GladeDuelModelEvent.ROUND_COMPLETE,this.onRoundCompleted.bind(this)),this.registerListener(this._model,a.GladeDuelModelEvent.ROUND_STARTED,this.onRoundStarted.bind(this)),r.ElkaCore.instance.config.mobile&&(this.registerListener(this._container,c.POINTER_UP,this.onOut.bind(this)),this.registerListener(this._container,c.POINTER_DOWN,this.onOut.bind(this)))},Object.defineProperty(GladeDuelSelectButtonMediator.prototype,"isLeft",{get:function(){return"left"===this._mapData},enumerable:!0,configurable:!0}),GladeDuelSelectButtonMediator.prototype.updateRelativeSize=function(){this._container.width=.5*this._container.parent.width,this._container.height=this._container.parent.height},GladeDuelSelectButtonMediator.prototype.onSelect=function(){var t=this._model.currentRound;r.ElkaCore.instance.promiseManager.ask(new o.GladeDuelVotePromise(this.isLeft?t.leftGlade.userId:t.rightGlade.userId)),i.Application.model.guides.dispatchEvent(new s.GuidesModelEvent(s.GuidesModelEvent.GLADE_DUEL_GLADE_SELECTED))},GladeDuelSelectButtonMediator.prototype.onOut=function(){this._container.state=p.NORMAL},GladeDuelSelectButtonMediator.prototype.onRoundStarted=function(){this._container.visible=!0},GladeDuelSelectButtonMediator.prototype.onRoundCompleted=function(){this._container.visible=!1},GladeDuelSelectButtonMediator}(n.DisplayObjectContainerMediator);e.GladeDuelSelectButtonMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(2),n(0),n(8),n(73)],void 0===(r=function(t,e,n,r,o,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIFactory,c=function(e){function GladeDuelGladeMediator(){return null!==e&&e.apply(this,arguments)||this}return u(GladeDuelGladeMediator,e),GladeDuelGladeMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._gladeDuelModel=o.Application.model.gladeDuel,this.createGlade(),this.registerListener(this._gladeDuelModel,i.GladeDuelModelEvent.ROUND_STARTED,this.onRoundStated.bind(this))},GladeDuelGladeMediator.prototype.createGlade=function(){var t="left"===this._mapData?this._gladeDuelModel.currentRound.leftGlade:this._gladeDuelModel.currentRound.rightGlade;this._gladeContainer=s.instance.createUIElementByName(r.GUINames.GLADE_DUEL_GLADE_CONTAINER);var e=o.Application.view.addChild(this._gladeContainer,r.GUINames.TOYS_WINDOW,new a.ViewContext(t.data.toys));this._gladeContainer.setChildIndex(e.displayObject,this._gladeContainer.getChildIndex(this._gladeContainer.getChildByName("toys")));var n=s.instance.createUIElementByName(r.GUINames.DESIGN_OBJECT_DECOR_BACK+t.data.designObject.id);this._gladeContainer.addChild(n),this._gladeContainer.setChildIndex(n,this._gladeContainer.getChildIndex(this._gladeContainer.getChildByName("decorBack")));var i=s.instance.createUIElementByName(r.GUINames.DESIGN_OBJECT_DECOR_FRONT+t.data.designObject.id);this._gladeContainer.addChild(i),this._gladeContainer.setChildIndex(i,this._gladeContainer.getChildIndex(this._gladeContainer.getChildByName("decorFront"))),this._container.addChild(this._gladeContainer),this._container.setChildIndex(this._gladeContainer,0)},GladeDuelGladeMediator.prototype.onRoundStated=function(){this.removeGlade(),this.createGlade()},GladeDuelGladeMediator.prototype.removeGlade=function(){this._container.removeChild(this._container.getChildByName(r.GUINames.GLADE_DUEL_GLADE_CONTAINER))},GladeDuelGladeMediator}(n.DisplayObjectContainerMediator);e.GladeDuelGladeMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,O=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(0),n(1616),n(1617),n(1618),n(2),n(1619),n(1620),n(1621),n(22),n(486),n(1622),n(1623),n(1624),n(1625),n(1626),n(62)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w=function(t){function SettingsModule(){return null!==t&&t.apply(this,arguments)||this}return O(SettingsModule,t),SettingsModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this))},SettingsModule.prototype.onPreloadModule=function(t){this.mapMediators(),this.mapCommands()},SettingsModule.prototype.mapMediators=function(){o.Application.view.mapMediator(u.GUINames.HUD+".settingsContainer.settingsButton",a.HUDSettingsButtonMediator),o.Application.view.mapMediator(u.GUINames.FRIENDS_WINDOW+".settingsContainer.settingsButton",a.HUDSettingsButtonMediator),o.Application.view.mapMediator(u.GUINames.FRIENDS_HUD+".settingsContainer.settingsButton",a.HUDSettingsButtonMediator),o.Application.view.mapMediator(""+u.GUINames.SETTINGS_WINDOW,y.SettingsWindowMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".buttons.soundButton",c.SettingsWindowSoundButtonMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".buttons.musicButton",s.SettingsWindowMusicButtonMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".buttons.animButton",p.SettingsWindowAnimationButtonMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".buttons.snowButton",l.SettingsWindowSnowButtonMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".buttons.screenButton",d.SettingsWindowFullscreenButtonMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".logButton",m.SettingsWindowLogButtonMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".agreementButton",v.SettingsWindowAgreementButtonMediator),o.Application.view.mapMediator(u.GUINames.SETTINGS_WINDOW+".helpButton",b.SettingsWindowHelpButtonMediator),o.Application.view.mapMediator(""+u.GUINames.SETTINGS_WINDOW,g.SimplePopupAnimationMediator),o.Application.view.mapMediator(""+u.GUINames.SEND_LOG_NOTICE_WINDOW,g.SimplePopupAnimationMediator)},SettingsModule.prototype.mapCommands=function(){h.CommandMap.map(_.ShowSettingsWindowPromise,f.ShowSettingsWindowCommand)},SettingsModule}(n.Module);e.SettingsModule=w}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(4),n(486)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function HUDSettingsButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(HUDSettingsButtonMediator,t),HUDSettingsButtonMediator.prototype.onButton=function(t){i.ElkaCore.instance.promiseManager.ask(new r.ShowSettingsWindowPromise)},HUDSettingsButtonMediator}(n.SimpleButtonMediator);e.HUDSettingsButtonMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(130),n(0),n(32)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function SettingsWindowMusicButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return a(SettingsWindowMusicButtonMediator,e),SettingsWindowMusicButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setSelect(!i.Application.settings.settingsData.musicOn)},SettingsWindowMusicButtonMediator.prototype.onSelectChange=function(t){i.Application.settings.toggleMusic(),i.Application.metrics.goalStarkEvent(r.StarkEventsName.MUSIC,{state:i.Application.settings.settingsData.musicOn?1:0})},SettingsWindowMusicButtonMediator}(n.SimpleToggleButtonMediator);e.SettingsWindowMusicButtonMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(130)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function SettingsWindowSoundButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return a(SettingsWindowSoundButtonMediator,e),SettingsWindowSoundButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setSelect(!n.Application.settings.settingsData.soundOn)},SettingsWindowSoundButtonMediator.prototype.onSelectChange=function(t){n.Application.settings.toggleSound()},SettingsWindowSoundButtonMediator}(i.SimpleToggleButtonMediator);e.SettingsWindowSoundButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(130),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function SettingsWindowAnimationButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return a(SettingsWindowAnimationButtonMediator,e),SettingsWindowAnimationButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setSelect(!i.Application.settings.settingsData.animationsOn)},SettingsWindowAnimationButtonMediator.prototype.onSelectChange=function(t){i.Application.settings.toggleAnimations()},SettingsWindowAnimationButtonMediator}(n.SimpleToggleButtonMediator);e.SettingsWindowAnimationButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(130),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function SettingsWindowSnowButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return a(SettingsWindowSnowButtonMediator,e),SettingsWindowSnowButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setSelect(!i.Application.settings.settingsData.snowOn)},SettingsWindowSnowButtonMediator.prototype.onSelectChange=function(t){i.Application.settings.toggleSnow()},SettingsWindowSnowButtonMediator}(n.SimpleToggleButtonMediator);e.SettingsWindowSnowButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(130),n(32)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function SettingsWindowFullscreenButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return a(SettingsWindowFullscreenButtonMediator,e),SettingsWindowFullscreenButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setSelect(n.Application.view.ui.fullscreen.inFullscreen),this._updateCallback=this.update.bind(this),n.Application.view.ui.fullscreen.addEventListener("fullscreenchange",this._updateCallback)},SettingsWindowFullscreenButtonMediator.prototype.onSelectChange=function(t){this._toggleButton.selected?(n.Application.view.ui.fullscreen.requestFullscreen(),n.Application.metrics.goalStarkEvent(r.StarkEventsName.FULLSCREEN,{})):n.Application.view.ui.fullscreen.exitFullscreen()},SettingsWindowFullscreenButtonMediator.prototype.update=function(){this.setSelect(n.Application.view.ui.fullscreen.inFullscreen)},SettingsWindowFullscreenButtonMediator.prototype.destroy=function(){n.Application.view.ui.fullscreen.removeEventListener("fullscreenchange",this._updateCallback),this._updateCallback=null,e.prototype.destroy.call(this)},SettingsWindowFullscreenButtonMediator}(i.SimpleToggleButtonMediator);e.SettingsWindowFullscreenButtonMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(2),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function ShowSettingsWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ShowSettingsWindowCommand,t),ShowSettingsWindowCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,r.Application.resources.getResources(["settings_ui"],!0)];case 1:return t.sent(),r.Application.view.show(i.GUINames.SETTINGS_WINDOW),[2]}})})},ShowSettingsWindowCommand}(n.CommandBase);e.ShowSettingsWindowCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(4),n(119)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function SettingsWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return s(SettingsWindowMediator,e),SettingsWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setupLabels(),this.checkMobile(),this.checkFullscreen(),1===i.Application.dynamic.user.screen&&o.UIUtils.isWebGLRender()||this.deleteSnow()},SettingsWindowMediator.prototype.deleteSnow=function(){var t=this.child("snowButton");t.parent.removeChild(t)},SettingsWindowMediator.prototype.setupLabels=function(){this.child("userIdLabel").text=i.Application.localization.localize("SETTINGS_USER_ID",{id:"#"+r.ElkaCore.instance.config.userIdPlatform+"#"}),this.child("userIpLabel").text=i.Application.localization.localize("SETTINGS_USER_IP",{ip:r.ElkaCore.instance.config.userIP.toString()})},SettingsWindowMediator.prototype.checkMobile=function(){if(r.ElkaCore.instance.config.mobile){var t=this.child("musicButton");t.parent.removeChild(t)}},SettingsWindowMediator.prototype.checkFullscreen=function(){if(!i.Application.view.ui.fullscreen.fullscreenEnabled){var t=this.child("screenButton");t.parent.removeChild(t)}},SettingsWindowMediator}(n.DisplayObjectContainerMediator);e.SettingsWindowMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0),n(2),n(35),n(36)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function SettingsWindowLogButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return c(SettingsWindowLogButtonMediator,t),SettingsWindowLogButtonMediator.prototype.onButton=function(t){i.Application.debug.sendLog("Custom log","",o.LogFlag.CLICK_SEND,a.LogLevel.Info),i.Application.view.show(r.GUINames.SEND_LOG_NOTICE_WINDOW)},SettingsWindowLogButtonMediator}(n.SimpleButtonMediator);e.SettingsWindowLogButtonMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function SettingsWindowAgreementButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(SettingsWindowAgreementButtonMediator,t),SettingsWindowAgreementButtonMediator.prototype.onButton=function(t){window.open(i.Application.static.data.social.termsUrl,"_blank")},SettingsWindowAgreementButtonMediator}(n.SimpleButtonMediator);e.SettingsWindowAgreementButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function SettingsWindowHelpButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(SettingsWindowHelpButtonMediator,t),SettingsWindowHelpButtonMediator.prototype.onButton=function(t){window.open(i.Application.static.data.social.groupURL,"_blank")},SettingsWindowHelpButtonMediator}(n.SimpleButtonMediator);e.SettingsWindowHelpButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,v=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(1628),n(0),n(4),n(31),n(26),n(18),n(78),n(2),n(1675),n(1677),n(409),n(1678),n(1679)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=uipixi.GestureEvent,m=function(t){function GuidesModule(){return null!==t&&t.apply(this,arguments)||this}return v(GuidesModule,t),GuidesModule.prototype.initialize=function(t){o.ElkaCore.instance.promiseManager.ask(new c.RegisterModuleLoaderPromise(this)),r.Application.operation.addAllowingRule(new a.OccurrenceBeginningLineRule("/guide")),u.GuideUtils.debugMode=!0},GuidesModule.prototype.onPreloadModule=function(t){this.mapMediators(),r.Application.model.guides=this._model=new i.GuidesModel,r.Application.view.ui.stage.addEventListener(y.STAGE_PRE_TAP,this.onStagePreEvent.bind(this)),r.Application.view.ui.stage.addEventListener(y.STAGE_PRE_DOWN,this.onStagePreEvent.bind(this))},GuidesModule.prototype.onStagePreEvent=function(t){r.Application.debug.addLog(this.DEBUG_CHANNEL,t.type===y.STAGE_PRE_TAP?"tap":"down",u.GuideUtils.parsePath(t.UITarget))},GuidesModule.prototype.onStartModule=function(t){r.Application.view.show(p.GUINames.GUIDE_DIVIDER,null,s.WindowLayer.GUIDE),this._model.start()},GuidesModule.prototype.mapMediators=function(){r.Application.view.mapMediator(p.GUINames.GUIDE_BUBBLE,d.GuideBubbleMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_BUBBLE_BUTTON,d.GuideBubbleMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_DED_BUBBLE,d.GuideBubbleMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_DED_BUBBLE_BUTTON,d.GuideBubbleMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_BUBBLE,l.GuideBubbleDraggableMediator,{eventTarget:"guideBubble",customLog:!0}),r.Application.view.mapMediator(p.GUINames.GUIDE_BUBBLE_BUTTON,l.GuideBubbleDraggableMediator,{eventTarget:"guideBubble",customLog:!0}),r.Application.view.mapMediator(p.GUINames.GUIDE_DED_BUBBLE,l.GuideBubbleDraggableMediator,{eventTarget:"dedImage",customLog:!0}),r.Application.view.mapMediator(p.GUINames.GUIDE_DED_BUBBLE_BUTTON,l.GuideBubbleDraggableMediator,{eventTarget:"dedImage",customLog:!0}),r.Application.view.mapMediator(p.GUINames.GUIDE_ARROW,h.GuideArrowMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_DIVIDER,_.GuideDividerMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_SKIP_BUTTON_LEFT,f.GuideSkipButtonMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_SKIP_BUTTON_RIGHT,f.GuideSkipButtonMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_SKIP_BUTTON_LEFT_BOTTOM,f.GuideSkipButtonMediator),r.Application.view.mapMediator(p.GUINames.GUIDE_SKIP_BUTTON_RIGHT_BOTTOM,f.GuideSkipButtonMediator)},Object.defineProperty(GuidesModule.prototype,"DEBUG_CHANNEL",{get:function(){return"guide"},enumerable:!0,configurable:!0}),GuidesModule}(n.Module);e.GuidesModule=m}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1629),n(0),n(489),n(48)],void 0===(r=function(t,e,a,s,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(o){function GuidesModel(){var t=o.call(this)||this;t._guides=[],t._guidesMap=new core.Map;for(var e=t._active=0,n=s.Application.static.data.guides.guide.items;e<n.length;e++){var i=n[e],r=new a.GuideModel(i);t._guides.push(r),t._guidesMap.set(r.id,r)}return t}return c(GuidesModel,o),GuidesModel.prototype.start=function(){for(var t=0,e=this._guides;t<e.length;t++){var n=e[t];s.Application.requirements.check(n.requirements)?(n.addEventListener(i.GuideModelEvent.COMPLETE,this.onGuideCompleted.bind(this)),n.processStep()):s.Application.debug.addLog("guide","requirements are not satisfied",n.id)}0===this._active&&this.dispatchEvent(new r.GuidesModelEvent(r.GuidesModelEvent.COMPLETE))},GuidesModel.prototype.onGuideCompleted=function(t){this.restartGuide(t.guide)},GuidesModel.prototype.restartGuide=function(t){t.removeEventListener(i.GuideModelEvent.COMPLETE,this.onGuideCompleted.bind(this)),s.Application.requirements.check(t.requirements)?(t.addEventListener(i.GuideModelEvent.COMPLETE,this.onGuideCompleted.bind(this)),t.reset(),t.processStep()):s.Application.debug.addLog("guide","requirements are not satisfied",t.id),0===this._active&&this.dispatchEvent(new r.GuidesModelEvent(r.GuidesModelEvent.COMPLETE))},GuidesModel.prototype.skip=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],r=this._guidesMap.get(i);this.restartGuide(r)}},GuidesModel.prototype.interrupt=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];this._guidesMap.get(i).interrupt()}},Object.defineProperty(GuidesModel.prototype,"active",{get:function(){return this._active},set:function(t){if(0!==t&&0!==this._active)throw Error("Guide "+this._active+" is not released!");if(0===t&&0===this._active)throw Error("Guide already released!");this._active=t,this.dispatchEvent(new r.GuidesModelEvent(r.GuidesModelEvent.ACTIVE_CHANGED))},enumerable:!0,configurable:!0}),GuidesModel.prototype.getActiveGuide=function(){return 0!==this._active?this._guidesMap.get(this._active):void 0},Object.defineProperty(GuidesModel.prototype,"fade",{get:function(){return this._fade},set:function(t){this._fade!==t&&(this._fade=t,this.dispatchEvent(new r.GuidesModelEvent(r.GuidesModelEvent.FADE_CHANGED)))},enumerable:!0,configurable:!0}),Object.defineProperty(GuidesModel.prototype,"lockScreen",{get:function(){return this._lockScreen},set:function(t){this._lockScreen!==t&&(this._lockScreen=t,this.dispatchEvent(new r.GuidesModelEvent(r.GuidesModelEvent.LOCK_SCREEN_CHANGED)))},enumerable:!0,configurable:!0}),GuidesModel.prototype.isGuideCompletedOrSkipped=function(t){var e=s.Application.dynamic.user.guide.getItem(t.toString());return e&&e.step<0},GuidesModel}(uipixi.BaseEventTarget);e.GuidesModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(487),n(255),n(489),n(0),n(78)],void 0===(r=function(t,e,c,u,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(s){function GuideModel(t){var e=s.call(this)||this;e._id=t.id,e._requirements=t.requirements;var n={guideId:e._id};e._steps=[];for(var i=0,r=t.guideSteps;i<r.length;i++){var o=r[i],a=new c.GuideStepModel(o,n);a.addEventListener(u.GuideStepModelEvent.COMPLETE,e.onStepComplete.bind(e)),e._steps.push(a)}return e._stepIndex=0,e}return a(GuideModel,s),GuideModel.prototype.onStepComplete=function(){this._stepIndex<this._steps.length-1?this.turnNextStep():(i.Application.debug.addLog("guide","complete","["+this._id+"]"),this._stepIndex=0,this.dispatchEvent(new n.GuideModelEvent(n.GuideModelEvent.COMPLETE,this)))},GuideModel.prototype.turnNextStep=function(){this._stepIndex++,this.processStep()},GuideModel.prototype.processStep=function(){if(0!=this._steps.length){var t=this._steps[this._stepIndex];0===this._stepIndex&&i.Application.debug.addLog("guide","start","["+this._id+"]"),r.GuideUtils.debugStep(this._id,t),t.process()}else this.onStepComplete()},GuideModel.prototype.interrupt=function(){this._steps[this._stepIndex].interrupt()},Object.defineProperty(GuideModel.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GuideModel.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideModel.prototype.reset=function(){this._stepIndex=0},GuideModel}(uipixi.BaseEventTarget);e.GuideModel=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function HideWindowAction(){return null!==t&&t.apply(this,arguments)||this}return a(HideWindowAction,t),HideWindowAction.prototype.execute=function(){var t=this._stepStaticData.window;i.Application.view.isShowed(t)&&i.Application.view.hideByWindowName(t),this.complete()},HideWindowAction}(n.GuideAction);e.HideWindowAction=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(101)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideForkStaticData(){}return GuideForkStaticData.parse=function(t){var e=new GuideForkStaticData;return e._parse(t),e},Object.defineProperty(GuideForkStaticData.prototype,"if",{get:function(){return this._if},enumerable:!0,configurable:!0}),GuideForkStaticData.prototype._parse=function(t){var n=this;this._if=[],jQuery("> if",t).each(function(t,e){n._if.push(new i.GuideStepStaticData(e))})},GuideForkStaticData}();e.GuideForkStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(488),n(256)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function ForkStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(ForkStepAction,t),ForkStepAction.prototype.execute=function(){this._currentIndex=0,this.processIf(this._currentIndex)},ForkStepAction.prototype.processIf=function(t){this._currentStep=i.GuideActionFactory.instance.getAction(this._stepStaticData.if[t]),this._currentStep.injectData=this.injectData,this._currentStep.addEventListener(r.GuideActionEvent.COMPLETE,this.onAsyncActionCompleted.bind(this)),this._currentStep.execute()},ForkStepAction.prototype.onAsyncActionCompleted=function(){this._currentStep.removeEventListener(r.GuideActionEvent.COMPLETE,this.onAsyncActionCompleted.bind(this)),this._currentStep.processed?this.complete():(this._currentIndex++,this._currentIndex<this._stepStaticData.if.length?this.processIf(this._currentIndex):this.complete())},ForkStepAction.prototype.revert=function(){t.prototype.revert.call(this),this._currentStep.processed&&this._currentStep.revert()},ForkStepAction.prototype.interrupt=function(){t.prototype.interrupt.call(this),this._currentStep.processed&&this._currentStep.interrupt()},ForkStepAction}(n.GuideAction);e.ForkStepAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepCompleteStaticData(){}return GuideStepCompleteStaticData.parse=function(t){var e=new GuideStepCompleteStaticData;return e._parse(t),e},GuideStepCompleteStaticData.prototype._parse=function(t){},GuideStepCompleteStaticData}();e.GuideStepCompleteStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(101),n(24)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideIfStaticData(){}return GuideIfStaticData.parse=function(t){var e=new GuideIfStaticData;return e._parse(t),e},Object.defineProperty(GuideIfStaticData.prototype,"guideSteps",{get:function(){return this._guideSteps},enumerable:!0,configurable:!0}),Object.defineProperty(GuideIfStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GuideIfStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideIfStaticData.prototype._parse=function(t){var n=this;this._id=jQuery(t).attr("id"),this._requirements=r.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._guideSteps=[],jQuery(t).children().not("requirements").each(function(t,e){n._guideSteps.push(new i.GuideStepStaticData(e))})},GuideIfStaticData}();e.GuideIfStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0),n(2)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function CompleteStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(CompleteStepAction,t),CompleteStepAction.prototype.execute=function(){i.Application.view.hideByWindowName(r.GUINames.GUIDE_SKIP_BUTTON_LEFT),i.Application.view.hideByWindowName(r.GUINames.GUIDE_SKIP_BUTTON_RIGHT),i.Application.view.hideByWindowName(r.GUINames.GUIDE_SKIP_BUTTON_LEFT_BOTTOM),i.Application.view.hideByWindowName(r.GUINames.GUIDE_SKIP_BUTTON_RIGHT_BOTTOM),i.Application.model.guides.lockScreen=!1,i.Application.dynamic.guide.whiteLists.remove(this.injectData.startWhiteList),i.Application.model.guides.active=0,this.complete()},CompleteStepAction}(n.GuideAction);e.CompleteStepAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(257),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function IfStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(IfStepAction,t),IfStepAction.prototype.execute=function(){r.Application.requirements.check(this._stepStaticData.requirements)?(this._queue=new i.StepActionQueue(this.injectData,this._stepStaticData.guideSteps.concat()),this._queue.addEventListener(i.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this._queue.process()):this.complete()},IfStepAction.prototype.onQueueCompleted=function(){this._queue.removeEventListener(i.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this.complete()},IfStepAction.prototype.interrupt=function(){t.prototype.interrupt.call(this),this._queue.removeEventListener(i.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this._queue.interrupt()},IfStepAction.prototype.revert=function(){t.prototype.revert.call(this),this.processed&&this._queue.revert()},Object.defineProperty(IfStepAction.prototype,"processed",{get:function(){return null!=this._queue},enumerable:!0,configurable:!0}),IfStepAction}(n.GuideAction);e.IfStepAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1638)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepStartStaticData(){}return GuideStepStartStaticData.parse=function(t){var e=new GuideStepStartStaticData;return e._parse(t),e},Object.defineProperty(GuideStepStartStaticData.prototype,"skip",{get:function(){return this._skip},enumerable:!0,configurable:!0}),GuideStepStartStaticData.prototype._parse=function(t){this._skip=n.GuideStepStartSkipStaticData.parse(jQuery("> skip",t).first())},GuideStepStartStaticData}();e.GuideStepStartStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepStartSkipStaticData(){}return GuideStepStartSkipStaticData.parse=function(t){var e=new GuideStepStartSkipStaticData;return e._parse(t),e},Object.defineProperty(GuideStepStartSkipStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepStartSkipStaticData.prototype,"save",{get:function(){return this._save},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepStartSkipStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),GuideStepStartSkipStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type")||"guideSkipButtonRight",this._save=n.Utils.parseBool(jQuery(t).attr("save"),n.Utils.parseBool("true")),this._value=jQuery(t).attr("value")||"-1"},GuideStepStartSkipStaticData}();e.GuideStepStartSkipStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(257),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function WhileStepAction(){return null!==e&&e.apply(this,arguments)||this}return a(WhileStepAction,e),WhileStepAction.prototype.execute=function(){this._queues=[],this.executeQueueIfRequirementsChecked()},WhileStepAction.prototype.executeQueueIfRequirementsChecked=function(){r.Application.requirements.check(this._stepStaticData.requirements)?(this._currentQueue=new i.StepActionQueue(this.injectData,this._stepStaticData.guideSteps.concat()),this._queues.push(this._currentQueue),this._currentQueue.addEventListener(i.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this._currentQueue.process()):this.complete()},WhileStepAction.prototype.onQueueCompleted=function(){this._currentQueue.removeEventListener(i.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this.executeQueueIfRequirementsChecked()},WhileStepAction.prototype.interrupt=function(){e.prototype.interrupt.call(this),this._currentQueue.removeEventListener(i.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this._currentQueue.interrupt()},WhileStepAction.prototype.revert=function(){if(e.prototype.revert.call(this),this.processed)for(var t=this._queues.length-1;0<=t;t--){this._queues[t].revert()}},Object.defineProperty(WhileStepAction.prototype,"processed",{get:function(){return 0<this._queues.length},enumerable:!0,configurable:!0}),WhileStepAction}(n.GuideAction);e.WhileStepAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(101),n(24)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideWhileStaticData(){}return GuideWhileStaticData.parse=function(t){var e=new GuideWhileStaticData;return e._parse(t),e},Object.defineProperty(GuideWhileStaticData.prototype,"guideSteps",{get:function(){return this._guideSteps},enumerable:!0,configurable:!0}),Object.defineProperty(GuideWhileStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(GuideWhileStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideWhileStaticData.prototype._parse=function(t){var n=this;this._id=jQuery(t).attr("id"),this._requirements=r.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first()),this._guideSteps=[],jQuery(t).children().not("requirements").each(function(t,e){n._guideSteps.push(new i.GuideStepStaticData(e))})},GuideWhileStaticData}();e.GuideWhileStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(44),n(0),n(2)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function ShowWindowAction(){return null!==t&&t.apply(this,arguments)||this}return a(ShowWindowAction,t),ShowWindowAction.prototype.execute=function(){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(e=this._stepStaticData.window,n={windows:[e]},i.Application.dynamic.guide.whiteLists.add(n),e){case r.GUINames.BEAUTY_WINDOW:case r.GUINames.FULLSCREEN_WINDOW:i.Application.view.show(e);break;default:throw new Error("ShowWindowAction: unknown window: "+e)}return i.Application.dynamic.guide.whiteLists.remove(n),this.complete(),[2]})})},ShowWindowAction}(n.GuideAction);e.ShowWindowAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0),n(26),n(8)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function StartStepAction(){return null!==t&&t.apply(this,arguments)||this}return s(StartStepAction,t),StartStepAction.prototype.execute=function(){i.Application.model.guides.active=this.injectData.guideId,this.injectData.startWhiteList={windows:[]},i.Application.dynamic.guide.whiteLists.add(this.injectData.startWhiteList),i.Application.model.guides.lockScreen=!0,i.Application.model.guides.fade=0;var t=i.Application.calculator.calculate(this._stepStaticData.skip.value),e=this.injectData.skip={guideId:this.injectData.guideId,value:t,save:this._stepStaticData.skip.save};if("none"!==this._stepStaticData.skip.type){var n=new o.ViewContext({guideId:e.guideId,value:e.value,save:e.save});i.Application.view.show(this._stepStaticData.skip.type,n,r.WindowLayer.GUIDE_SKIP_BUTTON)}this.complete()},StartStepAction}(n.GuideAction);e.StartStepAction=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepShowWindowStaticData(){}return GuideStepShowWindowStaticData.parse=function(t){var e=new GuideStepShowWindowStaticData;return e._parse(t),e},Object.defineProperty(GuideStepShowWindowStaticData.prototype,"window",{get:function(){return this._window},enumerable:!0,configurable:!0}),GuideStepShowWindowStaticData.prototype._parse=function(t){this._window=jQuery(t).attr("window")},GuideStepShowWindowStaticData}();e.GuideStepShowWindowStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepFadeStaticData(){}return GuideStepFadeStaticData.parse=function(t){var e=new GuideStepFadeStaticData;return e._parse(t),e},Object.defineProperty(GuideStepFadeStaticData.prototype,"alpha",{get:function(){return this._alpha},enumerable:!0,configurable:!0}),GuideStepFadeStaticData.prototype._parse=function(t){this._alpha=n.Utils.parseFloat(jQuery(t).attr("alpha"))},GuideStepFadeStaticData}();e.GuideStepFadeStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepSaveStaticData(){}return GuideStepSaveStaticData.parse=function(t){var e=new GuideStepSaveStaticData;return e._parse(t),e},Object.defineProperty(GuideStepSaveStaticData.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepSaveStaticData.prototype,"guideId",{get:function(){return this._guideId},enumerable:!0,configurable:!0}),GuideStepSaveStaticData.prototype._parse=function(t){this._value=jQuery(t).attr("value"),this._guideId=n.Utils.parseInt(jQuery(t).attr("guideId"))},GuideStepSaveStaticData}();e.GuideStepSaveStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepBubbleStaticData(){}return GuideStepBubbleStaticData.parse=function(t){var e=new GuideStepBubbleStaticData;return e._parse(t),e},Object.defineProperty(GuideStepBubbleStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepBubbleStaticData.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepBubbleStaticData.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepBubbleStaticData.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepBubbleStaticData.prototype,"bindObject",{get:function(){return this._bindObject},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepBubbleStaticData.prototype,"bindAnchor",{get:function(){return this._bindAnchor},enumerable:!0,configurable:!0}),GuideStepBubbleStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type"),this._text=jQuery(t).attr("text"),this._x=n.Utils.parseInt(jQuery(t).attr("x")),this._y=n.Utils.parseInt(jQuery(t).attr("y")),this._bindObject=jQuery(t).attr("bindObject")||"windowsManager_layer_windows",this._bindAnchor=jQuery(t).attr("bindAnchor")||"center"},GuideStepBubbleStaticData}();e.GuideStepBubbleStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(1648),n(1649),n(1650),n(1651),n(1652),n(1653),n(1654)],void 0===(r=function(t,e,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepTriggerStaticData(){}return GuideStepTriggerStaticData.parse=function(t){var e=new GuideStepTriggerStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerStaticData.prototype,"windowShow",{get:function(){return this._windowShow},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerStaticData.prototype,"upgradeWindowShow",{get:function(){return this._upgradeWindowShow},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerStaticData.prototype,"windowHide",{get:function(){return this._windowHide},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerStaticData.prototype,"click",{get:function(){return this._click},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerStaticData.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerStaticData.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerStaticData.prototype,"event",{get:function(){return this._event},enumerable:!0,configurable:!0}),GuideStepTriggerStaticData.prototype._parse=function(t){var n=this;this._windowShow=[],jQuery("> windowShow",t).each(function(t,e){n._windowShow.push(i.GuideStepTriggerWindowShownStaticData.parse(e))}),this._upgradeWindowShow=r.GuideStepTriggerUpgradeWindowShownStaticData.parse(jQuery("> upgradeWindowShow",t).first()),this._windowHide=[],jQuery("> windowHide",t).each(function(t,e){n._windowHide.push(o.GuideStepTriggerWindowHideStaticData.parse(e))}),this._click=[],jQuery("> click",t).each(function(t,e){n._click.push(a.GuideStepTriggerClickStaticData.parse(e))}),this._delay=[],jQuery("> delay",t).each(function(t,e){n._delay.push(s.GuideStepTriggerDelayStaticData.parse(e))}),this._ready=[],jQuery("> ready",t).each(function(t,e){n._ready.push(c.GuideStepTriggerReadyStaticData.parse(e))}),this._event=[],jQuery("> event",t).each(function(t,e){n._event.push(u.GuideStepTriggerEventStaticData.parse(e))})},GuideStepTriggerStaticData}();e.GuideStepTriggerStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(24)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepTriggerWindowShownStaticData(){}return GuideStepTriggerWindowShownStaticData.parse=function(t){var e=new GuideStepTriggerWindowShownStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerWindowShownStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerWindowShownStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideStepTriggerWindowShownStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name"),this._requirements=n.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},GuideStepTriggerWindowShownStaticData}();e.GuideStepTriggerWindowShownStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(24)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepTriggerUpgradeWindowShownStaticData(){}return GuideStepTriggerUpgradeWindowShownStaticData.parse=function(t){var e=new GuideStepTriggerUpgradeWindowShownStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerUpgradeWindowShownStaticData.prototype,"objectId",{get:function(){return this._objectId},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerUpgradeWindowShownStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideStepTriggerUpgradeWindowShownStaticData.prototype._parse=function(t){this._objectId=jQuery(t).attr("objectId"),this._requirements=n.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},GuideStepTriggerUpgradeWindowShownStaticData}();e.GuideStepTriggerUpgradeWindowShownStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepTriggerWindowHideStaticData(){}return GuideStepTriggerWindowHideStaticData.parse=function(t){var e=new GuideStepTriggerWindowHideStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerWindowHideStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),GuideStepTriggerWindowHideStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name")},GuideStepTriggerWindowHideStaticData}();e.GuideStepTriggerWindowHideStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(5),n(24)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function GuideStepTriggerClickStaticData(){}return GuideStepTriggerClickStaticData.parse=function(t){var e=new GuideStepTriggerClickStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerClickStaticData.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerClickStaticData.prototype,"triggerId",{get:function(){return this._triggerId},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerClickStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerClickStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideStepTriggerClickStaticData.prototype._parse=function(t){this._element=jQuery(t).attr("element"),this._triggerId=n.Utils.parseInt(jQuery(t).attr("triggerId")),this._type=jQuery(t).attr("type")||"tap",this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},GuideStepTriggerClickStaticData}();e.GuideStepTriggerClickStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepTriggerDelayStaticData(){}return GuideStepTriggerDelayStaticData.parse=function(t){var e=new GuideStepTriggerDelayStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerDelayStaticData.prototype,"ms",{get:function(){return this._ms},enumerable:!0,configurable:!0}),GuideStepTriggerDelayStaticData.prototype._parse=function(t){this._ms=n.Utils.parseInt(jQuery(t).attr("ms"))},GuideStepTriggerDelayStaticData}();e.GuideStepTriggerDelayStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5),n(24)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function GuideStepTriggerReadyStaticData(){}return GuideStepTriggerReadyStaticData.parse=function(t){var e=new GuideStepTriggerReadyStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerReadyStaticData.prototype,"checkOnStart",{get:function(){return this._checkOnStart},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepTriggerReadyStaticData.prototype,"requirements",{get:function(){return this._requirements},enumerable:!0,configurable:!0}),GuideStepTriggerReadyStaticData.prototype._parse=function(t){this._checkOnStart=n.Utils.parseBool(jQuery(t).attr("checkOnStart"),n.Utils.parseBool("false")),this._requirements=i.RequirementsTreeStaticData.parse(jQuery("> requirements",t).first())},GuideStepTriggerReadyStaticData}();e.GuideStepTriggerReadyStaticData=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepTriggerEventStaticData(){}return GuideStepTriggerEventStaticData.parse=function(t){var e=new GuideStepTriggerEventStaticData;return e._parse(t),e},Object.defineProperty(GuideStepTriggerEventStaticData.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),GuideStepTriggerEventStaticData.prototype._parse=function(t){this._name=jQuery(t).attr("name")},GuideStepTriggerEventStaticData}();e.GuideStepTriggerEventStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r;i=[n,e,n(101)],void 0===(r=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideGuideStepStaticData(){}return GuideGuideStepStaticData.parse=function(t){var e=new GuideGuideStepStaticData;return e._parse(t),e},Object.defineProperty(GuideGuideStepStaticData.prototype,"guideSteps",{get:function(){return this._guideSteps},enumerable:!0,configurable:!0}),Object.defineProperty(GuideGuideStepStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),GuideGuideStepStaticData.prototype._parse=function(t){var n=this;this._id=jQuery(t).attr("id"),this._guideSteps=[],jQuery(t).children().not("requirements").each(function(t,e){n._guideSteps.push(new i.GuideStepStaticData(e))})},GuideGuideStepStaticData}();e.GuideGuideStepStaticData=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0),n(78),n(280),n(48),n(2),n(369)],void 0===(r=function(t,e,n,a,s,r,i,o,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=uipixi.WindowsManagerEvent,l=function(e){function TriggerStepAction(){var t=null!==e&&e.apply(this,arguments)||this;return t._eventsMap={farmExchangeAnimationComplete:i.GuidesModelEvent.FARM_EXCHANGE_ANIMATION_COMPLETE,farmUpgradeAnimationComplete:i.GuidesModelEvent.FARM_UPGRADE_ANIMATION_COMPLETE,beautyFlyAnimationComplete:i.GuidesModelEvent.BEAUTY_FLY_ANIMATION_COMPLETE,nextBoxButtonAnimationComplete:i.GuidesModelEvent.NEXT_BOX_BUTTON_ANIMATION_COMPLETE,boxOpened:i.GuidesModelEvent.BOX_OPENED,viralResourceAccepted:i.GuidesModelEvent.VIRAL_RESOURCE_ACCEPTED,viralRequestAnimationComplete:i.GuidesModelEvent.VIRAL_REQUEST_ANIMATION_COMPLETE,dragBorderStop:i.GuidesModelEvent.DRAG_BORDER_STOP,dragBorderStart:i.GuidesModelEvent.DRAG_BORDER_START,gladeDuelGladeSelected:i.GuidesModelEvent.GLADE_DUEL_GLADE_SELECTED,showQuestObjectStageUp:i.GuidesModelEvent.fromTriggerEventName("showQuestObjectStageUp"),workshopRequestWindowShow:i.GuidesModelEvent.WORKSHOP_REQUEST_WINDOW_SHOW,workshopItemRequested:i.GuidesModelEvent.WORKSHOP_ITEM_REQUESTED},t._clickMap={tap:u.STAGE_PRE_TAP,down:u.STAGE_PRE_DOWN},t}return d(TriggerStepAction,e),TriggerStepAction.prototype.execute=function(){this.subscribeClick(),this.subscribeWindowShow(),this.subscribeUpgradeWindowShow(),this.subscribeWindowHide(),this.subscribeDelay(),this.subscribeEvent(),this.subscribeReady()&&this.onComplete()},TriggerStepAction.prototype.subscribeReady=function(){for(var t=!1,e=0,n=this._stepStaticData.ready;e<n.length;e++){var i=n[e];a.Application.requirements.wait(i.requirements,this.onComplete.bind(this)),i.checkOnStart&&a.Application.requirements.check(i.requirements)&&(t=!0)}return t},TriggerStepAction.prototype.clearReady=function(){var e=this;this._stepStaticData.ready.forEach(function(t){return a.Application.requirements.unwait(t.requirements,e.onComplete.bind(e))})},TriggerStepAction.prototype.subscribeDelay=function(){var e=this;this._timers=this._stepStaticData.delay.map(function(t){return a.Application.date.callProcessor.delayCall(e.onComplete.bind(e),t.ms)})},TriggerStepAction.prototype.clearTimers=function(){this._timers.forEach(function(t){return a.Application.date.callProcessor.deleteCall(t)})},TriggerStepAction.prototype.subscribeClick=function(){0<this._stepStaticData.click.length&&(a.Application.view.ui.stage.addEventListener(u.STAGE_PRE_TAP,this.onStageTap.bind(this)),a.Application.view.ui.stage.addEventListener(u.STAGE_PRE_DOWN,this.onStageTap.bind(this)))},TriggerStepAction.prototype.onStageTap=function(t){for(var e=s.GuideUtils.parsePath(t.UITarget),n=0,i=this._stepStaticData.click;n<i.length;n++){var r=i[n];if(this._clickMap[r.type]===t.type){var o=s.GuideUtils.getDataValue(r.element);if(-1===o.indexOf(".")&&(o="**."+o),s.GuideUtils.checkPath(e,o)&&a.Application.requirements.check(r.requirements))return null!==r.triggerId&&(a.Application.dynamic.guide.lastTriggerId=r.triggerId),void this.onComplete()}}},TriggerStepAction.prototype.clearClick=function(){0<this._stepStaticData.click.length&&(a.Application.view.ui.stage.removeEventListener(u.STAGE_PRE_TAP,this.onStageTap.bind(this)),a.Application.view.ui.stage.removeEventListener(u.STAGE_PRE_DOWN,this.onStageTap.bind(this)))},TriggerStepAction.prototype.subscribeWindowShow=function(){if(0<this._stepStaticData.windowShow.length){for(var t=[],e=0,n=this._stepStaticData.windowShow;e<n.length;e++){var i=n[e];t.push(i.name)}a.Application.model.guides.active===this.injectData.guideId&&(this._whiteListConfig={windows:t},a.Application.dynamic.guide.whiteLists.add(this._whiteListConfig)),a.Application.view.eventTarget.addEventListener(r.ViewServiceEvent.WINDOW_SHOWN,this.onWindowShown.bind(this))}},TriggerStepAction.prototype.subscribeUpgradeWindowShow=function(){if(this._stepStaticData.upgradeWindowShow.objectId){var t=[];t.push(o.GUINames.UPGRADE_OBJECT_WINDOW),a.Application.model.guides.active===this.injectData.guideId&&(this._whiteListConfig={windows:t},a.Application.dynamic.guide.whiteLists.add(this._whiteListConfig)),a.Application.model.objects.addEventListener(c.ObjectEvent.UPGRADE_WINDOW_SHOW,this.onUpgradeWindowShow.bind(this))}},TriggerStepAction.prototype.onUpgradeWindowShow=function(t){this._stepStaticData.upgradeWindowShow.objectId===t.objectId&&a.Application.requirements.check(this._stepStaticData.upgradeWindowShow.requirements)&&this.onComplete()},TriggerStepAction.prototype.onWindowShown=function(t){for(var e=0,n=this._stepStaticData.windowShow;e<n.length;e++){var i=n[e];if(i.name===t.viewHandle.displayObject.name){a.Application.requirements.check(i.requirements)&&this.onComplete();break}}},TriggerStepAction.prototype.onComplete=function(){this.clear(),this.complete()},TriggerStepAction.prototype.clearWindowShow=function(){0<this._stepStaticData.windowShow.length&&(a.Application.view.eventTarget.removeEventListener(r.ViewServiceEvent.WINDOW_SHOWN,this.onWindowShown.bind(this)),this._whiteListConfig&&a.Application.dynamic.guide.whiteLists.remove(this._whiteListConfig))},TriggerStepAction.prototype.clearUpgradeWindowShow=function(){this._stepStaticData.upgradeWindowShow.objectId&&(a.Application.model.objects.removeEventListener(c.ObjectEvent.UPGRADE_WINDOW_SHOW,this.onUpgradeWindowShow.bind(this)),this._whiteListConfig&&a.Application.dynamic.guide.whiteLists.remove(this._whiteListConfig))},TriggerStepAction.prototype.subscribeWindowHide=function(){0<this._stepStaticData.windowHide.length&&a.Application.view.ui.windows.addEventListener(p.WINDOW_HIDED,this.onWindowHided.bind(this))},TriggerStepAction.prototype.onWindowHided=function(t){for(var e=0,n=this._stepStaticData.windowHide;e<n.length;e++){if(n[e].name===t.windowName){this.onComplete();break}}},TriggerStepAction.prototype.clearWindowHide=function(){0<this._stepStaticData.windowHide.length&&a.Application.view.ui.windows.removeEventListener(p.WINDOW_HIDED,this.onWindowHided.bind(this))},TriggerStepAction.prototype.subscribeEvent=function(){for(var t=0,e=this._stepStaticData.event;t<e.length;t++){var n=e[t];a.Application.model.guides.addEventListener(this._eventsMap[n.name],this.onComplete.bind(this))}},TriggerStepAction.prototype.clearEvent=function(){for(var t=0,e=this._stepStaticData.event;t<e.length;t++){var n=e[t];a.Application.model.guides.removeEventListener(this._eventsMap[n.name],this.onComplete.bind(this))}},TriggerStepAction.prototype.interrupt=function(){e.prototype.interrupt.call(this),this.clear()},TriggerStepAction.prototype.clear=function(){if(this._cleared)throw Error("Trigger already cleared!");this._cleared=!0,this.clearReady(),this.clearTimers(),this.clearClick(),this.clearWindowShow(),this.clearUpgradeWindowShow(),this.clearWindowHide(),this.clearEvent()},TriggerStepAction}(n.GuideAction);e.TriggerStepAction=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(101),n(257)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function GuideStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(GuideStepAction,t),GuideStepAction.prototype.execute=function(){this._queue=new r.StepActionQueue(this.injectData,this._stepStaticData.guideSteps.concat()),this.insertEvents(),this._queue.addEventListener(r.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this._queue.process()},GuideStepAction.prototype.insertEvents=function(){var t=new i.GuideStepStaticData({tagName:"event",type:"start",stepId:this._stepStaticData.id,queueId:this.injectData.guideId});this._queue.stepsData.unshift(t);var e=new i.GuideStepStaticData({tagName:"event",type:"finish",stepId:this._stepStaticData.id,queueId:this.injectData.guideId});this._queue.stepsData.push(e)},GuideStepAction.prototype.onQueueCompleted=function(){this._queue.removeEventListener(r.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this._queue.revert(),this.complete()},GuideStepAction.prototype.interrupt=function(){t.prototype.interrupt.call(this),this._queue.removeEventListener(r.StepActionQueue.EVENT_COMPLETE,this.onQueueCompleted.bind(this)),this._queue.interrupt(),this._queue.revert()},GuideStepAction}(n.GuideAction);e.GuideStepAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0),n(78),n(32)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function SendEventStepAction(){return null!==t&&t.apply(this,arguments)||this}return s(SendEventStepAction,t),SendEventStepAction.prototype.execute=function(){switch(this._stepStaticData.type){case"start":this.sendStartEvent(this.injectData.guideId,this._stepStaticData.stepId);break;case"finish":r.GuideUtils.sendFinishEvent(this.injectData.guideId,this._stepStaticData.stepId,!1)}this.complete()},SendEventStepAction.prototype.sendStartEvent=function(t,e){i.Application.dynamic.guide.setTimestamp(t,e,i.Application.date.currentTime),i.Application.metrics.goalStarkEvent(o.StarkEventsName.TUTORIAL_STEP_START,{tid:t,sid:e})},SendEventStepAction}(n.GuideAction);e.SendEventStepAction=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0),n(374)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function FireStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(FireStepAction,t),FireStepAction.prototype.execute=function(){i.Application.model.guides.dispatchEvent(new r.GuidesModelFiredEvent("GuidesModelFiredEvent."+this._stepStaticData.type)),this.complete()},FireStepAction}(n.GuideAction);e.FireStepAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepFireStaticData(){}return GuideStepFireStaticData.parse=function(t){var e=new GuideStepFireStaticData;return e._parse(t),e},Object.defineProperty(GuideStepFireStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),GuideStepFireStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type")},GuideStepFireStaticData}();e.GuideStepFireStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(8),n(0),n(26)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function BubbleStepAction(){return null!==t&&t.apply(this,arguments)||this}return s(BubbleStepAction,t),BubbleStepAction.prototype.execute=function(){var t=new i.ViewContext({x:this._stepStaticData.x,y:this._stepStaticData.y,bindObject:this._stepStaticData.bindObject,bindAnchor:this._stepStaticData.bindAnchor,text:this._stepStaticData.text});this._viewHandle=r.Application.view.show(this._stepStaticData.type,t,o.WindowLayer.GUIDE),this.complete()},BubbleStepAction.prototype.revert=function(){t.prototype.revert.call(this),r.Application.view.hide(this._viewHandle)},BubbleStepAction}(n.GuideAction);e.BubbleStepAction=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepEventStaticData(){}return GuideStepEventStaticData.parse=function(t){var e=new GuideStepEventStaticData;return e._parse(t),e},Object.defineProperty(GuideStepEventStaticData.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepEventStaticData.prototype,"stepId",{get:function(){return this._stepId},enumerable:!0,configurable:!0}),GuideStepEventStaticData.prototype._parse=function(t){this._type=jQuery(t).attr("type"),this._stepId=jQuery(t).attr("stepId")},GuideStepEventStaticData}();e.GuideStepEventStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepHideWindowStaticData(){}return GuideStepHideWindowStaticData.parse=function(t){var e=new GuideStepHideWindowStaticData;return e._parse(t),e},Object.defineProperty(GuideStepHideWindowStaticData.prototype,"window",{get:function(){return this._window},enumerable:!0,configurable:!0}),GuideStepHideWindowStaticData.prototype._parse=function(t){this._window=jQuery(t).attr("window")},GuideStepHideWindowStaticData}();e.GuideStepHideWindowStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(44),n(0),n(413)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function SaveStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(SaveStepAction,t),SaveStepAction.prototype.execute=function(){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=i.Application.calculator.calculate(this._stepStaticData.value),n=this._stepStaticData.guideId||this.injectData.guideId,[4,i.Application.server.send(new r.GuideSetProgressAction(n,e))];case 1:return t.sent(),this.complete(),[2]}})})},SaveStepAction}(n.GuideAction);e.SaveStepAction=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function FadeStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(FadeStepAction,t),FadeStepAction.prototype.execute=function(){this._prevAlpha=i.Application.model.guides.fade,i.Application.model.guides.fade=this._stepStaticData.alpha,this.complete()},FadeStepAction.prototype.revert=function(){t.prototype.revert.call(this),i.Application.model.guides.fade=this._prevAlpha},FadeStepAction}(n.GuideAction);e.FadeStepAction=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(8),n(0),n(26),n(2)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function ArrowStepAction(){return null!==t&&t.apply(this,arguments)||this}return c(ArrowStepAction,t),ArrowStepAction.prototype.execute=function(){var t=this._stepStaticData.target;this._stepStaticData.targetLayer&&(t="windowsManager_layer_"+this._stepStaticData.targetLayer+".**."+t);var e=new i.ViewContext({bindObject:t,bindAnchor:this._stepStaticData.targetAnchor,angle:this._stepStaticData.angle,offset:this._stepStaticData.offset,x:this._stepStaticData.x,y:this._stepStaticData.y});this._viewHandle=r.Application.view.show(a.GUINames.GUIDE_ARROW,e,o.WindowLayer.GUIDE),this.complete()},ArrowStepAction.prototype.revert=function(){t.prototype.revert.call(this),r.Application.view.hide(this._viewHandle)},ArrowStepAction}(n.GuideAction);e.ArrowStepAction=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepArrowStaticData(){}return GuideStepArrowStaticData.parse=function(t){var e=new GuideStepArrowStaticData;return e._parse(t),e},Object.defineProperty(GuideStepArrowStaticData.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepArrowStaticData.prototype,"targetAnchor",{get:function(){return this._targetAnchor},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepArrowStaticData.prototype,"angle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepArrowStaticData.prototype,"targetLayer",{get:function(){return this._targetLayer},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepArrowStaticData.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepArrowStaticData.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepArrowStaticData.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),GuideStepArrowStaticData.prototype._parse=function(t){this._target=jQuery(t).attr("target"),this._targetAnchor=jQuery(t).attr("targetAnchor"),this._angle=n.Utils.parseInt(jQuery(t).attr("angle")),this._targetLayer=jQuery(t).attr("targetLayer")||"guide",this._offset=n.Utils.parseInt(jQuery(t).attr("offset")),this._x=n.Utils.parseInt(jQuery(t).attr("x")),this._y=n.Utils.parseInt(jQuery(t).attr("y"))},GuideStepArrowStaticData}();e.GuideStepArrowStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(44),n(0),n(78),n(26),n(5),n(8),n(1669),n(175)],void 0===(r=function(t,e,n,c,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=uipixi.UIContainer,i=function(n){function BringToFrontAction(){return null!==n&&n.apply(this,arguments)||this}return a(BringToFrontAction,n),BringToFrontAction.prototype.execute=function(){var t=this._stepStaticData.element;t=u.GuideUtils.getDataValue(t),this._stepStaticData.layer&&(t="windowsManager_layer_"+this._stepStaticData.layer+".**."+t);var e=u.GuideUtils.getUIContainerByPath(t);if(!e)throw Error("Guide: bringToFront:execute error "+t);c.Application.view.ui.stage.update();var n=e.getGlobalPosition();this._tempObject=new f,this._tempObject.anchor=e.anchor,this._tempObject.outside=e.outside,this._tempObject.offsetX=e.offsetX,this._tempObject.offsetY=e.offsetY,this._tempObject.height=e.height,this._tempObject.width=e.width,c.Application.view.mediatorManager.suspended=!0,c.Application.view.ui.toggleButtonsManager.listenChildren=!1,c.Application.tooltip.autoRemoveEnabled=!1;var i=e.parent;i.addChild(this._tempObject),i.swapChildren(this._tempObject,e),i.removeChild(e,!1),e.anchor="topLeft",e.outside="topLeft",e.offsetX=n.x,e.offsetY=n.y,this._tempObject.interactive=e.interactive,this._tempObject.interactiveChildren=e.interactiveChildren;var r=this._stepStaticData.interactive;if("default"!==this._stepStaticData.interactive){var o=l.Utils.parseBool(r);e.interactive=o,e.interactiveChildren=o}c.Application.view.ui.stage.getChildByName("windowsManager_layer_"+p.WindowLayer.GUIDE).addChild(e),c.Application.view.ui.toggleButtonsManager.listenChildren=!0,c.Application.view.mediatorManager.suspended=!1,c.Application.tooltip.autoRemoveEnabled=!0,this._mediator=new h.GuideBringToFrontObjectMediator(null);var a=new d.ViewContext({tempObject:this._tempObject}),s=new _.ViewHandle(e,a);this._mediator.initialize(s),this._viewObject=e,this.complete()},BringToFrontAction.prototype.revert=function(){n.prototype.revert.call(this),this._mediator.destroy(),c.Application.view.mediatorManager.suspended=!0,c.Application.view.ui.toggleButtonsManager.listenChildren=!1,c.Application.tooltip.autoRemoveEnabled=!1;var t=this._viewObject;this._viewObject.parent.removeChild(t,!1);var e=this._tempObject.parent;e.addChild(t),e.swapChildren(t,this._tempObject),e.removeChild(this._tempObject,!1),t.anchor=this._tempObject.anchor,t.outside=this._tempObject.outside,t.offsetX=this._tempObject.offsetX,t.offsetY=this._tempObject.offsetY,t.interactive=this._tempObject.interactive,t.interactiveChildren=this._tempObject.interactiveChildren,c.Application.view.ui.toggleButtonsManager.listenChildren=!0,c.Application.view.mediatorManager.suspended=!1,c.Application.tooltip.autoRemoveEnabled=!0},BringToFrontAction}(n.GuideAction);e.BringToFrontAction=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=uipixi.UIEvent,o=function(e){function GuideBringToFrontObjectMediator(){return null!==e&&e.apply(this,arguments)||this}return a(GuideBringToFrontObjectMediator,e),GuideBringToFrontObjectMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._tempObject=this._showData.tempObject,this.registerListener(n.Application.view.ui.stage,r.STAGE_RESIZE,this.onStageResize.bind(this))},GuideBringToFrontObjectMediator.prototype.onStageResize=function(){n.Application.view.ui.stage.update();var t=this._tempObject.getGlobalPosition();this._container.offsetX=t.x,this._container.offsetY=t.y},GuideBringToFrontObjectMediator}(i.DisplayObjectContainerMediator);e.GuideBringToFrontObjectMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepBringToFrontStaticData(){}return GuideStepBringToFrontStaticData.parse=function(t){var e=new GuideStepBringToFrontStaticData;return e._parse(t),e},Object.defineProperty(GuideStepBringToFrontStaticData.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepBringToFrontStaticData.prototype,"interactive",{get:function(){return this._interactive},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepBringToFrontStaticData.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),GuideStepBringToFrontStaticData.prototype._parse=function(t){this._element=jQuery(t).attr("element"),this._interactive=jQuery(t).attr("interactive")||"default",this._layer=jQuery(t).attr("layer")||""},GuideStepBringToFrontStaticData}();e.GuideStepBringToFrontStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(78),n(44)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function DisableUIElementStepAction(){return null!==t&&t.apply(this,arguments)||this}return a(DisableUIElementStepAction,t),DisableUIElementStepAction.prototype.execute=function(){var t=n.GuideUtils.getDataValue(this._stepStaticData.element);if(this._stepStaticData.layer&&(t="windowsManager_layer_"+this._stepStaticData.layer+".**."+t),this.viewObject=n.GuideUtils.getUIContainerByPath(t),!this.viewObject)throw Error("DisableUIElementStepAction: viewObject is null");this._origProperties={interactive:this.viewObject.interactive,interactiveChildren:this.viewObject.interactiveChildren},this.viewObject.interactive=!1,this.viewObject.interactiveChildren=!1,this.complete()},DisableUIElementStepAction.prototype.revert=function(){t.prototype.revert.call(this),this.viewObject.interactive=this._origProperties.interactive,this.viewObject.interactiveChildren=this._origProperties.interactiveChildren},DisableUIElementStepAction}(i.GuideAction);e.DisableUIElementStepAction=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function GuideStepDisableUIElementStaticData(){}return GuideStepDisableUIElementStaticData.parse=function(t){var e=new GuideStepDisableUIElementStaticData;return e._parse(t),e},Object.defineProperty(GuideStepDisableUIElementStaticData.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(GuideStepDisableUIElementStaticData.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),GuideStepDisableUIElementStaticData.prototype._parse=function(t){this._element=jQuery(t).attr("element"),this._layer=jQuery(t).attr("layer")||""},GuideStepDisableUIElementStaticData}();e.GuideStepDisableUIElementStaticData=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(44),n(4),n(258),n(0)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function GetPresentStepAction(){return null!==t&&t.apply(this,arguments)||this}return s(GetPresentStepAction,t),GetPresentStepAction.prototype.execute=function(){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return o.Application.model.presents.getPresent(this._stepStaticData.id).isGot?[3,2]:[4,i.ElkaCore.instance.promiseManager.ask(new r.PresentGetPromise(this._stepStaticData.id,!1))];case 1:t.sent(),t.label=2;case 2:return this.complete(),[2]}})})},GetPresentStepAction}(n.GuideAction);e.GetPresentStepAction=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function GuideStepGetPresentStaticData(){}return GuideStepGetPresentStaticData.parse=function(t){var e=new GuideStepGetPresentStaticData;return e._parse(t),e},Object.defineProperty(GuideStepGetPresentStaticData.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),GuideStepGetPresentStaticData.prototype._parse=function(t){this._id=n.Utils.parseInt(jQuery(t).attr("id"))},GuideStepGetPresentStaticData}();e.GuideStepGetPresentStaticData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1676),n(0),n(490)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function GuideBubbleDraggableMediator(){return null!==t&&t.apply(this,arguments)||this}return a(GuideBubbleDraggableMediator,t),GuideBubbleDraggableMediator.prototype.onRelease=function(){t.prototype.onRelease.call(this),i.Application.dynamic.guide.dispatchEvent(new r.GuideAdminEvent(r.GuideAdminEvent.MOVE_BUBBLE))},GuideBubbleDraggableMediator}(n.DraggableContainerMediator);e.GuideBubbleDraggableMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=uipixi.GestureEvent,o=PIXI.Point,a=function IDraggableContainerMapData(){};e.IDraggableContainerMapData=a;var s=function(n){function DraggableContainerMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._keyPressed=!1,t._drag=!1,t}return c(DraggableContainerMediator,n),DraggableContainerMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this._mapData?this._mapData.eventTarget:void 0;this._eventTarget=e?this.child(e):this._container,this._logPosition=!(this._mapData&&this._mapData.customLog),this._eventTarget&&(this._keyDownHandler=this.onKeyDown.bind(this),document.addEventListener("keydown",this._keyDownHandler),this._keyUpHandler=this.onKeyUp.bind(this),document.addEventListener("keyup",this._keyUpHandler),this.registerListener(this._eventTarget,r.POINTER_OVER,this.onOver.bind(this)),this.registerListener(this._eventTarget,r.POINTER_OUT,this.onOut.bind(this)))},DraggableContainerMediator.prototype.onOver=function(){this._isOver=!0},DraggableContainerMediator.prototype.onOut=function(){this._isOver=!1},DraggableContainerMediator.prototype.onKeyDown=function(t){this._isOver&&(this._keyPressed||"Control"!=t.key||(this._keyPressed=!0,this.registerListener(i.Application.view.ui.stage,r.POINTER_MOVE,this.onMouseMove.bind(this))))},DraggableContainerMediator.prototype.onKeyUp=function(t){this._keyPressed&&"Control"==t.key&&(this.unregisterListener(i.Application.view.ui.stage,r.POINTER_MOVE,this.onMouseMove.bind(this)),this._drag&&(this._drag=!1,this._logPosition&&i.Application.debug.addLog("position",'offsetX="'+this._container.offsetX+'" offsetY="'+this._container.offsetY+'"'),this.onRelease()),this._keyPressed=!1)},DraggableContainerMediator.prototype.onRelease=function(){},DraggableContainerMediator.prototype.onMouseMove=function(t){var e=t.data;this._drag||this.startDrag(e.data.global.clone());var n=e.data.global;this._container.offsetX=this._startDragOffsets.x+Math.round(n.x-this._startDragPoint.x),this._container.offsetY=this._startDragOffsets.y+Math.round(n.y-this._startDragPoint.y)},DraggableContainerMediator.prototype.startDrag=function(t){this._drag=!0,this._startDragPoint=t,this._startDragOffsets=new o(this._container.offsetX,this._container.offsetY)},DraggableContainerMediator.prototype.destroy=function(){this._eventTarget&&(document.removeEventListener("keydown",this._keyDownHandler),document.removeEventListener("keyup",this._keyUpHandler)),n.prototype.destroy.call(this)},DraggableContainerMediator}(n.DisplayObjectContainerMediator);e.DraggableContainerMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(410),n(0),n(5),n(490)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function GuideBubbleMediator(){return null!==e&&e.apply(this,arguments)||this}return s(GuideBubbleMediator,e),GuideBubbleMediator.prototype.initialize=function(t){(e.prototype.initialize.call(this,t),void 0!==this._showData.text)&&(this.child("textLabel").text=i.Application.localization.localize(this._showData.text,{username:i.Application.profiles.current.isDefault?"":", "+i.Application.profiles.current.firstName,gender:i.Application.profiles.current.isMale}));this.setSide(),this.setAnimation(),this.registerListener(i.Application.dynamic.guide,o.GuideAdminEvent.MOVE_BUBBLE,this.onMoveBubble.bind(this))},GuideBubbleMediator.prototype.setSide=function(){var t=this._displayObject.getGlobalPosition().x+.5*this._container.width;this._container.currentState=t<.5*i.Application.view.ui.stage.width?"dedOnLeftSide":"dedOnRightSide"},GuideBubbleMediator.prototype.onMoveBubble=function(){this.setSide();var t=this.calculatePosition();t.x=this._displayObject.offsetX-t.x+r.Utils.parseInt(this._showData.x,0),t.y=this._displayObject.offsetY-t.y+r.Utils.parseInt(this._showData.y,0),i.Application.debug.addLog("position",'bubble x="'+t.x+'" y="'+t.y+'"')},GuideBubbleMediator.prototype.setAnimation=function(){var t=this.child("guideBubble"),e=t.offsetY;this._animation=i.Application.animation.animate(t,"guideBubbleAppear",{targetDed:this.child("dedImage"),targetY:e,startY:e+5})},GuideBubbleMediator.prototype.destroy=function(){this._animation.stop(),e.prototype.destroy.call(this)},GuideBubbleMediator}(n.GuideUIElementMediator);e.GuideBubbleMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(48)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function GuideDividerMediator(){return null!==e&&e.apply(this,arguments)||this}return a(GuideDividerMediator,e),GuideDividerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._background=this.child("background"),this.updateVisible(),this.updateAlpha(),this.registerListener(i.Application.model.guides,r.GuidesModelEvent.FADE_CHANGED,this.updateAlpha.bind(this)),this.registerListener(i.Application.model.guides,r.GuidesModelEvent.LOCK_SCREEN_CHANGED,this.updateVisible.bind(this))},GuideDividerMediator.prototype.updateAlpha=function(){this.clearAnimation(),this._animation=i.Application.animation.animate(this._background,"guideDividerAlpha",{alpha:i.Application.model.guides.fade})},GuideDividerMediator.prototype.updateVisible=function(){this.clearAnimation(),this._background.visible=i.Application.model.guides.lockScreen},GuideDividerMediator.prototype.clearAnimation=function(){this._animation&&(this._animation.stop(),this._animation=null)},GuideDividerMediator.prototype.destroy=function(){this.clearAnimation(),e.prototype.destroy.call(this)},GuideDividerMediator}(n.DisplayObjectContainerMediator);e.GuideDividerMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(412),n(50)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function GuideSkipButtonMediator(){return null!==t&&t.apply(this,arguments)||this}return a(GuideSkipButtonMediator,t),GuideSkipButtonMediator.prototype.onButton=function(t){new n.SkipGuideCommand(this._showData.guideId,this._showData.save,this._showData.value).execute()},GuideSkipButtonMediator}(i.SimpleButtonMediator);e.GuideSkipButtonMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(0),n(2),n(1681),n(1682),n(22),n(405),n(1683),n(491),n(1685),n(1686),n(62)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=function(t){function ClanModule(){return null!==t&&t.apply(this,arguments)||this}return m(ClanModule,t),ClanModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this))},ClanModule.prototype.onPreloadModule=function(t){o.Application.dynamic.user.clan.idPrerelease&&(this._clanModel=new _.ClanModel,o.Application.view.mapMediator(""+a.GUINames.CLAN_WINDOW,s.ClanWindowMediator),o.Application.view.mapMediator(""+a.GUINames.CLAN_WINDOW,f.SimplePopupAnimationMediator),o.Application.view.mapMediator(a.GUINames.CLAN_WINDOW+".usersContainer.unionMembersScrollContainer.unionMembersList.*",c.ClanWindowListItemMediator,this._clanModel),u.CommandMap.map(p.GetPrereleaseClanPromise,l.GetPrereleaseClanCommand),u.CommandMap.map(d.SendInviteToClanMemberPromise,h.SendInviteToClanMemberCommand,this._clanModel))},ClanModule}(n.Module);e.ClanModule=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2),n(33)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function ClanWindowMediator(){return null!==e&&e.apply(this,arguments)||this}return c(ClanWindowMediator,e),ClanWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.getChildren(),this.setParams()},ClanWindowMediator.prototype.getChildren=function(){this._unionName=this.child("unionName"),this._list=this.child("unionMembersList")},ClanWindowMediator.prototype.setParams=function(){this._unionName.text=this._showData.name,this._list.addItems(this._showData.members);var t=this._list.items.length;if(i.Application.social.platformIs(a.PlatformType.FB)&&t!==this._showData.memberCount)for(var e=0;e<this._showData.memberCount-t;e++)this._list.addItem({});i.Application.tooltip.addTooltip(this.child("infoButton"),r.TooltipAnchor.Bottom,o.GUINames.TEXT_TOOLTIP,{text:"CLAN_WINDOW_TOOLTIP"})},ClanWindowMediator}(n.DisplayObjectContainerMediator);e.ClanWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(40),n(0),n(491),n(4),n(492),n(16)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u,p,l=uipixi.GestureEvent,d=function(e){function ClanWindowListItemMediator(){return null!==e&&e.apply(this,arguments)||this}return h(ClanWindowListItemMediator,e),ClanWindowListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._levelLabel=this.child("levelLabel"),this._roleLabel=this.child("roleLabel"),this.checkState(),this.setParams(),this.setupFrame(),this.registerListener(this._mapData,s.ClanModelEvent.CHANGED,this.onModelChanged.bind(this))},ClanWindowListItemMediator.prototype.setupFrame=function(){var t=r.Application.model.ratings.getBestPlace(this._showData.sUserId),e=r.Application.model.ratings.getFrameResource(64,t);this._loadableFrame=new c.LoadableImage(this.child("frame"),e)},ClanWindowListItemMediator.prototype.onModelChanged=function(t){this._showData.sUserId===t.sUserId&&(this._state=u.INVITED,this._container.currentState=this._state)},ClanWindowListItemMediator.prototype.checkState=function(){if(this._showData.sUserId){if(this._showData.sUserId!==r.Application.dynamic.user.sUserId)return r.Application.dynamic.friends.getItem(this._showData.sUserId)&&this._showData.level?void(this._state=u.IN_GAME):r.Application.profiles.isFriend(this._showData.sUserId)?this._mapData.checkSUserId(this._showData.sUserId)?void(this._state=u.INVITED):void(this._state=u.NOT_IN_GAME_FRIEND):void(this._state=u.NOT_IN_GAME_CLAN_FRIEND);this._state=u.MY}else this._state=u.NOT_IN_GAME_CLAN_FRIEND},ClanWindowListItemMediator.prototype.setParams=function(){if(this._container.currentState=this._state,!this._showData.sUserId)return this._roleLabel.visible=!1,void(this._profileRenderer=(new i.ProfileRenderer).initialize(r.Application.profiles.defaultProfile,this._container));var t;switch(this.loadProfile(),this._showData.role){case 1:t="CLAN_WINDOW_ROLE_1";break;case 2:t="CLAN_WINDOW_ROLE_2";break;case 3:t="CLAN_WINDOW_ROLE_3"}switch(this._roleLabel.visible=!0,this._roleLabel.text=r.Application.localization.localize(t),this._state){case u.MY:case u.IN_GAME:this._levelLabel.text=this._showData.level.toString();break;case u.NOT_IN_GAME_FRIEND:this.registerListener(this.child("inviteButton"),l.POINTER_TAP,this.onButton.bind(this))}},ClanWindowListItemMediator.prototype.loadProfile=function(){return _(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,r.Application.profiles.getProfiles([this._showData.sUserId])];case 1:return e=t.sent(),this._cancellationToken.requested?[2]:(e[0]&&(this._profileRenderer=(new i.ProfileRenderer).initialize(e[0],this._container)),[2])}})})},ClanWindowListItemMediator.prototype.onButton=function(){return _(this,void 0,void 0,function(){return f(this,function(t){return a.ElkaCore.instance.promiseManager.ask(new o.SendInviteToClanMemberPromise(this._showData.sUserId)),[2]})})},ClanWindowListItemMediator.prototype.destroy=function(){this._loadableFrame&&this._loadableFrame.destroy(),this._profileRenderer&&this._profileRenderer.destroy(),e.prototype.destroy.call(this)},ClanWindowListItemMediator}(n.DisplayObjectContainerMediator);e.ClanWindowListItemMediator=d,(p=u=e.ClanWindowListItemState||(e.ClanWindowListItemState={})).MY="my",p.IN_GAME="inGame",p.INVITED="invited",p.NOT_IN_GAME_FRIEND="notInGameFriend",p.NOT_IN_GAME_CLAN_FRIEND="notInGameClanFriend"}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1684),n(0),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function GetPrereleaseClanCommand(){return null!==t&&t.apply(this,arguments)||this}return c(GetPrereleaseClanCommand,t),GetPrereleaseClanCommand.prototype.execute=function(){return u(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,r.Application.server.send(new i.GetPrereleaseClanAction)];case 1:return e=t.sent(),r.Application.view.show(o.GUINames.CLAN_WINDOW,new a.ViewContext({name:e.output.name,members:e.output.members,memberCount:e.output.memberCount})),[2]}})})},GetPrereleaseClanCommand}(n.CommandBase);e.GetPrereleaseClanCommand=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function GetPrereleaseClanAction(){var t=e.call(this)||this;return t.action="getPrerelease",t.controller="clan",t.input=new i.ActionInput({}),t.output=new o,t}return a(GetPrereleaseClanAction,e),GetPrereleaseClanAction}(n.Action);e.GetPrereleaseClanAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.name=t.data.name,this.memberCount=t.data.memberCount,this.members=[];var e=t.data.members;for(var n in e){var i=e[n];this.members.push({sUserId:i.social_id,role:i.role,level:i.level})}},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function SendInviteToClanMemberCommand(){return null!==t&&t.apply(this,arguments)||this}return a(SendInviteToClanMemberCommand,t),SendInviteToClanMemberCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=i.Application.localization.localize("CLAN_WINDOW_INVITE_TEXT"),[4,i.Application.social.invite([n.sUserId],e)];case 1:return t.sent(),this._data.addSUserId(n.sUserId),[2]}})})},SendInviteToClanMemberCommand}(n.CommandBase);e.SendInviteToClanMemberCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(492)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function ClanModel(){var t=e.call(this)||this;return t._sUserIds=[],t}return a(ClanModel,e),ClanModel.prototype.addSUserId=function(t){this._sUserIds.push(t),this.dispatchEvent(new n.ClanModelEvent(n.ClanModelEvent.CHANGED,t))},ClanModel.prototype.checkSUserId=function(t){for(var e=0,n=this._sUserIds;e<n.length;e++){if(t===n[e])return!0}return!1},ClanModel}(uipixi.BaseEventTarget);e.ClanModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),y=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},m=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(18),n(4),n(31),n(0),n(242),n(1688),n(22),n(446),n(1689),n(1690),n(493)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=function(e){function PendingAwardModule(){var t=null!==e&&e.apply(this,arguments)||this;return t._parsers=new core.Map,t}return f(PendingAwardModule,e),PendingAwardModule.prototype.initialize=function(t){return y(this,void 0,void 0,function(){return m(this,function(t){return a.Application.operation.addAllowingRule(new o.OccurrenceBeginningLineRule("/pendingAward")),r.ElkaCore.instance.promiseManager.ask(new i.RegisterModuleLoaderPromise(this)),[2]})})},PendingAwardModule.prototype.onPreloadModule=function(t){this.initParsers(),this.mapCommands()},PendingAwardModule.prototype.initParsers=function(){this._parsers.set(s.PendingAwardType.VIRAL,c.PendingAwardParsers.parseViralRefAward),this._parsers.set(s.PendingAwardType.ROULETTE,c.PendingAwardParsers.parseRouletteAward),this._parsers.set(s.PendingAwardType.HAPPY_NEW_YEAR,c.PendingAwardParsers.parseHappyNewYear),this._parsers.set(s.PendingAwardType.ADMIN,c.PendingAwardParsers.parseAdminAward),this._parsers.set(s.PendingAwardType.BONUS_LINK,c.PendingAwardParsers.parseBonusLinkAward),this._parsers.set(s.PendingAwardType.VK_NEW_YEAR_GIFT_PROMO,c.PendingAwardParsers.parseVkNewYearGiftPromoAward)},PendingAwardModule.prototype.mapCommands=function(){u.CommandMap.map(h.GetPendingAwardPromise,d.GetPendingAwardCommand),u.CommandMap.map(p.ShowPendingAwardPromise,l.ShowPendingAwardCommand,{parsers:this._parsers,pendingData:a.Application.dynamic.user.pendingAwards})},PendingAwardModule}(n.Module);e.PendingAwardModule=_}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0),n(2)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function parseSimpleAward(t,e,n){return{pendingAward:t,windowId:r.GUINames.AWARDS_WINDOW,showData:{baseAward:i.Application.award.convertObjectToCalculated(t.award),title:i.Application.localization.localize(e),description:i.Application.localization.localize(n)}}}t.parseViralRefAward=function parseViralRefAward(t){return parseSimpleAward(t,"PENDING_AWARD_VIRAL_REF_TITLE","PENDING_AWARD_VIRAL_REF_MESSAGE")},t.parseRouletteAward=function parseRouletteAward(t){return parseSimpleAward(t,"PENDING_AWARD_ROULETTE_REF_TITLE","PENDING_AWARD_ROULETTE_REF_MESSAGE")},t.parseAdminAward=function parseAdminAward(t){return parseSimpleAward(t,"PENDING_AWARD_VIRAL_REF_TITLE",t.params.message)},t.parseHappyNewYear=function parseHappyNewYear(t){var e={baseAward:i.Application.award.convertObjectToCalculated(t.award).awards[0],params:t.params};return{resources:["happyNewYear"],pendingAward:t,windowId:r.GUINames.HAPPY_NEW_YEAR_WINDOW,showData:e}},t.parseBonusLinkAward=function parseBonusLinkAward(t){return parseSimpleAward(t,"PENDING_AWARD_BONUS_LINK_TITLE","PENDING_AWARD_BONUS_LINK_MESSAGE")},t.parseVkNewYearGiftPromoAward=function parseVkNewYearGiftPromoAward(t){return parseSimpleAward(t,"PENDING_AWARD_VK_NEW_YEAR_GIFT_PROMO_TITLE","PENDING_AWARD_VK_NEW_YEAR_GIFT_PROMO_MESSAGE")}}(e.PendingAwardParsers||(e.PendingAwardParsers={}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(242),n(0),n(8),n(4),n(493),n(35),n(36)],void 0===(r=function(t,e,n,a,s,c,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowPendingAwardCommand(){return null!==t&&t.apply(this,arguments)||this}return h(ShowPendingAwardCommand,t),ShowPendingAwardCommand.prototype.execute=function(o){return _(this,void 0,void 0,function(){var e,n,i,r;return f(this,function(t){switch(t.label){case 0:return e=o.type,(n=this.getPendingAward(e))?(e===a.PendingAwardType.ROULETTE&&s.Application.debug.sendLog("Рулетка в pending award!","",l.LogFlag.CLIENT,d.LogLevel.Warning),i=this._data.parsers.get(e),(r=i(n)).resources?[4,s.Application.resources.getResources(r.resources,!0)]:[3,2]):(o.resolve({shown:!1}),[2]);case 1:t.sent(),t.label=2;case 2:return[4,s.Application.view.show(r.windowId,new c.ViewContext(r.showData)).onClose];case 3:return t.sent(),[4,u.ElkaCore.instance.promiseManager.ask(new p.GetPendingAwardPromise(n.id))];case 4:return t.sent(),o.resolve({shown:!0}),[2]}})})},ShowPendingAwardCommand.prototype.getPendingAward=function(t){for(var e=0,n=this._data.pendingData.awards.items;e<n.length;e++){var i=n[e];if(i.type===t&&!this.pendingAwardIsExpired(i))return i}return null},ShowPendingAwardCommand.prototype.pendingAwardIsExpired=function(t){return 0!==t.expire&&t.expire<=s.Application.date.currentTime},ShowPendingAwardCommand}(n.CommandBase);e.ShowPendingAwardCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1691)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function GetPendingAwardCommand(){return null!==t&&t.apply(this,arguments)||this}return a(GetPendingAwardCommand,t),GetPendingAwardCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.GetPendingAwardAction(n.awardId))];case 1:return e=t.sent(),i.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},GetPendingAwardCommand}(n.CommandBase);e.GetPendingAwardCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function GetPendingAwardAction(t){var e=n.call(this)||this;return e.action="getAward",e.controller="pendingAward",e.input=new i.ActionInput({awardId:t}),e.output=new o,e}return a(GetPendingAwardAction,n),GetPendingAwardAction}(n.Action);e.GetPendingAwardAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),v=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},b=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(4),n(18),n(0),n(1693),n(31),n(22),n(258),n(1696),n(449),n(1698),n(2),n(1699),n(1700)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=function(t){function PresentsModule(){return null!==t&&t.apply(this,arguments)||this}return m(PresentsModule,t),PresentsModule.prototype.initialize=function(t){return v(this,void 0,void 0,function(){return b(this,function(t){return i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),o.Application.operation.addAllowingRule(new s.OccurrenceBeginningLineRule("/present")),[2]})})},PresentsModule.prototype.onPreloadModule=function(t){o.Application.model.presents=new a.PresentsModel(o.Application.dynamic.user.presents,o.Application.static.data.presents),o.Application.view.mapMediator(h.GUINames.NEWS_PRESENTS_WINDOW,_.NewsPresentsWindowMediator),o.Application.view.mapMediator(h.GUINames.NEWS_PRESENTS_WINDOW+".awardsList.*",f.NewsPresentsWindowAwardItemMediator),c.CommandMap.map(u.PresentGetPromise,p.PresentGetCommand),c.CommandMap.map(l.ShowNewsPresentsOnStartPromise,d.ShowNewsPresentsOnStartCommand)},PresentsModule}(n.Module);e.PresentsModule=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1694),n(37)],void 0===(r=function(t,e,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(s){function PresentsModel(t,e){var n=s.call(this)||this;n._presentsDynamicData=t,n._presentsStaticData=e,n._presentsMap=new core.Map;for(var i=0,r=e.present.items;i<r.length;i++){var o=r[i],a=n._presentsDynamicData.getItem(o.id.toString());n._presentsMap.set(o.id,new c.PresentModel(o,a?a.reciptTime:0))}return n._presentsDynamicData.addEventListener(u.ItemCollectionEvent.ITEM_ADDED,n.onItemAdded.bind(n)),n}return a(PresentsModel,s),PresentsModel.prototype.onItemAdded=function(t){this.getPresent(parseInt(t.item.id)).got(t.item.reciptTime)},PresentsModel.prototype.getPresent=function(t){return this._presentsMap.get(t)},PresentsModel.prototype.getAutoPresents=function(){var e=[];return this._presentsMap.forEach(function(t){t.auto&&e.push(t)}),e},PresentsModel}(uipixi.BaseEventTarget);e.PresentsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1695),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(a){function PresentModel(t,e){var n=a.call(this)||this;n._staticData=t;for(var i=0,r=n._staticData.requirements.requirement;i<r.length;i++){var o=r[i];"{date.current}"===o.data&&(n._timeRequirement=o)}return n._receiptTime=e,n}return s(PresentModel,a),PresentModel.prototype.got=function(t){this._receiptTime=t,this.dispatchEvent(new n.PresentModelEvent(n.PresentModelEvent.GOT))},Object.defineProperty(PresentModel.prototype,"isGot",{get:function(){return 0<this._receiptTime},enumerable:!0,configurable:!0}),Object.defineProperty(PresentModel.prototype,"staticData",{get:function(){return this._staticData},enumerable:!0,configurable:!0}),Object.defineProperty(PresentModel.prototype,"timeRequirement",{get:function(){return this._timeRequirement},enumerable:!0,configurable:!0}),Object.defineProperty(PresentModel.prototype,"auto",{get:function(){return this._staticData.auto},enumerable:!0,configurable:!0}),Object.defineProperty(PresentModel.prototype,"requirements",{get:function(){return this._staticData.requirements},enumerable:!0,configurable:!0}),PresentModel.prototype.getAwards=function(){return i.Application.award.calculate(this._staticData.awards)},PresentModel}(uipixi.BaseEventTarget);e.PresentModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function PresentModelEvent(){return null!==t&&t.apply(this,arguments)||this}return o(PresentModelEvent,t),PresentModelEvent.GOT="PresentModelEvent.GOT",PresentModelEvent}(uipixi.BaseEvent);e.PresentModelEvent=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(1697),n(2),n(8)],void 0===(r=function(t,e,r,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function PresentGetCommand(){return null!==t&&t.apply(this,arguments)||this}return c(PresentGetCommand,t),PresentGetCommand.prototype.execute=function(i){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return[4,r.Application.server.send(new o.PresentGetAction(i.presentId))];case 1:return e=t.sent(),i.showAwardWindow?(n={baseAward:r.Application.award.convertObjectToCalculated(e.output.award),title:"ELKA2019_AWARD_WINDOW_TITLE",description:"ELKA2019_AWARD_WINDOW_DESCRIPTION"},i.awardWindowOptions&&(i.awardWindowOptions.title&&(n.title=i.awardWindowOptions.title),i.awardWindowOptions.description&&(n.description=i.awardWindowOptions.description),i.awardWindowOptions.wallpostId&&(n.wallpostId=i.awardWindowOptions.wallpostId)),n.title=r.Application.localization.localize(n.title),n.description=r.Application.localization.localize(n.description),[4,r.Application.view.show(a.GUINames.AWARDS_WINDOW,new s.ViewContext(n)).onClose]):[3,3];case 2:t.sent(),t.label=3;case 3:return r.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},PresentGetCommand}(n.CommandBase);e.PresentGetCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function PresentGetAction(t){var e=n.call(this)||this;return e.action="get",e.controller="present",e.input=new i.ActionInput({presentId:t}),e.output=new o,e}return a(PresentGetAction,n),PresentGetAction}(n.Action);e.PresentGetAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2),n(8),n(4),n(258)],void 0===(r=function(t,e,n,s,c,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowNewsPresentsOnStartCommand(){return null!==t&&t.apply(this,arguments)||this}return a(ShowNewsPresentsOnStartCommand,t),ShowNewsPresentsOnStartCommand.prototype.execute=function(a){return d(this,void 0,void 0,function(){var e,n,i,r,o;return h(this,function(t){switch(t.label){case 0:e=s.Application.model.presents.getAutoPresents(),n=!1,i=0,r=e,t.label=1;case 1:return i<r.length?(o=r[i]).isGot||!s.Application.requirements.check(o.requirements)?[3,4]:[4,s.Application.view.show(c.GUINames.NEWS_PRESENTS_WINDOW,new u.ViewContext(o)).onClose]:[3,5];case 2:return t.sent(),[4,p.ElkaCore.instance.promiseManager.ask(new l.PresentGetPromise(o.staticData.id,!1))];case 3:t.sent(),n=!0,t.label=4;case 4:return i++,[3,1];case 5:return a.resolve({shown:n}),[2]}})})},ShowNewsPresentsOnStartCommand}(n.CommandBase);e.ShowNewsPresentsOnStartCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(16)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,i=function(i){function NewsPresentsWindowMediator(){return null!==i&&i.apply(this,arguments)||this}return s(NewsPresentsWindowMediator,i),NewsPresentsWindowMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._present=this._showData,this.child("titleLabel").text=r.Application.localization.localize(this._present.staticData.view.title),this.child("descriptionLabel").text=r.Application.localization.localize(this._present.staticData.view.description),this.child("awardsList").addItems(this._present.getAwards().awards);var e=this.child("fairyImage");this._loadableImage=new o.LoadableImage(e,e.resource),this._wallpostCheckBox=this.child("wallpostCheckBox"),this._wallpostCheckBox.selected=!1,this._present.staticData.wallpostId||(this._wallpostCheckBox.visible=!1);var n=this.child("continueButton");this.registerListener(n,a.POINTER_TAP,this.onContinue.bind(this))},NewsPresentsWindowMediator.prototype.onContinue=function(){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._wallpostCheckBox.selected?[4,r.Application.social.post(this._present.staticData.wallpostId)]:[3,2];case 1:if(t.sent(),this._cancellationToken.requested)return[2];t.label=2;case 2:return r.Application.view.hide(this.viewHandle),[2]}})})},NewsPresentsWindowMediator.prototype.destroy=function(){this._loadableImage.destroy(),i.prototype.destroy.call(this)},NewsPresentsWindowMediator}(n.DisplayObjectContainerMediator);e.NewsPresentsWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(14)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function NewsPresentsWindowAwardItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(NewsPresentsWindowAwardItemMediator,e),NewsPresentsWindowAwardItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container.currentState=this._showData.type===r.AwardType.TOY?"gold":"default",this._awardRenderer=(new i.AwardRenderer).initialize(this._showData,this._container,{iconId:64})},NewsPresentsWindowAwardItemMediator.prototype.destroy=function(){this._awardRenderer.destroy(),e.prototype.destroy.call(this)},NewsPresentsWindowAwardItemMediator}(n.DisplayObjectContainerMediator);e.NewsPresentsWindowAwardItemMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,j=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),x=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},R=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(0),n(22),n(4),n(1702),n(1704),n(494),n(495),n(1706),n(1707),n(259),n(1708),n(1709),n(1710),n(499),n(1712),n(500),n(1713),n(496),n(406),n(1715),n(18),n(1716),n(447),n(1717),n(1718),n(502),n(2),n(62)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E,A,M,D,I,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var T=function(t){function RatingModule(){return null!==t&&t.apply(this,arguments)||this}return j(RatingModule,t),RatingModule.prototype.initialize=function(t){return x(this,void 0,void 0,function(){return R(this,function(t){return o.ElkaCore.instance.promiseManager.ask(new S.RegisterModuleLoaderPromise(this)),[2]})})},RatingModule.prototype.onPreloadModule=function(t){return this.initData(),this.mapMediators(),this.attachPromises(),Promise.resolve()},RatingModule.prototype.mapMediators=function(){var t={ratingsData:this._ratingsData,listItems:[]};i.Application.view.mapMediator(I.GUINames.RATING_WINDOW,a.RatingWindowMediator,t),i.Application.view.mapMediator(I.GUINames.RATING_WINDOW,C.SimplePopupAnimationMediator),i.Application.view.mapMediator(I.GUINames.RATING_WINDOW+".ratingsLists.ratingsInfoList.*",m.RatingListItemMediator),i.Application.view.mapMediator(I.GUINames.RATING_WINDOW+".ratingsLists.typeToggleButtons.*",h.RatingTabButtonMediator),i.Application.view.mapMediator(I.GUINames.RATING_WINDOW+".ratingsLists.ratingsToggleButtons.*",h.RatingTabButtonMediator),i.Application.view.mapMediator(I.GUINames.RATING_WINDOW+".ratingsLists.navigation",_.RatingNavigationMediator),i.Application.view.mapMediator(I.GUINames.RATING_WINDOW,P.RatingFriendsPageNavigationMediator,t),i.Application.view.mapMediator(I.GUINames.RATING_AWARD_WINDOW,M.RatingAwardWindowMediator),i.Application.view.mapMediator(I.GUINames.RATING_AWARD_WINDOW+".awardList.*",D.RatingAwardMediator)},RatingModule.prototype.attachPromises=function(){r.CommandMap.map(c.RatingGetPromise,s.RatingGetCommand,this._ratingsData),r.CommandMap.map(v.RatingMyRankPromise,b.RatingMyRankCommand,this._ratingsData),r.CommandMap.map(y.RatingFriendsPromise,f.RatingFriendsCommand,this._ratingsData),r.CommandMap.map(d.RatingGetProfilesPromise,l.RatingGetProfilesCommand),r.CommandMap.map(w.ShowRatingWindowPromise,O.ShowRatingWindowCommand,this._ratingsData),r.CommandMap.map(E.ShowRatingOnStartPromise,A.ShowRatingOnStartCommand,this._ratingsData)},RatingModule.prototype.initData=function(){i.Application.model.ratings=this._ratingsData=new u.RatingsData(p.RatingPageData,null),this._ratingsData.config=this.config,this._ratingsData.myRatingData=new g.MyRatingData("",{})},RatingModule}(n.Module);e.RatingModule=T}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,P=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(4),n(494),n(13),n(495),n(83),n(0),n(259),n(497),n(1703),n(498),n(499),n(500),n(260),n(58),n(40),n(29),n(1),n(501),n(16),n(21),n(2)],void 0===(r=function(t,e,l,n,d,h,o,_,f,a,s,c,i,u,y,p,m,v,r,b,g,w,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var S=function(r){function RatingWindowMediator(){var t=null!==r&&r.apply(this,arguments)||this;return t._currentRatingId=2,t._currentPageId=1,t._currentFriends=!1,t._isWeek=!0,t._currentRatingType=s.RatingModuleNames.RATING_TYPE_EXP,t._cupLoadableImages=[],t.profileRenderer=new m.ProfileRenderer,t._avatars=[],t._loadableImages=[],t}return P(RatingWindowMediator,r),RatingWindowMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this._data=this._mapData,this._ratingsData=this._data.ratingsData,this._ratingsData.clear(),this.getElements();for(var e=0,n=_.Application.static.data.npcs.npc.items;e<n.length;e++){var i=n[e];this._avatars[-i.id-1].resource=_.Application.profiles.getProfile(i.id,!1).pictures[0].url}this.setupFriendsImage(),this.setAvatarsVisible(!1),this.profileRenderer.initialize(_.Application.profiles.current,this._ratingSelfItemContainer,{cropedFullnameLength:19,cropedFullnameSuffix:p.StringUtils.DEFAULT_CROP_SUFFIX}),this._ratingsData.addEventListener(o.RatingDataEvent.CHANGED,this.onRatingsDataChanged.bind(this)),this._ratingsData.myRatingData.addEventListener(o.RatingDataEvent.CHANGED,this.onRatingsMyDataChanged.bind(this)),l.ElkaCore.instance.promiseManager.attach(a.RatingTabChangedPromise,this.onTabChanged.bind(this)),l.ElkaCore.instance.promiseManager.attach(c.RatingPageChangedPromise,this.onPageChanged.bind(this)),this._helpButton=this.child("selfHelpButton"),this.changeHelpButtonTooltip("RATING_WINDOW_NO_EXP_DATA_HELP"),this.nextWeekTime=_.Application.dynamic.weekend,this.timerTitleLabel=this.child("timerTitleLabel"),this.timerLabel=this.child("timerLabel"),this.timerContainer=this.child("timerContainer"),this._navigationContainer=this.child("ratingsLists"),this._navigationContainer.currentState="noFriends",this._jobId=_.Application.date.callProcessor.repeatCall(this.updateTimer.bind(this)),this.updateTimer(),this.updateCupImage(),this.getRatingData(),this.setupMyFrame()},RatingWindowMediator.prototype.setupFriendsImage=function(){var e=this,t=this.child("friendsImage"),n=t.getChildrenByName("npcAva"),i=t.getChildrenByName("npcFrames"),r=this._ratingsData.getFrameResource(100,0);this._loadableImages.push(new g.LoadableImage(n[1],this.getNPCResource(-1))),this._loadableImages.push(new g.LoadableImage(n[0],this.getNPCResource(-3))),this._loadableImages.push(new g.LoadableImage(n[2],this.getNPCResource(-2))),i.forEach(function(t){return e._loadableImages.push(new g.LoadableImage(t,r))})},RatingWindowMediator.prototype.getNPCResource=function(t){return _.Application.profiles.getProfile(t.toString(),!1).pictures[0].url},RatingWindowMediator.prototype.getElements=function(){this._list=this.child("ratingsInfoList");for(var t=1;t<=3;t++)this._avatars.push(this.child("ava"+t));this._myFrame=this.child("avaFrame"),this._infiniteNavigationContainer=this.child("navigation"),this._ratingSelfItemContainer=this.child("ratingsYourPlaceItem"),this._ratingSelfItemContainer.currentState="cup",this._awardImage=this.child("awardImage"),this._cupImage1=this.child("cupImage1"),this._cupImage2=this.child("cupImage2"),this._cupImage3=this.child("cupImage3"),this._cupLabel1=this.child("cupLabel1"),this._cupLabel2=this.child("cupLabel2"),this._cupLabel3=this.child("cupLabel3"),this._contentContainer=this.child("contentContainer")},RatingWindowMediator.prototype.setAvatarsVisible=function(e){this._avatars.forEach(function(t){return t.visible=e})},RatingWindowMediator.prototype.updateTimer=function(){var t=this.nextWeekTime-_.Application.date.currentTime;0<=t?this.timerLabel.text=v.DateUtils.timeToString(t):(this._jobId&&(_.Application.date.callProcessor.deleteCall(this._jobId),this._jobId=null),this.timerContainer.visible=!1,this.timerTitleLabel.text=_.Application.localization.localize("RATINGS_TIMER_END"))},RatingWindowMediator.prototype.getRatingData=function(){this.registerListener(this._ratingsData,o.RatingDataEvent.MY_RANK,this.onGetMyRank.bind(this)),l.ElkaCore.instance.promiseManager.ask(new u.RatingMyRankPromise(this._currentRatingId))},RatingWindowMediator.prototype.onGetMyRank=function(){if(this.unregisterListener(this._ratingsData,o.RatingDataEvent.MY_RANK,this.onGetMyRank.bind(this)),this._currentFriends)l.ElkaCore.instance.promiseManager.ask(new i.RatingFriendsPromise(this._currentRatingId));else if(null!==this._ratingsData.getRatingPageData(this._currentRatingId,this._currentFriends,this._currentPageId)){var t=new o.RatingDataEvent(o.RatingDataEvent.CHANGED,{friends:this._currentFriends,ratingId:this._currentRatingId,pageId:this._currentPageId});this.onRatingsDataChanged(t)}else l.ElkaCore.instance.promiseManager.ask(new n.RatingGetPromise(this._currentRatingId,this._currentPageId))},RatingWindowMediator.prototype.onPageChanged=function(t){this._currentPageId=t.pageId,this.getRatingData()},RatingWindowMediator.prototype.onTabChanged=function(t){var e=t.tabName;switch(this._currentPageId=1,this._infiniteNavigationContainer.dispatchEvent(new o.RatingDataEvent(o.RatingDataEvent.CHANGE_PAGE,{pageId:1})),e){case"weekButton":this._isWeek=!0,this._currentFriends=!1,this._contentContainer.currentState="cup",this._ratingSelfItemContainer.currentState="cup",this._navigationContainer.currentState="noFriends",this.setAvatarsVisible(!1);break;case"allButton":this._isWeek=!1,this._currentFriends=!1,this._contentContainer.currentState="frames",this._ratingSelfItemContainer.currentState="noCup",this._navigationContainer.currentState="noFriends",this.setAvatarsVisible(!0);break;case"friendsButton":this._isWeek=!1,this._currentFriends=!0,this._contentContainer.currentState="friends",this._ratingSelfItemContainer.currentState="noCup",this._navigationContainer.currentState="friends",this.setAvatarsVisible(!1)}switch(e){case"ratingTabExp":this._currentRatingType=s.RatingModuleNames.RATING_TYPE_EXP,this.changeHelpButtonTooltip("RATING_WINDOW_NO_EXP_DATA_HELP");break;case"ratingTabChest":this._currentRatingType=s.RatingModuleNames.RATING_TYPE_CHEST,this.changeHelpButtonTooltip("RATINGS_WINDOW_NO_CHEST_DATA_HELP");break;case"ratingTabBeauty":this._currentRatingType=this._isWeek?s.RatingModuleNames.RATING_TYPE_BEAUTY_WEEK:s.RatingModuleNames.RATING_TYPE_BEAUTY_ALLTIME,this.changeHelpButtonTooltip("RATINGS_WINDOW_NO_BEAUTY_DATA_HELP")}this._currentRatingType!==s.RatingModuleNames.RATING_TYPE_BEAUTY_WEEK&&this._currentRatingType!==s.RatingModuleNames.RATING_TYPE_BEAUTY_ALLTIME||(this._currentRatingType=this._isWeek?s.RatingModuleNames.RATING_TYPE_BEAUTY_WEEK:s.RatingModuleNames.RATING_TYPE_BEAUTY_ALLTIME,this.changeHelpButtonTooltip("RATINGS_WINDOW_NO_BEAUTY_DATA_HELP"));for(var n=0,i=_.Application.static.data.ratings.rating.items;n<i.length;n++){var r=i[n];if(r.type==this._currentRatingType&&r.friend==!this._isWeek){this._ratingStaticData=r;break}}this._currentRatingId=this._ratingStaticData.id,this.updateCupImage(),this.getRatingData(),this.onRatingsMyDataChanged()},RatingWindowMediator.prototype.updateCupImage=function(){if(this._isWeek||!this._currentFriends){var t=_.Application.static.data.ratings.rating.getItem(this._currentRatingId).places,e=[null,this._cupImage1,this._cupImage2,this._cupImage3],n=[this._cupLabel1,this._cupLabel2,this._cupLabel3];this._cupLoadableImages&&this._cupLoadableImages.forEach(function(t){return t.destroy()});for(var i=1;i<=3;i++){this._isWeek?this._cupLoadableImages[i]=new g.LoadableImage(e[i],this._ratingsData.getCupResource(96,this._currentRatingId,i)):this._cupLoadableImages[i]=new g.LoadableImage(e[i],this._ratingsData.getFrameResource(100,i));var r=t.place.getItem(i);n[i-1].text=_.Application.localization.localize("RATINGS_AWARDS_PLACES_RANGE",{fromPlace:r.from.toString(),toPlace:r.to.toString()})}}},RatingWindowMediator.prototype.changeHelpButtonTooltip=function(t){_.Application.tooltip.removeTooltip(this._helpButton),_.Application.tooltip.addTooltip(this._helpButton,w.TooltipAnchor.Top,O.GUINames.TEXT_TOOLTIP,{text:t,gender:_.Application.profiles.current.isMale})},RatingWindowMediator.prototype.onRatingsMyDataChanged=function(t){var e=this._ratingSelfItemContainer.getChildByName("placeLabel"),n=this._ratingSelfItemContainer.getChildByName("scoreLabel");if(this._selfCupLoadableImage&&this._selfCupLoadableImage.destroy(),-1===this._ratingsData.myRatingData.rank)this._ratingSelfItemContainer.currentState="help";else{e.text=this._ratingsData.myRatingData.rank.toString(),n.text=this._ratingsData.myRatingData.score.toString();var i=b.RatingUtils.getAwardPlaceDataByRealPlace(this._currentRatingId,this._ratingsData.myRatingData.rank);if(this._isWeek&&i){var r=_.Application.model.ratings.getCupResource(32,this._currentRatingId,i.id);this._selfCupLoadableImage=new g.LoadableImage(this._awardImage,r,!0),this._ratingSelfItemContainer.currentState="cup"}else this._ratingSelfItemContainer.currentState="noCup"}this.setupMyFrame()},RatingWindowMediator.prototype.setupMyFrame=function(){var t;if(this._isWeek||this._currentFriends)t=0;else{var e=b.RatingUtils.getAwardPlaceDataByRealPlace(this._currentRatingId,this._ratingsData.myRatingData.rank);t=e?e.id:0}var n=_.Application.model.ratings.getFrameResource(64,t);this._frameLoadableImage&&this._frameLoadableImage.destroy(),this._frameLoadableImage=new g.LoadableImage(this._myFrame,n)},RatingWindowMediator.prototype.onRatingsDataChanged=function(t){var e=t.params;if(this._currentFriends==e.friends&&this._currentRatingId==e.ratingId&&this._currentPageId==e.pageId){this._list.removeAllItems(),this._data.listItems=[];var n=this._ratingsData.getRatingPageData(this._currentRatingId,this._currentFriends,this._currentPageId),i=1+(this._currentPageId-1)*h.RatingsData.PAGE_SIZE,r=[],o=n.scores.items.concat();this._currentFriends&&-1!==this._ratingsData.myRatingData.rank&&o.push(new y.RatingItem("",{0:_.Application.profiles.current.userId,1:this._ratingsData.myRatingData.score})),o.sort(function(t,e){return e.score-t.score});for(var a=0,s=o;a<s.length;a++){var c=s[a],u=_.Application.profiles.getProfile(c.socialId,!1);null==u&&r.push(c.socialId),this._currentFriends&&c.socialId==_.Application.profiles.current.userId&&this._ratingsData.myRatingData.reinit({rank:i,score:c.score,size:1});var p={item:c,place:i++,profile:u,isWeek:this._isWeek,ratingType:this._currentRatingType,ratingId:this._currentRatingId,friends:this._currentFriends};this._list.addItem(p),this._data.listItems.push(p)}this._currentFriends&&this._list.dispatchEvent(new d.BaseDataEvent(d.BaseDataEvent.CHANGED)),0<r.length&&l.ElkaCore.instance.promiseManager.ask(new f.RatingGetProfilesPromise(r))}},RatingWindowMediator.prototype.destroy=function(){this._frameLoadableImage&&this._frameLoadableImage.destroy(),l.ElkaCore.instance.promiseManager.detach(c.RatingPageChangedPromise,this.onPageChanged.bind(this)),l.ElkaCore.instance.promiseManager.detach(a.RatingTabChangedPromise,this.onTabChanged.bind(this)),this._ratingsData.removeEventListener(o.RatingDataEvent.CHANGED,this.onRatingsDataChanged.bind(this)),this._ratingsData.myRatingData.removeEventListener(o.RatingDataEvent.CHANGED,this.onRatingsMyDataChanged.bind(this)),this._jobId&&(_.Application.date.callProcessor.deleteCall(this._jobId),this._jobId=null),this.profileRenderer.destroy(),this._cupLoadableImages&&this._cupLoadableImages.forEach(function(t){return t.destroy()}),this._selfCupLoadableImage&&this._selfCupLoadableImage.destroy(),this._loadableImages.forEach(function(t){return t.destroy()}),r.prototype.destroy.call(this)},RatingWindowMediator}(r.DisplayObjectContainerMediator);e.RatingWindowMediator=S}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function RatingModuleNames(){}return RatingModuleNames.RATING_TYPE_EXP="objectUseEnergy",RatingModuleNames.RATING_TYPE_CHEST="chestOpen",RatingModuleNames.RATING_TYPE_BEAUTY_ALLTIME="beautyMax",RatingModuleNames.RATING_TYPE_BEAUTY_WEEK="beautyChange",RatingModuleNames}();e.RatingModuleNames=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1705)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function RatingGetCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RatingGetCommand,t),RatingGetCommand.prototype.execute=function(n){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.RatingGetAction(n.ratingId,n.pageId))];case 1:return e=t.sent(),this._data.updateRatingPageData(n.ratingId,!1,n.pageId,e.output.data),[2]}})})},RatingGetCommand}(n.CommandBase);e.RatingGetCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RatingGetAction(t,e){var n=i.call(this)||this;return n.action="get",n.controller="rating",n.output=new o,n.input=new r.ActionInput({ratingId:t,pageId:e}),n}return a(RatingGetAction,i),RatingGetAction}(n.Action);e.RatingGetAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(12),n(19),n(260)],void 0===(r=function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RatingPageData(t,e){var n=i.call(this,t,e)||this;return n._scores=new r.ItemCollection(o.RatingItem,null),n.assignChildPath("scores",n._scores),n.replicateChange(n._scores),n.initChildren(e),n}return a(RatingPageData,i),Object.defineProperty(RatingPageData.prototype,"scores",{get:function(){return this._scores},enumerable:!0,configurable:!0}),RatingPageData}(n.BaseDynamicDataIdentifiable);e.RatingPageData=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(83)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function RatingGetProfilesCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RatingGetProfilesCommand,t),RatingGetProfilesCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.profiles.getProfilesMap(e.socialIds)];case 1:return t.sent(),i.Application.model.ratings.dispatchEvent(new r.RatingDataEvent(r.RatingDataEvent.GET_PROFILES)),[2]}})})},RatingGetProfilesCommand}(n.CommandBase);e.RatingGetProfilesCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(4),n(497),n(57)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.ToggleButtonEvent,a=function(e){function RatingTabButtonMediator(){return null!==e&&e.apply(this,arguments)||this}return s(RatingTabButtonMediator,e),RatingTabButtonMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._tabName=t.displayObject.name,this._toggleButton=t.displayObject,this._toggleButton.addEventListener(o.SELECTED_CHANGED,this.onButton.bind(this))},RatingTabButtonMediator.prototype.destroy=function(){this._toggleButton.removeEventListener(o.SELECTED_CHANGED,this.onButton.bind(this)),e.prototype.destroy.call(this)},RatingTabButtonMediator.prototype.onButton=function(t){this._toggleButton.selected&&n.ElkaCore.instance.promiseManager.ask(new i.RatingTabChangedPromise(this._tabName))},RatingTabButtonMediator}(r.DisplayObjectMediator);e.RatingTabButtonMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(57),n(4),n(498),n(83)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=function(e){function RatingNavigationMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._pageId=1,t}return c(RatingNavigationMediator,e),RatingNavigationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container=t.displayObject,this.prevButton=this._container.getChildByName("prevButton"),this.prevButton.buttonMode=!0,this.prevButton.addEventListener(a.POINTER_TAP,this.onPrev.bind(this)),this.nextButton=this._container.getChildByName("nextButton"),this.nextButton.buttonMode=!0,this.nextButton.addEventListener(a.POINTER_TAP,this.onNext.bind(this)),this._container.addEventListener(o.RatingDataEvent.CHANGE_PAGE,this.onChangePage.bind(this)),this.updateButtons()},RatingNavigationMediator.prototype.onChangePage=function(t){this._pageId=t.params.pageId,this.updateButtons()},RatingNavigationMediator.prototype.updateButtons=function(){this.prevButton.visible=1!==this._pageId},RatingNavigationMediator.prototype.onPrev=function(t){1<this._pageId&&(this._pageId=this._pageId-1,this.updateButtons(),i.ElkaCore.instance.promiseManager.ask(new r.RatingPageChangedPromise(this._pageId)))},RatingNavigationMediator.prototype.onNext=function(t){this._pageId++,this.updateButtons(),i.ElkaCore.instance.promiseManager.ask(new r.RatingPageChangedPromise(this._pageId))},RatingNavigationMediator.prototype.destroy=function(){this.prevButton.removeEventListener(a.POINTER_TAP,this.onPrev.bind(this)),this.nextButton.removeEventListener(a.POINTER_TAP,this.onNext.bind(this)),this._container.removeEventListener(o.RatingDataEvent.CHANGE_PAGE,this.onChangePage.bind(this)),e.prototype.destroy.call(this)},RatingNavigationMediator}(n.DisplayObjectMediator);e.RatingNavigationMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1711)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function RatingFriendsCommand(){return null!==t&&t.apply(this,arguments)||this}return a(RatingFriendsCommand,t),RatingFriendsCommand.prototype.execute=function(i){return s(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=this.getFriendsData(),[4,o.Application.server.send(new r.RatingFriendsAction(i.ratingId,e))];case 1:return n=t.sent(),this._data.updateRatingPageData(i.ratingId,!0,1,n.output.data),[2]}})})},RatingFriendsCommand.prototype.getFriendsData=function(){for(var t=[],e=0,n=0,i=o.Application.dynamic.friends.items;n<i.length;n++){var r=i[n];if(!r.isNPC&&(t.push(r.userId+":"+r.sUserId+":"+r.hash),500==++e))break}return t},RatingFriendsCommand}(n.CommandBase);e.RatingFriendsCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function RatingFriendsAction(t,e){var n=i.call(this)||this;return n.action="friends",n.controller="rating",n.output=new o,n.input=new r.ActionInput({ratingId:t,friendsData:e}),n}return a(RatingFriendsAction,i),RatingFriendsAction}(n.Action);e.RatingFriendsAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,m=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(4),n(501),n(58),n(40),n(154),n(114),n(1),n(16),n(83),n(126),n(230),n(2)],void 0===(r=function(t,e,i,n,r,o,a,s,c,u,p,l,d,h,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=uipixi.GestureEvent,y=function(e){function RatingListItemMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._destroyed=!1,t}return m(RatingListItemMediator,e),RatingListItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.getElements(),this._ratingHomeIconButton.addEventListener(f.POINTER_TAP,this.onGotoButton.bind(this)),null!=this._showData.profile?this.setProfileData():this.registerListener(i.Application.model.ratings,l.RatingDataEvent.GET_PROFILES,this.onGetProfiles.bind(this)),this.setScore(),this.setPlace(),this.setIcon(),this.setFrame()},RatingListItemMediator.prototype.onGotoButton=function(t){if(this._showData.profile.userId!=i.Application.profiles.current.userId){var e=i.Application.dynamic.friends.getItem(this._showData.profile.userId);null===e&&(e=new c.FriendDynamicItem(this._showData.profile.userId,{userId:0,sUserId:this._showData.profile.userId})),i.Application.model.travel.place===d.TravelPlaceType.SEASON?n.ElkaCore.instance.promiseManager.ask(new s.FromSeasonToFriendPromise(e)):i.Application.model.travel.place===d.TravelPlaceType.FRIEND&&n.ElkaCore.instance.promiseManager.ask(new h.FromFriendToFriendPromise(e)),i.Application.view.hideByWindowName(_.GUINames.RATING_WINDOW),i.Application.view.hideByWindowName(_.GUINames.USER_PROFILE_WINDOW)}else i.Application.view.hideByWindowName(_.GUINames.RATING_WINDOW)},RatingListItemMediator.prototype.setProfileData=function(){this.profileRenderer=new a.ProfileRenderer,this.profileRenderer.initialize(this._showData.profile,this._container,{cropedFullnameLength:19,cropedFullnameSuffix:o.StringUtils.DEFAULT_CROP_SUFFIX})},RatingListItemMediator.prototype.onGetProfiles=function(){if(!this._destroyed){var t=i.Application.profiles.getProfile(this._showData.item.socialId,!1);null!=t&&(this._showData.profile=t,this.unregisterListener(i.Application.model.ratings,l.RatingDataEvent.GET_PROFILES,this.onGetProfiles.bind(this)),this.setProfileData())}},RatingListItemMediator.prototype.getElements=function(){this._placeLabel=this.child("placeLabel"),this._scoreLabel=this.child("scoreLabel"),this._awardImage=this.child("awardImage"),this._ratingHomeIconButton=this.child("ratingHomeIconButton")},RatingListItemMediator.prototype.setScore=function(){this._scoreLabel.text=this._showData.item.score.toString()},RatingListItemMediator.prototype.setPlace=function(){this._placeLabel.text=this._showData.place.toString()},RatingListItemMediator.prototype.setIcon=function(){if(this._container.currentState="noCup",this._showData.isWeek){var t=r.RatingUtils.getAwardPlaceDataByRealPlace(this._showData.ratingId,this._showData.place);if(t){this._container.currentState="cup";var e=i.Application.model.ratings.getCupResource(32,this._showData.ratingId,t.id);this._awardLoadableImage=new p.LoadableImage(this._awardImage,e,!0)}}},RatingListItemMediator.prototype.setFrame=function(){var t;if(this._showData.friends||this._showData.isWeek)t=0;else{var e=r.RatingUtils.getAwardPlaceDataByRealPlace(this._showData.ratingId,this._showData.place);t=e?e.id:0}var n=i.Application.model.ratings.getFrameResource(64,t);this._avaFrameLoadableImage=new p.LoadableImage(this.child("avaFrame"),n,!0)},RatingListItemMediator.prototype.destroy=function(){this._destroyed=!0,this.profileRenderer&&this.profileRenderer.destroy(),this._ratingHomeIconButton.removeEventListener(f.POINTER_TAP,this.onGotoButton.bind(this)),i.Application.tooltip.removeTooltip(this._ratingHomeIconButton),this._awardLoadableImage&&this._awardLoadableImage.destroy(),this._avaFrameLoadableImage&&this._avaFrameLoadableImage.destroy(),e.prototype.destroy.call(this)},RatingListItemMediator}(u.DisplayObjectContainerMediator);e.RatingListItemMediator=y}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1714),n(83)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function RatingMyRankCommand(){return null!==t&&t.apply(this,arguments)||this}return s(RatingMyRankCommand,t),RatingMyRankCommand.prototype.execute=function(n){return c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.RatingMyRankAction(n.ratingId))];case 1:return e=t.sent(),this._data.myRatingData.reinit(e.output.data),i.Application.model.ratings.dispatchEvent(new o.RatingDataEvent(o.RatingDataEvent.MY_RANK)),[2]}})})},RatingMyRankCommand}(n.CommandBase);e.RatingMyRankCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function RatingMyRankAction(t){var e=n.call(this)||this;return e.action="myRank",e.controller="rating",e.output=new o,e.input=new i.ActionInput({ratingId:t}),e}return a(RatingMyRankAction,n),RatingMyRankAction}(n.Action);e.RatingMyRankAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(26),n(2)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function ShowRatingWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return s(ShowRatingWindowCommand,t),ShowRatingWindowCommand.prototype.execute=function(t){return c(this,void 0,void 0,function(){return u(this,function(t){return i.Application.view.show(o.GUINames.RATING_WINDOW,null,r.WindowLayer.WINDOWS),[2]})})},ShowRatingWindowCommand}(n.CommandBase);e.ShowRatingWindowCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(123),n(13),n(1)],void 0===(r=function(t,e,i,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function RatingFriendsPageNavigationMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._renderer=new i.NavigatorRenderer,t}return a(RatingFriendsPageNavigationMediator,n),RatingFriendsPageNavigationMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t);var e=this.child("navigationFriends");this._itemsList=this.child("ratingsInfoList"),this.registerListener(this._itemsList,r.BaseDataEvent.CHANGED,this.onListChanged.bind(this)),this._renderer.initialize({items:this._mapData.listItems,list:"ratingsInfoList",pageSize:4,navigationContainer:e},this._container)},RatingFriendsPageNavigationMediator.prototype.onListChanged=function(t){this._renderer.updateItems(this._mapData.listItems)},RatingFriendsPageNavigationMediator.prototype.destroy=function(){this._renderer.destroy(),n.prototype.destroy.call(this)},RatingFriendsPageNavigationMediator}(n.DisplayObjectContainerMediator);e.RatingFriendsPageNavigationMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},u=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(26),n(2)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function ShowRatingOnStartCommand(){return null!==t&&t.apply(this,arguments)||this}return s(ShowRatingOnStartCommand,t),ShowRatingOnStartCommand.prototype.execute=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._data.hasWin()?[4,i.Application.view.show(o.GUINames.RATING_AWARD_WINDOW,null,r.WindowLayer.WINDOWS).onClose]:(e.resolve({shown:!1}),[2]);case 1:return t.sent(),e.resolve({shown:!0}),[2]}})})},ShowRatingOnStartCommand}(n.CommandBase);e.ShowRatingOnStartCommand=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(502)],void 0===(r=function(t,e,n,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(o){function RatingAwardWindowMediator(){return null!==o&&o.apply(this,arguments)||this}return c(RatingAwardWindowMediator,o),RatingAwardWindowMediator.prototype.initialize=function(t){o.prototype.initialize.call(this,t);var e=this.child("awardList");this.child("descriptionLabel").text=a.Application.localization.localize("RATINGS_AWARDS_WINDOW_SUB_TITLE",{gender:a.Application.profiles.current.isMale});for(var n=0,i=a.Application.dynamic.user.rating.items;n<i.length;n++){var r=i[n];1===r.show&&e.addItem(new s.RatingAwardMediatorVO(+r.id,r.placeId))}},RatingAwardWindowMediator}(n.DisplayObjectContainerMediator);e.RatingAwardWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(20),n(4),n(18),n(0),n(33),n(208)],void 0===(r=function(t,e,n,a,i,s,r,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function UserAgreementModule(){return null!==t&&t.apply(this,arguments)||this}return u(UserAgreementModule,t),UserAgreementModule.prototype.initialize=function(t){return p(this,void 0,void 0,function(){return l(this,function(t){return s.Application.social.platformType!==r.PlatformType.FB||a.ElkaCore.instance.promiseManager.ask(new i.RegisterModuleLoaderPromise(this)),[2]})})},UserAgreementModule.prototype.onPreloadModule=function(t){return p(this,void 0,void 0,function(){var e,n,i,r,o;return l(this,function(t){switch(t.label){case 0:return 1===s.Application.model.clientParams.getParam(UserAgreementModule.CLIENT_PARAM).number?[2]:(e=document.getElementById("userAgreementWindow"),n=document.getElementById("userAgreementAcceptButton"),i=document.getElementById("userAgreementInfoButton"),r=document.getElementById("userAgreementTitle"),o=document.getElementById("userAgreementText"),e.style.visibility="visible",i.onclick=function(){return window.open(s.Application.static.data.social.termsUrl,"_blank")},r.textContent=s.Application.localization.localize("FB_UA_TITLE"),o.textContent=s.Application.localization.localize("FB_UA_TEXT"),i.textContent=s.Application.localization.localize("FB_UA_REVIEW"),n.textContent=s.Application.localization.localize("FB_UA_AGREE"),[4,new Promise(function(t){n.onclick=function(){return t()}})]);case 1:return t.sent(),[4,a.ElkaCore.instance.promiseManager.ask(new c.SetClientParamPromise(UserAgreementModule.CLIENT_PARAM,1))];case 2:return t.sent(),n.onclick=null,i.onclick=null,e.style.visibility="hidden",[2]}})})},UserAgreementModule.CLIENT_PARAM=6,UserAgreementModule}(n.Module);e.UserAgreementModule=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(2),n(0),n(1721)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function HappyNewYearModule(){return null!==t&&t.apply(this,arguments)||this}return u(HappyNewYearModule,t),HappyNewYearModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this))},HappyNewYearModule.prototype.onPreloadModule=function(t){this.mapMediators()},HappyNewYearModule.prototype.mapMediators=function(){a.Application.view.mapMediator(o.GUINames.HAPPY_NEW_YEAR_WINDOW,s.HappyNewYearWindowMediator)},HappyNewYearModule}(n.Module);e.HappyNewYearModule=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(75),n(33)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.GestureEvent,s=function(n){function HappyNewYearWindowMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._animations=[],t._counter=0,t._timerId=-1,t._repeatCount=45,t}return c(HappyNewYearWindowMediator,n),HappyNewYearWindowMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.setupText(),this.setupLink(),this.setupAward()},HappyNewYearWindowMediator.prototype.setupText=function(){switch(this.child("messageLabel").text=this._showData.params.text,this.child("signLabel").text=this._showData.params.name,i.Application.social.platformType){case o.PlatformType.VK_MOBILE:case o.PlatformType.VK:this.child("buttonLabel").text=i.Application.localization.localize("HAPPY_NEW_YEAR_EVENT_WINDOW_BUTTON_LIKE_VK");break;case o.PlatformType.OK:this.child("buttonLabel").text=i.Application.localization.localize("HAPPY_NEW_YEAR_EVENT_WINDOW_BUTTON_LIKE_OK");break;case o.PlatformType.FB:this.child("buttonLabel").text=i.Application.localization.localize("HAPPY_NEW_YEAR_EVENT_WINDOW_BUTTON_LIKE_FB");break;default:this.child("buttonLabel").text=i.Application.localization.localize("HAPPY_NEW_YEAR_EVENT_WINDOW_BUTTON_LIKE_VK")}},HappyNewYearWindowMediator.prototype.setupLink=function(){this._gotoButton=this.child("gotoButton"),this.registerListener(this._gotoButton,a.POINTER_TAP,this.onTapGoTo.bind(this))},HappyNewYearWindowMediator.prototype.onTapGoTo=function(){window.open(this._showData.params.link,"_blank")},HappyNewYearWindowMediator.prototype.setupAward=function(){this.child("levelLabel").text=i.Application.dynamic.user.level.toString(),this.child("multLabel").text=(this._showData.baseAward.value/i.Application.dynamic.user.level).toString(),this._awardLabel=this.child("awardLabel"),this._awardLabel.text="0",this._checkImage=this.child("checkImage"),this._checkImage.visible=!1,this._checkLabel=this.child("checkLabel"),this._checkLabel.visible=!1,this._timerId=i.Application.date.callProcessor.repeatCall(this.updateAward.bind(this),30)},HappyNewYearWindowMediator.prototype.updateAward=function(){if(this._counter+=1,this._counter>=this._repeatCount)return this._awardLabel.text=this._showData.baseAward.value.toString(),this.stopTimer(),void this.startAnimations();this._awardLabel.text=Math.floor(this._showData.baseAward.value/this._repeatCount*this._counter).toString()},HappyNewYearWindowMediator.prototype.startAnimations=function(){this._animations.push(i.Application.animation.animate(this._checkImage,"newYearEventShowItem",{delay:0,halfDuration:4*r.AnimationService.FPS})),this._animations.push(i.Application.animation.animate(this._checkLabel,"newYearEventShowItem",{delay:8*r.AnimationService.FPS,halfDuration:5*r.AnimationService.FPS})),this._animations.push(i.Application.animation.animate(this.child("closeButton"),"newYearEventShowItem",{delay:20*r.AnimationService.FPS,halfDuration:6*r.AnimationService.FPS}))},HappyNewYearWindowMediator.prototype.stopTimer=function(){-1!==this._timerId&&(i.Application.date.callProcessor.deleteCall(this._timerId),this._timerId=-1)},HappyNewYearWindowMediator.prototype.destroy=function(){this.stopTimer();for(var t=0,e=this._animations;t<e.length;t++){e[t].stop()}n.prototype.destroy.call(this)},HappyNewYearWindowMediator}(n.DisplayObjectContainerMediator);e.HappyNewYearWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,M=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(18),n(2),n(0),n(1723),n(84),n(22),n(1725),n(503),n(504),n(1727),n(505),n(506),n(1729),n(1730),n(1731),n(507),n(1732),n(403),n(1733),n(1734),n(31),n(33)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b,g,w,O,S,P,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var A=function(t){function OkMoneyEventModule(){return null!==t&&t.apply(this,arguments)||this}return M(OkMoneyEventModule,t),OkMoneyEventModule.prototype.initialize=function(t){i.ElkaCore.instance.promiseManager.ask(new r.RegisterModuleLoaderPromise(this)),a.Application.operation.addAllowingRule(new P.OccurrenceBeginningLineRule("/events"))},OkMoneyEventModule.prototype.onPreloadModule=function(t){a.Application.social.platformIs(E.PlatformType.OK)&&(a.Application.model.okEvent=this._event=new c.OkMoneyEventModel(a.Application.static.data.events.raffleMoney,a.Application.dynamic.user.events.raffleMoney),this.mapMediators(),this.mapCommands())},OkMoneyEventModule.prototype.mapMediators=function(){a.Application.view.mapMediator(o.GUINames.HUD+".leftSideBar.sideBarContainer",O.OkMoneyEventIconContainerMediator,this._event),a.Application.view.mapMediator(o.GUINames.HUD+".leftSideBar.sideBarContainer."+o.GUINames.OK_MONEY_EVENT_ICON,S.OkMoneyEventIconMediator,this._event),a.Application.view.mapMediator(o.GUINames.OK_MONEY_EVENT_WINDOW,s.OkMoneyEventMediator,this._event),a.Application.view.mapMediator(o.GUINames.OK_MONEY_EVENT_WINDOW+".tabContainer.buttonGroup.wrapper.*",v.OkMoneyEventButtonMediator,this._event),this.mapResourceBarMediator(o.GUINames.OK_MONEY_EVENT_WINDOW+".eventSilverHUDBar","okEventRoulette1"),this.mapResourceBarMediator(o.GUINames.OK_MONEY_EVENT_WINDOW+".eventGoldHUDBar","okEventRoulette2");var t=o.GUINames.OK_MONEY_EVENT_WINDOW+".tabContainer.containerGroup.wrapper.firstPart",e=o.GUINames.OK_MONEY_EVENT_WINDOW+".tabContainer.containerGroup.wrapper.secondPart",n=".roulette.wheelContent.wheelContainer.sectorsContainer.*";a.Application.view.mapMediator(t,y.OkMoneyEventRouletteMediator,{event:this._event,id:c.OkMoneyEventRouletteId.COMMON}),a.Application.view.mapMediator(t+n,m.OkMoneyEventRouletteSectorMediator,{event:this._event,id:c.OkMoneyEventRouletteId.COMMON}),a.Application.view.mapMediator(e,y.OkMoneyEventRouletteMediator,{event:this._event,id:c.OkMoneyEventRouletteId.GOLD}),a.Application.view.mapMediator(e+n,m.OkMoneyEventRouletteSectorMediator,{event:this._event,id:c.OkMoneyEventRouletteId.GOLD})},OkMoneyEventModule.prototype.mapResourceBarMediator=function(t,e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=null),a.Application.view.mapMediator(t,w.ResourceBarMediator,{resourcePrefix:e,seasonResource:n,purchaseAvailable:i,infoAvailable:r,tooltip:o})},OkMoneyEventModule.prototype.mapCommands=function(){u.CommandMap.map(l.OkMoneyEventInitPromise,p.OkMoneyEventInitCommand),u.CommandMap.map(d.OkMoneyEventShowPromise,h.OkMoneyEventShowCommand),u.CommandMap.map(_.OkMoneyEventSpinPromise,f.OkMoneyEventSpinCommand),u.CommandMap.map(b.OkMoneyEventRouletteAnimationSpinPromise,g.OkMoneyEventRouletteAnimationSpinCommand)},OkMoneyEventModule}(n.Module);e.OkMoneyEventModule=A}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(21),n(2),n(84),n(102),n(29),n(261)],void 0===(r=function(t,e,n,o,a,s,i,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,r=function(r){function OkMoneyEventMediator(){return null!==r&&r.apply(this,arguments)||this}return d(OkMoneyEventMediator,r),OkMoneyEventMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this._timerLabel=this.child("timer"),this._label=this.child("timerDescription"),this._description=this.child("description"),this._okContainer=this.child("okContainer"),this._hudBar=this.child("okHUDBar"),this._homeButton=this.child("homeButton"),this._endLabel=this.child("endLabel"),this._timerContainer=this.child("timerContainer"),this._countLabel=this._hudBar.getChildByName("countLabel"),o.Application.tooltip.addTooltip(this.child("tooltipButton"),a.TooltipAnchor.Left,s.GUINames.TEXT_TOOLTIP,{text:"OK_MONEY_EVENT_WINDOW_TOOLTIP"}),this.setHudBar(),this.onPhaseChanged(),this.onUpdateDescription(),this.registerListener(this._mapData,c.OkMoneyEventModelEvent.PHASE_CHANGED,this.onPhaseChanged.bind(this)),this.registerListener(this._homeButton,l.POINTER_TAP,this.onButton.bind(this));for(var e=0,n=this._mapData.roulettes;e<n.length;e++){var i=n[e];this.registerListener(i,p.OkMoneyEventRouletteModelEvent.OK_ADD,this.onUpdateDescription.bind(this))}},OkMoneyEventMediator.prototype.updateTime=function(){var t=this._mapData.timeEnd-o.Application.date.currentTime;0<t&&(this._timerLabel.text=u.DateUtils.timeToString(t))},OkMoneyEventMediator.prototype.onButton=function(){for(var t=0,e=this._mapData.roulettes;t<e.length;t++){if(e[t].isSpinning)return}o.Application.view.hide(this.viewHandle)},OkMoneyEventMediator.prototype.setHudBar=function(){this._hudBar.buttonMode=!0,o.Application.tooltip.addTooltip(this._hudBar,a.TooltipAnchor.Top,s.GUINames.TEXT_TOOLTIP,{text:"OK_MONEY_EVENT_WINDOW_OK_TOOLTIP"})},OkMoneyEventMediator.prototype.onUpdateDescription=function(){this._mapData.okMoney?(this._description.visible=!1,this._okContainer.visible=!0,this._countLabel.text=this._mapData.okMoney.toString()):(this._description.visible=!0,this._okContainer.visible=!1)},OkMoneyEventMediator.prototype.checkTimer=function(){0<this._mapData.timeEnd&&(this.updateTime(),this._timer=o.Application.date.callProcessor.repeatCall(this.updateTime.bind(this)))},OkMoneyEventMediator.prototype.onPhaseChanged=function(){this._mapData.phase===i.OkMoneyEventPhase.NONE?(this._endLabel.visible=!0,this._timerContainer.visible=!1):(this._label.text=o.Application.localization.localize(this._mapData.phase===i.OkMoneyEventPhase.FIRST?"OK_MONEY_EVENT_WINDOW_TIMER_2":"OK_MONEY_EVENT_WINDOW_TIMER_3"),this._endLabel.visible=!1,this._timerContainer.visible=!0,this._timer||this.checkTimer())},OkMoneyEventMediator.prototype.destroy=function(){o.Application.date.callProcessor.deleteCall(this._timer),this._timer=-1,r.prototype.destroy.call(this)},OkMoneyEventMediator}(n.DisplayObjectContainerMediator);e.OkMoneyEventMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(261)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function OkMoneyEventRouletteModel(t){var e=n.call(this)||this;return e._isSpinning=!1,e._rouletteDynamicItem=t,e}return a(OkMoneyEventRouletteModel,n),Object.defineProperty(OkMoneyEventRouletteModel.prototype,"id",{get:function(){return this._rouletteDynamicItem.id},enumerable:!0,configurable:!0}),Object.defineProperty(OkMoneyEventRouletteModel.prototype,"winSector",{get:function(){return this._winSector},set:function(t){this._winSector=t},enumerable:!0,configurable:!0}),Object.defineProperty(OkMoneyEventRouletteModel.prototype,"isSpinning",{get:function(){return this._isSpinning},set:function(t){t!==this._isSpinning&&(this._isSpinning=t,this.dispatchEvent(new r.OkMoneyEventRouletteModelEvent(r.OkMoneyEventRouletteModelEvent.SPINNING)))},enumerable:!0,configurable:!0}),Object.defineProperty(OkMoneyEventRouletteModel.prototype,"price",{get:function(){var t=i.Application.static.data.events.raffleMoney.spins.spin[parseInt(this.id)-1].prices;return i.Application.price.calculate(t)},enumerable:!0,configurable:!0}),OkMoneyEventRouletteModel.prototype.getSectorAward=function(t){var e=this._rouletteDynamicItem.sectors.getItem(t);return i.Application.award.convertObjectToCalculated(e.award).awards[0]},OkMoneyEventRouletteModel.prototype.addOk=function(){this.dispatchEvent(new r.OkMoneyEventRouletteModelEvent(r.OkMoneyEventRouletteModelEvent.OK_ADD))},OkMoneyEventRouletteModel}(uipixi.BaseEventTarget);e.OkMoneyEventRouletteModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1726)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function OkMoneyEventInitCommand(){return null!==t&&t.apply(this,arguments)||this}return a(OkMoneyEventInitCommand,t),OkMoneyEventInitCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.OkMoneyEventInitAction)];case 1:return t.sent(),[2]}})})},OkMoneyEventInitCommand}(n.CommandBase);e.OkMoneyEventInitCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function OkMoneyEventInitAction(){var t=e.call(this)||this;return t.action="init",t.controller="eventRaffleMoney",t.input=new i.ActionInput,t}return a(OkMoneyEventInitAction,e),OkMoneyEventInitAction}(n.Action);e.OkMoneyEventInitAction=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(503),n(0),n(2),n(43),n(4)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function OkMoneyEventShowCommand(){return null!==t&&t.apply(this,arguments)||this}return u(OkMoneyEventShowCommand,t),OkMoneyEventShowCommand.prototype.execute=function(e){return p(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,r.Application.resources.getResources(["okMoneyEvent",a.SoundName.WHEEL_ROTATE,a.SoundName.FORTUNE_WHEEL_WIN_JINGLE],!0)];case 1:return t.sent(),e.event.inited?[3,3]:[4,s.ElkaCore.instance.promiseManager.ask(new i.OkMoneyEventInitPromise)];case 2:t.sent(),t.label=3;case 3:return r.Application.view.show(o.GUINames.OK_MONEY_EVENT_WINDOW),[2]}})})},OkMoneyEventShowCommand}(n.CommandBase);e.OkMoneyEventShowCommand=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function OkMoneyEventSpinAction(t){var e=n.call(this)||this;return e.action="spin",e.controller="eventRaffleMoney",e.input=new i.ActionInput({rouletteId:t}),e.output=new o,e}return a(OkMoneyEventSpinAction,n),OkMoneyEventSpinAction}(n.Action);e.OkMoneyEventSpinAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.award=t.data.award.award,this.sector=t.data.award.sector},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),d=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},h=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(4),n(505),n(102),n(84),n(0),n(29)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=function(e){function OkMoneyEventRouletteMediator(){return null!==e&&e.apply(this,arguments)||this}return l(OkMoneyEventRouletteMediator,e),OkMoneyEventRouletteMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._activeRoulette=this._mapData.event.getRoulette(this._mapData.id),this._spinButton=this.child("spinButton"),this._timerLabel=this.child("timerLabel"),this._timerContainer=this.child("buttonBlockTimerContainer"),this._priceContainer=this.child("buttonPriceContainer"),this.registerListener(this._spinButton,u.POINTER_TAP,this.onSpinButtonTap.bind(this)),this.registerListener(this._mapData.event,o.OkMoneyEventModelEvent.PHASE_CHANGED,this.onPhaseChanged.bind(this)),this.prepareAnimationData(),this.onPhaseChanged()},OkMoneyEventRouletteMediator.prototype.onPhaseChanged=function(){if(this._mapData.id===a.OkMoneyEventRouletteId.COMMON)switch(this._mapData.event.phase){case a.OkMoneyEventPhase.FIRST:case a.OkMoneyEventPhase.SECOND:this._timerContainer.visible=!1,this._priceContainer.visible=!0,this._spinButton.enabled=!!this._spinButton.enabled&&s.Application.price.canSpend(this._activeRoulette.price);break;case a.OkMoneyEventPhase.NONE:this._spinButton.enabled=!1}else switch(this._mapData.event.phase){case a.OkMoneyEventPhase.FIRST:this._timerContainer.visible=!0,this._priceContainer.visible=!1,this.checkTimer(),this._spinButton.enabled=!1;break;case a.OkMoneyEventPhase.SECOND:this._timerContainer.visible=!1,this._priceContainer.visible=!0,this._spinButton.enabled=s.Application.price.canSpend(this._activeRoulette.price);break;case a.OkMoneyEventPhase.NONE:this._spinButton.enabled=!1}},OkMoneyEventRouletteMediator.prototype.checkTimer=function(){0<this._mapData.event.timeEnd&&(this.updateTime(),this._timer=s.Application.date.callProcessor.repeatCall(this.updateTime.bind(this)))},OkMoneyEventRouletteMediator.prototype.updateTime=function(){var t=this._mapData.event.timeEnd-s.Application.date.currentTime;0<t?this._timerLabel.text=c.DateUtils.timeToString(t):(s.Application.date.callProcessor.deleteCall(this._timer),this._timer=-1)},OkMoneyEventRouletteMediator.prototype.onSpinButtonTap=function(){return d(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return this._spinButton.enabled=!1,[4,i.ElkaCore.instance.promiseManager.ask(new r.OkMoneyEventSpinPromise(this._activeRoulette,this._animationData))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(this._spinButton.enabled=this._mapData.event.phase!==a.OkMoneyEventPhase.NONE&&s.Application.price.canSpend(this._activeRoulette.price),[2])}})})},OkMoneyEventRouletteMediator.prototype.prepareAnimationData=function(){this._animationData={container:this._container,wheelContainer:this.child("roulette"),wheelContentContainer:this.child("wheelContainer"),spinAnimation:this.child("spinAnimation"),sectorsContainer:this.child("sectorsContainer")}},OkMoneyEventRouletteMediator.prototype.destroy=function(){s.Application.date.callProcessor.deleteCall(this._timer),this._timer=-1,e.prototype.destroy.call(this)},OkMoneyEventRouletteMediator}(n.DisplayObjectContainerMediator);e.OkMoneyEventRouletteMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function OkMoneyEventRouletteSectorMediator(){return null!==i&&i.apply(this,arguments)||this}return a(OkMoneyEventRouletteSectorMediator,i),OkMoneyEventRouletteSectorMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t);var e=this._container.name.split("_")[1],n=this._mapData.event.getRoulette(this._mapData.id).getSectorAward(e);this._awardRenderer=new r.AwardRenderer,this._awardRenderer.initialize(n,this._container,{iconId:64,fit:!0,iconImage:"awardImage",countLabel:"valueLabel",titleLabel:!1})},OkMoneyEventRouletteSectorMediator.prototype.destroy=function(){this._awardRenderer.destroy(),i.prototype.destroy.call(this)},OkMoneyEventRouletteSectorMediator}(n.DisplayObjectContainerMediator);e.OkMoneyEventRouletteSectorMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(84),n(261)],void 0===(r=function(t,e,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function OkMoneyEventButtonMediator(){return null!==r&&r.apply(this,arguments)||this}return s(OkMoneyEventButtonMediator,r),OkMoneyEventButtonMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t),this._toggleButton=this._container,this._mapData.phase===o.OkMoneyEventPhase.FIRST&&"firstButton"===this._toggleButton.name?this._toggleButton.select(!0):this._mapData.phase===o.OkMoneyEventPhase.SECOND&&"secondButton"===this._toggleButton.name&&this._toggleButton.select(!0);for(var e=0,n=this._mapData.roulettes;e<n.length;e++){var i=n[e];this.registerListener(i,a.OkMoneyEventRouletteModelEvent.SPINNING,this.onSpinning.bind(this))}},OkMoneyEventButtonMediator.prototype.onSpinning=function(){this._toggleButton.enabled=this._mapData.roulettes.every(function(t){return!t.isSpinning})},OkMoneyEventButtonMediator}(n.DisplayObjectContainerMediator);e.OkMoneyEventButtonMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(34),n(120),n(84),n(30),n(2),n(506)],void 0===(r=function(t,e,n,s,c,u,p,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.Point,l=function(e){function OkMoneyEventRouletteAnimationSpinCommand(){var t=null!==e&&e.apply(this,arguments)||this;return t.TIME_PER_CIRCLE=1.5,t.BONUS_ANGLE=1800,t.MAX_ROULETTE_ANIMATION_WAIT_TIME=12e3,t}return d(OkMoneyEventRouletteAnimationSpinCommand,e),OkMoneyEventRouletteAnimationSpinCommand.prototype.execute=function(a){return h(this,void 0,void 0,function(){var e,n,i,r,o;return _(this,function(t){for(this._promise=a,this._lastAngle=0,this.sectorAngles=[],e=0;e<360;e+=OkMoneyEventRouletteAnimationSpinCommand.SECTOR_ANGLE)this.sectorAngles.push([e,e+OkMoneyEventRouletteAnimationSpinCommand.SECTOR_ANGLE]);return n=this.sectorAngles[a.rouletteModel.winSector-1],i=u.MathUtils.getRandom(n[0]+3,n[1]-3),r=(i+this.BONUS_ANGLE)*this.TIME_PER_CIRCLE/360*1e3,this._finalRouletteAngle=u.MathUtils.degreesToRadians(0-i+this.BONUS_ANGLE),o={wheelContainer:this._promise.data.wheelContentContainer,duration:r,lastAngle:u.MathUtils.degreesToRadians(this._lastAngle),rotation:this._finalRouletteAngle,borderRotationAnimation:function(){},sectorsContainer:this._promise.data.sectorsContainer,winAnimation:this.showWinAnimation.bind(this),pauseAfterWin:this._promise.rouletteModel.id===p.OkMoneyEventRouletteId.GOLD?1e3:100},this._lastAngle=i,this._animationProcess=s.Application.animation.create(OkMoneyEventRouletteAnimationSpinCommand.ANIMATION_SPIN,o),this._animationProcess.addEventListener(c.ProcessEvent.COMPLETE,this.onSpinAnimationComplete.bind(this)),this._animationProcess.start(),this._animationTimeout=s.Application.date.callProcessor.delayCall(this.forceStopAnimation.bind(this),this.MAX_ROULETTE_ANIMATION_WAIT_TIME),[2]})})},OkMoneyEventRouletteAnimationSpinCommand.prototype.forceStopAnimation=function(){this.showWinAnimation(),this._animationProcess.stop(!0)},OkMoneyEventRouletteAnimationSpinCommand.prototype.showWinAnimation=function(){this._animationTimeout&&(s.Application.date.callProcessor.deleteCall(this._animationTimeout),this._animationTimeout=-1)},OkMoneyEventRouletteAnimationSpinCommand.prototype.onSpinAnimationComplete=function(){this.startResourcesAnimation(),this._animationProcess.removeEventListener(c.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this))},OkMoneyEventRouletteAnimationSpinCommand.prototype.onAnimationComplete=function(){this._animations[0].removeEventListener(c.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this)),this._promise.completePromise&&this._promise.completePromise.resolve(null)},OkMoneyEventRouletteAnimationSpinCommand.prototype.startResourcesAnimation=function(){var t=this._promise.data.sectorsContainer.getChildByName("sector_"+this._promise.rouletteModel.winSector).getChildByName("awardImage"),e=t.getGlobalPosition();e.x+=t.width/2,e.y+=t.height/2;var n=s.Application.view.ui.stage.getChildByName(r.GUINames.OK_MONEY_EVENT_WINDOW);switch(this._promise.awardType){case o.OkMoneyEventAwardType.TICKET:n=n.getChildByName("eventGoldHUDBar");break;case o.OkMoneyEventAwardType.OK:n=n.getChildByName("okHUDBar");break;case o.OkMoneyEventAwardType.OTHER:n=n.getChildByName("homeButton")}this._animations=i.AnimationUtils.flyResources(t.resource,e,new a(e.x,e.y).add(new a(100,0)),n.getGlobalPosition().add(new a(n.width/2,n.height/2)),new a(30,30),{angle:90,count:1}),this._animations[0].addEventListener(c.ProcessEvent.COMPLETE,this.onAnimationComplete.bind(this))},OkMoneyEventRouletteAnimationSpinCommand.ANIMATION_SPIN="rouletteSpin",OkMoneyEventRouletteAnimationSpinCommand.SECTOR_ANGLE=30,OkMoneyEventRouletteAnimationSpinCommand}(n.CommandBase);e.OkMoneyEventRouletteAnimationSpinCommand=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(2),n(84),n(102)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.UIFactory,s=function(e){function OkMoneyEventIconContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return c(OkMoneyEventIconContainerMediator,e),OkMoneyEventIconContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.onPhaseChanged(),this.registerListener(this._mapData,o.OkMoneyEventModelEvent.PHASE_CHANGED,this.onPhaseChanged.bind(this))},OkMoneyEventIconContainerMediator.prototype.onPhaseChanged=function(){this._mapData.phase===r.OkMoneyEventPhase.NONE||this._icon?this._mapData.phase===r.OkMoneyEventPhase.NONE&&this._icon&&this.removeIcon():this.addIcon()},OkMoneyEventIconContainerMediator.prototype.addIcon=function(){this._icon=a.instance.createUIElementByName(i.GUINames.OK_MONEY_EVENT_ICON),this._container.addChild(this._icon)},OkMoneyEventIconContainerMediator.prototype.removeIcon=function(){this.unregisterListener(this._mapData,o.OkMoneyEventModelEvent.PHASE_CHANGED,this.onPhaseChanged.bind(this)),this._container.removeChild(this._icon)},OkMoneyEventIconContainerMediator}(n.DisplayObjectContainerMediator);e.OkMoneyEventIconContainerMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(29),n(45),n(4),n(504),n(84),n(102),n(42)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=uipixi.GestureEvent,d=function(e){function OkMoneyEventIconMediator(){return null!==e&&e.apply(this,arguments)||this}return h(OkMoneyEventIconMediator,e),OkMoneyEventIconMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._amountLabel=this.child("amountLabel"),this._countContainer=this.child("countContainer"),this._timerLabel=this.child("iconLabel"),this.updateTime(),this._timer=n.Application.date.callProcessor.repeatCall(this.updateTime.bind(this)),this.onPhaseChanged(),this.onTicketAmountChanged(),this.registerListener(this._mapData,u.OkMoneyEventModelEvent.PHASE_CHANGED,this.onPhaseChanged.bind(this)),this.registerListener(this._container,l.POINTER_TAP,this.onButton.bind(this))},OkMoneyEventIconMediator.prototype.onPhaseChanged=function(){this._mapData.phase===c.OkMoneyEventPhase.FIRST&&(this._resource=n.Application.model.resources.get("okEventRoulette1"),this.registerListener(this._resource,p.ResourceModelEvent.COUNT_CHANGED,this.onTicketAmountChanged.bind(this))),this._mapData.phase===c.OkMoneyEventPhase.SECOND&&(this._resource&&this.unregisterListener(this._resource,p.ResourceModelEvent.COUNT_CHANGED,this.onTicketAmountChanged.bind(this)),this._resource=n.Application.model.resources.get("okEventRoulette2"),this.registerListener(this._resource,p.ResourceModelEvent.COUNT_CHANGED,this.onTicketAmountChanged.bind(this)))},OkMoneyEventIconMediator.prototype.onTicketAmountChanged=function(){this._countContainer.visible=0!==this._resource.count,this._amountLabel.text=this._resource.count.toString()},OkMoneyEventIconMediator.prototype.updateTime=function(){var t=this._mapData.timeEnd-n.Application.date.currentTime;0<t&&(this._timerLabel.text=r.DateUtils.timeToString(t),this._timerLabel.fill=t>o.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000")},OkMoneyEventIconMediator.prototype.onButton=function(){a.ElkaCore.instance.promiseManager.ask(new s.OkMoneyEventShowPromise(this._mapData))},OkMoneyEventIconMediator.prototype.destroy=function(){n.Application.date.callProcessor.deleteCall(this._timer),this._timer=-1,e.prototype.destroy.call(this)},OkMoneyEventIconMediator}(i.DisplayObjectContainerMediator);e.OkMoneyEventIconMediator=d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1736),n(0),n(41)],void 0===(r=function(t,e,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function EventNewYearAchievementsModel(t,e){var n=i.call(this)||this;return n._dynamicData=t,n._staticData=e,n.setupModel(),n}return a(EventNewYearAchievementsModel,i),EventNewYearAchievementsModel.prototype.setupModel=function(){this._achievements={};for(var t=0,e=this._staticData.achievement.items;t<e.length;t++){var n=e[t];if(!this._dynamicData.getItem(n.id.toString())){var i={};i[n.id.toString()]={},this._dynamicData.update(i)}this._achievements[n.id]=new r.EventNewYearAchievementModel(this._dynamicData.getItem(n.id.toString()),n)}},Object.defineProperty(EventNewYearAchievementsModel.prototype,"generalAchievement",{get:function(){return this._achievements[1]},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementsModel.prototype,"extraAchievement",{get:function(){return this._achievements[2]},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementsModel.prototype,"currentPhaseAchievement",{get:function(){return n.Application.model.eventNewYear.phase===o.EventNewYearPhase.GENERAL?n.Application.model.eventNewYear.achievements.generalAchievement:n.Application.model.eventNewYear.phase===o.EventNewYearPhase.EXTRA?n.Application.model.eventNewYear.achievements.extraAchievement:null},enumerable:!0,configurable:!0}),EventNewYearAchievementsModel.prototype.getAchievementById=function(t){return this._achievements[t]},EventNewYearAchievementsModel}(uipixi.BaseEventTarget);e.EventNewYearAchievementsModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(508),n(1737),n(13),n(85),n(37)],void 0===(r=function(t,e,a,r,s,n,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function EventNewYearAchievementModel(t,e){var n=i.call(this)||this;return n._stagesCount=0,n._history=[],n._dynamicItem=t,n._staticItem=e,n.setupModel(),n}return u(EventNewYearAchievementModel,i),EventNewYearAchievementModel.prototype.setupModel=function(){this._stages={};for(var t=0,e=this._staticItem.stages.stage.items;t<e.length;t++){var n=e[t];-1!==n.id&&(this._stagesCount+=1,this._stages[n.id]=new a.EventNewYearAchievementStageModel(this._dynamicItem,n))}this._dynamicItem.addEventListener(s.BaseDataEvent.CHILDREN_CHANGED,this.onChildrenChanged.bind(this));for(var i=0,r=this._dynamicItem.history.items;i<r.length;i++){var o=r[i];this._history.push(o.stage)}this._history.sort(function(t,e){return t-e}),this.updateFirstNotTakenStage(),this._dynamicItem.history.addEventListener(c.ItemCollectionEvent.ITEM_ADDED,this.onHistoryItemAdded.bind(this))},EventNewYearAchievementModel.prototype.onHistoryItemAdded=function(t){this._history.push(t.item.stage),this._history.sort(function(t,e){return t-e}),this.updateFirstNotTakenStage(),this.dispatchEvent(new n.EventNewYearAchievementModelEvent(n.EventNewYearAchievementModelEvent.HISTORY_CHANGED))},EventNewYearAchievementModel.prototype.updateFirstNotTakenStage=function(){var t=this._firstNotTakenStage;this._firstNotTakenStage=1;for(var e=0;e<this._history.length&&(this._firstNotTakenStage=e+1,e+1===this._history[e]);e++);this._firstNotTakenStage===this._history[this._history.length-1]&&(this._firstNotTakenStage+=1),t!==this._firstNotTakenStage&&this.dispatchEvent(new n.EventNewYearAchievementModelEvent(n.EventNewYearAchievementModelEvent.STAGE_CHANGED))},EventNewYearAchievementModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("progress")&&this.dispatchEvent(new n.EventNewYearAchievementModelEvent(n.EventNewYearAchievementModelEvent.PROGRESS_CHANGED)),this.dispatchEvent(new n.EventNewYearAchievementModelEvent(n.EventNewYearAchievementModelEvent.MODEL_CHANGED))},Object.defineProperty(EventNewYearAchievementModel.prototype,"stage",{get:function(){return this._firstNotTakenStage-1},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementModel.prototype,"progress",{get:function(){return this._dynamicItem.progress},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementModel.prototype,"id",{get:function(){return this._dynamicItem.id},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearAchievementModel.prototype,"maxPossibleStage",{get:function(){return this._dynamicItem.stage},enumerable:!0,configurable:!0}),EventNewYearAchievementModel.prototype.getCurrentFiveStages=function(){for(var t=[],e=5*Math.floor(this.stage/5)+1,n=e+4,i=e;i<=n;i++)i>this._stagesCount?t.push(new r.EventNewYearAchievementLastStageModel(this._dynamicItem,this._staticItem.stages.stage.getItem(-1),i)):t.push(this._stages[i]);return t},EventNewYearAchievementModel.prototype.getStage=function(t){return t>this._stagesCount?new r.EventNewYearAchievementLastStageModel(this._dynamicItem,this._staticItem.stages.stage.getItem(-1),t):this._stages[t]},EventNewYearAchievementModel.prototype.stageIsReached=function(t){for(var e=0,n=this._history;e<n.length;e++){if(t===n[e])return!0}return!1},EventNewYearAchievementModel.prototype.hasReadyStage=function(){var t=this.getStage(this._firstNotTakenStage);return!this.stageIsReached(t.id)&&t.canGetStage()},EventNewYearAchievementModel}(uipixi.BaseEventTarget);e.EventNewYearAchievementModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(508),n(0)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(r){function EventNewYearAchievementLastStageModel(t,e,n){var i=r.call(this,t,e)||this;return i._stage=n,i}return a(EventNewYearAchievementLastStageModel,r),Object.defineProperty(EventNewYearAchievementLastStageModel.prototype,"id",{get:function(){return this._stage},enumerable:!0,configurable:!0}),EventNewYearAchievementLastStageModel.prototype.canGetStage=function(){var t={};return t["stageAchievement"+this._dynamicItem.id]=this._stage.toString(),this._dynamicItem.progress>=i.Application.calculator.calculate(this._staticItem.task,t)},Object.defineProperty(EventNewYearAchievementLastStageModel.prototype,"task",{get:function(){var t={};return t["stageAchievement"+this._dynamicItem.id]=this._stage.toString(),i.Application.calculator.calculate(this._staticItem.task,t)},enumerable:!0,configurable:!0}),EventNewYearAchievementLastStageModel}(n.EventNewYearAchievementStageModel);e.EventNewYearAchievementLastStageModel=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(167)],void 0===(r=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(n){function EventNewYearPresentsModel(t){var e=n.call(this)||this;return e._opened=[],e._excludedFriends=[],e._dynamicData=t,e._dynamicData.addEventListener(i.BaseDataEvent.CHANGED,e.onDataChanged.bind(e)),e}return a(EventNewYearPresentsModel,n),EventNewYearPresentsModel.prototype.onDataChanged=function(){this.dispatchEvent(new r.EventNewYearPresentsModelEvent(r.EventNewYearPresentsModelEvent.CHANGED))},EventNewYearPresentsModel.prototype.getSentUserIds=function(e){return this._dynamicData.send.items.filter(function(t){return t.resources.items.some(function(t){return t.resourceId===e})}).map(function(t){return parseInt(t.id)})},EventNewYearPresentsModel.prototype.isResourceReceived=function(e){return this._dynamicData.get.items.some(function(t){return t.inboxKey===e})},EventNewYearPresentsModel.prototype.isResourceSent=function(t,e){var n=this._dynamicData.send.getItem(t.toString());return n&&n.resources.items.some(function(t){return t.resourceId===e})},Object.defineProperty(EventNewYearPresentsModel.prototype,"receivedCount",{get:function(){return this._dynamicData.get.items.length},enumerable:!0,configurable:!0}),EventNewYearPresentsModel.prototype.open=function(t){this._opened.push(t),this.dispatchEvent(new r.EventNewYearPresentsModelEvent(r.EventNewYearPresentsModelEvent.CHANGED))},EventNewYearPresentsModel.prototype.isOpened=function(t){return 0<=this._opened.indexOf(t)},Object.defineProperty(EventNewYearPresentsModel.prototype,"sentCount",{get:function(){var e=0;return this._dynamicData.send.items.forEach(function(t){e+=t.resources.items.length}),e},enumerable:!0,configurable:!0}),EventNewYearPresentsModel.prototype.excludeFriend=function(t){this._excludedFriends.push(t)},EventNewYearPresentsModel.prototype.isFriendExcluded=function(t){return 0<=this._excludedFriends.indexOf(t)},EventNewYearPresentsModel}(uipixi.BaseEventTarget);e.EventNewYearPresentsModel=n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(262),n(260),n(19)],void 0===(r=function(t,e,o,n,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function EventNewYearRatingsModel(){for(var t=r.call(this)||this,e=0,n=o.Application.static.data.events.newYear.ratings.settings.setting;e<n.length;e++){var i=n[e];"ratingId"===i.name&&(t._ratingId=parseInt(i.value))}return t._staticItem=o.Application.static.data.ratings.rating.getItem(t._ratingId),t._scores=new s.ItemCollection(a.RatingItem,null),t._scores.init({}),t}return c(EventNewYearRatingsModel,r),EventNewYearRatingsModel.prototype.updateRatingData=function(t){this._scores.reinit(t),this.dispatchEvent(new n.EventNewYearRatingsModelEvent(n.EventNewYearRatingsModelEvent.RATING_LOADED))},Object.defineProperty(EventNewYearRatingsModel.prototype,"ratingItems",{get:function(){return this._scores.items.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingsModel.prototype,"staticItem",{get:function(){return this._staticItem},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingsModel.prototype,"myRatingAward",{get:function(){return o.Application.award.calculate(o.Application.static.data.events.newYear.ratings.places.place.getItem(this.myAwardPlace.toString()).awards)},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingsModel.prototype,"myListPlace",{get:function(){for(var t=1,e=0,n=this._scores.items;e<n.length;e++){if(n[e].socialId===o.Application.dynamic.user.sUserId)break;t+=1}return t},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearRatingsModel.prototype,"myAwardPlace",{get:function(){for(var t=this.myListPlace,e=0,n=0,i=this._staticItem.places.place.items;n<i.length;n++){var r=i[n];r.from<=t&&r.to>=t&&(e=r.id)}return e},enumerable:!0,configurable:!0}),EventNewYearRatingsModel}(uipixi.BaseEventTarget);e.EventNewYearRatingsModel=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(59),n(98),n(85),n(41),n(42),n(263),n(167),n(90)],void 0===(r=function(t,e,i,r,o,a,n,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(e){function EventNewYearMarkersModel(t){var n=e.call(this)||this;return n._canGetAchievement=!1,n._canReceiveGift=!1,n._canSendGift=!1,n._canOpenGift=!1,n._canSpendStars=!1,n._canGetRatingAward=!1,n._inboxModel=i.Application.mail.getInbox(r.EventNewYearModule.INBOX_ID),n._eventNewYearModel=t,n._inboxModel.addEventListener(o.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED,n.updateMarkers.bind(n)),n._eventNewYearModel.achievements.generalAchievement.addEventListener(a.EventNewYearAchievementModelEvent.PROGRESS_CHANGED,n.updateMarkers.bind(n)),n._eventNewYearModel.achievements.generalAchievement.addEventListener(a.EventNewYearAchievementModelEvent.HISTORY_CHANGED,n.updateMarkers.bind(n)),n._eventNewYearModel.achievements.extraAchievement.addEventListener(a.EventNewYearAchievementModelEvent.PROGRESS_CHANGED,n.updateMarkers.bind(n)),n._eventNewYearModel.achievements.extraAchievement.addEventListener(a.EventNewYearAchievementModelEvent.HISTORY_CHANGED,n.updateMarkers.bind(n)),n._eventNewYearModel.presents.addEventListener(u.EventNewYearPresentsModelEvent.CHANGED,n.updateMarkers.bind(n)),n._eventNewYearModel.addEventListener(p.EventNewYearEvent.RATING_PLACE_CHANGED,n.updateMarkers.bind(n)),n._resources=[],[r.EventNewYearResource.GIFT_1,r.EventNewYearResource.GIFT_2,r.EventNewYearResource.GIFT_3].forEach(function(t){var e=i.Application.model.resources.get(t);e.addEventListener(s.ResourceModelEvent.COUNT_CHANGED,n.updateMarkers.bind(n)),n._resources.push(e)}),n._starResource=i.Application.model.resources.get(r.EventNewYearResource.STAR),n._starResource.addEventListener(s.ResourceModelEvent.COUNT_CHANGED,n.updateMarkers.bind(n)),n.updateMarkers(),n}return d(EventNewYearMarkersModel,e),EventNewYearMarkersModel.prototype.updateMarkers=function(){var e=this;this._eventNewYearModel.phase===n.EventNewYearPhase.GENERAL?(this._canGetAchievement=this._eventNewYearModel.achievements.generalAchievement.hasReadyStage(),this._canReceiveGift=this._inboxModel.getAllItems().length!==this._eventNewYearModel.presents.receivedCount,this._canSendGift=this._resources.some(function(t){return 0<t.count})):(this._canGetAchievement=this._eventNewYearModel.achievements.extraAchievement.hasReadyStage(),this._canOpenGift=this._inboxModel.getAllItems().some(function(t){return!e._eventNewYearModel.presents.isOpened(t.inboxKey)}),this._canSpendStars=0<this._starResource.count,this._canGetRatingAward=0===this._eventNewYearModel.ratingPlace&&0!==this._eventNewYearModel.rating.items.length),this.dispatchEvent(new c.EventNewYearMarkersModelEvent(c.EventNewYearMarkersModelEvent.CHANGED))},Object.defineProperty(EventNewYearMarkersModel.prototype,"canSendGift",{get:function(){return this._canSendGift},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearMarkersModel.prototype,"canReceiveGift",{get:function(){return this._canReceiveGift},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearMarkersModel.prototype,"canOpenGift",{get:function(){return this._canOpenGift},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearMarkersModel.prototype,"canSpendStars",{get:function(){return this._canSpendStars},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearMarkersModel.prototype,"canGetAchievement",{get:function(){return this._canGetAchievement},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearMarkersModel.prototype,"canGetRatingAward",{get:function(){return this._canGetRatingAward},enumerable:!0,configurable:!0}),EventNewYearMarkersModel}(uipixi.BaseEventTarget);e.EventNewYearMarkersModel=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(13),n(168),n(0),n(88),n(41)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function EventNewYearUseEnergyModel(){var t=e.call(this)||this;return t._dynamicData=r.Application.dynamic.user.events.newYear,t._staticData=r.Application.static.data.events.newYear.useEnergy,t._useEnergySystem=r.Application.objects.useEnergySystem,t._dynamicData.addEventListener(n.BaseDataEvent.CHILDREN_CHANGED,t.onChildrenChanged.bind(t)),t}return c(EventNewYearUseEnergyModel,e),EventNewYearUseEnergyModel.prototype.getLevelAwards=function(t){return r.Application.award.calculate(this._staticData.awards,{eventLevel:t.toString()})},EventNewYearUseEnergyModel.prototype.onChildrenChanged=function(t){-1!==t.children.indexOf("level")&&1!==this.level&&this.dispatchEvent(new i.EventNewYearUseEnergyModelEvent(i.EventNewYearUseEnergyModelEvent.LEVEL_UP))},Object.defineProperty(EventNewYearUseEnergyModel.prototype,"level",{get:function(){return this._dynamicData.level},enumerable:!0,configurable:!0}),Object.defineProperty(EventNewYearUseEnergyModel.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp!==t&&(this._exp=t,this.dispatchEvent(new o.UserModelEvent(i.EventNewYearUseEnergyModelEvent.EXP_CHANGED)))},enumerable:!0,configurable:!0}),EventNewYearUseEnergyModel.prototype.getExpToLevel=function(t){return r.Application.calculator.calculate(this._expFormula,{eventLevel:t.toString()})},EventNewYearUseEnergyModel.prototype.start=function(t){this.requestedLevel=this.level,this._exp=this._dynamicData.exp,this._expFormula=t===a.EventNewYearPhase.GENERAL?this._staticData.expGeneral:this._staticData.expExtra,this._useEnergySystem.registerEvent(this)},EventNewYearUseEnergyModel.prototype.stop=function(){this._useEnergySystem.unregisterEvent()},EventNewYearUseEnergyModel}(uipixi.BaseEventTarget);e.EventNewYearUseEnergyModel=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(2),n(41),n(90)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.UIFactory,c=function(e){function EventNewYearIconContainerMediator(){return null!==e&&e.apply(this,arguments)||this}return u(EventNewYearIconContainerMediator,e),EventNewYearIconContainerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._eventNewYearModel=i.Application.model.eventNewYear,this._eventNewYearModel.phase!==o.EventNewYearPhase.NONE?(this.registerListener(this._eventNewYearModel,a.EventNewYearEvent.PHASE_FINISH,this.onPhaseFinish.bind(this)),this.addIcon()):this.registerListener(this._eventNewYearModel,a.EventNewYearEvent.PHASE_START,this.onPhaseStart.bind(this))},EventNewYearIconContainerMediator.prototype.addIcon=function(){this._icon=s.instance.createUIElementByName(r.GUINames.EVENT_NEW_YEAR_ICON),this._container.addChild(this._icon)},EventNewYearIconContainerMediator.prototype.removeIcon=function(){this._container.removeChild(this._icon)},EventNewYearIconContainerMediator.prototype.onPhaseStart=function(){this.unregisterListener(this._eventNewYearModel,a.EventNewYearEvent.PHASE_START,this.onPhaseStart.bind(this)),this.registerListener(this._eventNewYearModel,a.EventNewYearEvent.PHASE_FINISH,this.onPhaseFinish.bind(this)),this.addIcon()},EventNewYearIconContainerMediator.prototype.onPhaseFinish=function(){this.removeIcon(),this.unregisterListener(this._eventNewYearModel,a.EventNewYearEvent.PHASE_FINISH,this.onPhaseFinish.bind(this)),this.registerListener(this._eventNewYearModel,a.EventNewYearEvent.PHASE_START,this.onPhaseStart.bind(this))},EventNewYearIconContainerMediator}(n.DisplayObjectContainerMediator);e.EventNewYearIconContainerMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,_=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(29),n(45),n(41),n(90),n(4),n(264),n(263),n(169)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=uipixi.GestureEvent,h=function(e){function EventNewYearIconMediator(){return null!==e&&e.apply(this,arguments)||this}return _(EventNewYearIconMediator,e),EventNewYearIconMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._markers=this.child("markersContainer"),this._timerLabel=this.child("iconLabel"),this._eventNewYearModel=n.Application.model.eventNewYear,this.registerListener(this._eventNewYearModel.markersModel,p.EventNewYearMarkersModelEvent.CHANGED,this.updateMarkers.bind(this)),this.registerListener(this._eventNewYearModel,s.EventNewYearEvent.TIMER,this.updateTime.bind(this)),this.registerListener(this._container,d.POINTER_TAP,this.onButton.bind(this)),this.updateTime(),this.updateMarkers()},EventNewYearIconMediator.prototype.updateMarkers=function(){this._openTab=l.EventNewYearWindowTabName.GIFTS,this._markers.currentState="off",this._eventNewYearModel.markersModel.canGetAchievement?this._markers.currentState="done":this._eventNewYearModel.phase===a.EventNewYearPhase.GENERAL?this._eventNewYearModel.markersModel.canReceiveGift?(this._markers.currentState="done",this._openTab=l.EventNewYearWindowTabName.MAIL):this._eventNewYearModel.markersModel.canSendGift&&(this._markers.currentState="attention"):this._eventNewYearModel.markersModel.canGetRatingAward?(this._markers.currentState="done",this._openTab=l.EventNewYearWindowTabName.RATING):this._eventNewYearModel.markersModel.canOpenGift?(this._markers.currentState="attention",this._openTab=l.EventNewYearWindowTabName.MAIL):this._eventNewYearModel.markersModel.canSpendStars&&(this._markers.currentState="attention")},EventNewYearIconMediator.prototype.updateTime=function(){this._timerLabel.text=r.DateUtils.timeToString(this._eventNewYearModel.timeLeft),this._timerLabel.fill=this._eventNewYearModel.timeLeft>o.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000"},EventNewYearIconMediator.prototype.onButton=function(){c.ElkaCore.instance.promiseManager.ask(new u.EventNewYearShowWindowPromise(this._openTab))},EventNewYearIconMediator}(i.DisplayObjectContainerMediator);e.EventNewYearIconMediator=h}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),_=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},f=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(2),n(4),n(265),n(510),n(59),n(8),n(41)],void 0===(r=function(t,e,o,n,a,s,c,u,p,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearShowWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return h(EventNewYearShowWindowCommand,t),EventNewYearShowWindowCommand.prototype.execute=function(r){return _(this,void 0,void 0,function(){var e,n,i;return f(this,function(t){switch(t.label){case 0:return(e=["eventNewYear"]).push(o.Application.model.eventNewYear.phase===d.EventNewYearPhase.GENERAL?"eventNewYear_bg_general":"eventNewYear_bg_extra"),[4,o.Application.resources.getResources(e,!0)];case 1:return t.sent(),o.Application.view.show(a.GUINames.EVENT_NEW_YEAR_WINDOW,new l.ViewContext({tab:r.tab})),o.Application.model.eventNewYear.phase===d.EventNewYearPhase.GENERAL?(n=o.Application.mail.getInbox(p.EventNewYearModule.INBOX_ID).getAllItems().length,i=o.Application.model.eventNewYear.calculatedPlaceSize,n===i?o.Application.view.show(a.GUINames.EVENT_NEW_YEAR_LIMIT_WINDOW):s.ElkaCore.instance.promiseManager.ask(new c.ShowClientHelpWindowPromise(u.ClientHelpId.EVENT_NEW_YEAR_GENERAL))):s.ElkaCore.instance.promiseManager.ask(new c.ShowClientHelpWindowPromise(u.ClientHelpId.EVENT_NEW_YEAR_EXTRA)),r.resolve(null),[2]}})})},EventNewYearShowWindowCommand}(n.CommandBase);e.EventNewYearShowWindowCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(15)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(n){function EventNewYearRatingLeftGeneralMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._awardRenderers=[],t}return a(EventNewYearRatingLeftGeneralMediator,n),EventNewYearRatingLeftGeneralMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.setup(),this.initContainer1(),this.initContainer2(),this.initContainer3()},EventNewYearRatingLeftGeneralMediator.prototype.setup=function(){this._ratingItemStatic=i.Application.model.eventNewYear.ratings.staticItem,this._ratingPlacesStatic=i.Application.static.data.events.newYear.ratings.places},EventNewYearRatingLeftGeneralMediator.prototype.initContainer1=function(){var t=this.child("placeContainer1");this.setPlaceLabel(t.getChildByName("placeTitle"),this._ratingItemStatic.places.place.getItem(1));var e=i.Application.award.calculate(this._ratingPlacesStatic.place.getItem("1").awards);this.setupAwardContainer(t.getChildByName("awardContainer1"),e.awards[0]),this.setupAwardContainer(t.getChildByName("awardContainer2"),e.awards[1]),this.setupAwardContainer(t.getChildByName("awardContainer3"),e.awards[2]);var n=new r.AwardRenderer;n.initialize(e.awards[3],t.getChildByName("awardContainer4"),{iconId:96}),this._awardRenderers.push(n)},EventNewYearRatingLeftGeneralMediator.prototype.initContainer2=function(){var t=this.child("placeContainer2");this.setPlaceLabel(t.getChildByName("placeTitle"),this._ratingItemStatic.places.place.getItem(2));var e=i.Application.award.calculate(this._ratingPlacesStatic.place.getItem("2").awards);this.setupAwardContainer(t.getChildByName("awardContainer1"),e.awards[0]),this.setupAwardContainer(t.getChildByName("awardContainer2"),e.awards[1])},EventNewYearRatingLeftGeneralMediator.prototype.initContainer3=function(){var t=this.child("placeContainer3");this.setPlaceLabel(t.getChildByName("placeTitle"),this._ratingItemStatic.places.place.getItem(3));var e=i.Application.award.calculate(this._ratingPlacesStatic.place.getItem("3").awards);this.setupAwardContainer(t.getChildByName("awardContainer1"),e.awards[0])},EventNewYearRatingLeftGeneralMediator.prototype.setPlaceLabel=function(t,e){t.text=i.Application.localization.localize("EVENT_NEW_YEAR_RATING_PLACES")+(e.from+"-")+e.to},EventNewYearRatingLeftGeneralMediator.prototype.setupAwardContainer=function(t,e){var n=new r.AwardRenderer;n.initialize(e,t,{fit:32,iconId:64}),this._awardRenderers.push(n)},EventNewYearRatingLeftGeneralMediator.prototype.destroy=function(){for(var t=0,e=this._awardRenderers;t<e.length;t++){e[t].destroy()}n.prototype.destroy.call(this)},EventNewYearRatingLeftGeneralMediator}(n.DisplayObjectContainerMediator);e.EventNewYearRatingLeftGeneralMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(42),n(4),n(266),n(38)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=uipixi.Point,p=function(e){function EventNewYearWindowGiftSlotMediator(){return null!==e&&e.apply(this,arguments)||this}return l(EventNewYearWindowGiftSlotMediator,e),EventNewYearWindowGiftSlotMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._resourceModel=i.Application.model.resources.get(this._mapData.resourceId),this.registerListener(this._resourceModel,r.ResourceModelEvent.COUNT_CHANGED,this.onCountChange.bind(this)),this._iconImage=this.child("iconImage"),this._iconImage.resource=s.PriceAwardUtils.getResourceResourceId(this._resourceModel.id,"96"),this._countLabel=this.child("countLabel"),this._sendButton=this.child("sendButton"),this.registerListener(this._sendButton,c.POINTER_TAP,this.onButton.bind(this)),this.onCountChange()},EventNewYearWindowGiftSlotMediator.prototype.onCountChange=function(){this._countLabel.text="x"+this._resourceModel.count,this._sendButton.enabled=0<this._resourceModel.count},EventNewYearWindowGiftSlotMediator.prototype.onButton=function(){var t={startPoint:this._iconImage.getGlobalPosition().add(new u(this._iconImage.width/2,this._iconImage.height/2)),resourceId:this._resourceModel.id};o.ElkaCore.instance.promiseManager.ask(new a.EventNewYearWindowSendGiftPromise(this._resourceModel.id,null,t))},EventNewYearWindowGiftSlotMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowGiftSlotMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(8),n(85),n(41)],void 0===(r=function(t,e,n,u,c,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=uipixi.UIFactory,o=uipixi.Point,a=uipixi.UIImage,s=function(e){function EventNewYearAchievementsWindowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._progressBarMetrics=[],t}return l(EventNewYearAchievementsWindowMediator,e),EventNewYearAchievementsWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setupComponents(),this.setupCurrentAchievement(),this.updateProgress(!1),this.updateAwards(),this.updateAwardInfo(),this.selectFirstAward()},EventNewYearAchievementsWindowMediator.prototype.setupCurrentAchievement=function(){this._currentAchievement=u.Application.model.eventNewYear.achievements.currentPhaseAchievement,this.registerListener(this._currentAchievement,i.EventNewYearAchievementModelEvent.HISTORY_CHANGED,this.onStageChanged.bind(this)),this.registerListener(this._currentAchievement,i.EventNewYearAchievementModelEvent.ANIMATE_GIFT,this.animateGift.bind(this))},EventNewYearAchievementsWindowMediator.prototype.setupComponents=function(){this._progressBarMetrics.push(121/754),this._progressBarMetrics.push(153/754),this._progressBarMetrics.push(150/754),this._progressBarMetrics.push(151/754),this._progressBarMetrics.push(149/754),this._progressContainer=this.child("progressContainer"),this._awardContainers=[];for(var t=1;t<=5;t++)this._awardContainers.push(this._progressContainer.getChildByName("awardContainer"+t));u.Application.model.eventNewYear.phase===r.EventNewYearPhase.GENERAL?(this._progressBar=this._progressContainer.getChildByName("progressBar1"),this._progressContainer.removeChild(this._progressContainer.getChildByName("progressBar2"))):u.Application.model.eventNewYear.phase===r.EventNewYearPhase.EXTRA&&(this._progressBar=this._progressContainer.getChildByName("progressBar2"),this._progressContainer.removeChild(this._progressContainer.getChildByName("progressBar1"))),this._progressBar.visible=!0;var e=this.child("descriptionLabel");u.Application.model.eventNewYear.phase===r.EventNewYearPhase.GENERAL?e.text=u.Application.localization.localize("EVENT_NEW_YEAR_GIFTS_DESCRIPTION_AWARDS"):u.Application.model.eventNewYear.phase===r.EventNewYearPhase.EXTRA&&(e.text=u.Application.localization.localize("EVENT_NEW_YEAR_GIFTS_EXTRA_DESCRIPTION_AWARDS"))},EventNewYearAchievementsWindowMediator.prototype.onStageChanged=function(){this.updateProgress(!1),this.updateAwards(),this.updateAwardInfo(),this.selectFirstAward()},EventNewYearAchievementsWindowMediator.prototype.updateProgress=function(t){void 0===t&&(t=!0);var e=this._currentAchievement.getCurrentFiveStages();if(this._currentAchievement.maxPossibleStage>=e[4].id)return this._progressBar.progress=1,this._progressBar.invalidate(),void this._progressBar.update();for(var n=this._currentAchievement.getStage(this._currentAchievement.maxPossibleStage)?this._currentAchievement.getStage(this._currentAchievement.maxPossibleStage).task:0,i=this._currentAchievement.getStage(this._currentAchievement.maxPossibleStage+1).task,r=(this._currentAchievement.progress-n)/(i-n),o=this._currentAchievement.maxPossibleStage%5,a=0,s=0;s<o;s++)a+=this._progressBarMetrics[s];var c=a+this._progressBarMetrics[o]*r;t?this._progress=u.Application.animation.animate(this._progressBar,"achievementProgressBar",{progress:c}):(this._progressBar.progress=c,this._progressBar.invalidate(),this._progressBar.update())},EventNewYearAchievementsWindowMediator.prototype.updateAwardInfo=function(){for(var t=0,e=this._currentAchievement.getCurrentFiveStages();t<e.length;t++){var n=e[t];if(!this._currentAchievement.stageIsReached(n.id))return void this._currentAchievement.dispatchEvent(new i.EventNewYearAchievementModelEvent(i.EventNewYearAchievementModelEvent.STAGE_SELECTED,n))}},EventNewYearAchievementsWindowMediator.prototype.updateAwards=function(){this.clearAwardContainers();for(var t=this._currentAchievement.getCurrentFiveStages(),e=this.selectFirstAward(),n=0,i=0,r=t;i<r.length;i++){var o=r[i],a=void 0;a=o.isToyAward?"toyAwardAchievement":4===n?"fifthSimpleAwardAchievement":"simpleAwardAchievement";var s=p.instance.createUIElementByName(a);s.buttonMode=!0,u.Application.view.addChild(this._awardContainers[n],s,new c.ViewContext({stage:o,achievement:this._currentAchievement,selected:e===o.id})),n+=1}},EventNewYearAchievementsWindowMediator.prototype.selectFirstAward=function(){for(var t=0,e=this._currentAchievement.getCurrentFiveStages();t<e.length;t++){var n=e[t];if(!this._currentAchievement.stageIsReached(n.id))return n.id}return 0},EventNewYearAchievementsWindowMediator.prototype.clearAwardContainers=function(){for(var t=0,e=this._awardContainers;t<e.length;t++)for(var n=e[t];0<n.children.length;)n.removeChild(n.children[0])},EventNewYearAchievementsWindowMediator.prototype.animateGift=function(t){var e=t.data;u.Application.debug.addLogToConsole("EventNewYearAchievementsWindowMediator",e);var n=this._progressBar._bar,i=n.getGlobalPosition().add(new o(n.width,n.height/2)),r=new a(u.Application.model.resources.get(e.resourceId).static.view.icons.icon.getItem("96").resourceId);r.anchor="topLeft",r.render.pivot.set(r.width/2,r.height/2),this._animation=u.Application.animation.animate(r,"flyGiftToProgress",{startX:e.startPoint.x,startY:e.startPoint.y,finalX:i.x,finalY:i.y,onComplete:this.updateProgress.bind(this)})},EventNewYearAchievementsWindowMediator.prototype.destroy=function(){this._animation&&this._animation.stop(),this._progress&&this._progress.stop(),e.prototype.destroy.call(this)},EventNewYearAchievementsWindowMediator}(n.DisplayObjectContainerMediator);e.EventNewYearAchievementsWindowMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(85)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=uipixi.GestureEvent,a=function(e){function EventNewYearAchievementsWindowProgressAwardMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._selected=!1,t}return s(EventNewYearAchievementsWindowProgressAwardMediator,e),EventNewYearAchievementsWindowProgressAwardMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setup(),this.update(),this.registerListener(this._showData.achievement,r.EventNewYearAchievementModelEvent.HISTORY_CHANGED,this.update.bind(this)),this.registerListener(this._showData.achievement,r.EventNewYearAchievementModelEvent.PROGRESS_CHANGED,this.update.bind(this)),this.registerListener(this._showData.achievement,r.EventNewYearAchievementModelEvent.STAGE_SELECTED,this.onStageSelected.bind(this)),this.registerListener(this._container,o.POINTER_TAP,this.onTap.bind(this)),this.checkSelected()},EventNewYearAchievementsWindowProgressAwardMediator.prototype.checkSelected=function(){this._showData.selected&&(this._selected=!0,this.update())},EventNewYearAchievementsWindowProgressAwardMediator.prototype.onStageSelected=function(t){var e=t.data.id;this._selected=this._showData.stage.id===e,this.update()},EventNewYearAchievementsWindowProgressAwardMediator.prototype.onTap=function(){this._showData.achievement.stageIsReached(this._showData.stage.id)||this._showData.achievement.dispatchEvent(new r.EventNewYearAchievementModelEvent(r.EventNewYearAchievementModelEvent.STAGE_SELECTED,this._showData.stage))},EventNewYearAchievementsWindowProgressAwardMediator.prototype.setup=function(){this._showData.achievement.stageIsReached(this._showData.stage.id)||(this._showData.stage.isToyAward?this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.stage.award,this.child("awardContainer"),{iconId:64,beautyLabel:this.child("beautyContainer").getChildByName("beautyLabel")}):this._awardRenderer=(new i.AwardRenderer).initialize(this._showData.stage.award,this._container,{iconId:48}))},EventNewYearAchievementsWindowProgressAwardMediator.prototype.update=function(){this._selected?this._container.currentState="selected":this._showData.achievement.stageIsReached(this._showData.stage.id)?this._container.currentState="received":this._showData.stage.canGetStage()?this._container.currentState="readyToGet":this._container.currentState="notReady"},EventNewYearAchievementsWindowProgressAwardMediator.prototype.destroy=function(){this._awardRenderer&&this._awardRenderer.destroy(),e.prototype.destroy.call(this)},EventNewYearAchievementsWindowProgressAwardMediator}(n.DisplayObjectContainerMediator);e.EventNewYearAchievementsWindowProgressAwardMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(45),n(29),n(41)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function EventNewYearWindowClocksMediator(){return null!==e&&e.apply(this,arguments)||this}return c(EventNewYearWindowClocksMediator,e),EventNewYearWindowClocksMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),i.Application.model.eventNewYear.phase===a.EventNewYearPhase.GENERAL?(this._container.currentState="general",this._hourHand=this.child("hour"),this._minuteHand=this.child("minute"),this._untilNYLabel=this.child("untilNYLabel"),this._endTime=i.Application.requirements.timeFromDateString("2019-12-31 23:59:59"),this._jobId=i.Application.date.callProcessor.repeatCall(this.updateHands.bind(this),1e3),this.updateHands()):this._container.currentState="extra"},EventNewYearWindowClocksMediator.prototype.updateHands=function(){var t=i.Application.date.currentDate,e=this._endTime-i.Application.date.currentTime;this._minuteHand.angle=6*t.getMinutes(),this._hourHand.angle=30*t.getHours()+30*t.getMinutes()/60,e<=0?(this._untilNYLabel.text="#2020",this.stopTimer()):this._untilNYLabel.text=e>r.TIME.SECONDS_IN_DAY?i.Application.localization.localize("EVENT_NEW_YEAR_DAYS_UNTIL_NY",Math.floor(e/r.TIME.SECONDS_IN_DAY)):o.DateUtils.timeToString(e)},EventNewYearWindowClocksMediator.prototype.stopTimer=function(){0<this._jobId&&(i.Application.date.callProcessor.deleteCall(this._jobId),this._jobId=0)},EventNewYearWindowClocksMediator.prototype.destroy=function(){this.stopTimer(),e.prototype.destroy.call(this)},EventNewYearWindowClocksMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowClocksMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},O=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(2),n(8),n(1751),n(49),n(116),n(115),n(33),n(61),n(56),n(194),n(85)],void 0===(r=function(t,e,n,p,l,d,h,_,f,y,m,v,b,g,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearWindowSendGiftCommand(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearWindowSendGiftCommand,t),EventNewYearWindowSendGiftCommand.prototype.execute=function(u){return s(this,void 0,void 0,function(){var e,n,i,r,o,a,s,c;return O(this,function(t){switch(t.label){case 0:return(e=new y.CalculatedPrice).add(new f.CalculatedPriceItem(_.PriceType.RESOURCE,1,u.resourceId)),(n=p.Application.price.hold(e)).success?(i={resourceId:u.resourceId,selectedFriend:u.friendData},u.friendData?[3,2]:((r=new d.ViewContext).showData=i,[4,p.Application.view.show(l.GUINames.EVENT_NEW_YEAR_SELECT_FRIEND_WINDOW,r).onClose])):[2];case 1:t.sent(),t.label=2;case 2:if(!i.selectedFriend)return[3,17];o=i.selectedFriend.userId+":"+i.selectedFriend.sUserId+":"+i.selectedFriend.hash,t.label=3;case 3:return t.trys.push([3,5,,12]),[4,p.Application.server.send(new h.EventNewYearSendPresentAction(u.resourceId,o))];case 4:return t.sent(),[3,12];case 5:return(a=t.sent())instanceof v.ServerError?a.code!==b.ServerErrorCode.EVENT_NEW_YEAR_NO_PLACE?[3,7]:(p.Application.model.eventNewYear.presents.excludeFriend(i.selectedFriend.userId),a.stopPropagation(!1),[4,p.Application.view.show(l.GUINames.ERROR_WINDOW,new d.ViewContext({title:"EVENT_NEW_YEAR_CANT_SEND_GIFT_TITLE",text:"EVENT_NEW_YEAR_CANT_SEND_GIFT_TEXT",button:g.ErrorWindowButton.CONTINUE})).onClose]):[3,10];case 6:return t.sent(),[3,9];case 7:return a.code!==b.ServerErrorCode.EVENT_NEW_YEAR_CANNOT_AVAILABLE?[3,9]:(p.Application.model.eventNewYear.presents.excludeFriend(i.selectedFriend.userId),a.stopPropagation(!1),[4,p.Application.view.show(l.GUINames.ERROR_WINDOW,new d.ViewContext({title:"EVENT_NEW_YEAR_CANT_SEND_GIFT_TITLE",text:"EVENT_NEW_YEAR_CANT_SEND_GIFT_NOT_ACTIVE_TEXT",button:g.ErrorWindowButton.CONTINUE})).onClose]);case 8:t.sent(),t.label=9;case 9:return p.Application.price.rollback(n),[2];case 10:throw a;case 11:return[3,12];case 12:return p.Application.price.release(n),i.selectedFriend.isNPC?[3,16]:p.Application.social.platformType!==m.PlatformType.VK?[3,14]:(s=p.Application.static.data.events.newYear.presents.content.present.getItem(u.resourceId).wallpost,[4,p.Application.social.post(s,null,i.selectedFriend.sUserId)]);case 13:return t.sent(),[3,16];case 14:return c=p.Application.static.data.events.newYear.presents.content.present.getItem(u.resourceId).notificationKey,[4,p.Application.social.notify([i.selectedFriend.sUserId],p.Application.localization.localize(c,{gender:p.Application.profiles.current.isMale}))];case 15:t.sent(),t.label=16;case 16:return u.friendData||p.Application.model.eventNewYear.achievements.generalAchievement.dispatchEvent(new w.EventNewYearAchievementModelEvent(w.EventNewYearAchievementModelEvent.ANIMATE_GIFT,u.animData)),[3,18];case 17:p.Application.price.rollback(n),t.label=18;case 18:return[2]}})})},EventNewYearWindowSendGiftCommand}(n.CommandBase);e.EventNewYearWindowSendGiftCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function EventNewYearSendPresentAction(t,e){var n=i.call(this)||this;return n.action="sendPresent",n.controller="eventNewYear",n.input=new r.ActionInput({itemId:t,friendData:e}),n.output=new o,n}return a(EventNewYearSendPresentAction,i),EventNewYearSendPresentAction}(n.Action);e.EventNewYearSendPresentAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(16),n(59),n(98),n(41)],void 0===(r=function(t,e,n,o,i,r,a,s){"use strict";var c,u;Object.defineProperty(e,"__esModule",{value:!0}),(u=c||(c={}))[u.NOT_RECEIVED_NPC=1]="NOT_RECEIVED_NPC",u[u.NOT_RECEIVED_FRIEND=2]="NOT_RECEIVED_FRIEND",u[u.NOT_RECEIVED_NEIGHBOR=3]="NOT_RECEIVED_NEIGHBOR",u[u.NOT_SENT_FRIEND=4]="NOT_SENT_FRIEND",u[u.NOT_SENT_NEIGHBOR=5]="NOT_SENT_NEIGHBOR",u[u.NOT_SENT_NPC=6]="NOT_SENT_NPC",u[u.SENT_FRIEND=7]="SENT_FRIEND",u[u.SENT_NEIGHBOR=8]="SENT_NEIGHBOR",u[u.SENT_NPC=9]="SENT_NPC",u[u.NOT_OPENED_NPC=10]="NOT_OPENED_NPC",u[u.NOT_OPENED_FRIEND=11]="NOT_OPENED_FRIEND",u[u.NOT_OPENED_NEIGHBOR=12]="NOT_OPENED_NEIGHBOR",u[u.OPENED_FRIEND=13]="OPENED_FRIEND",u[u.OPENED_NEIGHBOR=14]="OPENED_NEIGHBOR",u[u.OPENED_NPC=15]="OPENED_NPC";var p=function EventNewYearMailItem(t,e){this.mailItem=t,this.type=e},l=function(n){function EventNewYearWindowMailTabMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._sortPriorityPhase1=[c.NOT_RECEIVED_NPC,c.NOT_RECEIVED_FRIEND,c.NOT_RECEIVED_NEIGHBOR,c.NOT_SENT_FRIEND,c.NOT_SENT_NEIGHBOR,c.NOT_SENT_NPC,c.SENT_FRIEND,c.SENT_NEIGHBOR,c.SENT_NPC],t._sortPriorityPhase2=[c.NOT_OPENED_NPC,c.NOT_OPENED_FRIEND,c.NOT_OPENED_NEIGHBOR,c.OPENED_FRIEND,c.OPENED_NEIGHBOR,c.OPENED_NPC],t}return d(EventNewYearWindowMailTabMediator,n),EventNewYearWindowMailTabMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._mailList=this.child("mailList");var e=this.child("bg");this._eventModel=o.Application.model.eventNewYear,this._inboxModel=o.Application.mail.getInbox(r.EventNewYearModule.INBOX_ID),this.child("noMailLabel").visible=this._eventModel.phase===s.EventNewYearPhase.GENERAL&&0===this._inboxModel.getAllItems().length,this.child("noMailExtraLabel").visible=this._eventModel.phase===s.EventNewYearPhase.EXTRA&&0===this._inboxModel.getAllItems().length,this.onUpdateItems(),this._loadableBg=new i.LoadableImage(e,e.resource,!1),this._eventModel.phase===s.EventNewYearPhase.GENERAL&&(this.registerListener(this._inboxModel,a.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED,this.onUpdateItems.bind(this)),o.Application.mail.update(r.EventNewYearModule.INBOX_ID))},EventNewYearWindowMailTabMediator.prototype.onUpdateItems=function(){var e=this;this._mailList.removeAllItems(),this.child("noMailLabel").visible=this._eventModel.phase===s.EventNewYearPhase.GENERAL&&0===this._inboxModel.getAllItems().length,this.child("noMailExtraLabel").visible=this._eventModel.phase===s.EventNewYearPhase.EXTRA&&0===this._inboxModel.getAllItems().length;var t=this._inboxModel.getItemsGroupedByUserId().map(function(t){return new p(t,e._eventModel.phase===s.EventNewYearPhase.GENERAL?e.getTypePhase1(t):e.getTypePhase2(t))});t.sort(this.sortMailItems.bind(this)),this._mailList.addItems(t.map(function(t){return t.mailItem}))},EventNewYearWindowMailTabMediator.prototype.sortMailItems=function(t,e){for(var n=0,i=this._eventModel.phase===s.EventNewYearPhase.GENERAL?this._sortPriorityPhase1:this._sortPriorityPhase2;n<i.length;n++){var r=i[n];if(t.type===r&&e.type!==r)return-1;if(t.type!==r&&e.type===r)return 1;if(t.type===r&&e.type===r)return e.mailItem.userId-t.mailItem.userId}},EventNewYearWindowMailTabMediator.prototype.getTypePhase1=function(t){var e=this,n=t.userId<0,i=o.Application.dynamic.friends.getItem(t.inboxItems[0].socialId),r=!i||i.inClan;return t.inboxItems.some(function(t){return!e._eventModel.presents.isResourceReceived(t.inboxKey)})?n?c.NOT_RECEIVED_NPC:r?c.NOT_RECEIVED_NEIGHBOR:c.NOT_RECEIVED_FRIEND:this._eventModel.presents.isResourceSent(t.userId,t.inboxItems[0].itemId)?n?c.SENT_NPC:r?c.SENT_NEIGHBOR:c.SENT_FRIEND:n?c.NOT_SENT_NPC:r?c.NOT_SENT_NEIGHBOR:c.NOT_SENT_FRIEND},EventNewYearWindowMailTabMediator.prototype.getTypePhase2=function(t){var e=this,n=t.userId<0,i=o.Application.dynamic.friends.getItem(t.inboxItems[0].socialId),r=!i||i.inClan;return t.inboxItems.some(function(t){return!e._eventModel.presents.isOpened(t.inboxKey)})?n?c.NOT_OPENED_NPC:r?c.NOT_OPENED_NEIGHBOR:c.NOT_OPENED_FRIEND:n?c.OPENED_NPC:r?c.OPENED_NEIGHBOR:c.OPENED_FRIEND},EventNewYearWindowMailTabMediator.prototype.destroy=function(){this._loadableBg.destroy(),n.prototype.destroy.call(this)},EventNewYearWindowMailTabMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowMailTabMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(41),n(21),n(2),n(59),n(98),n(85)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(e){function EventNewYearWindowMailLimitMediator(){return null!==e&&e.apply(this,arguments)||this}return l(EventNewYearWindowMailLimitMediator,e),EventNewYearWindowMailLimitMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._eventModel=i.Application.model.eventNewYear,this._eventModel.phase===r.EventNewYearPhase.GENERAL?(this._limitLabel=this.child("limitLabel"),this._inboxModel=i.Application.mail.getInbox(s.EventNewYearModule.INBOX_ID),i.Application.tooltip.addTooltip(this.child("infoLimitButton"),o.TooltipAnchor.Top,a.GUINames.TEXT_TOOLTIP,{text:"EVENT_NEW_YEAR_LIMIT_INFO_TOOLTIP"}),this.registerListener(this._inboxModel,c.MailModelEvent.INBOX_ITEMS_COUNT_CHANGED,this.onUpdate.bind(this)),this.registerListener(this._eventModel.achievements.generalAchievement,u.EventNewYearAchievementModelEvent.PROGRESS_CHANGED,this.onUpdate.bind(this)),this.onUpdate()):this._container.visible=!1},EventNewYearWindowMailLimitMediator.prototype.onUpdate=function(){var t=this._inboxModel.getAllItems().length,e=i.Application.model.eventNewYear.calculatedPlaceSize;this._limitLabel.text=t+"/"+e},EventNewYearWindowMailLimitMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowMailLimitMediator=p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,E=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),A=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},M=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(40),n(0),n(41),n(15),n(54),n(14),n(4),n(513),n(167),n(21),n(2),n(266),n(30),n(59),n(38),n(514),n(58)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p,l,d,h,_,f,y,m,v,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g,w,O=uipixi.GestureEvent,S=uipixi.Point;(w=g=e.EventNewYearWindowMailListItemState||(e.EventNewYearWindowMailListItemState={})).RECEIVE="receive",w.REPLY="reply",w.DONE="done",w.OPEN="open",w.OPENED="opened";var P=function(n){function EventNewYearWindowMailListItemMediator(){var t,e=null!==n&&n.apply(this,arguments)||this;return e._labelByResourceId=((t={})[y.EventNewYearResource.GIFT_1]="countGifts1Label",t[y.EventNewYearResource.GIFT_2]="countGifts2Label",t[y.EventNewYearResource.GIFT_3]="countGifts3Label",t),e._animations=[],e}return E(EventNewYearWindowMailListItemMediator,n),EventNewYearWindowMailListItemMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this._socialId=this._showData.inboxItems[0].socialId,this._userId=this._showData.inboxItems[0].userId,this._eventModel=r.Application.model.eventNewYear,this._friendItem=r.Application.dynamic.friends.getItem(this._socialId),this._inboxModel=r.Application.mail.getInbox(y.EventNewYearModule.INBOX_ID),this._nameLabel=this.child("nameLabel"),this._giftsCountLabel=this.child("giftsCountLabel"),this._replyButton=this.child("replyButton"),this._checkImage=this.child("checkImage"),this._iconImage=this.child("iconImage"),this._checkImage.render.pivot.x=.5*this._checkImage.width,this._checkImage.offsetX+=this._checkImage.render.pivot.x,this._checkImage.render.pivot.y=.5*this._checkImage.height,this._checkImage.offsetY+=this._checkImage.render.pivot.y,this._resourceModel=r.Application.model.resources.get(this._showData.inboxItems[0].itemId),this.updateState(),this.setParams(),this.registerListener(this.child("getButton"),O.POINTER_TAP,this.onGetButton.bind(this)),this.registerListener(this.child("openButton"),O.POINTER_TAP,this.onOpenButton.bind(this)),this.registerListener(this._replyButton,O.POINTER_TAP,this.onReplyButton.bind(this)),this.registerListener(this._eventModel.presents,l.EventNewYearPresentsModelEvent.CHANGED,this.updateState.bind(this))},EventNewYearWindowMailListItemMediator.prototype.updateState=function(){var e=this;this._eventModel.phase===o.EventNewYearPhase.EXTRA?(this._notOpenedItems=this._showData.inboxItems.filter(function(t){return!e._eventModel.presents.isOpened(t.inboxKey)}),this.setItemState(0<this._notOpenedItems.length?g.OPEN:g.OPENED),this._giftsCountLabel.visible=1<this._notOpenedItems.length,1<this._notOpenedItems.length&&(this._giftsCountLabel.text="x"+this._notOpenedItems.length)):(this._notReceivedItems=this._showData.inboxItems.filter(function(t){return!e._eventModel.presents.isResourceReceived(t.inboxKey)}),0<this._notReceivedItems.length?(this.setItemState(g.RECEIVE),this._giftsCountLabel.visible=1<this._notReceivedItems.length,1<this._notReceivedItems.length&&(this._giftsCountLabel.text="x"+this._notReceivedItems.length)):this._eventModel.presents.isResourceSent(this._userId,this._showData.inboxItems[0].itemId)||!this._friendItem?this.setItemState(g.DONE):(this.setItemState(g.REPLY),this._replyButton.enabled=0<this._resourceModel.count,0===this._resourceModel.count&&r.Application.tooltip.addTooltip(this._replyButton,d.TooltipAnchor.Top,h.GUINames.TEXT_TOOLTIP,{text:"EVENT_NEW_YEAR_CAN_NOT_REPLY_TOOLTIP"})))},EventNewYearWindowMailListItemMediator.prototype.setItemState=function(t){this._container.currentState===g.REPLY&&r.Application.tooltip.removeTooltip(this._replyButton),this._container.currentState=t},EventNewYearWindowMailListItemMediator.prototype.setParams=function(){this._awardRenderer=(new a.AwardRenderer).initialize(new s.CalculatedAwardItem(c.AwardType.fromString(this._showData.inboxItems[0].itemType),1,this._showData.inboxItems[0].itemId),this._container,{iconId:"48"}),this.loadProfile()},EventNewYearWindowMailListItemMediator.prototype.loadProfile=function(){return A(this,void 0,void 0,function(){var e;return M(this,function(t){switch(t.label){case 0:return[4,r.Application.profiles.getProfiles([this._socialId])];case 1:return e=t.sent(),this._cancellationToken.requested?[2]:(e[0]&&(this._profileRenderer=(new i.ProfileRenderer).initialize(e[0],this._container,{cropedFirstnameLength:15,cropedLastnameLength:15,delimiter:"\n",cropedFisrtnameSuffix:b.StringUtils.DEFAULT_CROP_SUFFIX,cropedLastnameSuffix:b.StringUtils.DEFAULT_CROP_SUFFIX})),[2])}})})},EventNewYearWindowMailListItemMediator.prototype.onGetButton=function(){return A(this,void 0,void 0,function(){var e;return M(this,function(t){switch(t.label){case 0:return e=this._notReceivedItems.length,[4,u.ElkaCore.instance.promiseManager.ask(new p.EventNewYearWindowGetGiftPromise(this._notReceivedItems.map(function(t){return t.inboxKey})))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(this.animateCheck(),this.animateResources(e),[2])}})})},EventNewYearWindowMailListItemMediator.prototype.onOpenButton=function(){return A(this,void 0,void 0,function(){var e=this;return M(this,function(t){switch(t.label){case 0:return this._notOpenedItems=this._showData.inboxItems.filter(function(t){return!e._eventModel.presents.isOpened(t.inboxKey)}),[4,u.ElkaCore.instance.promiseManager.ask(new v.EventNewYearWindowOpenGiftPromise(this._notOpenedItems[0].inboxKey))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(this.updateState(),this.animateCheck(),[2])}})})},EventNewYearWindowMailListItemMediator.prototype.animateCheck=function(){this._checkAnimation=r.Application.animation.animate(this._checkImage,"eventNewYearMailItemCheck")},EventNewYearWindowMailListItemMediator.prototype.animateResources=function(t){var e,n=this._iconImage.getGlobalPosition(),i=this.window.getChildByName(this._labelByResourceId[this._resourceModel.id]).getGlobalPosition(),r=f.AnimationUtils.flyResources(m.PriceAwardUtils.getResourceResourceId(this._resourceModel.id,"48"),n,new S(n.x-30,n.y-30),i,new S(10,10),{angle:0,count:8<t?8:t});(e=this._animations).push.apply(e,r)},EventNewYearWindowMailListItemMediator.prototype.onReplyButton=function(){this._friendItem&&u.ElkaCore.instance.promiseManager.ask(new _.EventNewYearWindowSendGiftPromise(this._resourceModel.id,this._friendItem))},EventNewYearWindowMailListItemMediator.prototype.destroy=function(){this._checkAnimation&&this._checkAnimation.stop();for(var t=0,e=this._animations;t<e.length;t++){e[t].stop()}this._profileRenderer&&this._profileRenderer.destroy(),this._awardRenderer&&this._awardRenderer.destroy(),n.prototype.destroy.call(this)},EventNewYearWindowMailListItemMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowMailListItemMediator=P}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(1756)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function EventNewYearWindowGetGiftCommand(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearWindowGetGiftCommand,t),EventNewYearWindowGetGiftCommand.prototype.execute=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.EventNewYearGetPresentAction(e.mailIds))];case 1:return t.sent(),[2]}})})},EventNewYearWindowGetGiftCommand}(n.CommandBase);e.EventNewYearWindowGetGiftCommand=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function EventNewYearGetPresentAction(t){var e=n.call(this)||this;return e.action="getPresent",e.controller="eventNewYear",e.input=new i.ActionInput({mailIds:t}),e.output=new o,e}return a(EventNewYearGetPresentAction,n),EventNewYearGetPresentAction}(n.Action);e.EventNewYearGetPresentAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),l=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},d=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1758),n(0),n(8),n(2)],void 0===(r=function(t,e,n,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearAchievementStageUpCommand(){return null!==t&&t.apply(this,arguments)||this}return p(EventNewYearAchievementStageUpCommand,t),EventNewYearAchievementStageUpCommand.prototype.execute=function(o){return l(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){switch(t.label){case 0:return[4,s.Application.server.send(new a.EventNewYearAchievementStageUpAction(o.achievementId,o.stageId))];case 1:return e=t.sent(),n=s.Application.award.convertObjectToCalculated(e.output.award),i=new c.ViewContext({baseAward:n,title:s.Application.localization.localize("EVENT_NEW_YEAR_GIFTS_ACHIEVEMENT_AWARD_TITLE"),description:s.Application.localization.localize("EVENT_NEW_YEAR_GIFTS_ACHIEVEMENT_AWARD_DESCRIPTION")}),0<(r=s.Application.model.eventNewYear.achievements.getAchievementById(parseInt(o.achievementId)).getStage(o.stageId).wallpostId)&&(i.showData.wallpostId=r),[4,s.Application.view.show(u.GUINames.AWARDS_WINDOW,i).onClose];case 2:return t.sent(),s.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},EventNewYearAchievementStageUpCommand}(n.CommandBase);e.EventNewYearAchievementStageUpCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(i){function EventNewYearAchievementStageUpAction(t,e){var n=i.call(this)||this;return n.action="achievementGetAward",n.controller="eventNewYear",n.input=new r.ActionInput({achievementId:t,stageId:e}),n.output=new o,n}return a(EventNewYearAchievementStageUpAction,i),EventNewYearAchievementStageUpAction}(n.Action);e.EventNewYearAchievementStageUpAction=i;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data,this.award=this.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,l=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(15),n(4),n(515),n(85),n(41)],void 0===(r=function(t,e,n,r,o,a,s,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=uipixi.GestureEvent,i=function(i){function EventNewYearAchievementAwardInfoMediator(){return null!==i&&i.apply(this,arguments)||this}return l(EventNewYearAchievementAwardInfoMediator,i),EventNewYearAchievementAwardInfoMediator.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this._awardInfoContainer=this._container,this._tipContainer=this.child("tipContainer"),this._awardInfoAwardRenderers=new core.Map;var e=this._awardInfoContainer.getChildByName("getSimpleAward").getChildByName("getButton"),n=this._awardInfoContainer.getChildByName("getToyAward").getChildByName("getButton");this.registerListener(e,p.POINTER_TAP,this.onStageUp.bind(this)),this.registerListener(n,p.POINTER_TAP,this.onStageUp.bind(this)),this.setupCurrentAchievement(),this.registerListener(this._currentAchievement,c.EventNewYearAchievementModelEvent.STAGE_SELECTED,this.onStageSelected.bind(this)),this.registerListener(this._currentAchievement,c.EventNewYearAchievementModelEvent.PROGRESS_CHANGED,this.updateAwardInfo.bind(this)),this.selectFirstAward()},EventNewYearAchievementAwardInfoMediator.prototype.setupCurrentAchievement=function(){this._currentAchievement=r.Application.model.eventNewYear.achievements.currentPhaseAchievement},EventNewYearAchievementAwardInfoMediator.prototype.selectFirstAward=function(){for(var t=0,e=this._currentAchievement.getCurrentFiveStages();t<e.length;t++){var n=e[t];if(!this._currentAchievement.stageIsReached(n.id))return this._selectedStage=n,void this.updateAwardInfo()}},EventNewYearAchievementAwardInfoMediator.prototype.onStageSelected=function(t){this._selectedStage=t.data,this.updateAwardInfo()},EventNewYearAchievementAwardInfoMediator.prototype.updateAwardInfo=function(){var t="";this._selectedStage.canGetStage()?this._selectedStage.isToyAward?(t="getToyAward",this.drawToyBeauty(this._awardInfoContainer.getChildByName(""+t),this._selectedStage)):(t="getSimpleAward",this.drawAwardRenderer(this._awardInfoContainer.getChildByName(""+t),this._selectedStage,t)):this._selectedStage.isToyAward?(t="toyAward",this.drawToyBeauty(this._awardInfoContainer.getChildByName(""+t),this._selectedStage),r.Application.model.eventNewYear.phase===u.EventNewYearPhase.GENERAL?this.drawGiftsCount(this._awardInfoContainer.getChildByName(""+t),this._selectedStage,"EVENT_NEW_YEAR_GIFTS_TOY_AWARD_KEY_1"):r.Application.model.eventNewYear.phase===u.EventNewYearPhase.EXTRA&&this.drawGiftsCount(this._awardInfoContainer.getChildByName(""+t),this._selectedStage,"EVENT_NEW_YEAR_GIFTS_EXTRA_TOY_AWARD_KEY_1")):(t="simpleAward",this.drawAwardRenderer(this._awardInfoContainer.getChildByName(""+t),this._selectedStage,t),r.Application.model.eventNewYear.phase===u.EventNewYearPhase.GENERAL?this.drawGiftsCount(this._awardInfoContainer.getChildByName(""+t),this._selectedStage,"EVENT_NEW_YEAR_GIFTS_SIMPLE_AWARD_KEY_2"):r.Application.model.eventNewYear.phase===u.EventNewYearPhase.EXTRA&&this.drawGiftsCount(this._awardInfoContainer.getChildByName(""+t),this._selectedStage,"EVENT_NEW_YEAR_GIFTS_EXTRA_SIMPLE_AWARD_KEY_2")),this._awardInfoContainer.currentState=t,this._tipContainer.currentState="stage"+this._selectedStage.id%5},EventNewYearAchievementAwardInfoMediator.prototype.drawGiftsCount=function(t,e,n){var i=e.task-this._currentAchievement.progress;r.Application.model.eventNewYear.phase===u.EventNewYearPhase.GENERAL?t.getChildByName("titleKey").text=r.Application.localization.localize("EVENT_NEW_YEAR_GIFTS_SIMPLE_AWARD_KEY_1"):r.Application.model.eventNewYear.phase===u.EventNewYearPhase.EXTRA&&(t.getChildByName("titleKey").text=r.Application.localization.localize("EVENT_NEW_YEAR_GIFTS_EXTRA_SIMPLE_AWARD_KEY_1")),t.getChildByName("giftsCount").text=i.toString(),t.getChildByName("countAwardLabel").text=r.Application.localization.localize(n,i)},EventNewYearAchievementAwardInfoMediator.prototype.drawToyBeauty=function(t,e){e.canGetStage()&&(t.getChildByName("toyNameLabel").text=r.Application.localization.localize(r.Application.model.toys.get(e.award.itemId).static.view.title)),t.getChildByName("countLabel").text=r.Application.model.toys.get(e.award.itemId).static.beauty.toString()},EventNewYearAchievementAwardInfoMediator.prototype.drawAwardRenderer=function(t,e,n){this._awardInfoAwardRenderers.has(n)||this._awardInfoAwardRenderers.set(n,new o.AwardRenderer),this._awardInfoAwardRenderers.get(n).initialized?this._awardInfoAwardRenderers.get(n).updateAward(e.award):parseInt(this._currentAchievement.id)%5==0?this._awardInfoAwardRenderers.get(n).initialize(e.award,t,{iconId:64}):this._awardInfoAwardRenderers.get(n).initialize(e.award,t,{iconId:48})},EventNewYearAchievementAwardInfoMediator.prototype.onStageUp=function(){a.ElkaCore.instance.promiseManager.ask(new s.EventNewYearAchievementStageUpPromise(this._currentAchievement.id,this._selectedStage.id))},EventNewYearAchievementAwardInfoMediator.prototype.destroy=function(){this._awardInfoAwardRenderers.forEach(function(t){return t.destroy()}),i.prototype.destroy.call(this)},EventNewYearAchievementAwardInfoMediator}(n.DisplayObjectContainerMediator);e.EventNewYearAchievementAwardInfoMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(41),n(167),n(59)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function EventNewYearWindowMailReceivedMediator(){return null!==e&&e.apply(this,arguments)||this}return c(EventNewYearWindowMailReceivedMediator,e),EventNewYearWindowMailReceivedMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._countGifts1Label=this.child("countGifts1Label"),this._countGifts2Label=this.child("countGifts2Label"),this._countGifts3Label=this.child("countGifts3Label"),this._eventModel=i.Application.model.eventNewYear,this._mailInboxModel=i.Application.mail.getInbox(a.EventNewYearModule.INBOX_ID),this.registerListener(this._eventModel.presents,o.EventNewYearPresentsModelEvent.CHANGED,this.onPresentsChanged.bind(this)),this.onPresentsChanged()},EventNewYearWindowMailReceivedMediator.prototype.onPresentsChanged=function(){this._countGifts1Label.text=this.getReceivedResourcesCount(a.EventNewYearResource.GIFT_1).toString(),this._countGifts2Label.text=this.getReceivedResourcesCount(a.EventNewYearResource.GIFT_2).toString(),this._countGifts3Label.text=this.getReceivedResourcesCount(a.EventNewYearResource.GIFT_3).toString()},EventNewYearWindowMailReceivedMediator.prototype.getReceivedResourcesCount=function(t){var e=this;return this._mailInboxModel.getInboxItemsByItemId(t).filter(function(t){return e._eventModel.phase===r.EventNewYearPhase.GENERAL?e._eventModel.presents.isResourceReceived(t.inboxKey):!e._eventModel.presents.isOpened(t.inboxKey)}).length},EventNewYearWindowMailReceivedMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowMailReceivedMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(29),n(45),n(90)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function EventNewYearWindowTimerMediator(){return null!==e&&e.apply(this,arguments)||this}return c(EventNewYearWindowTimerMediator,e),EventNewYearWindowTimerMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._timerLabel=this.child("timeLabel"),this._eventNewYearModel=n.Application.model.eventNewYear,this.registerListener(this._eventNewYearModel,a.EventNewYearEvent.TIMER,this.updateTime.bind(this)),this.updateTime()},EventNewYearWindowTimerMediator.prototype.updateTime=function(){this._timerLabel.text=r.DateUtils.timeToString(this._eventNewYearModel.timeLeft),this._timerLabel.fill=this._eventNewYearModel.timeLeft>o.TIME.SECONDS_IN_HOUR?"0xffffff":"0xff0000"},EventNewYearWindowTimerMediator}(i.DisplayObjectContainerMediator);e.EventNewYearWindowTimerMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(50),n(4),n(265),n(510),n(0),n(41)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function EventNewYearWindowHelpMediator(){return null!==t&&t.apply(this,arguments)||this}return u(EventNewYearWindowHelpMediator,t),EventNewYearWindowHelpMediator.prototype.onButton=function(t){i.ElkaCore.instance.promiseManager.ask(new r.ShowClientHelpWindowPromise(a.Application.model.eventNewYear.phase===s.EventNewYearPhase.GENERAL?o.ClientHelpId.EVENT_NEW_YEAR_GENERAL:o.ClientHelpId.EVENT_NEW_YEAR_EXTRA,!0))},EventNewYearWindowHelpMediator}(n.SimpleButtonMediator);e.EventNewYearWindowHelpMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1764),n(0),n(61),n(56)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function EventNewYearGetRatingCommand(){return null!==t&&t.apply(this,arguments)||this}return c(EventNewYearGetRatingCommand,t),EventNewYearGetRatingCommand.prototype.execute=function(t){return u(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.Application.server.send(new i.EventNewYearGetRatingAction)];case 1:return e=t.sent(),[3,3];case 2:if((n=t.sent())instanceof o.ServerError)return n.code===a.ServerErrorCode.EVENT_RATING_NOT_READY&&(n.stopPropagation(!1),r.Application.model.eventNewYear.ratings.updateRatingData({})),[2];throw n;case 3:return r.Application.model.eventNewYear.ratings.updateRatingData(e.output.data),[2]}})})},EventNewYearGetRatingCommand}(n.CommandBase);e.EventNewYearGetRatingCommand=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(10),n(9)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function EventNewYearGetRatingAction(){var t=e.call(this)||this;return t.action="getRating",t.controller="eventNewYear",t.input=new n.ActionInput,t.output=new o,t}return a(EventNewYearGetRatingAction,e),EventNewYearGetRatingAction}(i.Action);e.EventNewYearGetRatingAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(4),n(516),n(0),n(262),n(259),n(8),n(21),n(2)],void 0===(r=function(t,e,n,c,i,u,r,p,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(e){function EventNewYearRatingRatingsBlockMediator(){return null!==e&&e.apply(this,arguments)||this}return d(EventNewYearRatingRatingsBlockMediator,e),EventNewYearRatingRatingsBlockMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setup()},EventNewYearRatingRatingsBlockMediator.prototype.setup=function(){this._usersList=this.child("usersList"),this._ratingNotExist=this.child("ratingNotExist"),c.ElkaCore.instance.promiseManager.ask(new i.EventNewYearGetRatingPromise),this.registerListener(u.Application.model.eventNewYear.ratings,r.EventNewYearRatingsModelEvent.RATING_LOADED,this.onRatingLoaded.bind(this)),this.setupInfo()},EventNewYearRatingRatingsBlockMediator.prototype.onRatingLoaded=function(){if(0!==u.Application.model.eventNewYear.ratings.ratingItems.length)this.setupList();else{this._ratingNotExist.visible=!0;var t=this._ratingNotExist.getChildByName("progressContainer");this._loadingAnimation=u.Application.animation.animate(t,"loading")}},EventNewYearRatingRatingsBlockMediator.prototype.setupSelfData=function(t){u.Application.view.addChild(this._container,"selfRatingPositionContainer",new o.ViewContext(t))},EventNewYearRatingRatingsBlockMediator.prototype.setupList=function(){this._usersList.removeAllItems();var t=u.Application.model.eventNewYear.ratings.ratingItems;t.sort(function(t,e){return e.score-t.score});for(var e=1,n=[],i=0,r=t;i<r.length;i++){var o=r[i],a=u.Application.profiles.getProfile(o.socialId,!0);a.isDefault&&n.push(o.socialId);var s={item:o,place:e++,profile:a};o.socialId===u.Application.dynamic.user.sUserId&&this.setupSelfData(s),this._usersList.addItem(s)}0<n.length&&c.ElkaCore.instance.promiseManager.ask(new p.RatingGetProfilesPromise(n))},EventNewYearRatingRatingsBlockMediator.prototype.setupInfo=function(){var t=this.child("titleContainer").getChildByName("infoButton");u.Application.tooltip.addTooltip(t,a.TooltipAnchor.Bottom,s.GUINames.TEXT_TOOLTIP,{text:"EVENT_NEW_YEAR_RATING_TOOLTIP"})},EventNewYearRatingRatingsBlockMediator.prototype.destroy=function(){this._loadingAnimation&&this._loadingAnimation.stop(),e.prototype.destroy.call(this)},EventNewYearRatingRatingsBlockMediator}(n.DisplayObjectContainerMediator);e.EventNewYearRatingRatingsBlockMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(83),n(40),n(58)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function EventNewYearRatingRatingItemMediator(){return null!==e&&e.apply(this,arguments)||this}return c(EventNewYearRatingRatingItemMediator,e),EventNewYearRatingRatingItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setup()},EventNewYearRatingRatingItemMediator.prototype.setup=function(){if(this._placeLabel=this.child("placeLabel"),this._avatarImage=this.child("avatarImage"),this._nameLabel=this.child("nameLabel"),this._scoreLabel=this.child("scoreLabel"),this._placeLabel.text=this._showData.place.toString(),this._scoreLabel.text=this._showData.item.score.toString(),this._showData.profile.userId===i.Application.dynamic.user.sUserId){var t=this.child("myBg");t&&(t.visible=!0,this.child("commonBg").visible=!1)}this._profileRenderer=new o.ProfileRenderer,this._profileRenderer.initialize(this._showData.profile,this._container,{cropedFirstnameLength:15,cropedLastnameLength:15,delimiter:"\n",cropedFisrtnameSuffix:a.StringUtils.DEFAULT_CROP_SUFFIX,cropedLastnameSuffix:a.StringUtils.DEFAULT_CROP_SUFFIX}),this._showData.profile.isDefault&&this.registerListener(i.Application.model.ratings,r.RatingDataEvent.GET_PROFILES,this.onGetProfiles.bind(this))},EventNewYearRatingRatingItemMediator.prototype.onGetProfiles=function(){var t=i.Application.profiles.getProfile(this._showData.item.socialId,!0);t.isDefault||(this.unregisterListener(i.Application.model.ratings,r.RatingDataEvent.GET_PROFILES,this.onGetProfiles.bind(this)),this.updateProfile(t))},EventNewYearRatingRatingItemMediator.prototype.updateProfile=function(t){this._profileRenderer.update(t)},EventNewYearRatingRatingItemMediator.prototype.destroy=function(){this._profileRenderer.destroy(),e.prototype.destroy.call(this)},EventNewYearRatingRatingItemMediator}(n.DisplayObjectContainerMediator);e.EventNewYearRatingRatingItemMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(16),n(59)],void 0===(r=function(t,e,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function EventNewYearLimitWindowMediator(){return null!==r&&r.apply(this,arguments)||this}return c(EventNewYearLimitWindowMediator,r),EventNewYearLimitWindowMediator.prototype.initialize=function(t){r.prototype.initialize.call(this,t);var e=o.Application.mail.getInbox(s.EventNewYearModule.INBOX_ID).getAllItems().length,n=o.Application.model.eventNewYear.calculatedPlaceSize;this.child("limitLabel").text=e+"/"+n;var i=this.child("bgImage");this._loadableImage=new a.LoadableImage(i,i.resource)},EventNewYearLimitWindowMediator.prototype.destroy=function(){this._loadableImage&&this._loadableImage.destroy(),r.prototype.destroy.call(this)},EventNewYearLimitWindowMediator}(n.DisplayObjectContainerMediator);e.EventNewYearLimitWindowMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},c=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1769),n(0)],void 0===(r=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function EventNewYearInitCommand(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearInitCommand,t),EventNewYearInitCommand.prototype.execute=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.getFriendsData(),[4,o.Application.server.send(new i.EventNewYearInitAction(e))];case 1:return t.sent(),[2]}})})},EventNewYearInitCommand.prototype.getFriendsData=function(){for(var t=[],e=0,n=0,i=o.Application.dynamic.friends.items;n<i.length;n++){var r=i[n];if(!r.isNPC&&(t.push(r.userId+":"+r.sUserId+":"+r.hash),500==++e))break}return t},EventNewYearInitCommand}(n.CommandBase);e.EventNewYearInitCommand=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(n){function EventNewYearInitAction(t){var e=n.call(this)||this;return e.action="init",e.controller="eventNewYear",e.input=new i.ActionInput({friendsData:t}),e.output=new o,e}return a(EventNewYearInitAction,n),EventNewYearInitAction}(n.Action);e.EventNewYearInitAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),c=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(16),n(59),n(4),n(264),n(169)],void 0===(r=function(t,e,n,p,l,d,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=uipixi.GestureEvent,a=function(u){function EventNewYearGiftsWindowMediator(){return null!==u&&u.apply(this,arguments)||this}return s(EventNewYearGiftsWindowMediator,u),EventNewYearGiftsWindowMediator.prototype.initialize=function(t){var e=this;u.prototype.initialize.call(this,t);var n=this.child("itemsList");this._eventModel=p.Application.model.eventNewYear;for(var i=p.Application.mail.getInbox(d.EventNewYearModule.INBOX_ID),r=0,o=[d.EventNewYearResource.GIFT_1,d.EventNewYearResource.GIFT_2,d.EventNewYearResource.GIFT_3];r<o.length;r++){var a=o[r],s=i.getInboxItemsByItemId(a).filter(function(t){return!e._eventModel.presents.isResourceReceived(t.inboxKey)});0<s.length&&n.addItem({type:a,items:s})}this.registerListener(this.child("openEventButton"),h.POINTER_TAP,this.onOpenEvent.bind(this));var c=this.child("headerImage");this._loadableImage=new l.LoadableImage(c,c.resource)},EventNewYearGiftsWindowMediator.prototype.onOpenEvent=function(){return c(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,i.ElkaCore.instance.promiseManager.ask(new r.EventNewYearShowWindowPromise(o.EventNewYearWindowTabName.MAIL))];case 1:return t.sent(),this._cancellationToken.requested?[2]:(p.Application.view.hide(this.viewHandle),[2])}})})},EventNewYearGiftsWindowMediator.prototype.destroy=function(){this._loadableImage&&this._loadableImage.destroy(),u.prototype.destroy.call(this)},EventNewYearGiftsWindowMediator}(n.DisplayObjectContainerMediator);e.EventNewYearGiftsWindowMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(54),n(14)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function EventNewYearGiftsWindowItemMediator(){return null!==e&&e.apply(this,arguments)||this}return s(EventNewYearGiftsWindowItemMediator,e),EventNewYearGiftsWindowItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._awardRenderer=(new i.AwardRenderer).initialize(new r.CalculatedAwardItem(o.AwardType.RESOURCE,this._showData.items.length,this._showData.type),this._container,{iconId:96})},EventNewYearGiftsWindowItemMediator.prototype.destroy=function(){this._awardRenderer&&this._awardRenderer.destroy(),e.prototype.destroy.call(this)},EventNewYearGiftsWindowItemMediator}(n.DisplayObjectContainerMediator);e.EventNewYearGiftsWindowItemMediator=a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(0),n(7),n(2),n(59),n(41)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function EventNewYearCheckNewCommand(){return null!==t&&t.apply(this,arguments)||this}return c(EventNewYearCheckNewCommand,t),EventNewYearCheckNewCommand.prototype.execute=function(e){return u(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return n.Application.model.eventNewYear.phase!==a.EventNewYearPhase.GENERAL||n.Application.model.eventNewYear.presents.receivedCount===n.Application.mail.getInbox(o.EventNewYearModule.INBOX_ID).getAllItems().length?[3,2]:[4,n.Application.view.show(r.GUINames.EVENT_NEW_YEAR_GIFTS_WINDOW).onClose];case 1:return t.sent(),e.resolve({shown:!0}),[2];case 2:return e.resolve({shown:!1}),[2]}})})},EventNewYearCheckNewCommand}(i.CommandBase);e.EventNewYearCheckNewCommand=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(41),n(0),n(90),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(e){function EventNewYearUseEnergyHUDMediator(){return null!==e&&e.apply(this,arguments)||this}return u(EventNewYearUseEnergyHUDMediator,e),EventNewYearUseEnergyHUDMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._eventNewYearModel=r.Application.model.eventNewYear,this._eventNewYearModel.phase!==i.EventNewYearPhase.NONE&&this.addBar(),this.registerListener(this._eventNewYearModel,o.EventNewYearEvent.PHASE_START,this.onPhaseChanged.bind(this)),this.registerListener(this._eventNewYearModel,o.EventNewYearEvent.PHASE_FINISH,this.onPhaseChanged.bind(this))},EventNewYearUseEnergyHUDMediator.prototype.addBar=function(){this._bar=r.Application.view.addChild(this._container,a.GUINames.EVENT_NEW_YEAR_EXP_BAR,new s.ViewContext({parent:this._mapData.type})).displayObject},EventNewYearUseEnergyHUDMediator.prototype.removeBar=function(){this._container.removeChild(this._bar),this._bar=null},EventNewYearUseEnergyHUDMediator.prototype.onPhaseChanged=function(){this._bar&&this.removeBar(),this._eventNewYearModel.phase!==i.EventNewYearPhase.NONE&&this.addBar()},EventNewYearUseEnergyHUDMediator}(n.DisplayObjectContainerMediator);e.EventNewYearUseEnergyHUDMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(168),n(21),n(2)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function EventNewYearUseEnergyBarMediator(){return null!==e&&e.apply(this,arguments)||this}return c(EventNewYearUseEnergyBarMediator,e),EventNewYearUseEnergyBarMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=i.Application.model.eventNewYear.useEnergy,this._awardsList=this.child("awardsList"),this._expBar=this.child("expBar"),this._container.currentState=this._showData.parent,this.updateAwards(),this.updateExpBar(),this.registerListener(this._model,r.EventNewYearUseEnergyModelEvent.LEVEL_UP,this.onLevelUp.bind(this)),this.registerListener(this._model,r.EventNewYearUseEnergyModelEvent.EXP_CHANGED,this.updateExpBar.bind(this)),i.Application.tooltip.addTooltip(this._container,o.TooltipAnchor.Bottom,a.GUINames.EVENT_NEW_YEAR_EXP_BAR_TOOLTIP,{})},EventNewYearUseEnergyBarMediator.prototype.updateAwards=function(){this._awardsList.removeAllItems(),this._awardsList.addItems(this._model.getLevelAwards(this._model.level+1).awards)},EventNewYearUseEnergyBarMediator.prototype.updateExpBar=function(){var t=this._model.getExpToLevel(this._model.level),e=this._model.getExpToLevel(this._model.level+1);this._expBar.progress=(this._model.exp-t)/(e-t)},EventNewYearUseEnergyBarMediator.prototype.onLevelUp=function(){this.updateAwards(),this.updateExpBar()},EventNewYearUseEnergyBarMediator}(n.DisplayObjectContainerMediator);e.EventNewYearUseEnergyBarMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function EventNewYearUseEnergyBarAwardItemMediator(){return null!==e&&e.apply(this,arguments)||this}return a(EventNewYearUseEnergyBarAwardItemMediator,e),EventNewYearUseEnergyBarAwardItemMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._renderer=(new i.AwardRenderer).initialize(this._showData,this._container,{iconId:48})},EventNewYearUseEnergyBarAwardItemMediator.prototype.destroy=function(){this._renderer.destroy(),e.prototype.destroy.call(this)},EventNewYearUseEnergyBarAwardItemMediator}(n.DisplayObjectContainerMediator);e.EventNewYearUseEnergyBarAwardItemMediator=r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(99)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearUseEnergyBarTooltipMediator(){return null!==t&&t.apply(this,arguments)||this}return a(EventNewYearUseEnergyBarTooltipMediator,t),EventNewYearUseEnergyBarTooltipMediator.prototype.onInitialize=function(){this.child("countLabel").text=(this._mapData.getExpToLevel(this._mapData.level+1)-this._mapData.exp).toString()},EventNewYearUseEnergyBarTooltipMediator}(n.TooltipMediator);e.EventNewYearUseEnergyBarTooltipMediator=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(168),n(415)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function EventNewYearUseEnergyLevelUpAnimationMediator(){return null!==e&&e.apply(this,arguments)||this}return a(EventNewYearUseEnergyLevelUpAnimationMediator,e),EventNewYearUseEnergyLevelUpAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._model=n.Application.model.eventNewYear.useEnergy,this.registerListener(this._model,i.EventNewYearUseEnergyModelEvent.LEVEL_UP,this.onLevelUp.bind(this))},EventNewYearUseEnergyLevelUpAnimationMediator.prototype.onLevelUp=function(){var t=this._model.getLevelAwards(this._model.level);this.throwAwards(t.awards)},EventNewYearUseEnergyLevelUpAnimationMediator.prototype.getStartPointDisplayObject=function(){return this.child("awardsList")},EventNewYearUseEnergyLevelUpAnimationMediator}(r.BaseThrowAwardLevelUpAnimationMediator);e.EventNewYearUseEnergyLevelUpAnimationMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(416),n(0),n(168),n(59),n(2)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){function EventNewYearUseEnergyLevelUpGladeAnimationMediator(){return null!==e&&e.apply(this,arguments)||this}return c(EventNewYearUseEnergyLevelUpGladeAnimationMediator,e),EventNewYearUseEnergyLevelUpGladeAnimationMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.registerEndPoint(o.EventNewYearResource.GIFT_1,a.GUINames.EVENT_NEW_YEAR_ICON),this.registerEndPoint(o.EventNewYearResource.GIFT_2,a.GUINames.EVENT_NEW_YEAR_ICON),this.registerEndPoint(o.EventNewYearResource.GIFT_3,a.GUINames.EVENT_NEW_YEAR_ICON),this.registerEndPoint(o.EventNewYearResource.STAR,a.GUINames.EVENT_NEW_YEAR_ICON),this._model=i.Application.model.eventNewYear.useEnergy,this.registerListener(this._model,r.EventNewYearUseEnergyModelEvent.LEVEL_UP,this.onLevelUp.bind(this))},EventNewYearUseEnergyLevelUpGladeAnimationMediator.prototype.onLevelUp=function(){if(i.Application.view.onGlade){var t=this._model.getLevelAwards(this._model.level);this.throwAwards(t.awards,-1)}},EventNewYearUseEnergyLevelUpGladeAnimationMediator.prototype.getStartPointDisplayObject=function(t){return this.child("awardsList")},EventNewYearUseEnergyLevelUpGladeAnimationMediator}(n.BaseThrowAwardLevelUpGladeAnimationMediator);e.EventNewYearUseEnergyLevelUpGladeAnimationMediator=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(41)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function EventNewYearRatingTabMediator(){return null!==e&&e.apply(this,arguments)||this}return a(EventNewYearRatingTabMediator,e),EventNewYearRatingTabMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setupPhase()},EventNewYearRatingTabMediator.prototype.setupPhase=function(){switch(i.Application.model.eventNewYear.phase){case r.EventNewYearPhase.GENERAL:this._container.currentState="general";break;case r.EventNewYearPhase.EXTRA:this._container.currentState="extra"}},EventNewYearRatingTabMediator}(n.DisplayObjectContainerMediator);e.EventNewYearRatingTabMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(1781),n(0),n(8),n(2)],void 0===(r=function(t,e,n,r,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearGetRatingAwardCommand(){return null!==t&&t.apply(this,arguments)||this}return c(EventNewYearGetRatingAwardCommand,t),EventNewYearGetRatingAwardCommand.prototype.execute=function(t){return u(this,void 0,void 0,function(){var e,n,i;return p(this,function(t){switch(t.label){case 0:return[4,o.Application.server.send(new r.EventNewYearGetRatingAwardAction)];case 1:return e=t.sent(),n=o.Application.award.convertObjectToCalculated(e.output.award),i=new a.ViewContext({baseAward:n,title:o.Application.localization.localize("EVENT_NEW_YEAR_RATING_AWARD_WINDOW_TITLE"),description:o.Application.localization.localize("EVENT_NEW_YEAR_RATING_AWARD_WINDOW_DESCRIPTION")}),[4,o.Application.view.show(s.GUINames.AWARDS_WINDOW,i).onClose];case 2:return t.sent(),o.Application.award.accrueAwardImmediately(e.output.award),[2]}})})},EventNewYearGetRatingAwardCommand}(n.CommandBase);e.EventNewYearGetRatingAwardCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function EventNewYearGetRatingAwardAction(){var t=e.call(this)||this;return t.action="getRatingAward",t.controller="eventNewYear",t.input=new i.ActionInput,t.output=new o,t}return a(EventNewYearGetRatingAwardAction,e),EventNewYearGetRatingAwardAction}(n.Action);e.EventNewYearGetRatingAwardAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){this.data=t.data,this.award=this.data.award},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(15),n(0),n(517),n(4),n(262)],void 0===(r=function(t,e,n,o,i,r,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=uipixi.GestureEvent,u=function(n){function EventNewYearRatingLeftExtraMediator(){var t=null!==n&&n.apply(this,arguments)||this;return t._awardRenderers=[],t}return p(EventNewYearRatingLeftExtraMediator,n),EventNewYearRatingLeftExtraMediator.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.registerListener(i.Application.model.eventNewYear.ratings,s.EventNewYearRatingsModelEvent.RATING_LOADED,this.onRatingLoaded.bind(this))},EventNewYearRatingLeftExtraMediator.prototype.onRatingLoaded=function(){this.setup()},EventNewYearRatingLeftExtraMediator.prototype.setup=function(){var t=i.Application.model.eventNewYear.ratings.myAwardPlace,e=i.Application.model.eventNewYear.ratings.myRatingAward;switch(t){case 1:this.initContainer1(e);break;case 2:this.initContainer2(e);break;case 3:this.initContainer3(e)}this.setupButtonContainer()},EventNewYearRatingLeftExtraMediator.prototype.initContainer1=function(t){this._container.currentState="award_1";var e=this.child("award_1");this._buttonContainer=e.getChildByName("buttonContainer");var n=e.getChildByName("placeContainer");this.setPlaceLabel(n.getChildByName("placeLabel"));var i=e.getChildByName("awardContainer");this.setupAwardContainer(i.getChildByName("awardContainer1"),t.awards[0]),this.setupAwardContainer(i.getChildByName("awardContainer2"),t.awards[1]),this.setupAwardContainer(i.getChildByName("awardContainer3"),t.awards[2]);var r=new o.AwardRenderer;r.initialize(t.awards[3],i.getChildByName("awardContainer4"),{iconId:96}),this._awardRenderers.push(r)},EventNewYearRatingLeftExtraMediator.prototype.initContainer2=function(t){this._container.currentState="award_2";var e=this.child("award_2");this._buttonContainer=e.getChildByName("buttonContainer");var n=e.getChildByName("placeContainer");this.setPlaceLabel(n.getChildByName("placeLabel"));var i=e.getChildByName("awardContainer");this.setupAwardContainer(i.getChildByName("awardContainer1"),t.awards[0]),this.setupAwardContainer(i.getChildByName("awardContainer2"),t.awards[1])},EventNewYearRatingLeftExtraMediator.prototype.initContainer3=function(t){this._container.currentState="award_3";var e=this.child("award_3");this._buttonContainer=e.getChildByName("buttonContainer");var n=e.getChildByName("placeContainer");this.setPlaceLabel(n.getChildByName("placeLabel"));var i=e.getChildByName("awardContainer");this.setupAwardContainer(i.getChildByName("awardContainer1"),t.awards[0])},EventNewYearRatingLeftExtraMediator.prototype.setupButtonContainer=function(){if(0<i.Application.model.eventNewYear.ratingPlace)this._buttonContainer.currentState="complete";else{this._buttonContainer.currentState="ready";var t=this._buttonContainer.getChildByName("getAwardButton");this.registerListener(t,c.POINTER_TAP,this.onTapGetAward.bind(this))}},EventNewYearRatingLeftExtraMediator.prototype.onTapGetAward=function(){a.ElkaCore.instance.promiseManager.ask(new r.EventNewYearGetRatingAwardPromise),this._buttonContainer.currentState="complete"},EventNewYearRatingLeftExtraMediator.prototype.setPlaceLabel=function(t){var e=0<i.Application.model.eventNewYear.ratingPlace?i.Application.model.eventNewYear.ratingPlace:i.Application.model.eventNewYear.ratings.myListPlace;t.text=i.Application.localization.localize("EVENT_NEW_YEAR_RATING_EVENT_END_PLACE",{place:e.toString()})},EventNewYearRatingLeftExtraMediator.prototype.setupAwardContainer=function(t,e){var n=new o.AwardRenderer;n.initialize(e,t,{fit:32,iconId:64}),this._awardRenderers.push(n)},EventNewYearRatingLeftExtraMediator.prototype.destroy=function(){for(var t=0,e=this._awardRenderers;t<e.length;t++){e[t].destroy()}n.prototype.destroy.call(this)},EventNewYearRatingLeftExtraMediator}(n.DisplayObjectContainerMediator);e.EventNewYearRatingLeftExtraMediator=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},p=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(518),n(2),n(8)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function EventNewYearWindowOpenGiftCommand(){return null!==t&&t.apply(this,arguments)||this}return c(EventNewYearWindowOpenGiftCommand,t),EventNewYearWindowOpenGiftCommand.prototype.execute=function(n){return u(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,i.Application.server.send(new r.EventNewYearOpenPresentAction(n.mailId))];case 1:return e=t.sent(),i.Application.model.eventNewYear.presents.open(n.mailId),[4,i.Application.resources.getResources(["eventNewYear_open_bg"],!0)];case 2:return t.sent(),i.Application.view.show(o.GUINames.EVENT_NEW_YEAR_OPEN_GIFT_WINDOW,new a.ViewContext({inboxKey:n.mailId,awards:e.output.award,slots:e.output.slots})),[2]}})})},EventNewYearWindowOpenGiftCommand}(n.CommandBase);e.EventNewYearWindowOpenGiftCommand=s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(1),n(0),n(16),n(59),n(40),n(58),n(15),n(518)],void 0===(r=function(t,e,n,a,s,i,c,r,o,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=uipixi.GestureEvent,l=function(n){function EventNewYearOpenGiftWindowMediator(){var t,e=null!==n&&n.apply(this,arguments)||this;return e._loadableImages=[],e._stateByResourceId=((t={})[i.EventNewYearResource.GIFT_1]="gift1",t[i.EventNewYearResource.GIFT_2]="gift2",t[i.EventNewYearResource.GIFT_3]="gift3",t),e._messages=["EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_1","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_2","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_3","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_4","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_5","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_6","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_7","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_8","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_9","EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TEXT_10"],e._awardRenderers={},e}return d(EventNewYearOpenGiftWindowMediator,n),EventNewYearOpenGiftWindowMediator.prototype.initialize=function(t){for(var e in n.prototype.initialize.call(this,t),this._eventModel=a.Application.model.eventNewYear,this._inboxModel=a.Application.mail.getInbox(i.EventNewYearModule.INBOX_ID),this.registerListener(this.child("continueButton"),p.POINTER_TAP,this.onContinueButton.bind(this)),this.registerListener(this.child("nextGiftButton"),p.POINTER_TAP,this.onNextButton.bind(this)),this._nextGiftContainer=this.child("nextGiftContainer"),this._profileRenderer=(new c.ProfileRenderer).initialize(null,this.child("profileContainer"),{renderOnInit:!1,cropedFullnameLength:19,cropedFisrtnameSuffix:r.StringUtils.DEFAULT_CROP_SUFFIX,cropedLastnameSuffix:r.StringUtils.DEFAULT_CROP_SUFFIX}),this._showData.slots)this._awardRenderers[e]=(new o.AwardRenderer).initialize(null,this.child("awardSlot"+e),{iconId:64,renderOnInit:!1});this.updateData(this._showData.inboxKey,this._showData.slots,this._showData.awards)},EventNewYearOpenGiftWindowMediator.prototype.loadNextProfile=function(n){return h(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return this._friendNextUserEntity=a.Application.profiles.getProfile(n.socialId,!0),this.setNextProfile(),this._friendNextUserEntity.isDefault?[4,a.Application.profiles.getProfiles([n.socialId])]:[3,2];case 1:if(e=t.sent(),this._cancellationToken.requested)return[2];this._friendNextUserEntity=e[0],this.setNextProfile(),t.label=2;case 2:return[2]}})})},EventNewYearOpenGiftWindowMediator.prototype.setNextProfile=function(){this._friendNextUserEntity&&this._profileNextRenderer.update(this._friendNextUserEntity)},EventNewYearOpenGiftWindowMediator.prototype.loadProfile=function(){return h(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return this._friendUserEntity=a.Application.profiles.getProfile(this._inboxItemModel.socialId,!0),this.setProfile(),this._friendUserEntity.isDefault?[4,a.Application.profiles.getProfiles([this._inboxItemModel.socialId])]:[3,2];case 1:if(e=t.sent(),this._cancellationToken.requested)return[2];this._friendUserEntity=e[0],this.setProfile(),t.label=2;case 2:return[2]}})})},EventNewYearOpenGiftWindowMediator.prototype.setProfile=function(){this._friendUserEntity&&this._profileRenderer.update(this._friendUserEntity)},EventNewYearOpenGiftWindowMediator.prototype.onNextButton=function(){return h(this,void 0,void 0,function(){var e,n;return _(this,function(t){switch(t.label){case 0:return a.Application.award.accrueAwardImmediately(this._currentAwards),e=this._nextItem.inboxKey,[4,a.Application.server.send(new u.EventNewYearOpenPresentAction(e))];case 1:return n=t.sent(),a.Application.model.eventNewYear.presents.open(e),this._cancellationToken.requested?[2]:(this.updateData(e,n.output.slots,n.output.award),[2])}})})},EventNewYearOpenGiftWindowMediator.prototype.onContinueButton=function(){a.Application.award.accrueAwardImmediately(this._currentAwards),a.Application.view.hide(this.viewHandle)},EventNewYearOpenGiftWindowMediator.prototype.setAwards=function(t){for(var e in t){var n=a.Application.award.convertObjectToCalculated(t[e]);this._awardRenderers[e].updateAward(n.awards[0])}},EventNewYearOpenGiftWindowMediator.prototype.updateData=function(t,e,n){var i=this;this.clearLoaders(),this._currentAwards=n,this._inboxItemModel=this._inboxModel.getInboxItem(t),this._container.currentState=this._stateByResourceId[this._inboxItemModel.itemId],this.child("messageLabel").text=a.Application.localization.localize(this._messages[Math.floor(Math.random()*(this._messages.length-.1))]);var r=this._eventModel.presents.isResourceSent(this._inboxItemModel.userId,this._inboxItemModel.itemId);this.child("titleLabel").text=a.Application.localization.localize(r?"EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TITLE_MUTUAL":"EVENT_NEW_YEAR_OPEN_GIFT_WINDOW_TITLE_NOT_MUTUAL"),this.setAwards(e),this._nextGiftContainer.visible=!1;var o=this._inboxModel.getInboxItemsForUser(this._inboxItemModel.socialId).filter(function(t){return!i._eventModel.presents.isOpened(t.inboxKey)});0===o.length&&(o=this._inboxModel.getAllItems().filter(function(t){return!i._eventModel.presents.isOpened(t.inboxKey)})),0<o.length&&(this._nextItem=o[0],this._profileNextRenderer=(new c.ProfileRenderer).initialize(null,this.child("nextGiftImageContainer"),{renderOnInit:!1}),this._nextGiftAnimation=a.Application.animation.animate(this._nextGiftContainer,"eventNewYearShowNext",{button:this.child("nextGiftButtonContainer"),image:this.child("nextGiftImageContainer"),shine:this.child("shineContainer")}),this.loadNextProfile(this._nextItem)),["boxIconImage","slotsImage"].forEach(function(t){var e=i.child(t);i._loadableImages.push(new s.LoadableImage(e,e.resource))}),this.loadProfile(),this._animation=a.Application.animation.animate(null,"eventNewYearOpenGiftWindow",{continueButton:this.child("continueButton"),bg:this.child("letterContainer")})},EventNewYearOpenGiftWindowMediator.prototype.clearLoaders=function(){for(var t=0,e=this._loadableImages;t<e.length;t++){e[t].destroy()}this._loadableImages=[],this._profileNextRenderer&&(this._profileNextRenderer.destroy(),this._profileNextRenderer=null),this._animation&&(this._animation.stop(),this._animation=null),this._nextGiftAnimation&&(this._nextGiftAnimation.stop(),this._nextGiftAnimation=null)},EventNewYearOpenGiftWindowMediator.prototype.destroy=function(){for(var t in this.clearLoaders(),this._awardRenderers)this._awardRenderers[t].destroy();this._profileRenderer.destroy(),n.prototype.destroy.call(this)},EventNewYearOpenGiftWindowMediator}(n.DisplayObjectContainerMediator);e.EventNewYearOpenGiftWindowMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(41),n(0)],void 0===(r=function(t,e,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(e){function EventNewYearContainerStatePhaseMediator(){return null!==e&&e.apply(this,arguments)||this}return a(EventNewYearContainerStatePhaseMediator,e),EventNewYearContainerStatePhaseMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._container.currentState=r.Application.model.eventNewYear.phase===i.EventNewYearPhase.GENERAL?"general":"extra"},EventNewYearContainerStatePhaseMediator}(n.DisplayObjectContainerMediator);e.EventNewYearContainerStatePhaseMediator=o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(1),n(0),n(42),n(4),n(519),n(38),n(59)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=uipixi.GestureEvent,p=uipixi.Point,l=function(e){function EventNewYearWindowStarSlotMediator(){return null!==e&&e.apply(this,arguments)||this}return d(EventNewYearWindowStarSlotMediator,e),EventNewYearWindowStarSlotMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._resourceModel=i.Application.model.resources.get(c.EventNewYearResource.STAR),this.registerListener(this._resourceModel,r.ResourceModelEvent.COUNT_CHANGED,this.onCountChange.bind(this)),this._iconImage=this.child("iconImage"),this._iconImage.resource=s.PriceAwardUtils.getResourceResourceId(this._resourceModel.id,"96"),this._countLabel=this.child("countLabel"),this._sendButton=this.child("sendButton"),this.registerListener(this._sendButton,u.POINTER_TAP,this.onButton.bind(this)),this.onCountChange()},EventNewYearWindowStarSlotMediator.prototype.onCountChange=function(){this._countLabel.text="x"+this._resourceModel.count,this._sendButton.enabled=0<this._resourceModel.count},EventNewYearWindowStarSlotMediator.prototype.onButton=function(){if(0<this._resourceModel.count){var t={startPoint:this._iconImage.getGlobalPosition().add(new p(this._iconImage.width/2,this._iconImage.height/2)),resourceId:this._resourceModel.id};o.ElkaCore.instance.promiseManager.ask(new a.EventNewYearWindowSpendStarsPromise(this._resourceModel.id,this._resourceModel.count,t))}},EventNewYearWindowStarSlotMediator}(n.DisplayObjectContainerMediator);e.EventNewYearWindowStarSlotMediator=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),h=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},_=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(49),n(116),n(115),n(61),n(1788),n(85)],void 0===(r=function(t,e,n,o,a,s,c,u,p,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function EventNewYearWindowSpendStarsCommand(){return null!==t&&t.apply(this,arguments)||this}return d(EventNewYearWindowSpendStarsCommand,t),EventNewYearWindowSpendStarsCommand.prototype.execute=function(r){return h(this,void 0,void 0,function(){var e,n,i;return _(this,function(t){switch(t.label){case 0:if((e=new c.CalculatedPrice).add(new s.CalculatedPriceItem(a.PriceType.RESOURCE,r.count,r.resourceId)),!(n=o.Application.price.hold(e)).success)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o.Application.server.send(new p.EventNewYearSpendStarsAction)];case 2:return t.sent(),[3,4];case 3:if((i=t.sent())instanceof u.ServerError)return o.Application.price.rollback(n),[2];throw i;case 4:return o.Application.model.eventNewYear.achievements.extraAchievement.dispatchEvent(new l.EventNewYearAchievementModelEvent(l.EventNewYearAchievementModelEvent.ANIMATE_GIFT,r.animData)),o.Application.price.release(n),[2]}})})},EventNewYearWindowSpendStarsCommand}(n.CommandBase);e.EventNewYearWindowSpendStarsCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(9),n(10)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function EventNewYearSpendStarsAction(){var t=e.call(this)||this;return t.action="spendStars",t.controller="eventNewYear",t.input=new i.ActionInput({}),t.output=new o,t}return a(EventNewYearSpendStarsAction,e),EventNewYearSpendStarsAction}(n.Action);e.EventNewYearSpendStarsAction=r;var o=function(){function Output(){}return Output.prototype.parse=function(t){},Output}()}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,p=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(4),n(0),n(22),n(18),n(265),n(1790)],void 0===(r=function(t,e,n,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function ClientHelpModule(){return null!==t&&t.apply(this,arguments)||this}return p(ClientHelpModule,t),ClientHelpModule.prototype.initialize=function(t){this._setStatusStaticData=r.Application.static.data.client.clientHelp,i.ElkaCore.instance.promiseManager.ask(new a.RegisterModuleLoaderPromise(this))},ClientHelpModule.prototype.onPreloadModule=function(t){this.attachPromises()},ClientHelpModule.prototype.attachPromises=function(){o.CommandMap.map(s.ShowClientHelpWindowPromise,c.ShowClientHelpWindowCommand)},ClientHelpModule}(n.Module);e.ClientHelpModule=u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=this&&this.__awaiter||function(n,i,r,o){return new(r||(r=Promise))(function(t,e){function fulfilled(t){try{step(o.next(t))}catch(t){e(t)}}function rejected(t){try{step(o.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((o=o.apply(n,i||[])).next())})},l=this&&this.__generator||function(n,i){var r,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(n,s)}catch(t){e=[6,t],o=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};i=[n,e,n(7),n(0),n(8),n(1791)],void 0===(r=function(t,e,n,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function ShowClientHelpWindowCommand(){return null!==t&&t.apply(this,arguments)||this}return u(ShowClientHelpWindowCommand,t),ShowClientHelpWindowCommand.prototype.execute=function(o){return p(this,void 0,void 0,function(){var e,n,i,r;return l(this,function(t){switch(t.label){case 0:return e=a.Application.static.data.client.clientHelp.help.getItem(o.clientHelpId),n=0===a.Application.model.clientParams.getParam(e.clientParamId).number,!o.force&&n?(o.resolve(null),[2]):(i=e.windowId,a.Application.view.mapMediator(i,c.ClientHelpWindowMediator),r=new s.ViewContext(e),[4,a.Application.view.show(i,r).onClose]);case 1:return t.sent(),a.Application.view.unmapMediator(i,c.ClientHelpWindowMediator),[2]}})})},ShowClientHelpWindowCommand}(n.CommandBase);e.ShowClientHelpWindowCommand=i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,u=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(4),n(208),n(16)],void 0===(r=function(t,e,n,i,r,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=uipixi.GestureEvent,c=function(e){function ClientHelpWindowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentPage=0,t}return u(ClientHelpWindowMediator,e),ClientHelpWindowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._loadableImages=new core.Map,this._pageLabel=this.child("pageLabel"),this._pageImage=this.child("pageImage"),this._checkBox=this.child("dontShowCheckBox"),this._checkBox.selected=0===n.Application.model.clientParams.getParam(this._showData.clientParamId).number,this._oldValue=this._checkBox.selected,this.registerListener(this.child("prevButton"),s.POINTER_TAP,this.onPrevButton.bind(this)),this.registerListener(this.child("nextButton"),s.POINTER_TAP,this.onNextButton.bind(this)),this._showData.title&&(this.child("titleLabel").text=n.Application.localization.localize(this._showData.title)),this.fillPageData()},ClientHelpWindowMediator.prototype.onPrevButton=function(){this._currentPage=0<this._currentPage?this._currentPage-1:this._showData.page.length-1,this.fillPageData()},ClientHelpWindowMediator.prototype.onNextButton=function(){this._currentPage=this._currentPage<this._showData.page.length-1?this._currentPage+1:0,this.fillPageData()},ClientHelpWindowMediator.prototype.fillPageData=function(){var t=this._showData.page[this._currentPage];this._pageLabel.text=n.Application.localization.localize(t.text),this._loadableImages.set(t.image,new a.LoadableImage(this._pageImage,t.image))},ClientHelpWindowMediator.prototype.destroy=function(){this._oldValue!==this._checkBox.selected&&r.ElkaCore.instance.promiseManager.ask(new o.SetClientParamPromise(this._showData.clientParamId,this._checkBox.selected?0:1)),this._loadableImages.forEach(function(t){return t.destroy()}),e.prototype.destroy.call(this)},ClientHelpWindowMediator}(i.DisplayObjectContainerMediator);e.ClientHelpWindowMediator=c}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(20),n(0),n(2),n(26),n(4),n(51),n(18),n(1793),n(119)],void 0===(r=function(t,e,n,i,r,o,a,s,c,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function SnowModule(){return null!==t&&t.apply(this,arguments)||this}return d(SnowModule,t),SnowModule.prototype.initialize=function(t){p.UIUtils.isWebGLRender()&&(a.ElkaCore.instance.promiseManager.ask(new c.RegisterModuleLoaderPromise(this)),a.ElkaCore.instance.promiseManager.ask(new s.RegisterSeasonLoaderPromise(this)))},SnowModule.prototype.onPreloadModule=function(t){i.Application.view.mapMediator(r.GUINames.SNOW,u.SnowMediator)},SnowModule.prototype.onVisitSeason=function(t){this.showSnow(t)},SnowModule.prototype.showSnow=function(t){1===t?this._snowHandle||(this._snowHandle=i.Application.view.show(r.GUINames.SNOW,null,o.WindowLayer.SNOW)):this.hideSnow()},SnowModule.prototype.hideSnow=function(){this._snowHandle&&(i.Application.view.hide(this._snowHandle),this._snowHandle=null)},SnowModule}(n.Module);e.SnowModule=l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o,d=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});i=[n,e,n(0),n(1),n(207),n(341)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=uipixi.UIImage,s=uipixi.UIEvent,c=PIXI.Ticker,u=uipixi.WindowsManagerEvent,p=function(t){function Particle(){return null!==t&&t.apply(this,arguments)||this}return d(Particle,t),Particle}(a),l=function(e){function SnowMediator(){var t=null!==e&&e.apply(this,arguments)||this;return t._paused=!1,t}return d(SnowMediator,e),SnowMediator.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._particles=[],this.registerListener(n.Application.view.ui.stage,s.STAGE_RESIZE,this.resize.bind(this)),this.registerListener(n.Application.settings.settingsData,r.SettingsEvent.SNOW_ON_CHANGED,this.onSnowChanged.bind(this)),this.registerListener(n.Application.view.ui.windows,u.WINDOW_SHOWED,this.updateActive.bind(this)),this.registerListener(n.Application.view.ui.windows,u.WINDOW_HIDED,this.updateActive.bind(this)),this._visibilityService=new o.VisibilityChangeService,this.registerListener(this._visibilityService,o.VisibilityChangeEvent.CHANGED,this.updateActive.bind(this)),this.resize()},SnowMediator.prototype.updateActive=function(){this._paused=!n.Application.view.onGlade||this._visibilityService.hidden},SnowMediator.prototype.resize=function(){n.Application.view.ui.stage.update(),this._containerWidth=this._container.width,this._containerHeight=this._container.height,this.onSnowChanged()},SnowMediator.prototype.onSnowChanged=function(){this.stopTimer(),this.removeParticles(),n.Application.settings.settingsData.snowOn&&(this.generateParticles(),this.startTimer())},SnowMediator.prototype.startTimer=function(){this._ticker=c.system,this._ticker.add(this.update,this)},SnowMediator.prototype.generateParticles=function(){for(var t=0;t<SnowMediator.COUNT;t++){var e=new p("uikit/snow_22_x_22");e.render.pivot.set(.5*e.width,.5*e.height),this.generateParticleParams(e,!1),this._particles.push(e),this._container.render.addChild(e.render)}},SnowMediator.prototype.removeParticles=function(){this._container.render.removeChildren(),this._particles.length=0},SnowMediator.prototype.update=function(){if(!this._paused)for(var t=this._ticker.deltaMS,e=0,n=this._particles;e<n.length;e++){var i=n[e];this.updateParticle(i,t)||this.generateParticleParams(i,!0)}},SnowMediator.prototype.generateParticleParams=function(t,e){t.render.scale.x=t.render.scale.y=SnowMediator.MAX_SCALE-(SnowMediator.MAX_SCALE-SnowMediator.MIN_SCALE)*Math.random(),t.render.x=this._containerWidth*Math.random(),t.halfSize=Math.min(5,7*t.render.scale.x),t.render.y=e?-t.halfSize:this._containerHeight*Math.random(),t.velocityY=SnowMediator.MAX_VELOCITY-Math.random()*(SnowMediator.MAX_VELOCITY-SnowMediator.MIN_VELOCITY),t.velocityY=t.velocityY*(t.scaleX/SnowMediator.MAX_SCALE),t.velocityX=SnowMediator.HORIZONTAL_VELOCITY*(1-2*Math.random()),t.rotationSpeed=SnowMediator.MAX_ROTATION_SPEED*(1-2*Math.random())},SnowMediator.prototype.updateParticle=function(t,e){var n=t.render.x+t.velocityX*e,i=t.render.y+t.velocityY*e;return!(n>=this._containerWidth+t.halfSize||n<=0-t.halfSize||i>=this._containerHeight+t.halfSize)&&(t.render.x=n,t.render.y=i,t.render.angle+=t.rotationSpeed*e,!0)},SnowMediator.prototype.stopTimer=function(){this._ticker&&(this._ticker.remove(this.update,this),this._ticker=null)},SnowMediator.prototype.destroy=function(){this.stopTimer(),this._visibilityService.destroy(),e.prototype.destroy.call(this)},SnowMediator.COUNT=100,SnowMediator.MAX_SCALE=.75,SnowMediator.MIN_SCALE=.3,SnowMediator.MIN_VELOCITY=.03,SnowMediator.MAX_VELOCITY=.09,SnowMediator.HORIZONTAL_VELOCITY=.018,SnowMediator.MAX_ROTATION_SPEED=.24,SnowMediator}(i.DisplayObjectContainerMediator);e.SnowMediator=l}.apply(e,i))||(t.exports=r)}]);
